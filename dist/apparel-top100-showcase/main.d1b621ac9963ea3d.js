(self.webpackChunkapparel_top100_showcase=self.webpackChunkapparel_top100_showcase||[]).push([[179],{379:(oo,so,Le)=>{"use strict";var yt={};Le.r(yt),Le.d(yt,{JsonPatchError:()=>fr,_areEquals:()=>n1,applyOperation:()=>Xp,applyPatch:()=>qC,applyReducer:()=>IEe,deepClone:()=>MEe,getValueByPointer:()=>WC,validate:()=>$z,validator:()=>YC});var Ye={};Le.r(Ye),Le.d(Ye,{compare:()=>VEe,generate:()=>ok,observe:()=>$Ee,unobserve:()=>BEe});var yn={};Le.r(yn),Le.d(yn,{aggregate:()=>hh,bin:()=>VI,collect:()=>HI,compare:()=>Cq,countpattern:()=>UI,cross:()=>zI,density:()=>GI,dotbin:()=>qI,expression:()=>Nq,extent:()=>YI,facet:()=>AD,field:()=>Mq,filter:()=>XI,flatten:()=>JI,fold:()=>QI,formula:()=>ZI,generate:()=>kq,impute:()=>eR,joinaggregate:()=>tR,kde:()=>nR,key:()=>Iq,load:()=>Rq,lookup:()=>rR,multiextent:()=>Pq,multivalues:()=>Fq,params:()=>Lq,pivot:()=>oR,prefacet:()=>jq,project:()=>sR,proxy:()=>Bq,quantile:()=>aR,relay:()=>$q,sample:()=>lR,sequence:()=>uR,sieve:()=>Vq,subflow:()=>KI,timeunit:()=>cR,tupleindex:()=>Uq,values:()=>zq,window:()=>dR});var Gt={};Le.r(Gt),Le.d(Gt,{interpolate:()=>vh,interpolateArray:()=>GTe,interpolateBasis:()=>NY,interpolateBasisClosed:()=>MY,interpolateCubehelix:()=>IAe,interpolateCubehelixLong:()=>RAe,interpolateDate:()=>FY,interpolateDiscrete:()=>mAe,interpolateHcl:()=>NAe,interpolateHclLong:()=>MAe,interpolateHsl:()=>xAe,interpolateHslLong:()=>TAe,interpolateHue:()=>_Ae,interpolateLab:()=>OAe,interpolateNumber:()=>gu,interpolateNumberArray:()=>NR,interpolateObject:()=>LY,interpolateRgb:()=>OR,interpolateRgbBasis:()=>UTe,interpolateRgbBasisClosed:()=>zTe,interpolateRound:()=>R1,interpolateString:()=>jY,interpolateTransformCss:()=>bAe,interpolateTransformSvg:()=>wAe,interpolateZoom:()=>SAe,piecewise:()=>HR,quantize:()=>PAe});var N={};Le.r(N),Le.d(N,{bound:()=>SJ,identifier:()=>pF,mark:()=>TJ,overlap:()=>AJ,render:()=>RJ,viewlayout:()=>$J});var wn={};Le.r(wn),Le.d(wn,{axisticks:()=>HJ,datajoin:()=>UJ,encode:()=>zJ,legendentries:()=>GJ,linkpath:()=>gF,pie:()=>mF,scale:()=>JJ,sortitems:()=>eQ,stack:()=>yF});var ln={};Le.r(ln),Le.d(ln,{contour:()=>XF,geojson:()=>ZF,geopath:()=>eL,geopoint:()=>tL,geoshape:()=>nL,graticule:()=>iL,heatmap:()=>rL,isocontour:()=>qF,kde2d:()=>KF,projection:()=>mZ});var En={};Le.r(En),Le.d(En,{force:()=>cL});var Wt={};Le.r(Wt),Le.d(Wt,{nest:()=>_L,pack:()=>vL,partition:()=>wL,stratify:()=>EL,tree:()=>DL,treelinks:()=>SL,treemap:()=>TL});var Ut={};Le.r(Ut),Le.d(Ut,{label:()=>PL});var Vt={};Le.r(Vt),Le.d(Vt,{loess:()=>FL,regression:()=>jL});var ei={};Le.r(ei),Le.d(ei,{voronoi:()=>UL});var Tr={};Le.r(Tr),Le.d(Tr,{wordcloud:()=>GL});var ir={};Le.r(ir),Le.d(ir,{crossfilter:()=>WL,resolvefilter:()=>qL});var It={};Le.r(It),Le.d(It,{Bounds:()=>eo,CanvasHandler:()=>nb,CanvasRenderer:()=>TS,DATE:()=>ga,DAY:()=>rs,DAYOFYEAR:()=>_c,Dataflow:()=>X0,Debug:()=>zz,Error:()=>lk,EventStream:()=>bD,Gradient:()=>QK,GroupItem:()=>sS,HOURS:()=>Ua,Handler:()=>Ah,Info:()=>Uz,Item:()=>oS,MILLISECONDS:()=>pu,MINUTES:()=>za,MONTH:()=>is,Marks:()=>Wa,MultiPulse:()=>mI,None:()=>Hz,Operator:()=>Ti,Parameters:()=>vD,Pulse:()=>fh,QUARTER:()=>pa,RenderType:()=>Nh,Renderer:()=>Oc,ResourceLoader:()=>yP,SECONDS:()=>El,SVGHandler:()=>qP,SVGRenderer:()=>eF,SVGStringRenderer:()=>iF,Scenegraph:()=>HP,TIME_UNITS:()=>$k,Transform:()=>he,View:()=>Dte,WEEK:()=>Qr,Warn:()=>uk,YEAR:()=>Io,accessor:()=>da,accessorFields:()=>Zo,accessorName:()=>hr,array:()=>Ze,ascending:()=>ZC,bandwidthNRD:()=>DI,bin:()=>rq,bootstrapCI:()=>oq,boundClip:()=>mJ,boundContext:()=>q1,boundItem:()=>VP,boundMark:()=>MX,boundStroke:()=>Yd,changeset:()=>ng,clampRange:()=>nG,codegenExpression:()=>wee,compare:()=>pk,constant:()=>ns,cumulativeLogNormal:()=>NI,cumulativeNormal:()=>DD,cumulativeUniform:()=>RI,dayofyear:()=>$G,debounce:()=>gk,defaultLocale:()=>nI,definition:()=>JW,densityLogNormal:()=>OI,densityNormal:()=>SI,densityUniform:()=>II,domChild:()=>_a,domClear:()=>vu,domCreate:()=>Th,domFind:()=>UP,dotbin:()=>sq,error:()=>be,expressionFunction:()=>jr,extend:()=>an,extent:()=>mc,extentIndex:()=>iG,falsy:()=>eh,fastmap:()=>F0,field:()=>fa,flush:()=>rG,font:()=>yS,fontFamily:()=>Q1,fontSize:()=>Ac,format:()=>fD,formatLocale:()=>cD,formats:()=>cI,hasOwnProperty:()=>gt,id:()=>i1,identity:()=>es,inferType:()=>IW,inferTypes:()=>RW,ingest:()=>Qn,inherits:()=>Fe,inrange:()=>L0,interpolate:()=>sP,interpolateColors:()=>eS,interpolateRange:()=>PK,intersect:()=>fJ,intersectBoxLine:()=>h_,intersectPath:()=>SP,intersectPoint:()=>xP,intersectRule:()=>mX,isArray:()=>Ce,isBoolean:()=>th,isDate:()=>nh,isFunction:()=>sn,isIterable:()=>oG,isNumber:()=>mi,isObject:()=>it,isRegExp:()=>sG,isString:()=>Qe,isTuple:()=>mD,key:()=>mk,lerp:()=>aG,lineHeight:()=>Sh,loader:()=>hD,locale:()=>NW,logger:()=>ck,lruCache:()=>lG,markup:()=>ZP,merge:()=>uG,mergeConfig:()=>R0,multiLineOffset:()=>jP,one:()=>I0,pad:()=>cG,panLinear:()=>Xz,panLog:()=>Jz,panPow:()=>Qz,panSymlog:()=>Zz,parse:()=>_Be,parseExpression:()=>n3,parseSelector:()=>$h,pathCurves:()=>fP,pathEqual:()=>_J,pathParse:()=>c_,pathRectangle:()=>oX,pathRender:()=>H1,pathSymbols:()=>rX,pathTrail:()=>sX,peek:()=>On,point:()=>bS,projection:()=>WF,quantileLogNormal:()=>MI,quantileNormal:()=>SD,quantileUniform:()=>PI,quantiles:()=>EI,quantizeInterpolator:()=>FK,quarter:()=>eG,quartiles:()=>CI,random:()=>Cl,randomInteger:()=>XSe,randomKDE:()=>TI,randomLCG:()=>KSe,randomLogNormal:()=>lq,randomMixture:()=>uq,randomNormal:()=>xI,randomUniform:()=>cq,read:()=>jW,regressionExp:()=>fq,regressionLinear:()=>FI,regressionLoess:()=>_q,regressionLog:()=>dq,regressionPoly:()=>pq,regressionPow:()=>hq,regressionQuad:()=>LI,renderModule:()=>OS,repeat:()=>r1,resetDefaultLocale:()=>UDe,resetSVGClipId:()=>lX,resetSVGDefIds:()=>INe,responseType:()=>LW,runtimeContext:()=>rte,sampleCurve:()=>TD,sampleLogNormal:()=>AI,sampleNormal:()=>CD,sampleUniform:()=>kI,scale:()=>Gn,sceneEqual:()=>oF,sceneFromJSON:()=>IX,scenePickVisit:()=>hS,sceneToJSON:()=>kX,sceneVisit:()=>yu,sceneZOrder:()=>TP,scheme:()=>aP,serializeXML:()=>tJ,setRandom:()=>qSe,span:()=>o1,splitAccessPath:()=>gc,stringValue:()=>Be,textMetrics:()=>Tc,timeBin:()=>oW,timeFloor:()=>qG,timeFormatLocale:()=>v1,timeInterval:()=>W0,timeOffset:()=>XG,timeSequence:()=>ZG,timeUnitSpecifier:()=>BG,timeUnits:()=>Hk,toBoolean:()=>_k,toDate:()=>yk,toNumber:()=>ts,toSet:()=>hu,toString:()=>vk,transform:()=>QW,transforms:()=>J0,truncate:()=>dG,truthy:()=>bl,tupleid:()=>bt,typeParsers:()=>aI,utcFloor:()=>YG,utcInterval:()=>q0,utcOffset:()=>JG,utcSequence:()=>eW,utcdayofyear:()=>UG,utcquarter:()=>tG,utcweek:()=>zG,version:()=>PBe,visitArray:()=>ih,week:()=>VG,writeConfig:()=>P0,zero:()=>Zf,zoomLinear:()=>dk,zoomLog:()=>fk,zoomPow:()=>QC,zoomSymlog:()=>hk});var st={};Le.r(st),Le.d(st,{accessPathDepth:()=>H_,accessPathWithDatum:()=>_5,compile:()=>SGe,contains:()=>Mn,deepEqual:()=>Fc,deleteNestedProperty:()=>fT,duplicate:()=>rn,entries:()=>Hh,every:()=>h5,fieldIntersection:()=>m5,flatAccessWithDatum:()=>Mne,getFirstDefined:()=>Br,hasIntersection:()=>p5,hash:()=>Nn,internalField:()=>Rne,isBoolean:()=>tw,isEmpty:()=>yi,isEqual:()=>ZBe,isInternalField:()=>Pne,isNullOrFalse:()=>f5,isNumeric:()=>hT,keys:()=>Te,logicalExpr:()=>nw,mergeDeep:()=>One,never:()=>Ane,normalize:()=>uoe,normalizeAngle:()=>rw,omit:()=>Ja,pick:()=>V_,prefixGenerator:()=>g5,removePathFromField:()=>y5,replaceAll:()=>Pg,replacePathInField:()=>Il,resetIdCounter:()=>t6e,setEqual:()=>Nne,some:()=>Rg,stringify:()=>Fi,titleCase:()=>iw,unique:()=>Lc,uniqueId:()=>Ine,vals:()=>ds,varName:()=>Wi,version:()=>AGe});var Yi={};function $e(e){return"function"==typeof e}function we(e){const n=e(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}Le.r(Yi),Le.d(Yi,{dark:()=>YGe,excel:()=>KGe,fivethirtyeight:()=>QGe,ggplot2:()=>ZGe,googlecharts:()=>dWe,latimes:()=>iWe,quartz:()=>rWe,urbaninstitute:()=>cWe,version:()=>fWe,vox:()=>oWe});const $n=we(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Jt(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Vn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if($e(i))try{i()}catch(o){t=o instanceof $n?o.errors:[o]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const o of r)try{ao(o)}catch(s){t=null!=t?t:[],s instanceof $n?t=[...t,...s.errors]:t.push(s)}}if(t)throw new $n(t)}}add(t){var n;if(t&&t!==this)if(this.closed)ao(t);else{if(t instanceof Vn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Jt(n,t)}remove(t){const{_teardowns:n}=this;n&&Jt(n,t),t instanceof Vn&&t._removeParent(this)}}Vn.EMPTY=(()=>{const e=new Vn;return e.closed=!0,e})();const S=Vn.EMPTY;function rr(e){return e instanceof Vn||e&&"closed"in e&&$e(e.remove)&&$e(e.add)&&$e(e.unsubscribe)}function ao(e){$e(e)?e():e.unsubscribe()}const Ni={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},bi={setTimeout(...e){const{delegate:t}=bi;return((null==t?void 0:t.setTimeout)||setTimeout)(...e)},clearTimeout(e){const{delegate:t}=bi;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Ki(e){bi.setTimeout(()=>{const{onUnhandledError:t}=Ni;if(!t)throw e;t(e)})}function ti(){}const ms=_r("C",void 0,void 0);function _r(e,t,n){return{kind:e,value:t,error:n}}let yr=null;function Uu(e){if(Ni.useDeprecatedSynchronousErrorHandling){const t=!yr;if(t&&(yr={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:i}=yr;if(yr=null,n)throw i}}else e()}class ea extends Vn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,rr(t)&&t.add(this)):this.destination=Df}static create(t,n,i){return new Xi(t,n,i)}next(t){this.isStopped?Uo(function ys(e){return _r("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Uo(function _s(e){return _r("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Uo(ms,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Xi extends ea{constructor(t,n,i){let r;if(super(),$e(t))r=t;else if(t){let o;({next:r,error:n,complete:i}=t),this&&Ni.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe()):o=t,r=null==r?void 0:r.bind(o),n=null==n?void 0:n.bind(o),i=null==i?void 0:i.bind(o)}this.destination={next:r?rl(r):ti,error:rl(null!=n?n:or),complete:i?rl(i):ti}}}function rl(e,t){return(...n)=>{try{e(...n)}catch(i){Ni.useDeprecatedSynchronousErrorHandling?function Vl(e){Ni.useDeprecatedSynchronousErrorHandling&&yr&&(yr.errorThrown=!0,yr.error=e)}(i):Ki(i)}}}function or(e){throw e}function Uo(e,t){const{onStoppedNotification:n}=Ni;n&&bi.setTimeout(()=>n(e,t))}const Df={closed:!0,next:ti,error:or,complete:ti},zu="function"==typeof Symbol&&Symbol.observable||"@@observable";function Do(e){return e}let xn=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function lo(e){return e&&e instanceof ea||function Sf(e){return e&&$e(e.next)&&$e(e.error)&&$e(e.complete)}(e)&&rr(e)}(n)?n:new Xi(n,i,r);return Uu(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=sd(i))((r,o)=>{const s=new Xi({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[zu](){return this}pipe(...n){return function Ur(e){return 0===e.length?Do:1===e.length?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}(n)(this)}toPromise(n){return new(n=sd(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function sd(e){var t;return null!==(t=null!=e?e:Ni.Promise)&&void 0!==t?t:Promise}const Hl=we(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let jn=(()=>{class e extends xn{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new ct(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Hl}next(n){Uu(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(n)}})}error(n){Uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?S:(o.push(n),new Vn(()=>Jt(o,n)))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new xn;return n.source=this,n}}return e.create=(t,n)=>new ct(t,n),e})();class ct extends jn{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)}error(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:S}}function li(e){return $e(null==e?void 0:e.lift)}function ri(e){return t=>{if(li(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class An extends ea{constructor(t,n,i,r,o){super(t),this.onFinalize=o,this._next=n?function(s){try{n(s)}catch(a){t.error(a)}}:super._next,this._error=r?function(s){try{r(s)}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function ft(e,t){return ri((n,i)=>{let r=0;n.subscribe(new An(i,o=>{i.next(e.call(t,o,r++))}))})}function Mi(e){return this instanceof Mi?(this.v=e,this):new Mi(e)}function ld(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(f){i[f]&&(r[f]=function(h){return new Promise(function(p,m){o.push([f,h,p,m])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof Mi?Promise.resolve(f.value.v).then(u,c):d(o[0][2],f)}(i[f](h))}catch(p){d(o[0][3],p)}}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function ud(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function ka(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}(a,l,(s=e[o](s)).done,s.value)})}}}const Q=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function re(e){return $e(null==e?void 0:e.then)}function De(e){return $e(e[zu])}function Ee(e){return Symbol.asyncIterator&&$e(null==e?void 0:e[Symbol.asyncIterator])}function Ae(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ge=function je(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ot(e){return $e(null==e?void 0:e[Ge])}function ht(e){return ld(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:i,done:r}=yield Mi(n.read());if(r)return yield Mi(void 0);yield yield Mi(i)}}finally{n.releaseLock()}})}function nt(e){return $e(null==e?void 0:e.getReader)}function at(e){if(e instanceof xn)return e;if(null!=e){if(De(e))return function Rt(e){return new xn(t=>{const n=e[zu]();if($e(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Q(e))return function Lt(e){return new xn(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(re(e))return function Yn(e){return new xn(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ki)})}(e);if(Ee(e))return Or(e);if(ot(e))return function vs(e){return new xn(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(nt(e))return function $i(e){return Or(ht(e))}(e)}throw Ae(e)}function Or(e){return new xn(t=>{(function zr(e,t){var n,i,r,o;return function So(e,t,n,i){return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ud(e);!(i=yield n.next()).done;)if(t.next(i.value),t.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function zo(e,t,n,i=0,r=!1){const o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function ui(e,t,n=1/0){return $e(t)?ui((i,r)=>ft((o,s)=>t(i,o,r,s))(at(e(i,r))),n):("number"==typeof t&&(n=t),ri((i,r)=>function bs(e,t,n,i,r,o,s,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&t.complete()},h=m=>u<i?p(m):l.push(m),p=m=>{o&&t.next(m),u++;let _=!1;at(n(m,c++)).subscribe(new An(t,b=>{null==r||r(b),o?h(b):t.next(b)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;l.length&&u<i;){const b=l.shift();s?zo(t,s,()=>p(b)):p(b)}f()}catch(b){t.error(b)}}))};return e.subscribe(new An(t,h,()=>{d=!0,f()})),()=>{null==a||a()}}(i,r,e,n)))}function Wl(e=1/0){return ui(Do,e)}const ws=new xn(e=>e.complete());function Yu(e){return e&&$e(e.schedule)}function Ku(e){return e[e.length-1]}function Yl(e){return $e(Ku(e))?e.pop():void 0}function Xu(e){return Yu(Ku(e))?e.pop():void 0}function Kl(e,t=0){return ri((n,i)=>{n.subscribe(new An(i,r=>zo(i,e,()=>i.next(r),t),()=>zo(i,e,()=>i.complete(),t),r=>zo(i,e,()=>i.error(r),t)))})}function dd(e,t=0){return ri((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function Xl(e,t){if(!e)throw new Error("Iterable cannot be null");return new xn(n=>{zo(n,t,()=>{const i=e[Symbol.asyncIterator]();zo(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function wi(e,t){return t?function fd(e,t){if(null!=e){if(De(e))return function Cy(e,t){return at(e).pipe(dd(t),Kl(t))}(e,t);if(Q(e))return function yp(e,t){return new xn(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}(e,t);if(re(e))return function Dy(e,t){return at(e).pipe(dd(t),Kl(t))}(e,t);if(Ee(e))return Xl(e,t);if(ot(e))return function vp(e,t){return new xn(n=>{let i;return zo(n,t,()=>{i=e[Ge](),zo(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>$e(null==i?void 0:i.return)&&i.return()})}(e,t);if(nt(e))return function _m(e,t){return Xl(ht(e),t)}(e,t)}throw Ae(e)}(e,t):at(e)}function Vi(e){return e<=0?()=>ws:ri((t,n)=>{let i=0;t.subscribe(new An(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function hd(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(Vi(1)).subscribe(()=>e())}function Kn(e){for(let t in e)if(e[t]===Kn)return t;throw Error("Could not find renamed property on target object.")}function To(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function hn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(hn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ju(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const bp=Kn({__forward_ref__:Kn});function pn(e){return e.__forward_ref__=pn,e.toString=function(){return hn(this())},e}function zt(e){return Qu(e)?e():e}function Qu(e){return"function"==typeof e&&e.hasOwnProperty(bp)&&e.__forward_ref__===pn}class Pt extends Error{constructor(t,n){super(function wp(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function jt(e){return"string"==typeof e?e:null==e?"":String(e)}function Gr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():jt(e)}function pd(e,t){const n=t?` in ${t}`:"";throw new Pt(-201,`No provider for ${Gr(e)} found${n}`)}function Oo(e,t){null==e&&function oi(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function lt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function un(e){return{providers:e.providers||[],imports:e.imports||[]}}function g(e){return y(e,M)||y(e,U)}function y(e,t){return e.hasOwnProperty(t)?e[t]:null}function O(e){return e&&(e.hasOwnProperty(R)||e.hasOwnProperty(z))?e[R]:null}const M=Kn({\u0275prov:Kn}),R=Kn({\u0275inj:Kn}),U=Kn({ngInjectableDef:Kn}),z=Kn({ngInjectorDef:Kn});var Y=(()=>((Y=Y||{})[Y.Default=0]="Default",Y[Y.Host=1]="Host",Y[Y.Self=2]="Self",Y[Y.SkipSelf=4]="SkipSelf",Y[Y.Optional=8]="Optional",Y))();let ue;function se(e){const t=ue;return ue=e,t}function ge(e,t,n){const i=g(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Y.Optional?null:void 0!==t?t:void pd(hn(e),"Injector")}function vt(e){return{toString:e}.toString()}var et=(()=>((et=et||{})[et.OnPush=0]="OnPush",et[et.Default=1]="Default",et))(),ci=(()=>{return(e=ci||(ci={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",ci;var e})();const In="undefined"!=typeof globalThis&&globalThis,Ft="undefined"!=typeof window&&window,co="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ct=In||"undefined"!=typeof global&&global||Ft||co,ar={},Dn=[],Cs=Kn({\u0275cmp:Kn}),vr=Kn({\u0275dir:Kn}),Go=Kn({\u0275pipe:Kn}),No=Kn({\u0275mod:Kn}),Hi=Kn({\u0275fac:Kn}),Zu=Kn({__NG_ELEMENT_ID__:Kn});let Ql=0;function di(e){return vt(()=>{const n={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===et.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Dn,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ci.Emulated,id:"c",styles:e.styles||Dn,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,o=e.features,s=e.pipes;return i.id+=Ql++,i.inputs=_d(e.inputs,n),i.outputs=_d(e.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(al):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Dp):null,i})}function al(e){return br(e)||function ll(e){return e[vr]||null}(e)}function Dp(e){return function ra(e){return e[Go]||null}(e)}const md={};function cn(e){return vt(()=>{const t={type:e.type,bootstrap:e.bootstrap||Dn,declarations:e.declarations||Dn,imports:e.imports||Dn,exports:e.exports||Dn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(md[e.id]=e.type),t})}function _d(e,t){if(null==e)return ar;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}const Pe=di;function Nr(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function br(e){return e[Cs]||null}function Mr(e,t){const n=e[No]||null;if(!n&&!0===t)throw new Error(`Type ${hn(e)} does not have '\u0275mod' property.`);return n}function sa(e){return Array.isArray(e)&&"object"==typeof e[1]}function j(e){return Array.isArray(e)&&!0===e[1]}function H(e){return 0!=(8&e.flags)}function J(e){return 2==(2&e.flags)}function _e(e){return 1==(1&e.flags)}function Z(e){return null!==e.template}function ve(e){return 0!=(512&e[2])}function bd(e,t){return e.hasOwnProperty(Hi)?e[Hi]:null}class Sp{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function fo(){return My}function My(e){return e.type.prototype.ngOnChanges&&(e.setInput=a2),qw}function qw(){const e=Kw(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===ar)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function a2(e,t,n,i){const r=Kw(e)||function l2(e,t){return e[Yw]=t}(e,{previous:ar,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],l=s[a];o[a]=new Sp(l&&l.currentValue,t,s===ar),e[i]=t}fo.ngInherit=!0;const Yw="__ngSimpleChanges__";function Kw(e){return e[Yw]||null}let wd;function hi(e){return!!e.listen}const Jw={createRenderer:(e,t)=>function Ry(){return void 0!==wd?wd:"undefined"!=typeof document?document:void 0}()};function Qi(e){for(;Array.isArray(e);)e=e[0];return e}function Tp(e,t){return Qi(t[e])}function la(e,t){return Qi(t[e.index])}function Fy(e,t){return e.data[t]}function Ff(e,t){return e[t]}function Ts(e,t){const n=t[e];return sa(n)?n:n[0]}function Ly(e){return 4==(4&e[2])}function jy(e){return 128==(128&e[2])}function ne(e,t){return null==t?null:e[t]}function K(e){e[18]=0}function V(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const E={lFrame:x4(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Me(){return E.bindingsEnabled}function fe(){return E.lFrame.lView}function At(){return E.lFrame.tView}function lr(e){return E.lFrame.contextLView=e,e[8]}function Xn(){let e=Ed();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ed(){return E.lFrame.currentTNode}function fl(e,t){const n=E.lFrame;n.currentTNode=e,n.isParent=t}function Tm(){return E.lFrame.isParent}function g2(){E.lFrame.isParent=!1}function Qw(){return E.isInCheckNoChangesMode}function Zw(e){E.isInCheckNoChangesMode=e}function As(){const e=E.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Am(){return E.lFrame.bindingIndex++}function Sd(e){const t=E.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function $le(e,t){const n=E.lFrame;n.bindingIndex=n.bindingRootIndex=e,m2(t)}function m2(e){E.lFrame.currentDirectiveIndex=e}function C4(){return E.lFrame.currentQueryIndex}function y2(e){E.lFrame.currentQueryIndex=e}function Hle(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function D4(e,t,n){if(n&Y.SkipSelf){let r=t,o=e;for(;!(r=r.parent,null!==r||n&Y.Host||(r=Hle(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;t=r,e=o}const i=E.lFrame=S4();return i.currentTNode=t,i.lView=e,!0}function eE(e){const t=S4(),n=e[1];E.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function S4(){const e=E.lFrame,t=null===e?null:e.child;return null===t?x4(e):t}function x4(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function T4(){const e=E.lFrame;return E.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const A4=T4;function tE(){const e=T4();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Os(){return E.lFrame.selectedIndex}function Lf(e){E.lFrame.selectedIndex=e}function ur(){const e=E.lFrame;return Fy(e.tView,e.selectedIndex)}function nE(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks||(e.viewHooks=[])).push(-n,l),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function iE(e,t,n){O4(e,t,3,n)}function rE(e,t,n,i){(3&e[2])===n&&O4(e,t,n,i)}function v2(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function O4(e,t,n,i){const o=null!=i?i:-1,s=t.length-1;let a=0;for(let l=void 0!==i?65535&e[18]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(e[18]+=65536),(a<o||-1==o)&&(Jle(e,n,t,l),e[18]=(4294901760&e[18])+l+2),l++}function Jle(e,t,n,i){const r=n[i]<0,o=n[i+1],a=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class By{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function oE(e,t,n){const i=hi(e);let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const s=n[r++],a=n[r++],l=n[r++];i?e.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=o,a=n[++r];w2(s)?i&&e.setProperty(t,s,a):i?e.setAttribute(t,s,a):t.setAttribute(s,a),r++}}return r}function N4(e){return 3===e||4===e||6===e}function w2(e){return 64===e.charCodeAt(0)}function sE(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||M4(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function M4(e,t,n,i,r){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function k4(e){return-1!==e}function Om(e){return 32767&e}function Nm(e,t){let n=function nue(e){return e>>16}(e),i=t;for(;n>0;)i=i[15],n--;return i}let E2=!0;function aE(e){const t=E2;return E2=e,t}let iue=0;function Vy(e,t){const n=D2(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,C2(i.data,e),C2(t,null),C2(i.blueprint,null));const r=lE(e,t),o=e.injectorIndex;if(k4(r)){const s=Om(r),a=Nm(r,t),l=a[1].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function C2(e,t){e.push(0,0,0,0,0,0,0,0,t)}function D2(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function lE(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){const o=r[1],s=o.type;if(i=2===s?o.declTNode:1===s?r[6]:null,null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function uE(e,t,n){!function rue(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Zu)&&(i=n[Zu]),null==i&&(i=n[Zu]=iue++);const r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function P4(e,t,n){if(n&Y.Optional)return e;pd(t,"NodeInjector")}function F4(e,t,n,i){if(n&Y.Optional&&void 0===i&&(i=null),0==(n&(Y.Self|Y.Host))){const r=e[9],o=se(void 0);try{return r?r.get(t,i,n&Y.Optional):ge(t,i,n&Y.Optional)}finally{se(o)}}return P4(i,t,n)}function L4(e,t,n,i=Y.Default,r){if(null!==e){const o=function lue(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Zu)?e[Zu]:void 0;return"number"==typeof t?t>=0?255&t:sue:t}(n);if("function"==typeof o){if(!D4(t,e,i))return i&Y.Host?P4(r,n,i):F4(t,n,i,r);try{const s=o(i);if(null!=s||i&Y.Optional)return s;pd(n)}finally{A4()}}else if("number"==typeof o){let s=null,a=D2(e,t),l=-1,u=i&Y.Host?t[16][6]:null;for((-1===a||i&Y.SkipSelf)&&(l=-1===a?lE(e,t):t[a+8],-1!==l&&$4(i,!1)?(s=t[1],a=Om(l),t=Nm(l,t)):a=-1);-1!==a;){const c=t[1];if(B4(o,a,c.data)){const d=aue(a,t,n,s,i,u);if(d!==j4)return d}l=t[a+8],-1!==l&&$4(i,t[1].data[a+8]===u)&&B4(o,a,t)?(s=c,a=Om(l),t=Nm(l,t)):a=-1}}}return F4(t,n,i,r)}const j4={};function sue(){return new Mm(Xn(),fe())}function aue(e,t,n,i,r,o){const s=t[1],a=s.data[e+8],c=cE(a,s,n,null==i?J(a)&&E2:i!=s&&0!=(3&a.type),r&Y.Host&&o===a);return null!==c?Hy(t,s,c,a):j4}function cE(e,t,n,i,r){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,f=r?a+c:e.directiveEnd;for(let h=i?a:a+c;h<f;h++){const p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(r){const h=s[l];if(h&&Z(h)&&h.type===n)return l}return null}function Hy(e,t,n,i){let r=e[n];const o=t.data;if(function Qle(e){return e instanceof By}(r)){const s=r;s.resolving&&function ym(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Pt(-200,`Circular dependency in DI detected for ${e}${n}`)}(Gr(o[n]));const a=aE(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?se(s.injectImpl):null;D4(e,i,Y.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function Xle(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const s=My(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&se(l),aE(a),s.resolving=!1,A4()}}return r}function B4(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function $4(e,t){return!(e&Y.Self||e&Y.Host&&t)}class Mm{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return L4(this._tNode,this._lView,t,i,n)}}function Ns(e){return vt(()=>{const t=e.prototype.constructor,n=t[Hi]||S2(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const o=r[Hi]||S2(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function S2(e){return Qu(e)?()=>{const t=S2(zt(e));return t&&t()}:bd(e)}const Im="__parameters__";function Pm(e,t,n){return vt(()=>{const i=function x2(e){return function(...n){if(e){const i=e(...n);for(const r in i)this[r]=i[r]}}}(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,u,c){const d=l.hasOwnProperty(Im)?l[Im]:Object.defineProperty(l,Im,{value:[]})[Im];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}class nn{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=lt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const cue=new nn("AnalyzeForEntryComponents");function hl(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),hl(i,t)):t!==e&&t.push(i)}return t}function nc(e,t){e.forEach(n=>Array.isArray(n)?nc(n,t):t(n))}function H4(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function dE(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Gy(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function Fa(e,t,n){let i=Fm(e,t);return i>=0?e[1|i]=n:(i=~i,function hue(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function A2(e,t){const n=Fm(e,t);if(n>=0)return e[1|n]}function Fm(e,t){return function G4(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}(e,t,1)}const Wy={},N2="__NG_DI_FLAG__",hE="ngTempTokenPath",bue=/\n/gm,q4="__source",Eue=Kn({provide:String,useValue:Kn});let qy;function Y4(e){const t=qy;return qy=e,t}function Cue(e,t=Y.Default){if(void 0===qy)throw new Pt(203,"");return null===qy?ge(e,void 0,t):qy.get(e,t&Y.Optional?null:void 0,t)}function ze(e,t=Y.Default){return(function xe(){return ue}()||Cue)(zt(e),t)}function M2(e){const t=[];for(let n=0;n<e.length;n++){const i=zt(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Pt(900,"");let r,o=Y.Default;for(let s=0;s<i.length;s++){const a=i[s],l=Due(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(ze(r,o))}else t.push(ze(i))}return t}function Yy(e,t){return e[N2]=t,e.prototype[N2]=t,e}function Due(e){return e[N2]}const Ky=Yy(Pm("Inject",e=>({token:e})),-1),ic=Yy(Pm("Optional"),8),Lm=Yy(Pm("SkipSelf"),4);class iB{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Bf(e){return e instanceof iB?e.changingThisBreaksApplicationSecurity:e}const Wue=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,que=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Rr=(()=>((Rr=Rr||{})[Rr.NONE=0]="NONE",Rr[Rr.HTML=1]="HTML",Rr[Rr.STYLE=2]="STYLE",Rr[Rr.SCRIPT=3]="SCRIPT",Rr[Rr.URL=4]="URL",Rr[Rr.RESOURCE_URL=5]="RESOURCE_URL",Rr))();function ua(e){const t=function Zy(){const e=fe();return e&&e[12]}();return t?t.sanitize(Rr.URL,e)||"":function Jy(e,t){const n=function Hue(e){return e instanceof iB&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}(e,"URL")?Bf(e):function _E(e){return(e=String(e)).match(Wue)||e.match(que)?e:"unsafe:"+e}(jt(e))}const hB="__ngContext__";function Yo(e,t){e[hB]=t}function $2(e){const t=function ev(e){return e[hB]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function H2(e){return e.ngOriginalError}function mce(e,...t){e.error(...t)}class $m{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),i=function gce(e){return e&&e.ngErrorLogger||mce}(t);i(this._console,"ERROR",t),n&&i(this._console,"ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&H2(t);for(;n&&H2(n);)n=H2(n);return n||null}}const yB=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ct))();function vB(e){return e.ownerDocument.defaultView}function oc(e){return e instanceof Function?e():e}var La=(()=>((La=La||{})[La.Important=1]="Important",La[La.DashCase=2]="DashCase",La))();function z2(e,t){return undefined(e,t)}function tv(e){const t=e[3];return j(t)?t[3]:t}function G2(e){return DB(e[13])}function W2(e){return DB(e[4])}function DB(e){for(;null!==e&&!j(e);)e=e[4];return e}function Hm(e,t,n,i,r){if(null!=i){let o,s=!1;j(i)?o=i:sa(i)&&(s=!0,i=i[0]);const a=Qi(i);0===e&&null!==n?null==r?NB(t,n,a):Op(t,n,a,r||null,!0):1===e&&null!==n?Op(t,n,a,r||null,!0):2===e?function LB(e,t,n){const i=vE(e,t);i&&function jce(e,t,n,i){hi(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function Vce(e,t,n,i,r){const o=n[7];o!==Qi(n)&&Hm(t,e,i,o,r);for(let a=10;a<n.length;a++){const l=n[a];nv(l[1],l,e,t,i,o)}}(t,e,o,n,r)}}function Y2(e,t,n){if(hi(e))return e.createElement(t,n);{const i=null!==n?function d2(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===i?e.createElement(t):e.createElementNS(i,t)}}function xB(e,t){const n=e[9],i=n.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,V(r,-1)),n.splice(i,1)}function K2(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const r=i[17];null!==r&&r!==e&&xB(r,i),t>0&&(e[n-1][4]=i[4]);const o=dE(e,10+t);!function Nce(e,t){nv(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function TB(e,t){if(!(256&t[2])){const n=t[11];hi(n)&&n.destroyNode&&nv(e,t,n,3,null,null),function Ice(e){let t=e[13];if(!t)return X2(e[1],e);for(;t;){let n=null;if(sa(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)sa(t)&&X2(t[1],t),t=t[3];null===t&&(t=e),sa(t)&&X2(t[1],t),n=t&&t[4]}t=n}}(t)}}function X2(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function Lce(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const r=t[n[i]];if(!(r instanceof By)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(r)}finally{}}}}(e,t),function Fce(e,t){const n=e.cleanup,i=t[7];let r=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(t):Qi(t[s]),l=i[r=n[o+2]],u=n[o+3];"boolean"==typeof u?a.removeEventListener(n[o],l,u):u>=0?i[r=u]():i[r=-u].unsubscribe(),o+=2}else{const s=i[r=n[o+1]];n[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)i[o]();t[7]=null}}(e,t),1===t[1].type&&hi(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&j(t[3])){n!==t[3]&&xB(n,t);const i=t[19];null!==i&&i.detachView(e)}}}function AB(e,t,n){return function OB(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const r=e.data[i.directiveStart].encapsulation;if(r===ci.None||r===ci.Emulated)return null}return la(i,n)}(e,t.parent,n)}function Op(e,t,n,i,r){hi(e)?e.insertBefore(t,n,i,r):t.insertBefore(n,i,r)}function NB(e,t,n){hi(e)?e.appendChild(t,n):t.appendChild(n)}function MB(e,t,n,i,r){null!==i?Op(e,t,n,i,r):NB(e,t,n)}function vE(e,t){return hi(e)?e.parentNode(t):t.parentNode}function kB(e,t,n){return RB(e,t,n)}let RB=function IB(e,t,n){return 40&e.type?la(e,n):null};function bE(e,t,n,i){const r=AB(e,i,t),o=t[11],a=kB(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)MB(o,r,n[l],a,!1);else MB(o,r,n,a,!1)}function wE(e,t){if(null!==t){const n=t.type;if(3&n)return la(t,e);if(4&n)return Q2(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return wE(e,i);{const r=e[t.index];return j(r)?Q2(-1,r):Qi(r)}}if(32&n)return z2(t,e)()||Qi(e[t.index]);{const i=FB(e,t);return null!==i?Array.isArray(i)?i[0]:wE(tv(e[16]),i):wE(e,t.next)}}return null}function FB(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Q2(e,t){const n=10+e+1;if(n<t.length){const i=t[n],r=i[1].firstChild;if(null!==r)return wE(i,r)}return t[7]}function Z2(e,t,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;if(s&&0===t&&(a&&Yo(Qi(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)Z2(e,t,n.child,i,r,o,!1),Hm(t,e,r,a,o);else if(32&l){const u=z2(n,i);let c;for(;c=u();)Hm(t,e,r,c,o);Hm(t,e,r,a,o)}else 16&l?jB(e,t,i,n,r,o):Hm(t,e,r,a,o);n=s?n.projectionNext:n.next}}function nv(e,t,n,i,r,o){Z2(n,i,e.firstChild,t,r,o,!1)}function jB(e,t,n,i,r,o){const s=n[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Hm(t,e,r,l[u],o);else Z2(e,t,l,s[3],r,o,!0)}function BB(e,t,n){hi(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function eO(e,t,n){hi(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function $B(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}const VB="ng-template";function Uce(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==$B(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function HB(e){return 4===e.type&&e.value!==VB}function zce(e,t,n){return t===(4!==e.type||n?e.value:VB)}function Gce(e,t,n){let i=4;const r=e.attrs||[],o=function Yce(e){for(let t=0;t<e.length;t++)if(N4(e[t]))return t;return e.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!zce(e,l,n)||""===l&&1===t.length){if(tu(i))return!1;s=!0}}else{const u=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!Uce(e.attrs,u,n)){if(tu(i))return!1;s=!0}continue}const d=Wce(8&i?"class":l,r,HB(e),n);if(-1===d){if(tu(i))return!1;s=!0;continue}if(""!==u){let f;f=d>o?"":r[d+1].toLowerCase();const h=8&i?f:null;if(h&&-1!==$B(h,u,0)||2&i&&u!==f){if(tu(i))return!1;s=!0}}}}else{if(!s&&!tu(i)&&!tu(l))return!1;if(s&&tu(l))continue;s=!1,i=l|1&i}}return tu(i)||s}function tu(e){return 0==(1&e)}function Wce(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){const s=t[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Kce(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function UB(e,t,n=!1){for(let i=0;i<t.length;i++)if(Gce(e,t[i],n))return!0;return!1}function Xce(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function zB(e,t){return e?":not("+t.trim()+")":t}function Jce(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&i){const a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!tu(s)&&(t+=zB(o,r),r=""),i=s,o=o||!tu(i);n++}return""!==r&&(t+=zB(o,r)),t}const Qt={};function Ne(e){GB(At(),fe(),Os()+e,Qw())}function GB(e,t,n,i){if(!i)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&iE(t,o,n)}else{const o=e.preOrderHooks;null!==o&&rE(t,o,0,n)}Lf(n)}function EE(e,t){return e<<17|t<<2}function nu(e){return e>>17&32767}function tO(e){return 2|e}function xd(e){return(131068&e)>>2}function nO(e,t){return-131069&e|t<<2}function iO(e){return 1|e}function n6(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const s=e.data[o];y2(r),s.contentQueries(2,t[o],o)}}}function iv(e,t,n,i,r,o,s,a,l,u){const c=t.blueprint.slice();return c[0]=r,c[2]=140|i,K(c),c[3]=c[15]=e,c[8]=n,c[10]=s||e&&e[10],c[11]=a||e&&e[11],c[12]=l||e&&e[12]||null,c[9]=u||e&&e[9]||null,c[6]=o,c[16]=2==t.type?e[16]:c,c}function Um(e,t,n,i,r){let o=e.data[t];if(null===o)o=function fO(e,t,n,i,r){const o=Ed(),s=Tm(),l=e.data[t]=function gde(e,t,n,i,r,o){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(e,t,n,i,r),function Ble(){return E.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function Cd(){const e=E.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return fl(o,!0),o}function zm(e,t,n,i){if(0===n)return-1;const r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function rv(e,t,n){eE(t);try{const i=e.viewQuery;null!==i&&wO(1,i,n);const r=e.template;null!==r&&i6(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&n6(e,t),e.staticViewQueries&&wO(2,e.viewQuery,n);const o=e.components;null!==o&&function fde(e,t){for(let n=0;n<t.length;n++)Ide(e,t[n])}(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[2]&=-5,tE()}}function Gm(e,t,n,i){const r=t[2];if(256==(256&r))return;eE(t);const o=Qw();try{K(t),function w4(e){return E.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&i6(e,t,n,2,i);const s=3==(3&r);if(!o)if(s){const u=e.preOrderCheckHooks;null!==u&&iE(t,u,null)}else{const u=e.preOrderHooks;null!==u&&rE(t,u,0,null),v2(t,0)}if(function Mde(e){for(let t=G2(e);null!==t;t=W2(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const r=n[i],o=r[3];0==(1024&r[2])&&V(o,1),r[2]|=1024}}}(t),function Nde(e){for(let t=G2(e);null!==t;t=W2(t))for(let n=10;n<t.length;n++){const i=t[n],r=i[1];jy(i)&&Gm(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&n6(e,t),!o)if(s){const u=e.contentCheckHooks;null!==u&&iE(t,u)}else{const u=e.contentHooks;null!==u&&rE(t,u,1),v2(t,1)}!function cde(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)Lf(~r);else{const o=r,s=n[++i],a=n[++i];$le(s,o),a(2,t[o])}}}finally{Lf(-1)}}(e,t);const a=e.components;null!==a&&function dde(e,t){for(let n=0;n<t.length;n++)kde(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&wO(2,l,i),!o)if(s){const u=e.viewCheckHooks;null!==u&&iE(t,u)}else{const u=e.viewHooks;null!==u&&rE(t,u,2),v2(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,V(t[3],-1))}finally{tE()}}function hde(e,t,n,i){const r=t[10],o=!Qw(),s=Ly(t);try{o&&!s&&r.begin&&r.begin(),s&&rv(e,t,i),Gm(e,t,n,i)}finally{o&&!s&&r.end&&r.end()}}function i6(e,t,n,i,r){const o=Os(),s=2&i;try{Lf(-1),s&&t.length>20&&GB(e,t,20,Qw()),n(i,r)}finally{Lf(o)}}function hO(e,t,n){!Me()||(function Ede(e,t,n,i){const r=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Vy(n,t),Yo(i,t);const s=n.initialInputs;for(let a=r;a<o;a++){const l=e.data[a],u=Z(l);u&&Tde(t,n,l);const c=Hy(t,e,a,n);Yo(c,t),null!==s&&Ade(0,a-r,c,l,0,s),u&&(Ts(n.index,t)[8]=c)}}(e,t,n,la(n,t)),128==(128&n.flags)&&function Cde(e,t,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,a=function Vle(){return E.lFrame.currentDirectiveIndex}();try{Lf(s);for(let l=i;l<r;l++){const u=e.data[l],c=t[l];m2(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&f6(u,c)}}finally{Lf(-1),m2(a)}}(e,t,n))}function pO(e,t,n=la){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}}function o6(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=SE(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function SE(e,t,n,i,r,o,s,a,l,u){const c=20+i,d=c+r,f=function pde(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:Qt);return n}(c,d),h="function"==typeof u?u():u;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function l6(e,t,n,i){const r=y6(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&v6(e).push(i,r.length-1))}function u6(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function ja(e,t,n,i,r,o,s,a){const l=la(t,n);let c,u=t.inputs;!a&&null!=u&&(c=u[i])?(E6(e,n,c,i,r),J(t)&&function yde(e,t){const n=Ts(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(i=function _de(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,t.value||"",i):r,hi(o)?o.setProperty(l,i,r):w2(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function gO(e,t,n,i){let r=!1;if(Me()){const o=function Dde(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];UB(n,s.selectors,!1)&&(r||(r=[]),uE(Vy(n,t),e,s.type),Z(s)?(h6(e,n),r.unshift(s)):r.push(s))}return r}(e,t,n),s=null===i?null:{"":-1};if(null!==o){r=!0,p6(n,e.data.length,o.length);for(let c=0;c<o.length;c++){const d=o[c];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=zm(e,t,o.length,null);for(let c=0;c<o.length;c++){const d=o[c];n.mergedAttrs=sE(n.mergedAttrs,d.hostAttrs),g6(e,n,t,u,d),xde(u,d,s),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const f=d.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!l&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),u++}!function mde(e,t){const i=t.directiveEnd,r=e.data,o=t.attrs,s=[];let a=null,l=null;for(let u=t.directiveStart;u<i;u++){const c=r[u],d=c.inputs,f=null===o||HB(t)?null:Ode(d,o);s.push(f),a=u6(d,u,a),l=u6(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}(e,n)}s&&function Sde(e,t,n){if(t){const i=e.localNames=[];for(let r=0;r<t.length;r+=2){const o=n[t[r+1]];if(null==o)throw new Pt(-301,!1);i.push(t[r],o)}}}(n,i,s)}return n.mergedAttrs=sE(n.mergedAttrs,n.attrs),r}function d6(e,t,n,i,r,o){const s=o.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function wde(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(i,r,s)}}function f6(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function h6(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function xde(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Z(t)&&(n[""]=e)}}function p6(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function g6(e,t,n,i,r){e.data[i]=r;const o=r.factory||(r.factory=bd(r.type)),s=new By(o,Z(r),null);e.blueprint[i]=s,n[i]=s,d6(e,t,0,i,zm(e,n,r.hostVars,Qt),r)}function Tde(e,t,n){const i=la(t,e),r=o6(n),o=e[10],s=xE(e,iv(e,r,null,n.onPush?64:16,i,t,o,o.createRenderer(i,n),null,null));e[t.index]=s}function sc(e,t,n,i,r,o){const s=la(e,t);!function mO(e,t,n,i,r,o,s){if(null==o)hi(e)?e.removeAttribute(t,r,n):t.removeAttribute(r);else{const a=null==s?jt(o):s(o,i||"",r);hi(e)?e.setAttribute(t,r,a,n):n?t.setAttributeNS(n,r,a):t.setAttribute(r,a)}}(t[11],s,o,e.value,n,i,r)}function Ade(e,t,n,i,r,o){const s=o[t];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const u=s[l++],c=s[l++],d=s[l++];null!==a?i.setInput(n,d,u,c):n[c]=d}}}function Ode(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function m6(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function kde(e,t){const n=Ts(t,e);if(jy(n)){const i=n[1];80&n[2]?Gm(i,n,i.template,n[8]):n[5]>0&&_O(n)}}function _O(e){for(let i=G2(e);null!==i;i=W2(i))for(let r=10;r<i.length;r++){const o=i[r];if(1024&o[2]){const s=o[1];Gm(s,o,s.template,o[8])}else o[5]>0&&_O(o)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=Ts(n[i],e);jy(r)&&r[5]>0&&_O(r)}}function Ide(e,t){const n=Ts(t,e),i=n[1];(function Rde(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),rv(i,n,n[8])}function xE(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function yO(e){for(;e;){e[2]|=64;const t=tv(e);if(ve(e)&&!t)return e;e=t}return null}function bO(e,t,n){const i=t[10];i.begin&&i.begin();try{Gm(e,t,e.template,n)}catch(r){throw w6(t,r),r}finally{i.end&&i.end()}}function _6(e){!function vO(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],i=$2(n),r=i[1];hde(r,i,r.template,n)}}(e[8])}function wO(e,t,n){y2(0),t(e,n)}const jde=(()=>Promise.resolve(null))();function y6(e){return e[7]||(e[7]=[])}function v6(e){return e.cleanup||(e.cleanup=[])}function w6(e,t){const n=e[9],i=n?n.get($m,null):null;i&&i.handleError(t)}function E6(e,t,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],u=e.data[s];null!==u.setInput?u.setInput(l,r,i,a):l[a]=r}}function Td(e,t,n){const i=Tp(t,e);!function SB(e,t,n){hi(e)?e.setValue(t,n):t.textContent=n}(e[11],i,n)}function TE(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=Ju(r,a):2==o&&(i=Ju(i,a+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}const EO=new nn("INJECTOR",-1);class C6{get(t,n=Wy){if(n===Wy){const i=new Error(`NullInjectorError: No provider for ${hn(t)}!`);throw i.name="NullInjectorError",i}return n}}const CO=new nn("Set Injector scope."),ov={},Vde={};let DO;function D6(){return void 0===DO&&(DO=new C6),DO}function S6(e,t=null,n=null,i){const r=x6(e,t,n,i);return r._resolveInjectorDefTypes(),r}function x6(e,t=null,n=null,i){return new Hde(e,n,t||D6(),i)}class Hde{constructor(t,n,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&nc(n,a=>this.processProvider(a,t,n)),nc([t],a=>this.processInjectorType(a,[],o)),this.records.set(EO,Wm(void 0,this));const s=this.records.get(CO);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:hn(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=Wy,i=Y.Default){this.assertNotDestroyed();const r=Y4(this),o=se(void 0);try{if(!(i&Y.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function Xde(e){return"function"==typeof e||"object"==typeof e&&e instanceof nn}(t)&&g(t);a=l&&this.injectableDefInScope(l)?Wm(SO(t),ov):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&Y.Self?D6():this.parent).get(t,n=i&Y.Optional&&n===Wy?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[hE]=s[hE]||[]).unshift(hn(t)),r)throw s;return function Sue(e,t,n,i){const r=e[hE];throw t[q4]&&r.unshift(t[q4]),e.message=function xue(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let r=hn(t);if(Array.isArray(t))r=t.map(hn).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):hn(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(bue,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e[hE]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{se(o),Y4(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((i,r)=>t.push(hn(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pt(205,!1)}processInjectorType(t,n,i){if(!(t=zt(t)))return!1;let r=O(t);const o=null==r&&t.ngModule||void 0,s=void 0===o?t:o,a=-1!==i.indexOf(s);if(void 0!==o&&(r=O(o)),null==r)return!1;if(null!=r.imports&&!a){let c;i.push(s);try{nc(r.imports,d=>{this.processInjectorType(d,n,i)&&(void 0===c&&(c=[]),c.push(d))})}finally{}if(void 0!==c)for(let d=0;d<c.length;d++){const{ngModule:f,providers:h}=c[d];nc(h,p=>this.processProvider(p,f,h||Dn))}}this.injectorDefTypes.add(s);const l=bd(s)||(()=>new s);this.records.set(s,Wm(l,ov));const u=r.providers;if(null!=u&&!a){const c=t;nc(u,d=>this.processProvider(d,c,u))}return void 0!==o&&void 0!==t.providers}processProvider(t,n,i){let r=qm(t=zt(t))?t:zt(t&&t.provide);const o=function zde(e,t,n){return A6(e)?Wm(void 0,e.useValue):Wm(T6(e),ov)}(t);if(qm(t)||!0!==t.multi)this.records.get(r);else{let s=this.records.get(r);s||(s=Wm(void 0,ov,!0),s.factory=()=>M2(s.multi),this.records.set(r,s)),r=t,s.multi.push(t)}this.records.set(r,o)}hydrate(t,n){return n.value===ov&&(n.value=Vde,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Kde(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=zt(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function SO(e){const t=g(e),n=null!==t?t.factory:bd(e);if(null!==n)return n;if(e instanceof nn)throw new Pt(204,!1);if(e instanceof Function)return function Ude(e){const t=e.length;if(t>0)throw Gy(t,"?"),new Pt(204,!1);const n=function w(e){const t=e&&(e[M]||e[U]);if(t){const n=function C(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Pt(204,!1)}function T6(e,t,n){let i;if(qm(e)){const r=zt(e);return bd(r)||SO(r)}if(A6(e))i=()=>zt(e.useValue);else if(function Wde(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...M2(e.deps||[]));else if(function Gde(e){return!(!e||!e.useExisting)}(e))i=()=>ze(zt(e.useExisting));else{const r=zt(e&&(e.useClass||e.provide));if(!function Yde(e){return!!e.deps}(e))return bd(r)||SO(r);i=()=>new r(...M2(e.deps))}return i}function Wm(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function A6(e){return null!==e&&"object"==typeof e&&Eue in e}function qm(e){return"function"==typeof e}let Pr=(()=>{class e{static create(n,i){var r;if(Array.isArray(n))return S6({name:""},i,n,"");{const o=null!==(r=n.name)&&void 0!==r?r:"";return S6({name:o},n.parent,n.providers,o)}}}return e.THROW_IF_NOT_FOUND=Wy,e.NULL=new C6,e.\u0275prov=lt({token:e,providedIn:"any",factory:()=>ze(EO)}),e.__NG_ELEMENT_ID__=-1,e})();function rfe(e,t){nE($2(e)[1],Xn())}function si(e){let t=function $6(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let r;if(Z(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Pt(903,"");r=t.\u0275dir}if(r){if(n){i.push(r);const s=e;s.inputs=AO(e.inputs),s.declaredInputs=AO(e.declaredInputs),s.outputs=AO(e.outputs);const a=r.hostBindings;a&&lfe(e,a);const l=r.viewQuery,u=r.contentQueries;if(l&&sfe(e,l),u&&afe(e,u),To(e.inputs,r.inputs),To(e.declaredInputs,r.declaredInputs),To(e.outputs,r.outputs),Z(r)&&r.data.animation){const c=e.data;c.animation=(c.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===si&&(n=!1)}}t=Object.getPrototypeOf(t)}!function ofe(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=sE(r.hostAttrs,n=sE(n,r.hostAttrs))}}(i)}function AO(e){return e===ar?{}:e===Dn?[]:e}function sfe(e,t){const n=e.viewQuery;e.viewQuery=n?(i,r)=>{t(i,r),n(i,r)}:t}function afe(e,t){const n=e.contentQueries;e.contentQueries=n?(i,r,o)=>{t(i,r,o),n(i,r,o)}:t}function lfe(e,t){const n=e.hostBindings;e.hostBindings=n?(i,r)=>{t(i,r),n(i,r)}:t}let AE=null;function Ym(){if(!AE){const e=Ct.Symbol;if(e&&e.iterator)AE=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(AE=i)}}}return AE}function sv(e){return!!OO(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ym()in e)}function OO(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ac(e,t,n){return e[t]=n}function Ko(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function pi(e,t,n,i){const r=fe();return Ko(r,Am(),t)&&(At(),sc(ur(),r,e,t,n,i)),pi}function Xm(e,t,n,i){return Ko(e,Am(),n)?t+jt(n)+i:Qt}function Ht(e,t,n,i,r,o,s,a){const l=fe(),u=At(),c=e+20,d=u.firstCreatePass?function gfe(e,t,n,i,r,o,s,a,l){const u=t.consts,c=Um(t,e,4,s||null,ne(u,a));gO(t,n,c,ne(u,l)),nE(t,c);const d=c.tViews=SE(2,c,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,c),d.queries=t.queries.embeddedTView(c)),c}(c,u,l,t,n,i,r,o,s):u.data[c];fl(d,!1);const f=l[11].createComment("");bE(u,l,f,d),Yo(f,l),xE(l,l[c]=m6(f,l,f,d)),_e(d)&&hO(u,l,d),null!=s&&pO(l,d,a)}function ee(e,t=Y.Default){const n=fe();return null===n?ze(e,t):L4(Xn(),n,zt(e),t)}function RO(){throw new Error("invalid")}function Je(e,t,n){const i=fe();return Ko(i,Am(),t)&&ja(At(),ur(),i,e,t,i[11],n,!1),Je}function PO(e,t,n,i,r){const s=r?"class":"style";E6(e,n,t.inputs[s],s,i)}function x(e,t,n,i){const r=fe(),o=At(),s=20+e,a=r[11],l=r[s]=Y2(a,t,function Kle(){return E.lFrame.currentNamespace}()),u=o.firstCreatePass?function Ffe(e,t,n,i,r,o,s){const a=t.consts,u=Um(t,e,2,r,ne(a,o));return gO(t,n,u,ne(a,s)),null!==u.attrs&&TE(u,u.attrs,!1),null!==u.mergedAttrs&&TE(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,r,0,t,n,i):o.data[s];fl(u,!0);const c=u.mergedAttrs;null!==c&&oE(a,l,c);const d=u.classes;null!==d&&eO(a,l,d);const f=u.styles;null!==f&&BB(a,l,f),64!=(64&u.flags)&&bE(o,r,l,u),0===function $(){return E.lFrame.elementDepthCount}()&&Yo(l,r),function ce(){E.lFrame.elementDepthCount++}(),_e(u)&&(hO(o,r,u),function r6(e,t,n){if(H(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,u,r)),null!==i&&pO(r,u)}function T(){let e=Xn();Tm()?g2():(e=e.parent,fl(e,!1));const t=e;!function me(){E.lFrame.elementDepthCount--}();const n=At();n.firstCreatePass&&(nE(n,e),H(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function eue(e){return 0!=(16&e.flags)}(t)&&PO(n,t,fe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function tue(e){return 0!=(32&e.flags)}(t)&&PO(n,t,fe(),t.stylesWithoutHost,!1)}function Ve(e,t,n,i){x(e,t,n,i),T()}function lv(e){return!!e&&"function"==typeof e.then}const FO=function l$(e){return!!e&&"function"==typeof e.subscribe};function gn(e,t,n,i){const r=fe(),o=At(),s=Xn();return function c$(e,t,n,i,r,o,s,a){const l=_e(i),c=e.firstCreatePass&&v6(e),d=t[8],f=y6(t);let h=!0;if(3&i.type||a){const _=la(i,t),b=a?a(_):_,v=f.length,D=a?A=>a(Qi(A[i.index])):i.index;if(hi(n)){let A=null;if(!a&&l&&(A=function Bfe(e,t,n,i){const r=e.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=t[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,t,r,i.index)),null!==A)(A.__ngLastListenerFn__||A).__ngNextListenerFn__=o,A.__ngLastListenerFn__=o,h=!1;else{o=LO(i,t,d,o,!1);const I=n.listen(b,r,o);f.push(o,I),c&&c.push(r,D,v,v+1)}}else o=LO(i,t,d,o,!0),b.addEventListener(r,o,s),f.push(o),c&&c.push(r,D,v,s)}else o=LO(i,t,d,o,!1);const p=i.outputs;let m;if(h&&null!==p&&(m=p[r])){const _=m.length;if(_)for(let b=0;b<_;b+=2){const L=t[m[b]][m[b+1]].subscribe(o),k=f.length;f.push(o,L),c&&c.push(r,i.index,k,-(k+1))}}}(o,r,r[11],s,e,t,!!n,i),gn}function d$(e,t,n,i){try{return!1!==n(i)}catch(r){return w6(e,r),!1}}function LO(e,t,n,i,r){return function o(s){if(s===Function)return i;const a=2&e.flags?Ts(e.index,t):t;0==(32&t[2])&&yO(a);let l=d$(t,0,i,s),u=o.__ngNextListenerFn__;for(;u;)l=d$(t,0,u,s)&&l,u=u.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function Jn(e=1){return function Ule(e){return(E.lFrame.contextLView=function zle(e,t){for(;e>0;)t=t[15],e--;return t}(e,E.lFrame.contextLView))[8]}(e)}function $fe(e,t){let n=null;const i=function qce(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===i?UB(e,o,!0):Xce(i,o))return r}else n=r}return n}function Od(e,t,n){return Nd(e,"",t,"",n),Od}function Nd(e,t,n,i,r){const o=fe(),s=Xm(o,t,n,i);return s!==Qt&&ja(At(),ur(),o,e,s,o[11],r,!1),Nd}function E$(e,t,n,i,r){const o=e[n+1],s=null===t;let a=i?nu(o):xd(o),l=!1;for(;0!==a&&(!1===l||s);){const c=e[a+1];Ufe(e[a],t)&&(l=!0,e[a+1]=i?iO(c):tO(c)),a=i?nu(c):xd(c)}l&&(e[n+1]=i?tO(o):iO(o))}function Ufe(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Fm(e,t)>=0}const Yr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function C$(e){return e.substring(Yr.key,Yr.keyEnd)}function D$(e,t){const n=Yr.textEnd;return n===t?-1:(t=Yr.keyEnd=function qfe(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Yr.key=t,n),s0(e,t,n))}function s0(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Zi(e,t){return function ru(e,t,n,i){const r=fe(),o=At(),s=Sd(2);o.firstUpdatePass&&N$(o,e,s,i),t!==Qt&&Ko(r,s,t)&&k$(o,o.data[Os()],r,r[11],e,r[s+1]=function ihe(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=hn(Bf(e)))),e}(t,n),i,s)}(e,t,null,!0),Zi}function Mp(e){!function ou(e,t,n,i){const r=At(),o=Sd(2);r.firstUpdatePass&&N$(r,null,o,i);const s=fe();if(n!==Qt&&Ko(s,o,n)){const a=r.data[Os()];if(R$(a,i)&&!O$(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=Ju(l,n||"")),PO(r,a,s,n,i)}else!function nhe(e,t,n,i,r,o,s,a){r===Qt&&(r=Dn);let l=0,u=0,c=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;null!==c||null!==d;){const f=l<r.length?r[l+1]:void 0,h=u<o.length?o[u+1]:void 0;let m,p=null;c===d?(l+=2,u+=2,f!==h&&(p=d,m=h)):null===d||null!==c&&c<d?(l+=2,p=c):(u+=2,p=d,m=h),null!==p&&k$(e,t,n,i,p,m,s,a),c=l<r.length?r[l]:null,d=u<o.length?o[u]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function the(e,t,n){if(null==n||""===n)return Dn;const i=[],r=Bf(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,o)}}(Fa,cc,e,!0)}function cc(e,t){for(let n=function Gfe(e){return function x$(e){Yr.key=0,Yr.keyEnd=0,Yr.value=0,Yr.valueEnd=0,Yr.textEnd=e.length}(e),D$(e,s0(e,0,Yr.textEnd))}(t);n>=0;n=D$(t,n))Fa(e,C$(t),!0)}function O$(e,t){return t>=e.expandoStartIndex}function N$(e,t,n,i){const r=e.data;if(null===r[n+1]){const o=r[Os()],s=O$(e,n);R$(o,i)&&null===t&&!s&&(t=!1),t=function Jfe(e,t,n,i){const r=function _2(e){const t=E.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=uv(n=BO(null,e,t,n,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=BO(r,e,t,n,i),null===o){let l=function Qfe(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==xd(i))return e[nu(i)]}(e,t,i);void 0!==l&&Array.isArray(l)&&(l=BO(null,e,t,l[1],i),l=uv(l,t.attrs,i),function Zfe(e,t,n,i){e[nu(n?t.classBindings:t.styleBindings)]=i}(e,t,i,l))}else o=function ehe(e,t,n){let i;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=uv(i,e[o].hostAttrs,n);return uv(i,t.attrs,n)}(e,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(r,o,t,i),function Vfe(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=nu(s),l=xd(s);e[i]=n;let c,u=!1;if(Array.isArray(n)){const d=n;c=d[1],(null===c||Fm(d,c)>0)&&(u=!0)}else c=n;if(r)if(0!==l){const f=nu(e[a+1]);e[i+1]=EE(f,a),0!==f&&(e[f+1]=nO(e[f+1],i)),e[a+1]=function ede(e,t){return 131071&e|t<<17}(e[a+1],i)}else e[i+1]=EE(a,0),0!==a&&(e[a+1]=nO(e[a+1],i)),a=i;else e[i+1]=EE(l,0),0===a?a=i:e[l+1]=nO(e[l+1],i),l=i;u&&(e[i+1]=tO(e[i+1])),E$(e,c,i,!0),E$(e,c,i,!1),function Hfe(e,t,n,i,r){const o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Fm(o,t)>=0&&(n[i+1]=iO(n[i+1]))}(t,c,e,i,o),s=EE(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,n,s,i)}}function BO(e,t,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],i=uv(i,o.hostAttrs,r),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function uv(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Fa(e,s,!!n||t[++o]))}return void 0===e?null:e}function k$(e,t,n,i,r,o,s,a){if(!(3&t.type))return;const l=e.data,u=l[a+1];ME(function YB(e){return 1==(1&e)}(u)?I$(l,t,n,r,xd(u),s):void 0)||(ME(o)||function qB(e){return 2==(2&e)}(u)&&(o=I$(l,null,n,r,a,s)),function Hce(e,t,n,i,r){const o=hi(e);if(t)r?o?e.addClass(n,i):n.classList.add(i):o?e.removeClass(n,i):n.classList.remove(i);else{let s=-1===i.indexOf("-")?void 0:La.DashCase;if(null==r)o?e.removeStyle(n,i,s):n.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),s|=La.Important),o?e.setStyle(n,i,r,s):n.style.setProperty(i,r,a?"important":"")}}}(i,s,Tp(Os(),n),r,o))}function I$(e,t,n,i,r,o){const s=null===t;let a;for(;r>0;){const l=e[r],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let f=n[r+1];f===Qt&&(f=d?Dn:void 0);let h=d?A2(f,i):c===i?f:void 0;if(u&&!ME(h)&&(h=A2(l,i)),ME(h)&&(a=h,s))return a;const p=e[r+1];r=s?nu(p):xd(p)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=A2(l,i))}return a}function ME(e){return void 0!==e}function R$(e,t){return 0!=(e.flags&(t?16:32))}function le(e,t=""){const n=fe(),i=At(),r=e+20,o=i.firstCreatePass?Um(i,r,1,t,null):i.data[r],s=n[r]=function q2(e,t){return hi(e)?e.createText(t):e.createTextNode(t)}(n[11],t);bE(i,n,s,o),fl(o,!1)}function Md(e){return Ba("",e,""),Md}function Ba(e,t,n){const i=fe(),r=Xm(i,e,t,n);return r!==Qt&&Td(i,Os(),r),Ba}const Ip=void 0;var Che=["en",[["a","p"],["AM","PM"],Ip],[["AM","PM"],Ip,Ip],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ip,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ip,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ip,"{1} 'at' {0}",Ip],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ehe(e){const n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let a0={};function e9(e){return e in a0||(a0[e]=Ct.ng&&Ct.ng.common&&Ct.ng.common.locales&&Ct.ng.common.locales[e]),a0[e]}var tt=(()=>((tt=tt||{})[tt.LocaleId=0]="LocaleId",tt[tt.DayPeriodsFormat=1]="DayPeriodsFormat",tt[tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",tt[tt.DaysFormat=3]="DaysFormat",tt[tt.DaysStandalone=4]="DaysStandalone",tt[tt.MonthsFormat=5]="MonthsFormat",tt[tt.MonthsStandalone=6]="MonthsStandalone",tt[tt.Eras=7]="Eras",tt[tt.FirstDayOfWeek=8]="FirstDayOfWeek",tt[tt.WeekendRange=9]="WeekendRange",tt[tt.DateFormat=10]="DateFormat",tt[tt.TimeFormat=11]="TimeFormat",tt[tt.DateTimeFormat=12]="DateTimeFormat",tt[tt.NumberSymbols=13]="NumberSymbols",tt[tt.NumberFormats=14]="NumberFormats",tt[tt.CurrencyCode=15]="CurrencyCode",tt[tt.CurrencySymbol=16]="CurrencySymbol",tt[tt.CurrencyName=17]="CurrencyName",tt[tt.Currencies=18]="Currencies",tt[tt.Directionality=19]="Directionality",tt[tt.PluralCase=20]="PluralCase",tt[tt.ExtraData=21]="ExtraData",tt))();const kE="en-US";let t9=kE;function UO(e,t,n,i,r){if(e=zt(e),Array.isArray(e))for(let o=0;o<e.length;o++)UO(e[o],t,n,i,r);else{const o=At(),s=fe();let a=qm(e)?e:zt(e.provide),l=T6(e);const u=Xn(),c=1048575&u.providerIndexes,d=u.directiveStart,f=u.providerIndexes>>20;if(qm(e)||!e.multi){const h=new By(l,r,ee),p=GO(a,t,r?c:c+f,d);-1===p?(uE(Vy(u,s),o,a),zO(o,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{const h=GO(a,t,c+f,d),p=GO(a,t,c,c+f),m=h>=0&&n[h],_=p>=0&&n[p];if(r&&!_||!r&&!m){uE(Vy(u,s),o,a);const b=function bpe(e,t,n,i,r){const o=new By(e,n,ee);return o.multi=[],o.index=t,o.componentProviders=0,S9(o,r,i&&!n),o}(r?vpe:ype,n.length,r,i,l);!r&&_&&(n[p].providerFactory=b),zO(o,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(b),s.push(b)}else zO(o,e,h>-1?h:p,S9(n[r?p:h],l,!r&&i));!r&&i&&_&&n[p].componentProviders++}}}function zO(e,t,n,i){const r=qm(t),o=function qde(e){return!!e.useClass}(t);if(r||o){const l=(o?zt(t.useClass):t).prototype.ngOnDestroy;if(l){const u=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const c=u.indexOf(n);-1===c?u.push(n,[i,l]):u[c+1].push(i,l)}else u.push(n,l)}}}function S9(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function GO(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function ype(e,t,n,i){return WO(this.multi,[])}function vpe(e,t,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Hy(n,n[1],this.providerFactory.index,i);o=a.slice(0,s),WO(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],WO(r,o);return o}function WO(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Di(e,t=[]){return n=>{n.providersResolver=(i,r)=>function _pe(e,t,n){const i=At();if(i.firstCreatePass){const r=Z(e);UO(n,i.data,i.blueprint,r,!0),UO(t,i.data,i.blueprint,r,!1)}}(i,r?r(e):e,t)}}class x9{}class Cpe{resolveComponentFactory(t){throw function Epe(e){const t=Error(`No component factory found for ${hn(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Rp=(()=>{class e{}return e.NULL=new Cpe,e})();function Dpe(){return u0(Xn(),fe())}function u0(e,t){return new Ri(la(e,t))}let Ri=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=Dpe,e})();function Spe(e){return e instanceof Ri?e.nativeElement:e}class c0{}let $a=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function Tpe(){const e=fe(),n=Ts(Xn().index,e);return function xpe(e){return e[11]}(sa(n)?n:e)}(),e})(),Ape=(()=>{class e{}return e.\u0275prov=lt({token:e,providedIn:"root",factory:()=>null}),e})();class pv{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ope=new pv("13.2.1"),qO={};function LE(e,t,n,i,r=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&i.push(Qi(o)),j(o))for(let a=10;a<o.length;a++){const l=o[a],u=l[1].firstChild;null!==u&&LE(l[1],l,u,i)}const s=n.type;if(8&s)LE(e,t,n.child,i);else if(32&s){const a=z2(n,t);let l;for(;l=a();)i.push(l)}else if(16&s){const a=FB(t,n);if(Array.isArray(a))i.push(...a);else{const l=tv(t[16]);LE(l[1],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class gv{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return LE(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(j(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(K2(t,i),dE(n,i))}this._attachedToViewContainer=!1}TB(this._lView[1],this._lView)}onDestroy(t){l6(this._lView[1],this._lView,null,t)}markForCheck(){yO(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){bO(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Fde(e,t,n){Zw(!0);try{bO(e,t,n)}finally{Zw(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kce(e,t){nv(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Pt(902,"");this._appRef=t}}class Npe extends gv{constructor(t){super(t),this._view=t}detectChanges(){_6(this._view)}checkNoChanges(){!function Lde(e){Zw(!0);try{_6(e)}finally{Zw(!1)}}(this._view)}get context(){return null}}class A9 extends Rp{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=br(t);return new YO(n,this.ngModule)}}function O9(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const kpe=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yB});class YO extends x9{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Qce(e){return e.map(Jce).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return O9(this.componentDef.inputs)}get outputs(){return O9(this.componentDef.outputs)}create(t,n,i,r){const o=(r=r||this.ngModule)?function Ipe(e,t){return{get:(n,i,r)=>{const o=e.get(n,qO,r);return o!==qO||i===qO?o:t.get(n,i,r)}}}(t,r.injector):t,s=o.get(c0,Jw),a=o.get(Ape,null),l=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=i?function a6(e,t,n){if(hi(e))return e.selectRootElement(t,n===ci.ShadowDom);let i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Y2(s.createRenderer(null,this.componentDef),u,function Mpe(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(u)),d=this.componentDef.onPush?576:528,f=function B6(e,t){return{components:[],scheduler:e||yB,clean:jde,playerHandler:t||null,flags:0}}(),h=SE(0,null,null,1,0,null,null,null,null,null),p=iv(null,h,f,d,null,null,s,l,a,o);let m,_;eE(p);try{const b=function L6(e,t,n,i,r,o){const s=n[1];n[20]=e;const l=Um(s,20,2,"#host",null),u=l.mergedAttrs=t.hostAttrs;null!==u&&(TE(l,u,!0),null!==e&&(oE(r,e,u),null!==l.classes&&eO(r,e,l.classes),null!==l.styles&&BB(r,e,l.styles)));const c=i.createRenderer(e,t),d=iv(n,o6(t),null,t.onPush?64:16,n[20],l,i,c,o||null,null);return s.firstCreatePass&&(uE(Vy(l,n),s,t.type),h6(s,l),p6(l,n.length,1)),xE(n,d),n[20]=d}(c,this.componentDef,p,s,l);if(c)if(i)oE(l,c,["ng-version",Ope.full]);else{const{attrs:v,classes:D}=function Zce(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!tu(r))break;r=o}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);v&&oE(l,c,v),D&&D.length>0&&eO(l,c,D.join(" "))}if(_=Fy(h,20),void 0!==n){const v=_.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const A=n[D];v.push(null!=A?Array.from(A):null)}}m=function j6(e,t,n,i,r){const o=n[1],s=function bde(e,t,n){const i=Xn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),g6(e,i,t,zm(e,t,1,null),n));const r=Hy(t,e,i.directiveStart,i);Yo(r,t);const o=la(i,t);return o&&Yo(o,t),r}(o,n,t);if(i.components.push(s),e[8]=s,r&&r.forEach(l=>l(s,t)),t.contentQueries){const l=Xn();t.contentQueries(1,s,l.directiveStart)}const a=Xn();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Lf(a.index),d6(n[1],a,0,a.directiveStart,a.directiveEnd,t),f6(t,s)),s}(b,this.componentDef,p,f,[rfe]),rv(h,p,null)}finally{tE()}return new Ppe(this.componentType,m,u0(_,p),p,_)}}class Ppe extends class wpe{}{constructor(t,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new Npe(r),this.componentType=t}get injector(){return new Mm(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class kd{}class N9{}const d0=new Map;class I9 extends kd{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new A9(this);const i=Mr(t);this._bootstrapComponents=oc(i.bootstrap),this._r3Injector=x6(t,n,[{provide:kd,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver}],hn(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Pr.THROW_IF_NOT_FOUND,i=Y.Default){return t===Pr||t===kd||t===EO?this:this._r3Injector.get(t,n,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class KO extends N9{constructor(t){super(),this.moduleType=t,null!==Mr(t)&&function Lpe(e){const t=new Set;!function n(i){const r=Mr(i,!0),o=r.id;null!==o&&(function M9(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${hn(t)} vs ${hn(t.name)}`)}(o,d0.get(o),i),d0.set(o,i));const s=oc(r.imports);for(const a of s)t.has(a)||(t.add(a),n(a))}(e)}(t)}create(t){return new I9(this.moduleType,t)}}function f0(e,t,n,i){return R9(fe(),As(),e,t,n,i)}function _v(e,t){const n=e[t];return n===Qt?void 0:n}function R9(e,t,n,i,r,o){const s=t+n;return Ko(e,s,r)?ac(e,s+1,o?i.call(o,r):i(r)):_v(e,s+1)}function P9(e,t,n,i,r,o,s){const a=t+n;return function Np(e,t,n,i){const r=Ko(e,t,n);return Ko(e,t+1,i)||r}(e,a,r,o)?ac(e,a+2,s?i.call(s,r,o):i(r,o)):_v(e,a+2)}function h0(e,t){const n=At();let i;const r=e+20;n.firstCreatePass?(i=function Gpe(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=bd(i.type)),s=se(ee);try{const a=aE(!1),l=o();return aE(a),function mfe(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,fe(),r,l),l}finally{se(s)}}function yv(e,t,n,i){const r=e+20,o=fe(),s=Ff(o,r);return vv(o,r)?P9(o,As(),t,s.transform,n,i,s):s.transform(n,i)}function vv(e,t){return e[1].data[t].pure}function JO(e){return t=>{setTimeout(e,void 0,t)}}const dn=class Kpe extends jn{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){var r,o,s;let a=t,l=n||(()=>null),u=i;if(t&&"object"==typeof t){const d=t;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(o=d.error)||void 0===o?void 0:o.bind(d),u=null===(s=d.complete)||void 0===s?void 0:s.bind(d)}this.__isAsync&&(l=JO(l),a&&(a=JO(a)),u&&(u=JO(u)));const c=super.subscribe({next:a,error:l,complete:u});return t instanceof Vn&&t.add(c),c}};function Xpe(){return this._results[Ym()]()}class QO{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ym(),i=QO.prototype;i[n]||(i[n]=Xpe)}get changes(){return this._changes||(this._changes=new dn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const r=hl(t);(this._changesDetected=!function due(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let dr=(()=>{class e{}return e.__NG_ELEMENT_ID__=Zpe,e})();const Jpe=dr,Qpe=class extends Jpe{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t){const n=this._declarationTContainer.tViews,i=iv(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(n)),rv(n,i,t),new gv(i)}};function Zpe(){return jE(Xn(),fe())}function jE(e,t){return 4&e.type?new Qpe(t,e,u0(e,t)):null}let su=(()=>{class e{}return e.__NG_ELEMENT_ID__=ege,e})();function ege(){return H9(Xn(),fe())}const tge=su,$9=class extends tge{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return u0(this._hostTNode,this._hostLView)}get injector(){return new Mm(this._hostTNode,this._hostLView)}get parentInjector(){const t=lE(this._hostTNode,this._hostLView);if(k4(t)){const n=Nm(t,this._hostLView),i=Om(t);return new Mm(n[1].data[i+8],n)}return new Mm(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=V9(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){const r=t.createEmbeddedView(n||{});return this.insert(r,i),r}createComponent(t,n,i,r,o){const s=t&&!function zy(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const d=n||{};a=d.index,i=d.injector,r=d.projectableNodes,o=d.ngModuleRef}const l=s?t:new YO(br(t)),u=i||this.parentInjector;if(!o&&null==l.ngModule&&u){const d=u.get(kd,null);d&&(o=d)}const c=l.create(u,r,void 0,o);return this.insert(c.hostView,a),c}insert(t,n){const i=t._lView,r=i[1];if(function xm(e){return j(e[3])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const d=i[3],f=new $9(d,d[6],d[3]);f.detach(f.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function Rce(e,t,n,i){const r=10+i,o=n.length;i>0&&(n[r-1][4]=t),i<o-10?(t[4]=n[r],H4(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function Pce(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,i,s,o);const a=Q2(o,s),l=i[11],u=vE(l,s[7]);return null!==u&&function Mce(e,t,n,i,r,o){i[0]=r,i[6]=t,nv(e,i,n,1,r,o)}(r,s[6],l,i,u,a),t.attachToViewContainerRef(),H4(ZO(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=V9(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=K2(this._lContainer,n);i&&(dE(ZO(this._lContainer),n),TB(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=K2(this._lContainer,n);return i&&null!=dE(ZO(this._lContainer),n)?new gv(i):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function V9(e){return e[8]}function ZO(e){return e[8]||(e[8]=[])}function H9(e,t){let n;const i=t[e.index];if(j(i))n=i;else{let r;if(8&e.type)r=Qi(i);else{const o=t[11];r=o.createComment("");const s=la(e,t);Op(o,vE(o,s),r,function Bce(e,t){return hi(e)?e.nextSibling(t):t.nextSibling}(o,s),!1)}t[e.index]=n=m6(i,t,r,e),xE(t,n)}return new $9(n,e,t)}class eN{constructor(t){this.queryList=t,this.matches=null}clone(){return new eN(this.queryList)}setDirty(){this.queryList.setDirty()}}class tN{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new tN(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==q9(t,n).matches&&this.queries[n].setDirty()}}class U9{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class nN{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new nN(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class iN{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new iN(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(t,n,rge(n,o)),this.matchTNodeWithReadOption(t,n,cE(n,t,o,!1,!1))}else i===dr?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,cE(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ri||r===su||r===dr&&4&n.type)this.addMatch(n.index,-2);else{const o=cE(n,t,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function rge(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function sge(e,t,n,i){return-1===n?function oge(e,t){return 11&e.type?u0(e,t):4&e.type?jE(e,t):null}(t,e):-2===n?function age(e,t,n){return n===Ri?u0(t,e):n===dr?jE(t,e):n===su?H9(t,e):void 0}(e,t,i):Hy(e,e[1],n,t)}function z9(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const o=e.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const u=s[l];a.push(u<0?null:sge(t,o[u],s[l+1],n.metadata.read))}r.matches=a}return r.matches}function rN(e,t,n,i){const r=e.queries.getByIndex(n),o=r.matches;if(null!==o){const s=z9(e,t,r,n);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const u=o[a+1],c=t[-l];for(let d=10;d<c.length;d++){const f=c[d];f[17]===f[3]&&rN(f[1],f,u,i)}if(null!==c[9]){const d=c[9];for(let f=0;f<d.length;f++){const h=d[f];rN(h[1],h,u,i)}}}}}return i}function Si(e){const t=fe(),n=At(),i=C4();y2(i+1);const r=q9(n,i);if(e.dirty&&Ly(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const o=r.crossesNgTemplate?rN(n,t,i,[]):z9(n,t,r,i);e.reset(o,Spe),e.notifyOnChanges()}return!0}return!1}function Pp(e,t,n){const i=At();i.firstCreatePass&&(function W9(e,t,n){null===e.queries&&(e.queries=new nN),e.queries.track(new iN(t,n))}(i,new U9(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),function G9(e,t,n){const i=new QO(4==(4&n));l6(e,t,i,i.destroy),null===t[19]&&(t[19]=new tN),t[19].queries.push(new eN(i))}(i,fe(),t)}function xi(){return function lge(e,t){return e[19].queries[t].queryList}(fe(),C4())}function q9(e,t){return e.queries.getByIndex(t)}function VE(...e){}const HE=new nn("Application Initializer");let g0=(()=>{class e{constructor(n){this.appInits=n,this.resolve=VE,this.reject=VE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(lv(o))n.push(o);else if(FO(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(ze(HE,8))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const wv=new nn("AppId"),Tge={provide:wv,useFactory:function xge(){return`${cN()}${cN()}${cN()}`},deps:[]};function cN(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const c7=new nn("Platform Initializer"),Ev=new nn("Platform ID"),d7=new nn("appBootstrapListener");let f7=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const Uf=new nn("LocaleId"),h7=new nn("DefaultCurrencyCode");class Age{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let UE=(()=>{class e{compileModuleSync(n){return new KO(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),o=oc(Mr(n).declarations).reduce((s,a)=>{const l=br(a);return l&&s.push(new YO(l)),s},[]);return new Age(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const Nge=(()=>Promise.resolve(0))();function dN(e){"undefined"==typeof Zone?Nge.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class gi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dn(!1),this.onMicrotaskEmpty=new dn(!1),this.onStable=new dn(!1),this.onError=new dn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Mge(){let e=Ct.requestAnimationFrame,t=Ct.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Rge(e){const t=()=>{!function Ige(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ct,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,hN(e),e.isCheckStableRunning=!0,fN(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),hN(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return p7(e),n.invokeTask(r,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),g7(e)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return p7(e),n.invoke(r,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),g7(e)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,hN(e),fN(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,kge,VE,VE);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const kge={};function fN(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function hN(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function p7(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function g7(e){e._nesting--,fN(e)}class Pge{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dn,this.onMicrotaskEmpty=new dn,this.onStable=new dn,this.onError=new dn}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}}let pN=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gi.assertNotInAngularZone(),dN(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dN(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,i,r){return[]}}return e.\u0275fac=function(n){return new(n||e)(ze(gi))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),m7=(()=>{class e{constructor(){this._applications=new Map,gN.addToWindow(this)}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return gN.findTestabilityInTree(this,n,i)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class Fge{addToWindow(t){}findTestabilityInTree(t,n,i){return null}}let au,gN=new Fge;const _7=new nn("AllowMultipleToken");class y7{constructor(t,n){this.name=t,this.token=n}}function v7(e,t,n=[]){const i=`Platform: ${t}`,r=new nn(i);return(o=[])=>{let s=b7();if(!s||s.injector.get(_7,!1))if(e)e(n.concat(o).concat({provide:r,useValue:!0}));else{const a=n.concat(o).concat({provide:r,useValue:!0},{provide:CO,useValue:"platform"});!function $ge(e){if(au&&!au.destroyed&&!au.injector.get(_7,!1))throw new Pt(400,"");au=e.get(w7);const t=e.get(c7,null);t&&t.forEach(n=>n())}(Pr.create({providers:a,name:i}))}return function Vge(e){const t=b7();if(!t)throw new Pt(401,"");return t}()}}function b7(){return au&&!au.destroyed?au:null}let w7=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const a=function Hge(e,t){let n;return n="noop"===e?new Pge:("zone.js"===e?void 0:e)||new gi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:gi,useValue:a}];return a.run(()=>{const u=Pr.create({providers:l,parent:this.injector,name:n.moduleType.name}),c=n.create(u),d=c.injector.get($m,null);if(!d)throw new Pt(402,"");return a.runOutsideAngular(()=>{const f=a.onError.subscribe({next:h=>{d.handleError(h)}});c.onDestroy(()=>{mN(this._modules,c),f.unsubscribe()})}),function Uge(e,t,n){try{const i=n();return lv(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(d,a,()=>{const f=c.injector.get(g0);return f.runInitializers(),f.donePromise.then(()=>(function Ahe(e){Oo(e,"Expected localeId to be defined"),"string"==typeof e&&(t9=e.toLowerCase().replace(/_/g,"-"))}(c.injector.get(Uf,kE)||kE),this._moduleDoBootstrap(c),c))})})}bootstrapModule(n,i=[]){const r=E7({},i);return function jge(e,t,n){const i=new KO(n);return Promise.resolve(i)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(n){const i=n.injector.get(m0);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new Pt(403,"");n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pt(404,"");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(ze(Pr))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function E7(e,t){return Array.isArray(t)?t.reduce(E7,e):Object.assign(Object.assign({},e),t)}let m0=(()=>{class e{constructor(n,i,r,o,s){this._zone=n,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new xn(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),l=new xn(u=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{gi.assertNotInAngularZone(),dN(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{gi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{c.unsubscribe(),d.unsubscribe()}});this.isStable=function Es(...e){const t=Xu(e),n=function uo(e,t){return"number"==typeof Ku(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?at(i[0]):Wl(n)(wi(i,t)):ws}(a,l.pipe(function xo(e={}){const{connector:t=(()=>new jn),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s=null,a=null,l=null,u=0,c=!1,d=!1;const f=()=>{null==a||a.unsubscribe(),a=null},h=()=>{f(),s=l=null,c=d=!1},p=()=>{const m=s;h(),null==m||m.unsubscribe()};return ri((m,_)=>{u++,!d&&!c&&f();const b=l=null!=l?l:t();_.add(()=>{u--,0===u&&!d&&!c&&(a=hd(p,r))}),b.subscribe(_),s||(s=new Xi({next:v=>b.next(v),error:v=>{d=!0,f(),a=hd(h,n,v),b.error(v)},complete:()=>{c=!0,f(),a=hd(h,i),b.complete()}}),wi(m).subscribe(s))})(o)}}()))}bootstrap(n,i){if(!this._initStatus.done)throw new Pt(405,"");let r;r=n instanceof x9?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(r.componentType);const o=function Bge(e){return e.isBoundToModule}(r)?void 0:this._injector.get(kd),a=r.create(Pr.NULL,[],i||r.selector,o),l=a.location.nativeElement,u=a.injector.get(pN,null),c=u&&a.injector.get(m7);return u&&c&&c.registerApplication(l,u),a.onDestroy(()=>{this.detachView(a.hostView),mN(this.components,a),c&&c.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Pt(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;mN(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(d7,[]).concat(this._bootstrapListeners).forEach(r=>r(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(ze(gi),ze(Pr),ze($m),ze(Rp),ze(g0))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function mN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let D7=!0,lu=(()=>{class e{}return e.__NG_ELEMENT_ID__=Wge,e})();function Wge(e){return function qge(e,t,n){if(J(e)&&!n){const i=Ts(e.index,t);return new gv(i,i)}return 47&e.type?new gv(t[16],t):null}(Xn(),fe(),16==(16&e))}class M7{constructor(){}supports(t){return sv(t)}create(t){return new Zge(t)}}const Qge=(e,t)=>t;class Zge{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Qge}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<I7(i,r,o)?n:i,a=I7(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const u=a-r,c=l-r;if(u!=c){for(let f=0;f<u;f++){const h=f<o.length?o[f]:o[f]=0,p=h+f;c<=p&&p<u&&(o[f]=h+1)}o[s.previousIndex]=c-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!sv(t))throw new Pt(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function pfe(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Ym()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new eme(n,i),o,r),t}_verifyReinsertion(t,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const r=null===n?this._itHead:n._next;return t._next=r,t._prev=n,null===r?this._itTail=t:r._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new k7),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new k7),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class eme{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tme{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class k7{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new tme,this.map.set(n,i)),i.add(t)}get(t,n){const r=this.map.get(t);return r?r.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function I7(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class R7{constructor(){}supports(t){return t instanceof Map||OO(t)}create(){return new nme}}class nme{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||OO(t)))throw new Pt(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,n);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new ime(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class ime{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function P7(){return new Cv([new M7])}let Cv=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||P7()),deps:[[e,new Lm,new ic]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new Pt(901,"")}}return e.\u0275prov=lt({token:e,providedIn:"root",factory:P7}),e})();function F7(){return new _0([new R7])}let _0=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||F7()),deps:[[e,new Lm,new ic]]}}find(n){const i=this.factories.find(o=>o.supports(n));if(i)return i;throw new Pt(901,"")}}return e.\u0275prov=lt({token:e,providedIn:"root",factory:F7}),e})();const rme=[new R7],sme=new Cv([new M7]),ame=new _0(rme),lme=v7(null,"core",[{provide:Ev,useValue:"unknown"},{provide:w7,deps:[Pr]},{provide:m7,deps:[]},{provide:f7,deps:[]}]),hme=[{provide:m0,useClass:m0,deps:[gi,Pr,$m,Rp,g0]},{provide:kpe,deps:[gi],useFactory:function pme(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:g0,useClass:g0,deps:[[new ic,HE]]},{provide:UE,useClass:UE,deps:[]},Tge,{provide:Cv,useFactory:function ume(){return sme},deps:[]},{provide:_0,useFactory:function cme(){return ame},deps:[]},{provide:Uf,useFactory:function dme(e){return e||function fme(){return"undefined"!=typeof $localize&&$localize.locale||kE}()},deps:[[new Ky(Uf),new ic,new Lm]]},{provide:h7,useValue:"USD"}];let gme=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(ze(m0))},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:hme}),e})(),GE=null;function uu(){return GE}const Ui=new nn("DocumentToken");let Lp=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:function(){return function vme(){return ze(L7)}()},providedIn:"platform"}),e})();const bme=new nn("Location Initialized");let L7=(()=>{class e extends Lp{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return uu().getBaseHref(this._doc)}onPopState(n){const i=uu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=uu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,r){j7()?this._history.pushState(n,i,r):this.location.hash=r}replaceState(n,i,r){j7()?this._history.replaceState(n,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui))},e.\u0275prov=lt({token:e,factory:function(){return function wme(){return new L7(ze(Ui))}()},providedIn:"platform"}),e})();function j7(){return!!window.history.pushState}function wN(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function B7(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Rd(e){return e&&"?"!==e[0]?"?"+e:e}let jp=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:function(){return function Eme(e){const t=ze(Ui).location;return new CN(ze(Lp),t&&t.origin||"")}()},providedIn:"root"}),e})();const EN=new nn("appBaseHref");let CN=(()=>{class e extends jp{constructor(n,i){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return wN(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+Rd(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){const s=this.prepareExternalUrl(r+Rd(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){const s=this.prepareExternalUrl(r+Rd(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,n)}}return e.\u0275fac=function(n){return new(n||e)(ze(Lp),ze(EN,8))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),Cme=(()=>{class e extends jp{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=wN(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+Rd(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+Rd(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,n)}}return e.\u0275fac=function(n){return new(n||e)(ze(Lp),ze(EN,8))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),DN=(()=>{class e{constructor(n,i){this._subject=new dn,this._urlChangeListeners=[],this._platformStrategy=n;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=B7($7(r)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Rd(i))}normalize(n){return e.stripTrailingSlash(function Sme(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,$7(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._platformStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rd(i)),r)}replaceState(n,i="",r=null){this._platformStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rd(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return e.normalizeQueryParams=Rd,e.joinWithSlash=wN,e.stripTrailingSlash=B7,e.\u0275fac=function(n){return new(n||e)(ze(jp),ze(Lp))},e.\u0275prov=lt({token:e,factory:function(){return function Dme(){return new DN(ze(jp),ze(Lp))}()},providedIn:"root"}),e})();function $7(e){return e.replace(/\/index.html$/,"")}var Fr=(()=>((Fr=Fr||{})[Fr.Zero=0]="Zero",Fr[Fr.One=1]="One",Fr[Fr.Two=2]="Two",Fr[Fr.Few=3]="Few",Fr[Fr.Many=4]="Many",Fr[Fr.Other=5]="Other",Fr))();const kme=function Z$(e){return function ks(e){const t=function Dhe(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=e9(t);if(n)return n;const i=t.split("-")[0];if(n=e9(i),n)return n;if("en"===i)return Che;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[tt.PluralCase]};class tC{}let a0e=(()=>{class e extends tC{constructor(n){super(),this.locale=n}getPluralCategory(n,i){switch(kme(i||this.locale)(n)){case Fr.Zero:return"zero";case Fr.One:return"one";case Fr.Two:return"two";case Fr.Few:return"few";case Fr.Many:return"many";default:return"other"}}}return e.\u0275fac=function(n){return new(n||e)(ze(Uf))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function K7(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}let X7=(()=>{class e{constructor(n,i,r,o){this._iterableDiffers=n,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(sv(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),n.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),n.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${hn(i.item)}`);this._toggleClass(i.item,!0)}),n.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(i=>this._toggleClass(i,!0)):Object.keys(n).forEach(i=>this._toggleClass(i,!!n[i])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(i=>this._toggleClass(i,!1)):Object.keys(n).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(n,i){(n=n.trim())&&n.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return e.\u0275fac=function(n){return new(n||e)(ee(Cv),ee(_0),ee(Ri),ee($a))},e.\u0275dir=Pe({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class u0e{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zf=(()=>{class e{constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new u0e(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),J7(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{J7(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(ee(su),ee(dr),ee(Cv))},e.\u0275dir=Pe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();function J7(e,t){e.context.$implicit=t.item}let Fd=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new c0e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Q7("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Q7("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(ee(su),ee(dr))},e.\u0275dir=Pe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class c0e{constructor(){this.$implicit=null,this.ngIf=null}}function Q7(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${hn(t)}'.`)}let eV=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){const[r,o]=n.split(".");null!=(i=null!=i&&o?`${i}${o}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(ee(Ri),ee(_0),ee($a))},e.\u0275dir=Pe({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),Va=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:[{provide:tC,useClass:a0e}]}),e})();let Tv=(()=>{class e{}return e.\u0275prov=lt({token:e,providedIn:"root",factory:()=>new B0e(ze(Ui),window)}),e})();class B0e{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function $0e(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=iV(this.window.history)||iV(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function iV(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class rV{}class LN extends class V0e extends class yme{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function _me(e){GE||(GE=e)}(new LN)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function H0e(){return Av=Av||document.querySelector("base"),Av?Av.getAttribute("href"):null}();return null==n?null:function U0e(e){nC=nC||document.createElement("a"),nC.setAttribute("href",e);const t=nC.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Av=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return K7(document.cookie,t)}}let nC,Av=null;const oV=new nn("TRANSITION_ID"),G0e=[{provide:HE,useFactory:function z0e(e,t,n){return()=>{n.get(g0).donePromise.then(()=>{const i=uu(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[oV,Ui,Pr],multi:!0}];class jN{static init(){!function Lge(e){gN=e}(new jN)}addToWindow(t){Ct.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},Ct.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ct.getAllAngularRootElements=()=>t.getAllRootElements(),Ct.frameworkStabilizers||(Ct.frameworkStabilizers=[]),Ct.frameworkStabilizers.push(i=>{const r=Ct.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,i){if(null==n)return null;const r=t.getTestability(n);return null!=r?r:i?uu().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let W0e=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const iC=new nn("EventManagerPlugins");let rC=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(ze(iC),ze(gi))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class sV{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const r=uu().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let aV=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),Ov=(()=>{class e extends aV{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(lV),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(lV))}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function lV(e){uu().remove(e)}const BN={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$N=/%COMP%/g;function oC(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?oC(e,r,n):(r=r.replace($N,e),n.push(r))}return n}function dV(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let sC=(()=>{class e{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new VN(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case ci.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Q0e(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case ci.ShadowDom:return new Z0e(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=oC(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(ze(rC),ze(Ov),ze(wv))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class VN{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(BN[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,i){t&&t.insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;const o=BN[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const r=BN[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(La.DashCase|La.Important)?t.style.setProperty(n,i,r&La.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&La.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,dV(i)):this.eventManager.addEventListener(t,n,dV(i))}}class Q0e extends VN{constructor(t,n,i,r){super(t),this.component=i;const o=oC(r+"-"+i.id,i.styles,[]);n.addStyles(o),this.contentAttr=function K0e(e){return"_ngcontent-%COMP%".replace($N,e)}(r+"-"+i.id),this.hostAttr=function X0e(e){return"_nghost-%COMP%".replace($N,e)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class Z0e extends VN{constructor(t,n,i,r){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=oC(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let e_e=(()=>{class e extends sV{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const hV=["alt","control","meta","shift"],n_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pV={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},i_e={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let r_e=(()=>{class e extends sV{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,r){const o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>uu().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=e._normalizeKey(i.pop());let s="";if(hV.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const a={};return a.domEventName=r,a.fullKey=s,a}static getEventFullKey(n){let i="",r=function o_e(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&pV.hasOwnProperty(t)&&(t=pV[t]))}return n_e[t]||t}(n);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hV.forEach(o=>{o!=r&&i_e[o](n)&&(i+=o+".")}),i+=r,i}static eventCallback(n,i,r){return o=>{e.getEventFullKey(o)===n&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const u_e=v7(lme,"browser",[{provide:Ev,useValue:"browser"},{provide:c7,useValue:function s_e(){LN.makeCurrent(),jN.init()},multi:!0},{provide:Ui,useFactory:function l_e(){return function Pf(e){wd=e}(document),document},deps:[]}]),c_e=[{provide:CO,useValue:"root"},{provide:$m,useFactory:function a_e(){return new $m},deps:[]},{provide:iC,useClass:e_e,multi:!0,deps:[Ui,gi,Ev]},{provide:iC,useClass:r_e,multi:!0,deps:[Ui]},{provide:sC,useClass:sC,deps:[rC,Ov,wv]},{provide:c0,useExisting:sC},{provide:aV,useExisting:Ov},{provide:Ov,useClass:Ov,deps:[Ui]},{provide:pN,useClass:pN,deps:[gi]},{provide:rC,useClass:rC,deps:[iC,gi]},{provide:rV,useClass:W0e,deps:[]}];let HN=(()=>{class e{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:e,providers:[{provide:wv,useValue:n.appId},{provide:oV,useExisting:wv},G0e]}}}return e.\u0275fac=function(n){return new(n||e)(ze(e,12))},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:c_e,imports:[Va,gme]}),e})(),UN=(()=>{class e{constructor(n){this._doc=n,this._dom=uu()}addTag(n,i=!1){return n?this._getOrCreateElement(n,i):null}addTags(n,i=!1){return n?n.reduce((r,o)=>(o&&r.push(this._getOrCreateElement(o,i)),r),[]):[]}getTag(n){return n&&this._doc.querySelector(`meta[${n}]`)||null}getTags(n){if(!n)return[];const i=this._doc.querySelectorAll(`meta[${n}]`);return i?[].slice.call(i):[]}updateTag(n,i){if(!n)return null;i=i||this._parseSelector(n);const r=this.getTag(i);return r?this._setMetaElementAttributes(n,r):this._getOrCreateElement(n,!0)}removeTag(n){this.removeTagElement(this.getTag(n))}removeTagElement(n){n&&this._dom.remove(n)}_getOrCreateElement(n,i=!1){if(!i){const s=this._parseSelector(n),a=this.getTags(s).filter(l=>this._containsAttributes(n,l))[0];if(void 0!==a)return a}const r=this._dom.createElement("meta");return this._setMetaElementAttributes(n,r),this._doc.getElementsByTagName("head")[0].appendChild(r),r}_setMetaElementAttributes(n,i){return Object.keys(n).forEach(r=>i.setAttribute(this._getMetaKeyMap(r),n[r])),i}_parseSelector(n){const i=n.name?"name":"property";return`${i}="${n[i]}"`}_containsAttributes(n,i){return Object.keys(n).every(r=>i.getAttribute(this._getMetaKeyMap(r))===n[r])}_getMetaKeyMap(n){return f_e[n]||n}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui))},e.\u0275prov=lt({token:e,factory:function(n){let i=null;return i=n?new n:function d_e(){return new UN(ze(Ui))}(),i},providedIn:"root"}),e})();const f_e={httpEquiv:"http-equiv"};let zN=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui))},e.\u0275prov=lt({token:e,factory:function(n){let i=null;return i=n?new n:function h_e(){return new zN(ze(Ui))}(),i},providedIn:"root"}),e})();function Yt(...e){return wi(e,Xu(e))}"undefined"!=typeof window&&window;class ho extends jn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const{isArray:E_e}=Array,{getPrototypeOf:C_e,prototype:D_e,keys:S_e}=Object;function _V(e){if(1===e.length){const t=e[0];if(E_e(t))return{args:t,keys:null};if(function x_e(e){return e&&"object"==typeof e&&C_e(e)===D_e}(t)){const n=S_e(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}const{isArray:T_e}=Array;function WN(e){return ft(t=>function A_e(e,t){return T_e(t)?e(...t):e(t)}(e,t))}function yV(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function vV(e,t,n){e?zo(n,e,t):t()}const aC=we(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Nv(...e){return function N_e(){return Wl(1)}()(wi(e,Xu(e)))}function bV(e){return new xn(t=>{at(e()).subscribe(t)})}function wV(){return ri((e,t)=>{let n=null;e._refCount++;const i=new An(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}class M_e extends xn{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,li(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Vn;const n=this.getSubject();t.add(this.source.subscribe(new An(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Vn.EMPTY)}return t}refCount(){return wV()(this)}}function Ld(e,t){return ri((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(new An(i,l=>{null==r||r.unsubscribe();let u=0;const c=o++;at(e(l,c)).subscribe(r=new An(i,d=>i.next(t?t(l,d,c,u++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function k_e(e,t,n,i,r){return(o,s)=>{let a=n,l=t,u=0;o.subscribe(new An(s,c=>{const d=u++;l=a?e(l,c,d):(a=!0,c),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function EV(e,t){return ri(k_e(e,t,arguments.length>=2,!0))}function Xo(e,t){return ri((n,i)=>{let r=0;n.subscribe(new An(i,o=>e.call(t,o,r++)&&i.next(o)))})}function Wf(e){return ri((t,n)=>{let o,i=null,r=!1;i=t.subscribe(new An(n,void 0,void 0,s=>{o=at(e(s,Wf(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function y0(e,t){return $e(t)?ui(e,t,1):ui(e,1)}function YN(e){return e<=0?()=>ws:ri((t,n)=>{let i=[];t.subscribe(new An(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function CV(e=I_e){return ri((t,n)=>{let i=!1;t.subscribe(new An(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function I_e(){return new aC}function DV(e){return ri((t,n)=>{let i=!1;t.subscribe(new An(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function v0(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Xo((r,o)=>e(r,o,i)):Do,Vi(1),n?DV(t):CV(()=>new aC))}function Rs(e,t,n){const i=$e(e)||t||n?{next:e,error:t,complete:n}:e;return i?ri((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(new An(o,l=>{var u;null===(u=i.next)||void 0===u||u.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var u;a=!1,null===(u=i.error)||void 0===u||u.call(i,l),o.error(l)},()=>{var l,u;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(u=i.finalize)||void 0===u||u.call(i)}))}):Do}class jd{constructor(t,n){this.id=t,this.url=n}}class KN extends jd{constructor(t,n,i="imperative",r=null){super(t,n),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class b0 extends jd{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class SV extends jd{constructor(t,n,i){super(t,n),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class F_e extends jd{constructor(t,n,i){super(t,n),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class L_e extends jd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j_e extends jd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B_e extends jd{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $_e extends jd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V_e extends jd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xV{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TV{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class H_e{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class U_e{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z_e{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XN{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AV{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const bn="primary";class G_e{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function w0(e){return new G_e(e)}const OV="ngNavigationCancelingError";function JN(e){const t=Error("NavigationCancelingError: "+e);return t[OV]=!0,t}function q_e(e,t,n){const i=n.path.split("/");if(i.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function dc(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!NV(e[r],t[r]))return!1;return!0}function NV(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}return e===t}function MV(e){return Array.prototype.concat.apply([],e)}function kV(e){return e.length>0?e[e.length-1]:null}function ko(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function fc(e){return FO(e)?e:lv(e)?wi(Promise.resolve(e)):Yt(e)}const X_e={exact:function PV(e,t,n){if(!$p(e.segments,t.segments)||!uC(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!e.children[i]||!PV(e.children[i],t.children[i],n))return!1;return!0},subset:FV},IV={exact:function J_e(e,t){return dc(e,t)},subset:function Q_e(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>NV(e[n],t[n]))},ignored:()=>!0};function RV(e,t,n){return X_e[n.paths](e.root,t.root,n.matrixParams)&&IV[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function FV(e,t,n){return LV(e,t,t.segments,n)}function LV(e,t,n,i){if(e.segments.length>n.length){const r=e.segments.slice(0,n.length);return!(!$p(r,n)||t.hasChildren()||!uC(r,n,i))}if(e.segments.length===n.length){if(!$p(e.segments,n)||!uC(e.segments,n,i))return!1;for(const r in t.children)if(!e.children[r]||!FV(e.children[r],t.children[r],i))return!1;return!0}{const r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!($p(e.segments,r)&&uC(e.segments,r,i)&&e.children[bn])&&LV(e.children[bn],t,o,i)}}function uC(e,t,n){return t.every((i,r)=>IV[n](e[r].parameters,i.parameters))}class Bp{constructor(t,n,i){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=w0(this.queryParams)),this._queryParamMap}toString(){return tye.serialize(this)}}class Tn{constructor(t,n){this.segments=t,this.children=n,this.parent=null,ko(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cC(this)}}class Mv{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=w0(this.parameters)),this._parameterMap}toString(){return HV(this)}}function $p(e,t){return e.length===t.length&&e.every((n,i)=>n.path===t[i].path)}class jV{}class BV{parse(t){const n=new cye(t);return new Bp(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${kv(t.root,!0)}`,i=function rye(e){const t=Object.keys(e).map(n=>{const i=e[n];return Array.isArray(i)?i.map(r=>`${dC(n)}=${dC(r)}`).join("&"):`${dC(n)}=${dC(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${i}${"string"==typeof t.fragment?`#${function nye(e){return encodeURI(e)}(t.fragment)}`:""}`}}const tye=new BV;function cC(e){return e.segments.map(t=>HV(t)).join("/")}function kv(e,t){if(!e.hasChildren())return cC(e);if(t){const n=e.children[bn]?kv(e.children[bn],!1):"",i=[];return ko(e.children,(r,o)=>{o!==bn&&i.push(`${o}:${kv(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function eye(e,t){let n=[];return ko(e.children,(i,r)=>{r===bn&&(n=n.concat(t(i,r)))}),ko(e.children,(i,r)=>{r!==bn&&(n=n.concat(t(i,r)))}),n}(e,(i,r)=>r===bn?[kv(e.children[bn],!1)]:[`${r}:${kv(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[bn]?`${cC(e)}/${n[0]}`:`${cC(e)}/(${n.join("//")})`}}function $V(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dC(e){return $V(e).replace(/%3B/gi,";")}function QN(e){return $V(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fC(e){return decodeURIComponent(e)}function VV(e){return fC(e.replace(/\+/g,"%20"))}function HV(e){return`${QN(e.path)}${function iye(e){return Object.keys(e).map(t=>`;${QN(t)}=${QN(e[t])}`).join("")}(e.parameters)}`}const oye=/^[^\/()?;=#]+/;function hC(e){const t=e.match(oye);return t?t[0]:""}const sye=/^[^=?&#]+/,lye=/^[^&#]+/;class cye{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[bn]=new Tn(t,n)),i}parseSegment(){const t=hC(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Mv(fC(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=hC(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=hC(this.remaining);r&&(i=r,this.capture(i))}t[fC(n)]=fC(i)}parseQueryParam(t){const n=function aye(e){const t=e.match(sye);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const s=function uye(e){const t=e.match(lye);return t?t[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=VV(n),o=VV(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=hC(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let o;i.indexOf(":")>-1?(o=i.substr(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=bn);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[bn]:new Tn([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class UV{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=ZN(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=ZN(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=eM(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return eM(t,this._root).map(n=>n.value)}}function ZN(e,t){if(e===t.value)return t;for(const n of t.children){const i=ZN(e,n);if(i)return i}return null}function eM(e,t){if(e===t.value)return[t];for(const n of t.children){const i=eM(e,n);if(i.length)return i.unshift(t),i}return[]}class Bd{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function E0(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class zV extends UV{constructor(t,n){super(t),this.snapshot=n,tM(this,t)}toString(){return this.snapshot.toString()}}function GV(e,t){const n=function dye(e,t){const s=new pC([],{},{},"",{},bn,t,null,e.root,-1,{});return new qV("",new Bd(s,[]))}(e,t),i=new ho([new Mv("",{})]),r=new ho({}),o=new ho({}),s=new ho({}),a=new ho(""),l=new hc(i,r,s,a,o,bn,t,n.root);return l.snapshot=n.root,new zV(new Bd(l,[]),n)}class hc{constructor(t,n,i,r,o,s,a,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ft(t=>w0(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ft(t=>w0(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WV(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function fye(e){return e.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class pC{constructor(t,n,i,r,o,s,a,l,u,c,d){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=w0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=w0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qV extends UV{constructor(t,n){super(n),this.url=t,tM(this,n)}toString(){return YV(this._root)}}function tM(e,t){t.value._routerState=e,t.children.forEach(n=>tM(e,n))}function YV(e){const t=e.children.length>0?` { ${e.children.map(YV).join(", ")} } `:"";return`${e.value}${t}`}function nM(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,dc(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),dc(t.params,n.params)||e.params.next(n.params),function Y_e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!dc(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),dc(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function iM(e,t){const n=dc(e.params,t.params)&&function Z_e(e,t){return $p(e,t)&&e.every((n,i)=>dc(n.parameters,t[i].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||iM(e.parent,t.parent))}function Iv(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function pye(e,t,n){return t.children.map(i=>{for(const r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Iv(e,i,r);return Iv(e,i)})}(e,t,n);return new Bd(i,r)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Iv(e,a)),s}}const i=function gye(e){return new hc(new ho(e.url),new ho(e.params),new ho(e.queryParams),new ho(e.fragment),new ho(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(o=>Iv(e,o));return new Bd(i,r)}}function gC(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Rv(e){return"object"==typeof e&&null!=e&&e.outlets}function rM(e,t,n,i,r){let o={};return i&&ko(i,(s,a)=>{o[a]=Array.isArray(s)?s.map(l=>`${l}`):`${s}`}),new Bp(n.root===e?t:KV(n.root,e,t),o,r)}function KV(e,t,n){const i={};return ko(e.children,(r,o)=>{i[o]=r===t?n:KV(r,t,n)}),new Tn(e.segments,i)}class XV{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&gC(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Rv);if(r&&r!==kV(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oM{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function JV(e,t,n){if(e||(e=new Tn([],{})),0===e.segments.length&&e.hasChildren())return mC(e,t,n);const i=function wye(e,t,n){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;const s=e.segments[r],a=n[i];if(Rv(a))break;const l=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!ZV(l,u,s))return o;i+=2}else{if(!ZV(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const o=new Tn(e.segments.slice(0,i.pathIndex),{});return o.children[bn]=new Tn(e.segments.slice(i.pathIndex),e.children),mC(o,0,r)}return i.match&&0===r.length?new Tn(e.segments,{}):i.match&&!e.hasChildren()?sM(e,t,n):i.match?mC(e,0,r):sM(e,t,n)}function mC(e,t,n){if(0===n.length)return new Tn(e.segments,{});{const i=function bye(e){return Rv(e[0])?e[0].outlets:{[bn]:e}}(n),r={};return ko(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=JV(e.children[s],t,o))}),ko(e.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new Tn(e.segments,r)}}function sM(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const o=n[r];if(Rv(o)){const l=Eye(o.outlets);return new Tn(i,l)}if(0===r&&gC(n[0])){i.push(new Mv(e.segments[t].path,QV(n[0]))),r++;continue}const s=Rv(o)?o.outlets[bn]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&gC(a)?(i.push(new Mv(s,QV(a))),r+=2):(i.push(new Mv(s,{})),r++)}return new Tn(i,{})}function Eye(e){const t={};return ko(e,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=sM(new Tn([],{}),0,n))}),t}function QV(e){const t={};return ko(e,(n,i)=>t[i]=`${n}`),t}function ZV(e,t,n){return e==n.path&&dc(t,n.parameters)}class Dye{constructor(t,n,i,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),nM(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const r=E0(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),ko(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=E0(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=E0(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const r=E0(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new XN(o.value.snapshot))}),t.children.length&&this.forwardEvent(new U_e(t.value.snapshot))}activateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(nM(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),nM(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=function Sye(e){for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=l,s.outlet&&s.outlet.activateWith(r,l),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}}class aM{constructor(t,n){this.routes=t,this.module=n}}function qf(e){return"function"==typeof e}function Vp(e){return e instanceof Bp}const Pv=Symbol("INITIAL_VALUE");function Fv(){return Ld(e=>function qN(...e){const t=Xu(e),n=Yl(e),{args:i,keys:r}=_V(e);if(0===i.length)return wi([],t);const o=new xn(function O_e(e,t,n=Do){return i=>{vV(t,()=>{const{length:r}=e,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)vV(t,()=>{const u=wi(e[l],t);let c=!1;u.subscribe(new An(i,d=>{o[l]=d,c||(c=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,t,r?s=>yV(r,s):Do));return n?o.pipe(WN(n)):o}(e.map(t=>t.pipe(Vi(1),function lC(...e){const t=Xu(e);return ri((n,i)=>{(t?Nv(e,n,t):Nv(e,n)).subscribe(i)})}(Pv)))).pipe(EV((t,n)=>{let i=!1;return n.reduce((r,o,s)=>r!==Pv?r:(o===Pv&&(i=!0),i||!1!==o&&s!==n.length-1&&!Vp(o)?r:o),t)},Pv),Xo(t=>t!==Pv),ft(t=>Vp(t)?t:!0===t),Vi(1)))}class Mye{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lv,this.attachRef=null}}class Lv{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const i=this.getOrCreateContext(t);i.outlet=n,this.contexts.set(t,i)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Mye,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let lM=(()=>{class e{constructor(n,i,r,o,s){this.parentContexts=n,this.location=i,this.resolver=r,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new dn,this.deactivateEvents=new dn,this.attachEvents=new dn,this.detachEvents=new dn,this.name=o||bn,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const s=(i=i||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new kye(n,a,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(ee(Lv),ee(su),ee(Rp),function Ap(e){return function oue(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(N4(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===t)return n[r+1];r+=2}}}return null}(Xn(),e)}("name"),ee(lu))},e.\u0275dir=Pe({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class kye{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===hc?this.route:t===Lv?this.childContexts:this.parent.get(t,n)}}let eH=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=di({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,i){1&n&&Ve(0,"router-outlet")},directives:[lM],encapsulation:2}),e})();function tH(e,t=""){for(let n=0;n<e.length;n++){const i=e[n];Iye(i,Rye(t,i))}}function Iye(e,t){e.children&&tH(e.children,t)}function Rye(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function uM(e){const t=e.children&&e.children.map(uM),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==bn&&(n.component=eH),n}function _l(e){return e.outlet||bn}function nH(e,t){const n=e.filter(i=>_l(i)===t);return n.push(...e.filter(i=>_l(i)!==t)),n}const iH={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _C(e,t,n){var i;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},iH):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(t.matcher||q_e)(n,e,t);if(!o)return Object.assign({},iH);const s={};ko(o.posParams,(l,u)=>{s[u]=l.path});const a=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:a,positionalParamSegments:null!==(i=o.posParams)&&void 0!==i?i:{}}}function yC(e,t,n,i,r="corrected"){if(n.length>0&&function Lye(e,t,n){return n.some(i=>vC(e,t,i)&&_l(i)!==bn)}(e,n,i)){const s=new Tn(t,function Fye(e,t,n,i){const r={};r[bn]=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&_l(o)!==bn){const s=new Tn([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,r[_l(o)]=s}return r}(e,t,i,new Tn(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function jye(e,t,n){return n.some(i=>vC(e,t,i))}(e,n,i)){const s=new Tn(e.segments,function Pye(e,t,n,i,r,o){const s={};for(const a of i)if(vC(e,n,a)&&!r[_l(a)]){const l=new Tn([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[_l(a)]=l}return Object.assign(Object.assign({},r),s)}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new Tn(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function vC(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function rH(e,t,n,i){return!!(_l(e)===i||i!==bn&&vC(t,n,e))&&("**"===e.path||_C(t,e,n).matched)}function oH(e,t,n){return 0===t.length&&!e.children[n]}class jv{constructor(t){this.segmentGroup=t||null}}class sH{constructor(t){this.urlTree=t}}function bC(e){return new xn(t=>t.error(new jv(e)))}function aH(e){return new xn(t=>t.error(new sH(e)))}function Bye(e){return new xn(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Hye{constructor(t,n,i,r,o){this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(kd)}apply(){const t=yC(this.urlTree.root,[],[],this.config).segmentGroup,n=new Tn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,bn).pipe(ft(o=>this.createUrlTree(cM(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wf(o=>{if(o instanceof sH)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof jv?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,bn).pipe(ft(r=>this.createUrlTree(cM(r),t.queryParams,t.fragment))).pipe(Wf(r=>{throw r instanceof jv?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,i){const r=t.segments.length>0?new Tn([],{[bn]:t}):t;return new Bp(r,n,i)}expandSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe(ft(o=>new Tn([],o))):this.expandSegment(t,i,n,i.segments,r,!0)}expandChildren(t,n,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return wi(r).pipe(y0(o=>{const s=i.children[o],a=nH(n,o);return this.expandSegmentGroup(t,a,s,o).pipe(ft(l=>({segment:l,outlet:o})))}),EV((o,s)=>(o[s.outlet]=s.segment,o),{}),function R_e(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Xo((r,o)=>e(r,o,i)):Do,YN(1),n?DV(t):CV(()=>new aC))}())}expandSegment(t,n,i,r,o,s){return wi(i).pipe(y0(a=>this.expandSegmentAgainstRoute(t,n,i,a,r,o,s).pipe(Wf(u=>{if(u instanceof jv)return Yt(null);throw u}))),v0(a=>!!a),Wf((a,l)=>{if(a instanceof aC||"EmptyError"===a.name){if(oH(n,r,o))return Yt(new Tn([],{}));throw new jv(n)}throw a}))}expandSegmentAgainstRoute(t,n,i,r,o,s,a){return rH(r,n,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,n,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s):bC(n):bC(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?aH(o):this.lineralizeSegments(i,o).pipe(ui(s=>{const a=new Tn(s,{});return this.expandSegment(t,a,n,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){const{matched:a,consumedSegments:l,lastChild:u,positionalParamSegments:c}=_C(n,r,o);if(!a)return bC(n);const d=this.applyRedirectCommands(l,r.redirectTo,c);return r.redirectTo.startsWith("/")?aH(d):this.lineralizeSegments(r,d).pipe(ui(f=>this.expandSegment(t,n,i,f.concat(o.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Yt(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe(ft(f=>(i._loadedConfig=f,new Tn(r,{})))):Yt(new Tn(r,{}));const{matched:s,consumedSegments:a,lastChild:l}=_C(n,i,r);if(!s)return bC(n);const u=r.slice(l);return this.getChildConfig(t,i,r).pipe(ui(d=>{const f=d.module,h=d.routes,{segmentGroup:p,slicedSegments:m}=yC(n,a,u,h),_=new Tn(p.segments,p.children);if(0===m.length&&_.hasChildren())return this.expandChildren(f,h,_).pipe(ft(A=>new Tn(a,A)));if(0===h.length&&0===m.length)return Yt(new Tn(a,{}));const b=_l(i)===o;return this.expandSegment(f,_,h,m,b?bn:o,!0).pipe(ft(D=>new Tn(a.concat(D.segments),D.children)))}))}getChildConfig(t,n,i){return n.children?Yt(new aM(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?Yt(n._loadedConfig):this.runCanLoadGuards(t.injector,n,i).pipe(ui(r=>r?this.configLoader.load(t.injector,n).pipe(ft(o=>(n._loadedConfig=o,o))):function $ye(e){return new xn(t=>t.error(JN(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(n))):Yt(new aM([],t))}runCanLoadGuards(t,n,i){const r=n.canLoad;return r&&0!==r.length?Yt(r.map(s=>{const a=t.get(s);let l;if(function Tye(e){return e&&qf(e.canLoad)}(a))l=a.canLoad(n,i);else{if(!qf(a))throw new Error("Invalid CanLoad guard");l=a(n,i)}return fc(l)})).pipe(Fv(),Rs(s=>{if(!Vp(s))return;const a=JN(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),ft(s=>!0===s)):Yt(!0)}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Yt(i);if(r.numberOfChildren>1||!r.children[bn])return Bye(t.redirectTo);r=r.children[bn]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreatreUrlTree(t,n,i,r){const o=this.createSegmentGroup(t,n.root,i,r);return new Bp(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return ko(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=n[a]}else i[o]=r}),i}createSegmentGroup(t,n,i,r){const o=this.createSegments(t,n.segments,i,r);let s={};return ko(n.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,i,r)}),new Tn(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){const r=i[n.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return r}findOrReturn(t,n){let i=0;for(const r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}}function cM(e){const t={};for(const i of Object.keys(e.children)){const o=cM(e.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function Uye(e){if(1===e.numberOfChildren&&e.children[bn]){const t=e.children[bn];return new Tn(e.segments.concat(t.segments),t.children)}return e}(new Tn(e.segments,t))}class lH{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wC{constructor(t,n){this.component=t,this.route=n}}function Gye(e,t,n){const i=e._root;return Bv(i,t?t._root:null,n,[i.value])}function EC(e,t,n){const i=function qye(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function Bv(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=E0(t);return e.children.forEach(s=>{(function Yye(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function Kye(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!$p(e.url,t.url);case"pathParamsOrQueryParamsChange":return!$p(e.url,t.url)||!dc(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iM(e,t)||!dc(e.queryParams,t.queryParams);default:return!iM(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new lH(i)):(o.data=s.data,o._resolvedData=s._resolvedData),Bv(e,t,o.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new wC(a.outlet.component,s))}else s&&$v(t,a,r),r.canActivateChecks.push(new lH(i)),Bv(e,null,o.component?a?a.children:null:n,i,r)})(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),ko(o,(s,a)=>$v(s,n.getContext(a),r)),r}function $v(e,t,n){const i=E0(e),r=e.value;ko(i,(o,s)=>{$v(o,r.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new wC(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class rve{}function uH(e){return new xn(t=>t.error(e))}class sve{constructor(t,n,i,r,o,s){this.rootComponentType=t,this.config=n,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const t=yC(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,bn);if(null===n)return null;const i=new pC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},bn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Bd(i,n),o=new qV(this.url,r);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const n=t.value,i=WV(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,n,i){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,i)}processChildren(t,n){const i=[];for(const o of Object.keys(n.children)){const s=n.children[o],a=nH(t,o),l=this.processSegmentGroup(a,s,o);if(null===l)return null;i.push(...l)}const r=cH(i);return function ave(e){e.sort((t,n)=>t.value.outlet===bn?-1:n.value.outlet===bn?1:t.value.outlet.localeCompare(n.value.outlet))}(r),r}processSegment(t,n,i,r){for(const o of t){const s=this.processSegmentAgainstRoute(o,n,i,r);if(null!==s)return s}return oH(n,i,r)?[]:null}processSegmentAgainstRoute(t,n,i,r){if(t.redirectTo||!rH(t,n,i,r))return null;let o,s=[],a=[];if("**"===t.path){const h=i.length>0?kV(i).parameters:{};o=new pC(i,h,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hH(t),_l(t),t.component,t,dH(n),fH(n)+i.length,pH(t))}else{const h=_C(n,t,i);if(!h.matched)return null;s=h.consumedSegments,a=i.slice(h.lastChild),o=new pC(s,h.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hH(t),_l(t),t.component,t,dH(n),fH(n)+s.length,pH(t))}const l=function lve(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=yC(n,s,a,l.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const h=this.processChildren(l,u);return null===h?null:[new Bd(o,h)]}if(0===l.length&&0===c.length)return[new Bd(o,[])];const d=_l(t)===r,f=this.processSegment(l,u,c,d?bn:r);return null===f?null:[new Bd(o,f)]}}function uve(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function cH(e){const t=[],n=new Set;for(const i of e){if(!uve(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):t.push(i)}for(const i of n){const r=cH(i.children);t.push(new Bd(i.value,r))}return t.filter(i=>!n.has(i))}function dH(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function fH(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function hH(e){return e.data||{}}function pH(e){return e.resolve||{}}function gH(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function dM(e){return Ld(t=>{const n=e(t);return n?wi(n).pipe(ft(()=>t)):Yt(t)})}class _ve extends class mve{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const fM=new nn("ROUTES");class mH{constructor(t,n,i,r){this.injector=t,this.compiler=n,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const r=this.loadModuleFactory(n.loadChildren).pipe(ft(o=>{this.onLoadEndListener&&this.onLoadEndListener(n);const s=o.create(t);return new aM(MV(s.injector.get(fM,void 0,Y.Self|Y.Optional)).map(uM),s)}),Wf(o=>{throw n._loader$=void 0,o}));return n._loader$=new M_e(r,()=>new jn).pipe(wV()),n._loader$}loadModuleFactory(t){return fc(t()).pipe(ui(n=>n instanceof N9?Yt(n):wi(this.compiler.compileModuleAsync(n))))}}class vve{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function bve(e){throw e}function wve(e,t,n){return t.parse("/")}function _H(e,t){return Yt(null)}const Eve={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Cve={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jo=(()=>{class e{constructor(n,i,r,o,s,a,l){this.rootComponentType=n,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new jn,this.errorHandler=bve,this.malformedUriErrorHandler=wve,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_H,afterPreactivation:_H},this.urlHandlingStrategy=new vve,this.routeReuseStrategy=new _ve,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(kd),this.console=s.get(f7);const d=s.get(gi);this.isNgZoneEnabled=d instanceof gi&&gi.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function K_e(){return new Bp(new Tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mH(s,a,f=>this.triggerEvent(new xV(f)),f=>this.triggerEvent(new TV(f))),this.routerState=GV(this.currentUrlTree,this.rootComponentType),this.transitions=new ho({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const i=this.events;return n.pipe(Xo(r=>0!==r.id),ft(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ld(r=>{let o=!1,s=!1;return Yt(r).pipe(Rs(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ld(a=>{const l=this.browserUrlTree.toString(),u=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return CC(a.source)&&(this.browserUrlTree=a.extractedUrl),Yt(a).pipe(Ld(d=>{const f=this.transitions.getValue();return i.next(new KN(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions.getValue()?ws:Promise.resolve(d)}),function zye(e,t,n,i){return Ld(r=>function Vye(e,t,n,i,r){return new Hye(e,t,n,i,r).apply()}(e,t,n,r.extractedUrl,i).pipe(ft(o=>Object.assign(Object.assign({},r),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Rs(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function cve(e,t,n,i,r){return ui(o=>function ove(e,t,n,i,r="emptyOnly",o="legacy"){try{const s=new sve(e,t,n,i,r,o).recognize();return null===s?uH(new rve):Yt(s)}catch(s){return uH(s)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),i,r).pipe(ft(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Rs(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(h,d)}this.browserUrlTree=d.urlAfterRedirects}const f=new L_e(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(f)}));if(u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:f,extractedUrl:h,source:p,restoredState:m,extras:_}=a,b=new KN(f,this.serializeUrl(h),p,m);i.next(b);const v=GV(h,this.rootComponentType).snapshot;return Yt(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:h,extras:Object.assign(Object.assign({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),ws}),dM(a=>{const{targetSnapshot:l,id:u,extractedUrl:c,rawUrl:d,extras:{skipLocationChange:f,replaceUrl:h}}=a;return this.hooks.beforePreactivation(l,{navigationId:u,appliedUrlTree:c,rawUrlTree:d,skipLocationChange:!!f,replaceUrl:!!h})}),Rs(a=>{const l=new j_e(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),ft(a=>Object.assign(Object.assign({},a),{guards:Gye(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function Xye(e,t){return ui(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Yt(Object.assign(Object.assign({},n),{guardsResult:!0})):function Jye(e,t,n,i){return wi(e).pipe(ui(r=>function ive(e,t,n,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Yt(o.map(a=>{const l=EC(a,t,r);let u;if(function Nye(e){return e&&qf(e.canDeactivate)}(l))u=fc(l.canDeactivate(e,t,n,i));else{if(!qf(l))throw new Error("Invalid CanDeactivate guard");u=fc(l(e,t,n,i))}return u.pipe(v0())})).pipe(Fv()):Yt(!0)}(r.component,r.route,n,t,i)),v0(r=>!0!==r,!0))}(s,i,r,e).pipe(ui(a=>a&&function xye(e){return"boolean"==typeof e}(a)?function Qye(e,t,n,i){return wi(t).pipe(y0(r=>Nv(function eve(e,t){return null!==e&&t&&t(new H_e(e)),Yt(!0)}(r.route.parent,i),function Zye(e,t){return null!==e&&t&&t(new z_e(e)),Yt(!0)}(r.route,i),function nve(e,t,n){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function Wye(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>bV(()=>Yt(s.guards.map(l=>{const u=EC(l,s.node,n);let c;if(function Oye(e){return e&&qf(e.canActivateChild)}(u))c=fc(u.canActivateChild(i,e));else{if(!qf(u))throw new Error("Invalid CanActivateChild guard");c=fc(u(i,e))}return c.pipe(v0())})).pipe(Fv())));return Yt(o).pipe(Fv())}(e,r.path,n),function tve(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Yt(!0);const r=i.map(o=>bV(()=>{const s=EC(o,t,n);let a;if(function Aye(e){return e&&qf(e.canActivate)}(s))a=fc(s.canActivate(t,e));else{if(!qf(s))throw new Error("Invalid CanActivate guard");a=fc(s(t,e))}return a.pipe(v0())}));return Yt(r).pipe(Fv())}(e,r.route,n))),v0(r=>!0!==r,!0))}(i,o,e,t):Yt(a)),ft(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Rs(a=>{if(Vp(a.guardsResult)){const u=JN(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw u.url=a.guardsResult,u}const l=new B_e(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Xo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),dM(a=>{if(a.guards.canActivateChecks.length)return Yt(a).pipe(Rs(l=>{const u=new $_e(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),Ld(l=>{let u=!1;return Yt(l).pipe(function dve(e,t){return ui(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return Yt(n);let o=0;return wi(r).pipe(y0(s=>function fve(e,t,n,i){return function hve(e,t,n,i){const r=gH(e);if(0===r.length)return Yt({});const o={};return wi(r).pipe(ui(s=>function pve(e,t,n,i){const r=EC(e,t,i);return fc(r.resolve?r.resolve(t,n):r(t,n))}(e[s],t,n,i).pipe(Rs(a=>{o[s]=a}))),YN(1),ui(()=>gH(o).length===r.length?Yt(o):ws))}(e._resolve,e,t,i).pipe(ft(o=>(e._resolvedData=o,e.data=Object.assign(Object.assign({},e.data),WV(e,n).resolve),null)))}(s.route,i,e,t)),Rs(()=>o++),YN(1),ui(s=>o===r.length?Yt(n):ws))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Rs({next:()=>u=!0,complete:()=>{u||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Rs(l=>{const u=new V_e(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}))}),dM(a=>{const{targetSnapshot:l,id:u,extractedUrl:c,rawUrl:d,extras:{skipLocationChange:f,replaceUrl:h}}=a;return this.hooks.afterPreactivation(l,{navigationId:u,appliedUrlTree:c,rawUrlTree:d,skipLocationChange:!!f,replaceUrl:!!h})}),ft(a=>{const l=function hye(e,t,n){const i=Iv(e,t._root,n?n._root:void 0);return new zV(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Rs(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>ft(i=>(new Dye(t,i.targetRouterState,i.currentRouterState,n).activate(e),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Rs({next(){o=!0},complete(){o=!0}}),function P_e(e){return ri((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}(()=>{var a;o||s||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),Wf(a=>{if(s=!0,function W_e(e){return e&&e[OV]}(a)){const l=Vp(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const u=new SV(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(u),l?setTimeout(()=>{const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||CC(r.source)};this.scheduleNavigation(c,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new F_e(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(u){r.reject(u)}}return ws}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const o={replaceUrl:!0},s=(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null;if(s){const l=Object.assign({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(n.url);this.scheduleNavigation(a,i,s,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){tH(n),this.config=n.map(uM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=r||this.routerState.root,c=l?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),function mye(e,t,n,i,r){if(0===n.length)return rM(t.root,t.root,t,i,r);const o=function _ye(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new XV(!0,0,e);let t=0,n=!1;const i=e.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return ko(o.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new XV(n,t,i)}(n);if(o.toRoot())return rM(t.root,new Tn([],{}),t,i,r);const s=function yye(e,t,n){if(e.isAbsolute)return new oM(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const o=n.snapshot._urlSegment;return new oM(o,o===t.root,0)}const i=gC(e.commands[0])?0:1;return function vye(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new oM(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(o,t,e),a=s.processChildren?mC(s.segmentGroup,s.index,o.commands):JV(s.segmentGroup,s.index,o.commands);return rM(s.segmentGroup,a,t,i,r)}(u,this.currentUrlTree,n,d,null!=c?c:null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=Vp(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function Dve(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?Object.assign({},Eve):!1===i?Object.assign({},Cve):i,Vp(n))return RV(this.currentUrlTree,n,r);const o=this.parseUrl(n);return RV(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const o=n[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new b0(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,i,r,o,s){var a,l,u;if(this.disposed)return Promise.resolve(!1);const c=this.transitions.value,d=CC(i)&&c&&!CC(c.source),f=c.rawUrl.toString()===n.toString(),h=c.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(d&&f&&h)return Promise.resolve(!0);let m,_,b;s?(m=s.resolve,_=s.reject,b=s.promise):b=new Promise((A,I)=>{m=A,_=I});const v=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),D=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(u=this.browserPageId)&&void 0!==u?u:0)+1):D=0,this.setTransition({id:v,targetPageId:D,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:m,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(A=>Promise.reject(A))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n),o=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(n,i=!1){var r,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,i){const r=new SV(n.id,this.serializeUrl(n.extractedUrl),i);this.triggerEvent(r),n.resolve(!1)}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return e.\u0275fac=function(n){RO()},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function CC(e){return"imperative"!==e}let DC=(()=>{class e{constructor(n,i,r){this.router=n,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new jn,this.subscription=n.events.subscribe(o=>{o instanceof b0&&this.updateTargetUrlAndHref()})}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:null}ngOnChanges(n){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(n,i,r,o,s){if(0!==n||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:C0(this.skipLocationChange),replaceUrl:C0(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:C0(this.preserveFragment)})}}return e.\u0275fac=function(n){return new(n||e)(ee(Jo),ee(hc),ee(jp))},e.\u0275dir=Pe({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,i){1&n&&gn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&pi("target",i.target)("href",i.href,ua)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[fo]}),e})();function C0(e){return""===e||!!e}class yH{}class vH{preload(t,n){return Yt(null)}}let bH=(()=>{class e{constructor(n,i,r,o){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=new mH(r,i,l=>n.triggerEvent(new xV(l)),l=>n.triggerEvent(new TV(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xo(n=>n instanceof b0),y0(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(kd);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const o of i)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(n,o)):o.children&&r.push(this.processRoutes(n,o.children));return wi(r).pipe(Wl(),ft(o=>{}))}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Yt(i._loadedConfig):this.loader.load(n.injector,i)).pipe(ui(o=>(i._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return e.\u0275fac=function(n){return new(n||e)(ze(Jo),ze(UE),ze(Pr),ze(yH))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),pM=(()=>{class e{constructor(n,i,r={}){this.router=n,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof KN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof b0&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof AV&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.router.triggerEvent(new AV(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){RO()},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const Hp=new nn("ROUTER_CONFIGURATION"),wH=new nn("ROUTER_FORROOT_GUARD"),Ave=[DN,{provide:jV,useClass:BV},{provide:Jo,useFactory:function Ive(e,t,n,i,r,o,s={},a,l){const u=new Jo(null,e,t,n,i,r,MV(o));return a&&(u.urlHandlingStrategy=a),l&&(u.routeReuseStrategy=l),function Rve(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,u),s.enableTracing&&u.events.subscribe(c=>{var d,f;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${c.constructor.name}`),console.log(c.toString()),console.log(c),null===(f=console.groupEnd)||void 0===f||f.call(console)}),u},deps:[jV,Lv,DN,Pr,UE,fM,Hp,[class yve{},new ic],[class gve{},new ic]]},Lv,{provide:hc,useFactory:function Pve(e){return e.routerState.root},deps:[Jo]},bH,vH,class Tve{preload(t,n){return n().pipe(Wf(()=>Yt(null)))}},{provide:Hp,useValue:{enableTracing:!1}}];function Ove(){return new y7("Router",Jo)}let gM=(()=>{class e{constructor(n,i){}static forRoot(n,i){return{ngModule:e,providers:[Ave,EH(n),{provide:wH,useFactory:kve,deps:[[Jo,new ic,new Lm]]},{provide:Hp,useValue:i||{}},{provide:jp,useFactory:Mve,deps:[Lp,[new Ky(EN),new ic],Hp]},{provide:pM,useFactory:Nve,deps:[Jo,Tv,Hp]},{provide:yH,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:vH},{provide:y7,multi:!0,useFactory:Ove},[mM,{provide:HE,multi:!0,useFactory:Fve,deps:[mM]},{provide:CH,useFactory:Lve,deps:[mM]},{provide:d7,multi:!0,useExisting:CH}]]}}static forChild(n){return{ngModule:e,providers:[EH(n)]}}}return e.\u0275fac=function(n){return new(n||e)(ze(wH,8),ze(Jo,8))},e.\u0275mod=cn({type:e}),e.\u0275inj=un({}),e})();function Nve(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new pM(e,t,n)}function Mve(e,t,n={}){return n.useHash?new Cme(e,t):new CN(e,t)}function kve(e){return"guarded"}function EH(e){return[{provide:cue,multi:!0,useValue:e},{provide:fM,multi:!0,useValue:e}]}let mM=(()=>{class e{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new jn}appInitializer(){return this.injector.get(bme,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),o=this.injector.get(Jo),s=this.injector.get(Hp);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),i(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?Yt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),o.initialNavigation()):i(!0),r})}bootstrapListener(n){const i=this.injector.get(Hp),r=this.injector.get(bH),o=this.injector.get(pM),s=this.injector.get(Jo),a=this.injector.get(m0);n===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&s.initialNavigation(),r.setUpPreloading(),o.init(),s.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(n){return new(n||e)(ze(Pr))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function Fve(e){return e.appInitializer.bind(e)}function Lve(e){return e.bootstrapListener.bind(e)}const CH=new nn("Router Initializer");class DH{}const $d="*";function Vv(e,t){return{type:7,name:e,definitions:t,options:{}}}function Hv(e,t=null){return{type:4,styles:t,timings:e}}function SH(e,t=null){return{type:2,steps:e,options:t}}function yl(e){return{type:6,styles:e,offset:null}}function Uv(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function xH(e){Promise.resolve(null).then(e)}class zv{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xH(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class TH{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,r=0;const o=this.players.length;0==o?xH(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}const $ve=JSON.parse('{"U":["assets/logos/abercrombieandfitch.jpg","assets/logos/adidas.png","assets/logos/Aditya.jpg","assets/logos/arvind.png","assets/logos/asics.png","assets/logos/asos.png","assets/logos/boohoo.jpg","assets/logos/buckle.svg","assets/logos/burberry.jpg","assets/logos/burlington.png","assets/logos/canada-goose.png","assets/logos/capri_holdings.png","assets/logos/esprit.png","assets/logos/fast-retail.png","assets/logos/footlocker.jpg","assets/logos/gap.png","assets/logos/havaianas.png","assets/logos/nike.png","assets/logos/vf.svg","assets/logos/zalando.png"]}'),Vve=JSON.parse('[{"id":0,"name":"All Companies"},{"id":5590,"name":"H&M","url":"https://wikirate.org/H_M","headquarters":"Sweden"},{"id":5505,"name":"Gap inc.","url":"https://wikirate.org/Gap_inc","headquarters":"California (United States)"},{"id":5301,"name":"Inditex","url":"https://wikirate.org/Inditex","headquarters":"Spain"},{"id":9269,"name":"Marks and Spencer Group plc","url":"https://wikirate.org/Marks_and_Spencer_Group_plc","headquarters":"United Kingdom"},{"id":7217,"name":"Adidas AG","url":"https://wikirate.org/Adidas_AG","headquarters":"Germany"},{"id":1829050,"name":"Asos","url":"https://wikirate.org/Asos","headquarters":"United Kingdom"},{"id":9139,"name":"Burberry Group plc","url":"https://wikirate.org/Burberry_Group_plc","headquarters":"United Kingdom"},{"id":8979,"name":"Louis Vuitton Malletier SA (LVMH)","url":"https://wikirate.org/Louis_Vuitton_Malletier_SA_LVMH","headquarters":"France"},{"id":5800,"name":"Nike Inc.","url":"https://wikirate.org/Nike_Inc","headquarters":"Oregon (United States)"},{"id":49386,"name":"Tapestry Inc","url":"https://wikirate.org/Tapestry_Inc","headquarters":"New York (United States)"},{"id":18109,"name":"Puma","url":"https://wikirate.org/Puma","headquarters":"Germany"},{"id":776737,"name":"Tiffany & Co.","url":"https://wikirate.org/Tiffany_Co","headquarters":"New York (United States)"},{"id":56584,"name":"Fast Retailing","url":"https://wikirate.org/Fast_Retailing","headquarters":"Japan"},{"id":61104,"name":"VF","url":"https://wikirate.org/VF","headquarters":"North Carolina (United States)"},{"id":61050,"name":"PVH","url":"https://wikirate.org/PVH","headquarters":"New York (United States)"},{"id":2608717,"name":"Zalando SE","url":"https://wikirate.org/Zalando_SE","headquarters":"Germany"},{"id":866194,"name":"Guess? Inc","url":"https://wikirate.org/Guess_Inc","headquarters":"California (United States)"},{"id":116498,"name":"Under Armour","url":"https://wikirate.org/Under_Armour","headquarters":"Maryland (United States)"},{"id":8362,"name":"Kering","url":"https://wikirate.org/Kering","headquarters":"France"},{"id":61065,"name":"Prada","url":"https://wikirate.org/Prada","headquarters":"Italy"},{"id":56597,"name":"L Brands","url":"https://wikirate.org/L_Brands","headquarters":"Ohio (United States)"},{"id":42714,"name":"Hugo Boss AG","url":"https://wikirate.org/Hugo_Boss_AG","headquarters":"Germany"},{"id":56618,"name":"Nordstrom","url":"https://wikirate.org/Nordstrom","headquarters":"Washington (United States)"},{"id":861862,"name":"Columbia Sportswear","url":"https://wikirate.org/Columbia_Sportswear","headquarters":"Oregon (United States)"},{"id":859389,"name":"Urban Outfitters","url":"https://wikirate.org/Urban_Outfitters","headquarters":"Pennsylvania (United States)"},{"id":2265395,"name":"Ralph Lauren Corporation","url":"https://wikirate.org/Ralph_Lauren_Corporation","headquarters":"New York (United States)"},{"id":858415,"name":"Fossil Group, Inc.","url":"https://wikirate.org/Fossil_Group_Inc","headquarters":"Texas (United States)"},{"id":866417,"name":"Skechers USA Inc","url":"https://wikirate.org/Skechers_USA_Inc","headquarters":"California (United States)"},{"id":862441,"name":"American Eagle Outfitters","url":"https://wikirate.org/American_Eagle_Outfitters","headquarters":"Pennsylvania (United States)"},{"id":60982,"name":"Hanesbrands","url":"https://wikirate.org/Hanesbrands","headquarters":"North Carolina (United States)"},{"id":945115,"name":"Lojas Renner S.A.","url":"https://wikirate.org/Lojas_Renner_S_A","headquarters":"Brazil"},{"id":58500,"name":"Foot Locker Inc.","url":"https://wikirate.org/Foot_Locker_Inc","headquarters":"New York (United States)"},{"id":957395,"name":"TJX","url":"https://wikirate.org/TJX","headquarters":"Massachusetts (United States)"},{"id":776749,"name":"G-III Apparel Group, LTD.","url":"https://wikirate.org/G_III_Apparel_Group_LTD","headquarters":"New York (United States)"},{"id":866117,"name":"Deckers Outdoor Corporation","url":"https://wikirate.org/Deckers_Outdoor_Corporation","headquarters":"California (United States)"},{"id":57653,"name":"Ross Stores","url":"https://wikirate.org/Ross_Stores","headquarters":"California (United States)"},{"id":861719,"name":"Wolverine World Wide","url":"https://wikirate.org/Wolverine_World_Wide","headquarters":"Michigan (United States)"},{"id":865187,"name":"Caleres Inc","url":"https://wikirate.org/Caleres_Inc","headquarters":"Missouri (United States)"},{"id":49209,"name":"Next","url":"https://wikirate.org/Next","headquarters":"United Kingdom"},{"id":866341,"name":"Oxford Industries Inc","url":"https://wikirate.org/Oxford_Industries_Inc","headquarters":"Georgia (United States)"},{"id":2274181,"name":"Genesco Inc.","url":"https://wikirate.org/Genesco_Inc","headquarters":"Tennessee (United States)"},{"id":2632311,"name":"Chico\'s FAS Inc","url":"https://wikirate.org/Chico_s_FAS_Inc","headquarters":"Florida (United States)"},{"id":61176,"name":"Macy\'s","url":"https://wikirate.org/Macy_s","headquarters":"Ohio (United States)"},{"id":792992,"name":"Moncler","url":"https://wikirate.org/Moncler","headquarters":"Italy"},{"id":2241782,"name":"DSW Inc.","url":"https://wikirate.org/DSW_Inc","headquarters":"Ohio (United States)"},{"id":60914,"name":"Abercrombie & Fitch","url":"https://wikirate.org/Abercrombie_Fitch","headquarters":"New York (United States)"},{"id":57485,"name":"Luxottica Group SpA","url":"https://wikirate.org/Luxottica_Group_SpA","headquarters":"Italy"},{"id":2632233,"name":"Ascena Retail Group Inc","url":"https://wikirate.org/Ascena_Retail_Group_Inc","headquarters":"New Jersey (United States)"},{"id":776665,"name":"Dillard\'s, Inc.","url":"https://wikirate.org/Dillard_s_Inc","headquarters":"Arkansas (United States)"},{"id":50638,"name":"Dick\'s Sporting Goods","url":"https://wikirate.org/Dick_s_Sporting_Goods","headquarters":"Pennsylvania (United States)"},{"id":2605005,"name":"Carter\'s Inc","url":"https://wikirate.org/Carter_s_Inc","headquarters":"Georgia (United States)"},{"id":2632164,"name":"Express Inc","url":"https://wikirate.org/Express_Inc","headquarters":"Ohio (United States)"},{"id":2979682,"name":"Vera Bradley Inc.","url":"https://wikirate.org/Vera_Bradley_Inc","headquarters":"Indiana (United States)"},{"id":170564,"name":"Asics Corporation","url":"https://wikirate.org/Asics_Corporation","headquarters":"Japan"},{"id":116138,"name":"Gildan Activewear Inc.","url":"https://wikirate.org/Gildan_Activewear_Inc","headquarters":"Canada"},{"id":2632287,"name":"Burlington Stores Inc","url":"https://wikirate.org/Burlington_Stores_Inc","headquarters":"New Jersey (United States)"},{"id":2980808,"name":"Buckle Inc","url":"https://wikirate.org/Buckle_Inc","headquarters":"Nebraska (United States)"},{"id":1825510,"name":"lululemon athletica","url":"https://wikirate.org/lululemon_athletica","headquarters":"Quebec (Canada)"},{"id":2632400,"name":"Francesca\'s","url":"https://wikirate.org/Francesca_s","headquarters":"Texas (United States)"},{"id":9127,"name":"Esprit Holdings Limited","url":"https://wikirate.org/Esprit_Holdings_Limited","headquarters":"Hong Kong"},{"id":3052157,"name":"Cato Corp","url":"https://wikirate.org/Cato_Corp","headquarters":"North Carolina (United States)"},{"id":48305,"name":"Christian Dior","url":"https://wikirate.org/Christian_Dior","headquarters":"France"},{"id":2931751,"name":"Arvind Limited","url":"https://wikirate.org/Arvind_Limited","headquarters":"India"},{"id":3081310,"name":"Mulberry Group Plc","url":"https://wikirate.org/Mulberry_Group_Plc","headquarters":"United Kingdom"},{"id":3151635,"name":"Ted Baker","url":"https://wikirate.org/Ted_Baker","headquarters":"United Kingdom"},{"id":3152073,"name":"Capri Holdings Ltd (formerly Michael Kors)","url":"https://wikirate.org/Capri_Holdings_Ltd_formerly_Michael_Kors","headquarters":"United Kingdom"},{"id":48284,"name":"Hermes International","url":"https://wikirate.org/Hermes_International","headquarters":"France"},{"id":2608722,"name":"Salvatore Ferragamo SpA","url":"https://wikirate.org/Salvatore_Ferragamo_SpA","headquarters":"Italy"},{"id":56413,"name":"Richemont","url":"https://wikirate.org/Richemont","headquarters":"Switzerland"},{"id":3075761,"name":"Boot Barn Holdings Inc.","url":"https://wikirate.org/Boot_Barn_Holdings_Inc","headquarters":"California (United States)"},{"id":2624117,"name":"Geox SpA","url":"https://wikirate.org/Geox_SpA","headquarters":"Italy"},{"id":3098198,"name":"Hudson\'s Bay Company","url":"https://wikirate.org/Hudson_s_Bay_Company","headquarters":"Ontario, Canada"},{"id":57272,"name":"Swatch Group","url":"https://wikirate.org/Swatch_Group","headquarters":"Switzerland"},{"id":3624592,"name":"JD Sports Fashion plc","url":"https://wikirate.org/JD_Sports_Fashion_plc","headquarters":"United Kingdom"},{"id":44618,"name":"Sports Direct","url":"https://wikirate.org/Sports_Direct","headquarters":"United Kingdom"},{"id":3624482,"name":"Superdry plc","url":"https://wikirate.org/Superdry_plc","headquarters":"United Kingdom"},{"id":2632436,"name":"Children\'s Place Inc","url":"https://wikirate.org/Children_s_Place_Inc","headquarters":"New Jersey (United States)"},{"id":2623713,"name":"YOOX NET-A-PORTER Group SpA","url":"https://wikirate.org/YOOX_NET_A_PORTER_Group_SpA","headquarters":"Italy"},{"id":3624475,"name":"Brunello Cucinelli","url":"https://wikirate.org/Brunello_Cucinelli","headquarters":"Italy"},{"id":1173485,"name":"Li-Ning","url":"https://wikirate.org/Li_Ning","headquarters":"Beijing (China)"},{"id":3624461,"name":"TOD\'S","url":"https://wikirate.org/TOD_S","headquarters":"Italy"},{"id":3624440,"name":"Boohoo.com","url":"https://wikirate.org/Boohoo_com","headquarters":"United Kingdom"},{"id":3624468,"name":"Alpargatas - Havaianas","url":"https://wikirate.org/Alpargatas_Havaianas","headquarters":"Brazil"},{"id":3624718,"name":"Gerry Weber","url":"https://wikirate.org/Gerry_Weber","headquarters":"Germany"},{"id":3624454,"name":"Grendene","url":"https://wikirate.org/Grendene","headquarters":"Brazil"},{"id":48991,"name":"Chow Tai Fook","url":"https://wikirate.org/Chow_Tai_Fook","headquarters":"Hong Kong"},{"id":3624510,"name":"Cia Hering","url":"https://wikirate.org/Cia_Hering","headquarters":"Brazil"},{"id":3624496,"name":"United Arrows","url":"https://wikirate.org/United_Arrows","headquarters":"Japan"},{"id":3624517,"name":"Van de Velde","url":"https://wikirate.org/Van_de_Velde","headquarters":"Belgium"},{"id":2631100,"name":"Vipshop Holdings","url":"https://wikirate.org/Vipshop_Holdings","headquarters":"Guangdong (China)"},{"id":51397,"name":"JC Penney","url":"https://wikirate.org/JC_Penney","headquarters":"Texas (United States)"},{"id":3624433,"name":"Lao Feng Xiang Jewelry","url":"https://wikirate.org/Lao_Feng_Xiang_Jewelry","headquarters":"China"},{"id":3624447,"name":"Steve Madden","url":"https://wikirate.org/Steve_Madden","headquarters":"New York (United States)"},{"id":5294114,"name":"Onward Holdings","url":"https://wikirate.org/Onward_Holdings","headquarters":"Japan"},{"id":3624503,"name":"Metersbonwe","url":"https://wikirate.org/Metersbonwe","headquarters":"Shanghai (China)"},{"id":3624489,"name":"Aditya Birla Fashion & Retail Ltd","url":"https://wikirate.org/Aditya_Birla_Fashion_Retail_Ltd","headquarters":"India"},{"id":3624425,"name":"Semir","url":"https://wikirate.org/Semir","headquarters":"China"},{"id":5294189,"name":"Bosideng International Holdings Limited","url":"https://wikirate.org/Bosideng_International_Holdings_Limited","headquarters":"Shanghai (China)"},{"id":5408890,"name":"Canada Goose","url":"https://wikirate.org/Canada_Goose","headquarters":"Ontario, Canada"},{"id":5424735,"name":"Anta Sports Products","url":"https://wikirate.org/Anta_Sports_Products","headquarters":"Fujian (China)"}]');let D0=(()=>{class e{constructor(){this.companies=Vve,this.exploreMore=new dn(!1)}getCompany(n){return this.companies.find(r=>r.id===n)}getCompanies(){return this.companies.slice().sort((n,i)=>this.compare(n,i))}compare(n,i){return"All Companies"==n.name?-1:"All Companies"==i.name?1:n.name.localeCompare(i.name)}setExploreMore(){this.exploreMore.emit(!0),setTimeout(()=>{this.unsetExploreMore()},3e3)}unsetExploreMore(){this.exploreMore.emit(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const Hve=["addListener","removeListener"],Uve=["addEventListener","removeEventListener"],zve=["on","off"];function Ps(e,t,n,i){if($e(n)&&(i=n,n=void 0),i)return Ps(e,t,n).pipe(WN(i));const[r,o]=function qve(e){return $e(e.addEventListener)&&$e(e.removeEventListener)}(e)?Uve.map(s=>a=>e[s](t,a,n)):function Gve(e){return $e(e.addListener)&&$e(e.removeListener)}(e)?Hve.map(AH(e,t)):function Wve(e){return $e(e.on)&&$e(e.off)}(e)?zve.map(AH(e,t)):[];if(!r&&Q(e))return ui(s=>Ps(s,t,n))(at(e));if(!r)throw new TypeError("Invalid event target");return new xn(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function AH(e,t){return n=>i=>e[n](t,i)}class Yve extends Vn{constructor(t,n){super()}schedule(t,n=0){return this}}const SC={setInterval(...e){const{delegate:t}=SC;return((null==t?void 0:t.setInterval)||setInterval)(...e)},clearInterval(e){const{delegate:t}=SC;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},OH={now:()=>(OH.delegate||Date).now(),delegate:void 0};class Gv{constructor(t,n=Gv.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}}Gv.now=OH.now;const Jve=new class Xve extends Gv{constructor(t,n=Gv.now){super(t,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}}(class Kve extends Yve{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){if(this.closed)return this;this.state=t;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(r,this.id,n),this}requestAsyncId(t,n,i=0){return SC.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;SC.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r,i=!1;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Jt(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}});const{isArray:Zve}=Array;function MH(e){return 1===e.length&&Zve(e[0])?e[0]:e}function xC(...e){const t=Yl(e),n=MH(e);return n.length?new xn(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)at(n[s]).subscribe(new An(i,a=>{if(r[s].push(a),r.every(l=>l.length)){const l=r.map(u=>u.shift());i.next(t?t(...l):l),r.some((u,c)=>!u.length&&o[c])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):ws}function Xr(e){return ri((t,n)=>{at(e).subscribe(new An(n,()=>n.complete(),ti)),!n.closed&&t.subscribe(n)})}function bM(...e){const t=Yl(e);return ri((n,i)=>{const r=e.length,o=new Array(r);let s=e.map(()=>!1),a=!1;for(let l=0;l<r;l++)at(e[l]).subscribe(new An(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(Do))&&(s=null))},ti));n.subscribe(new An(i,l=>{if(a){const u=[l,...o];i.next(t?t(...u):u)}}))})}new xn(ti);let PH=(()=>{class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(ee($a),ee(Ri))},e.\u0275dir=Pe({type:e}),e})(),Up=(()=>{class e extends PH{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ns(e)))(i||e)}}(),e.\u0275dir=Pe({type:e,features:[si]}),e})();const vl=new nn("NgValueAccessor"),u1e={provide:vl,useExisting:pn(()=>wM),multi:!0},d1e=new nn("CompositionEventMode");let wM=(()=>{class e extends PH{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function c1e(){const e=uu()?uu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(ee($a),ee(Ri),ee(d1e,8))},e.\u0275dir=Pe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&gn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Di([u1e]),si]}),e})();const Qo=new nn("NgValidators"),Kf=new nn("NgAsyncValidators");function WH(e){return null!=e}function qH(e){const t=lv(e)?wi(e):e;return FO(t),t}function YH(e){let t={};return e.forEach(n=>{t=null!=n?Object.assign(Object.assign({},t),n):t}),0===Object.keys(t).length?null:t}function KH(e,t){return t.map(n=>n(e))}function XH(e){return e.map(t=>function h1e(e){return!e.validate}(t)?t:n=>t.validate(n))}function EM(e){return null!=e?function JH(e){if(!e)return null;const t=e.filter(WH);return 0==t.length?null:function(n){return YH(KH(n,t))}}(XH(e)):null}function CM(e){return null!=e?function QH(e){if(!e)return null;const t=e.filter(WH);return 0==t.length?null:function(n){return function a1e(...e){const t=Yl(e),{args:n,keys:i}=_V(e),r=new xn(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,u=s;for(let c=0;c<s;c++){let d=!1;at(n[c]).subscribe(new An(o,f=>{d||(d=!0,u--),a[c]=f},()=>l--,void 0,()=>{(!l||!d)&&(u||o.next(i?yV(i,a):a),o.complete())}))}});return t?r.pipe(WN(t)):r}(KH(n,t).map(qH)).pipe(ft(YH))}}(XH(e)):null}function ZH(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function DM(e){return e?Array.isArray(e)?e:[e]:[]}function TC(e,t){return Array.isArray(e)?e.includes(t):e===t}function nU(e,t){const n=DM(t);return DM(e).forEach(r=>{TC(n,r)||n.push(r)}),n}function iU(e,t){return DM(t).filter(n=>!TC(e,n))}class rU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=EM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=CM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class Xf extends rU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Fs extends rU{get formDirective(){return null}get path(){return null}}let S0=(()=>{class e extends class oU{constructor(t){this._cd=t}is(t){var n,i,r;return"submitted"===t?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(ee(Xf,2))},e.\u0275dir=Pe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&Zi("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[si]}),e})();function qv(e,t){(function TM(e,t){const n=function eU(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(ZH(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const i=function tU(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(ZH(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();MC(t._rawValidators,r),MC(t._rawAsyncValidators,r)})(e,t),t.valueAccessor.writeValue(e.value),function E1e(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&aU(e,t)})}(e,t),function D1e(e,t){const n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function C1e(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&aU(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function w1e(e,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function MC(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function aU(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function IC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Yv="VALID",RC="INVALID",x0="PENDING",Kv="DISABLED";function MM(e){return(PC(e)?e.validators:e)||null}function cU(e){return Array.isArray(e)?EM(e):e||null}function kM(e,t){return(PC(t)?t.asyncValidators:e)||null}function dU(e){return Array.isArray(e)?CM(e):e||null}function PC(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}const IM=e=>e instanceof PM;function hU(e){return(e=>e instanceof mU)(e)?e.value:e.getRawValue()}function pU(e,t){const n=IM(e),i=e.controls;if(!(n?Object.keys(i):i).length)throw new Pt(1e3,"");if(!i[t])throw new Pt(1001,"")}function gU(e,t){IM(e),e._forEachChild((i,r)=>{if(void 0===t[r])throw new Pt(1002,"")})}class RM{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=cU(this._rawValidators),this._composedAsyncValidatorFn=dU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Yv}get invalid(){return this.status===RC}get pending(){return this.status==x0}get disabled(){return this.status===Kv}get enabled(){return this.status!==Kv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=cU(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=dU(t)}addValidators(t){this.setValidators(nU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(nU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(iU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(iU(t,this._rawAsyncValidators))}hasValidator(t){return TC(this._rawValidators,t)}hasAsyncValidator(t){return TC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=x0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Kv,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Yv,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yv||this.status===x0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kv:Yv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=x0,this._hasOwnPendingAsyncValidator=!0;const n=qH(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){return function A1e(e,t,n){if(null==t||(Array.isArray(t)||(t=t.split(n)),Array.isArray(t)&&0===t.length))return null;let i=e;return t.forEach(r=>{i=IM(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(e=>e instanceof N1e)(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new dn,this.statusChanges=new dn}_calculateStatus(){return this._allControlsDisabled()?Kv:this.errors?RC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(x0)?x0:this._anyControlsHaveStatus(RC)?RC:Yv}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){PC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class mU extends RM{constructor(t=null,n,i){super(MM(n),kM(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),PC(n)&&n.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class PM extends RM{constructor(t,n,i){super(MM(n),kM(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){gU(this,t),Object.keys(t).forEach(i=>{pU(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=hU(n),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const n of Object.keys(this.controls)){const i=this.controls[n];if(this.contains(n)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,n,i)=>((n.enabled||this.disabled)&&(t[i]=n.value),t))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class N1e extends RM{constructor(t,n,i){super(MM(n),kM(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),n&&(this.controls.splice(t,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){gU(this,t),t.forEach((i,r)=>{pU(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>hU(t))}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((n,i)=>!!i._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const I1e={provide:Xf,useExisting:pn(()=>zp)},vU=(()=>Promise.resolve(null))();let zp=(()=>{class e extends Xf{constructor(n,i,r,o,s){super(),this._changeDetectorRef=s,this.control=new mU,this._registered=!1,this.update=new dn,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function OM(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===wM?n=o:function T1e(e){return Object.getPrototypeOf(e.constructor)===Up}(o)?i=o:r=o}),r||i||n||null}(0,o)}ngOnChanges(n){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in n&&this._updateDisabled(n),function AM(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function OC(e,t){return[...t.path,e]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){vU.then(()=>{var i;this.control.setValue(n,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(n){const i=n.isDisabled.currentValue,r=""===i||i&&"false"!==i;vU.then(()=>{var o;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}}return e.\u0275fac=function(n){return new(n||e)(ee(Fs,9),ee(Qo,10),ee(Kf,10),ee(vl,10),ee(lu,8))},e.\u0275dir=Pe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Di([I1e]),si,fo]}),e})(),wU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({}),e})();const z1e={provide:vl,useExisting:pn(()=>Jf),multi:!0};function AU(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Jf=(()=>{class e extends Up{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const r=AU(this._getOptionId(n),n);this.setProperty("value",r)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){const i=function G1e(e){return e.split(":")[0]}(n);return this._optionMap.has(i)?this._optionMap.get(i):n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ns(e)))(i||e)}}(),e.\u0275dir=Pe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,i){1&n&&gn("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Di([z1e]),si]}),e})(),T0=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(AU(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(ee(Ri),ee($a),ee(Jf,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const W1e={provide:vl,useExisting:pn(()=>$M),multi:!0};function OU(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let $M=(()=>{class e extends Up{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let i;if(this.value=n,Array.isArray(n)){const r=n.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const u=this._getOptionValue(s[a].value);r.push(u)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,n(r)}}_registerOption(n){const i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){const i=function q1e(e){return e.split(":")[0]}(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ns(e)))(i||e)}}(),e.\u0275dir=Pe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,i){1&n&&gn("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Di([W1e]),si]}),e})(),A0=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(OU(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(OU(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(ee(Ri),ee($a),ee($M,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),ibe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[wU]]}),e})(),HM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[ibe]}),e})();const dbe=["*"],Obe=["dialog"];function Gp(e){return null!=e}function N0(e){return(e||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const $U={animation:!0,transitionTimerDelayMs:5},Dwe=()=>{},{transitionTimerDelayMs:Swe}=$U,Jv=new Map,Ls=(e,t,n,i)=>{let r=i.context||{};const o=Jv.get(t);if(o)switch(i.runningTransition){case"continue":return ws;case"stop":e.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Jv.delete(t)}const s=n(t,i.animation,r)||Dwe;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>s()),Yt(void 0).pipe(function Ewe(e){return t=>new xn(n=>t.subscribe({next:s=>e.run(()=>n.next(s)),error:s=>e.run(()=>n.error(s)),complete:()=>e.run(()=>n.complete())}))}(e));const a=new jn,l=new jn,u=a.pipe(function t1e(...e){return t=>Nv(t,Yt(...e))}(!0));Jv.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const c=function Cwe(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const d=Ps(t,"transitionend").pipe(Xr(u),Xo(({target:h})=>h===t));(function kH(...e){return 1===(e=MH(e)).length?at(e[0]):new xn(function e1e(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(at(e[i]).subscribe(new An(t,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}t.next(r)})))}}(e))})(function yM(e=0,t,n=Jve){let i=-1;return null!=t&&(Yu(t)?n=t:i=t),new xn(r=>{let o=function Qve(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(c+Swe).pipe(Xr(u)),d,l).pipe(Xr(u)).subscribe(()=>{Jv.delete(t),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let LC=(()=>{class e{constructor(){this.animation=$U.animation}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),WU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),qU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),KU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({}),e})(),QU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),ZU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({}),e})();var Jr=(()=>{return(e=Jr||(Jr={}))[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",Jr;var e})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const tz=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function nz(e){const t=Array.from(e.querySelectorAll(tz)).filter(n=>-1!==n.tabIndex);return[t[0],t[t.length-1]]}new class qwe{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,n){return this.getAllStyles(t)[n]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let n=t.offsetParent||document.documentElement;for(;n&&n!==document.documentElement&&this.isStaticPositioned(n);)n=n.offsetParent;return n||document.documentElement}position(t,n=!0){let i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i=t.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{const o=this.offsetParent(t);i=this.offset(t,!1),o!==document.documentElement&&(r=this.offset(o,!1)),r.top+=o.clientTop,r.left+=o.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,n&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i}offset(t,n=!0){const i=t.getBoundingClientRect(),r_top=window.scrollY-document.documentElement.clientTop,r_left=window.scrollX-document.documentElement.clientLeft;let o={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return n&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,n,i,r){const[o="top",s="center"]=i.split("-"),a=r?this.offset(t,!1):this.position(t,!1),l=this.getAllStyles(n),u=parseFloat(l.marginTop),c=parseFloat(l.marginBottom),d=parseFloat(l.marginLeft),f=parseFloat(l.marginRight);let h=0,p=0;switch(o){case"top":h=a.top-(n.offsetHeight+u+c);break;case"bottom":h=a.top+a.height;break;case"left":p=a.left-(n.offsetWidth+d+f);break;case"right":p=a.left+a.width}switch(s){case"top":h=a.top;break;case"bottom":h=a.top+a.height-n.offsetHeight;break;case"left":p=a.left;break;case"right":p=a.left+a.width-n.offsetWidth;break;case"center":"top"===o||"bottom"===o?p=a.left+a.width/2-n.offsetWidth/2:h=a.top+a.height/2-n.offsetHeight/2}n.style.transform=`translate(${Math.round(p)}px, ${Math.round(h)}px)`;const m=n.getBoundingClientRect(),_=document.documentElement,b=window.innerHeight||_.clientHeight,v=window.innerWidth||_.clientWidth;return m.left>=0&&m.top>=0&&m.right<=v&&m.bottom<=b}},new Date(1882,10,12),new Date(2174,10,25);let uz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va,HM]]}),e})(),JM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Pe({type:e,selectors:[["",8,"navbar"]]}),e})(),fz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({}),e})();class Kp{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}}let sEe=(()=>{class e{constructor(n,i){this._el=n,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Vi(1)).subscribe(()=>{Ls(this._zone,this._el.nativeElement,(n,i)=>{i&&N0(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ls(this._zone,this._el.nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(n){return new(n||e)(ee(Ri),ee(gi))},e.\u0275cmp=di({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(n,i){2&n&&(Mp("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Zi("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(n,i){},encapsulation:2}),e})();class hz{close(t){}dismiss(t){}}class aEe{constructor(t,n,i,r){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new jn,this._dismissed=new jn,this._hidden=new jn,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Xr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Xr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const n=this._beforeDismiss();!function bwe(e){return e&&e.then}(n)?!1!==n&&this._dismiss(t):n.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Yt(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),xC(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var t1=(()=>{return(e=t1||(t1={}))[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",t1;var e})();let lEe=(()=>{class e{constructor(n,i,r){this._document=n,this._elRef=i,this._zone=r,this._closed$=new jn,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new dn,this.shown=new jn,this.hidden=new jn}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Vi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:n}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=xC(Ls(this._zone,n,()=>n.classList.remove("show"),i),Ls(this._zone,this._dialogEl.nativeElement,()=>{},i));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const n={animation:this.animation,runningTransition:"continue"};xC(Ls(this._zone,this._elRef.nativeElement,(o,s)=>{s&&N0(o),o.classList.add("show")},n),Ls(this._zone,this._dialogEl.nativeElement,()=>{},n)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{Ps(n,"keydown").pipe(Xr(this._closed$),Xo(r=>r.which===Jr.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(t1.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ps(this._dialogEl.nativeElement,"mousedown").pipe(Xr(this._closed$),Rs(()=>i=!1),Ld(()=>Ps(n,"mouseup").pipe(Xr(this._closed$),Vi(1))),Xo(({target:r})=>n===r)).subscribe(()=>{i=!0}),Ps(n,"click").pipe(Xr(this._closed$)).subscribe(({target:r})=>{n===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(t1.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){const i=n.querySelector("[ngbAutofocus]"),r=nz(n)[0];(i||r||n).focus()}}_restoreFocus(){const n=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&n.contains(i)?i:n,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ls(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(n){return new(n||e)(ee(Ui),ee(Ri),ee(gi))},e.\u0275cmp=di({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(n,i){if(1&n&&Pp(Obe,7),2&n){let r;Si(r=xi())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,i){2&n&&(pi("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Mp("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Zi("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:dbe,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(n,i){1&n&&(function f$(e){const t=fe()[16][6];if(!t.projection){const i=t.projection=Gy(e?e.length:1,null),r=i.slice();let o=t.child;for(;null!==o;){const s=e?$fe(o,e):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}(),x(0,"div",0,1),x(2,"div",2),function h$(e,t=0,n){const i=fe(),r=At(),o=Um(r,20+e,16,null,n||null);null===o.projection&&(o.projection=t),g2(),64!=(64&o.flags)&&function $ce(e,t,n){jB(t[11],0,t,n,AB(e,n,t),kB(n.parent||t[6],n,t))}(r,i,o)}(3),T(),T()),2&n&&Mp("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})();const uEe=()=>{};let cEe=(()=>{class e{constructor(n){this._document=n}compensate(){const n=this._getWidth();return this._isPresent(n)?this._adjustBody(n):uEe}_adjustBody(n){const i=this._document.body,r=i.style.paddingRight,o=parseFloat(window.getComputedStyle(i)["padding-right"]);return i.style["padding-right"]=`${o+n}px`,()=>i.style["padding-right"]=r}_isPresent(n){const i=this._document.body.getBoundingClientRect();return window.innerWidth-(i.left+i.right)>=n-.1*n}_getWidth(){const n=this._document.createElement("div");n.className="modal-scrollbar-measure";const i=this._document.body;i.appendChild(n);const r=n.getBoundingClientRect().width-n.clientWidth;return i.removeChild(n),r}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui))},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),dEe=(()=>{class e{constructor(n,i,r,o,s,a){this._applicationRef=n,this._injector=i,this._document=r,this._scrollBar=o,this._rendererFactory=s,this._ngZone=a,this._activeWindowCmptHasChanged=new jn,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new dn,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Ps(t,"focusin").pipe(Xr(n),ft(o=>o.target));Ps(t,"keydown").pipe(Xr(n),Xo(o=>o.which===Jr.Tab),bM(r)).subscribe(([o,s])=>{const[a,l]=nz(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&Ps(t,"click").pipe(Xr(n),bM(r),ft(o=>o[1])).subscribe(o=>o.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(n,i,r,o){const s=o.container instanceof HTMLElement?o.container:Gp(o.container)?this._document.querySelector(o.container):this._document.body,a=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.compensate(),u=()=>{this._modalRefs.length||(a.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);const c=new hz,d=this._getContentRef(n,o.injector||i,r,c,o);let f=!1!==o.backdrop?this._attachBackdrop(n,s):void 0,h=this._attachWindowComponent(n,s,d),p=new aEe(h,d,f,o.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(h),p.result.then(l,l),p.result.then(u,u),c.close=m=>{p.close(m)},c.dismiss=m=>{p.dismiss(m)},this._applyWindowOptions(h.instance,o),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),f&&f.instance&&(this._applyBackdropOptions(f.instance,o),f.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),p}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(i=>i.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n,i){let o=n.resolveComponentFactory(sEe).create(this._injector);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_attachWindowComponent(n,i,r){let s=n.resolveComponentFactory(lEe).create(this._injector,r.nodes);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_applyWindowOptions(n,i){this._windowAttributes.forEach(r=>{Gp(i[r])&&(n[r]=i[r])})}_applyBackdropOptions(n,i){this._backdropAttributes.forEach(r=>{Gp(i[r])&&(n[r]=i[r])})}_getContentRef(n,i,r,o,s){return r?r instanceof dr?this._createFromTemplateRef(r,o):function BU(e){return"string"==typeof e}(r)?this._createFromString(r):this._createFromComponent(n,i,r,o,s):new Kp([])}_createFromTemplateRef(n,i){const o=n.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(o),new Kp([o.rootNodes],o)}_createFromString(n){const i=this._document.createTextNode(`${n}`);return new Kp([[i]])}_createFromComponent(n,i,r,o,s){const a=n.resolveComponentFactory(r),l=Pr.create({providers:[{provide:hz,useValue:o}],parent:i}),u=a.create(l),c=u.location.nativeElement;return s.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new Kp([[c]],u.hostView,u)}_setAriaHidden(n){const i=n.parentElement;i&&n!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==n&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,i)=>{n?i.setAttribute("aria-hidden",n):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){const i=()=>{const r=this._modalRefs.indexOf(n);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(i,i)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{const i=this._windowCmpts.indexOf(n);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(n){return new(n||e)(ze(m0),ze(Pr),ze(Ui),ze(cEe),ze(c0),ze(gi))},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fEe=(()=>{class e{constructor(n){this._ngbConfig=n,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(ze(LC))},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pz=(()=>{class e{constructor(n,i,r,o){this._moduleCFR=n,this._injector=i,this._modalStack=r,this._config=o}open(n,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,n,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(n){return new(n||e)(ze(Rp),ze(Pr),ze(dEe),ze(fEe))},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),gz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:[pz]}),e})(),vz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),Tz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),Oz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),Nz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),Mz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),kz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),Iz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})(),Rz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({}),e})();new nn("live announcer delay",{providedIn:"root",factory:function SEe(){return 100}});let Pz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[[Va]]}),e})();const xEe=[WU,qU,KU,QU,ZU,uz,fz,gz,vz,Tz,Oz,Nz,Mz,kz,Iz,Rz,Pz];let TEe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({imports:[xEe,WU,qU,KU,QU,ZU,uz,fz,gz,vz,Tz,Oz,Nz,Mz,kz,Iz,Rz,Pz]}),e})(),AEe=(()=>{class e{constructor(n,i,r){this.apparelService=n,this.modalService=i,this.viewportScroller=r,this.logos=$ve.U,this.selectedLogos=[]}ngOnInit(){this.selectedLogos=[];for(var n=0;n<=5;n++){let i="";do{i=this.logos[this.getRandomInt(20)]}while(this.selectedLogos.includes(i));this.selectedLogos.push(i)}}open(n){this.modalService.open(n)}onExploreMore(){this.apparelService.setExploreMore()}getRandomInt(n){return Math.floor(Math.random()*n)}onClick(n){this.viewportScroller.scrollToAnchor(n)}}return e.\u0275fac=function(n){return new(n||e)(ee(D0),ee(pz),ee(Tv))},e.\u0275cmp=di({type:e,selectors:[["intro"]],decls:29,vars:10,consts:[[1,"intro","wikirate-box"],[1,"wikirate-container"],[1,"row","mt-5","mb-3"],[1,"col-md-8","nopadding"],[1,"showcase-main-title","call-to-action-title"],[1,"main-text"],[1,"col-md-4"],[1,"row"],[1,"scroll",3,"click"],[1,"bi","bi-chevron-down"],[1,"ml-2"],[1,"animation","d-none","d-md-block"],[1,"logo-1","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-img",3,"src"],[1,"logo-2","d-block","corporate-logo-xl","bg-white","rounded-circle","shadow-lg","p-3","ms-auto"],[1,"logo-3","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-4","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-5","d-block","corporate-logo-xl","bg-white","rounded-circle","shadow-lg","p-3","ms-auto"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"div",3),x(4,"h1",4),le(5," Apparel 100: a powerful transparency and ESG data showcase "),T(),Ve(6,"br"),x(7,"div",5),x(8,"p"),le(9,"Discover the top 100 apparel companies' ESG data disclosure ratings and supplier transparency via interactive maps and infographics. "),T(),x(10,"p"),le(11,"WikiRate's biggest data showcase unearths; who the top 100 are, their ESG data disclosure ratings, and where their suppliers are located."),T(),T(),T(),Ve(12,"div",6),T(),x(13,"div",7),x(14,"a",8),gn("click",function(){return i.onClick("market-cap-map")}),Ve(15,"i",9),x(16,"span",10),le(17,"Scroll down"),T(),T(),T(),T(),T(),x(18,"div",11),x(19,"div",12),Ve(20,"img",13),T(),x(21,"div",14),Ve(22,"img",13),T(),x(23,"div",15),Ve(24,"img",13),T(),x(25,"div",16),Ve(26,"img",13),T(),x(27,"div",17),Ve(28,"img",13),T(),T()),2&n&&(Ne(19),Je("@slide-in",void 0),Ne(1),Od("src",i.selectedLogos[0],ua),Ne(1),Je("@slide-in-delay-sm",void 0),Ne(1),Od("src",i.selectedLogos[1],ua),Ne(1),Je("@slide-in-delay-md",void 0),Ne(1),Od("src",i.selectedLogos[2],ua),Ne(1),Je("@slide-in-delay-lg",void 0),Ne(1),Od("src",i.selectedLogos[3],ua),Ne(1),Je("@slide-in-delay-xl",void 0),Ne(1),Od("src",i.selectedLogos[4],ua))},styles:[".intro[_ngcontent-%COMP%]{min-height:450px;display:flex;align-items:center}h1.showcase-main-title[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:2.75rem;line-height:135%;color:#484c9d;max-width:600px}.main-text[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:1.25rem;color:#34343b;line-height:155%;margin-bottom:30px;max-width:600px}.corporate-logo-xl[_ngcontent-%COMP%]{height:5.25rem;width:5.25rem;position:relative}.corporate-logo-sm[_ngcontent-%COMP%]{height:4.25rem;width:4.25rem;position:relative}.logo-1[_ngcontent-%COMP%]{position:absolute;left:80%;right:20%;top:8em}.logo-2[_ngcontent-%COMP%]{position:absolute;left:65%;right:35%;top:18em}.logo-3[_ngcontent-%COMP%]{position:absolute;left:90%;right:10%;top:25em}.logo-4[_ngcontent-%COMP%]{position:absolute;left:79%;right:21%;top:32em}.logo-5[_ngcontent-%COMP%]{position:absolute;left:64%;right:36%;top:42em}a.scroll[_ngcontent-%COMP%]{color:#f7733d;cursor:pointer;text-decoration:inherit}"],data:{animation:[Vv("slide-in",[Uv(":enter",[yl({opacity:0,transform:"translateY(50px)"}),Hv("600ms 50ms",yl({opacity:1,transform:"translateY(0)"}))])]),Vv("slide-in-delay-sm",[Uv(":enter",[yl({opacity:0,transform:"translateY(50px)"}),Hv("600ms 150ms",yl({opacity:1,transform:"translateY(0)"}))])]),Vv("slide-in-delay-md",[Uv(":enter",[yl({opacity:0,transform:"translateY(50px)"}),Hv("600ms 250ms",yl({opacity:1,transform:"translateY(0)"}))])]),Vv("slide-in-delay-lg",[Uv(":enter",[yl({opacity:0,transform:"translateY(50px)"}),Hv("600ms 350ms",yl({opacity:1,transform:"translateY(0)"}))])]),Vv("slide-in-delay-xl",[Uv(":enter",[yl({opacity:0,transform:"translateY(50px)"}),Hv("600ms 450ms",yl({opacity:1,transform:"translateY(0)"}))])])]}}),e})();var e,OEe=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(t,n)},function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),NEe=Object.prototype.hasOwnProperty;function GC(e,t){return NEe.call(e,t)}function tk(e){if(Array.isArray(e)){for(var n=new Array(e.length),t=0;t<n.length;t++)n[t]=""+t;return n}if(Object.keys)return Object.keys(e);for(var i in n=[],e)GC(e,i)&&n.push(i);return n}function Ha(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function nk(e){for(var i,t=0,n=e.length;t<n;){if(!((i=e.charCodeAt(t))>=48&&i<=57))return!1;t++}return!0}function Hd(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Fz(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ik(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(ik(e[t]))return!0}else if("object"==typeof e){var i=tk(e),r=i.length;for(t=0;t<r;t++)if(ik(e[i[t]]))return!0}return!1}function jz(e,t){var n=[e];for(var i in t){var r="object"==typeof t[i]?JSON.stringify(t[i],null,2):t[i];void 0!==r&&n.push(i+": "+r)}return n.join("\n")}var Bz=function(e){function t(n,i,r,o,s){var a=this.constructor,l=e.call(this,jz(n,{name:i,index:r,operation:o,tree:s}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=jz(n,{name:i,index:r,operation:o,tree:s}),l}return OEe(t,e),t}(Error),fr=Bz,MEe=Ha,k0={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=WC(n,this.path);i&&(i=Ha(i));var r=Xp(n,{op:"remove",path:this.from}).removed;return Xp(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=WC(n,this.from);return Xp(n,{op:"add",path:this.path,value:Ha(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:n1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},kEe={add:function(e,t,n){return nk(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:k0.move,copy:k0.copy,test:k0.test,_get:k0._get};function WC(e,t){if(""==t)return e;var n={op:"_get",path:t};return Xp(e,n),n.value}function Xp(e,t,n,i,r,o){if(void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):YC(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=WC(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=n1(e,t.value),!1===s.test)throw new fr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(n)throw new fr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}i||(e=Ha(e));var l=(t.path||"").split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(p="function"==typeof n?n:YC;;){if((h=l[c])&&-1!=h.indexOf("~")&&(h=Fz(h)),r&&"__proto__"==h)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[h]?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),void 0!==f&&p(t,0,e,f)),c++,Array.isArray(u)){if("-"===h)h=u.length;else{if(n&&!nk(h))throw new fr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);nk(h)&&(h=~~h)}if(c>=d){if(n&&"add"===t.op&&h>u.length)throw new fr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(s=kEe[t.op].call(t,u,h,e)).test)throw new fr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=d){if(!1===(s=k0[t.op].call(t,u,h,e)).test)throw new fr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<d&&(!u||"object"!=typeof u))throw new fr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function qC(e,t,n,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n&&!Array.isArray(t))throw new fr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Ha(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Xp(e,t[s],n,!0,r,s),e=o[s].newDocument;return o.newDocument=e,o}function IEe(e,t,n){var i=Xp(e,t);if(!1===i.test)throw new fr("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function YC(e,t,n,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new fr("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!k0[e.op])throw new fr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new fr("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new fr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new fr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new fr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&ik(e.value))throw new fr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new fr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new fr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=$z([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new fr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function $z(e,t,n){try{if(!Array.isArray(e))throw new fr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)qC(Ha(t),Ha(e),n||!0);else{n=n||YC;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof fr)return r;throw r}}function n1(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,o,s,n=Array.isArray(e),i=Array.isArray(t);if(n&&i){if((o=e.length)!=t.length)return!1;for(r=o;0!=r--;)if(!n1(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var a=Object.keys(e);if((o=a.length)!==Object.keys(t).length)return!1;for(r=o;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=o;0!=r--;)if(!n1(e[s=a[r]],t[s]))return!1;return!0}return e!=e&&t!=t}var rk=new WeakMap,REe=function e(t){this.observers=new Map,this.obj=t},PEe=function e(t,n){this.callback=t,this.observer=n};function BEe(e,t){t.unobserve()}function $Ee(e,t){var i,r=function FEe(e){return rk.get(e)}(e);if(r){var o=function LEe(e,t){return e.observers.get(t)}(r,t);i=o&&o.observer}else r=new REe(e),rk.set(e,r);if(i)return i;if(i={},r.value=Ha(e),t){i.callback=t,i.next=null;var s=function(){ok(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=[],i.object=e,i.unobserve=function(){ok(i),clearTimeout(i.next),function jEe(e,t){e.observers.delete(t.callback)}(r,i),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new PEe(t,i)),i}function ok(e,t){void 0===t&&(t=!1);var n=rk.get(e.object);sk(n.value,e.object,e.patches,"",t),e.patches.length&&qC(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function sk(e,t,n,i,r){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=tk(t),s=tk(e),l=!1,u=s.length-1;u>=0;u--){var d=e[c=s[u]];if(!GC(t,c)||void 0===t[c]&&void 0!==d&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Hd(c),value:Ha(d)}),n.push({op:"remove",path:i+"/"+Hd(c)}),l=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}));else{var f=t[c];"object"==typeof d&&null!=d&&"object"==typeof f&&null!=f&&Array.isArray(d)===Array.isArray(f)?sk(d,f,n,i+"/"+Hd(c),r):d!==f&&(r&&n.push({op:"test",path:i+"/"+Hd(c),value:Ha(d)}),n.push({op:"replace",path:i+"/"+Hd(c),value:Ha(f)}))}}if(l||o.length!=s.length)for(u=0;u<o.length;u++){var c;!GC(e,c=o[u])&&void 0!==t[c]&&n.push({op:"add",path:i+"/"+Hd(c),value:Ha(t[c])})}}}function VEe(e,t,n){void 0===n&&(n=!1);var i=[];return sk(e,t,i,"",n),i}Object.assign({},yt,Ye,{JsonPatchError:Bz,deepClone:Ha,escapePathComponent:Hd,unescapePathComponent:Fz});var HEe=Le(564),ak=Le.n(HEe);function da(e,t,n){return e.fields=t||[],e.fname=n,e}function hr(e){return null==e?null:e.fname}function Zo(e){return null==e?null:e.fields}function Vz(e){return 1===e.length?UEe(e[0]):zEe(e)}const UEe=e=>function(t){return t[e]},zEe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function be(e){throw Error(e)}function gc(e){const t=[],n=e.length;let s,a,l,i=null,r=0,o="";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(e+="",s=a=0;a<n;++a)if(l=e[a],"\\"===l)o+=e.substring(s,a),o+=e.substring(++a,++a),s=a;else if(l===i)u(),i=null,r=-1;else{if(i)continue;s===r&&'"'===l||s===r&&"'"===l?(s=a+1,i=l):"."!==l||r?"["===l?(a>s&&u(),r=s=a+1):"]"===l&&(r||be("Access path missing open bracket: "+e),r>0&&u(),r=0,s=a+1):a>s?u():s=a+1}return r&&be("Access path missing closing bracket: "+e),i&&be("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function fa(e,t,n){const i=gc(e);return e=1===i.length?i[0]:e,da((n&&n.get||Vz)(i),[e],t||e)}const i1=fa("id"),es=da(e=>e,[],"identity"),Zf=da(()=>0,[],"zero"),I0=da(()=>1,[],"one"),bl=da(()=>!0,[],"true"),eh=da(()=>!1,[],"false");function GEe(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const Hz=0,lk=1,uk=2,Uz=3,zz=4;function ck(e,t,n=GEe){let i=e||Hz;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=lk&&n(t||"error","ERROR",arguments),this},warn(){return i>=uk&&n(t||"warn","WARN",arguments),this},info(){return i>=Uz&&n(t||"log","INFO",arguments),this},debug(){return i>=zz&&n(t||"log","DEBUG",arguments),this}}}var Ce=Array.isArray;function it(e){return e===Object(e)}const Gz=e=>"__proto__"!==e;function R0(...e){return e.reduce((t,n)=>{for(const i in n)"signals"===i?t.signals=WEe(t.signals,n.signals):P0(t,i,n[i],"legend"===i?{layout:1}:"style"===i||null);return t},{})}function P0(e,t,n,i){if(!Gz(t))return;let r,o;if(it(n)&&!Ce(n))for(r in o=it(e[t])?e[t]:e[t]={},n)i&&(!0===i||i[r])?P0(o,r,n[r]):Gz(r)&&(o[r]=n[r]);else e[t]=n}function WEe(e,t){if(null==e)return t;const n={},i=[];function r(o){n[o.name]||(n[o.name]=1,i.push(o))}return t.forEach(r),e.forEach(r),i}function On(e){return e[e.length-1]}function ts(e){return null==e||""===e?null:+e}const Wz=e=>t=>e*Math.exp(t),qz=e=>t=>Math.log(e*t),Yz=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Kz=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,KC=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function XC(e,t,n,i){const r=n(e[0]),o=n(On(e)),s=(o-r)*t;return[i(r-s),i(o-s)]}function Xz(e,t){return XC(e,t,ts,es)}function Jz(e,t){var n=Math.sign(e[0]);return XC(e,t,qz(n),Wz(n))}function Qz(e,t,n){return XC(e,t,KC(n),KC(1/n))}function Zz(e,t,n){return XC(e,t,Yz(n),Kz(n))}function JC(e,t,n,i,r){const o=i(e[0]),s=i(On(e)),a=null!=t?i(t):(o+s)/2;return[r(a+(o-a)*n),r(a+(s-a)*n)]}function dk(e,t,n){return JC(e,t,n,ts,es)}function fk(e,t,n){const i=Math.sign(e[0]);return JC(e,t,n,qz(i),Wz(i))}function QC(e,t,n,i){return JC(e,t,n,KC(i),KC(1/i))}function hk(e,t,n,i){return JC(e,t,n,Yz(i),Kz(i))}function eG(e){return 1+~~(new Date(e).getMonth()/3)}function tG(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ze(e){return null!=e?Ce(e)?e:[e]:[]}function nG(e,t,n){let o,i=e[0],r=e[1];return r<i&&(o=r,r=i,i=o),o=r-i,o>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-o),i+o]}function sn(e){return"function"==typeof e}function pk(e,t,n){n=n||{},t=Ze(t)||[];const i=[],r=[],o={},s=n.comparator||YEe;return Ze(e).forEach((a,l)=>{null!=a&&(i.push("descending"===t[l]?-1:1),r.push(a=sn(a)?a:fa(a,null,n)),(Zo(a)||[]).forEach(u=>o[u]=1))}),0===r.length?null:da(s(r,i),Object.keys(o))}const ZC=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),YEe=(e,t)=>1===e.length?KEe(e[0],t[0]):XEe(e,t,e.length),KEe=(e,t)=>function(n,i){return ZC(e(n),e(i))*t},XEe=(e,t,n)=>(t.push(0),function(i,r){let o,s=0,a=-1;for(;0===s&&++a<n;)o=e[a],s=ZC(o(i),o(r));return s*t[a]});function ns(e){return sn(e)?e:()=>e}function gk(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function an(e){for(let t,n,i=1,r=arguments.length;i<r;++i)for(n in t=arguments[i],t)e[n]=t[n];return e}function mc(e,t){let i,r,o,s,n=0;if(e&&(i=e.length))if(null==t){for(r=e[n];n<i&&(null==r||r!=r);r=e[++n]);for(o=s=r;n<i;++n)r=e[n],null!=r&&(r<o&&(o=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(null==r||r!=r);r=t(e[++n]));for(o=s=r;n<i;++n)r=t(e[n]),null!=r&&(r<o&&(o=r),r>s&&(s=r))}return[o,s]}function iG(e,t){const n=e.length;let r,o,s,a,l,i=-1;if(null==t){for(;++i<n;)if(o=e[i],null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=e[i],null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}else{for(;++i<n;)if(o=t(e[i],i,e),null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=t(e[i],i,e),null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}return[a,l]}const JEe=Object.prototype.hasOwnProperty;function gt(e,t){return JEe.call(e,t)}const eD={};function F0(e){let n,t={};function i(o){return gt(t,o)&&t[o]!==eD}const r={size:0,empty:0,object:t,has:i,get:o=>i(o)?t[o]:void 0,set(o,s){return i(o)||(++r.size,t[o]===eD&&--r.empty),t[o]=s,this},delete(o){return i(o)&&(--r.size,++r.empty,t[o]=eD),this},clear(){r.size=r.empty=0,r.object=t={}},test(o){return arguments.length?(n=o,r):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==eD&&(!n||!n(l))&&(o[a]=l,++s)}r.size=s,r.empty=0,r.object=t=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function rG(e,t,n,i,r,o){if(!n&&0!==n)return o;const s=+n;let u,a=e[0],l=On(e);l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?i:c<=s?r:o}function Fe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),an(i,n)}function L0(e,t,n,i){let s,r=t[0],o=t[t.length-1];return r>o&&(s=r,r=o,o=s),i=void 0===i||i,((n=void 0===n||n)?r<=e:r<e)&&(i?e<=o:e<o)}function th(e){return"boolean"==typeof e}function nh(e){return"[object Date]"===Object.prototype.toString.call(e)}function oG(e){return e&&sn(e[Symbol.iterator])}function mi(e){return"number"==typeof e}function sG(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function Qe(e){return"string"==typeof e}function mk(e,t,n){e&&(e=t?Ze(e).map(a=>a.replace(/\\(.)/g,"$1")):Ze(e));const i=e&&e.length,r=n&&n.get||Vz,o=a=>r(t?[a]:gc(a));let s;if(i)if(1===i){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<i;)u+="|"+a[c](l);return u}}else s=function(){return""};return da(s,e,"key")}function aG(e,t){const n=e[0],i=On(e),r=+t;return r?1===r?i:n+r*(i-n):n}function lG(e){let t,n,i;e=+e||1e4;const r=()=>{t={},n={},i=0},o=(s,a)=>(++i>e&&(n=t,t={},i=1),t[s]=a);return r(),{clear:r,has:s=>gt(t,s)||gt(n,s),get:s=>gt(t,s)?t[s]:gt(n,s)?o(s,n[s]):void 0,set:(s,a)=>gt(t,s)?t[s]=a:o(s,a)}}function uG(e,t,n,i){const r=t.length,o=n.length;if(!o)return t;if(!r)return n;const s=i||new t.constructor(r+o);let a=0,l=0,u=0;for(;a<r&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<r;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function r1(e,t){let n="";for(;--t>=0;)n+=e;return n}function cG(e,t,n,i){const r=n||" ",o=e+"",s=t-o.length;return s<=0?o:"left"===i?r1(r,s)+o:"center"===i?r1(r,~~(s/2))+o+r1(r,Math.ceil(s/2)):o+r1(r,s)}function o1(e){return e&&On(e)-e[0]||0}function Be(e){return Ce(e)?"["+e.map(Be)+"]":it(e)||Qe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function _k(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}const ZEe=e=>mi(e)||nh(e)?e:Date.parse(e);function yk(e,t){return t=t||ZEe,null==e||""===e?null:t(e)}function vk(e){return null==e||""===e?null:e+""}function hu(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function dG(e,t,n,i){const r=null!=i?i:"\u2026",o=e+"",s=o.length,a=Math.max(0,t-r.length);return s<=t?o:"left"===n?r+o.slice(s-a):"center"===n?o.slice(0,Math.ceil(a/2))+r+o.slice(s-~~(a/2)):o.slice(0,a)+r}function ih(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const o=t(e[r]);o&&n(o,r,e)}}else e.forEach(n)}function fG(e,t,n,i,r,o,s){try{var a=e[o](s),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(i,r)}function js(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function s(l){fG(o,i,r,s,a,"next",l)}function a(l){fG(o,i,r,s,a,"throw",l)}s(void 0)})}}var hG={},bk={};function pG(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function gG(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ha(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function iCe(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(d,f){var b,h=[],p=d.length,m=0,_=0,v=p<=0,D=!1;function A(){if(v)return bk;if(D)return D=!1,hG;var L,B,k=m;if(34===d.charCodeAt(k)){for(;m++<p&&34!==d.charCodeAt(m)||34===d.charCodeAt(++m););return(L=m)>=p?v=!0:10===(B=d.charCodeAt(m++))?D=!0:13===B&&(D=!0,10===d.charCodeAt(m)&&++m),d.slice(k+1,L-1).replace(/""/g,'"')}for(;m<p;){if(10===(B=d.charCodeAt(L=m++)))D=!0;else if(13===B)D=!0,10===d.charCodeAt(m)&&++m;else if(B!==n)continue;return d.slice(k,L)}return v=!0,d.slice(k,p)}for(10===d.charCodeAt(p-1)&&--p,13===d.charCodeAt(p-1)&&--p;(b=A())!==bk;){for(var I=[];b!==hG&&b!==bk;)I.push(b),b=A();f&&null==(I=f(I,_++))||h.push(I)}return h}function o(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function u(d){return d.map(c).join(e)}function c(d){return null==d?"":d instanceof Date?function nCe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function tCe(e){return e<0?"-"+ha(-e,6):e>9999?"+"+ha(e,6):ha(e,4)}(e.getUTCFullYear())+"-"+ha(e.getUTCMonth()+1,2)+"-"+ha(e.getUTCDate(),2)+(r?"T"+ha(t,2)+":"+ha(n,2)+":"+ha(i,2)+"."+ha(r,3)+"Z":i?"T"+ha(t,2)+":"+ha(n,2)+":"+ha(i,2)+"Z":n||t?"T"+ha(t,2)+":"+ha(n,2)+"Z":"")}(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:function i(d,f){var h,p,m=r(d,function(_,b){if(h)return h(_,b-1);p=_,h=f?function eCe(e,t){var n=pG(e);return function(i,r){return t(n(i),r,e)}}(_,f):pG(_)});return m.columns=p||[],m},parseRows:r,format:function s(d,f){return null==f&&(f=gG(d)),[f.map(c).join(e)].concat(o(d,f)).join("\n")},formatBody:function a(d,f){return null==f&&(f=gG(d)),o(d,f).join("\n")},formatRows:function l(d){return d.map(u).join("\n")},formatRow:u,formatValue:c}}function oCe(e){return e}function aCe(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(n){return mG(e,n)})}:mG(e,t)}function mG(e,t){var n=t.id,i=t.bbox,r=null==t.properties?{}:t.properties,o=_G(e,t);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function _G(e,t){var n=function sCe(e){if(null==e)return oCe;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*i+o,d[1]=(n+=a[1])*r+s;u<c;)d[u]=a[u],++u;return d}}(e.transform),i=e.arcs;function r(c,d){d.length&&d.pop();for(var f=i[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&function rCe(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}(d,p)}function o(c){return n(c)}function s(c){for(var d=[],f=0,h=c.length;f<h;++f)r(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=s(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}return function u(c){var f,d=c.type;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=o(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(o);break;case"LineString":f=s(c.arcs);break;case"MultiLineString":f=c.arcs.map(s);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}(t)}function lCe(e,t){var n={},i={},r={},o=[],s=-1;function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),o.push(f)}}return t.forEach(function(u,c){var f,d=e.arcs[u<0?~u:u];d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++s],t[s]=u,t[c]=f)}),t.forEach(function(u){var h,p,c=function a(u){var f,c=e.arcs[u<0?~u:u],d=c[0];return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}(u),d=c[0],f=c[1];if(h=r[d])if(delete r[h.end],h.push(u),h.end=f,p=i[f]){delete i[p.start];var m=p===h?h:h.concat(p);i[m.start=h.start]=r[m.end=p.end]=m}else i[h.start]=r[h.end]=h;else if(h=i[f])if(delete i[h.start],h.unshift(u),h.start=d,p=r[d]){delete r[p.end];var _=p===h?h:p.concat(h);i[_.start=p.start]=r[_.end=h.end]=_}else i[h.start]=r[h.end]=h;else i[(h=[u]).start=d]=r[h.end=f]=h}),l(r,i),l(i,r),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function uCe(e){return _G(e,cCe.apply(this,arguments))}function cCe(e,t,n){var i,r,o;if(arguments.length>1)i=dCe(0,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:lCe(e,i)}}function dCe(e,t,n){var o,i=[],r=[];function s(d){var f=d<0?~d:d;(r[f]||(r[f]=[])).push({i:d,g:o})}function a(d){d.forEach(s)}function l(d){d.forEach(a)}return function c(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":!function u(d){d.forEach(l)}(d.arcs)}}(t),r.forEach(null==n?function(d){i.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}var Ck=Math.sqrt(50),Dk=Math.sqrt(10),Sk=Math.sqrt(2);function xk(e,t,n){var i,o,s,a,r=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(o=e,e=t,t=o),0===(a=yG(e,t,n))||!isFinite(a))return[];if(a>0){let l=Math.round(e/a),u=Math.round(t/a);for(l*a<e&&++l,u*a>t&&--u,s=new Array(o=u-l+1);++r<o;)s[r]=(l+r)*a}else{a=-a;let l=Math.round(e*a),u=Math.round(t*a);for(l/a<e&&++l,u/a>t&&--u,s=new Array(o=u-l+1);++r<o;)s[r]=(l+r)/a}return i&&s.reverse(),s}function yG(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=Ck?10:o>=Dk?5:o>=Sk?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=Ck?10:o>=Dk?5:o>=Sk?2:1)}function rh(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=Ck?r*=10:o>=Dk?r*=5:o>=Sk&&(r*=2),t<e?-r:r}var EG,fCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function j0(e){if(!(t=fCe.exec(e)))throw new Error("invalid format: "+e);var t;return new Tk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Tk(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function tD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function B0(e){return(e=tD(Math.abs(e)))?e[1]:NaN}function vG(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(B0(t)/3)))-B0(Math.abs(e)))}function bG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,B0(t)-B0(e))+1}function wG(e){return Math.max(0,-B0(Math.abs(e)))}function CG(e,t){var n=tD(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}j0.prototype=Tk.prototype,Tk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const DG={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function hCe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CG(100*e,t),r:CG,s:function _Ce(e,t){var n=tD(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(EG=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+tD(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function SG(e){return e}var nD,iD,Ak,xG=Array.prototype.map,TG=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function AG(e){var t=void 0===e.grouping||void 0===e.thousands?SG:function pCe(e,t){return function(n,i){for(var r=n.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}(xG.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?SG:function gCe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}(xG.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",a=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function u(d){var f=(d=j0(d)).fill,h=d.align,p=d.sign,m=d.symbol,_=d.zero,b=d.width,v=d.comma,D=d.precision,A=d.trim,I=d.type;"n"===I?(v=!0,I="g"):DG[I]||(void 0===D&&(D=12),A=!0,I="g"),(_||"0"===f&&"="===h)&&(_=!0,f="0",h="=");var L="$"===m?n:"#"===m&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",k="$"===m?i:/[%p]/.test(I)?s:"",B=DG[I],q=/[defgprs%]/.test(I);function W(X){var Se,ie,te,oe=L,ae=k;if("c"===I)ae=B(X)+ae,X="";else{var de=(X=+X)<0||1/X<0;if(X=isNaN(X)?l:B(Math.abs(X),D),A&&(X=function mCe(e){e:for(var r,t=e.length,n=1,i=-1;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":0===i&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(r+1):e}(X)),de&&0==+X&&"+"!==p&&(de=!1),oe=(de?"("===p?p:a:"-"===p||"("===p?"":p)+oe,ae=("s"===I?TG[8+EG/3]:"")+ae+(de&&"("===p?")":""),q)for(Se=-1,ie=X.length;++Se<ie;)if(48>(te=X.charCodeAt(Se))||te>57){ae=(46===te?r+X.slice(Se+1):X.slice(Se))+ae,X=X.slice(0,Se);break}}v&&!_&&(X=t(X,1/0));var pe=oe.length+X.length+ae.length,Re=pe<b?new Array(b-pe+1).join(f):"";switch(v&&_&&(X=t(Re+X,Re.length?b-ae.length:1/0),Re=""),h){case"<":X=oe+X+ae+Re;break;case"=":X=oe+Re+X+ae;break;case"^":X=Re.slice(0,pe=Re.length>>1)+oe+X+ae+Re.slice(pe);break;default:X=Re+oe+X+ae}return o(X)}return D=void 0===D?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D)),W.toString=function(){return d+""},W}return{format:u,formatPrefix:function c(d,f){var h=u(((d=j0(d)).type="f",d)),p=3*Math.max(-8,Math.min(8,Math.floor(B0(f)/3))),m=Math.pow(10,-p),_=TG[8+p/3];return function(b){return h(m*b)+_}}}}!function yCe(e){nD=AG(e),iD=nD.format,Ak=nD.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var Ok=new Date,Nk=new Date;function po(e,t,n,i){function r(o){return e(o=0===arguments.length?new Date:new Date(+o)),o}return r.floor=function(o){return e(o=new Date(+o)),o},r.ceil=function(o){return e(o=new Date(o-1)),t(o,1),e(o),o},r.round=function(o){var s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=function(o,s){return t(o=new Date(+o),null==s?1:Math.floor(s)),o},r.range=function(o,s,a){var u,l=[];if(o=r.ceil(o),a=null==a?1:Math.floor(a),!(o<s&&a>0))return l;do{l.push(u=new Date(+o)),t(o,a),e(o)}while(u<o&&o<s);return l},r.filter=function(o){return po(function(s){if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},function(s,a){if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););})},n&&(r.count=function(o,s){return Ok.setTime(+o),Nk.setTime(+s),e(Ok),e(Nk),Math.floor(n(Ok,Nk))},r.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?r.filter(i?function(s){return i(s)%o==0}:function(s){return r.count(0,s)%o==0}):r:null}),r}const Ud=1e3,wl=6e4,zd=60*wl,Jp=24*zd,Mk=7*Jp,OG=30*Jp,kk=365*Jp;var NG=po(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wl)/Jp,e=>e.getDate()-1);const oh=NG;function Qp(e){return po(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wl)/Mk})}var $0=Qp(0),rD=Qp(1),V0=(Qp(2),Qp(3),Qp(4)),MG=(Qp(5),Qp(6),po(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Jp},function(e){return e.getUTCDate()-1}));const sh=MG;function Zp(e){return po(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/Mk})}var H0=Zp(0),oD=Zp(1),U0=(Zp(2),Zp(3),Zp(4)),Ik=(Zp(5),Zp(6),po(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}));Ik.every=function(e){return isFinite(e=Math.floor(e))&&e>0?po(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};const ah=Ik;var kG=po(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()});const sD=kG;var IG=po(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ud-e.getMinutes()*wl)},function(e,t){e.setTime(+e+t*zd)},function(e,t){return(t-e)/zd},function(e){return e.getHours()});const Rk=IG;var RG=po(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ud)},function(e,t){e.setTime(+e+t*wl)},function(e,t){return(t-e)/wl},function(e){return e.getMinutes()});const Pk=RG;var PG=po(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Ud)},function(e,t){return(t-e)/Ud},function(e){return e.getUTCSeconds()});const lh=PG;var aD=po(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});aD.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?po(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):aD:null};const Fk=aD;var Lk=po(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Lk.every=function(e){return isFinite(e=Math.floor(e))&&e>0?po(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};const uh=Lk;var FG=po(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()});const lD=FG;var LG=po(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*zd)},function(e,t){return(t-e)/zd},function(e){return e.getUTCHours()});const jk=LG;var jG=po(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*wl)},function(e,t){return(t-e)/wl},function(e){return e.getUTCMinutes()});const Bk=jG;function z0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function a1(e){let t=e,n=e;function i(s,a,l,u){for(null==l&&(l=0),null==u&&(u=s.length);l<u;){const c=l+u>>>1;n(s[c],a)<0?l=c+1:u=c}return l}return 1===e.length&&(t=(s,a)=>e(s)-a,n=function TCe(e){return(t,n)=>z0(e(t),n)}(e)),{left:i,center:function o(s,a,l,u){null==l&&(l=0),null==u&&(u=s.length);const c=i(s,a,l,u-1);return c>l&&t(s[c-1],a)>-t(s[c],a)?c-1:c},right:function r(s,a,l,u){for(null==l&&(l=0),null==u&&(u=s.length);l<u;){const c=l+u>>>1;n(s[c],a)>0?u=c:l=c+1}return l}}}const Io="year",pa="quarter",is="month",Qr="week",ga="date",rs="day",_c="dayofyear",Ua="hours",za="minutes",El="seconds",pu="milliseconds",$k=[Io,pa,is,Qr,ga,rs,_c,Ua,za,El,pu],Vk=$k.reduce((e,t,n)=>(e[t]=1+n,e),{});function Hk(e){const t=Ze(e).slice(),n={};return t.length||be("Missing time unit."),t.forEach(r=>{gt(Vk,r)?n[r]=1:be("Invalid time unit: ".concat(r,"."))}),(n[Qr]||n[rs]?1:0)+(n[pa]||n[is]||n[ga]?1:0)+(n[_c]?1:0)>1&&be("Incompatible time units: ".concat(e)),t.sort((r,o)=>Vk[r]-Vk[o]),t}const ACe={[Io]:"%Y ",[pa]:"Q%q ",[is]:"%b ",[ga]:"%d ",[Qr]:"W%U ",[rs]:"%a ",[_c]:"%j ",[Ua]:"%H:00",[za]:"00:%M",[El]:":%S",[pu]:".%L",["".concat(Io,"-").concat(is)]:"%Y-%m ",["".concat(Io,"-").concat(is,"-").concat(ga)]:"%Y-%m-%d ",["".concat(Ua,"-").concat(za)]:"%H:%M"};function BG(e,t){const n=an({},ACe,t),i=Hk(e),r=i.length;let a,l,o="",s=0;for(s=0;s<r;)for(a=i.length;a>s;--a)if(l=i.slice(s,a).join("-"),null!=n[l]){o+=n[l],s=a;break}return o.trim()}const eg=new Date;function Uk(e){return eg.setFullYear(e),eg.setMonth(0),eg.setDate(1),eg.setHours(0,0,0,0),eg}function $G(e){return HG(new Date(e))}function VG(e){return zk(new Date(e))}function HG(e){return oh.count(Uk(e.getFullYear())-1,e)}function zk(e){return $0.count(Uk(e.getFullYear())-1,e)}function Gk(e){return Uk(e).getDay()}function OCe(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,i,r,o,s);return a.setFullYear(e),a}return new Date(e,t,n,i,r,o,s)}function UG(e){return GG(new Date(e))}function zG(e){return Wk(new Date(e))}function GG(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return sh.count(t-1,e)}function Wk(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return H0.count(t-1,e)}function qk(e){return eg.setTime(Date.UTC(e,0,1)),eg.getUTCDay()}function NCe(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,i,r,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,i,r,o,s))}function WG(e,t,n,i,r){const o=t||1,s=On(e),a=(b,v,D)=>function MCe(e,t,n,i){const r=n<=1?e:i?(o,s)=>i+n*Math.floor((e(o,s)-i)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(r(o,s),s):r}(n[D=D||b],i[D],b===s&&o,v),l=new Date,u=hu(e),c=u[Io]?a(Io):ns(2012),d=u[is]?a(is):u[pa]?a(pa):Zf,f=u[Qr]&&u[rs]?a(rs,1,Qr+rs):u[Qr]?a(Qr,1):u[rs]?a(rs,1):u[ga]?a(ga,1):u[_c]?a(_c,1):I0,h=u[Ua]?a(Ua):Zf,p=u[za]?a(za):Zf,m=u[El]?a(El):Zf,_=u[pu]?a(pu):Zf;return function(b){l.setTime(+b);const v=c(l);return r(v,d(l),f(l,v),h(l),p(l),m(l),_(l))}}function G0(e,t,n){return t+7*e-(n+6)%7}const kCe={[Io]:e=>e.getFullYear(),[pa]:e=>Math.floor(e.getMonth()/3),[is]:e=>e.getMonth(),[ga]:e=>e.getDate(),[Ua]:e=>e.getHours(),[za]:e=>e.getMinutes(),[El]:e=>e.getSeconds(),[pu]:e=>e.getMilliseconds(),[_c]:e=>HG(e),[Qr]:e=>zk(e),[Qr+rs]:(e,t)=>G0(zk(e),e.getDay(),Gk(t)),[rs]:(e,t)=>G0(1,e.getDay(),Gk(t))},ICe={[pa]:e=>3*e,[Qr]:(e,t)=>G0(e,0,Gk(t))};function qG(e,t){return WG(e,t||1,kCe,ICe,OCe)}const RCe={[Io]:e=>e.getUTCFullYear(),[pa]:e=>Math.floor(e.getUTCMonth()/3),[is]:e=>e.getUTCMonth(),[ga]:e=>e.getUTCDate(),[Ua]:e=>e.getUTCHours(),[za]:e=>e.getUTCMinutes(),[El]:e=>e.getUTCSeconds(),[pu]:e=>e.getUTCMilliseconds(),[_c]:e=>GG(e),[Qr]:e=>Wk(e),[rs]:(e,t)=>G0(1,e.getUTCDay(),qk(t)),[Qr+rs]:(e,t)=>G0(Wk(e),e.getUTCDay(),qk(t))},PCe={[pa]:e=>3*e,[Qr]:(e,t)=>G0(e,0,qk(t))};function YG(e,t){return WG(e,t||1,RCe,PCe,NCe)}const FCe={[Io]:ah,[pa]:sD.every(3),[is]:sD,[Qr]:$0,[ga]:oh,[rs]:oh,[_c]:oh,[Ua]:Rk,[za]:Pk,[El]:lh,[pu]:Fk},LCe={[Io]:uh,[pa]:lD.every(3),[is]:lD,[Qr]:H0,[ga]:sh,[rs]:sh,[_c]:sh,[Ua]:jk,[za]:Bk,[El]:lh,[pu]:Fk};function W0(e){return FCe[e]}function q0(e){return LCe[e]}function KG(e,t,n){return e?e.offset(t,n):void 0}function XG(e,t,n){return KG(W0(e),t,n)}function JG(e,t,n){return KG(q0(e),t,n)}function QG(e,t,n,i){return e?e.range(t,n,i):void 0}function ZG(e,t,n,i){return QG(W0(e),t,n,i)}function eW(e,t,n,i){return QG(q0(e),t,n,i)}const u1=6e4,c1=60*u1,uD=24*c1,tW=30*uD,Yk=365*uD,nW=[Io,is,ga,Ua,za,El,pu],d1=nW.slice(0,-1),f1=d1.slice(0,-1),h1=f1.slice(0,-1),BCe=h1.slice(0,-1),iW=[Io,is],rW=[Io],p1=[[d1,1,1e3],[d1,5,5e3],[d1,15,15e3],[d1,30,3e4],[f1,1,u1],[f1,5,5*u1],[f1,15,15*u1],[f1,30,30*u1],[h1,1,c1],[h1,3,3*c1],[h1,6,6*c1],[h1,12,12*c1],[BCe,1,uD],[[Io,Qr],1,6048e5],[iW,1,tW],[iW,3,3*tW],[rW,1,Yk]];function oW(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(o1(t))/n;let o,s,r=a1(a=>a[2]).right(p1,i);return r===p1.length?(o=rW,s=rh(t[0]/Yk,t[1]/Yk,n)):r?(r=p1[i/p1[r-1][2]<p1[r][2]/i?r-1:r],o=r[0],s=r[1]):(o=nW,s=Math.max(rh(t[0],t[1],n),1)),{units:o,step:s}}function Kk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Xk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function g1(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sW(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=m1(r),c=_1(r),d=m1(o),f=_1(o),h=m1(s),p=_1(s),m=m1(a),_=_1(a),b=m1(l),v=_1(l),D={a:function de(qe){return s[qe.getDay()]},A:function pe(qe){return o[qe.getDay()]},b:function Re(qe){return l[qe.getMonth()]},B:function rt(qe){return a[qe.getMonth()]},c:null,d:fW,e:fW,f:uDe,g:vDe,G:wDe,H:sDe,I:aDe,j:lDe,L:hW,m:cDe,M:dDe,p:function Xt(qe){return r[+(qe.getHours()>=12)]},q:function $t(qe){return 1+~~(qe.getMonth()/3)},Q:vW,s:bW,S:fDe,u:hDe,U:pDe,V:gDe,w:mDe,W:_De,x:null,X:null,y:yDe,Y:bDe,Z:EDe,"%":yW},A={a:function Zn(qe){return s[qe.getUTCDay()]},A:function kt(qe){return o[qe.getUTCDay()]},b:function qi(qe){return l[qe.getUTCMonth()]},B:function Ho(qe){return a[qe.getUTCMonth()]},c:null,d:gW,e:gW,f:xDe,g:FDe,G:jDe,H:CDe,I:DDe,j:SDe,L:mW,m:TDe,M:ADe,p:function Oi(qe){return r[+(qe.getUTCHours()>=12)]},q:function ro(qe){return 1+~~(qe.getUTCMonth()/3)},Q:vW,s:bW,S:ODe,u:NDe,U:MDe,V:kDe,w:IDe,W:RDe,x:null,X:null,y:PDe,Y:LDe,Z:BDe,"%":yW},I={a:function W(qe,Et,Zt){var Ie=h.exec(Et.slice(Zt));return Ie?(qe.w=p.get(Ie[0].toLowerCase()),Zt+Ie[0].length):-1},A:function X(qe,Et,Zt){var Ie=d.exec(Et.slice(Zt));return Ie?(qe.w=f.get(Ie[0].toLowerCase()),Zt+Ie[0].length):-1},b:function oe(qe,Et,Zt){var Ie=b.exec(Et.slice(Zt));return Ie?(qe.m=v.get(Ie[0].toLowerCase()),Zt+Ie[0].length):-1},B:function ae(qe,Et,Zt){var Ie=m.exec(Et.slice(Zt));return Ie?(qe.m=_.get(Ie[0].toLowerCase()),Zt+Ie[0].length):-1},c:function Se(qe,Et,Zt){return B(qe,t,Et,Zt)},d:cW,e:cW,f:nDe,g:uW,G:lW,H:dW,I:dW,j:QCe,L:tDe,m:JCe,M:ZCe,p:function q(qe,Et,Zt){var Ie=u.exec(Et.slice(Zt));return Ie?(qe.p=c.get(Ie[0].toLowerCase()),Zt+Ie[0].length):-1},q:XCe,Q:rDe,s:oDe,S:eDe,u:GCe,U:WCe,V:qCe,w:zCe,W:YCe,x:function ie(qe,Et,Zt){return B(qe,n,Et,Zt)},X:function te(qe,Et,Zt){return B(qe,i,Et,Zt)},y:uW,Y:lW,Z:KCe,"%":iDe};function L(qe,Et){return function(Zt){var mr,rd,Cf,Ie=[],Hr=-1,kn=0,xr=qe.length;for(Zt instanceof Date||(Zt=new Date(+Zt));++Hr<xr;)37===qe.charCodeAt(Hr)&&(Ie.push(qe.slice(kn,Hr)),null!=(rd=aW[mr=qe.charAt(++Hr)])?mr=qe.charAt(++Hr):rd="e"===mr?" ":"0",(Cf=Et[mr])&&(mr=Cf(Zt,rd)),Ie.push(mr),kn=Hr+1);return Ie.push(qe.slice(kn,Hr)),Ie.join("")}}function k(qe,Et){return function(Zt){var kn,xr,Ie=g1(1900,void 0,1);if(B(Ie,qe,Zt+="",0)!=Zt.length)return null;if("Q"in Ie)return new Date(Ie.Q);if("s"in Ie)return new Date(1e3*Ie.s+("L"in Ie?Ie.L:0));if(Et&&!("Z"in Ie)&&(Ie.Z=0),"p"in Ie&&(Ie.H=Ie.H%12+12*Ie.p),void 0===Ie.m&&(Ie.m="q"in Ie?Ie.q:0),"V"in Ie){if(Ie.V<1||Ie.V>53)return null;"w"in Ie||(Ie.w=1),"Z"in Ie?(xr=(kn=Xk(g1(Ie.y,0,1))).getUTCDay(),kn=xr>4||0===xr?oD.ceil(kn):oD(kn),kn=sh.offset(kn,7*(Ie.V-1)),Ie.y=kn.getUTCFullYear(),Ie.m=kn.getUTCMonth(),Ie.d=kn.getUTCDate()+(Ie.w+6)%7):(xr=(kn=Kk(g1(Ie.y,0,1))).getDay(),kn=xr>4||0===xr?rD.ceil(kn):rD(kn),kn=oh.offset(kn,7*(Ie.V-1)),Ie.y=kn.getFullYear(),Ie.m=kn.getMonth(),Ie.d=kn.getDate()+(Ie.w+6)%7)}else("W"in Ie||"U"in Ie)&&("w"in Ie||(Ie.w="u"in Ie?Ie.u%7:"W"in Ie?1:0),xr="Z"in Ie?Xk(g1(Ie.y,0,1)).getUTCDay():Kk(g1(Ie.y,0,1)).getDay(),Ie.m=0,Ie.d="W"in Ie?(Ie.w+6)%7+7*Ie.W-(xr+5)%7:Ie.w+7*Ie.U-(xr+6)%7);return"Z"in Ie?(Ie.H+=Ie.Z/100|0,Ie.M+=Ie.Z%100,Xk(Ie)):Kk(Ie)}}function B(qe,Et,Zt,Ie){for(var mr,rd,Hr=0,kn=Et.length,xr=Zt.length;Hr<kn;){if(Ie>=xr)return-1;if(37===(mr=Et.charCodeAt(Hr++))){if(mr=Et.charAt(Hr++),!(rd=I[mr in aW?Et.charAt(Hr++):mr])||(Ie=rd(qe,Zt,Ie))<0)return-1}else if(mr!=Zt.charCodeAt(Ie++))return-1}return Ie}return D.x=L(n,D),D.X=L(i,D),D.c=L(t,D),A.x=L(n,A),A.X=L(i,A),A.c=L(t,A),{format:function(qe){var Et=L(qe+="",D);return Et.toString=function(){return qe},Et},parse:function(qe){var Et=k(qe+="",!1);return Et.toString=function(){return qe},Et},utcFormat:function(qe){var Et=L(qe+="",A);return Et.toString=function(){return qe},Et},utcParse:function(qe){var Et=k(qe+="",!0);return Et.toString=function(){return qe},Et}}}var Y0,Jk,wW,Qk,EW,aW={"-":"",_:" ",0:"0"},go=/^\s*\d+/,VCe=/^%/,HCe=/[\\^$*+?|[\]().{}]/g;function zn(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function UCe(e){return e.replace(HCe,"\\$&")}function m1(e){return new RegExp("^(?:"+e.map(UCe).join("|")+")","i")}function _1(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function zCe(e,t,n){var i=go.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function GCe(e,t,n){var i=go.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function WCe(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function qCe(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function YCe(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function lW(e,t,n){var i=go.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function uW(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function KCe(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function XCe(e,t,n){var i=go.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function JCe(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function cW(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function QCe(e,t,n){var i=go.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function dW(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function ZCe(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function eDe(e,t,n){var i=go.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function tDe(e,t,n){var i=go.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function nDe(e,t,n){var i=go.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function iDe(e,t,n){var i=VCe.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function rDe(e,t,n){var i=go.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function oDe(e,t,n){var i=go.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function fW(e,t){return zn(e.getDate(),t,2)}function sDe(e,t){return zn(e.getHours(),t,2)}function aDe(e,t){return zn(e.getHours()%12||12,t,2)}function lDe(e,t){return zn(1+oh.count(ah(e),e),t,3)}function hW(e,t){return zn(e.getMilliseconds(),t,3)}function uDe(e,t){return hW(e,t)+"000"}function cDe(e,t){return zn(e.getMonth()+1,t,2)}function dDe(e,t){return zn(e.getMinutes(),t,2)}function fDe(e,t){return zn(e.getSeconds(),t,2)}function hDe(e){var t=e.getDay();return 0===t?7:t}function pDe(e,t){return zn($0.count(ah(e)-1,e),t,2)}function pW(e){var t=e.getDay();return t>=4||0===t?V0(e):V0.ceil(e)}function gDe(e,t){return e=pW(e),zn(V0.count(ah(e),e)+(4===ah(e).getDay()),t,2)}function mDe(e){return e.getDay()}function _De(e,t){return zn(rD.count(ah(e)-1,e),t,2)}function yDe(e,t){return zn(e.getFullYear()%100,t,2)}function vDe(e,t){return zn((e=pW(e)).getFullYear()%100,t,2)}function bDe(e,t){return zn(e.getFullYear()%1e4,t,4)}function wDe(e,t){var n=e.getDay();return zn((e=n>=4||0===n?V0(e):V0.ceil(e)).getFullYear()%1e4,t,4)}function EDe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zn(t/60|0,"0",2)+zn(t%60,"0",2)}function gW(e,t){return zn(e.getUTCDate(),t,2)}function CDe(e,t){return zn(e.getUTCHours(),t,2)}function DDe(e,t){return zn(e.getUTCHours()%12||12,t,2)}function SDe(e,t){return zn(1+sh.count(uh(e),e),t,3)}function mW(e,t){return zn(e.getUTCMilliseconds(),t,3)}function xDe(e,t){return mW(e,t)+"000"}function TDe(e,t){return zn(e.getUTCMonth()+1,t,2)}function ADe(e,t){return zn(e.getUTCMinutes(),t,2)}function ODe(e,t){return zn(e.getUTCSeconds(),t,2)}function NDe(e){var t=e.getUTCDay();return 0===t?7:t}function MDe(e,t){return zn(H0.count(uh(e)-1,e),t,2)}function _W(e){var t=e.getUTCDay();return t>=4||0===t?U0(e):U0.ceil(e)}function kDe(e,t){return e=_W(e),zn(U0.count(uh(e),e)+(4===uh(e).getUTCDay()),t,2)}function IDe(e){return e.getUTCDay()}function RDe(e,t){return zn(oD.count(uh(e)-1,e),t,2)}function PDe(e,t){return zn(e.getUTCFullYear()%100,t,2)}function FDe(e,t){return zn((e=_W(e)).getUTCFullYear()%100,t,2)}function LDe(e,t){return zn(e.getUTCFullYear()%1e4,t,4)}function jDe(e,t){var n=e.getUTCDay();return zn((e=n>=4||0===n?U0(e):U0.ceil(e)).getUTCFullYear()%1e4,t,4)}function BDe(){return"+0000"}function yW(){return"%"}function vW(e){return+e}function bW(e){return Math.floor(+e/1e3)}function y1(e){const t={};return n=>t[n]||(t[n]=e(n))}function CW(e){const t=y1(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=j0(i||",");if(null==r.precision){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1}return function VDe(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let o=function HDe(e,t){let i,n=e.lastIndexOf("e");if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}(i,r);const s=o<i.length?i.slice(o):"";for(;--o>r;)if("0"!==i[o]){++o;break}return i.slice(0,o)+s}}(t(r),t(".1f")(1)[1])}return t(r)},formatSpan(i,r,o,s){s=j0(null==s?",f":s);const a=rh(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let u;if(null==s.precision)switch(s.type){case"s":return isNaN(u=vG(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":isNaN(u=bG(a,l))||(s.precision=u-("e"===s.type));break;case"f":case"%":isNaN(u=wG(a))||(s.precision=u-2*("%"===s.type))}return t(s)}}}let Zk,eI;function DW(){return Zk=CW({format:iD,formatPrefix:Ak})}function SW(e){return CW(AG(e))}function cD(e){return arguments.length?Zk=SW(e):Zk}function xW(e,t,n){it(n=n||{})||be("Invalid time multi-format specifier: ".concat(n));const i=t(El),r=t(za),o=t(Ua),s=t(ga),a=t(Qr),l=t(is),u=t(pa),c=t(Io),d=e(n[pu]||".%L"),f=e(n[El]||":%S"),h=e(n[za]||"%I:%M"),p=e(n[Ua]||"%I %p"),m=e(n[ga]||n[rs]||"%a %d"),_=e(n[Qr]||"%b %d"),b=e(n[is]||"%B"),v=e(n[pa]||"%B"),D=e(n[Io]||"%Y");return A=>(i(A)<A?d:r(A)<A?f:o(A)<A?h:s(A)<A?p:l(A)<A?a(A)<A?m:_:c(A)<A?u(A)<A?b:v:D)(A)}function TW(e){const t=y1(e.format),n=y1(e.utcFormat);return{timeFormat:i=>Qe(i)?t(i):xW(t,W0,i),utcFormat:i=>Qe(i)?n(i):xW(n,q0,i),timeParse:y1(e.parse),utcParse:y1(e.utcParse)}}function AW(){return eI=TW({format:Jk,parse:wW,utcFormat:Qk,utcParse:EW})}function OW(e){return TW(sW(e))}function v1(e){return arguments.length?eI=OW(e):eI}!function $De(e){Y0=sW(e),Jk=Y0.format,wW=Y0.parse,Qk=Y0.utcFormat,EW=Y0.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),DW(),AW();const tI=(e,t)=>an({},e,t);function NW(e,t){const n=e?SW(e):cD(),i=t?OW(t):v1();return tI(n,i)}function nI(e,t){const n=arguments.length;return n&&2!==n&&be("defaultLocale expects either zero or two arguments."),n?tI(cD(e),v1(t)):tI(cD(),v1())}function UDe(){return DW(),AW(),nI()}const zDe=/^(data:|([A-Za-z]+:)?\/\/)/,GDe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,WDe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,MW="file://";function YDe(e,t){return iI.apply(this,arguments)}function iI(){return iI=js(function*(e,t){const n=yield this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}),iI.apply(this,arguments)}function KDe(e,t){return rI.apply(this,arguments)}function rI(){return rI=js(function*(e,t){t=an({},this.options,t);const n=this.fileAccess,i={href:null};let r,o,s;const a=GDe.test(e.replace(WDe,""));(null==e||"string"!=typeof e||!a)&&be("Sanitize failure, invalid URI: "+Be(e));const l=zDe.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(r=e.startsWith(MW))||"file"===t.mode||"http"!==t.mode&&!l&&n,r?e=e.slice(MW.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}),rI.apply(this,arguments)}function XDe(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,o)=>{r?i(r):n(o)})}):JDe}function JDe(){return oI.apply(this,arguments)}function oI(){return(oI=js(function*(){be("No file system access.")})).apply(this,arguments)}function QDe(e){return e?function(){var t=js(function*(n,i){const r=an({},this.options.http,i),o=i&&i.response,s=yield e(n,r);return s.ok?sn(s[o])?s[o]():s.text():be(s.status+""+s.statusText)});return function(n,i){return t.apply(this,arguments)}}():ZDe}function ZDe(){return sI.apply(this,arguments)}function sI(){return(sI=js(function*(){be("No HTTP fetch method available.")})).apply(this,arguments)}const eSe=e=>null!=e&&e==e,kW=e=>!(Number.isNaN(+e)||e instanceof Date),aI={boolean:_k,integer:ts,number:ts,date:yk,string:vk,unknown:es},dD=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>kW(e)&&Number.isInteger(+e),kW,e=>!Number.isNaN(Date.parse(e))],rSe=["boolean","integer","number","date"];function IW(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=dD.length,r=dD.map((o,s)=>s+1);for(let a,l,o=0,s=0;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<i;++a)if(r[a]&&eSe(l)&&!dD[a](l)&&(r[a]=0,++s,s===dD.length))return"string";return rSe[r.reduce((o,s)=>0===o?s:o,0)-1]}function RW(e,t){return t.reduce((n,i)=>(n[i]=IW(e,i),n),{})}function PW(e){const t=function(n,i){const r={delimiter:e};return lI(n,i?an(i,r):r)};return t.responseType="text",t}function lI(e,t){return t.header&&(e=t.header.map(Be).join(t.delimiter)+"\n"+e),iCe(t.delimiter).parse(e+"")}function uI(e,t){const n=t&&t.property?fa(t.property):es;return it(e)&&!function oSe(e){return!("function"!=typeof Buffer||!sn(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function sSe(e,t){return!Ce(e)&&oG(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t):n(JSON.parse(e))}lI.responseType="text",uI.responseType="json";const aSe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function FW(e,t){let n,i,r,o;return e=uI(e,t),t&&t.feature?(n=aCe,r=t.feature):t&&t.mesh?(n=uCe,r=t.mesh,o=aSe[t.filter]):be("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,o):be("Invalid TopoJSON object: "+r),i&&i.features||[i]}FW.responseType="json";const fD={dsv:lI,csv:PW(","),tsv:PW("\t"),json:uI,topojson:FW};function cI(e,t){return arguments.length>1?(fD[e]=t,this):gt(fD,e)?fD[e]:null}function LW(e){const t=cI(e);return t&&t.responseType||"text"}function jW(e,t,n,i){const r=cI((t=t||{}).type||"json");return r||be("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function lSe(e,t,n,i){if(!e.length)return;const r=v1();n=n||r.timeParse,i=i||r.utcParse;let s,a,l,u,c,d,o=e.columns||Object.keys(e[0]);"auto"===t&&(t=RW(e,o)),o=Object.keys(t);const f=o.map(h=>{const p=t[h];let m,_;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),_=m[1],("'"===_[0]&&"'"===_[_.length-1]||'"'===_[0]&&'"'===_[_.length-1])&&(_=_.slice(1,-1)),("utc"===m[0]?i:n)(_);if(!aI[p])throw Error("Illegal format pattern: "+h+":"+p);return aI[p]});for(l=0,c=e.length,d=o.length;l<c;++l)for(s=e[l],u=0;u<d;++u)a=o[u],s[a]=f[u](s[a])}(e,t.parse,n,i),gt(e,"columns")&&delete e.columns,e}const hD=function qDe(e,t){return n=>({options:n||{},sanitize:KDe,load:YDe,fileAccess:!!t,file:XDe(t),http:QDe(e)})}("undefined"!=typeof fetch&&fetch,null);function pD(e){const t=e||es,n=[],i={};return n.add=r=>{const o=t(r);return i[o]||(i[o]=1,n.push(r)),n},n.remove=r=>{const o=t(r);if(i[o]){i[o]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}function gD(e,t){return dI.apply(this,arguments)}function dI(){return dI=js(function*(e,t){try{yield t(e)}catch(n){e.error(n)}}),dI.apply(this,arguments)}const BW=Symbol("vega_id");let uSe=1;function mD(e){return!(!e||!bt(e))}function bt(e){return e[BW]}function $W(e,t){return e[BW]=t,e}function Qn(e){const t=e===Object(e)?e:{data:e};return bt(t)?t:$W(t,uSe++)}function fI(e){return _D(e,Qn({}))}function _D(e,t){for(const n in e)t[n]=e[n];return t}function VW(e,t){return $W(t,bt(e))}function tg(e,t){return e?t?(n,i)=>e(n,i)||bt(t(n))-bt(t(i)):(n,i)=>e(n,i)||bt(n)-bt(i):null}function HW(e){return e&&e.constructor===ng}function ng(){const e=[],t=[],n=[],i=[],r=[];let o=null,s=!1;return{constructor:ng,insert(a){const l=Ze(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=sn(a)?i:t,u=Ze(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:ns(u)};return sn(a)?(c.filter=a,r.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return sn(a)?r.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,m,_;for(d=0,f=l.length;d<f;++d)u[bt(l[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],u[bt(m)]=-1;for(d=0,f=i.length;d<f;++d)p=i[d],l.forEach(v=>{p(v)&&(u[bt(v)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],_=bt(m),u[_]?u[_]=1:a.add.push(Qn(e[d]));for(d=0,f=l.length;d<f;++d)m=l[d],u[bt(m)]<0&&a.rem.push(m);function b(v,D,A){A?v[D]=A(v):a.encode=D,s||(c[bt(v)]=v)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,_=u[bt(m)],_>0&&(b(m,p,h.value),a.modifies(p));for(d=0,f=r.length;d<f;++d)h=r[d],p=h.filter,l.forEach(v=>{p(v)&&u[bt(v)]>0&&b(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||i.length?l.filter(v=>u[bt(v)]>0):l.slice();else for(_ in c)a.mod.push(c[_]);return(o||null==o&&(t.length||i.length))&&a.clean(!0),a}}}const yD="_:mod:_";function vD(){Object.defineProperty(this,yD,{writable:!0,value:{}})}vD.prototype={set(e,t,n,i){const r=this,o=r[e],s=r[yD];return null!=t&&t>=0?(o[t]!==n||i)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||i)&&(r[e]=n,s[e]=Ce(n)?1+n.length:-1),r},modified(e,t){const n=this[yD];if(!arguments.length){for(const i in n)if(n[i])return!0;return!1}if(Ce(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[yD]={},this}};let cSe=0;const fSe=new vD;function Ti(e,t,n,i){this.id=++cSe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function UW(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ti.prototype={targets(){return this._targets||(this._targets=pD(i1))},set(e){return this.value!==e?(this.value=e,1):0},skip:UW(1),modified:UW(2),parameters(e,t,n){t=!1!==t;const i=this._argval=this._argval||new vD,r=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(d,f,h)=>{h instanceof Ti?(h!==this&&(t&&h.targets().add(this),o.push(h)),r.push({op:h,name:d,index:f})):i.set(d,f,h)};for(s in e)if(a=e[s],"pulse"===s)Ze(a).forEach(d=>{d instanceof Ti?d!==this&&(d.targets().add(this),o.push(d)):be("Pulse parameters must be operator instances.")}),this.source=a;else if(Ce(a))for(i.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),o},marshall(e){const t=this._argval||fSe,n=this._argops;let i,r,o,s;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],o=i.op,s=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,s);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let _Se=0;function bD(e,t,n){this.id=++_Se,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function ch(e,t,n){return new bD(e,t,n)}function hI(){return hI=js(function*(e,t){const n=this;let r,i=0;try{r=yield n.loader().load(e,{context:"dataflow",response:LW(t&&t.type)});try{r=n.parse(r,t)}catch(o){i=-2,n.warn("Data ingestion failed",e,o)}}catch(o){i=-1,n.warn("Loading failed",e,o)}return{data:r,status:i}}),hI.apply(this,arguments)}function pI(){return pI=js(function*(e,t,n){const i=this,r=i._pending||CSe(i);r.requests+=1;const o=yield i.request(t,n);return i.pulse(e,i.changeset().remove(bl).insert(o.data||[])),r.done(),o}),pI.apply(this,arguments)}function CSe(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}bD.prototype={_filter:bl,_apply:es,targets(){return this._targets||(this._targets=pD(i1))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=ch(e);return this.targets().add(t),t},apply(e){const t=ch(null,e);return this.targets().add(t),t},merge(){const e=ch();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=ch();return this.targets().add(ch(null,null,gk(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(ch(null,null,()=>n=!0)),t.targets().add(ch(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=bl,this._targets=null}};const DSe={skip:!0};function xSe(e,t,n,i,r,o){const s=an({},o,DSe);let a,l;sn(n)||(n=ns(n)),void 0===i?a=u=>e.touch(n(u)):sn(i)?(l=new Ti(null,i,r,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;HW(d)?e.pulse(c,d,o):e.update(c,d,s)}):a=u=>e.update(n(u),i,s),t.apply(a)}function TSe(e,t,n,i,r,o){if(void 0===i)t.targets().add(n);else{const s=o||{},a=new Ti(null,function ASe(e,t){return t=sn(t)?t:ns(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}(n,i),r,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}const wD={};function fh(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function gI(e,t){const n=[];return ih(e,t,i=>n.push(i)),n}function YW(e,t){const n={};return e.visit(t,i=>{n[bt(i)]=1}),i=>n[bt(i)]?null:i}function ED(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}function mI(e,t,n,i){const r=this,o=n.length;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(let a=0;a<o;++a){const l=n[a];if(l.stamp===t){if(l.fields){const u=r.fields||(r.fields={});for(const c in l.fields)u[c]=1}l.changed(r.ADD)&&(s|=r.ADD),l.changed(r.REM)&&(s|=r.REM),l.changed(r.MOD)&&(s|=r.MOD)}}this.changes=s}function _I(){return _I=js(function*(e,t,n){const i=this,r=[];if(i._pulse)return KW(i);if(i._pending&&(yield i._pending),t&&(yield gD(i,t)),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new fh(i,o,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=pD(i1);let a,l,u,s=0;try{for(;i._heap.size()>0;)a=i._heap.pop(),a.rank===a.qrank?(l=a.run(i._getPulse(a,e)),l.then?l=yield l:l.async&&(r.push(l.async),l=wD),l!==wD&&a._targets&&a._targets.forEach(c=>i._enqueue(c)),++s):i._enqueue(a,!0)}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${s} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((d,f)=>f.priority-d.priority);i._postrun=[];for(let d=0;d<c.length;++d)yield gD(i,c[d].callback)}return n&&(yield gD(i,n)),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(d=>{try{d(i)}catch(f){i.error(f)}})})),i}),_I.apply(this,arguments)}function yI(){return yI=js(function*(e,t,n){for(;this._running;)yield this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}),yI.apply(this,arguments)}function KW(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}fh.prototype={StopPropagation:wD,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new fh(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new fh(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(64&t)&&(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,YW(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ce(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?Ce(e)?e.some(i=>n[i]):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=ED(n.addF,t)),2&e&&(n.remF=ED(n.remF,t)),4&e&&(n.modF=ED(n.modF,t)),16&e&&(n.srcF=ED(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=gI(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=gI(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=gI(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(16&e)return ih(n.source,n.srcF,i),n;1&e&&ih(n.add,n.addF,i),2&e&&ih(n.rem,n.remF,i),4&e&&ih(n.mod,n.modF,i);const r=n.source;if(8&e&&r){const o=n.add.length+n.mod.length;o===r.length||ih(r,o?YW(n,5):n.srcF,i)}return n}},Fe(mI,fh,{fork(e){const t=new fh(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ce(e)?e.some(i=>n[i]):n[e]:0},filter(){be("MultiPulse does not support filtering.")},materialize(){be("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let o=0;if(e&n.SOURCE)for(;o<r;++o)i[o].visit(e,t);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(e,t);return n}});const vI={skip:!1,force:!1};function XW(e,t,n,i){let r,o;const s=e[n];for(;n>t&&(o=n-1>>1,r=e[o],i(s,r)<0);)e[n]=r,n=o;return e[n]=s}function X0(){this.logger(ck()),this.logLevel(lk),this._clock=0,this._rank=0,this._locale=nI();try{this._loader=hD()}catch(e){}this._touched=pD(i1),this._input={},this._pulse=null,this._heap=function HSe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),XW(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,function USe(e,t,n){const i=t,r=e.length,o=e[t];let a,s=1+(t<<1);for(;s<r;)a=s+1,a<r&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,XW(e,i,t,n)}(t,0,e)):i=n,i}}}((e,t)=>e.qrank-t.qrank),this._postrun=[]}function w1(e){return function(){return this._log[e].apply(this,arguments)}}function he(e,t){Ti.call(this,e,null,t)}X0.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:w1("error"),warn:w1("warn"),info:w1("info"),debug:w1("debug"),logLevel:w1("level"),cleanThreshold:1e4,add:function gSe(e,t,n,i){let o,r=1;return e instanceof Ti?o=e:e&&e.prototype instanceof Ti?o=new e:sn(e)?o=new Ti(null,e):(r=0,o=new Ti(e,t)),this.rank(o),r&&(i=n,n=t),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o},connect:function mSe(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank)return void this.rerank(e)},rank:function OSe(e){e.rank=++this._rank},rerank:function NSe(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&be("Cycle detected in dataflow graph.")},pulse:function VSe(e,t,n){this.touch(e,n||vI);const i=new fh(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this},touch:function BSe(e,t){const n=t||vI;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function $Se(e,t,n){const i=n||vI;return(e.set(t)||i.force)&&this.touch(e,i),this},changeset:ng,ingest:function bSe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function vSe(e,t){const n=this.locale();return jW(e,t,n.timeParse,n.utcParse)},preload:function ESe(e,t,n){return pI.apply(this,arguments)},request:function wSe(e,t){return hI.apply(this,arguments)},events:function ySe(e,t,n,i){const r=this,o=ch(n,i),s=function(u){u.dataflow=r;try{o.receive(u)}catch(c){r.error(c)}finally{r.run()}};let a;a="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):Ze(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o},on:function SSe(e,t,n,i,r){return(e instanceof Ti?TSe:xSe)(this,e,t,n,i,r),this},evaluate:function kSe(e,t,n){return _I.apply(this,arguments)},run:function RSe(e,t,n){return this._pulse?KW(this):(this.evaluate(e,t,n),this)},runAsync:function ISe(e,t,n){return yI.apply(this,arguments)},runAfter:function PSe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}},_enqueue:function FSe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function LSe(e,t){const n=e.source,i=this._clock;return n&&Ce(n)?new mI(this,i,n.map(r=>r.pulse),t):this._input[e.id]||function jSe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==wD&&(e.source=t.source),e)}(this._pulse,n&&n.pulse)}},Fe(he,Ti,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const J0={};function JW(e){const t=QW(e);return t&&t.Definition||null}function QW(e){return e=e&&e.toLowerCase(),gt(J0,e)?J0[e]:null}function ig(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function bI(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function ZW(e,t,n=0,i=e.length-1,r=z0){for(;i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1);ZW(e,t,Math.max(n,Math.floor(t-u*d/l+f)),Math.min(i,Math.floor(t+(l-u)*d/l+f)),r)}const o=e[t];let s=n,a=i;for(E1(e,n,t),r(e[i],o)>0&&E1(e,n,i);s<a;){for(E1(e,s,a),++s,--a;r(e[s],o)<0;)++s;for(;r(e[a],o)>0;)--a}0===r(e[n],o)?E1(e,n,a):(++a,E1(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function E1(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function eq(e){return null===e?NaN:+e}function wI(e,t,n){if(e=Float64Array.from(function*zSe(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i=+i)>=i&&(yield i)}}(e,n)),i=e.length){if((t=+t)<=0||i<2)return bI(e);if(t>=1)return ig(e);var i,r=(i-1)*t,o=Math.floor(r),s=ig(ZW(e,o).subarray(0,o+1));return s+(bI(e.subarray(o+1))-s)*(r-o)}}function tq(e,t,n=eq){if(i=e.length){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(r-o)}}function nq(e,t){return wI(e,.5,t)}function*iq(e,t){if(null==t)for(let n of e)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),null!=i&&""!==i&&(i=+i)>=i&&(yield i)}}function EI(e,t,n){const i=Float64Array.from(iq(e,n));return i.sort(z0),t.map(r=>tq(i,r))}function CI(e,t){return EI(e,[.25,.5,.75],t)}function DI(e,t){const n=e.length,i=function WSe(e,t){const n=function GSe(e,t){let i,n=0,r=0,o=0;if(void 0===t)for(let s of e)null!=s&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r));else{let s=-1;for(let a of e)null!=(a=t(a,++s,e))&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r))}if(n>1)return o/(n-1)}(e,t);return n&&Math.sqrt(n)}(e,t),r=CI(e,t);return 1.06*(Math.min(i,(r[2]-r[0])/1.34)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function rq(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a,l,u,c,d,f,o=e.extent[0],s=e.extent[1];const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/i)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=r.length;d<f;++d)c=a/r[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const m=Math.pow(n,-(c>=0?0:1+~~(-c/i))-1);return(e.nice||void 0===e.nice)&&(c=Math.floor(o/a+m)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Cl=Math.random;function qSe(e){Cl=e}function oq(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(iq(e,i)),o=r.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=r[~~(Cl()*o)];c[u]=a/o}return c.sort(z0),[wI(c,n/2),wI(c,1-n/2)]}function sq(e,t,n,i){i=i||(f=>f);const r=e.length,o=new Float64Array(r);let d,s=0,a=1,l=i(e[0]),u=l,c=l+t;for(;a<r;++a){if(d=i(e[a]),d>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?function YSe(e,t){const n=e.length;let o,s,i=0,r=1;for(;e[i]===e[r];)++r;for(;r<n;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<t){for(s=r+(i+o-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=o}return e}(o,t+t/4):o}function KSe(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function XSe(e,t){let n,i,r;null==t&&(t=e,e=0);const o={min(s){return arguments.length?(n=s||0,r=i-n,o):n},max(s){return arguments.length?(i=s||0,r=i-n,o):i},sample:()=>n+Math.floor(r*Cl()),pdf:s=>s===Math.floor(s)&&s>=n&&s<i?1/r:0,cdf(s){const a=Math.floor(s);return a<n?0:a>=i?1:(a-n+1)/r},icdf:s=>s>=0&&s<=1?n-1+Math.floor(s*r):NaN};return o.min(e).max(t)}const aq=Math.sqrt(2*Math.PI),JSe=Math.SQRT2;let C1=NaN;function CD(e,t){e=e||0,t=null==t?1:t;let r,o,n=0,i=0;if(C1==C1)n=C1,C1=NaN;else{do{n=2*Cl()-1,i=2*Cl()-1,r=n*n+i*i}while(0===r||r>1);o=Math.sqrt(-2*Math.log(r)/r),n*=o,C1=i*o}return e+n*t}function SI(e,t,n){const i=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*i*i)/(n*aq)}function DD(e,t,n){const i=(e-(t=t||0))/(n=null==n?1:n),r=Math.abs(i);let o;if(r>37)o=0;else{const s=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,o=s*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,o/=a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,o=s/a/2.506628274631)}return i>0?1-o:o}function SD(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*JSe*function QSe(e){let n,t=-Math.log((1-e)*(1+e));return t<6.25?(t-=3.125,n=-364441206401782e-35,n=n*t-16850591381820166e-35,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=n*t-1333171662854621e-31,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=n*t-4054566272975207e-29,n=n*t-8151934197605472e-29,n=26335093153082323e-28+n*t,n=n*t-12975133253453532e-27,n=n*t-5415412054294628e-26,n=1.0512122733215323e-9+n*t,n=n*t-4.112633980346984e-9,n=n*t-2.9070369957882005e-8,n=4.2347877827932404e-7+n*t,n=n*t-13654692000834679e-22,n=n*t-13882523362786469e-21,n=.00018673420803405714+n*t,n=n*t-.000740702534166267,n=n*t-.006033670871430149,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=2.2137376921775787e-9,n=9.075656193888539e-8+n*t,n=n*t-2.7517406297064545e-7,n=1.8239629214389228e-8+n*t,n=15027403968909828e-22+n*t,n=n*t-4013867526981546e-21,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=n*t-47318229009055734e-21,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=n*t-.0003550375203628475,n=.0009532893797373805+n*t,n=n*t-.0016882755560235047,n=.002491442096107851+n*t,n=n*t-.003751208507569241,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=n*t-2.555641816996525e-10,n=1.5076572693500548e-9+n*t,n=n*t-3.789465440126737e-9,n=7.61570120807834e-9+n*t,n=n*t-1.496002662714924e-8,n=2.914795345090108e-8+n*t,n=n*t-6.771199775845234e-8,n=2.2900482228026655e-7+n*t,n=n*t-9.9298272942317e-7,n=4526062597223154e-21+n*t,n=n*t-1968177810553167e-20,n=7599527703001776e-20+n*t,n=n*t-.00021503011930044477,n=n*t-.00013871931833623122,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}(2*e-1)}function xI(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=null==o?1:o,r):i},sample:()=>CD(n,i),pdf:o=>SI(o,n,i),cdf:o=>DD(o,n,i),icdf:o=>SD(o,n,i)};return r.mean(e).stdev(t)}function TI(e,t){const n=xI();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(t)):e},bandwidth(o){return arguments.length?(!(t=o)&&e&&(t=DI(e)),r):t},sample:()=>e[~~(Cl()*i)]+t*n.sample(),pdf(o){let s=0,a=0;for(;a<i;++a)s+=n.pdf((o-e[a])/t);return s/t/i},cdf(o){let s=0,a=0;for(;a<i;++a)s+=n.cdf((o-e[a])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function AI(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+CD()*t)}function OI(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*aq*e)}function NI(e,t,n){return DD(Math.log(e),t,n)}function MI(e,t,n){return Math.exp(SD(e,t,n))}function lq(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=null==o?1:o,r):i},sample:()=>AI(n,i),pdf:o=>OI(o,n,i),cdf:o=>NI(o,n,i),icdf:o=>MI(o,n,i)};return r.mean(e).stdev(t)}function uq(e,t){let i,n=0;const o={weights(s){return arguments.length?(i=function r(s){const a=[];let u,l=0;for(u=0;u<n;++u)l+=a[u]=null==s[u]?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Cl();let a=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function kI(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*Cl()}function II(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function RI(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function PI(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function cq(e,t){let n,i;const r={min(o){return arguments.length?(n=o||0,r):n},max(o){return arguments.length?(i=null==o?1:o,r):i},sample:()=>kI(n,i),pdf:o=>II(o,n,i),cdf:o=>RI(o,n,i),icdf:o=>PI(o,n,i)};return null==t&&(t=null==e?1:e,e=0),r.min(e).max(t)}function D1(e,t,n,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-o*e,o]}function xD(e,t,n,i){e=e.filter(h=>{let p=t(h),m=n(h);return null!=p&&(p=+p)>=p&&null!=m&&(m=+m)>=m}),i&&e.sort((h,p)=>t(h)-t(p));const r=e.length,o=new Float64Array(r),s=new Float64Array(r);let c,d,f,a=0,l=0,u=0;for(f of e)o[a]=c=+t(f),s[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<r;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function S1(e,t,n,i){let o,s,r=-1;for(const a of e)o=t(a),s=n(a),null!=o&&(o=+o)>=o&&null!=s&&(s=+s)>=s&&i(o,s,++r)}function Q0(e,t,n,i,r){let o=0,s=0;return S1(e,t,n,(a,l)=>{const u=l-r(a),c=l-i;o+=u*u,s+=c*c}),1-o/s}function FI(e,t,n){let i=0,r=0,o=0,s=0,a=0;S1(e,t,n,(c,d)=>{++a,i+=(c-i)/a,r+=(d-r)/a,o+=(c*d-o)/a,s+=(c*c-s)/a});const l=D1(i,r,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Q0(e,t,n,r,u)}}function dq(e,t,n){let i=0,r=0,o=0,s=0,a=0;S1(e,t,n,(c,d)=>{++a,c=Math.log(c),i+=(c-i)/a,r+=(d-r)/a,o+=(c*d-o)/a,s+=(c*c-s)/a});const l=D1(i,r,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Q0(e,t,n,r,u)}}function fq(e,t,n){const[i,r,o,s]=xD(e,t,n);let f,h,p,a=0,l=0,u=0,c=0,d=0;S1(e,t,n,(v,D)=>{f=i[d++],h=Math.log(D),p=f*D,a+=(D*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[m,_]=D1(l/s,a/s,u/s,c/s),b=v=>Math.exp(m+_*(v-o));return{coef:[Math.exp(m-_*o),_],predict:b,rSquared:Q0(e,t,n,s,b)}}function hq(e,t,n){let i=0,r=0,o=0,s=0,a=0,l=0;S1(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,i+=(h-i)/l,r+=(p-r)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(f-a)/l});const u=D1(i,r,o,s),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Q0(e,t,n,a,c)}}function LI(e,t,n){const[i,r,o,s]=xD(e,t,n),a=i.length;let h,p,m,_,l=0,u=0,c=0,d=0,f=0;for(h=0;h<a;)p=i[h],m=r[h++],_=p*p,l+=(_-l)/h,u+=(_*p-u)/h,c+=(_*_-c)/h,d+=(p*m-d)/h,f+=(_*m-f)/h;const b=c-l*l,v=l*b-u*u,D=(f*l-d*u)/v,A=(d*b-f*u)/v,I=-D*l,L=k=>D*(k-=o)*k+A*k+I+s;return{coef:[I-A*o+D*o*o+s,A-2*D*o,D],predict:L,rSquared:Q0(e,t,n,s,L)}}function pq(e,t,n,i){if(1===i)return FI(e,t,n);if(2===i)return LI(e,t,n);const[r,o,s,a]=xD(e,t,n),l=r.length,u=[],c=[],d=i+1;let f,h,p,m,_;for(f=0;f<d;++f){for(p=0,m=0;p<l;++p)m+=Math.pow(r[p],f)*o[p];for(u.push(m),_=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(r[p],f+h);_[h]=m}c.push(_)}c.push(u);const b=function exe(e){const t=e.length-1,n=[];let i,r,o,s,a;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(o=i;o<t+1;++o)a=e[o][i],e[o][i]=e[o][s],e[o][s]=a;for(r=i+1;r<t;++r)for(o=t;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(a=0,o=r+1;o<t;++o)a+=e[o][r]*n[o];n[r]=(e[t][r]-a)/e[r][r]}return n}(c),v=D=>{let A=a+b[0]+b[1]*(D-=s)+b[2]*D*D;for(f=3;f<d;++f)A+=b[f]*Math.pow(D,f);return A};return{coef:ZSe(d,b,-s,a),predict:v,rSquared:Q0(e,t,n,a,v)}}function ZSe(e,t,n,i){const r=Array(e);let o,s,a,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,r[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,r[o-s]+=a*Math.pow(n,s)*l;return r[0]+=i,r}function _q(e,t,n,i){const[r,o,s,a]=xD(e,t,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=2;){const p=[0,u-1];for(let _=0;_<l;++_){const b=r[_],v=p[0],D=p[1];let I=0,L=0,k=0,B=0,q=0;const W=1/Math.abs(r[b-r[v]>r[D]-b?v:D]-b||1);for(let ae=v;ae<=D;++ae){const Se=r[ae],ie=o[ae],te=txe(Math.abs(b-Se)*W)*f[ae],de=Se*te;I+=te,L+=de,k+=ie*te,B+=ie*de,q+=Se*de}const[X,oe]=D1(L/I,k/I,B/I,q/I);c[_]=X+oe*b,d[_]=Math.abs(o[_]-c[_]),nxe(r,_+1,p)}if(2===h)break;const m=nq(d);if(Math.abs(m)<1e-12)break;for(let b,v,_=0;_<l;++_)b=d[_]/(6*m),f[_]=b>=1?1e-12:(v=1-b*b)*v}return function ixe(e,t,n,i){const r=e.length,o=[];let u,s=0,a=0,l=[];for(;s<r;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=i,l=[u,t[s]],o.push(l));return l[1]+=i,o}(r,c,s,a)}function txe(e){return(e=1-e*e*e)*e*e}function nxe(e,t,n){const i=e[t];let r=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>r&&e[o]-i<=i-e[r];)n[0]=++r,n[1]=o,++o}const rxe=.5*Math.PI/180;function TD(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=m=>[m,e(m)],o=t[0],s=t[1],a=s-o,l=a/i,u=[r(o)],c=[];if(n===i){for(let m=1;m<i;++m)u.push(r(o+m/n*a));return u.push(r(s)),u}c.push(r(s));for(let m=n;--m>0;)c.push(r(o+m/n*a));let d=u[0],f=c[c.length-1];const h=1/a,p=function oxe(e,t){let n=e,i=e;const r=t.length;for(let o=0;o<r;++o){const s=t[o][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}(d[1],c);for(;f;){const m=r((d[0]+f[0])/2);m[0]-d[0]>=l&&sxe(d,m,f,h,p)>rxe?c.push(m):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function sxe(e,t,n,i,r){const o=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-s)}function Ga(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}function jI(e){return e&&e.length?1===e.length?e[0]:function lxe(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}(e):function(){return""}}function yq(e,t,n){return n||e+(t?"_"+t:"")}const BI=()=>{},uxe={init:BI,add:BI,rem:BI,idx:0},x1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},T1=Object.keys(x1);function vq(e,t){return x1[e](t)}function bq(e,t){return e.idx-t.idx}function fxe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function hxe(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t))):++this.missing}function pxe(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t))):--this.missing}function gxe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function wq(e,t){const n=t||es,i=function dxe(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{!i.req||i.req.forEach(r=>{t[r]||n(t[r]=x1[r]())})};return e.forEach(n),Object.values(t).sort(bq)}(e),r=e.slice().sort(bq);function o(s){this._ops=i,this._out=r,this.cell=s,this.init()}return o.prototype.init=fxe,o.prototype.add=hxe,o.prototype.rem=pxe,o.prototype.set=gxe,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function $I(e){this._key=e?fa(e):bt,this.reset()}T1.forEach(e=>{x1[e]=function cxe(e,t){return n=>an({name:e,out:n||e},uxe,t)}(e,x1[e])});const Ro=$I.prototype;function hh(e){he.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function VI(e){he.call(this,null,e)}function Eq(e,t,n){const i=e;let r=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[i(l)]=++a,size:()=>r.length,data:(l,u)=>(a&&(r=r.filter(c=>!s[i(c)]),s={},a=0),u&&l&&r.sort(l),o.length&&(r=l?uG(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function HI(e){he.call(this,[],e)}function Cq(e){Ti.call(this,null,_xe,e)}function _xe(e){return this.value&&!e.modified()?this.value:pk(e.fields,e.orders)}function UI(e){he.call(this,null,e)}function zI(e){he.call(this,null,e)}Ro.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ro.add=function(e){this._add.push(e)},Ro.rem=function(e){this._rem.push(e)},Ro.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,o=Array(i-r),s={};let a,l,u;for(a=0;a<r;++a)s[n(t[a])]=1;for(a=0,l=0;a<i;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o},Ro.distinct=function(e){const t=this.values(),n={};let o,i=t.length,r=0;for(;--i>=0;)o=e(t[i])+"",gt(n,o)||(n[o]=1,++r);return r},Ro.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=iG(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Ro.argmin=function(e){return this.extent(e)[0]||{}},Ro.argmax=function(e){return this.extent(e)[1]||{}},Ro.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},Ro.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},Ro.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=CI(this.values(),e),this._get=e),this._q},Ro.q1=function(e){return this.quartile(e)[0]},Ro.q2=function(e){return this.quartile(e)[1]},Ro.q3=function(e){return this.quartile(e)[2]},Ro.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=oq(this.values(),1e3,.05,e),this._get=e),this._ci},Ro.ci0=function(e){return this.ci(e)[0]},Ro.ci1=function(e){return this.ci(e)[1]},hh.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:T1},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Fe(hh,he,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function o(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<r;++u)i[u][d=c[n[u]]]=d}o(e._prev),o(t),function s(a,l,u){const c=n[u],d=i[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<r?s(h,l,u):t[h]||e.cell(h,l)}}("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(_){const b=Ze(Zo(_)),v=b.length;let A,D=0;for(;D<v;++D)i[A=b[D]]||(i[A]=1,t.push(A))}this._dims=Ze(e.groupby),this._dnames=this._dims.map(_=>{const b=hr(_);return r(_),n.push(b),b}),this.cellkey=e.key?e.key:jI(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.as||[],l=o.length,u={};let c,d,f,h,p,m;for(l!==s.length&&be("Unmatched number of fields and aggregate ops."),m=0;m<l;++m)c=o[m],d=s[m],null==c&&"count"!==d&&be("Null aggregate field specified."),h=hr(c),p=yq(d,h,a[m]),n.push(p),"count"!==d?(f=u[h],f||(r(c),f=u[h]=[],f.field=c,this._measures.push(f)),"count"!==d&&(this._countOnly=!1),f.push(vq(d,p))):this._counts.push(p);return this._measures=this._measures.map(_=>wq(_,_.field)),{}},cellkey:jI(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let o=0;o<r;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new $I),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,o={};for(let s=0;s<r;++s)o[n[s]]=i[s](e);return t?VW(t.tuple,o):Qn(o)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,d;if(i)for(u in i)l=i[u],(!r||l.num)&&s.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(0===l.num&&r?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}}),VI.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Fe(VI,he,{transform(e,t){const n=!1!==e.interval,i=this._bins(e),r=i.start,o=i.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return u=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(Zo(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=i(c);c[a]=d,c[l]=null==d?null:r+o*(1+(d-r)/o)}:c=>c[a]=i(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=rq(e),i=n.step;let s,a,r=n.start,o=r+Math.ceil((n.stop-r)/i)*i;null!=(s=e.anchor)&&(a=s-(r+i*Math.floor((s-r)/i)),r+=a,o+=a);const l=function(u){let c=ts(t(u));return null==c?null:c<r?-1/0:c>o?1/0:(c=Math.max(r,Math.min(c,o-i)),r+i*Math.floor(1e-14+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=da(l,Zo(t),e.name||"bin_"+hr(t))}}),HI.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Fe(HI,he,{transform(e,t){const n=t.fork(t.ALL),i=Eq(bt,this.value,n.materialize(n.ADD).add),r=e.sort,o=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(tg(r),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),Fe(Cq,Ti),UI.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Fe(UI,he,{transform(e,t){const n=d=>f=>{for(var p,h=function yxe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(a(f),e.case,o)||[],m=0,_=h.length;m<_;++m)s.test(p=h[m])||d(p)},i=this._parameterCheck(e,t),r=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>r[d]=1+(r[d]||0)),c=n(d=>r[d]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=i[a],u=n[a]||0,!l&&u?(i[a]=l=Qn({}),l[r]=a,l[o]=u,s.add.push(l)):0===u?(l&&s.rem.push(l),n[a]=null,i[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}}),zI.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Fe(zI,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=function vxe(e,t,n,i){for(var l,u,r=[],o={},s=e.length,a=0;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],i(o)&&(r.push(Qn(o)),(o={})[t]=u);return r}(a,r,o,e.filter||bl)):n.mod=a,n.source=this.value,n.modifies(i)}});const Dq={kde:TI,mixture:uq,normal:xI,lognormal:lq,uniform:cq},Sq="function";function xq(e,t){const n=e[Sq];gt(Dq,n)||be("Unknown distribution function: "+n);const i=Dq[n]();for(const r in e)"field"===r?i.data((e.from||t()).map(e[r])):"distributions"===r?i[r](e[r].map(o=>xq(o,t))):typeof i[r]===Sq&&i[r](e[r]);return i}function GI(e){he.call(this,null,e)}const Tq=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function Aq(e,t){return e?e.map((n,i)=>t[i]||hr(n)):null}function WI(e,t,n){const i=[],r=d=>d(l);let o,s,a,l,u,c;if(null==t)i.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(r),c=o[u],c||(o[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}function qI(e){he.call(this,null,e)}function Nq(e){Ti.call(this,null,Sxe,e),this.modified(!0)}function Sxe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:da(n=>t(n,e),Zo(t),hr(t))}function YI(e){he.call(this,[void 0,void 0],e)}function KI(e,t){Ti.call(this,e),this.parent=t,this.count=0}function AD(e){he.call(this,{},e),this._keys=F0();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}function Mq(e){Ti.call(this,null,xxe,e)}function xxe(e){return this.value&&!e.modified()?this.value:Ce(e.name)?Ze(e.name).map(t=>fa(t)):fa(e.name,e.as)}function XI(e){he.call(this,F0(),e)}function JI(e){he.call(this,[],e)}function QI(e){he.call(this,[],e)}function ZI(e){he.call(this,null,e)}function kq(e){he.call(this,[],e)}GI.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Tq.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Tq},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},Fe(GI,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=xq(e.distribution,function Cxe(e){return()=>e.materialize(e.SOURCE).source}(t)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";"pdf"!==s&&"cdf"!==s&&be("Invalid density method: "+s),!e.extent&&!i.data&&be("Missing density extent parameter."),s=i[s];const a=e.as||["value","density"],u=TD(s,e.extent||mc(i.data()),r,o).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],Qn(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),qI.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},Fe(qI,he,{transform(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,i=WI(t.source,e.groupby,es),r=e.smooth||!1,o=e.field,s=e.step||((e,t)=>o1(mc(e,t))/30)(n,o),a=tg((p,m)=>o(p)-o(m)),l=e.as||"bin",u=i.length;let h,c=1/0,d=-1/0,f=0;for(;f<u;++f){const p=i[f].sort(a);h=-1;for(const m of sq(p,s,r,o))m<c&&(c=m),m>d&&(d=m),p[++h][l]=m}return this.value={start:c,stop:d,step:s},t.reflow(!0).modifies(l)}}),Fe(Nq,Ti),YI.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Fe(YI,he,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let o=n[0],s=n[1];if((r||null==o)&&(o=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,a=>{const l=ts(i(a));null!=l&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=hr(i);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}}),Fe(KI,Ti,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),Fe(AD,he,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let s,a,o=gt(r,e)&&r[e];return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=i||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new KI(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&null!=t[r];++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=bt(l),c=o.get(u);void 0!==c&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);o.set(bt(l),u),a(u).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=bt(l),c=o.get(u),d=i(l);c===d?a(d).mod(l):(o.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(bt(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=bt(l),c=o.get(u),d=i(l);c!==d&&(o.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),Fe(Mq,Ti),XI.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Fe(XI,he,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),o=r.add,s=r.rem,a=r.mod,l=e.expr;let u=!0;function c(d){const f=bt(d),h=l(d,e),p=i.get(f);h&&p?(i.delete(f),o.push(d)):h||p?u&&h&&!p&&a.push(d):(i.set(f,1),s.push(d))}return t.visit(t.REM,d=>{const f=bt(d);i.has(f)?i.delete(f):s.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):i.set(bt(d),1)}),t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}}),JI.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Fe(JI,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=Aq(i,e.as||[]),o=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=i.map(p=>p(a)),u=l.reduce((p,m)=>Math.max(p,m.length),0);let d,f,h,c=0;for(;c<u;++c){for(f=fI(a),d=0;d<s;++d)f[r[d]]=null==(h=l[d][c])?null:h;o&&(f[o]=c),n.add.push(f)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(r)}}),QI.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Fe(QI,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(hr),o=e.as||["key","value"],s=o[0],a=o[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let d,c=0;c<l;++c)d=fI(u),d[s]=r[c],d[a]=i[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}}),ZI.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Fe(ZI,he,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),o=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,s=>s[i]=n(s,e))}}),Fe(kq,he,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let s,a,l,r=this.value,o=e.size-r.length;if(o>0){for(s=[];--o>=0;)s.push(l=Qn(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=r.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,r=r.slice(-o);return n.source=this.value=r,n}});const OD={value:"value",median:nq,mean:function axe(e,t){let n=0,i=0;if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n},min:bI,max:ig},Txe=[];function eR(e){he.call(this,[],e)}function tR(e){hh.call(this,e)}function nR(e){he.call(this,null,e)}function Iq(e){Ti.call(this,null,Mxe,e)}function Mxe(e){return this.value&&!e.modified()?this.value:mk(e.fields,e.flat)}function Rq(e){he.call(this,[],e),this._pending=null}function iR(e,t,n){n.forEach(Qn);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function rR(e){he.call(this,{},e)}function Pq(e){Ti.call(this,null,Ixe,e)}function Ixe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let o,s,i=1/0,r=-1/0;for(o=0;o<n;++o)s=t[o],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function Fq(e){Ti.call(this,null,Rxe,e)}function Rxe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function Lq(e){he.call(this,null,e)}function oR(e){hh.call(this,e)}function jq(e){AD.call(this,e)}function sR(e){he.call(this,null,e)}function Bq(e){he.call(this,null,e)}function aR(e){he.call(this,null,e)}function $q(e){he.call(this,null,e)}function lR(e){he.call(this,[],e),this.count=0}function uR(e){he.call(this,null,e)}function Vq(e){he.call(this,null,e),this.modified(!0)}function cR(e){he.call(this,null,e)}eR.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Fe(eR,he,{transform(e,t){var f,h,p,m,_,b,v,D,A,I,n=t.fork(t.ALL),i=function Axe(e){var n,t=e.method||OD.value;if(null!=OD[t])return t===OD.value?(n=void 0!==e.value?e.value:0,()=>n):OD[t];be("Unrecognized imputation method: "+t)}(e),r=function Oxe(e){const t=e.field;return n=>n?t(n):NaN}(e),o=hr(e.field),s=hr(e.key),a=(e.groupby||[]).map(hr),l=function Nxe(e,t,n,i){var u,c,d,f,h,p,m,_,r=b=>b(_),o=[],s=i?i.slice():[],a={},l={};for(s.forEach((b,v)=>a[b]=v+1),f=0,m=e.length;f<m;++f)p=n(_=e[f]),h=a[p]||(a[p]=s.push(p)),(d=l[c=(u=t?t.map(r):Txe)+""])||(d=l[c]=[],o.push(d),d.values=u),d[h-1]=_;return o.domain=s,o}(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length;for(_=0,D=l.length;_<D;++_)for(p=(f=l[_]).values,h=NaN,v=0;v<d;++v)if(null==f[v]){for(m=l.domain[v],I={_impute:!0},b=0,A=p.length;b<A;++b)I[a[b]]=p[b];I[s]=m,I[o]=Number.isNaN(h)?h=i(f,r):h,u.push(Qn(I))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}}),tR.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:T1},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Fe(tR,hh,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(r=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{an(o,r[n.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),nR.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Fe(nR,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=WI(i,e.groupby,e.field),o=(e.groupby||[]).map(hr),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;"pdf"!==a&&"cdf"!==a&&be("Invalid density method: "+a),"shared"===e.resolve&&(c||(c=mc(i,e.field)),d=f=e.steps||f),r.forEach(h=>{const p=TI(h,s)[a],m=e.counts?h.length:1;TD(p,c||mc(h),d,f).forEach(b=>{const v={};for(let D=0;D<o.length;++D)v[o[D]]=h.dims[D];v[l[0]]=b[0],v[l[1]]=b[1]*m,u.push(Qn(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),Fe(Iq,Ti),Fe(Rq,he,{transform(e,t){const n=t.dataflow;return this._pending?iR(this,t,this._pending):function kxe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?iR(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Ze(r.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(i=>iR(this,t,Ze(i.data)))}}),rR.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Fe(rR,he,{transform(e,t){const n=e.fields,i=e.index,r=e.values,o=null==e.default?null:e.default,s=e.modified(),a=n.length;let d,f,h,l=s?t.SOURCE:t.ADD,u=t,c=e.as;return r?(f=r.length,a>1&&!c&&be('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&be('The "as" parameter has too few output field names.'),c=c||r.map(hr),d=function(p){for(var b,v,m=0,_=0;m<a;++m)if(null==(v=i.get(n[m](p))))for(b=0;b<f;++b,++_)p[c[_]]=o;else for(b=0;b<f;++b,++_)p[c[_]]=r[b](v)}):(c||be("Missing output field names."),d=function(p){for(var _,m=0;m<a;++m)_=i.get(n[m](p)),p[c[m]]=null==_?o:_}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}}),Fe(Pq,Ti),Fe(Fq,Ti),Fe(Lq,he,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),oR.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:T1,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Fe(oR,hh,{_transform:hh.prototype.transform,transform(e,t){return this._transform(function Pxe(e,t){const n=e.field,i=e.value,r=("count"===e.op?"__count__":e.op)||"sum",o=Zo(n).concat(Zo(i)),s=function Lxe(e,t,n){const i={},r=[];return n.visit(n.SOURCE,o=>{const s=e(o);i[s]||(i[s]=1,r.push(s))}),r.sort(ZC),t?r.slice(0,t):r}(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(a=>function Fxe(e,t,n,i){return da(r=>t(r)===e?n(r):NaN,i,e+"")}(a,n,i,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}(e,t),t)}}),Fe(jq,AD,{transform(e,t){const n=e.subflow,i=e.field,r=o=>this.subflow(bt(o),n,t,o);return(e.modified("field")||i&&t.modified(Zo(i)))&&be("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{const s=r(o);i(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=r(o);i(o).forEach(a=>s.add(Qn(a)))}),t.visit(t.REM,o=>{const s=r(o);i(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>r(o).mod(o)),t.visit(t.ADD,o=>r(o).add(o)),t.visit(t.REM,o=>r(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}}),sR.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Fe(sR,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=Aq(e.fields,e.as||[]),o=i?(a,l)=>function jxe(e,t,n,i){for(let r=0,o=n.length;r<o;++r)t[i[r]]=n[r](e);return t}(a,l,i,r):_D;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=bt(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,Qn({}));s[bt(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[bt(a)]))}),n}}),Fe(Bq,he,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),aR.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},Fe(aR,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const o=WI(t.materialize(t.SOURCE).source,e.groupby,e.field),s=(e.groupby||[]).map(hr),a=[],l=e.step||.01,u=e.probs||Ga(l/2,1-1e-14,l),c=u.length;return o.forEach(d=>{const f=EI(d,u);for(let h=0;h<c;++h){const p={};for(let m=0;m<s.length;++m)p[s[m]]=d.dims[m];p[i[0]]=u[h],p[i[1]]=f[h],a.push(Qn(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),Fe($q,he,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const o=bt(r);n.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,r=>{const o=fI(r);i[bt(r)]=o,n.add.push(o)}),t.visit(t.MOD,r=>{const o=i[bt(r)];for(const s in r)o[s]=r[s],n.modifies(s);n.mod.push(o)})),n}}),lR.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Fe(lR,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((c,d)=>(c[bt(d)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let d,f;s.length<r?s.push(c):(f=~~((a+1)*Cl()),f<s.length&&f>=l&&(d=s[f],o[bt(d)]&&n.rem.push(d),s[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=bt(c);o[d]&&(o[d]=-1,n.rem.push(c)),--a}),s=s.filter(c=>-1!==o[bt(c)])),(t.rem.length||i)&&s.length<r&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[bt(c)]||u(c)}),l=-1),i&&s.length>r){const c=s.length-r;for(let d=0;d<c;++d)o[bt(s[d])]=-1,n.rem.push(s[d]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[bt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[bt(c)])),this.count=a,this.value=n.source=s,n}}),uR.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Fe(uR,he,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ga(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,Qn(o)}),n.add=t.add.concat(this.value),n}}),Fe(Vq,he,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const Hq=["unit0","unit1"];function Uq(e){he.call(this,F0(),e)}function zq(e){he.call(this,null,e)}cR.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:$k,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Hq}]},Fe(cR,he,{transform(e,t){const n=e.field,i=!1!==e.interval,r="utc"===e.timezone,o=this._floor(e,t),s=(r?q0:W0)(o.unit).offset,a=e.as||Hq,l=a[0],u=a[1],c=o.step;let d=o.start||1/0,f=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(Zo(n)))&&(h=(t=t.reflow(!0)).SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let _,b;null==m?(p[l]=null,i&&(p[u]=null)):(p[l]=_=b=o(m),i&&(p[u]=b=s(_,c)),_<d&&(d=_),b>f&&(f=b))}),o.start=d,o.stop=f,t.modifies(i?a:l)},_floor(e,t){const n="utc"===e.timezone,{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:oW({extent:e.extent||mc(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=Hk(i),s=this.value||{},a=(n?YG:qG)(o,r);return a.unit=On(o),a.units=o,a.step=r,a.start=s.start,a.stop=s.stop,this.value=a}}),Fe(Uq,he,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,o=a=>r.set(i(a),a);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>r.delete(i(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}}),Fe(zq,he,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(tg(e.sort)):t.source).map(e.field))}});const A1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=A1.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||be("ntile num must be greater than zero.");const n=A1.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||be("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return null!=i?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=function Vxe(e,t,n){for(let i=t.length;n<i;++n)if(null!=e(t[n]))return n;return-1}(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}},Hxe=Object.keys(A1);function Gq(e){const t=Ze(e.ops),n=Ze(e.fields),i=Ze(e.params),r=Ze(e.as),o=this.outputs=[],s=this.windows=[],a={},l={},u=[],c=[];let d=!0;function f(h){Ze(Zo(h)).forEach(p=>a[p]=1)}f(e.sort),t.forEach((h,p)=>{const m=n[p],_=hr(m),b=yq(h,_,r[p]);if(f(m),o.push(b),gt(A1,h))s.push(function $xe(e,t,n,i){const r=A1[e](t,n);return{init:r.init||Zf,update:function(o,s){s[i]=r.next(o)}}}(h,n[p],i[p],b));else{if(null==m&&"count"!==h&&be("Null aggregate field specified."),"count"===h)return void u.push(b);d=!1;let v=l[_];v||(v=l[_]=[],v.field=m,c.push(v)),v.push(vq(h,b))}}),(u.length||c.length)&&(this.cell=function Uxe(e,t,n){e=e.map(l=>wq(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,o=i.agg=Array(r),s=0;s<r;++s)o[s]=new e[s](i);if(i.store)var a=i.data=new $I;return i.add=function(l){if(i.num+=1,!n){a&&a.add(l);for(let u=0;u<r;++u)o[u].add(o[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){a&&a.rem(l);for(let u=0;u<r;++u)o[u].rem(o[u].get(l),l)}},i.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<r;++l)o[l].init()},i}(c,u,d)),this.inputs=Object.keys(a)}const Wq=Gq.prototype;function dR(e){he.call(this,{},e),this._mlen=0,this._mods=[]}function zxe(e,t,n,i){const r=i.sort,o=r&&!i.ignorePeers,s=i.frame||[null,0],a=e.data(n),l=a.length,u=o?a1(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||ns(-1)};t.init();for(let d=0;d<l;++d)Gxe(c,s,d,l),o&&Wxe(c,u),t.update(c,a[d])}function Gxe(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Wxe(e,t){const n=e.i0,i=e.i1-1,r=e.compare,o=e.data,s=o.length-1;n>0&&!r(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),i<s&&!r(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}function ND(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function MD(e){this._context=e}function ph(){}function qq(e){this._context=e}function Yq(e){this._context=e}function Kq(e,t){this._basis=new MD(e),this._beta=t}Wq.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},Wq.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,o=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<o;++s)i[s].update(e,t)},dR.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Hxe.concat(T1)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Fe(dR,he,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=tg(e.sort),r=jI(e.groupby),o=a=>this.group(r(a));let s=this.state;(!s||n)&&(s=this.state=new Gq(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)zxe(this._mods[a],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Eq(bt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),MD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ND(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ND(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},qq.prototype={areaStart:ph,areaEnd:ph,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ND(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Yq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ND(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Kq.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var l,i=e[0],r=t[0],o=e[n]-i,s=t[n]-r,a=-1;++a<=n;)this._basis.point(this._beta*e[a]+(1-this._beta)*(i+(l=a/n)*o),this._beta*t[a]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Xxe=function e(t){function n(i){return 1===t?new MD(i):new Kq(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function kD(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function fR(e,t){this._context=e,this._k=(1-t)/6}fR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:kD(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:kD(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jxe=function e(t){function n(i){return new fR(i,t)}return n.tension=function(i){return e(+i)},n}(0);function hR(e,t){this._context=e,this._k=(1-t)/6}hR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kD(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qxe=function e(t){function n(i){return new hR(i,t)}return n.tension=function(i){return e(+i)},n}(0);function pR(e,t){this._context=e,this._k=(1-t)/6}pR.prototype={areaStart:ph,areaEnd:ph,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:kD(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zxe=function e(t){function n(i){return new pR(i,t)}return n.tension=function(i){return e(+i)},n}(0);var Xq=Math.abs,os=Math.atan2,rg=Math.cos,eTe=Math.max,gR=Math.min,vc=Math.sin,Z0=Math.sqrt,ss=1e-12,gh=Math.PI,ID=gh/2,O1=2*gh;function tTe(e){return e>1?0:e<-1?gh:Math.acos(e)}function Jq(e){return e>=1?ID:e<=-1?-ID:Math.asin(e)}function mR(e,t,n){var i=e._x1,r=e._y1,o=e._x2,s=e._y2;if(e._l01_a>ss){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ss){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,o,s,e._x2,e._y2)}function Qq(e,t){this._context=e,this._alpha=t}Qq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:mR(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nTe=function e(t){function n(i){return t?new Qq(i,t):new fR(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Zq(e,t){this._context=e,this._alpha=t}Zq.prototype={areaStart:ph,areaEnd:ph,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:mR(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const iTe=function e(t){function n(i){return t?new Zq(i,t):new pR(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function eY(e,t){this._context=e,this._alpha=t}eY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:mR(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rTe=function e(t){function n(i){return t?new eY(i,t):new hR(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function tY(e){this._context=e}function _R(e){return new tY(e)}function nY(e){this._context=e}function iY(e){return e<0?-1:1}function rY(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(iY(o)+iY(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function oY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yR(e,t,n){var i=e._x0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,e._y0+a*t,o-a,s-a*n,o,s)}function RD(e){this._context=e}function sY(e){this._context=new aY(e)}function aY(e){this._context=e}function lY(e){this._context=e}function uY(e){var t,i,n=e.length-1,r=new Array(n),o=new Array(n),s=new Array(n);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)o[t]-=i=r[t]/o[t-1],s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function PD(e,t){this._context=e,this._t=t}tY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},nY.prototype={areaStart:ph,areaEnd:ph,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},RD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yR(this,this._t0,oY(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yR(this,oY(this,n=rY(this,e,t)),n);break;default:yR(this,this._t0,n=rY(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(sY.prototype=Object.create(RD.prototype)).point=function(e,t){RD.prototype.point.call(this,t,e)},aY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},lY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=uY(e),r=uY(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},PD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const vR=Math.PI,bR=2*vR,og=1e-6,fTe=bR-og;function wR(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function cY(){return new wR}wR.prototype=cY.prototype={constructor:wR,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(e,t,n,i,r){var o=this._x1,s=this._y1,a=(n=+n)-(e=+e),l=(i=+i)-(t=+t),u=o-e,c=s-t,d=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>og)if(Math.abs(c*a-l*u)>og&&r){var f=n-o,h=i-s,p=a*a+l*l,m=f*f+h*h,_=Math.sqrt(p),b=Math.sqrt(d),v=r*Math.tan((vR-Math.acos((p+d-m)/(2*_*b)))/2),D=v/b,A=v/_;Math.abs(D-1)>og&&(this._+="L"+(e+D*u)+","+(t+D*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*h)+","+(this._x1=e+A*a)+","+(this._y1=t+A*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,i,r,o){e=+e,t=+t,o=!!o;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),l=e+s,u=t+a,c=1^o,d=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>og||Math.abs(this._y1-u)>og)&&(this._+="L"+l+","+u),n&&(d<0&&(d=d%bR+bR),d>fTe?this._+="A"+n+","+n+",0,1,"+c+","+(e-s)+","+(t-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):d>og&&(this._+="A"+n+","+n+",0,"+ +(d>=vR)+","+c+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const e_=cY;function ni(e){return function(){return e}}function hTe(e){return e.innerRadius}function pTe(e){return e.outerRadius}function gTe(e){return e.startAngle}function mTe(e){return e.endAngle}function _Te(e){return e&&e.padAngle}function yTe(e,t,n,i,r,o,s,a){var l=n-e,u=i-t,c=s-r,d=a-o,f=d*l-c*u;if(!(f*f<ss))return[e+(f=(c*(t-o)-d*(e-r))/f)*l,t+f*u]}function FD(e,t,n,i,r,o,s){var a=e-n,l=t-i,u=(s?o:-o)/Z0(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,m=i+d,_=(f+p)/2,b=(h+m)/2,v=p-f,D=m-h,A=v*v+D*D,I=r-o,L=f*m-p*h,k=(D<0?-1:1)*Z0(eTe(0,I*I*A-L*L)),B=(L*D-v*k)/A,q=(-L*v-D*k)/A,W=(L*D+v*k)/A,X=(-L*v+D*k)/A,oe=B-_,ae=q-b,Se=W-_,ie=X-b;return oe*oe+ae*ae>Se*Se+ie*ie&&(B=W,q=X),{cx:B,cy:q,x01:-c,y01:-d,x11:B*(r/I-1),y11:q*(r/I-1)}}function dY(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function fY(e){return e[0]}function hY(e){return e[1]}function pY(e,t){var n=ni(!0),i=null,r=_R,o=null;function s(a){var l,c,f,u=(a=dY(a)).length,d=!1;for(null==i&&(o=r(f=e_())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,l,a),+t(c,l,a));if(f)return o=null,f+""||null}return e="function"==typeof e?e:void 0===e?fY:ni(e),t="function"==typeof t?t:void 0===t?hY:ni(t),s.x=function(a){return arguments.length?(e="function"==typeof a?a:ni(+a),s):e},s.y=function(a){return arguments.length?(t="function"==typeof a?a:ni(+a),s):t},s.defined=function(a){return arguments.length?(n="function"==typeof a?a:ni(!!a),s):n},s.curve=function(a){return arguments.length?(r=a,null!=i&&(o=r(i)),s):r},s.context=function(a){return arguments.length?(null==a?i=o=null:o=r(i=a),s):i},s}function gY(e,t,n){var i=null,r=ni(!0),o=null,s=_R,a=null;function l(c){var d,f,h,m,b,p=(c=dY(c)).length,_=!1,v=new Array(p),D=new Array(p);for(null==o&&(a=s(b=e_())),d=0;d<=p;++d){if(!(d<p&&r(m=c[d],d,c))===_)if(_=!_)f=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=f;--h)a.point(v[h],D[h]);a.lineEnd(),a.areaEnd()}_&&(v[d]=+e(m,d,c),D[d]=+t(m,d,c),a.point(i?+i(m,d,c):v[d],n?+n(m,d,c):D[d]))}if(b)return a=null,b+""||null}function u(){return pY().defined(r).curve(s).context(o)}return e="function"==typeof e?e:void 0===e?fY:ni(+e),t="function"==typeof t?t:ni(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?hY:ni(+n),l.x=function(c){return arguments.length?(e="function"==typeof c?c:ni(+c),i=null,l):e},l.x0=function(c){return arguments.length?(e="function"==typeof c?c:ni(+c),l):e},l.x1=function(c){return arguments.length?(i=null==c?null:"function"==typeof c?c:ni(+c),l):i},l.y=function(c){return arguments.length?(t="function"==typeof c?c:ni(+c),n=null,l):t},l.y0=function(c){return arguments.length?(t="function"==typeof c?c:ni(+c),l):t},l.y1=function(c){return arguments.length?(n=null==c?null:"function"==typeof c?c:ni(+c),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(i).y(t)},l.defined=function(c){return arguments.length?(r="function"==typeof c?c:ni(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,null!=o&&(a=s(o)),l):s},l.context=function(c){return arguments.length?(null==c?o=a=null:a=s(o=c),l):o},l}const mY={draw:function(e,t){var n=Math.sqrt(t/gh);e.moveTo(n,0),e.arc(0,0,n,0,O1)}};Math.sqrt(1/3);Math.sin(gh/10),Math.sin(7*gh/10);function t_(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}Math.sin(O1/10),Math.cos(O1/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);const vY=a1(z0),LD=vY.right,kTe=vY.left,N1=(a1(eq),LD);function bc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function mh(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const DR=Symbol("implicit");function SR(){var e=new Map,t=[],n=[],i=DR;function r(o){var s=o+"",a=e.get(s);if(!a){if(i!==DR)return i;e.set(s,a=t.push(o))}return n[(a-1)%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Map;for(const s of o){const a=s+"";e.has(a)||e.set(a,t.push(s))}return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return SR(t,n).unknown(i)},bc.apply(r,arguments),r}function bY(e,t,n,i){var o,r=rh(e,t,n);switch((i=j0(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null==i.precision&&!isNaN(o=vG(r,s))&&(i.precision=o),Ak(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(o=bG(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(o=wG(r))&&(i.precision=o-2*("%"===i.type))}return iD(i)}function n_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function M1(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function _h(){}var i_=1/.7,r_="\\s*([+-]?\\d+)\\s*",k1="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",wc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ITe=/^#([0-9a-f]{3,8})$/,RTe=new RegExp("^rgb\\("+[r_,r_,r_]+"\\)$"),PTe=new RegExp("^rgb\\("+[wc,wc,wc]+"\\)$"),FTe=new RegExp("^rgba\\("+[r_,r_,r_,k1]+"\\)$"),LTe=new RegExp("^rgba\\("+[wc,wc,wc,k1]+"\\)$"),jTe=new RegExp("^hsl\\("+[k1,wc,wc]+"\\)$"),BTe=new RegExp("^hsla\\("+[k1,wc,wc,k1]+"\\)$"),wY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function EY(){return this.rgb().formatHex()}function CY(){return this.rgb().formatRgb()}function I1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ITe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?DY(t):3===n?new Po(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?jD(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?jD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=RTe.exec(e))?new Po(t[1],t[2],t[3],1):(t=PTe.exec(e))?new Po(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=FTe.exec(e))?jD(t[1],t[2],t[3],t[4]):(t=LTe.exec(e))?jD(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=jTe.exec(e))?TY(t[1],t[2]/100,t[3]/100,1):(t=BTe.exec(e))?TY(t[1],t[2]/100,t[3]/100,t[4]):wY.hasOwnProperty(e)?DY(wY[e]):"transparent"===e?new Po(NaN,NaN,NaN,0):null}function DY(e){return new Po(e>>16&255,e>>8&255,255&e,1)}function jD(e,t,n,i){return i<=0&&(e=t=n=NaN),new Po(e,t,n,i)}function xR(e){return e instanceof _h||(e=I1(e)),e?new Po((e=e.rgb()).r,e.g,e.b,e.opacity):new Po}function yh(e,t,n,i){return 1===arguments.length?xR(e):new Po(e,t,n,null==i?1:i)}function Po(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function SY(){return"#"+TR(this.r)+TR(this.g)+TR(this.b)}function xY(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function TR(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function TY(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ec(e,t,n,i)}function AY(e){if(e instanceof Ec)return new Ec(e.h,e.s,e.l,e.opacity);if(e instanceof _h||(e=I1(e)),!e)return new Ec;if(e instanceof Ec)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new Ec(s,a,l,e.opacity)}function BD(e,t,n,i){return 1===arguments.length?AY(e):new Ec(e,t,n,null==i?1:i)}function Ec(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function AR(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function OY(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}function NY(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1];return OY((n-i/t)*t,i>0?e[i-1]:2*r-o,r,o,i<t-1?e[i+2]:2*o-r)}}function MY(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t);return OY((n-i/t)*t,e[(i+t-1)%t],e[i%t],e[(i+1)%t],e[(i+2)%t])}}n_(_h,I1,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:EY,formatHex:EY,formatHsl:function $Te(){return AY(this).formatHsl()},formatRgb:CY,toString:CY}),n_(Po,yh,M1(_h,{brighter:function(e){return e=null==e?i_:Math.pow(i_,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SY,formatHex:SY,formatRgb:xY,toString:xY})),n_(Ec,BD,M1(_h,{brighter:function(e){return e=null==e?i_:Math.pow(i_,e),new Ec(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Ec(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Po(AR(e>=240?e-240:e+120,r,i),AR(e,r,i),AR(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const $D=e=>()=>e;function kY(e,t){return function(n){return e+n*t}}function VD(e,t){var n=t-e;return n?kY(e,n>180||n<-180?n-360*Math.round(n/360):n):$D(isNaN(e)?t:e)}function mo(e,t){var n=t-e;return n?kY(e,n):$D(isNaN(e)?t:e)}const OR=function e(t){var n=function HTe(e){return 1==(e=+e)?mo:function(t,n){return n-t?function VTe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):$D(isNaN(t)?n:t)}}(t);function i(r,o){var s=n((r=yh(r)).r,(o=yh(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),u=mo(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function IY(e){return function(t){var s,a,n=t.length,i=new Array(n),r=new Array(n),o=new Array(n);for(s=0;s<n;++s)a=yh(t[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=e(i),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var UTe=IY(NY),zTe=IY(MY);function NR(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function RY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function GTe(e,t){return(RY(t)?NR:PY)(e,t)}function PY(e,t){var s,n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n);for(s=0;s<i;++s)r[s]=vh(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function FY(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function gu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function LY(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=vh(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var MR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kR=new RegExp(MR.source,"g");function jY(e,t){var i,r,o,n=MR.lastIndex=kR.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(i=MR.exec(e))&&(r=kR.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:gu(i,r)})),n=kR.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function qTe(e){return function(t){return e(t)+""}}(l[0].x):function WTe(e){return function(){return e}}(t):(t=l.length,function(u){for(var d,c=0;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function vh(e,t){var i,n=typeof t;return null==t||"boolean"===n?$D(t):("number"===n?gu:"string"===n?(i=I1(t))?(t=i,OR):jY:t instanceof I1?OR:t instanceof Date?FY:RY(t)?NR:Array.isArray(t)?PY:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?LY:gu)(e,t)}function R1(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function IR(e){return+e}var BY=[0,1];function ma(e){return e}function RR(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function YTe(e){return function(){return e}}(isNaN(t)?NaN:.5)}function XTe(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=RR(r,i),o=n(s,o)):(i=RR(i,r),o=n(o,s)),function(a){return o(i(a))}}function JTe(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=RR(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=N1(e,a,1,i)-1;return o[l](r[l](a))}}function P1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function HD(){var i,r,o,a,l,u,e=BY,t=BY,n=vh,s=ma;function c(){var f=Math.min(e.length,t.length);return s!==ma&&(s=function KTe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}(e[0],e[f-1])),a=f>2?JTe:XTe,l=u=null,d}function d(f){return null==f||isNaN(f=+f)?o:(l||(l=a(e.map(i),t,n)))(i(s(f)))}return d.invert=function(f){return s(r((u||(u=a(t,e.map(i),gu)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,IR),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=R1,c()},d.clamp=function(f){return arguments.length?(s=!!f||ma,c()):s!==ma},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return i=f,r=h,c()}}function $Y(){return HD()(ma,ma)}function ag(e){var t=e.domain;return e.ticks=function(n){var i=t();return xk(i[0],i[i.length-1],null==n?10:n)},e.tickFormat=function(n,i){var r=t();return bY(r[0],r[r.length-1],null==n?10:n,i)},e.nice=function(n){null==n&&(n=10);var l,u,i=t(),r=0,o=i.length-1,s=i[r],a=i[o],c=10;for(a<s&&(u=s,s=a,a=u,u=r,r=o,o=u);c-- >0;){if((u=yG(s,a,n))===l)return i[r]=s,i[o]=a,t(i);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else{if(!(u<0))break;s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u}l=u}return e},e}function UY(e,t){var s,n=0,i=(e=e.slice()).length-1,r=e[n],o=e[i];return o<r&&(s=n,n=i,i=s,s=r,r=o,o=s),e[n]=t.floor(r),e[i]=t.ceil(o),e}function zY(e){return Math.log(e)}function GY(e){return Math.exp(e)}function QTe(e){return-Math.log(-e)}function ZTe(e){return-Math.exp(-e)}function eAe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function WY(e){return function(t){return-e(-t)}}function PR(e){var r,o,t=e(zY,GY),n=t.domain,i=10;function s(){return r=function nAe(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),o=function tAe(e){return 10===e?eAe:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),n()[0]<0?(r=WY(r),o=WY(o),e(QTe,ZTe)):e(zY,GY),t}return t.base=function(a){return arguments.length?(i=+a,s()):i},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=function(a){var d,l=n(),u=l[0],c=l[l.length-1];(d=c<u)&&(f=u,u=c,c=f);var p,m,_,f=r(u),h=r(c),b=null==a?10:+a,v=[];if(!(i%1)&&h-f<b){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(m=1,p=o(f);m<i;++m)if(!((_=p*m)<u)){if(_>c)break;v.push(_)}}else for(;f<=h;++f)for(m=i-1,p=o(f);m>=1;--m)if(!((_=p*m)<u)){if(_>c)break;v.push(_)}2*v.length<b&&(v=xk(u,c,b))}else v=xk(f,h,Math.min(h-f,b)).map(o);return d?v.reverse():v},t.tickFormat=function(a,l){if(null==l&&(l=10===i?".0e":","),"function"!=typeof l&&(l=iD(l)),a===1/0)return l;null==a&&(a=10);var u=Math.max(1,i*a/t.ticks().length);return function(c){var d=c/o(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},t.nice=function(){return n(UY(n(),{floor:function(a){return o(Math.floor(r(a)))},ceil:function(a){return o(Math.ceil(r(a)))}}))},t}function YY(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iAe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rAe(e){return e<0?-e*e:e*e}function FR(e){var t=e(ma,ma),n=1;function i(){return 1===n?e(ma,ma):.5===n?e(iAe,rAe):e(YY(n),YY(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},ag(t)}function LR(){var e=FR(HD());return e.copy=function(){return P1(e,LR()).exponent(e.exponent())},bc.apply(e,arguments),e}function KY(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function XY(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jR(e){var t=1,n=e(KY(t),XY(t));return n.constant=function(i){return arguments.length?e(KY(t=+i),XY(t)):t},ag(n)}function QY(e,t,n,i,r,o){const s=[[lh,1,Ud],[lh,5,5e3],[lh,15,15e3],[lh,30,3e4],[o,1,wl],[o,5,5*wl],[o,15,15*wl],[o,30,30*wl],[r,1,zd],[r,3,3*zd],[r,6,6*zd],[r,12,12*zd],[i,1,Jp],[i,2,2*Jp],[n,1,Mk],[t,1,OG],[t,3,3*OG],[e,1,kk]];function l(u,c,d){const f=Math.abs(c-u)/d,h=a1(([,,_])=>_).right(s,f);if(h===s.length)return e.every(rh(u/kk,c/kk,d));if(0===h)return Fk.every(Math.max(rh(u,c,d),1));const[p,m]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return p.every(m)}return[function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&"function"==typeof d.range?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p},l]}const[sAe,aAe]=QY(uh,lD,H0,sh,jk,Bk),[lAe,uAe]=QY(ah,sD,$0,oh,Rk,Pk);function cAe(e){return new Date(e)}function dAe(e){return e instanceof Date?+e:+new Date(+e)}function BR(e,t,n,i,r,o,s,a,l,u){var c=$Y(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),_=u("%I %p"),b=u("%a %d"),v=u("%b %d"),D=u("%B"),A=u("%Y");function I(L){return(l(L)<L?h:a(L)<L?p:s(L)<L?m:o(L)<L?_:i(L)<L?r(L)<L?b:v:n(L)<L?D:A)(L)}return c.invert=function(L){return new Date(d(L))},c.domain=function(L){return arguments.length?f(Array.from(L,dAe)):f().map(cAe)},c.ticks=function(L){var k=f();return e(k[0],k[k.length-1],null==L?10:L)},c.tickFormat=function(L,k){return null==k?I:u(k)},c.nice=function(L){var k=f();return(!L||"function"!=typeof L.range)&&(L=t(k[0],k[k.length-1],null==L?10:L)),L?f(UY(k,L)):c},c.copy=function(){return P1(c,BR(e,t,n,i,r,o,s,a,l,u))},c}function UD(){var n,i,r,o,l,e=0,t=1,s=ma,a=!1;function u(d){return null==d||isNaN(d=+d)?l:s(0===r?.5:(d=(o(d)-n)*r,a?Math.max(0,Math.min(1,d)):d))}function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,s=d(h,p),u):[s(0),s(1)]}}return u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(s=d,u):s},u.range=c(vh),u.rangeRound=c(R1),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),i=d(t),r=n===i?0:1/(i-n),u}}function bh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $R(){var e=ag(UD()(ma));return e.copy=function(){return bh(e,$R())},mh.apply(e,arguments)}function VR(){var e=FR(UD());return e.copy=function(){return bh(e,VR()).exponent(e.exponent())},mh.apply(e,arguments)}function HR(e,t){void 0===t&&(t=e,e=vh);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(s){var a=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[a](s-a)}}function zD(){var r,o,s,a,l,c,f,e=0,t=.5,n=1,i=1,u=ma,d=!1;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-o)*(i*m<i*o?a:l),u(d?Math.max(0,Math.min(1,m)):m))}function p(m){return function(_){var b,v,D;return arguments.length?([b,v,D]=_,u=HR(m,[b,v,D]),h):[u(0),u(.5),u(1)]}}return h.domain=function(m){return arguments.length?([e,t,n]=m,r=c(e=+e),o=c(t=+t),s=c(n=+n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u},h.range=p(vh),h.rangeRound=p(R1),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,r=m(e),o=m(t),s=m(n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h}}function UR(){var e=FR(zD());return e.copy=function(){return bh(e,UR()).exponent(e.exponent())},mh.apply(e,arguments)}function mAe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function _Ae(e,t){var n=VD(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}var GD,aK=180/Math.PI,zR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lK(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*aK,skewX:Math.atan(l)*aK,scaleX:s,scaleY:a}}function uK(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),function o(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:gu(u,d)},{i:m-2,x:gu(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}(u.translateX,u.translateY,c.translateX,c.translateY,d,f),function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:gu(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}(u.rotate,c.rotate,d,f),function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:gu(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}(u.skewX,c.skewX,d,f),function l(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push(r(h)+"scale(",null,",",null,")");p.push({i:m-4,x:gu(u,d)},{i:m-2,x:gu(c,f)})}else(1!==d||1!==f)&&h.push(r(h)+"scale("+d+","+f+")")}(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var _,p=-1,m=f.length;++p<m;)d[(_=f[p]).i]=_.x(h);return d.join("")}}}var bAe=uK(function yAe(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zR:lK(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),wAe=uK(function vAe(e){return null!=e&&(GD||(GD=document.createElementNS("http://www.w3.org/2000/svg","g")),GD.setAttribute("transform",e),e=GD.transform.baseVal.consolidate())?lK((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):zR},", ",")",")");function cK(e){return((e=Math.exp(e))+1/e)/2}const SAe=function e(t,n,i){function r(o,s){var _,b,a=o[0],l=o[1],u=o[2],f=s[2],h=s[0]-a,p=s[1]-l,m=h*h+p*p;if(m<1e-12)b=Math.log(f/u)/t,_=function(k){return[a+k*h,l+k*p,u*Math.exp(t*k*b)]};else{var v=Math.sqrt(m),D=(f*f-u*u+i*m)/(2*u*n*v),A=(f*f-u*u-i*m)/(2*f*n*v),I=Math.log(Math.sqrt(D*D+1)-D),L=Math.log(Math.sqrt(A*A+1)-A);b=(L-I)/t,_=function(k){var B=k*b,q=cK(I),W=u/(n*v)*(q*function DAe(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*B+I)-function CAe(e){return((e=Math.exp(e))-1/e)/2}(I));return[a+W*h,l+W*p,u*q/cK(t*B+I)]}}return _.duration=1e3*b*t/Math.SQRT2,_}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s;return e(s,a,a*a)},r}(Math.SQRT2,2,4);function dK(e){return function(t,n){var i=e((t=BD(t)).h,(n=BD(n)).h),r=mo(t.s,n.s),o=mo(t.l,n.l),s=mo(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=o(a),t.opacity=s(a),t+""}}}const xAe=dK(VD);var TAe=dK(mo);const fK=Math.PI/180,hK=180/Math.PI,_K=4/29,o_=6/29,yK=3*o_*o_;function vK(e){if(e instanceof mu)return new mu(e.l,e.a,e.b,e.opacity);if(e instanceof Cc)return wK(e);e instanceof Po||(e=xR(e));var o,s,t=YR(e.r),n=YR(e.g),i=YR(e.b),r=GR((.2225045*t+.7168786*n+.0606169*i)/1);return t===n&&n===i?o=s=r:(o=GR((.4360747*t+.3850649*n+.1430804*i)/.96422),s=GR((.0139322*t+.0971045*n+.7141733*i)/.82521)),new mu(116*r-16,500*(o-r),200*(r-s),e.opacity)}function qD(e,t,n,i){return 1===arguments.length?vK(e):new mu(e,t,n,null==i?1:i)}function mu(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function GR(e){return e>.008856451679035631?Math.pow(e,1/3):e/yK+_K}function WR(e){return e>o_?e*e*e:yK*(e-_K)}function qR(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function YR(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bK(e){if(e instanceof Cc)return new Cc(e.h,e.c,e.l,e.opacity);if(e instanceof mu||(e=vK(e)),0===e.a&&0===e.b)return new Cc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*hK;return new Cc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function YD(e,t,n,i){return 1===arguments.length?bK(e):new Cc(e,t,n,null==i?1:i)}function Cc(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function wK(e){if(isNaN(e.h))return new mu(e.l,0,0,e.opacity);var t=e.h*fK;return new mu(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function OAe(e,t){var n=mo((e=qD(e)).l,(t=qD(t)).l),i=mo(e.a,t.a),r=mo(e.b,t.b),o=mo(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=o(s),e+""}}function EK(e){return function(t,n){var i=e((t=YD(t)).h,(n=YD(n)).h),r=mo(t.c,n.c),o=mo(t.l,n.l),s=mo(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=o(a),t.opacity=s(a),t+""}}}n_(mu,qD,M1(_h,{brighter:function(e){return new mu(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new mu(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Po(qR(3.1338561*(t=.96422*WR(t))-1.6168667*(e=1*WR(e))-.4906146*(n=.82521*WR(n))),qR(-.9787684*t+1.9161415*e+.033454*n),qR(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),n_(Cc,YD,M1(_h,{brighter:function(e){return new Cc(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Cc(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return wK(this).rgb()}}));const NAe=EK(VD);var MAe=EK(mo),KR=1.78277,XR=-.29227,KD=-.90649,F1=1.97294,DK=F1*KD,SK=F1*KR,xK=KR*XR- -.14861*KD;function kAe(e){if(e instanceof lg)return new lg(e.h,e.s,e.l,e.opacity);e instanceof Po||(e=xR(e));var n=e.g/255,i=e.b/255,r=(xK*i+DK*(e.r/255)-SK*n)/(xK+DK-SK),o=i-r,s=(F1*(n-r)-XR*o)/KD,a=Math.sqrt(s*s+o*o)/(F1*r*(1-r)),l=a?Math.atan2(s,o)*hK-120:NaN;return new lg(l<0?l+360:l,a,r,e.opacity)}function JR(e,t,n,i){return 1===arguments.length?kAe(e):new lg(e,t,n,null==i?1:i)}function lg(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function TK(e){return function t(n){function i(r,o){var s=e((r=JR(r)).h,(o=JR(o)).h),a=mo(r.s,o.s),l=mo(r.l,o.l),u=mo(r.opacity,o.opacity);return function(c){return r.h=s(c),r.s=a(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return n=+n,i.gamma=t,i}(1)}n_(lg,JR,M1(_h,{brighter:function(e){return e=null==e?i_:Math.pow(i_,e),new lg(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new lg(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*fK,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Po(255*(t+n*(-.14861*i+KR*r)),255*(t+n*(XR*i+KD*r)),255*(t+n*(F1*i)),this.opacity)}}));const IAe=TK(VD);var RAe=TK(mo);function PAe(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}function QR(e,t,n){const i=e-t+2*n;return e?i>0?i:1:0}const s_="linear",Wd="log",L1="pow",j1="sqrt",XD="symlog",ug="time",cg="utc",Dc="sequential",a_="diverging",l_="quantile",JD="quantize",QD="threshold",ZR="ordinal",eP="point",tP="bin-ordinal",Zr="continuous",B1="discrete",$1="discretizing",xl="interpolating",nP="temporal";function iP(){const e=SR().unknown(void 0),t=e.domain,n=e.range;let r,o,i=[0,1],s=!1,a=0,l=0,u=.5;function c(){const d=t().length,f=i[1]<i[0],h=i[1-f],p=QR(d,a,l);let m=i[f-0];r=(h-m)/(p||1),s&&(r=Math.floor(r)),m+=(h-m-r*(d-a))*u,o=r*(1-a),s&&(m=Math.round(m),o=Math.round(o));const _=Ga(d).map(b=>m+r*b);return n(f?_.reverse():_)}return delete e.unknown,e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],c()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(s=!!d,c()):s},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(null==d[0]||null==d[1])return;const f=i[1]<i[0],h=f?n().reverse():n(),p=h.length-1;let b,v,D,m=+d[0],_=+d[1];return m!=m||_!=_||(_<m&&(D=m,m=_,_=D),_<h[0]||m>i[1-f])?void 0:(b=Math.max(0,LD(h,m)-1),v=m===_?b:LD(h,_)-1,m-h[b]>o+1e-10&&++b,f&&(D=b,b=p-v,v=p-D),b>v?void 0:t().slice(b,v+1))},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return iP().domain(t()).range(i).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function OK(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return OK(t())},e}var $Ae=Array.prototype.map;function VAe(e){return $Ae.call(e,ts)}const HAe=Array.prototype.slice,ZD={};function UAe(e,t,n){const i=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?function LAe(e){return function(t){let r,n=t[0],i=t[1];return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}(o):o.invertExtent?function jAe(e){return function(t){const n=e.range();let s,a,l,u,i=t[0],r=t[1],o=-1;for(r<i&&(a=i,i=r,r=a),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(o<0&&(o=l),s=l);if(!(o<0))return i=e.invertExtent(n[o]),r=e.invertExtent(n[s]),[void 0===i[0]?i[1]:i[0],void 0===r[1]?r[0]:r[1]]}}(o):void 0),o.type=e,o};return i.metadata=hu(Ze(n)),i}function Gn(e,t,n){return arguments.length>1?(ZD[e]=UAe(e,t,n),this):MK(e)?ZD[e]:void 0}function MK(e){return gt(ZD,e)}function dg(e,t){const n=ZD[e];return n&&n.metadata[t]}function rP(e){return dg(e,Zr)}function u_(e){return dg(e,B1)}function oP(e){return dg(e,$1)}function kK(e){return dg(e,Wd)}function IK(e){return dg(e,xl)}function RK(e){return dg(e,l_)}Gn("identity",function HY(e){var t;function n(i){return null==i||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,IR),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return HY(e).unknown(t)},e=arguments.length?Array.from(e,IR):[0,1],ag(n)}),Gn(s_,function VY(){var e=$Y();return e.copy=function(){return P1(e,VY())},bc.apply(e,arguments),ag(e)},Zr),Gn(Wd,function qY(){var e=PR(HD()).domain([1,10]);return e.copy=function(){return P1(e,qY()).base(e.base())},bc.apply(e,arguments),e},[Zr,Wd]),Gn(L1,LR,Zr),Gn(j1,function oAe(){return LR.apply(null,arguments).exponent(.5)},Zr),Gn(XD,function JY(){var e=jR(HD());return e.copy=function(){return P1(e,JY()).constant(e.constant())},bc.apply(e,arguments)},Zr),Gn(ug,function fAe(){return bc.apply(BR(lAe,uAe,ah,sD,$0,oh,Rk,Pk,lh,Jk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[Zr,nP]),Gn(cg,function hAe(){return bc.apply(BR(sAe,aAe,uh,lD,H0,sh,jk,Bk,lh,Qk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[Zr,nP]),Gn(Dc,$R,[Zr,xl]),Gn("".concat(Dc,"-").concat(s_),$R,[Zr,xl]),Gn("".concat(Dc,"-").concat(Wd),function ZY(){var e=PR(UD()).domain([1,10]);return e.copy=function(){return bh(e,ZY()).base(e.base())},mh.apply(e,arguments)},[Zr,xl,Wd]),Gn("".concat(Dc,"-").concat(L1),VR,[Zr,xl]),Gn("".concat(Dc,"-").concat(j1),function pAe(){return VR.apply(null,arguments).exponent(.5)},[Zr,xl]),Gn("".concat(Dc,"-").concat(XD),function eK(){var e=jR(UD());return e.copy=function(){return bh(e,eK()).constant(e.constant())},mh.apply(e,arguments)},[Zr,xl]),Gn("".concat(a_,"-").concat(s_),function tK(){var e=ag(zD()(ma));return e.copy=function(){return bh(e,tK())},mh.apply(e,arguments)},[Zr,xl]),Gn("".concat(a_,"-").concat(Wd),function nK(){var e=PR(zD()).domain([.1,1,10]);return e.copy=function(){return bh(e,nK()).base(e.base())},mh.apply(e,arguments)},[Zr,xl,Wd]),Gn("".concat(a_,"-").concat(L1),UR,[Zr,xl]),Gn("".concat(a_,"-").concat(j1),function gAe(){return UR.apply(null,arguments).exponent(.5)},[Zr,xl]),Gn("".concat(a_,"-").concat(XD),function iK(){var e=jR(zD());return e.copy=function(){return bh(e,iK()).constant(e.constant())},mh.apply(e,arguments)},[Zr,xl]),Gn(l_,function rK(){var i,e=[],t=[],n=[];function r(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=tq(e,s/a);return o}function o(s){return null==s||isNaN(s=+s)?i:t[N1(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)null!=a&&!isNaN(a=+a)&&e.push(a);return e.sort(z0),r()},o.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return rK().domain(e).range(t).unknown(i)},bc.apply(o,arguments)},[$1,l_]),Gn(JD,function oK(){var o,e=0,t=1,n=1,i=[.5],r=[0,1];function s(l){return null!=l&&l<=l?r[N1(i,l,0,n)]:o}function a(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,a()):r.slice()},s.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return oK().domain([e,t]).range(r).unknown(o)},bc.apply(ag(s),arguments)},$1),Gn(QD,function sK(){var n,e=[.5],t=[0,1],i=1;function r(o){return null!=o&&o<=o?t[N1(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return sK().domain(e).range(t).unknown(n)},bc.apply(r,arguments)},$1),Gn(tP,function NK(){let e=[],t=[];function n(i){return null==i||i!=i?void 0:t[(N1(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=VAe(i),n):e.slice()},n.range=function(i){return arguments.length?(t=HAe.call(i),n):t.slice()},n.tickFormat=function(i,r){return bY(e[0],On(e),null==i?10:i,r)},n.copy=function(){return NK().domain(n.domain()).range(n.range())},n},[B1,$1]),Gn(ZR,SR,B1),Gn("band",iP,B1),Gn(eP,function BAe(){return OK(iP().paddingInner(1))},B1);const GAe=["clamp","base","constant","exponent"];function PK(e,t){const n=t[0],i=On(t)-n;return function(r){return e(n+r*i)}}function eS(e,t,n){return HR(sP(t||"rgb",n),e)}function FK(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function LK(e,t,n){const i=n-t;let r,o,s;return i&&Number.isFinite(i)?(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),s=Gn(o)().domain([t,n]).range([0,1]),GAe.forEach(a=>e[a]?s[a](e[a]()):0),s):ns(.5)}function sP(e,t){const n=Gt[function WAe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function jK(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}function BK(e,t){for(const n in e)aP(n,t(e[n]))}const $K={};function aP(e,t){return e=e&&e.toLowerCase(),arguments.length>1?($K[e]=t,this):$K[e]}BK({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},jK),BK({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>eS(jK(e)));const tS="symbol",JAe=e=>Ce(e)?e.map(t=>String(t)):String(e),QAe=(e,t)=>e[1]-t[1],ZAe=(e,t)=>t[1]-e[1];function lP(e,t,n){let i;return mi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(o1(e.domain())/n||1)))),it(t)&&(i=t.step,t=t.interval),Qe(t)&&(t=e.type===ug?W0(t):e.type==cg?q0(t):be("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function VK(e,t,n){let i=e.range(),r=i[0],o=On(i),s=QAe;if(r>o&&(i=o,o=r,r=i,s=ZAe),r=Math.floor(r),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>r<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],On(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function uP(e,t){return e.bins?VK(e,e.bins):e.ticks?e.ticks(t):e.domain()}function HK(e,t,n,i,r,o){const s=t.type;let a=JAe;if(s===ug||r===ug)a=e.timeFormat(i);else if(s===cg||r===cg)a=e.utcFormat(i);else if(kK(s)){const l=e.formatFloat(i);if(o||t.bins)a=l;else{const u=UK(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(a=e.format(i));return a}function UK(e,t,n){const i=uP(e,t),r=e.base(),o=Math.log(r),s=Math.max(1,r*t/i.length),a=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/o));return u*r<r-.5&&(u*=r),u<=s};return n?i.filter(a):a}const cP={[l_]:"quantiles",[JD]:"thresholds",[QD]:"domain"},zK={[l_]:"quantiles",[JD]:"domain"};function GK(e,t){return e.bins?function n2e(e){const t=e.slice(0,-1);return t.max=On(e),t}(e.bins):e.type===Wd?UK(e,t,!0):cP[e.type]?function t2e(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[cP[e.type]]()):uP(e,t)}function WK(e,t,n,i,r,o,s){const a=zK[t.type]&&o!==ug&&o!==cg?function e2e(e,t,n){const i=t[zK[t.type]](),r=i.length;let s,o=r>1?i[1]-i[0]:i[0];for(s=1;s<r;++s)o=Math.min(o,i[s]-i[s-1]);return e.formatSpan(0,o,30,n)}(e,t,r):HK(e,t,n,r,o,s);return i===tS&&(e=>cP[e.type]||e.bins)(t)?r2e(a):"discrete"===i?o2e(a):s2e(a)}const r2e=e=>(t,n,i)=>{const r=qK(i[n+1],qK(i.max,1/0)),o=YK(t,e),s=YK(r,e);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},qK=(e,t)=>null!=e?e:t,o2e=e=>(t,n)=>n?e(t):null,s2e=e=>t=>e(t),YK=(e,t)=>Number.isFinite(e)?t(e):null;function KK(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=function l2e(e,t,n,i){const r=i||t.type;return Qe(n)&&function zAe(e){return dg(e,nP)}(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||r!==ug?n||r!==cg?WK(e,t,5,null,n,i,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(e,t,n.format,n.formatType);if(oP(t.type)){const o=GK(t).slice(1).map(r),s=o.length;return"".concat(s," boundar").concat(1===s?"y":"ies",": ").concat(o.join(", "))}if(u_(t.type)){const o=t.domain(),s=o.length,a=s>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(a)}{const o=t.domain();return"values from ".concat(r(o[0])," to ").concat(r(On(o)))}}let XK=0;function dP(e){return e&&e.gradient}function JK(e,t,n){const i=e.gradient;let r=e.id,o="radial"===i?"p_":"";return r||(r=e.id="gradient_"+XK++,"radial"===i?(e.x1=Sc(e.x1,.5),e.y1=Sc(e.y1,.5),e.r1=Sc(e.r1,0),e.x2=Sc(e.x2,.5),e.y2=Sc(e.y2,.5),e.r2=Sc(e.r2,.5),o="p_"):(e.x1=Sc(e.x1,0),e.y1=Sc(e.y1,0),e.x2=Sc(e.x2,1),e.y2=Sc(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function Sc(e,t){return null!=e?e:t}function QK(e,t){var i,n=[];return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i}}}const ZK={basis:{curve:function qxe(e){return new MD(e)}},"basis-closed":{curve:function Yxe(e){return new qq(e)}},"basis-open":{curve:function Kxe(e){return new Yq(e)}},bundle:{curve:Xxe,tension:"beta",value:.85},cardinal:{curve:Jxe,tension:"tension",value:0},"cardinal-open":{curve:Qxe,tension:"tension",value:0},"cardinal-closed":{curve:Zxe,tension:"tension",value:0},"catmull-rom":{curve:nTe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:iTe,tension:"alpha",value:.5},"catmull-rom-open":{curve:rTe,tension:"alpha",value:.5},linear:{curve:_R},"linear-closed":{curve:function oTe(e){return new nY(e)}},monotone:{horizontal:function aTe(e){return new sY(e)},vertical:function sTe(e){return new RD(e)}},natural:{curve:function lTe(e){return new lY(e)}},step:{curve:function uTe(e){return new PD(e,.5)}},"step-after":{curve:function dTe(e){return new PD(e,1)}},"step-before":{curve:function cTe(e){return new PD(e,0)}}};function fP(e,t,n){var i=gt(ZK,e)&&ZK[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&null!=n&&(r=r[i.tension](n))),r}const c2e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},V1=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function c_(e){const t=[];let n,i,r,o,s,a,l,u,c,d;const f=e.slice().replace(V1[0],"###$1").split(V1[1]).slice(1);for(l=0,c=f.length;l<c;++l){for(n=f[l],i=n.slice(1).trim().replace(V1[2],"$1###$2").replace(V1[3],"$1###$2").split(V1[4]),s=n.charAt(0),r=[s],u=0,d=i.length;u<d;++u)(o=+i[u])===o&&r.push(o);if(a=c2e[s.toLowerCase()],r.length-1>a){const h=r.length;for(u=1,t.push([s].concat(r.slice(u,u+=a))),s="M"===s?"L":"m"===s?"l":s;u<h;u+=a)t.push([s].concat(r.slice(u,u+a)))}else t.push(r)}return t}const wh=Math.PI/180,fg=Math.PI/2,xc=2*Math.PI,d_=Math.sqrt(3)/2;var hP={},pP={},eX=[].join;function h2e(e){const t=eX.call(e);if(pP[t])return pP[t];var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,d=-l*a,f=l*s,h=u*a,p=Math.cos(r),m=Math.sin(r),_=Math.cos(o),b=Math.sin(o),v=.5*(o-r),D=Math.sin(.5*v),A=8/3*D*D/Math.sin(v),I=n+p-A*m,L=i+m+A*p,k=n+_,B=i+b,q=k+A*b,W=B-A*_;return pP[t]=[c*I+d*L,f*I+h*L,c*q+d*W,f*q+h*W,c*k+d*B,f*k+h*B]}const Tl=["l",0,0,0,0,0,0,0];function p2e(e,t,n){const i=Tl[0]=e[0];if("a"===i||"A"===i)Tl[1]=t*e[1],Tl[2]=n*e[2],Tl[3]=e[3],Tl[4]=e[4],Tl[5]=e[5],Tl[6]=t*e[6],Tl[7]=n*e[7];else if("h"===i||"H"===i)Tl[1]=t*e[1];else if("v"===i||"V"===i)Tl[1]=n*e[1];else for(var r=1,o=e.length;r<o;++r)Tl[r]=(r%2==1?t:n)*e[r];return Tl}function H1(e,t,n,i,r,o){var s,f,h,p,m,a=null,l=0,u=0,c=0,d=0;null==n&&(n=0),null==i&&(i=0),null==r&&(r=1),null==o&&(o=r),e.beginPath&&e.beginPath();for(var _=0,b=t.length;_<b;++_){switch(s=t[_],(1!==r||1!==o)&&(s=p2e(s,r,o)),s[0]){case"l":e.lineTo((l+=s[1])+n,(u+=s[2])+i);break;case"L":e.lineTo((l=s[1])+n,(u=s[2])+i);break;case"h":e.lineTo((l+=s[1])+n,u+i);break;case"H":e.lineTo((l=s[1])+n,u+i);break;case"v":e.lineTo(l+n,(u+=s[1])+i);break;case"V":e.lineTo(l+n,(u=s[1])+i);break;case"m":e.moveTo((l+=s[1])+n,(u+=s[2])+i);break;case"M":e.moveTo((l=s[1])+n,(u=s[2])+i);break;case"c":e.bezierCurveTo(l+s[1]+n,u+s[2]+i,(c=l+s[3])+n,(d=u+s[4])+i,(f=l+s[5])+n,(h=u+s[6])+i),l=f,u=h;break;case"C":e.bezierCurveTo(s[1]+n,s[2]+i,(c=s[3])+n,(d=s[4])+i,(l=s[5])+n,(u=s[6])+i);break;case"s":e.bezierCurveTo((c=2*l-c)+n,(d=2*u-d)+i,l+s[1]+n,u+s[2]+i,(f=l+s[3])+n,(h=u+s[4])+i),c=l+s[1],d=u+s[2],l=f,u=h;break;case"S":e.bezierCurveTo((c=2*l-c)+n,(d=2*u-d)+i,s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,u=h,c=s[1],d=s[2];break;case"q":e.quadraticCurveTo((c=l+s[1])+n,(d=u+s[2])+i,(f=l+s[3])+n,(h=u+s[4])+i),l=f,u=h;break;case"Q":e.quadraticCurveTo(s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,u=h,c=s[1],d=s[2];break;case"t":f=l+s[1],h=u+s[2],null===a[0].match(/[QqTt]/)?(c=l,d=u):"t"===a[0]?(c=2*l-p,d=2*u-m):"q"===a[0]&&(c=2*l-c,d=2*u-d),p=c,m=d,e.quadraticCurveTo(c+n,d+i,f+n,h+i),c=(l=f)+s[1],d=(u=h)+s[2];break;case"T":e.quadraticCurveTo((c=2*l-c)+n,(d=2*u-d)+i,(f=s[1])+n,(h=s[2])+i),l=f,u=h;break;case"a":tX(e,l+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+i]),l+=s[6],u+=s[7];break;case"A":tX(e,l+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],u=s[7];break;case"z":case"Z":e.closePath()}a=s}}function tX(e,t,n,i){const r=function f2e(e,t,n,i,r,o,s,a,l){const u=eX.call(arguments);if(hP[u])return hP[u];const c=s*wh,d=Math.sin(c),f=Math.cos(c),h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((i=Math.abs(i))*i);m>1&&(m=Math.sqrt(m),n*=m,i*=m);const _=f/n,b=d/n,v=-d/i,D=f/i,A=_*a+b*l,I=v*a+D*l,L=_*e+b*t,k=v*e+D*t;let q=1/((L-A)*(L-A)+(k-I)*(k-I))-.25;q<0&&(q=0);let W=Math.sqrt(q);o==r&&(W=-W);const X=.5*(A+L)-W*(k-I),oe=.5*(I+k)+W*(L-A),ae=Math.atan2(I-oe,A-X);let ie=Math.atan2(k-oe,L-X)-ae;ie<0&&1===o?ie+=xc:ie>0&&0===o&&(ie-=xc);const te=Math.ceil(Math.abs(ie/(fg+.001))),de=[];for(let pe=0;pe<te;++pe)de[pe]=[X,oe,ae+pe*ie/te,ae+(pe+1)*ie/te,n,i,d,f];return hP[u]=de}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let o=0;o<r.length;++o){const s=h2e(r[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const nX=.5773502691896257,iX={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,xc)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,o=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-n),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=d_*n,r=i-n*nX,o=n/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=d_*n,r=i-n*nX;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=d_*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=d_*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=d_*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=d_*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function rX(e){return gt(iX,e)?iX[e]:function g2e(e){if(!gt(gP,e)){const t=c_(e);gP[e]={draw:function(n,i){H1(n,t,0,0,Math.sqrt(i)/2)}}}return gP[e]}(e)}var gP={};const Eh=.448084975506;function m2e(e){return e.x}function _2e(e){return e.y}function y2e(e){return e.width}function v2e(e){return e.height}function qd(e){return"function"==typeof e?e:()=>+e}function iS(e,t,n){return Math.max(t,Math.min(e,n))}function oX(){var e=m2e,t=_2e,n=y2e,i=v2e,r=qd(0),o=r,s=r,a=r,l=null;function u(c,d,f){var h,p=null!=d?d:+e.call(this,c),m=null!=f?f:+t.call(this,c),_=+n.call(this,c),b=+i.call(this,c),v=Math.min(_,b)/2,D=iS(+r.call(this,c),0,v),A=iS(+o.call(this,c),0,v),I=iS(+s.call(this,c),0,v),L=iS(+a.call(this,c),0,v);if(l||(l=h=e_()),D<=0&&A<=0&&I<=0&&L<=0)l.rect(p,m,_,b);else{var k=p+_,B=m+b;l.moveTo(p+D,m),l.lineTo(k-A,m),l.bezierCurveTo(k-Eh*A,m,k,m+Eh*A,k,m+A),l.lineTo(k,B-L),l.bezierCurveTo(k,B-Eh*L,k-Eh*L,B,k-L,B),l.lineTo(p+I,B),l.bezierCurveTo(p+Eh*I,B,p,B-Eh*I,p,B-I),l.lineTo(p,m+D),l.bezierCurveTo(p,m+Eh*D,p+Eh*D,m,p+D,m),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=qd(c),u):e},u.y=function(c){return arguments.length?(t=qd(c),u):t},u.width=function(c){return arguments.length?(n=qd(c),u):n},u.height=function(c){return arguments.length?(i=qd(c),u):i},u.cornerRadius=function(c,d,f,h){return arguments.length?(r=qd(c),o=null!=d?qd(d):r,a=null!=f?qd(f):r,s=null!=h?qd(h):o,u):r},u.context=function(c){return arguments.length?(l=null==c?null:c,u):l},u}function sX(){var e,t,n,i,o,s,a,l,r=null;function u(d,f,h){const p=h/2;if(o){var m=a-f,_=d-s;if(m||_){var b=Math.sqrt(m*m+_*_),v=(m/=b)*l,D=(_/=b)*l,A=Math.atan2(_,m);r.moveTo(s-v,a-D),r.lineTo(d-m*p,f-_*p),r.arc(d,f,p,A-Math.PI,A),r.lineTo(s+v,a+D),r.arc(s,a,l,A,A+Math.PI)}else r.arc(d,f,p,0,xc);r.closePath()}else o=1;s=d,a=f,l=p}function c(d){var f,p,_,h=d.length,m=!1;for(null==r&&(r=_=e_()),f=0;f<=h;++f)!(f<h&&i(p=d[f],f,d))===m&&(m=!m)&&(o=0),m&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(_)return r=null,_+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(i=d,c):i},c.context=function(d){return arguments.length?(r=null==d?null:d,c):r},c}function U1(e,t){return null!=e?e:t}const z1=e=>e.x||0,G1=e=>e.y||0,rS=e=>!1!==e.defined,L2e=function vTe(){var e=hTe,t=pTe,n=ni(0),i=null,r=gTe,o=mTe,s=_Te,a=null;function l(){var u,c,d=+e.apply(this,arguments),f=+t.apply(this,arguments),h=r.apply(this,arguments)-ID,p=o.apply(this,arguments)-ID,m=Xq(p-h),_=p>h;if(a||(a=u=e_()),f<d&&(c=f,f=d,d=c),f>ss)if(m>O1-ss)a.moveTo(f*rg(h),f*vc(h)),a.arc(0,0,f,h,p,!_),d>ss&&(a.moveTo(d*rg(p),d*vc(p)),a.arc(0,0,d,p,h,_));else{var oe,ae,b=h,v=p,D=h,A=p,I=m,L=m,k=s.apply(this,arguments)/2,B=k>ss&&(i?+i.apply(this,arguments):Z0(d*d+f*f)),q=gR(Xq(f-d)/2,+n.apply(this,arguments)),W=q,X=q;if(B>ss){var Se=Jq(B/d*vc(k)),ie=Jq(B/f*vc(k));(I-=2*Se)>ss?(D+=Se*=_?1:-1,A-=Se):(I=0,D=A=(h+p)/2),(L-=2*ie)>ss?(b+=ie*=_?1:-1,v-=ie):(L=0,b=v=(h+p)/2)}var te=f*rg(b),de=f*vc(b),pe=d*rg(A),Re=d*vc(A);if(q>ss){var kt,rt=f*rg(v),Xt=f*vc(v),$t=d*rg(D),Zn=d*vc(D);if(m<gh&&(kt=yTe(te,de,$t,Zn,rt,Xt,pe,Re))){var qi=te-kt[0],Ho=de-kt[1],Oi=rt-kt[0],ro=Xt-kt[1],qe=1/vc(tTe((qi*Oi+Ho*ro)/(Z0(qi*qi+Ho*Ho)*Z0(Oi*Oi+ro*ro)))/2),Et=Z0(kt[0]*kt[0]+kt[1]*kt[1]);W=gR(q,(d-Et)/(qe-1)),X=gR(q,(f-Et)/(qe+1))}}L>ss?X>ss?(oe=FD($t,Zn,te,de,f,X,_),ae=FD(rt,Xt,pe,Re,f,X,_),a.moveTo(oe.cx+oe.x01,oe.cy+oe.y01),X<q?a.arc(oe.cx,oe.cy,X,os(oe.y01,oe.x01),os(ae.y01,ae.x01),!_):(a.arc(oe.cx,oe.cy,X,os(oe.y01,oe.x01),os(oe.y11,oe.x11),!_),a.arc(0,0,f,os(oe.cy+oe.y11,oe.cx+oe.x11),os(ae.cy+ae.y11,ae.cx+ae.x11),!_),a.arc(ae.cx,ae.cy,X,os(ae.y11,ae.x11),os(ae.y01,ae.x01),!_))):(a.moveTo(te,de),a.arc(0,0,f,b,v,!_)):a.moveTo(te,de),d>ss&&I>ss?W>ss?(oe=FD(pe,Re,rt,Xt,d,-W,_),ae=FD(te,de,$t,Zn,d,-W,_),a.lineTo(oe.cx+oe.x01,oe.cy+oe.y01),W<q?a.arc(oe.cx,oe.cy,W,os(oe.y01,oe.x01),os(ae.y01,ae.x01),!_):(a.arc(oe.cx,oe.cy,W,os(oe.y01,oe.x01),os(oe.y11,oe.x11),!_),a.arc(0,0,d,os(oe.cy+oe.y11,oe.cx+oe.x11),os(ae.cy+ae.y11,ae.cx+ae.x11),_),a.arc(ae.cx,ae.cy,W,os(ae.y11,ae.x11),os(ae.y01,ae.x01),!_))):a.arc(0,0,d,A,D,_):a.lineTo(pe,Re)}else a.moveTo(0,0);if(a.closePath(),u)return a=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-gh/2;return[rg(c)*u,vc(c)*u]},l.innerRadius=function(u){return arguments.length?(e="function"==typeof u?u:ni(+u),l):e},l.outerRadius=function(u){return arguments.length?(t="function"==typeof u?u:ni(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n="function"==typeof u?u:ni(+u),l):n},l.padRadius=function(u){return arguments.length?(i=null==u?null:"function"==typeof u?u:ni(+u),l):i},l.startAngle=function(u){return arguments.length?(r="function"==typeof u?u:ni(+u),l):r},l.endAngle=function(u){return arguments.length?(o="function"==typeof u?u:ni(+u),l):o},l.padAngle=function(u){return arguments.length?(s="function"==typeof u?u:ni(+u),l):s},l.context=function(u){return arguments.length?(a=null==u?null:u,l):a},l}().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),j2e=gY().x(z1).y1(G1).y0(e=>(e.y||0)+(e.height||0)).defined(rS),B2e=gY().y(G1).x1(z1).x0(e=>(e.x||0)+(e.width||0)).defined(rS),$2e=pY().x(z1).y(G1).defined(rS),V2e=oX().x(z1).y(G1).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>U1(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>U1(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>U1(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>U1(e.cornerRadiusBottomLeft,e.cornerRadius)||0),H2e=function NTe(e,t){var n=null;function i(){var r;if(n||(n=r=e_()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:ni(e||mY),t="function"==typeof t?t:ni(void 0===t?64:+t),i.type=function(r){return arguments.length?(e="function"==typeof r?r:ni(r),i):e},i.size=function(r){return arguments.length?(t="function"==typeof r?r:ni(+r),i):t},i.context=function(r){return arguments.length?(n=null==r?null:r,i):n},i}().type(e=>rX(e.shape||"circle")).size(e=>U1(e.size,64)),U2e=sX().x(z1).y(G1).defined(rS).size(e=>e.size||1);function mP(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function f_(e,t,n,i){return V2e.context(e)(t,n,i)}var aX=1;function lX(){aX=1}function _P(e,t,n){var i=t.clip,r=e._defs,o=t.clip_id||(t.clip_id="clip"+aX++),s=r.clipping[o]||(r.clipping[o]={id:o});return sn(i)?s.path=i(null):mP(n)?s.path=f_(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function eo(e){this.clear(),e&&this.union(e)}function oS(e){this.mark=e,this.bounds=this.bounds||new eo}function sS(e){oS.call(this,e),this.items=this.items||[]}function yP(e){this._pending=0,this._loader=e||hD()}function uX(e){e._pending+=1}function W1(e){e._pending-=1}function Yd(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const i=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(i+(n?function X2e(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,i):0))}return e}eo.prototype={clone(){return new eo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*i-l*r+u,l*i+a*r+c,a*i-l*s+u,l*i+a*s+c,a*o-l*r+u,l*o+a*r+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},Fe(sS,oS),yP.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return uX(t),t._loader.sanitize(e,{context:"href"}).then(n=>(W1(t),n)).catch(()=>(W1(t),null))},loadImage(e){const t=this,n="undefined"!=typeof Image?Image:null;return uX(t),t._loader.sanitize(e,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const o=new n,s=gt(i,"crossOrigin")?i.crossOrigin:"anonymous";return null!=s&&(o.crossOrigin=s),o.onload=()=>W1(t),o.onerror=()=>W1(t),o.src=r,o}).catch(i=>(W1(t),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(t=>{!function n(i){e.pending()?setTimeout(()=>{n(!0)},10):t(i)}(!1)})}};const J2e=xc-1e-8;let aS,lS,uS,hg,vP,cS,bP,wP;const Ch=(e,t)=>aS.add(e,t),dS=(e,t)=>Ch(lS=e,uS=t),cX=e=>Ch(e,aS.y1),dX=e=>Ch(aS.x1,e),pg=(e,t)=>vP*e+bP*t,gg=(e,t)=>cS*e+wP*t,EP=(e,t)=>Ch(pg(e,t),gg(e,t)),CP=(e,t)=>dS(pg(e,t),gg(e,t));function q1(e,t){return aS=e,t?(hg=t*wh,vP=wP=Math.cos(hg),cS=Math.sin(hg),bP=-cS):(vP=wP=1,hg=cS=bP=0),Q2e}const Q2e={beginPath(){},closePath(){},moveTo:CP,lineTo:CP,rect(e,t,n,i){hg?(EP(e+n,t),EP(e+n,t+i),EP(e,t+i),CP(e,t)):(Ch(e+n,t+i),dS(e,t))},quadraticCurveTo(e,t,n,i){const r=pg(e,t),o=gg(e,t),s=pg(n,i),a=gg(n,i);fX(lS,r,s,cX),fX(uS,o,a,dX),dS(s,a)},bezierCurveTo(e,t,n,i,r,o){const s=pg(e,t),a=gg(e,t),l=pg(n,i),u=gg(n,i),c=pg(r,o),d=gg(r,o);hX(lS,s,l,c,cX),hX(uS,a,u,d,dX),dS(c,d)},arc(e,t,n,i,r,o){if(i+=hg,r+=hg,lS=n*Math.cos(r)+e,uS=n*Math.sin(r)+t,Math.abs(r-i)>J2e)Ch(e-n,t-n),Ch(e+n,t+n);else{const s=u=>Ch(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(i),s(r),r!==i)if((i%=xc)<0&&(i+=xc),(r%=xc)<0&&(r+=xc),r<i&&(o=!o,a=i,i=r,r=a),o)for(r-=xc,a=i-i%fg,l=0;l<4&&a>r;++l,a-=fg)s(a);else for(a=i-i%fg+fg,l=0;l<4&&a<r;++l,a+=fg)s(a)}}};function fX(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function hX(e,t,n,i,r){const o=i-e+3*t-3*n,s=e+n-2*t,a=e-t;let c,l=0,u=0;Math.abs(o)>1e-14?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&r(pX(l,e,t,n,i)),0<u&&u<1&&r(pX(u,e,t,n,i))}function pX(e,t,n,i,r){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*i+a*e*r}var Dh=(Dh=t_(1,1))?Dh.getContext("2d"):null;const DP=new eo;function SP(e){return function(t,n){if(!Dh)return!0;e(Dh,t),DP.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:s}=DP;for(let a=r;a<=s;++a)for(let l=i;l<=o;++l)if(Dh.isPointInPath(l,a))return!0;return!1}}function xP(e,t){return t.contains(e.x||0,e.y||0)}function gX(e,t){const n=e.x||0,i=e.y||0;return t.intersects(DP.set(n,i,n+(e.width||0),i+(e.height||0)))}function mX(e,t){const n=e.x||0,i=e.y||0;return h_(t,n,i,null!=e.x2?e.x2:n,null!=e.y2?e.y2:i)}function h_(e,t,n,i,r){const{x1:o,y1:s,x2:a,y2:l}=e,u=i-t,c=r-n;let h,p,m,_,d=0,f=1;for(_=0;_<4;++_){if(0===_&&(h=-u,p=-(o-t)),1===_&&(h=u,p=a-t),2===_&&(h=-c,p=-(s-n)),3===_&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function p_(e,t){e.globalCompositeOperation=t.blend||"source-over"}function _u(e,t){return null==e?t:e}function _X(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function yX(e,t,n){return dP(n)?function Z2e(e,t,n){const i=n.width(),r=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+_u(t.x1,.5)*i,n.y1+_u(t.y1,.5)*r,Math.max(i,r)*_u(t.r1,0),n.x1+_u(t.x2,.5)*i,n.y1+_u(t.y2,.5)*r,Math.max(i,r)*_u(t.r2,.5));else{const s=_u(t.x1,0),a=_u(t.y1,0),l=_u(t.x2,1),u=_u(t.y2,0);if(s!==l&&a!==u&&i!==r){const c=t_(Math.ceil(i),Math.ceil(r)),d=c.getContext("2d");return d.scale(i,r),d.fillStyle=_X(d.createLinearGradient(s,a,l,u),t.stops),d.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}o=e.createLinearGradient(n.x1+s*i,n.y1+a*r,n.x1+l*i,n.y1+u*r)}return _X(o,t.stops)}(e,n,t.bounds):n}function fS(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=yX(e,t,t.fill),!0)}var eOe=[];function g_(e,t,n){var i=null!=(i=t.strokeWidth)?i:1;return!(i<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=yX(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||eOe),e.lineDashOffset=t.strokeDashOffset||0),!0)}function tOe(e,t){return e.zindex-t.zindex||e.index-t.index}function TP(e){if(!e.zdirty)return e.zitems;var i,r,o,t=e.items,n=[];for(r=0,o=t.length;r<o;++r)(i=t[r]).index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(tOe)}function yu(e,t){var i,r,n=e.items;if(!n||!n.length)return;const o=TP(e);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=o}for(i=0,r=n.length;i<r;++i)t(n[i])}function hS(e,t){var i,r,n=e.items;if(!n||!n.length)return null;const o=TP(e);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===o)for(r=(n=e.items).length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i;return null}function AP(e){return function(t,n,i){yu(n,r=>{(!i||i.intersects(r.bounds))&&vX(e,t,r,r)})}}function nOe(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&vX(e,t,n.items[0],n.items)}}function vX(e,t,n,i){var r=null==n.opacity?1:n.opacity;0!==r&&(e(t,i)||(p_(t,n),n.fill&&fS(t,n,r)&&t.fill(),n.stroke&&g_(t,n,r)&&t.stroke()))}function pS(e){return e=e||bl,function(t,n,i,r,o,s){return i*=t.pixelRatio,r*=t.pixelRatio,hS(n,a=>{const l=a.bounds;if((!l||l.contains(o,s))&&l&&e(t,a,i,r,o,s))return a})}}function Y1(e,t){return function(n,i,r,o){var u,c,s=Array.isArray(i)?i[0]:i,a=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(c=s.strokeCap,n.lineWidth=null!=(u=s.strokeWidth)?u:1,n.lineCap=null!=c?c:"butt"),!e(n,i)&&(a&&n.isPointInPath(r,o)||l&&n.isPointInStroke(r,o))}}function OP(e){return pS(Y1(e))}function mg(e,t){return"translate("+e+","+t+")"}function NP(e){return"rotate("+e+")"}function bX(e){return mg(e.x||0,e.y||0)}function MP(e,t,n){function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=wh),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:function i(s,a){s("transform",function rOe(e){return mg(e.x||0,e.y||0)+(e.angle?" "+NP(e.angle):"")}(a)),s("d",t(null,a))},bound:function r(s,a){return t(q1(s,a.angle),a),Yd(s,a).translate(a.x||0,a.y||0)},draw:AP(o),pick:OP(o),isect:n||SP(o)}}var sOe=MP("arc",function z2e(e,t){return L2e.context(e)(t)});function kP(e,t,n){function o(l,u){l.beginPath(),t(l,u)}const s=Y1(o);return{type:e,tag:"path",nested:!0,attr:function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))},bound:function r(l,u){var c=u.items;return 0===c.length?l:(t(q1(l),c),Yd(l,c[0]))},draw:nOe(o),pick:function a(l,u,c,d,f,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:s(l,p,c*=l.pixelRatio,d*=l.pixelRatio)?p[0]:null},isect:xP,tip:n}}var cOe=kP("area",function G2e(e,t){const n=t[0];return("horizontal"===n.orient?B2e:j2e).curve(fP(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function aOe(e,t){for(var s,a,n="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",r=e.length,o=1/0;--r>=0;)!1!==e[r].defined&&(a=Math.abs(e[r][i]-n))<o&&(o=a,s=e[r]);return s});function wX(e,t){e.beginPath(),mP(t)?f_(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function EX(e){const t=_u(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function CX(e,t){const n=EX(t);e("d",f_(null,t,n,n))}function K1(e,t,n,i){const r=EX(t);e.beginPath(),f_(e,t,(n||0)+r,(i||0)+r)}const _Oe=Y1(K1),yOe=Y1(K1,!1),vOe=Y1(K1,!0);var COe={type:"group",tag:"g",nested:!1,attr:function fOe(e,t){e("transform",bX(t))},bound:function mOe(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Yd(e,t),e.translate(t.x||0,t.y||0)},draw:function bOe(e,t,n){yu(t,i=>{const r=i.x||0,o=i.y||0,s=i.strokeForeground,a=null==i.opacity?1:i.opacity;(i.stroke||i.fill)&&a&&(K1(e,i,r,o),p_(e,i),i.fill&&fS(e,i,a)&&e.fill(),i.stroke&&!s&&g_(e,i,a)&&e.stroke()),e.save(),e.translate(r,o),i.clip&&wX(e,i),n&&n.translate(-r,-o),yu(i,l=>{this.draw(e,l,n)}),n&&n.translate(r,o),e.restore(),s&&i.stroke&&a&&(K1(e,i,r,o),p_(e,i),g_(e,i,a)&&e.stroke())})},pick:function wOe(e,t,n,i,r,o){if(t.bounds&&!t.bounds.contains(r,o)||!t.items)return null;const s=n*e.pixelRatio,a=i*e.pixelRatio;return hS(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(r,o))return;c=l.x||0,d=l.y||0;const m=l.clip;if(m&&(r<c||r>c+(l.width||0)||o<d||o>d+(l.height||0)))return;if(e.save(),e.translate(c,d),c=r-c,d=o-d,m&&mP(l)&&!vOe(e,l,s,a))return e.restore(),null;const _=l.strokeForeground,b=!1!==t.interactive;return b&&_&&l.stroke&&yOe(e,l,s,a)?(e.restore(),l):(u=hS(l,v=>function EOe(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(v,c,d)?this.pick(v,n,i,c,d):null),!u&&b&&(l.fill||!_&&l.stroke)&&_Oe(e,l,s,a)&&(u=l),e.restore(),u||null)})},isect:gX,content:function gOe(e,t,n){e("clip-path",t.clip?_P(n,t,t):null)},background:function hOe(e,t){e("class","background"),e("aria-hidden",!0),CX(e,t)},foreground:function pOe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?CX(e,t):e("d","")}},X1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function IP(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function RP(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function PP(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function gS(e,t){return"center"===e?t/2:"right"===e?t:0}function mS(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var TOe={type:"image",tag:"image",nested:!1,attr:function DOe(e,t,n){const i=IP(t,n),r=RP(t,i),o=PP(t,i),s=(t.x||0)-gS(t.align,r),a=(t.y||0)-mS(t.baseline,o);e("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",X1["xmlns:xlink"],"xlink:href"),e("transform",mg(s,a)),e("width",r),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function SOe(e,t){const n=t.image,i=RP(t,n),r=PP(t,n),o=(t.x||0)-gS(t.align,i),s=(t.y||0)-mS(t.baseline,r);return e.set(o,s,o+i,s+r)},draw:function xOe(e,t,n){yu(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=IP(i,this);let o=RP(i,r),s=PP(i,r);if(0===o||0===s)return;let u,c,d,f,a=(i.x||0)-gS(i.align,o),l=(i.y||0)-mS(i.baseline,s);!1!==i.aspect&&(c=r.width/r.height,d=i.width/i.height,c==c&&d==d&&c!==d&&(d<c?(f=o/c,l+=(s-f)/2,s=f):(f=s*c,a+=(o-f)/2,o=f))),(r.complete||r.toDataURL)&&(p_(e,i),e.globalAlpha=null!=(u=i.opacity)?u:1,e.imageSmoothingEnabled=!1!==i.smooth,e.drawImage(r,a,l,o,s))})},pick:pS(),isect:bl,get:IP,xOffset:gS,yOffset:mS},AOe=kP("line",function W2e(e,t){const n=t[0];return $2e.curve(fP(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function lOe(e,t){for(var r,o,n=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(r=e[i].x-t[0])*r+(o=e[i].y-t[1])*o<n)return e[i];return null});function _S(e,t){var n=t.path;if(null==n)return!0;var i=t.x||0,r=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*wh,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=c_(n)).path=n),a&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(a),H1(e,l,0,0,o,s),e.rotate(-a),e.translate(-i,-r)):H1(e,l,i,r,o,s)}var MOe={type:"path",tag:"path",nested:!1,attr:function OOe(e,t){(1!==(t.scaleX||1)||1!==(t.scaleY||1))&&e("vector-effect","non-scaling-stroke"),e("transform",function oOe(e){return mg(e.x||0,e.y||0)+(e.angle?" "+NP(e.angle):"")+(e.scaleX||e.scaleY?" "+function iOe(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function NOe(e,t){return _S(q1(e,t.angle),t)?e.set(0,0,0,0):Yd(e,t,!0)},draw:AP(_S),pick:OP(_S),isect:SP(_S)};function DX(e,t){e.beginPath(),f_(e,t)}var ROe={type:"rect",tag:"path",nested:!1,attr:function kOe(e,t){e("d",f_(null,t))},bound:function IOe(e,t){var n,i;return Yd(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)},draw:AP(DX),pick:OP(DX),isect:gX};function SX(e,t,n){var i,r,o,s;return!(!t.stroke||!g_(e,t,n)||(i=t.x||0,r=t.y||0,o=null!=t.x2?t.x2:i,s=null!=t.y2?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,s),0))}var BOe={type:"rule",tag:"line",nested:!1,attr:function POe(e,t){e("transform",bX(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function FOe(e,t){var n,i;return Yd(e.set(n=t.x||0,i=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i),t)},draw:function LOe(e,t,n){yu(t,i=>{if(!n||n.intersects(i.bounds)){var r=null==i.opacity?1:i.opacity;r&&SX(e,i,r)&&(p_(e,i),e.stroke())}})},pick:pS(function jOe(e,t,n,i){return!!e.isPointInStroke&&SX(e,t,1)&&e.isPointInStroke(n,i)}),isect:mX},$Oe=MP("shape",function q2e(e,t){return(t.mark.shape||t.shape).context(e)(t)}),VOe=MP("symbol",function Y2e(e,t){return H2e.context(e)(t)},xP);const xX=lG();var Tc={height:Ac,measureWidth:LP,estimateWidth:FP,width:FP,canvas:TX};function TX(e){Tc.width=e&&Dh?LP:FP}function FP(e,t){return AX(xh(e,t),Ac(e))}function AX(e,t){return~~(.8*e.length*t)}function LP(e,t){return Ac(e)<=0||!(t=xh(e,t))?0:OX(t,yS(e))}function OX(e,t){const n=`(${t}) ${e}`;let i=xX.get(n);return void 0===i&&(Dh.font=t,i=Dh.measureText(e).width,xX.set(n,i)),i}function Ac(e){return null!=e.fontSize?+e.fontSize||0:11}function Sh(e){return null!=e.lineHeight?e.lineHeight:Ac(e)+2}function J1(e){return function HOe(e){return Ce(e)?e.length>1?e:e[0]:e}(e.lineBreak&&e.text&&!Ce(e.text)?e.text.split(e.lineBreak):e.text)}function jP(e){const t=J1(e);return(Ce(t)?t.length-1:0)*Sh(e)}function xh(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function zOe(e,t){var n=+e.limit,i=function UOe(e){if(Tc.width===LP){const t=yS(e);return n=>OX(n,t)}{const t=Ac(e);return n=>AX(n,t)}}(e);if(i(t)<n)return t;var l,r=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,a=t.length;if(n-=i(r),o){for(;s<a;)i(t.slice(l=s+a>>>1))>n?s=l+1:a=l;return r+t.slice(s)}for(;s<a;)i(t.slice(0,l=1+(s+a>>>1)))<n?s=l:a=l-1;return t.slice(0,s)+r}(e,n):n}function Q1(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function yS(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ac(e)+"px "+Q1(e,t)}function BP(e){var t=e.baseline,n=Ac(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*Sh(e):"line-bottom"===t?.29*n-.5*Sh(e):0)}TX(!0);const GOe={left:"start",center:"middle",right:"end"},Z1=new eo;function vS(e){var r,t=e.x||0,n=e.y||0,i=e.radius||0;return i&&(r=(e.theta||0)-fg,t+=i*Math.cos(r),n+=i*Math.sin(r)),Z1.x1=t,Z1.y1=n,Z1}function $P(e,t,n){var d,i=Tc.height(t),r=t.align,o=vS(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+BP(t)-Math.round(.8*i),c=J1(t);if(Ce(c)?(i+=Sh(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,Tc.width(t,h)),0)):d=Tc.width(t,c),"center"===r?l-=d/2:"right"===r&&(l-=d),e.set(l+=s,u+=a,l+d,u+i),t.angle&&!n)e.rotate(t.angle*wh,s,a);else if(2===n)return e.rotatedPoints(t.angle*wh,s,a);return e}var XOe={type:"text",tag:"text",nested:!1,attr:function WOe(e,t){var l,n=t.dx||0,i=(t.dy||0)+BP(t),r=vS(t),o=r.x1,s=r.y1,a=t.angle||0;e("text-anchor",GOe[t.align]||"start"),a?(l=mg(o,s)+" "+NP(a),(n||i)&&(l+=" "+mg(n,i))):l=mg(o+n,s+i),e("transform",l)},bound:$P,draw:function qOe(e,t,n){yu(t,i=>{var o,s,a,l,u,c,d,r=null==i.opacity?1:i.opacity;if(!(n&&!n.intersects(i.bounds)||0===r||i.fontSize<=0||null==i.text||0===i.text.length)){if(e.font=yS(i),e.textAlign=i.align||"left",s=(o=vS(i)).x1,a=o.y1,i.angle&&(e.save(),e.translate(s,a),e.rotate(i.angle*wh),s=a=0),s+=i.dx||0,a+=(i.dy||0)+BP(i),c=J1(i),p_(e,i),Ce(c))for(u=Sh(i),l=0;l<c.length;++l)d=xh(i,c[l]),i.fill&&fS(e,i,r)&&e.fillText(d,s,a),i.stroke&&g_(e,i,r)&&e.strokeText(d,s,a),a+=u;else d=xh(i,c),i.fill&&fS(e,i,r)&&e.fillText(d,s,a),i.stroke&&g_(e,i,r)&&e.strokeText(d,s,a);i.angle&&e.restore()}})},pick:pS(function YOe(e,t,n,i,r,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=vS(t),a=s.x1,l=s.y1,u=$P(Z1,t,1),c=-t.angle*wh,d=Math.cos(c),f=Math.sin(c);return u.contains(d*r-f*o+(a-d*a+f*l),f*r+d*o+(l-f*a-d*l))}),isect:function KOe(e,t){const n=$P(Z1,e,2);return h_(t,n[0],n[1],n[2],n[3])||h_(t,n[0],n[1],n[4],n[5])||h_(t,n[4],n[5],n[6],n[7])||h_(t,n[2],n[3],n[6],n[7])}},JOe=kP("trail",function K2e(e,t){return U2e.context(e)(t)},function uOe(e,t){for(var i,r,n=e.length;--n>=0;)if(!1!==e[n].defined&&(i=e[n].x-t[0])*i+(r=e[n].y-t[1])*r<(i=e[n].size||1)*i)return e[n];return null}),Wa={arc:sOe,area:cOe,group:COe,image:TOe,line:AOe,path:MOe,rect:ROe,rule:BOe,shape:$Oe,symbol:VOe,text:XOe,trail:JOe};function VP(e,t,n){var i=Wa[e.mark.marktype];return i.nested&&(e=e.mark),(t||i.bound)(e.bounds||(e.bounds=new eo),e,n)}var NX={mark:null};function MX(e,t,n){var a,l,u,c,i=Wa[e.marktype],r=i.bound,o=e.items,s=o&&o.length;if(i.nested)return s?u=o[0]:(NX.mark=e,u=NX),c=VP(u,r,n),t&&t.union(c)||c;if(t=t||e.bounds&&e.bounds.clear()||new eo,s)for(a=0,l=o.length;a<l;++a)t.union(VP(o[a],r,n));return e.bounds=t}const QOe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function kX(e,t){return JSON.stringify(e,QOe,t)}function IX(e){return RX("string"==typeof e?JSON.parse(e):e)}function RX(e){var i,r,o,t=e.marktype,n=e.items;if(n)for(r=0,o=n.length;r<o;++r)n[r][i=t?"mark":"group"]=e,n[r].zindex&&(n[r][i].zdirty=!0),"group"===(t||i)&&RX(n[r]);return t&&MX(e),e}function HP(e){arguments.length?this.root=IX(e):(this.root=PX({marktype:"group",name:"root",role:"frame"}),this.root.items=[new sS(this.root)])}function PX(e,t){const n={bounds:new eo,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Th(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function UP(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function _a(e,t,n,i){var o,r=e.childNodes[t];return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=Th(e.ownerDocument,n,i),e.insertBefore(r,o)),r}function vu(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function FX(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function bS(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Ah(e,t){this._active=null,this._handlers={},this._loader=e||hD(),this._tooltip=t||eNe}function eNe(e,t,n,i){e.element().setAttribute("title",i||"")}function Oc(e){this._el=null,this._bgcolor=null,this._loader=new yP(e)}HP.prototype={toJSON(e){return kX(this.root,e||0)},mark(e,t,n){const i=PX(e,t=t||this.root.items[0]);return t.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}},Ah.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const i in t)n.push(...t[i]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(e.type,e),o=Th(null,"a");for(const s in i)o.setAttribute(s,i[s]);o.dispatchEvent(r)}).catch(()=>{})},handleTooltip(e,t,n){t&&null!=t.tooltip&&(t=function ZOe(e,t,n,i){var o,s,r=e&&e.mark;if(r&&(o=Wa[r.marktype]).tip){for((s=bS(t,n))[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(r.items,s)}return e}(t,e,this.canvas(),this._origin),this._tooltip.call(this._obj,this,e,t,n&&t&&t.tooltip||null))},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,r=e.bounds,o=r.width(),s=r.height();let a=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,l+=e.y||0;return{x:a,y:l,width:o,height:s,left:a,top:l,right:a+o,bottom:l+s}}},Oc.prototype={initialize(e,t,n,i,r){return this._el=e,this.resize(t,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(o=>{o&&r(),n._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const LX="dragenter",wS="dragleave",jX="dragover",zP="mousedown",ES="mousemove",eb="mouseout",BX="mouseover",CS="click",$X="mousewheel",DS="touchstart",SS="touchmove",xS="touchend",GP=ES,tb=eb,WP=CS;function nb(e,t){Ah.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function VX(e,t){(e=>e===DS||e===SS||e===xS?[DS,SS,xS]:[e])(t).forEach(n=>function uNe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}(e,n))}function HX(e,t,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r||((!r||!r.exit)&&this.fire(n,i),this._active=o,this.fire(t,i)),this.fire(e,i)}}function UX(e){return function(t){this.fire(e,t),this._active=null}}Fe(nb,Ah,{initialize(e,t,n){return this._canvas=e&&UP(e,"canvas"),[CS,zP,ES,eb,wS].forEach(i=>VX(this,i)),Ah.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",LX,wS,jX,zP,"mouseup",ES,eb,BX,CS,"dblclick","wheel",$X,DS,SS,xS],DOMMouseScroll(e){this.fire($X,e)},mousemove:HX(ES,BX,eb),dragover:HX(jX,LX,wS),mouseout:UX(eb),dragleave:UX(wS),mousedown(e){this._down=this._active,this.fire(zP,e)},click(e){this._down===this._active&&(this.fire(CS,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(DS,e,!0)},touchmove(e){this.fire(SS,e,!0)},touchend(e){this.fire(xS,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,r=this._handlers[e];if(t.vegaType=e,e===WP&&i&&i.href?this.handleHref(t,i,i.href):(e===GP||e===tb)&&this.handleTooltip(t,i,e!==tb),r)for(let o=0,s=r.length;o<s;++o)r[o].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(VX(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&i.splice(r,1),this},pickEvent(e){const t=bS(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,r){const o=this.context();return Wa[e.marktype].pick.call(this,o,e,t,n,i,r)}});var dNe=function cNe(){return"undefined"!=typeof window&&window.devicePixelRatio||1}();function TS(e){Oc.call(this,e),this._options={},this._redraw=!1,this._dirty=new eo,this._tempb=new eo}const zX=Oc.prototype;function qP(e,t){Ah.call(this,e,t);const n=this;n._hrefHandler=YP(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=YP(n,(i,r)=>{n.handleTooltip(i,r,i.type!==tb)})}Fe(TS,Oc,{initialize(e,t,n,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:t_(1,1),e&&this._canvas&&(vu(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),zX.initialize.call(this,e,t,n,i,r)},resize(e,t,n,i){if(zX.resize.call(this,e,t,n,i),this._canvas)!function fNe(e,t,n,i,r,o){const s="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,a=e.getContext("2d"),l=s?dNe:r;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||be("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,i=this._width,r=this._height,o=this._dirty,s=((e,t,n)=>(new eo).set(0,0,t,n).translate(-e[0],-e[1]))(n,i,r);t.save();const a=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):function pNe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,s.intersect(o),n);return this.clear(-n[0],-n[1],i,r),this.draw(t,e,a),t.restore(),o.clear(),this},draw(e,t,n){const i=Wa[t.marktype];t.clip&&function dOe(e,t){var n=t.clip;e.save(),sn(n)?(e.beginPath(),n(e),e.clip()):wX(e,t.group)}(e,t),i.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,i){const r=this._options,o=this.context();"pdf"!==r.type&&!r.externalContext&&o.clearRect(e,t,n,i),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,i))}});const YP=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};Fe(qP,Ah,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(WP,this._hrefHandler),i.removeEventListener(GP,this._tooltipHandler),i.removeEventListener(tb,this._tooltipHandler)),this._svg=i=e&&UP(e,"svg"),i&&(i.addEventListener(WP,this._hrefHandler),i.addEventListener(GP,this._tooltipHandler),i.addEventListener(tb,this._tooltipHandler)),Ah.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const o={type:e,handler:t,listener:YP(this,t)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const GX="aria-hidden",KP="aria-label",XP="role",JP="aria-roledescription",WX="graphics-object",QP="graphics-symbol",qX=(e,t,n)=>({[XP]:e,[JP]:t,[KP]:n||void 0}),gNe=hu(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),YX={axis:{desc:"axis",caption:function yNe(e){const t=e.datum,n=e.orient,i=t.title?ZX(e):null,r=e.context,o=r.scales[t.scale].value,s=r.dataflow.locale(),a=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(i?` titled '${i}'`:"")+` for a ${u_(a)?"discrete":a} scale with ${KK(s,o,e)}`}},legend:{desc:"legend",caption:function vNe(e){const t=e.datum,n=t.title?ZX(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,o=Object.keys(r),s=e.context,a=s.scales[r[o[0]]].value,l=s.dataflow.locale();return function wNe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(i)+(n?` titled '${n}'`:"")+` for ${function bNe(e){return e=e.map(t=>t+("fill"===t||"stroke"===t?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+On(e)}(o)} with ${KK(l,a,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${QX(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${QX(e)}'`}},KX={ariaRole:XP,ariaRoleDescription:JP,description:KP};function XX(e,t){const n=!1===t.aria;if(e(GX,n||void 0),n||null==t.description)for(const i in KX)e(KX[i],void 0);else{const i=t.mark.marktype;e(KP,t.description),e(XP,t.ariaRole||("group"===i?WX:QP)),e(JP,t.ariaRoleDescription||`${i} mark`)}}function JX(e){return!1===e.aria?{[GX]:!0}:gNe[e.role]?null:YX[e.role]?function _Ne(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return qX(t.role||QP,t.desc,n.description||i(n))}catch(n){return null}}(e,YX[e.role]):function mNe(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some(i=>null!=i.description&&!1!==i.aria);return qX(n?WX:QP,`${t} mark container`,e.description)}(e)}function QX(e){return Ze(e.text).join(" ")}function ZX(e){try{return Ze(On(e.items).items[0].text).join(" ")}catch(t){return null}}const eJ=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function ZP(){let e="",t="",n="";const i=[],r=()=>t=n="",s=(l,u)=>(null!=u&&(t+=` ${l}="${(e=>eJ(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))(u)}"`),a),a={open(l,...u){(l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)})(l),t="<"+l;for(const c of u)for(const d in c)s(d,c[d]);return a},close(){const l=i.pop();return e+=t?t+(n?`>${n}</${l}>`:"/>"):`</${l}>`,r(),a},attr:s,text:l=>(n+=eJ(l),a),toString:()=>e};return a}const tJ=e=>nJ(ZP(),e)+"";function nJ(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes,i=n.length;for(let r=0;r<i;r++){const o=n[r];3===o.nodeType?e.text(o.nodeValue):nJ(e,o)}}return e.close()}const AS={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},iJ={fill:"none","stroke-miterlimit":10},rJ="http://www.w3.org/2000/xmlns/",to=X1.xmlns;function eF(e){Oc.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const tF=Oc.prototype;function oJ(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function CNe(e,t,n){let i,r,o;if("radial"===t.gradient){let s=_a(e,n++,"pattern",to);Oh(s,{id:"p_"+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=_a(s,0,"rect",to),Oh(s,{width:1,height:1,fill:`url(${aJ()}#${t.id})`}),Oh(e=_a(e,n++,"radialGradient",to),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Oh(e=_a(e,n++,"linearGradient",to),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)o=_a(e,i,"stop",to),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return vu(e,i),n}function DNe(e,t,n){let i;return(e=_a(e,n,"clipPath",to)).setAttribute("id",t.id),t.path?(i=_a(e,0,"path",to),i.setAttribute("d",t.path)):(i=_a(e,0,"rect",to),Oh(i,{x:0,y:0,width:t.width,height:t.height})),vu(e,1),n+1}function sJ(e,t,n,i,r){let s,o=e._svg;if(!o&&(s=t.ownerDocument,o=Th(s,i,to),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===i))){const a=Th(s,"path",to);o.appendChild(a),a.__data__=e;const l=Th(s,"g",to);o.appendChild(l),l.__data__=e;const u=Th(s,"path",to);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==r||function xNe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}Fe(eF,Oc,{initialize(e,t,n,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=_a(e,0,"svg",to),this._svg.setAttributeNS(rJ,"xmlns",to),this._svg.setAttributeNS(rJ,"xmlns:xlink",X1["xmlns:xlink"]),this._svg.setAttribute("version",X1.version),this._svg.setAttribute("class","marks"),vu(e,1),this._root=_a(this._svg,0,"g",to),Oh(this._root,iJ),vu(this._svg,1)),this.background(this._bgcolor),tF.initialize.call(this,e,t,n,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),tF.background.apply(this,arguments)},resize(e,t,n,i){return tF.resize.call(this,e,t,n,i),this._svg&&(Oh(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=_a(e,0,"rect",to),Oh(n,{width:this._width,height:this._height,fill:t}));const i=tJ(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),vu(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,r,o,s,a,l;for(s=0,a=e.length;s<a;++s)if(n=e[s],i=n.mark,i.marktype!==r&&(r=i.marktype,o=Wa[r]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,oJ(n,t),i.items.forEach(u=>{u.dirty=t})),!i.zdirty){if(n.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=o.nested?i.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,oJ(n,t)),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const i=this._svg,r=Wa[t.marktype],o=!1===t.interactive?"none":null,s="g"===r.tag;let a=null,l=0;const u=sJ(t,e,n,"g",i);u.setAttribute("class",FX(t));const c=JX(t);for(const f in c)Bs(u,f,c[f]);s||Bs(u,"pointer-events",o),Bs(u,"clip-path",t.clip?_P(this,t,t.group):null);const d=f=>{const h=this.isDirty(f),p=sJ(f,u,a,r.tag,i);h&&(this._update(r,p,f),s&&function SNe(e,t,n){t=t.lastChild.previousSibling;let i,r=0;yu(n,o=>{i=e.mark(t,o,i),++r}),vu(t,1+r)}(this,p,f)),a=p,++l};return r.nested?t.items.length&&d(t.items[0]):yu(t,d),vu(u,l),u},_update(e,t,n){Kd=t,as=t.__values__,XX(rb,n),e.attr(rb,n,this);const i=TNe[e.type];i&&i.call(this,e,t,n),Kd&&this.style(Kd,n)},style(e,t){if(null!=t)for(const n in AS){let i="font"===n?Q1(t):t[n];if(i===as[n])continue;const r=AS[n];null==i?e.removeAttribute(r):(dP(i)&&(i=JK(i,this._defs.gradient,aJ())),e.setAttribute(r,i+"")),as[n]=i}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const r in t.gradient)n||(t.el=n=_a(e,1,"defs",to)),i=CNe(n,t.gradient[r],i);for(const r in t.clipping)n||(t.el=n=_a(e,1,"defs",to)),i=DNe(n,t.clipping[r],i);n&&(0===i?(e.removeChild(n),t.el=null):vu(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});let Kd=null,as=null;const TNe={group(e,t,n){const i=Kd=t.childNodes[2];as=i.__values__,e.foreground(rb,n,this),as=t.__values__,Kd=t.childNodes[1],e.content(rb,n,this);const r=Kd=t.childNodes[0];e.background(rb,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==as.events&&(Bs(i,"pointer-events",o),Bs(r,"pointer-events",o),as.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Bs(i,"display",null),this.style(r,n),Bs(r,"stroke",null),s&&(n.fill=null),as=i.__values__,this.style(i,n),s&&(n.fill=s),Kd=null}else Bs(i,"display","none")},image(e,t,n){!1===n.smooth?(nF(t,"image-rendering","optimizeSpeed"),nF(t,"image-rendering","pixelated")):nF(t,"image-rendering",null)},text(e,t,n){const i=J1(n);let r,o,s,a;Ce(i)?(o=i.map(l=>xh(n,l)),r=o.join("\n"),r!==as.text&&(vu(t,0),s=t.ownerDocument,a=Sh(n),o.forEach((l,u)=>{const c=Th(s,"tspan",to);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),as.text=r)):(o=xh(n,i),o!==as.text&&(t.textContent=o,as.text=o)),Bs(t,"font-family",Q1(n)),Bs(t,"font-size",Ac(n)+"px"),Bs(t,"font-style",n.fontStyle),Bs(t,"font-variant",n.fontVariant),Bs(t,"font-weight",n.fontWeight)}};function rb(e,t,n){t!==as[e]&&(n?function ANe(e,t,n,i){null!=n?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}(Kd,e,t,n):Bs(Kd,e,t),as[e]=t)}function nF(e,t,n){n!==as[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),as[t]=n)}function Oh(e,t){for(const n in t)Bs(e,n,t[n])}function Bs(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function aJ(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function iF(e){Oc.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Fe(iF,Oc,{svg(){return this._text},_render(e){const t=ZP();t.open("svg",an({},X1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",iJ,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Wa[t.marktype],i=n.tag,r=[XX,n.attr];e.open("g",{class:FX(t),"clip-path":t.clip?_P(this,t,t.group):null},JX(t),{"pointer-events":"g"!==i&&!1===t.interactive?"none":null});const o=s=>{const a=this.href(s);if(a&&e.open("a",a),e.open(i,this.attr(t,s,r,"g"!==i?i:null)),"text"===i){const l=J1(s);if(Ce(l)){const u={x:0,dy:Sh(s)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(xh(s,l[c])).close()}else e.text(xh(s,l))}else if("g"===i){const l=s.strokeForeground,u=s.fill,c=s.stroke;l&&c&&(s.stroke=null),e.open("path",this.attr(t,s,n.background,"bgrect")).close(),e.open("g",this.attr(t,s,n.content)),yu(s,d=>this.mark(e,d)),e.close(),l&&c?(u&&(s.fill=null),s.stroke=c,e.open("path",this.attr(t,s,n.foreground,"bgrect")).close(),u&&(s.fill=u)):e.open("path",this.attr(t,s,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):yu(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[t]=i})}return null},attr(e,t,n,i){const r={},o=(s,a,l,u)=>{r[u||s]=a};return Array.isArray(n)?n.forEach(s=>s(o,t,this)):n(o,t,this),i&&function ONe(e,t,n,i,r){if(null==t||("bgrect"===i&&!1===n.interactive&&(e["pointer-events"]="none"),"bgfore"===i&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill)))return e;"image"===i&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===i&&(e["font-family"]=Q1(t),e["font-size"]=Ac(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in AS){let s=t[o];const a=AS[o];"transparent"===s&&("fill"===a||"stroke"===a)||null!=s&&(dP(s)&&(s=JK(s,r.gradient,"")),e[a]=s)}}(r,t,e,i,this._defs),r},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const r in t){const o=t[r],s=o.stops;"radial"===o.gradient?(e.open("pattern",{id:"p_"+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let a=0;a<s.length;++a)e.open("stop",{offset:s[a].offset,"stop-color":s[a].color}).close();e.close()}for(const r in n){const o=n[r];e.open("clipPath",{id:r}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});const Nh={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},m_={};function OS(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(m_[e]=t,this):m_[e]}function fJ(e,t,n){const i=[],r=(new eo).union(t),o=e.marktype;return o?hJ(e,r,n,i):"group"===o?pJ(e,r,n,i):be("Intersect scene must be mark node or group item.")}function hJ(e,t,n,i){if(function NNe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const r=e.items,o=e.marktype,s=r.length;let a=0;if("group"===o)for(;a<s;++a)pJ(r[a],t,n,i);else for(const l=Wa[o].isect;a<s;++a){const u=r[a];gJ(u,t,l)&&i.push(u)}}return i}function pJ(e,t,n,i){n&&n(e.mark)&&gJ(e,t,Wa.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)hJ(r[l],t,n,i);t.translate(s,a)}return i}function gJ(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}m_.canvas=m_.png={renderer:TS,headless:TS,handler:nb},m_.svg={renderer:eF,headless:iF,handler:qP},m_.none={};const rF=new eo;function mJ(e){const t=e.clip;if(sn(t))t(q1(rF.clear()));else{if(!t)return;rF.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(rF)}function oF(e,t,n){return e===t||("path"===n?_J(e,t):e instanceof Date&&t instanceof Date?+e==+t:mi(e)&&mi(t)?Math.abs(e-t)<=1e-9:e&&t&&(it(e)||it(t))?function kNe(e,t){var r,o,n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(!oF(e[r=n[o]],t[r],r))return!1;return typeof e==typeof t}(e,t):e==t)}function _J(e,t){return oF(c_(e),c_(t))}function INe(){lX(),function u2e(){XK=0}()}const __="top",bu="left",wu="right",Mh="bottom",sF="start",aF="middle",$s="end",NS="group",lF="axis",uF="title",cF="legend",yJ="row-header",vJ="row-footer",bJ="row-title",wJ="column-header",EJ="column-footer",CJ="column-title",dF="none",MS="all",fF="each",hF="flush",kh="column",Ih="row";function SJ(e){he.call(this,null,e)}function kS(e,t,n){return t(e.bounds.clear(),e,n)}Fe(SJ,he,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,o=Wa[r],s=o.bound;let l,a=i.bounds;if(o.nested)i.items.length&&n.dirty(i.items[0]),a=kS(i,s),i.items.forEach(u=>{u.bounds.clear().union(a)});else if(r===NS||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),i.items.forEach(u=>a.union(kS(u,s))),i.role){case lF:case cF:case uF:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(kS(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(kS(u,s))}),l&&(a.clear(),i.items.forEach(u=>a.union(u.bounds)));return mJ(i),t.modifies("bounds")}});const xJ=":vega_identifier:";function pF(e){he.call(this,0,e)}function TJ(e){he.call(this,null,e)}function AJ(e){he.call(this,null,e)}pF.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Fe(pF,he,{transform(e,t){const n=function qNe(e){return e._signals[xJ]||(e._signals[xJ]=e.add(0))}(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,o=>o[i]=o[i]||++r),n.set(this.value=r),t}}),Fe(TJ,he,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function YNe(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===NS?sS:oS;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const OJ={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>r&&NJ(n.bounds,i.bounds,t)?i.opacity=0:(n=i,1))}},NJ=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),MJ=(e,t)=>{for(var o,n=1,i=e.length,r=e[0].bounds;n<i;r=o,++n)if(NJ(r,o=e[n].bounds,t))return!0},KNe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},kJ=e=>(e.forEach(t=>t.opacity=1),e),IJ=(e,t)=>e.reflow(t.modified()).modifies("opacity");function RJ(e){he.call(this,null,e)}Fe(AJ,he,{transform(e,t){const n=OJ[e.method]||OJ.parity,i=e.separation||0;let o,s,r=t.materialize(t.SOURCE).source;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(kJ(r),t=IJ(t,e)),t;if(r=r.filter(KNe),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=kJ(r),t=IJ(t,e),o.length>=3&&MJ(o,i)){do{o=n(o,i)}while(o.length>=3&&MJ(o,i));o.length<3&&!On(r).opacity&&(o.length>1&&(On(o).opacity=0),On(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=((e,t,n)=>{var i=e.range(),r=new eo;return t===__||t===Mh?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),o=>r.encloses(o.bounds)})(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}}),Fe(RJ,he,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const ls=new eo;function y_(e,t,n){return e[t]===n?0:(e[t]=n,1)}function JNe(e){var t=e.items[0].orient;return t===bu||t===wu}function ZNe(e,t,n,i){var A,I,r=t.items[0],o=r.datum,s=null!=r.translate?r.translate:.5,a=r.orient,l=function QNe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(o),u=r.range,c=r.offset,d=r.position,f=r.minExtent,h=r.maxExtent,p=o.title&&r.items[l[2]].items[0],m=r.titlePadding,_=r.bounds,b=p&&jP(p),v=0,D=0;switch(ls.clear().union(_),_.clear(),(A=l[0])>-1&&_.union(r.items[A].bounds),(A=l[1])>-1&&_.union(r.items[A].bounds),a){case __:v=d||0,D=-c,I=Math.max(f,Math.min(h,-_.y1)),_.add(0,-I).add(u,0),p&&IS(e,p,I,m,b,0,-1,_);break;case bu:v=-c,D=d||0,I=Math.max(f,Math.min(h,-_.x1)),_.add(-I,0).add(0,u),p&&IS(e,p,I,m,b,1,-1,_);break;case wu:v=n+c,D=d||0,I=Math.max(f,Math.min(h,_.x2)),_.add(0,0).add(I,u),p&&IS(e,p,I,m,b,1,1,_);break;case Mh:v=d||0,D=i+c,I=Math.max(f,Math.min(h,_.y2)),_.add(0,0).add(u,I),p&&IS(e,p,I,m,0,0,1,_);break;default:v=r.x,D=r.y}return Yd(_.translate(v,D),r),y_(r,"x",v+s)|y_(r,"y",D+s)&&(r.bounds=ls,e.dirty(r),r.bounds=_,e.dirty(r)),r.mark.bounds.clear().union(_)}function IS(e,t,n,i,r,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+r+i);let c=0,d=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const PJ=(e,t)=>Math.floor(Math.min(e,t)),FJ=(e,t)=>Math.ceil(Math.max(e,t));function tMe(e){return(new eo).set(0,0,e.width||0,e.height||0)}function nMe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Gi(e,t,n){const i=it(e)?e[t]:e;return null!=i?i:void 0!==n?n:0}function LJ(e){return e<0?Math.ceil(-e):0}function jJ(e,t,n){var L,k,B,q,W,X,oe,ae,Se,ie,te,i=!n.nodirty,r=n.bounds===hF?tMe:nMe,o=ls.set(0,0,0,0),s=Gi(n.align,kh),a=Gi(n.align,Ih),l=Gi(n.padding,kh),u=Gi(n.padding,Ih),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,_=Array(f),b=Array(d),v=0,D=Array(f),A=Array(f),I=Array(f);for(k=0;k<c;++k)p[k]=0;for(k=0;k<d;++k)b[k]=0;for(k=0;k<f;++k)W=I[k]=r(X=t[k]),X.x=X.x||0,D[k]=0,X.y=X.y||0,A[k]=0,B=k%c,q=~~(k/c),m=Math.max(m,oe=Math.ceil(W.x2)),v=Math.max(v,ae=Math.ceil(W.y2)),p[B]=Math.max(p[B],oe),b[q]=Math.max(b[q],ae),h[k]=l+LJ(W.x1),_[k]=u+LJ(W.y1),i&&e.dirty(t[k]);for(k=0;k<f;++k)k%c==0&&(h[k]=0),k<c&&(_[k]=0);if(s===fF)for(B=1;B<c;++B){for(te=0,k=B;k<f;k+=c)te<h[k]&&(te=h[k]);for(k=B;k<f;k+=c)h[k]=te+p[B-1]}else if(s===MS){for(te=0,k=0;k<f;++k)k%c&&te<h[k]&&(te=h[k]);for(k=0;k<f;++k)k%c&&(h[k]=te+m)}else for(s=!1,B=1;B<c;++B)for(k=B;k<f;k+=c)h[k]+=p[B-1];if(a===fF)for(q=1;q<d;++q){for(te=0,L=(k=q*c)+c;k<L;++k)te<_[k]&&(te=_[k]);for(k=q*c;k<L;++k)_[k]=te+b[q-1]}else if(a===MS){for(te=0,k=c;k<f;++k)te<_[k]&&(te=_[k]);for(k=c;k<f;++k)_[k]=te+v}else for(a=!1,q=1;q<d;++q)for(L=(k=q*c)+c;k<L;++k)_[k]+=b[q-1];for(Se=0,k=0;k<f;++k)D[k]+=(Se=h[k]+(k%c?Se:0))-t[k].x;for(B=0;B<c;++B)for(ie=0,k=B;k<f;k+=c)A[k]+=(ie+=_[k])-t[k].y;if(s&&Gi(n.center,kh)&&d>1)for(k=0;k<f;++k)(Se=(W=s===MS?m:p[k%c])-I[k].x2-t[k].x-D[k])>0&&(D[k]+=Se/2);if(a&&Gi(n.center,Ih)&&1!==c)for(k=0;k<f;++k)(ie=(W=a===MS?v:b[~~(k/c)])-I[k].y2-t[k].y-A[k])>0&&(A[k]+=ie/2);for(k=0;k<f;++k)o.union(I[k].translate(D[k],A[k]));switch(Se=Gi(n.anchor,"x"),ie=Gi(n.anchor,"y"),Gi(n.anchor,kh)){case $s:Se-=o.width();break;case aF:Se-=o.width()/2}switch(Gi(n.anchor,Ih)){case $s:ie-=o.height();break;case aF:ie-=o.height()/2}for(Se=Math.round(Se),ie=Math.round(ie),o.clear(),k=0;k<f;++k)t[k].mark.bounds.clear();for(k=0;k<f;++k)(X=t[k]).x+=D[k]+=Se,X.y+=A[k]+=ie,o.union(X.mark.bounds.union(X.bounds.translate(D[k],A[k]))),i&&e.dirty(X);return o}function rMe(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function oMe(e,t){return e.bounds[t]}function RS(e,t,n,i,r,o,s,a,l,u,c,d,f,h){var b,v,D,A,I,L,k,B,q,p=n.length,m=0,_=0;if(!p)return m;for(b=c;b<p;b+=d)n[b]&&(m=s(m,l(n[b],u)));if(!t.length)return m;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),m+=o,v=0,A=t.length;v<A;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(b=c,v=0,A=t.length;v<A;++v,b+=d){for(I=(L=t[v]).mark.bounds,D=b;D>=0&&null==(k=n[D]);D-=f);a?(B=null==h?k.x:Math.round(k.bounds.x1+h*k.bounds.width()),q=m):(B=m,q=null==h?k.y:Math.round(k.bounds.y1+h*k.bounds.height())),I.union(L.bounds.translate(B-(L.x||0),q-(L.y||0))),L.x=B,L.y=q,e.dirty(L),_=s(_,I[u])}return _}function BJ(e,t,n,i,r,o){if(t){e.dirty(t);var s=n,a=n;i?s=Math.round(r.x1+o*r.width()):a=Math.round(r.y1+o*r.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function lMe(e,t,n,i,r,o,s){const a=function sMe(e,t){const n=e[t]||{};return(i,r)=>null!=n[i]?n[i]:null!=e[i]?e[i]:r}(n,t),l=function aMe(e,t){let n=-1/0;return e.forEach(i=>{null!=i.offset&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}(e,a("offset",0)),u=a("anchor",sF),c=u===$s?1:u===aF?.5:0,d={align:fF,bounds:a("bounds",hF),columns:"vertical"===a("direction")?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case bu:d.anchor={x:Math.floor(i.x1)-l,column:$s,y:c*(s||i.height()+2*i.y1),row:u};break;case wu:d.anchor={x:Math.ceil(i.x2)+l,y:c*(s||i.height()+2*i.y1),row:u};break;case __:d.anchor={y:Math.floor(r.y1)-l,row:$s,x:c*(o||r.width()+2*r.x1),column:u};break;case Mh:d.anchor={y:Math.ceil(r.y2)+l,x:c*(o||r.width()+2*r.x1),column:u};break;case"top-left":d.anchor={x:l,y:l};break;case"top-right":d.anchor={x:o-l,y:l,column:$s};break;case"bottom-left":d.anchor={x:l,y:s-l,row:$s};break;case"bottom-right":d.anchor={x:o-l,y:s-l,column:$s,row:$s}}return d}function uMe(e,t){var l,u,n=t.items[0],i=n.datum,r=n.orient,o=n.bounds,s=n.x,a=n.y;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),function dMe(e,t,n){var i=t.padding,r=i-n.x,o=i-n.y;if(t.datum.title){var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=i-s.x,c=i-s.y;switch(s.orient){case bu:r+=Math.ceil(s.bounds.width())+l;break;case wu:case Mh:break;default:o+=s.bounds.height()+l}switch((r||o)&&ob(e,n,r,o),s.orient){case bu:c+=v_(t,n,s,a,1,1);break;case wu:u+=v_(t,n,s,$s,0,0)+l,c+=v_(t,n,s,a,1,1);break;case Mh:u+=v_(t,n,s,a,0,0),c+=v_(t,n,s,$s,-1,0,1)+l;break;default:u+=v_(t,n,s,a,0,0)}(u||c)&&ob(e,s,u,c),(u=Math.round(s.bounds.x1-i))<0&&(ob(e,n,-u,0),ob(e,s,-u,0))}else(r||o)&&ob(e,n,r,o)}(e,n,n.items[0].items[0]),o=function cMe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),"symbol"===i.type&&function fMe(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}(n.items[0].items[0].items[0].items),r!==dF&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Yd(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function v_(e,t,n,i,r,o,s){const l=n.datum.vgrad,c=("symbol"===e.datum.type||!o&&l||s?t:t.items[0]).bounds[r?"y2":"x2"]-e.padding,d=l&&o?c:0,f=l&&o?0:c,h=r<=0?0:jP(n);return Math.round(i===sF?d:i===$s?f-h:.5*(c-h))}function ob(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function $J(e){he.call(this,null,e)}function VJ(e,t){let n=0;if(void 0===t)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function HJ(e){he.call(this,null,e)}function UJ(e){he.call(this,null,e)}function _Me(){return Qn({})}function zJ(e){he.call(this,null,e)}function GJ(e){he.call(this,[],e)}Fe($J,he,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&function iMe(e,t,n){var c,d,f,h,p,m,_,i=function eMe(e){var r,o,t=e.items,n=t.length,i=0;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(o=(r=t[i]).items,r.marktype===NS)switch(r.role){case lF:case cF:case uF:break;case yJ:s.rowheaders.push(...o);break;case vJ:s.rowfooters.push(...o);break;case wJ:s.colheaders.push(...o);break;case EJ:s.colfooters.push(...o);break;case bJ:s.rowtitle=o[0];break;case CJ:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}(t),r=i.marks,o=n.bounds===hF?rMe:oMe,s=n.offset,a=n.columns||r.length,l=a<=0?1:Math.ceil(r.length/a),u=l*a;const b=jJ(e,r,n);b.empty()&&b.set(0,0,0,0),i.rowheaders&&(m=Gi(n.headerBand,Ih,null),c=RS(e,i.rowheaders,r,0,l,-Gi(s,"rowHeader"),PJ,0,o,"x1",0,a,1,m)),i.colheaders&&(m=Gi(n.headerBand,kh,null),d=RS(e,i.colheaders,r,0,a,-Gi(s,"columnHeader"),PJ,1,o,"y1",0,1,a,m)),i.rowfooters&&(m=Gi(n.footerBand,Ih,null),f=RS(e,i.rowfooters,r,0,l,Gi(s,"rowFooter"),FJ,0,o,"x2",a-1,a,1,m)),i.colfooters&&(m=Gi(n.footerBand,kh,null),h=RS(e,i.colfooters,r,0,a,Gi(s,"columnFooter"),FJ,1,o,"y2",u-a,1,a,m)),i.rowtitle&&(p=Gi(n.titleAnchor,Ih),_=Gi(s,"rowTitle"),_=p===$s?f+_:c-_,m=Gi(n.titleBand,Ih,.5),BJ(e,i.rowtitle,_,0,b,m)),i.coltitle&&(p=Gi(n.titleAnchor,kh),_=Gi(s,"columnTitle"),_=p===$s?h+_:d-_,m=Gi(n.titleBand,kh,.5),BJ(e,i.coltitle,_,1,b,m))}(n,i,e.layout),function gMe(e,t,n){var c,d,f,p,m,i=t.items,r=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=(new eo).set(0,0,r,o),a=s.clone(),l=s.clone(),u=[];for(p=0,m=i.length;p<m;++p)switch(d=i[p],d.role){case lF:(JNe(d)?a:l).union(ZNe(e,d,r,o));break;case uF:c=d;break;case cF:u.push(uMe(e,d));break;case"frame":case"scope":case yJ:case vJ:case bJ:case wJ:case EJ:case CJ:a.union(d.bounds),l.union(d.bounds);break;default:s.union(d.bounds)}if(u.length){const _={};u.forEach(b=>{(f=b.orient||wu)!==dF&&(_[f]||(_[f]=[])).push(b)});for(const b in _){const v=_[b];jJ(e,v,lMe(v,b,n.legends,a,l,r,o))}u.forEach(b=>{const v=b.bounds;if(v.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=v,e.dirty(b)),n.autosize&&"fit"===n.autosize.type)switch(b.orient){case bu:case wu:s.add(v.x1,0).add(v.x2,0);break;case __:case Mh:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(function hMe(e,t,n,i,r){var D,o=t.items[0],a=o.orient,l=o.anchor,u=o.offset,c=o.padding,d=o.items[0].items[0],f=o.items[1]&&o.items[1].items[0],h=a===bu||a===wu?i:n,p=0,m=0,_=0,b=0,v=0;if(o.frame!==NS?a===bu?(p=r.y2,h=r.y1):a===wu?(p=r.y1,h=r.y2):(p=r.x1,h=r.x2):a===bu&&(p=i,h=0),D=l===sF?p:l===$s?h:(p+h)/2,f&&f.text){switch(a){case __:case Mh:v=d.bounds.height()+c;break;case bu:b=d.bounds.width()+c;break;case wu:b=-d.bounds.width()-c}ls.clear().union(f.bounds),ls.translate(b-(f.x||0),v-(f.y||0)),y_(f,"x",b)|y_(f,"y",v)&&(e.dirty(f),f.bounds.clear().union(ls),f.mark.bounds.clear().union(ls),e.dirty(f)),ls.clear().union(f.bounds)}else ls.clear();switch(ls.union(d.bounds),a){case __:m=D,_=r.y1-ls.height()-u;break;case bu:m=r.x1-ls.width()-u,_=D;break;case wu:m=r.x2+ls.width()+u,_=D;break;case Mh:m=D,_=r.y2+u;break;default:m=o.x,_=o.y}return y_(o,"x",m)|y_(o,"y",_)&&(ls.translate(m,_),e.dirty(o),o.bounds.clear().union(ls),t.bounds.clear().union(ls),e.dirty(o)),o.bounds}(e,c,r,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),function mMe(e,t,n,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if("padding"===r.contains){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===dF?(u=0,d=0,l=s,c=a):"fit"===o?(l=Math.max(0,s-u-f),c=Math.max(0,a-d-h)):"fit-x"===o?(l=Math.max(0,s-u-f),a=c+d+h):"fit-y"===o?(s=l+u+f,c=Math.max(0,a-d-h)):"pad"===o&&(s=l+u+f,a=c+d+h),e._resizeView(s,a,l,c,[u,d],r.resize)}(e,t,s,n)}(n,i,e)}),function pMe(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?t.reflow():t}}),Fe(HJ,he,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.scale,a=lP(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),l=e.format||HK(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?VK(o,e.values,a):uP(o,a);return r&&(i.rem=r),r=u.map((c,d)=>Qn({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&r.length&&r.push(Qn({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}}),Fe(UJ,he,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||_Me,o=e.key||bt,s=this.value;return Ce(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(o))&&be("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=function yMe(e){const t=F0().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,i.add.push(u)):i.mod.push(u):(u=r(a),s.set(l,u),i.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,i.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}}),Fe(zJ,he,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,o=t.encode;if(Ce(o)){if(!n.changed()&&!o.every(d=>r[d]))return t.StopPropagation;o=o[0],n.encode=null}var s="enter"===o,a=r.update||eh,l=r.enter||eh,u=r.exit||eh,c=(o&&!s?r[o]:a)||eh;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==eh&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==eh&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),s||c!==eh){const d=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(d,f=>{const h=l(f,e)||i;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||i)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),Fe(GJ,he,{transform(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var f,h,p,m,_,n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.type||tS,s=e.scale,a=+e.limit,l=lP(s,null==e.count?5:e.count,e.minstep),c=e.format||WK(n,s,l,o,e.formatSpecifier,e.formatType,!!e.values||o===tS),d=e.values||GK(s,l);return r&&(i.rem=r),o===tS?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,a-1),_=!0):r=d,sn(p=e.size)?(!e.values&&0===s(r[0])&&(r=r.slice(1)),m=r.reduce((b,v)=>Math.max(b,p(v,e)),0)):p=ns(m=p||8),r=r.map((b,v)=>Qn({index:v,label:c(b,v,r),value:b,offset:m,size:p(b,e)})),_&&(_=d[r.length],r.push(Qn({index:r.length,label:"\u2026".concat(d.length-r.length," entries"),value:_,offset:m,size:p(_,e)})))):"gradient"===o?(f=s.domain(),h=LK(s,f[0],On(f)),d.length<3&&!e.values&&f[0]!==On(f)&&(d=[f[0],On(f)]),r=d.map((b,v)=>Qn({index:v,label:c(b,v,d),value:b,perc:h(b)}))):(p=d.length-1,h=function a2e(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+On(t),o=r-i;if(e.type===QD){const s=n?o/n:.1;i-=s,r+=s,o=r-i}return s=>(s-i)/o}(s),r=d.map((b,v)=>Qn({index:v,label:c(b,v,d),value:b,perc:v?h(b):0,perc2:v===p?1:h(d[v+1])}))),i.source=r,i.add=r,this.value=r,i}});const vMe=e=>e.source.x,bMe=e=>e.source.y,wMe=e=>e.target.x,EMe=e=>e.target.y;function gF(e){he.call(this,{},e)}gF.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Fe(gF,he,{transform(e,t){var n=e.sourceX||vMe,i=e.sourceY||bMe,r=e.targetX||wMe,o=e.targetY||EMe,s=e.as||"path",l=e.shape||"line",u=KJ.get(l+"-"+(e.orient||"vertical"))||KJ.get(l);return u||be("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),i(c),r(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const WJ=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,qJ=(e,t,n,i)=>{var r=n-e,o=i-t,s=Math.sqrt(r*r+o*o)/2;return"M"+e+","+t+"A"+s+","+s+" "+180*Math.atan2(o,r)/Math.PI+" 0 1 "+n+","+i},YJ=(e,t,n,i)=>{const r=n-e,o=i-t,s=.2*(r+o),a=.2*(o-r);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(i-s)+" "+n+","+i},KJ=F0({line:WJ,"line-radial":(e,t,n,i)=>WJ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),arc:qJ,"arc-radial":(e,t,n,i)=>qJ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),curve:YJ,"curve-radial":(e,t,n,i)=>YJ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),"orthogonal-horizontal":(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,"orthogonal-vertical":(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,"orthogonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n);return"M"+t*r+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*s+","+t*a+"L"+i*s+","+i*a},"diagonal-horizontal":(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},"diagonal-vertical":(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},"diagonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*o+"C"+l*r+","+l*o+" "+l*s+","+l*a+" "+i*s+","+i*a}});function mF(e){he.call(this,null,e)}function XJ(e){return rP(e)&&e!==Dc}mF.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Fe(mF,he,{transform(e,t){var p,m,_,n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],s=e.startAngle||0,a=null!=e.endAngle?e.endAngle:2*Math.PI,l=t.source,u=l.map(e.field||I0),c=u.length,d=s,f=(a-s)/VJ(u),h=Ga(c);for(e.sort&&h.sort((b,v)=>u[b]-u[v]),p=0;p<c;++p)_=u[h[p]],(m=l[h[p]])[i]=d,m[r]=d+=_*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const TMe=hu(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function JJ(e){he.call(this,null,e),this.modified(!0)}function QJ(e,t,n){return kK(e)&&Math.abs(t.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0))!==t.length&&n.warn("Log scale domain includes zero: "+Be(t)),t}function ZJ(e,t,n){return sn(e)&&(t||n)?PK(e,_F(t||[0,1],n)):e}function _F(e,t){return t?e.slice().reverse():e}function eQ(e){he.call(this,null,e)}Fe(JJ,he,{transform(e,t){var n=t.dataflow,i=this.value,r=function AMe(e){var i,t=e.type,n="";return t===Dc?Dc+"-"+s_:(function OMe(e){const t=e.type;return rP(t)&&t!==ug&&t!==cg&&(e.scheme||e.range&&e.range.length&&e.range.every(Qe))}(e)&&(n=2===(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?Dc+"-":3===i?a_+"-":""),(n+t||s_).toLowerCase())}(e);for(r in(!i||r!==i.type)&&(this.value=i=Gn(r)()),e)if(!TMe[r]){if("padding"===r&&XJ(i.type))continue;sn(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return function RMe(e,t,n){var i=e.type,r=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function PMe(e,t,n){return"band"!==e&&e!==eP&&be("Only band and point scales support rangeStep."),[0,t.rangeStep*QR(n,e===eP?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0,(null!=t.paddingOuter?t.paddingOuter:t.padding)||0)]}(i,t,n);else if(t.scheme&&sn(o=function FMe(e,t,n){var o,i=t.schemeExtent;return Ce(t.scheme)?o=eS(t.scheme,t.interpolate,t.interpolateGamma):(o=aP(t.scheme.toLowerCase()))||be("Unrecognized scheme name: ".concat(t.scheme)),n=e===QD?n+1:e===tP?n-1:e===l_||e===JD?+t.schemeCount||5:n,IK(e)?ZJ(o,i,t.reverse):sn(o)?FK(ZJ(o,i),n):e===ZR?o:o.slice(0,n)}(i,t,n))){if(e.interpolator)return e.interpolator(o);be("Scale type ".concat(i," does not support interpolating color schemes."))}if(o&&IK(i))return e.interpolator(eS(_F(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(sP(t.interpolate,t.interpolateGamma)):sn(e.round)?e.round(r):sn(e.rangeRound)&&e.interpolate(r?R1:vh),o&&e.range(_F(o,t.reverse))}(i,e,function IMe(e,t,n){let i=t.bins;if(i&&!Ce(i)){const r=e.domain(),o=r[0],s=On(r),a=i.step;let l=null==i.start?o:i.start,u=null==i.stop?s:i.stop;a||be("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),i=Ga(l,u+a/2,a)}return i?e.bins=i:e.bins&&delete e.bins,e.type===tP&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}(i,e,function NMe(e,t,n){const i=function MMe(e,t,n){return t?(e.domain(QJ(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(i>-1)return i;var a,l,r=t.domain,o=e.type,s=t.zero||void 0===t.zero&&function xMe(e){const t=e.type;return!e.bins&&(t===s_||t===L1||t===j1)}(e);if(!r)return 0;if(XJ(o)&&t.padding&&r[0]!==On(r)&&(r=function kMe(e,t,n,i,r,o){var s=Math.abs(On(n)-n[0]),a=s/(s-2*i),l=e===Wd?fk(t,null,a):e===j1?QC(t,null,a,.5):e===L1?QC(t,null,a,r||1):e===XD?hk(t,null,a,o||1):dk(t,null,a);return(t=t.slice())[0]=l[0],t[t.length-1]=l[1],t}(o,r,t.range,t.padding,t.exponent,t.constant)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),null!=t.domainMin&&(r[0]=t.domainMin),null!=t.domainMax&&(r[a]=t.domainMax),null!=t.domainMid)){const u=(l=t.domainMid)>r[a]?a+1:l<r[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return e.domain(QJ(o,r,n)),o===ZR&&e.unknown(t.domainImplicit?DR:void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&lP(e,t.nice)||null),r.length}(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),Fe(eQ,he,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(tg(e.sort)),this.modified(n),t}});const iQ="normalize",rQ=["y0","y1"];function yF(e){he.call(this,null,e)}function LMe(e,t,n,i,r){for(var l,o=(t-e.sum)/2,s=e.length,a=0;a<s;++a)(l=e[a])[i]=o,l[r]=o+=Math.abs(n(l))}function jMe(e,t,n,i,r){for(var c,o=1/e.sum,s=0,a=e.length,l=0,u=0;l<a;++l)(c=e[l])[i]=s,c[r]=s=o*(u+=Math.abs(n(c)))}function BMe(e,t,n,i,r){for(var u,c,o=0,s=0,a=e.length,l=0;l<a;++l)(u=+n(c=e[l]))<0?(c[i]=s,c[r]=s+=u):(c[i]=o,c[r]=o+=u)}yF.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center",iQ]},{name:"as",type:"string",array:!0,length:2,default:rQ}]},Fe(yF,he,{transform(e,t){var l,u,c,d,n=e.as||rQ,i=n[0],r=n[1],o=tg(e.sort),s=e.field||I0,a="center"===e.offset?LMe:e.offset===iQ?jMe:BMe;for(l=function $Me(e,t,n,i){var s,a,l,u,c,d,f,h,p,r=[],o=m=>m(c);if(null==t)r.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],(f=s[d=t.map(o)])||(s[d]=f=[],r.push(f)),f.push(c);for(d=0,p=0,u=r.length;d<u;++d){for(a=0,h=0,l=(f=r[d]).length;a<l;++a)h+=Math.abs(i(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return r.max=p,r}(t.source,e.groupby,o,s),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,s,i,r);return t.reflow(e.modified()).modifies(n)}});const sb=e=>e;function PS(e,t){e&&sQ.hasOwnProperty(e.type)&&sQ[e.type](e,t)}var oQ={Feature:function(e,t){PS(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)PS(n[i].geometry,t)}},sQ={Sphere:function(e,t){t.sphere()},Point:function(e,t){t.point((e=e.coordinates)[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)t.point((e=n[i])[0],e[1],e[2])},LineString:function(e,t){vF(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)vF(n[i],t,0)},Polygon:function(e,t){aQ(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)aQ(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)PS(n[i],t)}};function vF(e,t,n){var o,i=-1,r=e.length-n;for(t.lineStart();++i<r;)t.point((o=e[i])[0],o[1],o[2]);t.lineEnd()}function aQ(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)vF(e[n],t,1);t.polygonEnd()}function Xd(e,t){e&&oQ.hasOwnProperty(e.type)?oQ[e.type](e,t):PS(e,t)}class Fo{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[i++]=a),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let i,r,o,n=this._n,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,o=r-(s-i),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(r=2*o,i=s+r,r==i-s&&(s=i))}return s}}var xt=1e-6,FS=1e-12,mn=Math.PI,pr=mn/2,LS=mn/4,Vs=2*mn,Dr=180/mn,_n=mn/180,Fn=Math.abs,b_=Math.atan,Al=Math.atan2,Ot=Math.cos,jS=Math.ceil,lQ=Math.exp,bF=(Math,Math.hypot),BS=Math.log,wF=Math.pow,mt=Math.sin,Ol=Math.sign||function(e){return e>0?1:e<0?-1:0},Hs=Math.sqrt,EF=Math.tan;function uQ(e){return e>1?0:e<-1?mn:Math.acos(e)}function ya(e){return e>1?pr:e<-1?-pr:Math.asin(e)}function Lo(){}var cQ,dQ,SF,xF,CF=new Fo,DF=new Fo,Rh={point:Lo,lineStart:Lo,lineEnd:Lo,polygonStart:function(){Rh.lineStart=VMe,Rh.lineEnd=UMe},polygonEnd:function(){Rh.lineStart=Rh.lineEnd=Rh.point=Lo,CF.add(Fn(DF)),DF=new Fo},result:function(){var e=CF/2;return CF=new Fo,e}};function VMe(){Rh.point=HMe}function HMe(e,t){Rh.point=fQ,cQ=SF=e,dQ=xF=t}function fQ(e,t){DF.add(xF*e-SF*t),SF=e,xF=t}function UMe(){fQ(cQ,dQ)}const hQ=Rh;var w_=1/0,$S=w_,ab=-w_,VS=ab,zMe={point:function GMe(e,t){e<w_&&(w_=e),e>ab&&(ab=e),t<$S&&($S=t),t>VS&&(VS=t)},lineStart:Lo,lineEnd:Lo,polygonStart:Lo,polygonEnd:Lo,result:function(){var e=[[w_,$S],[ab,VS]];return ab=VS=-($S=w_=1/0),e}};const HS=zMe;var pQ,gQ,Nc,Mc,TF=0,AF=0,lb=0,US=0,zS=0,E_=0,OF=0,NF=0,ub=0,Eu={point:_g,lineStart:mQ,lineEnd:_Q,polygonStart:function(){Eu.lineStart=YMe,Eu.lineEnd=KMe},polygonEnd:function(){Eu.point=_g,Eu.lineStart=mQ,Eu.lineEnd=_Q},result:function(){var e=ub?[OF/ub,NF/ub]:E_?[US/E_,zS/E_]:lb?[TF/lb,AF/lb]:[NaN,NaN];return TF=AF=lb=US=zS=E_=OF=NF=ub=0,e}};function _g(e,t){TF+=e,AF+=t,++lb}function mQ(){Eu.point=WMe}function WMe(e,t){Eu.point=qMe,_g(Nc=e,Mc=t)}function qMe(e,t){var n=e-Nc,i=t-Mc,r=Hs(n*n+i*i);US+=r*(Nc+e)/2,zS+=r*(Mc+t)/2,E_+=r,_g(Nc=e,Mc=t)}function _Q(){Eu.point=_g}function YMe(){Eu.point=XMe}function KMe(){yQ(pQ,gQ)}function XMe(e,t){Eu.point=yQ,_g(pQ=Nc=e,gQ=Mc=t)}function yQ(e,t){var n=e-Nc,i=t-Mc,r=Hs(n*n+i*i);US+=r*(Nc+e)/2,zS+=r*(Mc+t)/2,E_+=r,OF+=(r=Mc*e-Nc*t)*(Nc+e),NF+=r*(Mc+t),ub+=3*r,_g(Nc=e,Mc=t)}const vQ=Eu;function bQ(e){this._context=e}bQ.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Vs)}},result:Lo};var kF,wQ,EQ,cb,db,MF=new Fo,GS={point:Lo,lineStart:function(){GS.point=JMe},lineEnd:function(){kF&&CQ(wQ,EQ),GS.point=Lo},polygonStart:function(){kF=!0},polygonEnd:function(){kF=null},result:function(){var e=+MF;return MF=new Fo,e}};function JMe(e,t){GS.point=CQ,wQ=cb=e,EQ=db=t}function CQ(e,t){MF.add(Hs((cb-=e)*cb+(db-=t)*db)),cb=e,db=t}const DQ=GS;function SQ(){this._string=[]}function xQ(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function TQ(e,t){var i,r,n=4.5;function o(s){return s&&("function"==typeof n&&r.pointRadius(+n.apply(this,arguments)),Xd(s,i(r))),r.result()}return o.area=function(s){return Xd(s,i(hQ)),hQ.result()},o.measure=function(s){return Xd(s,i(DQ)),DQ.result()},o.bounds=function(s){return Xd(s,i(HS)),HS.result()},o.centroid=function(s){return Xd(s,i(vQ)),vQ.result()},o.projection=function(s){return arguments.length?(i=null==s?(e=null,sb):(e=s).stream,o):e},o.context=function(s){return arguments.length?(r=null==s?(t=null,new SQ):new bQ(t=s),"function"!=typeof n&&r.pointRadius(n),o):t},o.pointRadius=function(s){return arguments.length?(n="function"==typeof s?s:(r.pointRadius(+s),+s),o):n},o.projection(e).context(t)}function AQ(){var t,e=[];return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Lo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function WS(e,t){return Fn(e[0]-t[0])<xt&&Fn(e[1]-t[1])<xt}function qS(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function OQ(e,t,n,i,r){var a,l,o=[],s=[];if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,v,_=p[0],b=p[m];if(WS(_,b)){if(!_[2]&&!b[2]){for(r.lineStart(),a=0;a<m;++a)r.point((_=p[a])[0],_[1]);return void r.lineEnd()}b[0]+=2*xt}o.push(v=new qS(_,p,null,!0)),s.push(v.o=new qS(_,null,v,!1)),o.push(v=new qS(b,p,null,!1)),s.push(v.o=new qS(b,null,v,!0))}}),o.length){for(s.sort(t),NQ(o),NQ(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var c,d,u=o[0];;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)r.point((d=c[a])[0],d[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(h)for(a=(c=f.p.z).length-1;a>=0;--a)r.point((d=c[a])[0],d[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,h=!h}while(!f.v);r.lineEnd()}}}function NQ(e){if(t=e.length){for(var t,r,n=0,i=e[0];++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function YS(e){return[Al(e[1],e[0]),ya(e[2])]}function yg(e){var t=e[0],n=e[1],i=Ot(n);return[i*Ot(t),i*mt(t),mt(n)]}function KS(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function C_(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function IF(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function XS(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function JS(e){var t=Hs(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function RF(e){return Fn(e[0])<=mn?e[0]:Ol(e[0])*((Fn(e[0])+mn)%Vs-mn)}function MQ(e){return Array.from(function*ZMe(e){for(const t of e)yield*t}(e))}function kQ(e,t,n,i){return function(r){var u,c,d,o=t(r),s=AQ(),a=t(s),l=!1,f={point:h,lineStart:m,lineEnd:_,polygonStart:function(){f.point=b,f.lineStart=v,f.lineEnd=D,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=_,c=MQ(c);var A=function QMe(e,t){var n=RF(t),i=t[1],r=mt(i),o=[mt(n),-Ot(n),0],s=0,a=0,l=new Fo;1===r?i=pr+xt:-1===r&&(i=-pr-xt);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=RF(h),m=h[1]/2+LS,_=mt(m),b=Ot(m),v=0;v<f;++v,p=A,_=L,b=k,h=D){var D=d[v],A=RF(D),I=D[1]/2+LS,L=mt(I),k=Ot(I),B=A-p,q=B>=0?1:-1,W=q*B,X=W>mn,oe=_*L;if(l.add(Al(oe*q*mt(W),b*k+oe*Ot(W))),s+=X?B+q*Vs:B,X^p>=n^A>=n){var ae=C_(yg(h),yg(D));JS(ae);var Se=C_(o,ae);JS(Se);var ie=(X^B>=0?-1:1)*ya(Se[2]);(i>ie||i===ie&&(ae[0]||ae[1]))&&(a+=X^B>=0?1:-1)}}return(s<-xt||s<xt&&l<-FS)^1&a}(u,i);c.length?(l||(r.polygonStart(),l=!0),OQ(c,tke,A,n,r)):A&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(A,I){e(A,I)&&r.point(A,I)}function p(A,I){o.point(A,I)}function m(){f.point=p,o.lineStart()}function _(){f.point=h,o.lineEnd()}function b(A,I){d.push([A,I]),a.point(A,I)}function v(){a.lineStart(),d=[]}function D(){b(d[0][0],d[0][1]),a.lineEnd();var L,B,q,W,A=a.clean(),I=s.result(),k=I.length;if(d.pop(),u.push(d),d=null,k){if(1&A){if((B=(q=I[0]).length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),L=0;L<B;++L)r.point((W=q[L])[0],W[1]);r.lineEnd()}return}k>1&&2&A&&I.push(I.pop().concat(I.shift())),c.push(I.filter(eke))}}return f}}function eke(e){return e.length>1}function tke(e,t){return((e=e.x)[0]<0?e[1]-pr-xt:pr-e[1])-((t=t.x)[0]<0?t[1]-pr-xt:pr-t[1])}SQ.prototype={_radius:4.5,_circle:xQ(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=xQ(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};const IQ=kQ(function(){return!0},function nke(e){var r,t=NaN,n=NaN,i=NaN;return{lineStart:function(){e.lineStart(),r=1},point:function(o,s){var a=o>0?mn:-mn,l=Fn(o-t);Fn(l-mn)<xt?(e.point(t,n=(n+s)/2>0?pr:-pr),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),r=0):i!==a&&l>=mn&&(Fn(t-i)<xt&&(t-=i*xt),Fn(o-a)<xt&&(o-=a*xt),n=function ike(e,t,n,i){var r,o,s=mt(e-n);return Fn(s)>xt?b_((mt(t)*(o=Ot(i))*mt(n)-mt(i)*(r=Ot(t))*mt(e))/(r*o*s)):(t+i)/2}(t,n,o,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=o,n=s),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}},function rke(e,t,n,i){var r;if(null==e)i.point(-mn,r=n*pr),i.point(0,r),i.point(mn,r),i.point(mn,0),i.point(mn,-r),i.point(0,-r),i.point(-mn,-r),i.point(-mn,0),i.point(-mn,r);else if(Fn(e[0]-t[0])>xt){var o=e[0]<t[0]?mn:-mn;i.point(-o,r=n*o/2),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-mn,-pr]);function PQ(e,t){(t=yg(t))[0]-=e,JS(t);var n=uQ(-t[1]);return((-t[2]<0?-n:n)+Vs-xt)%Vs}function oke(e){var t=Ot(e),n=6*_n,i=t>0,r=Fn(t)>xt;function s(c,d){return Ot(c)*Ot(d)>t}function l(c,d,f){var m=[1,0,0],_=C_(yg(c),yg(d)),b=KS(_,_),v=_[0],D=b-v*v;if(!D)return!f&&c;var A=t*b/D,I=-t*v/D,L=C_(m,_),k=XS(m,A);IF(k,XS(_,I));var q=L,W=KS(k,q),X=KS(q,q),oe=W*W-X*(KS(k,k)-1);if(!(oe<0)){var ae=Hs(oe),Se=XS(q,(-W-ae)/X);if(IF(Se,k),Se=YS(Se),!f)return Se;var Re,ie=c[0],te=d[0],de=c[1],pe=d[1];te<ie&&(Re=ie,ie=te,te=Re);var rt=te-ie,Xt=Fn(rt-mn)<xt;if(!Xt&&pe<de&&(Re=de,de=pe,pe=Re),Xt||rt<xt?Xt?de+pe>0^Se[1]<(Fn(Se[0]-ie)<xt?de:pe):de<=Se[1]&&Se[1]<=pe:rt>mn^(ie<=Se[0]&&Se[0]<=te)){var Zn=XS(q,(-W+ae)/X);return IF(Zn,k),[Se,YS(Zn)]}}}function u(c,d){var f=i?e:mn-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return kQ(s,function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(_,b){var D,v=[_,b],A=s(_,b),I=i?A?0:u(_,b):A?u(_+(_<0?mn:-mn),b):0;if(!d&&(p=h=A)&&c.lineStart(),A!==h&&(!(D=l(d,v))||WS(d,D)||WS(v,D))&&(v[2]=1),A!==h)m=0,A?(c.lineStart(),D=l(v,d),c.point(D[0],D[1])):(D=l(d,v),c.point(D[0],D[1],2),c.lineEnd()),d=D;else if(r&&d&&i^A){var L;!(I&f)&&(L=l(v,d,!0))&&(m=0,i?(c.lineStart(),c.point(L[0][0],L[0][1]),c.point(L[1][0],L[1][1]),c.lineEnd()):(c.point(L[1][0],L[1][1]),c.lineEnd(),c.lineStart(),c.point(L[0][0],L[0][1],3)))}A&&(!d||!WS(d,v))&&c.point(v[0],v[1]),d=v,h=A,f=I},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}},function o(c,d,f,h){!function RQ(e,t,n,i,r,o){if(n){var s=Ot(t),a=mt(t),l=i*n;null==r?(r=t+i*Vs,o=t-l/2):(r=PQ(s,r),o=PQ(s,o),(i>0?r<o:r>o)&&(r+=i*Vs));for(var u,c=r;i>0?c>o:c<o;c-=l)u=YS([s,-a*Ot(c),-a*mt(c)]),e.point(u[0],u[1])}}(h,e,n,f,c,d)},i?[0,-e]:[-mn,e-mn])}var fb=1e9,QS=-fb;function FQ(e,t,n,i){function r(u,c){return e<=u&&u<=n&&t<=c&&c<=i}function o(u,c,d,f){var h=0,p=0;if(null==u||(h=s(u,d))!==(p=s(c,d))||l(u,c)<0^d>0)do{f.point(0===h||3===h?e:n,h>1?i:t)}while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function s(u,c){return Fn(u[0]-e)<xt?c>0?0:3:Fn(u[0]-n)<xt?c>0?2:1:Fn(u[1]-t)<xt?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=s(u,1),f=s(c,1);return d!==f?d-f:0===d?c[1]-u[1]:1===d?u[0]-c[0]:2===d?u[1]-c[1]:c[0]-u[0]}return function(u){var f,h,p,m,_,b,v,D,A,I,L,c=u,d=AQ(),k={point:B,lineStart:function oe(){k.point=Se,h&&h.push(p=[]),I=!0,A=!1,v=D=NaN},lineEnd:function ae(){f&&(Se(m,_),b&&A&&d.rejoin(),f.push(d.result())),k.point=B,A&&c.lineEnd()},polygonStart:function W(){c=d,f=[],h=[],L=!0},polygonEnd:function X(){var ie=function q(){for(var ie=0,te=0,de=h.length;te<de;++te)for(var $t,Zn,pe=h[te],Re=1,rt=pe.length,Xt=pe[0],kt=Xt[0],qi=Xt[1];Re<rt;++Re)$t=kt,Zn=qi,kt=(Xt=pe[Re])[0],qi=Xt[1],Zn<=i?qi>i&&(kt-$t)*(i-Zn)>(qi-Zn)*(e-$t)&&++ie:qi<=i&&(kt-$t)*(i-Zn)<(qi-Zn)*(e-$t)&&--ie;return ie}(),te=L&&ie,de=(f=MQ(f)).length;(te||de)&&(u.polygonStart(),te&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),de&&OQ(f,a,ie,o,u),u.polygonEnd()),c=u,f=h=p=null}};function B(ie,te){r(ie,te)&&c.point(ie,te)}function Se(ie,te){var de=r(ie,te);if(h&&p.push([ie,te]),I)m=ie,_=te,b=de,I=!1,de&&(c.lineStart(),c.point(ie,te));else if(de&&A)c.point(ie,te);else{var pe=[v=Math.max(QS,Math.min(fb,v)),D=Math.max(QS,Math.min(fb,D))],Re=[ie=Math.max(QS,Math.min(fb,ie)),te=Math.max(QS,Math.min(fb,te))];!function ske(e,t,n,i,r,o){var p,s=e[0],a=e[1],c=0,d=1,f=t[0]-s,h=t[1]-a;if(p=n-s,f||!(p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=r-s,f||!(p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=i-a,h||!(p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=o-a,h||!(p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=s+c*f,e[1]=a+c*h),d<1&&(t[0]=s+d*f,t[1]=a+d*h),!0}}}}}(pe,Re,e,t,n,i)?de&&(c.lineStart(),c.point(ie,te),L=!1):(A||(c.lineStart(),c.point(pe[0],pe[1])),c.point(Re[0],Re[1]),de||c.lineEnd(),L=!1)}v=ie,D=te,A=de}return k}}function PF(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return(i=t.invert(i,r))&&e.invert(i[0],i[1])}),n}function FF(e,t){return[Fn(e)>mn?e+Math.round(-e/Vs)*Vs:e,t]}function LQ(e,t,n){return(e%=Vs)?t||n?PF(BQ(e),$Q(t,n)):BQ(e):t||n?$Q(t,n):FF}function jQ(e){return function(t,n){return[(t+=e)>mn?t-Vs:t<-mn?t+Vs:t,n]}}function BQ(e){var t=jQ(e);return t.invert=jQ(-e),t}function $Q(e,t){var n=Ot(e),i=mt(e),r=Ot(t),o=mt(t);function s(a,l){var u=Ot(l),c=Ot(a)*u,d=mt(a)*u,f=mt(l),h=f*n+c*i;return[Al(d*r-h*o,c*n-f*i),ya(h*r+d*o)]}return s.invert=function(a,l){var u=Ot(l),c=Ot(a)*u,d=mt(a)*u,f=mt(l),h=f*r-d*o;return[Al(d*r+f*o,c*n+h*i),ya(h*n-c*i)]},s}function hb(e){return function(t){var n=new LF;for(var i in e)n[i]=e[i];return n.stream=t,n}}function LF(){}function jF(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),Xd(n,e.stream(HS)),t(HS.result()),null!=i&&e.clipExtent(i),e}function ZS(e,t,n){return jF(e,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function BF(e,t,n){return ZS(e,[[0,0],t],n)}function $F(e,t,n){return jF(e,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),s=(r-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];e.scale(150*o).translate([s,a])},n)}function VF(e,t,n){return jF(e,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),s=-o*i[0][0],a=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,a])},n)}FF.invert=FF,LF.prototype={constructor:LF,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var lke=Ot(30*_n);function HQ(e,t){return+t?function cke(e,t){function n(i,r,o,s,a,l,u,c,d,f,h,p,m,_){var b=u-i,v=c-r,D=b*b+v*v;if(D>4*t&&m--){var A=s+f,I=a+h,L=l+p,k=Hs(A*A+I*I+L*L),B=ya(L/=k),q=Fn(Fn(L)-1)<xt||Fn(o-d)<xt?(o+d)/2:Al(I,A),W=e(q,B),X=W[0],oe=W[1],ae=X-i,Se=oe-r,ie=v*ae-b*Se;(ie*ie/D>t||Fn((b*ae+v*Se)/D-.5)>.3||s*f+a*h+l*p<lke)&&(n(i,r,o,s,a,l,X,oe,q,A/=k,I/=k,L,m,_),_.point(X,oe),n(X,oe,q,A,I,L,u,c,d,f,h,p,m,_))}}return function(i){var r,o,s,a,l,u,c,d,f,h,p,m,_={point:b,lineStart:v,lineEnd:A,polygonStart:function(){i.polygonStart(),_.lineStart=I},polygonEnd:function(){i.polygonEnd(),_.lineStart=v}};function b(B,q){B=e(B,q),i.point(B[0],B[1])}function v(){d=NaN,_.point=D,i.lineStart()}function D(B,q){var W=yg([B,q]),X=e(B,q);n(d,f,c,h,p,m,d=X[0],f=X[1],c=B,h=W[0],p=W[1],m=W[2],16,i),i.point(d,f)}function A(){_.point=b,i.lineEnd()}function I(){v(),_.point=L,_.lineEnd=k}function L(B,q){D(r=B,q),o=d,s=f,a=h,l=p,u=m,_.point=D}function k(){n(d,f,c,h,p,m,o,s,r,a,l,u,16,i),_.lineEnd=A,A()}return _}}(e,t):function uke(e){return hb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var dke=hb({point:function(e,t){this.stream.point(e*_n,t*_n)}});function UQ(e,t,n,i,r,o){if(!o)return function hke(e,t,n,i,r){function o(s,a){return[t+e*(s*=i),n-e*(a*=r)]}return o.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*r]},o}(e,t,n,i,r);var s=Ot(o),a=mt(o),l=s*e,u=a*e,c=s/e,d=a/e,f=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(m,_){return[l*(m*=i)-u*(_*=r)+t,n-u*m-l*_]}return p.invert=function(m,_){return[i*(c*m-d*_+f),r*(h-d*m-c*_)]},p}function kc(e){return zQ(function(){return e})()}function zQ(e){var t,c,b,v,D,L,k,B,q,W,n=150,i=480,r=250,o=0,s=0,a=0,l=0,u=0,d=0,f=1,h=1,p=null,m=IQ,_=null,A=sb,I=.5;function X(ie){return B(ie[0]*_n,ie[1]*_n)}function oe(ie){return(ie=B.invert(ie[0],ie[1]))&&[ie[0]*Dr,ie[1]*Dr]}function ae(){var ie=UQ(n,0,0,f,h,d).apply(null,t(o,s)),te=UQ(n,i-ie[0],r-ie[1],f,h,d);return c=LQ(a,l,u),k=PF(t,te),B=PF(c,k),L=HQ(k,I),Se()}function Se(){return q=W=null,X}return X.stream=function(ie){return q&&W===ie?q:q=dke(function fke(e){return hb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}(c)(m(L(A(W=ie)))))},X.preclip=function(ie){return arguments.length?(m=ie,p=void 0,Se()):m},X.postclip=function(ie){return arguments.length?(A=ie,_=b=v=D=null,Se()):A},X.clipAngle=function(ie){return arguments.length?(m=+ie?oke(p=ie*_n):(p=null,IQ),Se()):p*Dr},X.clipExtent=function(ie){return arguments.length?(A=null==ie?(_=b=v=D=null,sb):FQ(_=+ie[0][0],b=+ie[0][1],v=+ie[1][0],D=+ie[1][1]),Se()):null==_?null:[[_,b],[v,D]]},X.scale=function(ie){return arguments.length?(n=+ie,ae()):n},X.translate=function(ie){return arguments.length?(i=+ie[0],r=+ie[1],ae()):[i,r]},X.center=function(ie){return arguments.length?(o=ie[0]%360*_n,s=ie[1]%360*_n,ae()):[o*Dr,s*Dr]},X.rotate=function(ie){return arguments.length?(a=ie[0]%360*_n,l=ie[1]%360*_n,u=ie.length>2?ie[2]%360*_n:0,ae()):[a*Dr,l*Dr,u*Dr]},X.angle=function(ie){return arguments.length?(d=ie%360*_n,ae()):d*Dr},X.reflectX=function(ie){return arguments.length?(f=ie?-1:1,ae()):f<0},X.reflectY=function(ie){return arguments.length?(h=ie?-1:1,ae()):h<0},X.precision=function(ie){return arguments.length?(L=HQ(k,I=ie*ie),Se()):Hs(I)},X.fitExtent=function(ie,te){return ZS(X,ie,te)},X.fitSize=function(ie,te){return BF(X,ie,te)},X.fitWidth=function(ie,te){return $F(X,ie,te)},X.fitHeight=function(ie,te){return VF(X,ie,te)},function(){return t=e.apply(this,arguments),X.invert=t.invert&&oe,ae()}}function HF(e){var t=0,n=mn/3,i=zQ(e),r=i(t,n);return r.parallels=function(o){return arguments.length?i(t=o[0]*_n,n=o[1]*_n):[t*Dr,n*Dr]},r}function gke(e,t){var n=mt(e),i=(n+mt(t))/2;if(Fn(i)<xt)return function pke(e){var t=Ot(e);function n(i,r){return[i*t,mt(r)/t]}return n.invert=function(i,r){return[i/t,ya(r*t)]},n}(e);var r=1+n*(2*i-n),o=Hs(r)/i;function s(a,l){var u=Hs(r-2*i*mt(l))/i;return[u*mt(a*=i),o-u*Ot(a)]}return s.invert=function(a,l){var u=o-l,c=Al(a,Fn(u))*Ol(u);return u*i<0&&(c-=mn*Ol(a)*Ol(u)),[c/i,ya((r-(a*a+u*u)*i*i)/(2*i))]},s}function ex(){return HF(gke).scale(155.424).center([0,33.6442])}function GQ(){return ex().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function WQ(e){return function(t,n){var i=Ot(t),r=Ot(n),o=e(i*r);return o===1/0?[2,0]:[o*r*mt(t),o*mt(n)]}}function pb(e){return function(t,n){var i=Hs(t*t+n*n),r=e(i),o=mt(r),s=Ot(r);return[Al(t*o,i*s),ya(i&&n*o/i)]}}var qQ=WQ(function(e){return Hs(2/(1+e))});qQ.invert=pb(function(e){return 2*ya(e/2)});var YQ=WQ(function(e){return(e=uQ(e))&&e/mt(e)});function tx(e,t){return[e,BS(EF((pr+t)/2))]}function KQ(e){var a,l,u,t=kc(e),n=t.center,i=t.scale,r=t.translate,o=t.clipExtent,s=null;function c(){var d=mn*i(),f=t(function ake(e){function t(n){return(n=e(n[0]*_n,n[1]*_n))[0]*=Dr,n[1]*=Dr,n}return e=LQ(e[0]*_n,e[1]*_n,e.length>2?e[2]*_n:0),t.invert=function(n){return(n=e.invert(n[0]*_n,n[1]*_n))[0]*=Dr,n[1]*=Dr,n},t}(t.rotate()).invert([0,0]));return o(null==s?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===tx?[[Math.max(f[0]-d,s),a],[Math.min(f[0]+d,l),u]]:[[s,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return t.scale=function(d){return arguments.length?(i(d),c()):i()},t.translate=function(d){return arguments.length?(r(d),c()):r()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(null==d?s=a=l=u=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):null==s?null:[[s,a],[l,u]]},c()}function nx(e){return EF((pr+e)/2)}function wke(e,t){var n=Ot(e),i=e===t?mt(e):BS(n/Ot(t))/BS(nx(t)/nx(e)),r=n*wF(nx(e),i)/i;if(!i)return tx;function o(s,a){r>0?a<-pr+xt&&(a=-pr+xt):a>pr-xt&&(a=pr-xt);var l=r/wF(nx(a),i);return[l*mt(i*s),r-l*Ot(i*s)]}return o.invert=function(s,a){var l=r-a,u=Ol(i)*Hs(s*s+l*l),c=Al(s,Fn(l))*Ol(l);return l*i<0&&(c-=mn*Ol(s)*Ol(l)),[c/i,2*b_(wF(r/u,1/i))-pr]},o}function ix(e,t){return[e,t]}function Dke(e,t){var n=Ot(e),i=e===t?mt(e):(n-Ot(t))/(t-e),r=n/i+e;if(Fn(i)<xt)return ix;function o(s,a){var l=r-a,u=i*s;return[l*mt(u),r-l*Ot(u)]}return o.invert=function(s,a){var l=r-a,u=Al(s,Fn(l))*Ol(l);return l*i<0&&(u-=mn*Ol(s)*Ol(l)),[u/i,r-Ol(i)*Hs(s*s+l*l)]},o}YQ.invert=pb(function(e){return e}),tx.invert=function(e,t){return[e,2*b_(lQ(t))-pr]},ix.invert=ix;var gb=1.340264,mb=-.081106,_b=893e-6,yb=.003796,rx=Hs(3)/2;function XQ(e,t){var n=ya(rx*mt(t)),i=n*n,r=i*i*i;return[e*Ot(n)/(rx*(gb+3*mb*i+r*(7*_b+9*yb*i))),n*(gb+mb*i+r*(_b+yb*i))]}function JQ(e,t){var n=Ot(t),i=Ot(e)*n;return[n*mt(e)/i,mt(t)/i]}function QQ(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function ZQ(e,t){return[Ot(t)*mt(e),mt(t)]}function eZ(e,t){var n=Ot(t),i=1+Ot(e)*n;return[n*mt(e)/i,mt(t)/i]}function tZ(e,t){return[BS(EF((pr+t)/2)),-e]}XQ.invert=function(e,t){for(var s,n=t,i=n*n,r=i*i*i,o=0;o<12&&(r=(i=(n-=s=(n*(gb+mb*i+r*(_b+yb*i))-t)/(gb+3*mb*i+r*(7*_b+9*yb*i)))*n)*i*i,!(Fn(s)<FS));++o);return[rx*e*(gb+3*mb*i+r*(7*_b+9*yb*i))/Ot(n),ya(mt(n)/rx)]},JQ.invert=pb(b_),QQ.invert=function(e,t){var r,n=t,i=25;do{var o=n*n,s=o*o;n-=r=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-t)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Fn(r)>xt&&--i>0);return[e/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},ZQ.invert=pb(ya),eZ.invert=pb(function(e){return 2*b_(e)}),tZ.invert=function(e,t){return[-t,2*b_(lQ(e))-pr]};var Rke=Math.abs,UF=(Math,Math,Math,Math.cos),ox=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),Ph=(Math,Math.PI),zF=Ph/2,iZ=(Math,sx(2));function rZ(e){return e>1?zF:e<-1?-zF:Math.asin(e)}function sx(e){return e>0?Math.sqrt(e):0}function Fke(e,t){var r,n=e*ox(t),i=30;do{t-=r=(t+ox(t)-n)/(1+UF(t))}while(Rke(r)>1e-6&&--i>0);return t/2}sx(Ph);var jke=function Lke(e,t,n){function i(r,o){return[e*r*UF(o=Fke(n,o)),t*ox(o)]}return i.invert=function(r,o){return o=rZ(o/t),[r/(e*UF(o)),rZ((2*o+ox(2*o))/n)]},i}(iZ/zF,iZ,Ph);const $ke=TQ(),GF=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Vke(e,t){return function n(){const i=t();return i.type=e,i.path=TQ().projection(i),i.copy=i.copy||function(){const r=n();return GF.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},i}}function WF(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(ax[e]=Vke(e,t),this):ax[e]||null}function oZ(e){return e&&e.path||$ke}const ax={albers:GQ,albersusa:function _ke(){var e,t,i,o,a,l,n=GQ(),r=ex().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ex().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,i.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}function d(){return e=t=null,c}return c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,_=(f[1]-p[1])/h;return(_>=.12&&_<.234&&m>=-.425&&m<-.214?r:_>=.166&&_<.234&&m>=-.214&&m<-.115?s:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=function mke(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([n.stream(t=f),r.stream(f),s.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),r.precision(f),s.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),r.scale(.35*f),s.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return i=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),o=r.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+xt,m+.12*h+xt],[p-.214*h-xt,m+.234*h-xt]]).stream(u),a=s.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+xt,m+.166*h+xt],[p-.115*h-xt,m+.234*h-xt]]).stream(u),d()},c.fitExtent=function(f,h){return ZS(c,f,h)},c.fitSize=function(f,h){return BF(c,f,h)},c.fitWidth=function(f,h){return $F(c,f,h)},c.fitHeight=function(f,h){return VF(c,f,h)},c.scale(1070)},azimuthalequalarea:function yke(){return kc(qQ).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function vke(){return kc(YQ).scale(79.4188).clipAngle(179.999)},conicconformal:function Eke(){return HF(wke).scale(109.5).parallels([30,30])},conicequalarea:ex,conicequidistant:function Ske(){return HF(Dke).scale(131.154).center([0,13.9389])},equalEarth:function Tke(){return kc(XQ).scale(177.158)},equirectangular:function Cke(){return kc(ix).scale(152.63)},gnomonic:function Ake(){return kc(JQ).scale(144.049).clipAngle(60)},identity:function Oke(){var s,a,u,c,d,_,b,e=1,t=0,n=0,i=1,r=1,o=0,l=null,f=1,h=1,p=hb({point:function(A,I){var L=D([A,I]);this.stream.point(L[0],L[1])}}),m=sb;function v(){return f=e*i,h=e*r,_=b=null,D}function D(A){var I=A[0]*f,L=A[1]*h;if(o){var k=L*s-I*a;I=I*s+L*a,L=k}return[I+t,L+n]}return D.invert=function(A){var I=A[0]-t,L=A[1]-n;if(o){var k=L*s+I*a;I=I*s-L*a,L=k}return[I/f,L/h]},D.stream=function(A){return _&&b===A?_:_=p(m(b=A))},D.postclip=function(A){return arguments.length?(m=A,l=u=c=d=null,v()):m},D.clipExtent=function(A){return arguments.length?(m=null==A?(l=u=c=d=null,sb):FQ(l=+A[0][0],u=+A[0][1],c=+A[1][0],d=+A[1][1]),v()):null==l?null:[[l,u],[c,d]]},D.scale=function(A){return arguments.length?(e=+A,v()):e},D.translate=function(A){return arguments.length?(t=+A[0],n=+A[1],v()):[t,n]},D.angle=function(A){return arguments.length?(a=mt(o=A%360*_n),s=Ot(o),v()):o*Dr},D.reflectX=function(A){return arguments.length?(i=A?-1:1,v()):i<0},D.reflectY=function(A){return arguments.length?(r=A?-1:1,v()):r<0},D.fitExtent=function(A,I){return ZS(D,A,I)},D.fitSize=function(A,I){return BF(D,A,I)},D.fitWidth=function(A,I){return $F(D,A,I)},D.fitHeight=function(A,I){return VF(D,A,I)},D},mercator:function bke(){return KQ(tx).scale(961/Vs)},mollweide:function Bke(){return kc(jke).scale(169.529)},naturalEarth1:function Nke(){return kc(QQ).scale(175.295)},orthographic:function Mke(){return kc(ZQ).scale(249.5).clipAngle(90+xt)},stereographic:function kke(){return kc(eZ).scale(250).clipAngle(142)},transversemercator:function Ike(){var e=KQ(tZ),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):[(i=t())[1],-i[0]]},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):[(i=n())[0],i[1],i[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in ax)WF(e,ax[e]);function sZ(e,t,n){var i=Ga(e,t-xt,n).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function aZ(e,t,n){var i=Ga(e,t-xt,n).concat(t);return function(r){return i.map(function(o){return[o,r]})}}function Hke(){}const Jd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function uZ(){var e=1,t=1,n=a;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],d=[];return function o(l,u,c){var h,p,_,b,v,d=new Array,f=new Array;for(h=p=-1,Jd[(_=l[0]>=u)<<1].forEach(D);++h<e-1;)Jd[_|(_=l[h+1]>=u)<<1].forEach(D);for(Jd[_<<0].forEach(D);++p<t-1;){for(h=-1,Jd[(_=l[p*e+e]>=u)<<1|(b=l[p*e]>=u)<<2].forEach(D);++h<e-1;)v=b,Jd[_|(_=l[p*e+e+h+1]>=u)<<1|(b=l[p*e+h+1]>=u)<<2|v<<3].forEach(D);Jd[_|b<<3].forEach(D)}for(h=-1,Jd[(b=l[p*e]>=u)<<2].forEach(D);++h<e-1;)v=b,Jd[(b=l[p*e+h+1]>=u)<<2|v<<3].forEach(D);function D(A){var q,W,I=[A[0][0]+h,A[0][1]+p],L=[A[1][0]+h,A[1][1]+p],k=s(I),B=s(L);(q=f[k])?(W=d[B])?(delete f[q.end],delete d[W.start],q===W?(q.ring.push(L),c(q.ring)):d[q.start]=f[W.end]={start:q.start,end:W.end,ring:q.ring.concat(W.ring)}):(delete f[q.end],q.ring.push(L),f[q.end=B]=q):(q=d[B])?(W=f[k])?(delete d[q.start],delete f[W.end],q===W?(q.ring.push(L),c(q.ring)):d[W.start]=f[q.end]={start:W.start,end:q.end,ring:W.ring.concat(q.ring)}):(delete d[q.start],q.ring.unshift(I),d[q.start=k]=q):d[k]=f[B]={start:k,end:B,ring:[I,L]}}Jd[b<<3].forEach(D)}(l,u,f=>{n(f,l,u),function Uke(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var m,h=0,p=c.length;h<p;++h)if(-1!==zke((m=c[h])[0],f))return void m.push(f)}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l){return 2*l[0]+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var _,f=d[0],h=d[1],p=0|f,m=0|h,b=u[m*e+p];f>0&&f<e&&p===f&&(d[0]=f+(c-(_=u[m*e+p-1]))/(b-_)-.5),h>0&&h<t&&m===h&&(d[1]=h+(c-(_=u[(m-1)*e+p]))/(b-_)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||be("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(n=l?a:Hke,i):n===a},i}function zke(e,t){for(var r,n=-1,i=t.length;++n<i;)if(r=Gke(e,t[n]))return r;return 0}function Gke(e,t){for(var n=t[0],i=t[1],r=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if(Wke(l,d,t))return 0;c>i!=h>i&&n<(f-u)*(i-c)/(h-c)+u&&(r=-r)}return r}function Wke(e,t,n){var i;return function qke(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function Yke(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[i=+(e[0]===t[0])],n[i],t[i])}function cZ(e,t,n){return function(i){var r=mc(i),o=n?Math.min(r[0],0):r[0],s=r[1],a=s-o,l=t?rh(o,s,e):a/(e+1);return Ga(o+l,s,l)}}function qF(e){he.call(this,null,e)}function dZ(e,t,n,i,r){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-o)*t+i,d[1]=(d[1]-s)*n+r}return function(d){return d.coordinates.forEach(l),d}}function fZ(e,t,n){const i=e>=0?e:DI(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function YF(e){return sn(e)?e:ns(+e)}function hZ(){var e=l=>l[0],t=l=>l[1],n=I0,i=[-1,-1],r=960,o=500,s=2;function a(l,u){const c=fZ(i[0],l,e)>>s,d=fZ(i[1],l,t)>>s,f=c?c+2:0,h=d?d+2:0,p=2*f+(r>>s),m=2*h+(o>>s),_=new Float32Array(p*m),b=new Float32Array(p*m);let v=_;l.forEach(A=>{const I=f+(+e(A)>>s),L=h+(+t(A)>>s);I>=0&&I<p&&L>=0&&L<m&&(_[I+L*p]+=+n(A))}),c>0&&d>0?(D_(p,m,_,b,c),S_(p,m,b,_,d),D_(p,m,_,b,c),S_(p,m,b,_,d),D_(p,m,_,b,c),S_(p,m,b,_,d)):c>0?(D_(p,m,_,b,c),D_(p,m,b,_,c),D_(p,m,_,b,c),v=b):d>0&&(S_(p,m,_,b,d),S_(p,m,b,_,d),S_(p,m,_,b,d),v=b);const D=u?Math.pow(2,-2*s):1/VJ(v);for(let A=0,I=p*m;A<I;++A)v[A]*=D;return{values:v,scale:1<<s,width:p,height:m,x1:f,y1:h,x2:f+(r>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=YF(l),a):e},a.y=function(l){return arguments.length?(t=YF(l),a):t},a.weight=function(l){return arguments.length?(n=YF(l),a):n},a.size=function(l){if(!arguments.length)return[r,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||be("invalid size"),r=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||be("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(1===(l=Ze(l)).length&&(l=[+l[0],+l[0]]),2!==l.length&&be("invalid bandwidth"),i=l,a):i},a}function D_(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<t;++s)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=n[a+s*e]),a>=r&&(a>=o&&(l-=n[a-o+s*e]),i[a-r+s*e]=l/Math.min(a+1,e-1+o-a,o))}function S_(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<e;++s)for(let a=0,l=0;a<t+r;++a)a<t&&(l+=n[s+a*e]),a>=r&&(a>=o&&(l-=n[s+(a-o)*e]),i[s+(a-r)*e]=l/Math.min(a+1,t-1+o-a,o))}function KF(e){he.call(this,null,e)}qF.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Fe(qF,he,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||es,o=uZ().smooth(!1!==e.smooth),s=e.thresholds||function Kke(e,t,n){const i=cZ(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?i:i(e.map(r=>ig(t(r).values)))}(i,r,e),a=null===e.as?null:e.as||"contour",l=[];return i.forEach(u=>{const c=r(u),d=o.size([c.width,c.height])(c.values,Ce(s)?s:s(c.values));(function Xke(e,t,n,i){let r=i.scale||t.scale,o=i.translate||t.translate;if(sn(r)&&(r=r(n,i)),sn(o)&&(o=o(n,i)),(1===r||null==r)&&!o)return;const s=(mi(r)?r:r[0])||1,a=(mi(r)?r:r[1])||1;e.forEach(dZ(t,s,a,o&&o[0]||0,o&&o[1]||0))})(d,c,u,e),d.forEach(f=>{l.push(_D(u,Qn(null!=a?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),KF.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Jke=["x","y","weight","size","cellSize","bandwidth"];function pZ(e,t){return Jke.forEach(n=>null!=t[n]?e[n](t[n]):0),e}function XF(e){he.call(this,null,e)}Fe(KF,he,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=function Qke(e,t){var r,o,s,a,l,u,n=[],i=c=>c(a);if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(u=r[l=t.map(i)])||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(hr),s=pZ(hZ(),e),a=e.as||"grid";return l=r.map(c=>Qn(function u(c,d){for(let f=0;f<o.length;++f)c[o[f]]=d[f];return c}({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),XF.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Fe(XF,he,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var a,l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=uZ().smooth(!1!==e.smooth),r=e.values,o=e.thresholds||cZ(e.count||10,e.nice,!!r),s=e.size;return r||(r=t.materialize(t.SOURCE).source,l=dZ(a=pZ(hZ(),e)(r,!0),a.scale||1,a.scale||1,0,0),s=[a.width,a.height],r=a.values),o=Ce(o)?o:o(r),r=i.size(s)(r,o),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(Qn),n}});const JF="Feature",QF="FeatureCollection";function ZF(e){he.call(this,null,e)}function eL(e){he.call(this,null,e)}function tL(e){he.call(this,null,e)}function nL(e){he.call(this,null,e)}function iL(e){he.call(this,[],e),this.generator=function lZ(){var e,t,n,i,r,o,s,a,f,h,p,m,l=10,u=l,c=90,d=360,_=2.5;function b(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ga(jS(i/c)*c,n,c).map(p).concat(Ga(jS(a/d)*d,s,d).map(m)).concat(Ga(jS(t/l)*l,e,l).filter(function(D){return Fn(D%c)>xt}).map(f)).concat(Ga(jS(o/u)*u,r,u).filter(function(D){return Fn(D%d)>xt}).map(h))}return b.lines=function(){return v().map(function(D){return{type:"LineString",coordinates:D}})},b.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(m(s).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},b.extent=function(D){return arguments.length?b.extentMajor(D).extentMinor(D):b.extentMinor()},b.extentMajor=function(D){return arguments.length?(a=+D[0][1],s=+D[1][1],(i=+D[0][0])>(n=+D[1][0])&&(D=i,i=n,n=D),a>s&&(D=a,a=s,s=D),b.precision(_)):[[i,a],[n,s]]},b.extentMinor=function(D){return arguments.length?(o=+D[0][1],r=+D[1][1],(t=+D[0][0])>(e=+D[1][0])&&(D=t,t=e,e=D),o>r&&(D=o,o=r,r=D),b.precision(_)):[[t,o],[e,r]]},b.step=function(D){return arguments.length?b.stepMajor(D).stepMinor(D):b.stepMinor()},b.stepMajor=function(D){return arguments.length?(c=+D[0],d=+D[1],b):[c,d]},b.stepMinor=function(D){return arguments.length?(l=+D[0],u=+D[1],b):[l,u]},b.precision=function(D){return arguments.length?(_=+D,f=sZ(o,r,90),h=aZ(t,e,_),p=sZ(a,s,90),m=aZ(i,n,_),b):_},b.extentMajor([[-180,-90+xt],[180,90-xt]]).extentMinor([[-180,-80-xt],[180,80+xt]])}()}function rL(e){he.call(this,null,e)}function gZ(e){if(!sn(e))return!1;const t=hu(Zo(e));return t.$x||t.$y||t.$value||t.$max}function mZ(e){he.call(this,null,e),this.modified(!0)}function _Z(e,t,n){sn(e[t])&&e[t](n)}function yZ(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,d,f,h,p,m,_,b,v,o=e._root,s={data:i},a=e._x0,l=e._y0,u=e._x1,c=e._y1;if(!o)return e._root=s,e;for(;o.length;)if((m=t>=(d=(a+u)/2))?a=d:u=d,(_=n>=(f=(l+c)/2))?l=f:c=f,r=o,!(o=o[b=_<<1|m]))return r[b]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,r?r[b]=s:e._root=s,e;do{r=r?r[b]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+u)/2))?a=d:u=d,(_=n>=(f=(l+c)/2))?l=f:c=f}while((b=_<<1|m)==(v=(p>=f)<<1|h>=d));return r[v]=o,r[b]=s,e}function Us(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function EIe(e){return e[0]}function DIe(e){return e[1]}function oL(e,t,n){var i=new sL(null==t?EIe:t,null==n?DIe:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function sL(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function vZ(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}ZF.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Fe(ZF,he,{transform(e,t){var u,n=this._features,i=this._points,r=e.fields,o=r&&r[0],s=r&&r[1],a=e.geojson||!r&&es,l=t.ADD;u=e.modified()||t.changed(t.REM)||t.modified(Zo(a))||o&&t.modified(Zo(o))||s&&t.modified(Zo(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var d=o(c),f=s(c);null!=d&&null!=f&&(d=+d)===d&&(f=+f)===f&&i.push([d,f])}),n=n.concat({type:JF,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:QF,features:n}}}),eL.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Fe(eL,he,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||es,o=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=oZ(e.projection),n.materialize().reflow()):s=r===es||t.modified(r.fields)?n.ADD_MOD:n.ADD;const a=function eIe(e,t){const n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(i,e.pointRadius);return n.visit(s,l=>l[o]=i(r(l))),i.pointRadius(a),n.modifies(o)}}),tL.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Fe(tL,he,{transform(e,t){var l,n=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1];function u(c){const d=n([i(c),r(c)]);d?(c[s]=d[0],c[a]=d[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}}),nL.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Fe(nL,he,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",o=n.ADD;return(!i||e.modified())&&(this.value=i=function tIe(e,t,n){const i=null==n?r=>e(t(r)):r=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(o),s};return i.context=r=>(e.context(r),i),i}(oZ(e.projection),e.field||fa("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[r]=i),n.modifies(r)}}),iL.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Fe(iL,he,{transform(e,t){var r,n=this.value,i=this.generator;if(!n.length||e.modified())for(const o in e)sn(i[o])&&i[o](e[o]);return r=i(),n.length?t.mod.push(VW(n[0],r)):t.add.push(Qn(r)),n[0]=r,t}}),rL.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Fe(rL,he,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i="shared"===e.resolve,r=e.field||es,o=function iIe(e,t){let n;return sn(e)?(n=i=>e(i,t),n.dep=gZ(e)):e?n=ns(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}(e.opacity,e),s=function nIe(e,t){let n;return sn(e)?(n=i=>yh(e(i,t)),n.dep=gZ(e)):n=ns(yh(e||"#888")),n}(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?ig(n.map(u=>ig(r(u).values))):0};return n.forEach(u=>{const c=r(u),d=an({},u,l);i||(d.$max=ig(c.values||[])),u[a]=function rIe(e,t,n,i){const r=e.width,s=e.x1||0,a=e.y1||0,l=e.x2||r,u=e.y2||e.height,c=e.values,d=c?_=>c[_]:Zf,f=t_(l-s,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),m=p.data;for(let _=a,b=0;_<u;++_){t.$y=_-a;for(let v=s,D=_*r;v<l;++v,b+=4){t.$x=v-s,t.$value=d(v+D);const A=n(t);m[b+0]=A.r,m[b+1]=A.g,m[b+2]=A.b,m[b+3]=~~(255*i(t))}}return h.putImageData(p,0,0),f}(c,d,s.dep?s:ns(s(d)),o.dep?o:ns(o(d)))}),t.reflow(!0).modifies(a)}}),Fe(mZ,he,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function sIe(e){const t=WF((e||"mercator").toLowerCase());return t||be("Unrecognized projection type: "+e),t()}(e.type),GF.forEach(i=>{null!=e[i]&&_Z(n,i,e[i])})):GF.forEach(i=>{e.modified(i)&&_Z(n,i,e[i])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function oIe(e,t){const n=function aIe(e){return 1===(e=Ze(e)).length?e[0]:{type:QF,features:e.reduce((t,n)=>t.concat(function lIe(e){return e.type===QF?e.features:Ze(e).filter(t=>null!=t).map(t=>t.type===JF?t:{type:JF,geometry:t})}(n)),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});var zs=oL.prototype=sL.prototype;function Gs(e){return function(){return e}}function Fh(e){return 1e-6*(e()-.5)}function xIe(e){return e.x+e.vx}function TIe(e){return e.y+e.vy}zs.copy=function(){var n,i,e=new sL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root;if(!t)return e;if(!t.length)return e._root=vZ(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=vZ(i));return e},zs.add=function cIe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return yZ(this.cover(t,n),t,n,e)},zs.addAll=function dIe(e){var t,n,r,o,i=e.length,s=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=r,a[n]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>d&&(d=o));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<i;++n)yZ(this,s[n],a[n],e[n]);return this},zs.cover=function fIe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var l,u,s=r-n||1,a=this._root;n>e||e>=r||i>t||t>=o;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},zs.data=function hIe(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},zs.extent=function pIe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},zs.find=function gIe(e,t,n){var i,s,a,l,u,p,m,r=this._x0,o=this._y0,c=this._x1,d=this._y1,f=[],h=this._root;for(h&&f.push(new Us(h,r,o,c,d)),null==n?n=1/0:(r=e-n,o=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>d||(l=p.x1)<r||(u=p.y1)<o))if(h.length){var _=(s+l)/2,b=(a+u)/2;f.push(new Us(h[3],_,b,l,u),new Us(h[2],s,b,_,u),new Us(h[1],_,a,l,b),new Us(h[0],s,a,_,b)),(m=(t>=b)<<1|e>=_)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),D=t-+this._y.call(null,h.data),A=v*v+D*D;if(A<n){var I=Math.sqrt(n=A);r=e-I,o=t-I,c=e+I,d=t+I,i=h.data}}return i},zs.remove=function mIe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,i,r,o,c,d,f,h,p,m,_,b,n=this._root,s=this._x0,a=this._y0,l=this._x1,u=this._y1;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(s+l)/2))?s=f:l=f,(m=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[_=m<<1|p]))return this;if(!n.length)break;(t[_+1&3]||t[_+2&3]||t[_+3&3])&&(i=t,b=_)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[_]=o:delete t[_],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[b]=n:this._root=n),this):(this._root=o,this)},zs.removeAll=function _Ie(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},zs.root=function yIe(){return this._root},zs.size=function vIe(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},zs.visit=function bIe(e){var n,r,o,s,a,l,t=[],i=this._root;for(i&&t.push(new Us(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&i.length){var u=(o+a)/2,c=(s+l)/2;(r=i[3])&&t.push(new Us(r,u,c,a,l)),(r=i[2])&&t.push(new Us(r,o,c,u,l)),(r=i[1])&&t.push(new Us(r,u,s,a,c)),(r=i[0])&&t.push(new Us(r,o,s,u,c))}return this},zs.visitAfter=function wIe(e){var i,t=[],n=[];for(this._root&&t.push(new Us(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(s+l)/2,d=(a+u)/2;(o=r[0])&&t.push(new Us(o,s,a,c,d)),(o=r[1])&&t.push(new Us(o,c,a,l,d)),(o=r[2])&&t.push(new Us(o,s,d,c,u)),(o=r[3])&&t.push(new Us(o,c,d,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this},zs.x=function CIe(e){return arguments.length?(this._x=e,this):this._x},zs.y=function SIe(e){return arguments.length?(this._y=e,this):this._y};var OIe={value:()=>{}};function bZ(){for(var i,e=0,t=arguments.length,n={};e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new lx(n)}function lx(e){this._=e}function NIe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}function MIe(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function wZ(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=OIe,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}lx.prototype=bZ.prototype={constructor:lx,on:function(e,t){var r,n=this._,i=NIe(e+"",n),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=wZ(n[r],e.name,t);else if(null==t)for(r in n)n[r]=wZ(n[r],e.name,null);return this}for(;++o<s;)if((r=(e=i[o]).type)&&(r=MIe(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lx(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,o,n=new Array(r),i=0;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(o=this._[e]).length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};const kIe=bZ;var ux,Eb,x_=0,bb=0,wb=0,cx=0,vg=0,dx=0,Cb="object"==typeof performance&&performance.now?performance:Date,CZ="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function aL(){return vg||(CZ(IIe),vg=Cb.now()+dx)}function IIe(){vg=0}function fx(){this._call=this._time=this._next=null}function DZ(e,t,n){var i=new fx;return i.restart(e,t,n),i}function SZ(){vg=(cx=Cb.now())+dx,x_=bb=0;try{!function RIe(){aL(),++x_;for(var t,e=ux;e;)(t=vg-e._time)>=0&&e._call.call(null,t),e=e._next;--x_}()}finally{x_=0,function FIe(){for(var e,n,t=ux,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ux=n);Eb=e,lL(i)}(),vg=0}}function PIe(){var e=Cb.now(),t=e-cx;t>1e3&&(dx-=t,cx=e)}function lL(e){x_||(bb&&(bb=clearTimeout(bb)),e-vg>24?(e<1/0&&(bb=setTimeout(SZ,e-Cb.now()-dx)),wb&&(wb=clearInterval(wb))):(wb||(cx=Cb.now(),wb=setInterval(PIe,1e3)),x_=1,CZ(SZ)))}fx.prototype=DZ.prototype={constructor:fx,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?aL():+n)+(null==t?0:+t),!this._next&&Eb!==this&&(Eb?Eb._next=this:ux=this,Eb=this),this._call=e,this._time=n,lL()},stop:function(){this._call&&(this._call=null,this._time=1/0,lL())}};const xZ=4294967296;function $Ie(e){return e.x}function VIe(e){return e.y}var UIe=Math.PI*(3-Math.sqrt(5));function WIe(e){return e.index}function TZ(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const AZ={center:function uIe(e,t){var n,i=1;function r(){var o,a,s=n.length,l=0,u=0;for(o=0;o<s;++o)l+=(a=n[o]).x,u+=a.y;for(l=(l/s-e)*i,u=(u/s-t)*i,o=0;o<s;++o)(a=n[o]).x-=l,a.y-=u}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(i=+o,r):i},r},collide:function AIe(e){var t,n,i,r=1,o=1;function s(){for(var u,d,f,h,p,m,_,c=t.length,b=0;b<o;++b)for(d=oL(t,xIe,TIe).visitAfter(a),u=0;u<c;++u)_=(m=n[(f=t[u]).index])*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(v);function v(D,A,I,L,k){var B=D.data,q=D.r,W=m+q;if(!B)return A>h+W||L<h-W||I>p+W||k<p-W;if(B.index>f.index){var X=h-B.x-B.vx,oe=p-B.y-B.vy,ae=X*X+oe*oe;ae<W*W&&(0===X&&(ae+=(X=Fh(i))*X),0===oe&&(ae+=(oe=Fh(i))*oe),ae=(W-(ae=Math.sqrt(ae)))/ae*r,f.vx+=(X*=ae)*(W=(q*=q)/(_+q)),f.vy+=(oe*=ae)*W,B.vx-=X*(W=1-W),B.vy-=oe*W)}}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,d,c=t.length;for(n=new Array(c),u=0;u<c;++u)n[(d=t[u]).index]=+e(d,u,t)}}return"function"!=typeof e&&(e=Gs(null==e?1:+e)),s.initialize=function(u,c){t=u,i=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(r=+u,s):r},s.radius=function(u){return arguments.length?(e="function"==typeof u?u:Gs(+u),l(),s):e},s},nbody:function GIe(){var e,t,n,i,o,r=Gs(-30),s=1,a=1/0,l=.81;function u(h){var p,m=e.length,_=oL(e,$Ie,VIe).visitAfter(d);for(i=h,p=0;p<m;++p)t=e[p],_.visit(f)}function c(){if(e){var h,m,p=e.length;for(o=new Array(p),h=0;h<p;++h)o[(m=e[h]).index]=+r(m,h,e)}}function d(h){var m,_,v,D,A,p=0,b=0;if(h.length){for(v=D=A=0;A<4;++A)(m=h[A])&&(_=Math.abs(m.value))&&(p+=m.value,b+=_,v+=_*m.x,D+=_*m.y);h.x=v/b,h.y=D/b}else{(m=h).x=m.data.x,m.y=m.data.y;do{p+=o[m.data.index]}while(m=m.next)}h.value=p}function f(h,p,m,_){if(!h.value)return!0;var b=h.x-t.x,v=h.y-t.y,D=_-p,A=b*b+v*v;if(D*D/l<A)return A<a&&(0===b&&(A+=(b=Fh(n))*b),0===v&&(A+=(v=Fh(n))*v),A<s&&(A=Math.sqrt(s*A)),t.vx+=b*h.value*i/A,t.vy+=v*h.value*i/A),!0;if(!(h.length||A>=a)){(h.data!==t||h.next)&&(0===b&&(A+=(b=Fh(n))*b),0===v&&(A+=(v=Fh(n))*v),A<s&&(A=Math.sqrt(s*A)));do{h.data!==t&&(t.vx+=b*(D=o[h.data.index]*i/A),t.vy+=v*D)}while(h=h.next)}}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(r="function"==typeof h?h:Gs(+h),c(),u):r},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u},link:function qIe(e){var i,o,s,a,l,u,t=WIe,n=function d(_){return 1/Math.min(a[_.source.index],a[_.target.index])},r=Gs(30),c=1;function f(_){for(var b=0,v=e.length;b<c;++b)for(var A,I,L,k,B,q,W,D=0;D<v;++D)k=(L=(A=e[D]).target).x+L.vx-(I=A.source).x-I.vx||Fh(u),B=L.y+L.vy-I.y-I.vy||Fh(u),B*=q=((q=Math.sqrt(k*k+B*B))-o[D])/q*_*i[D],L.vx-=(k*=q)*(W=l[D]),L.vy-=B*W,I.vx+=k*(W=1-W),I.vy+=B*W}function h(){if(s){var _,A,b=s.length,v=e.length,D=new Map(s.map((I,L)=>[t(I,L,s),I]));for(_=0,a=new Array(b);_<v;++_)(A=e[_]).index=_,"object"!=typeof A.source&&(A.source=TZ(D,A.source)),"object"!=typeof A.target&&(A.target=TZ(D,A.target)),a[A.source.index]=(a[A.source.index]||0)+1,a[A.target.index]=(a[A.target.index]||0)+1;for(_=0,l=new Array(v);_<v;++_)l[_]=a[(A=e[_]).source.index]/(a[A.source.index]+a[A.target.index]);i=new Array(v),p(),o=new Array(v),m()}}function p(){if(s)for(var _=0,b=e.length;_<b;++_)i[_]=+n(e[_],_,e)}function m(){if(s)for(var _=0,b=e.length;_<b;++_)o[_]=+r(e[_],_,e)}return null==e&&(e=[]),f.initialize=function(_,b){s=_,u=b,h()},f.links=function(_){return arguments.length?(e=_,h(),f):e},f.id=function(_){return arguments.length?(t=_,f):t},f.iterations=function(_){return arguments.length?(c=+_,f):c},f.strength=function(_){return arguments.length?(n="function"==typeof _?_:Gs(+_),p(),f):n},f.distance=function(_){return arguments.length?(r="function"==typeof _?_:Gs(+_),m(),f):r},f},x:function YIe(e){var n,i,r,t=Gs(.1);function o(a){for(var c,l=0,u=n.length;l<u;++l)(c=n[l]).vx+=(r[l]-c.x)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=Gs(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:Gs(+a),s(),o):t},o.x=function(a){return arguments.length?(e="function"==typeof a?a:Gs(+a),s(),o):e},o},y:function KIe(e){var n,i,r,t=Gs(.1);function o(a){for(var c,l=0,u=n.length;l<u;++l)(c=n[l]).vy+=(r[l]-c.y)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=Gs(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:Gs(+a),s(),o):t},o.y=function(a){return arguments.length?(e="function"==typeof a?a:Gs(+a),s(),o):e},o}},Db="forces",uL=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],XIe=["static","iterations"],OZ=["x","y","vx","vy"];function cL(e){he.call(this,null,e)}function NZ(e,t,n,i){var o,s,a,l,r=Ze(t.forces);for(o=0,s=uL.length;o<s;++o)(a=uL[o])!==Db&&t.modified(a)&&e[a](t[a]);for(o=0,s=r.length;o<s;++o)l=Db+o,(a=n||t.modified(Db,o)?eRe(r[o]):i&&ZIe(r[o],i)?e.force(l):null)&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(Db+o,null);return e.numForces=r.length,e}function ZIe(e,t){var n,i;for(n in e)if(sn(i=e[n])&&t.modified(Zo(i)))return 1;return 0}function eRe(e){var t,n;for(n in gt(AZ,e.force)||be("Unrecognized force: "+e.force),t=AZ[e.force](),e)sn(t[n])&&tRe(t[n],e[n],e);return t}function tRe(e,t,n){e(sn(t)?i=>t(i,n):t)}function nRe(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function dL(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=vRe)):void 0===t&&(t=yRe);for(var i,o,s,a,l,n=new T_(e),r=[n];i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,a=l-1;a>=0;--a)r.push(o=s[a]=new T_(s[a])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(MZ)}function yRe(e){return e.children}function vRe(e){return Array.isArray(e)?e[1]:null}function bRe(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function MZ(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function T_(e){this.data=e,this.depth=this.height=0,this.parent=null}function DRe(e,t){var n,i;if(fL(t,e))return[t];for(n=0;n<e.length;++n)if(hx(t,e[n])&&fL(Sb(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(hx(Sb(e[n],e[i]),t)&&hx(Sb(e[n],t),e[i])&&hx(Sb(e[i],t),e[n])&&fL(IZ(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function hx(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function kZ(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function fL(e,t){for(var n=0;n<t.length;++n)if(!kZ(e,t[n]))return!1;return!0}function SRe(e){switch(e.length){case 1:return function xRe(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return Sb(e[0],e[1]);case 3:return IZ(e[0],e[1],e[2])}}function Sb(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-i,c=a-r,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(i+s+u/d*c)/2,r:(d+r+a)/2}}function IZ(e,t,n){var i=e.x,r=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=i-s,h=i-u,p=r-a,m=r-c,_=l-o,b=d-o,v=i*i+r*r-o*o,D=v-s*s-a*a+l*l,A=v-u*u-c*c+d*d,I=h*p-f*m,L=(p*A-m*D)/(2*I)-i,k=(m*_-p*b)/I,B=(h*D-f*A)/(2*I)-r,q=(f*b-h*_)/I,W=k*k+q*q-1,X=2*(o+L*k+B*q),oe=L*L+B*B-o*o,ae=-(W?(X+Math.sqrt(X*X-4*W*oe))/(2*W):oe/X);return{x:i+L+k*ae,y:r+B+q*ae,r:ae}}function RZ(e,t,n){var r,o,a,l,i=e.x-t.x,s=e.y-t.y,u=i*i+s*s;u?(o=t.r+n.r,l=e.r+n.r,(o*=o)>(l*=l)?(r=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-r*r)),n.x=e.x-r*i-a*s,n.y=e.y-r*s+a*i):(r=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x+r*i-a*s,n.y=t.y+r*s+a*i)):(n.x=t.x+n.r,n.y=t.y)}function PZ(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function FZ(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function px(e){this._=e,this.next=null,this.previous=null}function LZ(e){if(!(r=(e=function wRe(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var t,n,i,r,o,s,a,l,u,c,d;if((t=e[0]).x=0,t.y=0,!(r>1))return t.r;if(t.x=-(n=e[1]).r,n.x=t.r,n.y=0,!(r>2))return t.r+n.r;RZ(n,t,i=e[2]),t=new px(t),n=new px(n),i=new px(i),t.next=i.previous=n,n.next=t.previous=i,i.next=n.previous=t;e:for(a=3;a<r;++a){RZ(t._,n._,i=e[a]),i=new px(i),l=n.next,u=t.previous,c=n._.r,d=t._.r;do{if(c<=d){if(PZ(l._,i._)){t.next=n=l,n.previous=t,--a;continue e}c+=l._.r,l=l.next}else{if(PZ(u._,i._)){(t=u).next=n,n.previous=t,--a;continue e}d+=u._.r,u=u.previous}}while(l!==u.next);for(i.previous=t,i.next=n,t.next=n.previous=n=i,o=FZ(t);(i=i.next)!==n;)(s=FZ(i))<o&&(t=i,o=s);n=t.next}for(t=[n._],i=n;(i=i.next)!==n;)t.push(i._);for(i=function CRe(e){for(var r,o,t=0,n=(e=function ERe(e){for(var n,i,t=e.length;t;)i=Math.random()*t--|0,n=e[t],e[t]=e[i],e[i]=n;return e}(Array.from(e))).length,i=[];t<n;)r=e[t],o&&kZ(o,r)?++t:(o=SRe(i=DRe(i,r)),t=0);return o}(t),a=0;a<r;++a)(t=e[a]).x-=i.x,t.y-=i.y;return i.r}function TRe(e){return null==e?null:gx(e)}function gx(e){if("function"!=typeof e)throw new Error;return e}function bg(){return 0}function A_(e){return function(){return e}}function ARe(e){return Math.sqrt(e.value)}function jZ(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function hL(e,t){return function(n){if(i=n.children){var i,r,a,o=i.length,s=e(n)*t||0;if(s)for(r=0;r<o;++r)i[r].r+=s;if(a=LZ(i),s)for(r=0;r<o;++r)i[r].r-=s;n.r=a+s}}}function BZ(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function $Z(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function xb(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,u=e.value&&(i-t)/e.value;++a<l;)(s=o[a]).y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*u}cL.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:OZ}]},Fe(cL,he,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(uL),o=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&NZ(n,e,0,t)):(this.value=n=function QIe(e,t){const n=function zIe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=DZ(d),u=kIe("tick","end"),c=function BIe(){let e=1;return()=>(e=(1664525*e+1013904223)%xZ)/xZ}();function d(){f(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function f(m){var _,v,b=e.length;void 0===m&&(m=1);for(var D=0;D<m;++D)for(n+=(o-n)*r,a.forEach(function(A){A(n)}),_=0;_<b;++_)null==(v=e[_]).fx?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),null==v.fy?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var b,m=0,_=e.length;m<_;++m){if((b=e[m]).index=m,null!=b.fx&&(b.x=b.fx),null!=b.fy&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var v=10*Math.sqrt(.5+m),D=m*UIe;b.x=v*Math.cos(D),b.y=v*Math.sin(D)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return null==e&&(e=[]),h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(i=+m,t):i},alphaDecay:function(m){return arguments.length?(r=+m,t):+r},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(s=1-m,t):1-s},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,_){return arguments.length>1?(null==_?a.delete(m):a.set(m,p(_)),t):a.get(m)},find:function(m,_,b){var A,I,L,k,B,v=0,D=e.length;for(null==b?b=1/0:b*=b,v=0;v<D;++v)(L=(A=m-(k=e[v]).x)*A+(I=_-k.y)*I)<b&&(B=k,b=L);return B},on:function(m,_){return arguments.length>1?(u.on(m,_),t):u.on(m)}}}(e),i=n.stop,r=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,r()),n.stop=()=>(o=!0,i()),NZ(n,t,!0).on("end",()=>o=!0)}(t.source,e),n.on("tick",function JIe(e,t){return()=>e.touch(t).run()}(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(XIe)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let c,a=this._argops,l=0,u=a.length;l<u;++l)if(c=a[l],c.name===Db&&"link"===c.op._argval.force)for(var s,i=c.op._argops,r=0,o=i.length;r<o;++r)if("links"===i[r].name&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(OZ)}}),T_.prototype=dL.prototype={constructor:T_,count:function iRe(){return this.eachAfter(nRe)},each:function rRe(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this},eachAfter:function sRe(e,t){for(var o,s,a,n=this,i=[n],r=[],l=-1;n=i.pop();)if(r.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)i.push(o[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this},eachBefore:function oRe(e,t){for(var r,o,n=this,i=[n],s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this},find:function aRe(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i},sum:function lRe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})},sort:function uRe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function cRe(e){for(var t=this,n=function dRe(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}(t,e),i=[t];t!==n;)i.push(t=t.parent);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i},ancestors:function fRe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function hRe(){return Array.from(this)},leaves:function pRe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function gRe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function _Re(){return dL(this).eachBefore(bRe)},[Symbol.iterator]:function*mRe(){var t,i,r,o,e=this,n=[e];do{for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r])}while(n.length)}};var MRe={depth:-1},VZ={};function kRe(e){return e.id}function IRe(e){return e.parentId}function HZ(){var e=kRe,t=IRe;function n(i){var s,a,l,u,c,d,f,r=Array.from(i),o=r.length,h=new Map;for(a=0;a<o;++a)c=r[a]=new T_(s=r[a]),null!=(d=e(s,a,i))&&(d+="")&&(f=c.id=d,h.set(f,h.has(f)?VZ:c)),null!=(d=t(s,a,i))&&(d+="")&&(c.parent=d);for(a=0;a<o;++a)if(d=(c=r[a]).parent){if(!(u=h.get(d)))throw new Error("missing: "+d);if(u===VZ)throw new Error("ambiguous: "+d);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(l)throw new Error("multiple roots");l=c}if(!l)throw new Error("no root");if(l.parent=MRe,l.eachBefore(function(p){p.depth=p.parent.depth+1,--o}).eachBefore(MZ),l.parent=null,o>0)throw new Error("cycle");return l}return n.id=function(i){return arguments.length?(e=gx(i),n):e},n.parentId=function(i){return arguments.length?(t=gx(i),n):t},n}function RRe(e,t){return e.parent===t.parent?1:2}function pL(e){var t=e.children;return t?t[0]:e.t}function gL(e){var t=e.children;return t?t[t.length-1]:e.t}function PRe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function LRe(e,t,n){return e.a.parent===t.parent?e.a:n}function mx(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function $Re(e,t){return e.parent===t.parent?1:2}function HRe(e,t){return e+t.x}function zRe(e,t){return Math.max(e,t.y)}function _x(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,u=e.value&&(r-n)/e.value;++a<l;)(s=o[a]).x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*u}mx.prototype=Object.create(T_.prototype);var UZ=(1+Math.sqrt(5))/2;function zZ(e,t,n,i,r,o){for(var l,u,h,p,_,b,v,D,A,I,L,s=[],a=t.children,c=0,d=0,f=a.length,m=t.value;c<f;){h=r-n,p=o-i;do{_=a[d++].value}while(!_&&d<f);for(b=v=_,L=_*_*(I=Math.max(p/h,h/p)/(m*e)),A=Math.max(v/L,L/b);d<f;++d){if(_+=u=a[d].value,u<b&&(b=u),u>v&&(v=u),L=_*_*I,(D=Math.max(v/L,L/b))>A){_-=u;break}A=D}s.push(l={value:_,dice:h<p,children:a.slice(c,d)}),l.dice?xb(l,n,i,r,m?i+=p*_/m:o):_x(l,n,i,m?n+=h*_/m:r,o),m-=_,c=d}return s}const GZ=function e(t){function n(i,r,o,s,a){zZ(t,i,r,o,s,a)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(UZ),XRe=function e(t){function n(i,r,o,s,a){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,d,h,f=-1,p=l.length,m=i.value;++f<p;){for(c=(u=l[f]).children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?xb(u,r,o,s,m?o+=(a-o)*u.value/m:a):_x(u,r,o,m?r+=(s-r)*u.value/m:s,a),m-=u.value}else i._squarify=l=zZ(t,i,r,o,s,a),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(UZ);function mL(e,t,n){const i={};return e.each(r=>{const o=r.data;n(o)&&(i[t(o)]=r)}),e.lookup=i,e}function _L(e){he.call(this,null,e)}_L.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const QRe=e=>e.values;function ZRe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,o){if(o>=e.length)return r;const s=r.length,a=e[o++],l={},u={};let d,f,h,c=-1;for(;++c<s;)d=a(f=r[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],o);return u}function i(r,o){if(++o>e.length)return r;const s=[];for(const a in r)s.push({key:a,values:i(r[a],o)});return s}return t}function Qd(e){he.call(this,null,e)}Fe(_L,he,{transform(e,t){t.source||be("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(s=>{s.children&&mD(s.data)&&r.rem.push(s.data)}),this.value=o=dL({values:Ze(e.keys).reduce((s,a)=>(s.key(a),s),ZRe()).entries(r.source)},QRe),n&&o.each(s=>{s.children&&(s=Qn(s.data),r.add.push(s),r.source.push(s))}),mL(o,bt,bt)),r.source.root=o,r}});const ePe=(e,t)=>e.parent===t.parent?1:2;Fe(Qd,he,{transform(e,t){(!t.source||!t.source.root)&&be(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(tg(e.sort,s=>s.data)),function tPe(e,t,n){for(let i,r=0,o=t.length;r<o;++r)i=t[r],i in n&&e[i](n[i])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?ePe:I0);try{this.value=n(r)}catch(s){be(s)}return r.each(s=>function nPe(e,t,n){const i=e.data,r=t.length-1;for(let o=0;o<r;++o)i[n[o]]=e[t[o]];i[n[r]]=e.children?e.children.length:0}(s,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const yL=["x","y","r","depth","children"];function vL(e){Qd.call(this,e)}vL.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yL.length,default:yL}]},Fe(vL,Qd,{layout:function ORe(){var e=null,t=1,n=1,i=bg;function r(o){return o.x=t/2,o.y=n/2,e?o.eachBefore(jZ(e)).eachAfter(hL(i,.5)).eachBefore(BZ(1)):o.eachBefore(jZ(ARe)).eachAfter(hL(bg,1)).eachAfter(hL(i,o.r/Math.min(t,n))).eachBefore(BZ(Math.min(t,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=TRe(o),r):e},r.size=function(o){return arguments.length?(t=+o[0],n=+o[1],r):[t,n]},r.padding=function(o){return arguments.length?(i="function"==typeof o?o:A_(+o),r):i},r},params:["radius","size","padding"],fields:yL});const bL=["x0","y0","x1","y1","depth","children"];function wL(e){Qd.call(this,e)}function EL(e){he.call(this,null,e)}wL.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:bL.length,default:bL}]},Fe(wL,Qd,{layout:function NRe(){var e=1,t=1,n=0,i=!1;function r(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(function o(s,a){return function(l){l.children&&xb(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}(t,a)),i&&s.eachBefore($Z),s}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r},params:["size","round","padding"],fields:bL}),EL.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Fe(EL,he,{transform(e,t){t.source||be("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),o=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(n=r.source.length?mL(HZ().id(e.key).parentId(e.parentKey)(r.source),e.key,bl):mL(HZ()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const WZ={tidy:function BRe(){var e=RRe,t=1,n=1,i=null;function r(u){var c=function jRe(e){for(var n,r,o,s,a,t=new mx(e,0),i=[t];n=i.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)i.push(r=n.children[s]=new mx(o[s],s)),r.parent=n;return(t.parent=new mx(null,0)).children=[t],t}(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),i)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(v){v.x<d.x&&(d=v),v.x>f.x&&(f=v),v.depth>h.depth&&(h=v)});var p=d===f?1:e(d,f)/2,m=p-d.x,_=t/(f.x+p+m),b=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*_,v.y=v.depth*b})}return u}function o(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){!function FRe(e){for(var o,t=0,n=0,i=e.children,r=i.length;--r>=0;)(o=i[r]).z+=t,o.m+=t,t+=o.s+(n+=o.c)}(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=function a(u,c,d){if(c){for(var A,f=u,h=u,p=c,m=f.parent.children[0],_=f.m,b=h.m,v=p.m,D=m.m;p=gL(p),f=pL(f),p&&f;)m=pL(m),(h=gL(h)).a=u,(A=p.z+v-f.z-_+e(p._,f._))>0&&(PRe(LRe(p,u,d),u,A),_+=A,b+=A),v+=p.m,_+=f.m,D+=m.m,b+=h.m;p&&!gL(h)&&(h.t=p,h.m+=v-b),f&&!pL(m)&&(m.t=f,m.m+=_-D,d=u)}return d}(u,f,u.parent.A||d[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function l(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r},cluster:function qRe(){var e=$Re,t=1,n=1,i=!1;function r(o){var s,a=0;o.eachAfter(function(f){var h=f.children;h?(f.x=function VRe(e){return e.reduce(HRe,0)/e.length}(h),f.y=function URe(e){return 1+e.reduce(zRe,0)}(h)):(f.x=s?a+=e(f,s):0,f.y=0,s=f)});var l=function GRe(e){for(var t;t=e.children;)e=t[0];return e}(o),u=function WRe(e){for(var t;t=e.children;)e=t[t.length-1];return e}(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(i?function(f){f.x=(f.x-o.x)*t,f.y=(o.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(o.y?f.y/o.y:1))*n})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,t=+o[0],n=+o[1],r):i?null:[t,n]},r.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],n=+o[1],r):i?[t,n]:null},r}},CL=["x","y","depth","children"];function DL(e){Qd.call(this,e)}function SL(e){he.call(this,[],e)}DL.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:CL.length,default:CL}]},Fe(DL,Qd,{layout(e){const t=e||"tidy";if(gt(WZ,t))return WZ[t]();be("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:CL}),SL.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Fe(SL,he,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),o={};return i||be("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>o[bt(s)]=1),i.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[bt(a)]&&o[bt(l)]&&r.add.push(Qn({source:l,target:a}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[bt(s)]=1),n.forEach(s=>{(o[bt(s.source)]||o[bt(s.target)])&&r.mod.push(s)})),r}});const qZ={binary:function YRe(e,t,n,i,r){var s,l,o=e.children,a=o.length,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;!function c(d,f,h,p,m,_,b){if(d>=f-1){var v=o[d];return v.x0=p,v.y0=m,v.x1=_,void(v.y1=b)}for(var D=u[d],A=h/2+D,I=d+1,L=f-1;I<L;){var k=I+L>>>1;u[k]<A?I=k+1:L=k}A-u[I-1]<u[I]-A&&d+1<I&&--I;var B=u[I]-D,q=h-B;if(_-p>b-m){var W=h?(p*q+_*B)/h:_;c(d,I,B,p,m,W,b),c(I,f,q,W,m,_,b)}else{var X=h?(m*q+b*B)/h:b;c(d,I,B,p,m,_,X),c(I,f,q,p,X,_,b)}}(0,a,e.value,t,n,i,r)},dice:xb,slice:_x,slicedice:function KRe(e,t,n,i,r){(1&e.depth?_x:xb)(e,t,n,i,r)},squarify:GZ,resquarify:XRe},xL=["x0","y0","x1","y1","depth","children"];function TL(e){Qd.call(this,e)}function aPe(e,t,n,i){const r=e.width,o=e.height,s=n||i,a=t_(r,o).getContext("2d");t.forEach(_=>YZ(a,_,s));const l=new Uint32Array(a.getImageData(0,0,r,o).data.buffer),u=e.bitmap(),c=s&&e.bitmap();let d,f,h,p,m;for(f=0;f<o;++f)for(d=0;d<r;++d)m=4278190080&l[f*r+d],m&&(h=e(d),p=e(f),i||u.set(h,p),s&&268435456^m&&c.set(h,p));return[u,c]}function YZ(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;"group"===i?t.forEach(r=>{r.items.forEach(o=>YZ(e,o.items,n))}):Wa[i].draw(e,{items:n?t.map(lPe):t})}function lPe(e){const t=_D(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}TL.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xL.length,default:xL}]},Fe(TL,Qd,{layout(){const e=function JRe(){var e=GZ,t=!1,n=1,i=1,r=[0],o=bg,s=bg,a=bg,l=bg,u=bg;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=i,f.eachBefore(d),r=[0],t&&f.eachBefore($Z),f}function d(f){var h=r[f.depth],p=f.x0+h,m=f.y0+h,_=f.x1-h,b=f.y1-h;_<p&&(p=_=(p+_)/2),b<m&&(m=b=(m+b)/2),f.x0=p,f.y0=m,f.x1=_,f.y1=b,f.children&&(h=r[f.depth+1]=o(f)/2,p+=u(f)-h,m+=s(f)-h,(_-=a(f)-h)<p&&(p=_=(p+_)/2),(b-=l(f)-h)<m&&(m=b=(m+b)/2),e(f,p,m,_,b))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],i=+f[1],c):[n,i]},c.tile=function(f){return arguments.length?(e=gx(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(o="function"==typeof f?f:A_(+f),c):o},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(s="function"==typeof f?f:A_(+f),c):s},c.paddingRight=function(f){return arguments.length?(a="function"==typeof f?f:A_(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l="function"==typeof f?f:A_(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u="function"==typeof f?f:A_(+f),c):u},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{gt(qZ,t)?e.tile(qZ[t]):be("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:xL});const Lh=new Uint32Array(33),Cu=new Uint32Array(33);Cu[0]=0,Lh[0]=~Cu[0];for(let e=1;e<=32;++e)Cu[e]=Cu[e-1]<<1|1,Lh[e]=~Cu[e];function fPe(e,t,n,i,r,o){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>o}function hPe(){return!1}function pPe(e,t,n,i,r,o,s,a){const l=r*o/(2*i),u=e(t-l),c=e(t+l),d=e(n-(o/=2)),f=e(n+o);return s.outOfBounds(u,d,c,f)||s.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}function gPe(e,t,n,i,r,o,s,a){const l=r*o/(2*i);let u=e(t-l),c=e(t+l),d=e(n-(o/=2)),f=e(n+o);return u=u>0?u:0,d=d>0?d:0,c=c<e.width?c:e.width-1,f=f<e.height?f:e.height-1,s.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}function KZ(e){return e?[gPe,hPe]:[pPe,fPe]}const _Pe=[-1,-1,1,1],yPe=[-1,1,-1,1],bPe=["right","center","left"],wPe=["bottom","middle","top"];function XZ(e,t,n,i,r,o,s,a,l,u,c,d){return!(r.outOfBounds(e,n,t,i)||(d&&o?o.getRange(e,n,t,i)||!function CPe(e,t,n,i,r){return r[0]<=e&&n<=r[2]&&r[3]<=t&&i<=r[5]}(s,l,a,u,c):r.getRange(e,n,t,i)))}const DPe={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},SPe={naive:function dPe(e,t,n,i){const r=e.width,o=e.height;return function(s){const a=s.datum.datum.items[i].items,l=a.length,u=s.datum.fontSize,c=Tc.width(s.datum,s.datum.text);let f,h,p,m,_,b,v,d=0;for(let D=0;D<l;++D)f=a[D].x,p=a[D].y,h=void 0===a[D].x2?f:a[D].x2,m=void 0===a[D].y2?p:a[D].y2,_=(f+h)/2,b=(p+m)/2,v=Math.abs(h-f+m-p),v>=d&&(d=v,s.x=_,s.y=b);return _=c/2,b=u/2,f=s.x-_,h=s.x+_,p=s.y-b,m=s.y+b,s.align="center",f<0&&h<=r?s.align="left":0<=f&&r<h&&(s.align="right"),s.baseline="middle",p<0&&m<=o?s.baseline="top":0<=p&&o<m&&(s.baseline="bottom"),!0}},"reduced-search":function mPe(e,t,n,i,r){const o=e.width,s=e.height,[a,l]=KZ(r),u=t[0],c=t[1];function d(f,h,p,m,_){const b=e.invert(f),v=e.invert(h);let I,D=p,A=s;if(!l(b,v,m,_,o,s)&&!a(e,b,v,_,m,D,u,c)&&!a(e,b,v,_,m,_,u,null)){for(;A-D>=1;)I=(D+A)/2,a(e,b,v,_,m,I,u,c)?A=I:D=I;if(D>p)return[b,v,D,!0]}}return function(f){const h=f.datum.datum.items[i].items,p=h.length,m=f.datum.fontSize,_=Tc.width(f.datum,f.datum.text);let I,L,k,B,q,W,X,oe,ae,Se,ie,te,de,pe,Re,rt,Xt,b=n?m:0,v=!1,D=!1,A=0;for(let $t=0;$t<p;++$t){for(I=h[$t].x,k=h[$t].y,L=void 0===h[$t].x2?I:h[$t].x2,B=void 0===h[$t].y2?k:h[$t].y2,I>L&&(Xt=I,I=L,L=Xt),k>B&&(Xt=k,k=B,B=Xt),ae=e(I),ie=e(L),Se=~~((ae+ie)/2),te=e(k),pe=e(B),de=~~((te+pe)/2),X=Se;X>=ae;--X)for(oe=de;oe>=te;--oe)rt=d(X,oe,b,_,m),rt&&([f.x,f.y,b,v]=rt);for(X=Se;X<=ie;++X)for(oe=de;oe<=pe;++oe)rt=d(X,oe,b,_,m),rt&&([f.x,f.y,b,v]=rt);!v&&!n&&(Re=Math.abs(L-I+B-k),q=(I+L)/2,W=(k+B)/2,Re>=A&&!l(q,W,_,m,o,s)&&!a(e,q,W,m,_,m,u,null)&&(A=Re,f.x=q,f.y=W,D=!0))}return!(!v&&!D||(q=_/2,W=m/2,u.setRange(e(f.x-q),e(f.y-W),e(f.x+q),e(f.y+W)),f.align="center",f.baseline="middle",0))}},floodfill:function vPe(e,t,n,i,r){const o=e.width,s=e.height,[a,l]=KZ(r),u=t[0],c=t[1],d=e.bitmap();return function(f){const h=f.datum.datum.items[i].items,p=h.length,m=f.datum.fontSize,_=Tc.width(f.datum,f.datum.text),b=[];let L,k,B,q,W,X,oe,ae,Se,ie,te,de,v=n?m:0,D=!1,A=!1,I=0;for(let pe=0;pe<p;++pe){for(L=h[pe].x,B=h[pe].y,k=void 0===h[pe].x2?L:h[pe].x2,q=void 0===h[pe].y2?B:h[pe].y2,b.push([e((L+k)/2),e((B+q)/2)]);b.length;)if([oe,ae]=b.pop(),!(u.get(oe,ae)||c.get(oe,ae)||d.get(oe,ae))){d.set(oe,ae);for(let Re=0;Re<4;++Re)W=oe+_Pe[Re],X=ae+yPe[Re],d.outOfBounds(W,X,W,X)||b.push([W,X]);if(W=e.invert(oe),X=e.invert(ae),Se=v,ie=s,!l(W,X,_,m,o,s)&&!a(e,W,X,m,_,Se,u,c)&&!a(e,W,X,m,_,m,u,null)){for(;ie-Se>=1;)te=(Se+ie)/2,a(e,W,X,m,_,te,u,c)?ie=te:Se=te;Se>v&&(f.x=W,f.y=X,v=Se,D=!0)}}!D&&!n&&(de=Math.abs(k-L+q-B),W=(L+k)/2,X=(B+q)/2,de>=I&&!l(W,X,_,m,o,s)&&!a(e,W,X,m,_,m,u,null)&&(I=de,f.x=W,f.y=X,A=!0))}return!(!D&&!A||(W=_/2,X=m/2,u.setRange(e(f.x-W),e(f.y-X),e(f.x+W),e(f.y+X)),f.align="center",f.baseline="middle",0))}}};function xPe(e,t,n,i,r,o,s,a,l,u,c){if(!e.length)return e;const d=Math.max(i.length,r.length),f=function TPe(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}(i,d),h=function APe(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=DPe[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}(r,d),p=function OPe(e){return e&&e.mark&&e.mark.marktype}(e[0].datum),m="group"===p&&e[0].datum.items[l].marktype,_="area"===m,b=function NPe(e,t,n,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?"line"===e||"area"===e?o=>r(o.datum):"line"===t?o=>{const s=o.datum.items[i].items;return r(s.length?s["start"===n?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}(p,m,a,l),v=null===u||u===1/0,D=function cPe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),o=~~((t+2*n+i)/i),s=a=>~~((a+n)/i);return s.invert=a=>a*i-n,s.bitmap=()=>function uPe(e,t){const n=new Uint32Array(~~((e*t+32)/32));function i(o,s){n[o]|=s}function r(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>5]&1<<(31&a)},set:(o,s)=>{const a=s*e+o;i(a>>>5,1<<(31&a))},clear:(o,s)=>{const a=s*e+o;r(a>>>5,~(1<<(31&a)))},getRange:(o,s,a,l)=>{let c,d,f,h,u=l;for(;u>=s;--u)if(c=u*e+o,d=u*e+a,f=c>>>5,h=d>>>5,f===h){if(n[f]&Lh[31&c]&Cu[1+(31&d)])return!0}else{if(n[f]&Lh[31&c]||n[h]&Cu[1+(31&d)])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,d,f,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,d=u>>>5,f=c>>>5,d===f)i(d,Lh[31&u]&Cu[1+(31&c)]);else for(i(d,Lh[31&u]),i(f,Cu[1+(31&c)]),h=d+1;h<f;++h)i(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,d,f,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,d=u>>>5,f=c>>>5,d===f)r(d,Cu[31&u]|Lh[1+(31&c)]);else for(r(d,Cu[31&u]),r(f,Lh[1+(31&c)]),h=d+1;h<f;++h)r(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}(r,o),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}(t[0],t[1],v?0:u),A=_&&"naive"===c,I=e.map(B=>({datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(B)}));let L;if(!A){n&&I.sort((q,W)=>n(q.datum,W.datum));let B=!1;for(let q=0;q<h.length&&!B;++q)B=5===h[q]||f[q]<0;p&&(s||_)&&(o=[e.map(q=>q.datum)].concat(o)),L=o.length?aPe(D,o,B,_):function sPe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}(D,s&&I)}const k=_?SPe[c](D,L,s,l,v):function EPe(e,t,n,i,r){const o=e.width,s=e.height,a=t[0],l=t[1],u=i.length;return function(c){const d=c.boundary,f=c.datum.fontSize;if(!r&&(d[2]<0||d[5]<0||d[0]>o||d[3]>s))return!1;let p,m,_,b,v,D,A,I,L,k,B,q,W,X,oe,h=0;for(let ae=0;ae<u;++ae){if(p=(3&n[ae])-1,m=(n[ae]>>>2&3)-1,_=0===p&&0===m||i[ae]<0,b=p&&m?Math.SQRT1_2:1,v=i[ae]<0?-1:1,D=d[1+p]+i[ae]*p*b,B=d[4+m]+v*f*m/2+i[ae]*m*b,I=B-f/2,L=B+f/2,q=e(D),X=e(I),oe=e(L),r&&(q=q<0?0:q,X=X<0?0:X,oe=oe>=e.height?e.height-1:oe),!h){if(!XZ(q,q,X,oe,a,l,D,D,I,L,d,_))continue;h=Tc.width(c.datum,c.datum.text)}if(k=D+v*h*p/2,D=k-h/2,A=k+h/2,q=e(D),W=e(A),r&&(q=q<0?0:q,W=W>=e.width?e.width-1:W),XZ(q,W,X,oe,a,l,D,A,I,L,d,_))return c.x=p?p*v<0?A:D:k,c.y=m?m*v<0?L:I:B,c.align=bPe[p*v+1],c.baseline=wPe[m*v+1],a.setRange(q,X,W,oe),!0}return!1}}(D,L,h,f,v);return I.forEach(B=>B.opacity=+k(B)),I}const RL=["x","y","opacity","align","baseline"],JZ=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function PL(e){he.call(this,null,e)}function QZ(e,t){var r,o,s,a,l,u,n=[],i=function(c){return c(a)};if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(u=r[l=t.map(i)])||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function FL(e){he.call(this,null,e)}PL.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:JZ},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:RL.length,default:RL}]},Fe(PL,he,{transform(e,t){const i=e.modified();if(!(i||t.changed(t.ADD_REM)||function n(o){const s=e[o];return sn(s)&&t.modified(s.fields)}("sort")))return;(!e.size||2!==e.size.length)&&be("Size parameter should be specified as a [width, height] array.");const r=e.as||RL;return xPe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ze(null==e.offset?1:e.offset),Ze(e.anchor||JZ),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[r[0]]=o.x,s[r[1]]=o.y,s[r[2]]=o.opacity,s[r[3]]=o.align,s[r[4]]=o.baseline}),t.reflow(i).modifies(r)}}),FL.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Fe(FL,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=QZ(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(hr),s=o.length,a=e.as||[hr(e.x),hr(e.y)],l=[];r.forEach(u=>{_q(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<s;++f)d[o[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push(Qn(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const LL={linear:FI,log:dq,exp:fq,pow:hq,quad:LI,poly:pq};function jL(e){he.call(this,null,e)}jL.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(LL)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Fe(jL,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=QZ(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(hr),s=e.method||"linear",a=e.order||3,l=((e,t)=>"poly"===e?t:"quad"===e?2:1)(s,a),u=e.as||[hr(e.x),hr(e.y)],c=LL[s],d=[];let f=e.extent;gt(LL,s)||be("Invalid regression method: "+s),null!=f&&"log"===s&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach(h=>{if(h.length<=l)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const m=c(h,e.x,e.y,a);if(e.params)return void d.push(Qn({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));const _=f||mc(h,e.x),b=v=>{const D={};for(let A=0;A<o.length;++A)D[o[A]]=h.dims[A];D[u[0]]=v[0],D[u[1]]=v[1],d.push(Qn(D))};"linear"===s?_.forEach(v=>b([v,m.predict(v)])):TD(m.predict,_,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const ZZ=Math.pow(2,-52),yx=new Uint32Array(512);class vx{static from(t,n=FPe,i=LPe){const r=t.length,o=new Float64Array(2*r);for(let s=0;s<r;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=i(a)}return new vx(o)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let W=0;W<s;W++){const X=t[2*W],oe=t[2*W+1];X<a&&(a=X),oe<l&&(l=oe),X>u&&(u=X),oe>c&&(c=oe),this._ids[W]=W}const d=(a+u)/2,f=(l+c)/2;let p,m,_,h=1/0;for(let W=0;W<s;W++){const X=BL(d,f,t[2*W],t[2*W+1]);X<h&&(p=W,h=X)}const b=t[2*p],v=t[2*p+1];h=1/0;for(let W=0;W<s;W++){if(W===p)continue;const X=BL(b,v,t[2*W],t[2*W+1]);X<h&&X>0&&(m=W,h=X)}let D=t[2*m],A=t[2*m+1],I=1/0;for(let W=0;W<s;W++){if(W===p||W===m)continue;const X=RPe(b,v,D,A,t[2*W],t[2*W+1]);X<I&&(_=W,I=X)}let L=t[2*_],k=t[2*_+1];if(I===1/0){for(let oe=0;oe<s;oe++)this._dists[oe]=t[2*oe]-t[0]||t[2*oe+1]-t[1];O_(this._ids,this._dists,0,s-1);const W=new Uint32Array(s);let X=0;for(let oe=0,ae=-1/0;oe<s;oe++){const Se=this._ids[oe];this._dists[Se]>ae&&(W[X++]=Se,ae=this._dists[Se])}return this.hull=W.subarray(0,X),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(bx(b,v,D,A,L,k)){const W=m,X=D,oe=A;m=_,D=L,A=k,_=W,L=X,k=oe}const B=function PPe(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,u=o-t,c=s*s+a*a,d=l*l+u*u,f=.5/(s*u-a*l);return{x:e+(u*c-a*d)*f,y:t+(s*d-l*c)*f}}(b,v,D,A,L,k);this._cx=B.x,this._cy=B.y;for(let W=0;W<s;W++)this._dists[W]=BL(t[2*W],t[2*W+1],B.x,B.y);O_(this._ids,this._dists,0,s-1),this._hullStart=p;let q=3;i[p]=n[_]=m,i[m]=n[p]=_,i[_]=n[m]=p,r[p]=0,r[m]=1,r[_]=2,o.fill(-1),o[this._hashKey(b,v)]=p,o[this._hashKey(D,A)]=m,o[this._hashKey(L,k)]=_,this.trianglesLen=0,this._addTriangle(p,m,_,-1,-1,-1);for(let X,oe,W=0;W<this._ids.length;W++){const ae=this._ids[W],Se=t[2*ae],ie=t[2*ae+1];if(W>0&&Math.abs(Se-X)<=ZZ&&Math.abs(ie-oe)<=ZZ||(X=Se,oe=ie,ae===p||ae===m||ae===_))continue;let te=0;for(let Xt=0,$t=this._hashKey(Se,ie);Xt<this._hashSize&&(te=o[($t+Xt)%this._hashSize],-1===te||te===i[te]);Xt++);te=n[te];let pe,de=te;for(;pe=i[de],!bx(Se,ie,t[2*de],t[2*de+1],t[2*pe],t[2*pe+1]);)if(de=pe,de===te){de=-1;break}if(-1===de)continue;let Re=this._addTriangle(de,ae,i[de],-1,-1,r[de]);r[ae]=this._legalize(Re+2),r[de]=Re,q++;let rt=i[de];for(;pe=i[rt],bx(Se,ie,t[2*rt],t[2*rt+1],t[2*pe],t[2*pe+1]);)Re=this._addTriangle(rt,ae,pe,r[ae],-1,r[rt]),r[ae]=this._legalize(Re+2),i[rt]=rt,q--,rt=pe;if(de===te)for(;pe=n[de],bx(Se,ie,t[2*pe],t[2*pe+1],t[2*de],t[2*de+1]);)Re=this._addTriangle(pe,ae,de,-1,r[de],r[pe]),this._legalize(Re+2),r[pe]=Re,i[de]=de,q--,de=pe;this._hullStart=n[ae]=de,i[de]=n[rt]=ae,i[ae]=rt,o[this._hashKey(Se,ie)]=ae,o[this._hashKey(t[2*de],t[2*de+1])]=de}this.hull=new Uint32Array(q);for(let W=0,X=this._hullStart;W<q;W++)this.hull[W]=X,X=i[X];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function kPe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,s=0;for(;;){const a=i[t],l=t-t%3;if(s=l+(t+2)%3,-1===a){if(0===o)break;t=yx[--o];continue}const u=a-a%3,d=u+(a+2)%3,f=n[s],h=n[t],p=n[l+(t+1)%3],m=n[d];if(IPe(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*m],r[2*m+1])){n[t]=m,n[a]=f;const b=i[d];if(-1===b){let D=this._hullStart;do{if(this._hullTri[D]===d){this._hullTri[D]=t;break}D=this._hullPrev[D]}while(D!==this._hullStart)}this._link(t,b),this._link(a,i[s]),this._link(s,d);const v=u+(a+1)%3;o<yx.length&&(yx[o++]=v)}else{if(0===o)break;t=yx[--o]}}return s}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function BL(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function $L(e,t,n,i,r,o){const s=(i-t)*(r-e),a=(n-e)*(o-t);return Math.abs(s-a)>=33306690738754716e-32*Math.abs(s+a)?s-a:0}function bx(e,t,n,i,r,o){return($L(r,o,e,t,n,i)||$L(e,t,n,i,r,o)||$L(n,i,r,o,e,t))<0}function IPe(e,t,n,i,r,o,s,a){const l=e-s,u=t-a,c=n-s,d=i-a,f=r-s,h=o-a,m=c*c+d*d,_=f*f+h*h;return l*(d*_-m*h)-u*(c*_-m*f)+(l*l+u*u)*(c*h-d*f)<0}function RPe(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,u=o-t,c=s*s+a*a,d=l*l+u*u,f=.5/(s*u-a*l),h=(u*c-a*d)*f,p=(s*d-l*c)*f;return h*h+p*p}function O_(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],s=t[o];let a=r-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let o=n+1,s=i;Ab(e,n+i>>1,o),t[e[n]]>t[e[i]]&&Ab(e,n,i),t[e[o]]>t[e[i]]&&Ab(e,o,i),t[e[n]]>t[e[o]]&&Ab(e,n,o);const a=e[o],l=t[a];for(;;){do{o++}while(t[e[o]]<l);do{s--}while(t[e[s]]>l);if(s<o)break;Ab(e,o,s)}e[n+1]=e[s],e[s]=a,i-o+1>=s-n?(O_(e,t,o,i),O_(e,t,n,s-1)):(O_(e,t,n,s-1),O_(e,t,o,i))}}function Ab(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function FPe(e){return e[0]}function LPe(e){return e[1]}class wg{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){const r=(t=+t)+(i=+i),o=n=+n;if(i<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class VL{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class jPe{constructor(t,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this,o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let _,b,h=0,p=0,m=i.length;h<m;h+=3,p+=2){const v=2*i[h],D=2*i[h+1],A=2*i[h+2],I=t[v],L=t[v+1],q=t[A],W=t[A+1],X=t[D]-I,oe=t[D+1]-L,ae=q-I,Se=W-L,ie=X*X+oe*oe,te=ae*ae+Se*Se,de=2*(X*Se-oe*ae);if(de)if(Math.abs(de)<1e-8)_=(I+q)/2,b=(L+W)/2;else{const pe=1/de;_=I+(Se*ie-oe*te)*pe,b=L+(X*te-ae*ie)*pe}else _=(I+q)/2-1e8*Se,b=(L+W)/2+1e8*ae;o[p]=_,o[p+1]=b}let a,u,d,s=n[n.length-1],l=4*s,c=t[2*s],f=t[2*s+1];r.fill(0);for(let h=0;h<n.length;++h)s=n[h],a=l,u=c,d=f,l=4*s,c=t[2*s],f=t[2*s+1],r[a+2]=r[l]=d-f,r[a+3]=r[l+1]=c-u}render(t){const n=null==t?t=new wg:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,d=i.length;c<d;++c){const f=i[c];if(f<c)continue;const h=2*Math.floor(c/3),p=2*Math.floor(f/3);this._renderSegment(s[h],s[h+1],s[p],s[p+1],t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const d=2*Math.floor(r[u]/3),f=s[d],h=s[d+1],p=4*l,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new wg:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=null==n?n=new wg:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new VL;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,o){let s;const a=this._regioncode(t,n),l=this._regioncode(i,r);0===a&&0===l?(o.moveTo(t,n),o.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,i){return(n=+n)==n&&(i=+i)==i&&this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r)e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[o]==r[a]&&n[o+1]==r[a+1]&&n[(o+2)%s]==r[(a+l-2)%l]&&n[(o+3)%s]==r[(a+l-1)%l]){yield i;break e}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,s=i[t];if(-1===s)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[2*u],n[2*u+1]),l=l%3==2?l-2:l+1,o[l]!==t)break;l=r[l]}while(l!==s&&-1!==l);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:i}=this,r=4*t;return i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const i=n.length;let o,s,u,d,f,r=null,a=n[i-2],l=n[i-1],c=this._regioncode(a,l);for(let h=0;h<i;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),0===u&&0===c)d=f,f=0,r?r.push(a,l):r=[a,l];else{let p,m,_,b,v;if(0===u){if(null===(p=this._clipSegment(o,s,a,l,u,c)))continue;[m,_,b,v]=p}else{if(null===(p=this._clipSegment(a,l,o,s,c,u)))continue;[b,v,m,_]=p,d=f,f=this._edgecode(m,_),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(m,_):r=[m,_]}d=f,f=this._edgecode(b,v),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(b,v):r=[b,v]}if(r)d=f,f=this._edgecode(r[0],r[1]),d&&f&&this._edge(t,d,f,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,o,s){for(;;){if(0===o&&0===s)return[t,n,i,r];if(o&s)return null;let a,l,u=o||s;8&u?(a=t+(i-t)*(this.ymax-n)/(r-n),l=this.ymax):4&u?(a=t+(i-t)*(this.ymin-n)/(r-n),l=this.ymin):2&u?(l=n+(r-n)*(this.xmax-t)/(i-t),a=this.xmax):(l=n+(r-n)*(this.xmin-t)/(i-t),a=this.xmin),o?o=this._regioncode(t=a,n=l):s=this._regioncode(i=a,r=l)}}_clipInfinite(t,n,i,r,o,s){let l,a=Array.from(n);if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let d,u=0,c=a.length,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,o){for(;n!==i;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin}(r[o]!==s||r[o+1]!==a)&&this.contains(t,s,a)&&(r.splice(o,0,s,a),o+=2)}if(r.length>4)for(let s=0;s<r.length;s+=2){const a=(s+2)%r.length,l=(s+4)%r.length;(r[s]===r[a]&&r[a]===r[l]||r[s+1]===r[a+1]&&r[a+1]===r[l+1])&&(r.splice(a,2),s-=2)}return o}_project(t,n,i,r){let s,a,l,o=1/0;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<o&&(l=this.ymin,a=t+(o=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<o&&(l=this.ymax,a=t+(o=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<o&&(a=this.xmax,l=n+(o=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<o&&(a=this.xmin,l=n+(o=s)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const BPe=2*Math.PI,N_=Math.pow;function $Pe(e){return e[0]}function VPe(e){return e[1]}function UPe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class HL{static from(t,n=$Pe,i=VPe,r){return new HL("length"in t?function zPe(e,t,n,i){const r=e.length,o=new Float64Array(2*r);for(let s=0;s<r;++s){const a=e[s];o[2*s]=t.call(i,a,s,e),o[2*s+1]=n.call(i,a,s,e)}return o}(t,n,i,r):Float64Array.from(function*GPe(e,t,n,i){let r=0;for(const o of e)yield t.call(i,o,r,e),yield n.call(i,o,r,e),++r}(t,n,i,r)))}constructor(t){this._delaunator=new vx(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function HPe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],o=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=UPe(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new vx(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=o[l%3==2?l-2:l+1];(-1===i[l]||-1===s[c])&&(s[c]=l)}for(let l=0,u=r.length;l<u;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],s[r[0]]=1,2===r.length&&(s[r[1]]=0))}voronoi(t){return new jPe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:s,collinear:a}=this;if(a){const d=a.indexOf(t);return d>0&&(yield a[d-1]),void(d<a.length-1&&(yield a[d+1]))}const l=n[t];if(-1===l)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3==2?u-2:u+1,s[u]!==t)return;if(u=o[u],-1===u){const d=i[(r[t]+1)%i.length];return void(d!==c&&(yield d))}}while(u!==l)}find(t,n,i=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=i;let o;for(;(o=this._step(i,t,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(t,n,i){const{inedges:r,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,d=N_(n-u[2*t],2)+N_(i-u[2*t+1],2);const f=r[t];let h=f;do{let p=l[h];const m=N_(n-u[2*p],2)+N_(i-u[2*p+1],2);if(m<d&&(d=m,c=p),h=h%3==2?h-2:h+1,l[h]!==t)break;if(h=a[h],-1===h){if(h=o[(s[t]+1)%o.length],h!==p&&N_(n-u[2*h],2)+N_(i-u[2*h+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=null==t?t=new wg:void 0,{points:i,halfedges:r,triangles:o}=this;for(let s=0,a=r.length;s<a;++s){const l=r[s];if(l<s)continue;const u=2*o[s],c=2*o[l];t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n=2){const i=null==t?t=new wg:void 0,{points:r}=this;for(let o=0,s=r.length;o<s;o+=2){const a=r[o],l=r[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,BPe)}return i&&i.value()}renderHull(t){const n=null==t?t=new wg:void 0,{hull:i,points:r}=this,o=2*i[0],s=i.length;t.moveTo(r[o],r[o+1]);for(let a=1;a<s;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new VL;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=null==n?n=new wg:void 0,{points:r,triangles:o}=this,s=2*o[t*=3],a=2*o[t+1],l=2*o[t+2];return n.moveTo(r[s],r[s+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new VL;return this.renderTriangle(t,n),n.value()}}function UL(e){he.call(this,null,e)}UL.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const WPe=[-1e5,-1e5,1e5,1e5];function qPe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}Fe(UL,he,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:WPe;const o=this.value=HL.from(i,e.x,e.y).voronoi(r);for(let s=0,a=i.length;s<a;++s){const l=o.cellPolygon(s);i[s][n]=l?qPe(l):null}return t.reflow(e.modified()).modifies(n)}});var zL=Math.PI/180;function KPe(e,t,n,i){if(!t.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,2048/o,2048/o);var c,d,f,h,p,s=0,a=0,l=0,u=n.length;for(--i;++i<u;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=r.measureText(t.text+"m").width*o,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*zL),_=Math.cos(t.rotate*zL),b=c*_,v=c*m,D=f*_,A=f*m;c=Math.max(Math.abs(b+A),Math.abs(b-A))+31>>5<<5,f=~~Math.max(Math.abs(v+D),Math.abs(v-D))}else c=c+31>>5<<5;if(f>l&&(l=f),s+c>=2048&&(s=0,a+=l,l=0),a+f>=2048)break;r.translate((s+(c>>1))/o,(a+(f>>1))/o),t.rotate&&r.rotate(t.rotate*zL),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=f,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var I=r.getImageData(0,0,2048/o,2048/o).data,L=[];--i>=0;)if((t=n[i]).hasText){for(d=(c=t.width)>>5,f=t.y1-t.y0,h=0;h<f*d;h++)L[h]=0;if(null==(s=t.xoff))return;a=t.yoff;var k=0,B=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var W=I[2048*(a+p)+(s+h)<<2]?1<<31-h%32:0;L[d*p+(h>>5)]|=W,k|=W}k?B=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+B,t.sprite=L.slice(0,(t.y1-t.y0)*d)}}}function XPe(e,t,n){for(var c,i=e.sprite,r=e.width>>5,o=e.x-(r<<4),s=127&o,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*(n>>=5)+(o>>5),d=0;d<l;d++){c=0;for(var f=0;f<=r;f++)if((c<<a|(f<r?(c=i[d*r+f])>>>s:0))&t[u+f])return!0;u+=n}return!1}function JPe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function QPe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function tee(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Eg(e){return"function"==typeof e?e:function(){return e}}var tFe={archimedean:tee,rectangular:function ZPe(e){var n=4*e[0]/e[1],i=0,r=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:i+=n;break;case 1:r+=4;break;case 2:i-=n;break;default:r-=4}return[i,r]}}};const nee=["x","y","font","fontSize","fontStyle","fontWeight","angle"],nFe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function GL(e){he.call(this,function YPe(){var t,n,i,r,o,s,a,e=[256,256],l=tee,u=[],c=Math.random,d={};function h(p,m,_){for(var k,B,q,b=m.x,v=m.y,D=Math.sqrt(e[0]*e[0]+e[1]*e[1]),A=l(e),I=c()<.5?1:-1,L=-I;(k=A(L+=I))&&(B=~~k[0],q=~~k[1],!(Math.min(Math.abs(B),Math.abs(q))>=D));)if(m.x=b+B,m.y=v+q,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!_||!XPe(m,p,e[0]))&&(!_||QPe(m,_))){for(var pe,W=m.sprite,X=m.width>>5,oe=e[0]>>5,ae=m.x-(X<<4),Se=127&ae,ie=32-Se,te=m.y1-m.y0,de=(m.y+m.y0)*oe+(ae>>5),Re=0;Re<te;Re++){pe=0;for(var rt=0;rt<=X;rt++)p[de+rt]|=pe<<ie|(rt<X?(pe=W[Re*X+rt])>>>Se:0);de+=oe}return m.sprite=null,!0}return!1}return d.layout=function(){for(var p=function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=2048/m,p.height=2048/m;var _=p.getContext("2d");return _.fillStyle=_.strokeStyle="red",_.textAlign="center",{context:_,ratio:m}}(t_()),m=function eFe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),_=null,b=u.length,v=-1,D=[],A=u.map(L=>({text:t(L),font:n(L),style:r(L),weight:o(L),rotate:s(L),size:~~(i(L)+1e-14),padding:a(L),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:L})).sort((L,k)=>k.size-L.size);++v<b;){var I=A[v];I.x=e[0]*(c()+.5)>>1,I.y=e[1]*(c()+.5)>>1,KPe(p,I,A,v),I.hasText&&h(m,I,_)&&(D.push(I),_?JPe(_,I):_=[{x:I.x+I.x0,y:I.y+I.y0},{x:I.x+I.x1,y:I.y+I.y1}],I.x-=e[0]>>1,I.y-=e[1]>>1)}return D},d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=Eg(p),d):n},d.fontStyle=function(p){return arguments.length?(r=Eg(p),d):r},d.fontWeight=function(p){return arguments.length?(o=Eg(p),d):o},d.rotate=function(p){return arguments.length?(s=Eg(p),d):s},d.text=function(p){return arguments.length?(t=Eg(p),d):t},d.spiral=function(p){return arguments.length?(l=tFe[p]||p,d):l},d.fontSize=function(p){return arguments.length?(i=Eg(p),d):i},d.padding=function(p){return arguments.length?(a=Eg(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}(),e)}GL.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:nee}]},Fe(GL,he,{transform(e,t){e.size&&(!e.size[0]||!e.size[1])&&be("Wordcloud size dimensions must be non-zero.");const i=e.modified();if(!(i||t.changed(t.ADD_REM)||nFe.some(function n(p){const m=e[p];return sn(m)&&t.modified(m.fields)})))return;const r=t.materialize(t.SOURCE).source,o=this.value,s=e.as||nee;let l,a=e.fontSize||14;if(sn(a)?l=e.fontSizeRange:a=ns(a),l){const p=a,m=Gn("sqrt")().domain(mc(r,p)).range(l);a=_=>m(p(_))}r.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Cl).layout(),c=o.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let m,_,p=0;p<h;++p)m=u[p],_=m.datum,_[s[0]]=m.x+d,_[s[1]]=m.y+f,_[s[2]]=m.font,_[s[3]]=m.size,_[s[4]]=m.style,_[s[5]]=m.weight,_[s[6]]=m.rotate;return t.reflow(i).modifies(s)}});const rFe=e=>new Uint8Array(e),oFe=e=>new Uint16Array(e),Nb=e=>new Uint32Array(e);function Ex(e,t,n){const i=(t<257?rFe:t<65537?oFe:Nb)(e);return n&&i.set(n),i}function iee(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const s=this,a=s.bisect(s.range,r.value),l=r.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)o[l[f]]|=i;for(f=c;f<d;++f)o[l[f]]|=i;return s}}}function ree(){let e=Nb(0),t=[],n=0;return{insert:function i(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=Nb(d);let p,m,_,h=Array(d);for(_=0;_<d;++_)h[_]=a(l[_]),f[_]=_;if(h=function lFe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],o=e[i];return r<o?-1:r>o?1:0}),function iFe(e,t){return Array.from(t,n=>e[n])}(e,t)}(h,f),c)p=t,m=e,t=Array(c+d),e=Nb(c+d),function uFe(e,t,n,i,r,o,s,a,l){let d,u=0,c=0;for(d=0;u<i&&c<s;++d)t[u]<r[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=r[c],l[d]=o[c++]+e);for(;u<i;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<s;++c,++d)a[d]=r[c],l[d]=o[c]+e}(u,p,m,c,h,f,d,t,e);else{if(u>0)for(_=0;_<d;++_)f[_]+=u;t=h,e=f}return n=c+d,{index:f,value:h}},remove:function r(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a},bisect:function s(a,l){let u;return l?u=l.length:(l=t,u=n),[kTe(l,a[0],0,u),LD(l,a[1],0,u)]},reindex:function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]},index:()=>e,size:()=>n}}function WL(e){he.call(this,function sFe(){let e=8,t=[],n=Nb(0),i=Ex(0,e),r=Ex(0,e);return{data:()=>t,seen:()=>n=function aFe(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length),add(o){for(let u,s=0,a=t.length,l=o.length;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,d,f;for(d=0;!s[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],s[d]?u[d]=-1:(u[d]=f,i[f]=i[d],r[f]=r[d],l[f]=c,c._index=f++),i[d]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){i[o]|=s},clear(o,s){i[o]&=~s},resize(o,s){(o>i.length||s>e)&&(e=Math.max(s,e),i=Ex(o,e,i),r=Ex(o,e))}}}(),e),this._indices=null,this._dims=null}function qL(e){he.call(this,null,e)}WL.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Fe(WL,he,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some(i=>t.modified(i.fields))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},o=this._dims=[],s=i.length;let l,u,a=0;for(;a<s;++a)l=n[a].fname,u=r[l]||(r[l]=ree()),o.push(iee(u,a,i[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=r.length,p={};let m,_,b,v,D,A,I,L,k;if(u.set(l),t.rem.length&&(D=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(A={},v=t.mod,I=0,L=v.length;I<L;++I)A[v[I]._index]=1;for(I=0;I<h;++I)k=i[I],(!s[I]||e.modified("fields",I)||t.modified(k.fields))&&(b=k.fname,(m=p[b])||(o[b]=_=ree(),p[b]=m=_.insert(k,t.source,0)),s[I]=iee(_,I,r[I]).onAdd(m,l));for(I=0,L=a.data().length;I<L;++I)D[I]||(u[I]!==l[I]?d.push(I):A[I]&&l[I]!==c&&f.push(I));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=r.size()+i.length,d=o.length;let h,p,m,f=r.size();r.resize(c,d),r.add(i);const _=r.curr(),b=r.prev(),v=r.all();for(h=0;h<d;++h)p=a[h].fname,m=l[p]||(l[p]=s[p].insert(a[h],i,f)),o[h].onAdd(m,_);for(;f<c;++f)b[f]=v,_[f]!==v&&u.push(f)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),o=i.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,r[u]!==o&&n.push(u)},remove(e,t,n){const i=this._indices,r=this.value,o=r.curr(),s=r.prev(),a=r.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in i)i[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(t,n);for(const s in i)i[s].reindex(o)})},update(e,t,n){const i=this._dims,r=e.query,o=t.stamp,s=i.length;let l,u,a=0;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(1===a)a=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)!e.modified("query",u)||(a|=i[u].one,this.incrementAll(i[u],r[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,i){const r=this.value,o=r.seen(),s=r.curr(),a=r.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],m=e.one;let _,b,v;if(d<h)for(_=d,b=Math.min(h,f);_<b;++_)v=l[_],o[v]!==n&&(a[v]=s[v],o[v]=n,i.push(v)),s[v]^=m;else if(d>h)for(_=h,b=Math.min(d,p);_<b;++_)v=l[_],o[v]!==n&&(a[v]=s[v],o[v]=n,i.push(v)),s[v]^=m;if(f>p)for(_=Math.max(d,p),b=f;_<b;++_)v=l[_],o[v]!==n&&(a[v]=s[v],o[v]=n,i.push(v)),s[v]^=m;else if(f<p)for(_=Math.max(h,f),b=p;_<b;++_)v=l[_],o[v]!==n&&(a[v]=s[v],o[v]=n,i.push(v)),s[v]^=m;e.range=t.slice()},incrementOne(e,t,n,i){const o=this.value.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,m,_;if(u<d)for(p=u,m=Math.min(d,c);p<m;++p)_=s[p],o[_]^=h,n.push(_);else if(u>d)for(p=d,m=Math.min(u,f);p<m;++p)_=s[p],o[_]^=h,i.push(_);if(c>f)for(p=Math.max(u,f),m=c;p<m;++p)_=s[p],o[_]^=h,n.push(_);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)_=s[p],o[_]^=h,i.push(_);e.range=t.slice()}}),qL.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Fe(qL,he,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(0==(r&n))return t.StopPropagation;const o=t.fork(t.ALL),s=i.data(),a=i.curr(),l=i.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),r&r-1?(o.filter(o.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const d=a[c]&n;return!d||d^d^l[c]&n?null:s[c]})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===r?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const Cg="Literal",oee="CallExpression";function Du(e){this.type=e}var Ic,ut,ye,us,ai;Du.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=function bFe(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case oee:return[e.callee].concat(e.arguments);case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];default:return[]}}(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1},(Ic={})[1]="Boolean",Ic[2]="<end>",Ic[3]="Identifier",Ic[4]="Keyword",Ic[5]="Null",Ic[6]="Numeric",Ic[7]="Punctuator",Ic[8]="String",Ic[9]="RegularExpression";var see="Identifier",_o="Unexpected token %0",YL="Invalid regular expression",KL="Invalid regular expression: missing /",aee="Octal literals are not allowed in strict mode.",jo="ILLEGAL",Ib="Disabled.",jFe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),BFe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Sx(e,t){if(!e)throw new Error("ASSERT: "+t)}function ef(e){return e>=48&&e<=57}function XL(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Rb(e){return"01234567".indexOf(e)>=0}function $Fe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Pb(e){return 10===e||13===e||8232===e||8233===e}function Fb(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&jFe.test(String.fromCharCode(e))}function xx(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&BFe.test(String.fromCharCode(e))}const VFe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function lee(){for(;ye<us;){const e=ut.charCodeAt(ye);if(!$Fe(e)&&!Pb(e))break;++ye}}function JL(e){var t,n,i,r=0;for(n="u"===e?4:2,t=0;t<n;++t)ye<us&&XL(ut[ye])?(i=ut[ye++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):Wn({},_o,jo);return String.fromCharCode(r)}function HFe(){var e,t;for(t=0,"}"===(e=ut[ye])&&Wn({},_o,jo);ye<us&&XL(e=ut[ye++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Wn({},_o,jo),t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}function uee(){var e,t;for(e=ut.charCodeAt(ye++),t=String.fromCharCode(e),92===e&&(117!==ut.charCodeAt(ye)&&Wn({},_o,jo),++ye,(!(e=JL("u"))||"\\"===e||!Fb(e.charCodeAt(0)))&&Wn({},_o,jo),t=e);ye<us&&xx(e=ut.charCodeAt(ye));)++ye,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==ut.charCodeAt(ye)&&Wn({},_o,jo),++ye,(!(e=JL("u"))||"\\"===e||!xx(e.charCodeAt(0)))&&Wn({},_o,jo),t+=e);return t}function QL(){var n,r,o,s,e=ye,t=ut.charCodeAt(ye),i=ut[ye];switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ye,{type:7,value:String.fromCharCode(t),start:e,end:ye};default:if(61===(n=ut.charCodeAt(ye+1)))switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ye+=2,{type:7,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ye};case 33:case 61:return 61===ut.charCodeAt(ye+=2)&&++ye,{type:7,value:ut.slice(e,ye),start:e,end:ye}}}return">>>="===(s=ut.substr(ye,4))?{type:7,value:s,start:e,end:ye+=4}:">>>"===(o=s.substr(0,3))||"<<="===o||">>="===o?{type:7,value:o,start:e,end:ye+=3}:i===(r=o.substr(0,2))[1]&&"+-<>&|".indexOf(i)>=0||"=>"===r?{type:7,value:r,start:e,end:ye+=2}:("//"===r&&Wn({},_o,jo),"<>=!+-*%&|^/".indexOf(i)>=0?{type:7,value:i,start:e,end:++ye}:void Wn({},_o,jo))}function cee(){var e,t,n;if(Sx(ef((n=ut[ye]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=ye,e="","."!==n){if(e=ut[ye++],n=ut[ye],"0"===e){if("x"===n||"X"===n)return++ye,function GFe(e){let t="";for(;ye<us&&XL(ut[ye]);)t+=ut[ye++];return 0===t.length&&Wn({},_o,jo),Fb(ut.charCodeAt(ye))&&Wn({},_o,jo),{type:6,value:parseInt("0x"+t,16),start:e,end:ye}}(t);if(Rb(n))return function WFe(e){let t="0"+ut[ye++];for(;ye<us&&Rb(ut[ye]);)t+=ut[ye++];return(Fb(ut.charCodeAt(ye))||ef(ut.charCodeAt(ye)))&&Wn({},_o,jo),{type:6,value:parseInt(t,8),octal:!0,start:e,end:ye}}(t);n&&ef(n.charCodeAt(0))&&Wn({},_o,jo)}for(;ef(ut.charCodeAt(ye));)e+=ut[ye++];n=ut[ye]}if("."===n){for(e+=ut[ye++];ef(ut.charCodeAt(ye));)e+=ut[ye++];n=ut[ye]}if("e"===n||"E"===n)if(e+=ut[ye++],("+"===(n=ut[ye])||"-"===n)&&(e+=ut[ye++]),ef(ut.charCodeAt(ye)))for(;ef(ut.charCodeAt(ye));)e+=ut[ye++];else Wn({},_o,jo);return Fb(ut.charCodeAt(ye))&&Wn({},_o,jo),{type:6,value:parseFloat(e),start:t,end:ye}}function dee(){if(lee(),ye>=us)return{type:2,start:ye,end:ye};const e=ut.charCodeAt(ye);return Fb(e)?function zFe(){var e,t;return e=ye,t=92===ut.charCodeAt(ye)?uee():function UFe(){var e,t;for(e=ye++;ye<us;){if(92===(t=ut.charCodeAt(ye)))return ye=e,uee();if(!xx(t))break;++ye}return ut.slice(e,ye)}(),{type:1===t.length?3:VFe.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:ye}}():40===e||41===e||59===e?QL():39===e||34===e?function qFe(){var t,n,i,r,e="",o=!1;for(Sx("'"===(t=ut[ye])||'"'===t,"String literal must starts with a quote"),n=ye,++ye;ye<us;){if((i=ut[ye++])===t){t="";break}if("\\"===i)if((i=ut[ye++])&&Pb(i.charCodeAt(0)))"\r"===i&&"\n"===ut[ye]&&++ye;else switch(i){case"u":case"x":"{"===ut[ye]?(++ye,e+=HFe()):e+=JL(i);break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Rb(i)?(0!==(r="01234567".indexOf(i))&&(o=!0),ye<us&&Rb(ut[ye])&&(o=!0,r=8*r+"01234567".indexOf(ut[ye++]),"0123".indexOf(i)>=0&&ye<us&&Rb(ut[ye])&&(r=8*r+"01234567".indexOf(ut[ye++]))),e+=String.fromCharCode(r)):e+=i}else{if(Pb(i.charCodeAt(0)))break;e+=i}}return""!==t&&Wn({},_o,jo),{type:8,value:e,octal:o,start:n,end:ye}}():46===e?ef(ut.charCodeAt(ye+1))?cee():QL():ef(e)?cee():QL()}function ba(){const e=ai;return ye=e.end,ai=dee(),ye=e.end,e}function fee(){const e=ye;ai=dee(),ye=e}function hee(e,t,n){const i=new Du("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return i.operator=e,i.left=t,i.right=n,i}function eLe(e,t){const n=new Du("CallExpression");return n.callee=e,n.arguments=t,n}function ZL(e){const t=new Du(see);return t.name=e,t}function Lb(e){const t=new Du("Literal");return t.value=e.value,t.raw=ut.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function pee(e,t,n){const i=new Du("MemberExpression");return i.computed="["===e,i.object=t,i.property=n,i.computed||(n.member=!0),i}function gee(e,t,n){const i=new Du("Property");return i.key=t,i.value=n,i.kind=e,i}function Wn(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(o,s)=>(Sx(s<i.length,"Message reference must be in range"),i[s]));throw(n=new Error(r)).index=ye,n.description=r,n}function Tx(e){2===e.type&&Wn(e,"Unexpected end of input"),6===e.type&&Wn(e,"Unexpected number"),8===e.type&&Wn(e,"Unexpected string"),3===e.type&&Wn(e,"Unexpected identifier"),4===e.type&&Wn(e,"Unexpected reserved word"),Wn(e,_o,e.value)}function cs(e){const t=ba();(7!==t.type||t.value!==e)&&Tx(t)}function ji(e){return 7===ai.type&&ai.value===e}function e3(e){return 4===ai.type&&ai.value===e}function mee(){ye=ai.start;const e=ba();return 8===e.type||6===e.type?(e.octal&&Wn(e,aee),Lb(e)):ZL(e.value)}function oLe(){var e,t,n;return ye=ai.start,3===(e=ai).type?(n=mee(),cs(":"),gee("init",n,xg())):2!==e.type&&7!==e.type?(t=mee(),cs(":"),gee("init",t,xg())):void Tx(e)}const lLe={if:1};function uLe(){var e,t,n;if(ji("("))return function aLe(){cs("(");const e=t3();return cs(")"),e}();if(ji("["))return function rLe(){const e=[];for(ye=ai.start,cs("[");!ji("]");)ji(",")?(ba(),e.push(null)):(e.push(xg()),ji("]")||cs(","));return ba(),function ZFe(e){const t=new Du("ArrayExpression");return t.elements=e,t}(e)}();if(ji("{"))return function sLe(){var t,i,e=[],r={},o=String;for(ye=ai.start,cs("{");!ji("}");)i="$"+((t=oLe()).key.type===see?t.key.name:o(t.key.value)),Object.prototype.hasOwnProperty.call(r,i)?Wn({},"Duplicate data property in object literal not allowed in strict mode"):r[i]=!0,e.push(t),ji("}")||cs(",");return cs("}"),function nLe(e){const t=new Du("ObjectExpression");return t.properties=e,t}(e)}();if(ye=ai.start,3===(e=ai.type)||lLe[ai.value])n=ZL(ba().value);else if(8===e||6===e)ai.octal&&Wn(ai,aee),n=Lb(ba());else{if(4===e)throw new Error(Ib);1===e?((t=ba()).value="true"===t.value,n=Lb(t)):5===e?((t=ba()).value=null,n=Lb(t)):ji("/")||ji("/=")?(n=Lb(function JFe(){var e,t,n,i;return ai=null,lee(),e=ye,t=function KFe(){var e,t,n,i;for(Sx("/"===(e=ut[ye]),"Regular expression literal must start with a slash"),t=ut[ye++],n=!1,i=!1;ye<us;)if(t+=e=ut[ye++],"\\"===e)Pb((e=ut[ye++]).charCodeAt(0))&&Wn({},KL),t+=e;else if(Pb(e.charCodeAt(0)))Wn({},KL);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||Wn({},KL),{value:t.substr(1,t.length-2),literal:t}}(),n=function XFe(){var e,t,n;for(t="",n="";ye<us&&xx((e=ut[ye]).charCodeAt(0));)++ye,"\\"===e&&ye<us?Wn({},_o,jo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Wn({},YL,n),{value:n,literal:t}}(),i=function YFe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Wn({},YL)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(i){Wn({},YL)}try{return new RegExp(e,t)}catch(i){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ye}}()),fee()):Tx(ba())}return n}function cLe(){const e=[];if(cs("("),!ji(")"))for(;ye<us&&(e.push(xg()),!ji(")"));)cs(",");return cs(")"),e}function hLe(){cs("[");const e=t3();return cs("]"),e}function _ee(){const e=function pLe(){var e;for(e=uLe();;)if(ji("."))e=pee(".",e,(cs("."),function dLe(){ye=ai.start;const e=ba();return function QFe(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||Tx(e),ZL(e.value)}()));else if(ji("("))e=eLe(e,cLe());else{if(!ji("["))break;e=pee("[",e,hLe())}return e}();if(7===ai.type&&(ji("++")||ji("--")))throw new Error(Ib);return e}function Ax(){var e,t;if(7!==ai.type&&4!==ai.type)t=_ee();else{if(ji("++")||ji("--"))throw new Error(Ib);if(ji("+")||ji("-")||ji("~")||ji("!"))e=ba(),t=Ax(),t=function iLe(e,t){const n=new Du("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(e3("delete")||e3("void")||e3("typeof"))throw new Error(Ib);t=_ee()}}return t}function yee(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function xg(){var e,t;return e=function gLe(){var e,t,n,i,r,o,s,a,l,u;if(e=ai,l=Ax(),0===(r=yee(i=ai)))return l;for(i.prec=r,ba(),t=[e,ai],o=[l,i,s=Ax()];(r=yee(ai))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=hee(a,l,s),o.push(n);(i=ba()).prec=r,o.push(i),t.push(ai),n=Ax(),o.push(n)}for(n=o[u=o.length-1],t.pop();u>1;)t.pop(),n=hee(o[u-1].value,o[u-2],n),u-=2;return n}(),ji("?")&&(ba(),t=xg(),cs(":"),e=function tLe(e,t,n){const i=new Du("ConditionalExpression");return i.test=e,i.consequent=t,i.alternate=n,i}(e,t,xg())),e}function t3(){const e=xg();if(ji(","))throw new Error(Ib);return e}function n3(e){ye=0,us=(ut=e).length,ai=null,fee();const t=t3();if(2!==ai.type)throw new Error("Unexpect token after expression.");return t}var vee={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function bee(e){function n(s,a,l){return u=>function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",0===l.lastIndexOf("new ",0)&&(c="("+c+")")),c+"."+s+(u<0?"":0===u?"()":"("+a.slice(1).map(e).join(",")+")")}(s,u,a,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&be("Missing arguments to clamp function."),s.length>3&&be("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&be("Missing arguments to if function."),s.length>3&&be("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function wee(e){const t=(e=e||{}).allowed?hu(e.allowed):{},n=e.forbidden?hu(e.forbidden):{},i=e.constants||vee,r=(e.functions||bee)(d),o=e.globalvar,s=e.fieldvar,a=sn(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function d(p){if(Qe(p))return p;const m=f[p.type];return null==m&&be("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:gt(n,m)?be("Illegal identifier: "+m):gt(i,m)?i[m]:gt(t,m)?m:(l[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,_=d(p.object);m&&(c+=1);const b=d(p.property);return _===s&&(u[function mLe(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(b)]=1),m&&(c-=1),_+(m?"."+b:"["+b+"]")},CallExpression:p=>{"Identifier"!==p.callee.type&&be("Illegal callee type: "+p.callee.type);const m=p.callee.name,_=p.arguments,b=gt(r,m)&&r[m];return b||be("Unrecognized function: "+m),sn(b)?b(_):b+"("+_.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=r,h.constants=i,h}var Eee,Cee,r3,o3,s3,Ox=new Fo,Nx=new Fo,Rc={point:Lo,lineStart:Lo,lineEnd:Lo,polygonStart:function(){Ox=new Fo,Rc.lineStart=_Le,Rc.lineEnd=yLe},polygonEnd:function(){var e=+Ox;Nx.add(e<0?Vs+e:e),this.lineStart=this.lineEnd=this.point=Lo},sphere:function(){Nx.add(Vs)}};function _Le(){Rc.point=vLe}function yLe(){Dee(Eee,Cee)}function vLe(e,t){Rc.point=Dee,Eee=e,Cee=t,r3=e*=_n,o3=Ot(t=(t*=_n)/2+LS),s3=mt(t)}function Dee(e,t){var n=(e*=_n)-r3,i=n>=0?1:-1,r=i*n,o=Ot(t=(t*=_n)/2+LS),s=mt(t),a=s3*s,l=o3*o+a*Ot(r),u=a*i*mt(r);Ox.add(Al(u,l)),r3=e,o3=o,s3=s}var tr,wa,gr,qa,Tg,See,xee,M_,jb,Bh,tf,nf={point:a3,lineStart:Aee,lineEnd:Oee,polygonStart:function(){nf.point=Nee,nf.lineStart=wLe,nf.lineEnd=ELe,jb=new Fo,Rc.polygonStart()},polygonEnd:function(){Rc.polygonEnd(),nf.point=a3,nf.lineStart=Aee,nf.lineEnd=Oee,Ox<0?(tr=-(gr=180),wa=-(qa=90)):jb>xt?qa=90:jb<-xt&&(wa=-90),tf[0]=tr,tf[1]=gr},sphere:function(){tr=-(gr=180),wa=-(qa=90)}};function a3(e,t){Bh.push(tf=[tr=e,gr=e]),t<wa&&(wa=t),t>qa&&(qa=t)}function Tee(e,t){var n=yg([e*_n,t*_n]);if(M_){var i=C_(M_,n),o=C_([i[1],-i[0],0],i);JS(o),o=YS(o);var u,s=e-Tg,a=s>0?1:-1,l=o[0]*Dr*a,c=Fn(s)>180;c^(a*Tg<l&&l<a*e)?(u=o[1]*Dr)>qa&&(qa=u):c^(a*Tg<(l=(l+360)%360-180)&&l<a*e)?(u=-o[1]*Dr)<wa&&(wa=u):(t<wa&&(wa=t),t>qa&&(qa=t)),c?e<Tg?Ya(tr,e)>Ya(tr,gr)&&(gr=e):Ya(e,gr)>Ya(tr,gr)&&(tr=e):gr>=tr?(e<tr&&(tr=e),e>gr&&(gr=e)):e>Tg?Ya(tr,e)>Ya(tr,gr)&&(gr=e):Ya(e,gr)>Ya(tr,gr)&&(tr=e)}else Bh.push(tf=[tr=e,gr=e]);t<wa&&(wa=t),t>qa&&(qa=t),M_=n,Tg=e}function Aee(){nf.point=Tee}function Oee(){tf[0]=tr,tf[1]=gr,nf.point=a3,M_=null}function Nee(e,t){if(M_){var n=e-Tg;jb.add(Fn(n)>180?n+(n>0?360:-360):n)}else See=e,xee=t;Rc.point(e,t),Tee(e,t)}function wLe(){Rc.lineStart()}function ELe(){Nee(See,xee),Rc.lineEnd(),Fn(jb)>xt&&(tr=-(gr=180)),tf[0]=tr,tf[1]=gr,M_=null}function Ya(e,t){return(t-=e)<0?t+360:t}function CLe(e,t){return e[0]-t[0]}function Mee(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var Bb,Mx,kx,Ix,Rx,Px,Fx,Lx,l3,u3,c3,kee,Iee,qs,Ys,Ks,Su={sphere:Lo,point:d3,lineStart:Ree,lineEnd:Pee,polygonStart:function(){Su.lineStart=TLe,Su.lineEnd=ALe},polygonEnd:function(){Su.lineStart=Ree,Su.lineEnd=Pee}};function d3(e,t){e*=_n;var n=Ot(t*=_n);$b(n*Ot(e),n*mt(e),mt(t))}function $b(e,t,n){++Bb,kx+=(e-kx)/Bb,Ix+=(t-Ix)/Bb,Rx+=(n-Rx)/Bb}function Ree(){Su.point=SLe}function SLe(e,t){e*=_n;var n=Ot(t*=_n);qs=n*Ot(e),Ys=n*mt(e),Ks=mt(t),Su.point=xLe,$b(qs,Ys,Ks)}function xLe(e,t){e*=_n;var n=Ot(t*=_n),i=n*Ot(e),r=n*mt(e),o=mt(t),s=Al(Hs((s=Ys*o-Ks*r)*s+(s=Ks*i-qs*o)*s+(s=qs*r-Ys*i)*s),qs*i+Ys*r+Ks*o);Mx+=s,Px+=s*(qs+(qs=i)),Fx+=s*(Ys+(Ys=r)),Lx+=s*(Ks+(Ks=o)),$b(qs,Ys,Ks)}function Pee(){Su.point=d3}function TLe(){Su.point=OLe}function ALe(){Fee(kee,Iee),Su.point=d3}function OLe(e,t){kee=e,Iee=t,e*=_n,t*=_n,Su.point=Fee;var n=Ot(t);qs=n*Ot(e),Ys=n*mt(e),Ks=mt(t),$b(qs,Ys,Ks)}function Fee(e,t){e*=_n;var n=Ot(t*=_n),i=n*Ot(e),r=n*mt(e),o=mt(t),s=Ys*o-Ks*r,a=Ks*i-qs*o,l=qs*r-Ys*i,u=bF(s,a,l),c=ya(u),d=u&&-c/u;l3.add(d*s),u3.add(d*a),c3.add(d*l),Mx+=c,Px+=c*(qs+(qs=i)),Fx+=c*(Ys+(Ys=r)),Lx+=c*(Ks+(Ks=o)),$b(qs,Ys,Ks)}const f3="intersect",jx="index:unit";function Bee(e,t){for(var s,a,n=t.fields,i=t.values,r=n.length,o=0;o<r;++o)if((a=n[o]).getter=fa.getter||fa(a.field),nh(s=a.getter(e))&&(s=ts(s)),nh(i[o])&&(i[o]=ts(i[o])),nh(i[o][0])&&(i[o]=i[o].map(ts)),"E"===a.type){if(Ce(i[o])?i[o].indexOf(s)<0:s!==i[o])return!1}else if("R"===a.type){if(!L0(s,i[o]))return!1}else if("R-RE"===a.type){if(!L0(s,i[o],!0,!1))return!1}else if("R-E"===a.type){if(!L0(s,i[o],!1,!1))return!1}else if("R-LE"===a.type&&!L0(s,i[o],!1,!0))return!1;return!0}const h3=fa("_vgsid_"),$ee=function kLe(e){let t=e,n=e;function i(s,a,l,u){for(null==l&&(l=0),null==u&&(u=s.length);l<u;){const c=l+u>>>1;n(s[c],a)<0?l=c+1:u=c}return l}return 1===e.length&&(t=(s,a)=>e(s)-a,n=function ILe(e){return(t,n)=>function MLe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}(e(t),n)}(e)),{left:i,center:function o(s,a,l,u){null==l&&(l=0),null==u&&(u=s.length);const c=i(s,a,l,u-1);return c>l&&t(s[c-1],a)>-t(s[c],a)?c-1:c},right:function r(s,a,l,u){for(null==l&&(l=0),null==u&&(u=s.length);l<u;){const c=l+u>>>1;n(s[c],a)>0?u=c:l=c+1}return l}}}(h3),zLe=$ee.left,GLe=$ee.right;var Vee={E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ts(t[0]),i=ts(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=ts(t[0]),i=ts(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};function p3(e,t,n,i){t[0].type!==Cg&&be("First argument to selection functions must be a string literal.");const r=t[0].value,s="unit",a="@"+s,l=":"+r;(t.length>=2&&On(t).value)===f3&&!gt(i,a)&&(i[a]=n.getData(r).indataRef(n,s)),gt(i,l)||(i[l]=n.getData(r).tuplesRef())}function Hee(e){const t=this.context.data[e];return t?t.values.value:[]}const Vb=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},e3e=Vb("format"),Uee=Vb("timeFormat"),t3e=Vb("utcFormat"),n3e=Vb("timeParse"),i3e=Vb("utcParse"),Bx=new Date(2e3,0,1);function $x(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(Bx.setYear(2e3),Bx.setMonth(e),Bx.setDate(t),Uee.call(this,Bx,n)):""}function m3(e,t,n,i){t[0].type!==Cg&&be("First argument to data functions must be a string literal.");const r=t[0].value,o=":"+r;if(!gt(o,i))try{i[o]=n.getData(r).tuplesRef()}catch(s){}}function Ea(e,t,n,i){if(t[0].type===Cg)Gee(n,i,t[0].value);else for(e in n.scales)Gee(n,i,e)}function Gee(e,t,n){const i="%"+n;if(!gt(t,i))try{t[i]=e.scaleRef(n)}catch(r){}}function rf(e,t){let n;return sn(e)?e:Qe(e)?(n=t.scales[e])&&n.value:void 0}function _3(e,t){return function(n,i,r){if(n){const o=rf(n,(r||this).context);return o&&o.path[e](i)}return t(i)}}const f3e=_3("area",function bLe(e){return Nx=new Fo,Xd(e,Rc),2*Nx}),h3e=_3("bounds",function DLe(e){var t,n,i,r,o,s,a;if(qa=gr=-(tr=wa=1/0),Bh=[],Xd(e,nf),n=Bh.length){for(Bh.sort(CLe),t=1,o=[i=Bh[0]];t<n;++t)Mee(i,(r=Bh[t])[0])||Mee(i,r[1])?(Ya(i[0],r[1])>Ya(i[0],i[1])&&(i[1]=r[1]),Ya(r[0],i[1])>Ya(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,t=0,i=o[n=o.length-1];t<=n;i=r,++t)(a=Ya(i[1],(r=o[t])[0]))>s&&(s=a,tr=r[0],gr=i[1])}return Bh=tf=null,tr===1/0||wa===1/0?[[NaN,NaN],[NaN,NaN]]:[[tr,wa],[gr,qa]]}),p3e=_3("centroid",function NLe(e){Bb=Mx=kx=Ix=Rx=Px=Fx=Lx=0,l3=new Fo,u3=new Fo,c3=new Fo,Xd(e,Su);var t=+l3,n=+u3,i=+c3,r=bF(t,n,i);return r<FS&&(t=Px,n=Fx,i=Lx,Mx<xt&&(t=kx,n=Ix,i=Rx),(r=bF(t,n,i))<FS)?[NaN,NaN]:[Al(n,t)*Dr,ya(i/r)*Dr]});function y3(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function v3(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function b3(e){const t=yh(e);return.2126*v3(t.r)+.7152*v3(t.g)+.0722*v3(t.b)}function Wee(e,t){return e===t||e!=e&&t!=t||(Ce(e)?!(!Ce(t)||e.length!==t.length)&&function w3e(e,t){for(let n=0,i=e.length;n<i;++n)if(!Wee(e[n],t[n]))return!1;return!0}(e,t):!(!it(e)||!it(t))&&qee(e,t))}function qee(e,t){for(const n in e)if(!Wee(e[n],t[n]))return!1;return!0}function Yee(e){return t=>qee(e,t)}const Kee={};function w3(e){return Ce(e)||ArrayBuffer.isView(e)?e:null}function E3(e){return w3(e)||(Qe(e)?e:null)}const Xee=e=>e.data;function Jee(e,t){const n=Hee.call(t,e);return n.root&&n.root.lookup||{}}const Qee=()=>"undefined"!=typeof window&&window||null,Hb={random:()=>Cl(),cumulativeNormal:DD,cumulativeLogNormal:NI,cumulativeUniform:RI,densityNormal:SI,densityLogNormal:OI,densityUniform:II,quantileNormal:SD,quantileLogNormal:MI,quantileUniform:PI,sampleNormal:CD,sampleLogNormal:AI,sampleUniform:kI,isArray:Ce,isBoolean:th,isDate:nh,isDefined:e=>void 0!==e,isNumber:mi,isObject:it,isRegExp:sG,isString:Qe,isTuple:mD,isValid:e=>null!=e&&e==e,toBoolean:_k,toDate:yk,toNumber:ts,toString:vk,indexof:function T3e(e,...t){return E3(e).indexOf(...t)},join:function x3e(e,...t){return w3(e).join(...t)},lastindexof:function A3e(e,...t){return E3(e).lastIndexOf(...t)},replace:function N3e(e,t,n){return sn(n)&&be("Function argument passed to replace."),String(e).replace(t,n)},reverse:function M3e(e){return w3(e).slice().reverse()},slice:function O3e(e,...t){return E3(e).slice(...t)},flush:rG,lerp:aG,merge:function b3e(){const e=[].slice.call(arguments);return e.unshift({}),an(...e)},pad:cG,peek:On,pluck:function S3e(e,t){const n=Kee[t]||(Kee[t]=fa(t));return Ce(e)?e.map(n):n(e)},span:o1,inrange:L0,truncate:dG,rgb:yh,lab:qD,hcl:YD,hsl:BD,luminance:b3,contrast:function v3e(e,t){const n=b3(e),i=b3(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},sequence:Ga,format:e3e,utcFormat:t3e,utcParse:i3e,utcOffset:JG,utcSequence:eW,timeFormat:Uee,timeParse:n3e,timeOffset:XG,timeSequence:ZG,timeUnitSpecifier:BG,monthFormat:function r3e(e){return $x.call(this,e,1,"%B")},monthAbbrevFormat:function o3e(e){return $x.call(this,e,1,"%b")},dayFormat:function s3e(e){return $x.call(this,0,2+e,"%A")},dayAbbrevFormat:function a3e(e){return $x.call(this,0,2+e,"%a")},quarter:eG,utcquarter:tG,week:VG,utcweek:zG,dayofyear:$G,utcdayofyear:UG,warn:function m3e(){return y3(this.context.dataflow,"warn",arguments)},info:function _3e(){return y3(this.context.dataflow,"info",arguments)},debug:function y3e(){return y3(this.context.dataflow,"debug",arguments)},extent:mc,inScope:function g3e(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function q3e(e,t,n){if(!e)return[];const[i,r]=e,o=(new eo).set(i[0],i[1],r[0],r[1]);return fJ(n||this.context.dataflow.scenegraph().root,o,function Y3e(e){let t=null;if(e){const n=Ze(e.marktype),i=Ze(e.markname);t=r=>(!n.length||n.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return t}(t))},clampRange:nG,pinchDistance:function C3e(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+i*i)},pinchAngle:function D3e(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function z3e(){const e=Qee();return e?e.screen:{}},containerSize:function W3e(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function G3e(){const e=Qee();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function k3e(e,t,n){return QR(e||0,t||0,n||0)},setdata:function QLe(e,t){const n=this.context.dataflow;return n.pulse(this.context.data[e].input,n.changeset().remove(bl).insert(t)),1},pathShape:function V3e(e){let t=null;return function(n){return n?H1(n,t=t||c_(e)):e}},panLinear:Xz,panLog:Jz,panPow:Qz,panSymlog:Zz,zoomLinear:dk,zoomLog:fk,zoomPow:QC,zoomSymlog:hk,encode:function ZLe(e,t,n){if(e){const i=this.context.dataflow;i.pulse(e.mark.source,i.changeset().encode(e,t))}return void 0!==n?n:e},modify:function E3e(e,t,n,i,r,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let d,f,c=a.changes;if(!1===s._trigger||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(d=!0===n?bl:Ce(n)||mD(n)?n:Yee(n),c.remove(d)),t&&c.insert(t),i&&(d=Yee(i),l.value.some(d)?c.remove(d):c.insert(i)),r)for(f in o)c.modify(r,f,o[f]);return 1}},K3e=["view","item","group","xy","x","y"],C3={},ete={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Be("$"+e)}]`,functions:function J3e(e){const t=bee(e);K3e.forEach(n=>t[n]="event.vega."+n);for(const n in Hb)t[n]="this."+n;return an(t,function d3e(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=Ea,n._range=Ea,n._scale=Ea;const i=r=>"_["+(r.type===Cg?Be("%"+r.value):Be("%")+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}(e,Hb,C3)),t},constants:vee,visitors:C3},D3=wee(ete);function jr(e,t,n){return 1===arguments.length?Hb[e]:(Hb[e]=t,n&&(C3[e]=n),D3&&(D3.functions[e]="this."+e),this)}function Pc(e,t){const n={};let i;try{i=n3(e=Qe(e)?e:Be(e)+"")}catch(o){be("Expression parse error: "+e)}i.visit(o=>{if(o.type!==oee)return;const s=o.callee.name,a=ete.visitors[s];a&&a(s,o.arguments,t,n)});const r=D3(i);return r.globals.forEach(o=>{const s="$"+o;!gt(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:an({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}jr("bandwidth",function I3e(e,t){const n=rf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},Ea),jr("copy",function R3e(e,t){const n=rf(e,(t||this).context);return n?n.copy():void 0},Ea),jr("domain",function P3e(e,t){const n=rf(e,(t||this).context);return n?n.domain():[]},Ea),jr("range",function L3e(e,t){const n=rf(e,(t||this).context);return n&&n.range?n.range():[]},Ea),jr("invert",function F3e(e,t,n){const i=rf(e,(n||this).context);return i?Ce(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0},Ea),jr("scale",function j3e(e,t,n){const i=rf(e,(n||this).context);return i?i(t):void 0},Ea),jr("gradient",function B3e(e,t,n,i,r){e=rf(e,(r||this).context);const o=QK(t,n);let s=e.domain(),a=s[0],l=On(s),u=es;return l-a?u=LK(e,a,l):e=(e.interpolator?Gn("sequential")().interpolator(e.interpolator()):Gn("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+i||15),a!==s[0]&&s.unshift(a),l!==On(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o},Ea),jr("geoArea",f3e,Ea),jr("geoBounds",h3e,Ea),jr("geoCentroid",p3e,Ea),jr("geoShape",function $3e(e,t,n){const i=rf(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}},Ea),jr("indata",function JLe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count},function c3e(e,t,n,i){t[0].type!==Cg&&be("First argument to indata must be a string literal."),t[1].type!==Cg&&be("Second argument to indata must be a string literal.");const r=t[0].value,o=t[1].value,s="@"+o;gt(s,i)||(i[s]=n.getData(r).indataRef(n,o))}),jr("data",Hee,m3),jr("treePath",function H3e(e,t,n){const i=Jee(e,this),r=i[t],o=i[n];return r&&o?r.path(o).map(Xee):void 0},m3),jr("treeAncestors",function U3e(e,t){const n=Jee(e,this)[t];return n?n.ancestors().map(Xee):void 0},m3),jr("vlSelectionTest",function ULe(e,t,n){for(var u,c,d,f,h,i=this.context.data[e],r=i?i.values.value:[],o=i?i[jx]&&i[jx].value:void 0,s=n===f3,a=r.length,l=0;l<a;++l)if(u=r[l],o&&s){if(-1===(d=(c=c||{})[f=u.unit]||0))continue;if(h=Bee(t,u),c[f]=h?-1:++d,h&&1===o.size)return!0;if(!h&&d===o.get(f).count)return!1}else if(s^(h=Bee(t,u)))return h;return a&&s},p3),jr("vlSelectionIdTest",function WLe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[jx]&&i[jx].value:void 0,s=n===f3,a=h3(t),l=zLe(r,a);if(l===r.length||h3(r[l])!==a)return!1;if(o&&s){if(1===o.size)return!0;if(GLe(r,a)-l<o.size)return!1}return!0},p3),jr("vlSelectionResolve",function YLe(e,t,n,i){for(var u,c,d,f,h,p,m,_,A,I,r=this.context.data[e],o=r?r.values.value:[],s={},a={},l={},v=o.length,D=0;D<v;++D){for(f=(u=o[D]).unit,d=u.values,A=0,I=(c=u.fields).length;A<I;++A)m=(p=s[(h=c[A]).field]||(s[h.field]={}))[f]||(p[f]=[]),l[h.field]=_=h.type.charAt(0),p[f]=(0,Vee[_+"_union"])(m,Ze(d[A]));n&&(m=a[f]||(a[f]=[])).push(Ze(d).reduce((L,k,B)=>(L[c[B].field]=k,L),{}))}return t=t||"union",Object.keys(s).forEach(L=>{s[L]=Object.keys(s[L]).map(k=>s[L][k]).reduce((k,B)=>void 0===k?B:Vee[l[L]+"_"+t](k,B))}),o=Object.keys(a),n&&o.length&&(s[i?"vlPoint":"vlMulti"]="union"===t?{or:o.reduce((k,B)=>(k.push(...a[B]),k),[])}:{and:o.map(k=>({or:a[k]}))}),s},p3),jr("vlSelectionTuples",function qLe(e,t){return e.map(n=>an({values:t.fields.map(i=>(i.getter||(i.getter=fa(i.field)))(n.datum))},t))});const Z3e=hu(["rule"]),tte=hu(["group","image","rect"]);function S3(e){return(e+"").toLowerCase()}function Ub(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}var r5e={operator:(e,t)=>Ub(e,["_"],t.code),parameter:(e,t)=>Ub(e,["datum","_"],t.code),event:(e,t)=>Ub(e,["event"],t.code),handler:(e,t)=>Ub(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";")),encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const s="o["+Be(o)+"]";r+="$=".concat(i[o].code,";if(").concat(s,"!==$)").concat(s,"=$,m=1;")}return r+=function e5e(e,t){let n="";return Z3e[t]||(e.x2&&(e.x?(tte[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(tte[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(i,n),r+="return m;",Ub(e,["item","_"],r)},codegen:{get(e){const t="[".concat(e.map(Be).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator(e,t){let n;const r=Function("a","b","var u, v; return "+e.map((o,s)=>{const a=t[s];let l,u;return o.path?(l="a".concat(o.path),u="b".concat(o.path)):((n=n||{})["f"+s]=o,l="this.f".concat(s,"(a)"),u="this.f".concat(s,"(b)")),function i5e(e,t,n,i){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(i,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(i," : ")}(l,u,-a,a)}).join("")+"0;");return n?r.bind(n):r}}};function nte(e,t,n){if(!e||!it(e))return e;for(let o,i=0,r=ite.length;i<r;++i)if(o=ite[i],gt(e,o.key))return o.parse(e,t,n);return e}var ite=[{key:"$ref",parse:function l5e(e,t){return t.get(e.$ref)||be("Operator not defined: "+e.$ref)}},{key:"$key",parse:function c5e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=mk(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function u5e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code+"_"+e.$name;return t.fn[i]||(t.fn[i]=da(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function d5e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=fa(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function h5e(e,t){const n=e.$encode,i={};for(const r in n){const o=n[r];i[r]=da(t.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}},{key:"$compare",parse:function f5e(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Ze(e.$compare).map(r=>r&&r.$tupleid?bt:r);return t.fn[n]||(t.fn[n]=pk(i,e.$order,t.expr.codegen))}},{key:"$context",parse:function p5e(e,t){return t}},{key:"$subflow",parse:function g5e(e,t){const n=e.$subflow;return function(i,r,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}},{key:"$tupleid",parse:function m5e(){return bt}}];const v5e={skip:!0};function rte(e,t,n,i){return new ote(e,t,n,i)}function ote(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||r5e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function ste(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function ate(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}ote.prototype=ste.prototype={fork(){const e=new ste(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),function n5e(e){return"collect"===S3(e)}(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[S3(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function Q3e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()},parseOperator:function o5e(e){const t=this;!function t5e(e){return"operator"===S3(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function s5e(e){const t=this;if(e.params){const n=t.get(e.id);n||be("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function a5e(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=Ce(r)?r.map(o=>nte(o,n,t)):nte(r,n,t)}return t},parseStream:function _5e(e){var r,t=this,n=null!=e.filter?t.eventExpression(e.filter):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,n):e.merge&&(i=(r=e.merge.map(o=>t.get(o)))[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>t.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&be("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)},parseUpdate:function y5e(e){var r,t=this,n=it(n=e.source)?n.$ref:n,i=t.get(n),o=e.update,s=void 0;i||be("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,r,o,s)},getState:function b5e(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(i[o]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(r[o]=s.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n},setState:function w5e(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{n.update(t.signals[o],r[o],v5e)}),Object.keys(i||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(bl).insert(i[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}};const x3="default";function T3(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function Vx(e,t){var n=e._runtime.data;return gt(n,t)||be("Unrecognized data set: "+t),n[t]}function Hx(e,t){HW(t)||be("Second argument to changes must be a changeset.");const n=Vx(this,e);return n.modified=!0,this.pulse(n.input,t)}function lte(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function ute(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Ux(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}const R5e={trap:!1};function dte(e,t,n,i){e._eventListeners.push({type:n,sources:Ze(t),handler:i})}function zx(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return!(!1===i||it(i)&&!i[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function fte(e){return e.item}function hte(e){return e.item.mark.source}function pte(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Ka(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return null!=n&&(i.textContent=n),i}function U5e(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=gk(i.debounce,r.update))),(null==i.input&&i.element?z5e:W5e)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function z5e(e,t,n,i){const r=n.event||"input",o=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,o),dte(i,t,r,o),e.set=s=>{t.value=s,t.dispatchEvent(function G5e(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(r))}}function W5e(e,t,n,i){const r=i.signal(n.signal),o=Ka("div",{class:"vega-bind"}),s="radio"===n.input?o:o.appendChild(Ka("label"));s.appendChild(Ka("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let a=q5e;switch(n.input){case"checkbox":a=Y5e;break;case"select":a=K5e;break;case"radio":a=X5e;break;case"range":a=J5e}a(e,s,n,r)}function q5e(e,t,n,i){const r=Ka("input");for(const o in n)"signal"!==o&&"element"!==o&&r.setAttribute("input"===o?"type":o,n[o]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function Y5e(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const o=Ka("input",r);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function K5e(e,t,n,i){const r=Ka("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};Gx(s,i)&&(l.selected=!0),r.appendChild(Ka("option",l,(o[a]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(Gx(n.options[a],s))return void(r.selectedIndex=a)}}function X5e(e,t,n,i){const r=Ka("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};Gx(s,i)&&(l.checked=!0);const u=Ka("input",l);u.addEventListener("change",()=>e.update(s));const c=Ka("label",{},(o[a]||s)+"");return c.prepend(u),r.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)Gx(a[u].value,s)&&(a[u].checked=!0)}}function J5e(e,t,n,i){i=void 0!==i?i:(+n.max+ +n.min)/2;const r=null!=n.max?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,r,+i)||0,s=n.step||rh(o,r,100),a=Ka("input",{type:"range",name:n.signal,min:o,max:r,step:s});a.value=i;const l=Ka("span",{},+i);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function Gx(e,t){return e===t||e+""==t+""}function gte(e,t,n,i,r,o){return(t=t||new i(e.loader())).initialize(n,lte(e),ute(e),Ux(e),r,o).background(e.background())}function A3(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function O3(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(i){t=null,e.error(i)}return t}const zb=e=>+e||0;function mte(e){return it(e)?{top:zb(e.top),bottom:zb(e.bottom),left:zb(e.left),right:zb(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(zb(e))}function N3(e,t,n,i){return M3.apply(this,arguments)}function M3(){return M3=js(function*(e,t,n,i){const r=OS(t),o=r&&r.headless;return o||be("Unrecognized renderer type: "+t),yield e.runAsync(),gte(e,null,null,o,n,i).renderAsync(e._scenegraph.root)}),M3.apply(this,arguments)}function k3(){return k3=js(function*(e,t){e!==Nh.Canvas&&e!==Nh.SVG&&e!==Nh.PNG&&be("Unrecognized image type: "+e);const n=yield N3(this,e,t);return e===Nh.SVG?nje(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}),k3.apply(this,arguments)}function nje(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function I3(){return I3=js(function*(e,t){return(yield N3(this,Nh.Canvas,e,t)).canvas()}),I3.apply(this,arguments)}function R3(){return R3=js(function*(e){return(yield N3(this,Nh.SVG,e)).svg()}),R3.apply(this,arguments)}var P3="padding",vte={skip:!0};function bte(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===P3?i.left+i.right:0)}function wte(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===P3?i.top+i.bottom:0)}function cje(e,t){return t.modified&&Ce(t.input.value)&&e.indexOf("_:vega:_")}function dje(e,t){return!("parent"===e||t instanceof J0.proxy)}function pje(e,t,n,i){const r=e.element();r&&r.setAttribute("title",function gje(e){return null==e?"":Ce(e)?Ete(e):it(e)&&!nh(e)?function mje(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ce(n)?Ete(n):Cte(n))}).join("\n")}(e):e+""}(i))}function Ete(e){return"["+e.map(Cte).join(", ")+"]"}function Cte(e){return Ce(e)?"[\u2026]":it(e)&&!nh(e)?"{\u2026}":e}function Dte(e,t){const n=this;if(t=t||{},X0.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const o=an({},e.locale,t.locale);n.locale(NW(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Nh.Canvas,n._scenegraph=new HP;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||pje,n._redraw=!0,n._handler=(new nb).scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function P5e(e){const t=an({defaults:{}},e),n=(i,r)=>{r.forEach(o=>{Ce(i[o])&&(i[o]=hu(i[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=function oje(e,t,n){return rte(e,J0,Hb,n).parse(t)}(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:an({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=bte(n,n._width),n._viewHeight=wte(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function aje(e){var t=e._signals,n=t.width,i=t.height,r=t[P3];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=bte(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=wte(e,a.size),o()},{size:i});const s=e.add(null,o,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}(n),function D5e(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}(n),function S5e(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:x3,item:null}));e.on(e.events("view","mousemove"),t,(n,i)=>{const r=t.value,o=r?Qe(r)?r:r.user:x3,s=i.item&&i.item.cursor||null;return r&&o===r.user&&s==r.item?r:{user:o,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Qe(i)||(r=i.item,i=i.user),T3(e,i&&i!==x3?i:r||i),r},{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function Wx(e,t){return gt(e._signals,t)?e._signals[t]:be("Unrecognized signal name: "+Be(t))}function Ste(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function xte(e,t,n,i){let r=Ste(n,i);return r||(r=A3(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function Tte(e,t,n){const i=Ste(t,n);return i&&t._targets.remove(i),e}Fe(Dte,X0,{evaluate(e,t,n){var i=this;return js(function*(){if(yield X0.prototype.evaluate.call(i,e,t),i._redraw||i._resize)try{i._renderer&&(i._resize&&(i._resize=0,function O5e(e){var t=Ux(e),n=lte(e),i=ute(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(o){e.error(o)}})}(i)),yield i._renderer.renderAsync(i._scenegraph.root)),i._redraw=!1}catch(r){i.error(r)}return n&&gD(i,n),i})()},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&ate(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=Wx(this,e);return 1===arguments.length?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",mte(e)):mte(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(OS(e)||be("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(X0.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Wx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function lje(e,t,n,i,r,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal("width",n,vte),s._resizeWidth.skip(!0)),s.height()!==i&&(a=1,s.signal("height",i,vte),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)},addEventListener(e,t,n){let i=t;return n&&!1===n.trap||(i=A3(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var r,o,n=this._handler.handlers(e),i=n.length;--i>=0;)if(r=n[i].handler,e===(o=n[i].type)&&(t===r||t===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return xte(this,e,Wx(this,e),t)},removeSignalListener(e,t){return Tte(this,Wx(this,e),t)},addDataListener(e,t){return xte(this,e,Vx(this,e).values,t)},removeDataListener(e,t){return Tte(this,Vx(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=T3(this,null);this._globalCursor=!!e,t&&T3(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function hje(e,t){this._timers.push(function E5e(e,t,n){var i=new fx,r=t;return null==t?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(o,s,a){s=+s,a=null==a?aL():+a,i._restart(function l(u){u+=r,i._restart(l,r+=s,a),o(u)},s,a)},i.restart(e,t,n),i)}(function n(i){e({timestamp:Date.now(),elapsed:i})},t))},events:function L5e(e,t,n){var s,i=this,r=new bD(n),o=function(u,c){i.runAsync(null,()=>{"view"===e&&function F5e(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return!1!==i&&!0!==r&&(!0===i||!1===r||(i?i[t]:r?!r[t]:e.preventDefault()))}(i,t)&&u.preventDefault(),r.receive(function N5e(e,t,n){var o,a,i=e._renderer,r=i&&i.canvas();return r&&(a=Ux(e),(o=bS(t.changedTouches?t.changedTouches[0]:t,r))[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function M5e(e,t,n){const i=t?"group"===t.mark.marktype?t:t.mark.group:null;function r(s){var l,a=i;if(s)for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;Qe(s)&&(s=r(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:ns(e),item:ns(t||{}),group:r,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}(e,n,o),t}(i,u,c))})};if("timer"===e)zx(i,"timer",t)&&i.timer(o,t);else if("view"===e)zx(i,"view",t)&&i.addEventListener(t,o,R5e);else if("window"===e?zx(i,"window",t)&&"undefined"!=typeof window&&(s=[window]):"undefined"!=typeof document&&zx(i,"selector",t)&&(s=document.querySelectorAll(e)),s){for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);dte(i,s,t,o)}else i.warn("Can not resolve event source: "+e);return r},finalize:function B5e(){var i,r,o,e=this._tooltip,t=this._timers,n=this._eventListeners;for(i=t.length;--i>=0;)t[i].stop();for(i=n.length;--i>=0;)for(r=(o=n[i]).sources.length;--r>=0;)o.sources[r].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this},hover:function j5e(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",fte),hte,pte(e)),this.on(this.events("view","mouseout",fte),hte,pte(t)),this},data:function x5e(e,t){return arguments.length<2?Vx(this,e).values.value:Hx.call(this,e,ng().remove(bl).insert(t))},change:Hx,insert:function T5e(e,t){return Hx.call(this,e,ng().insert(t))},remove:function A5e(e,t){return Hx.call(this,e,ng().remove(t))},scale:function sje(e){var t=this._runtime.scales;return gt(t,e)||be("Unrecognized scale or projection: "+e),t[e].value},initialize:function Z5e(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,o=OS(i);e=n._el=e?O3(n,e,!0):null,function C5e(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),ate(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+i);const s=o.handler||nb,a=e?o.renderer:o.headless;return n._renderer=a?gte(n,n._renderer,e,a):null,n._handler=function Q5e(e,t,n,i){const r=new i(e.loader(),A3(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Ux(e),e);return t&&t.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}(n,n._handler,e,s),n._redraw=!0,e&&"none"!==r&&(t=t?n._elBind=O3(n,t,!0):e.appendChild(Ka("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&"container"!==r&&(l.element=O3(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{U5e(n,l.element||t,l)})),n},toImageURL:function tje(e,t){return k3.apply(this,arguments)},toCanvas:function ije(e,t){return I3.apply(this,arguments)},toSVG:function rje(e){return R3.apply(this,arguments)},getState:function uje(e){return this._runtime.getState(e||{data:cje,signals:dje,recurse:!0})},setState:function fje(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}});const wje=/[[\]{}]/,Eje={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Mte,kte;function $h(e,t,n){return Mte=t||"view",kte=n||Eje,Ite(e.trim()).map(F3)}function Gb(e,t,n,i,r){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;r&&r.indexOf(a)>=0?--s:i&&i.indexOf(a)>=0&&++s}return t}function Ite(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Gb(e,r,",","[{","]}"),t.push(e.substring(i,r).trim()),i=++r;if(0===t.length)throw"Empty event selector: "+e;return t}function F3(e){return"["===e[0]?function Dje(e){const t=e.length;let i,n=1;if(n=Gb(e,n,"]","[","]"),n===t)throw"Empty between selector: "+e;if(i=Ite(e.substring(1,n)),2!==i.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(n+1).trim())[0])throw"Expected '>' after between selector: "+e;i=i.map(F3);const r=F3(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}(e):function Sje(e){const t={source:Mte},n=[];let l,u,i=[0,0],r=0,o=0,s=e.length,a=0;if("}"===e[s-1]){if(a=e.lastIndexOf("{"),!(a>=0))throw"Unmatched right brace: "+e;try{i=function xje(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!=i)throw e;return i})}(e.substring(a+1,s-1))}catch(c){throw"Invalid throttle specification: "+e}s=(e=e.slice(0,a).trim()).length,a=0}if(!s)throw e;if("@"===e[0]&&(r=++a),l=Gb(e,a,":"),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=Gb(e,a,"["),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Gb(e,a,"]"),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&"["!==e[++a])throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||wje.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):function Cje(e){return kte[e]}(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=u&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}(e)}function Tje(e){return it(e)?e:{type:e||"pad"}}const Wb=e=>+e||0;function Oje(e){return it(e)?e.signal?e:{top:Wb(e.top),bottom:Wb(e.bottom),left:Wb(e.left),right:Wb(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(Wb(e))}const yo=e=>it(e)&&!Ce(e)?an({},e):{value:e};function Rte(e,t,n,i){return null!=n?(it(n)&&!Ce(n)||Ce(n)&&n.length&&it(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Bo(e,t,n){for(const i in t)Rte(e,i,t[i]);for(const i in n)Rte(e,i,n[i],"update")}function k_(e,t,n){for(const i in t)n&&gt(n,i)||(e[i]=an(e[i]||{},t[i]));return e}function I_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const L3="mark",j3="frame",B3="scope",Pte="legend-label";function $3(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Fte=e=>Qe(e)?Be(e):e.signal?`(${e.signal})`:Lte(e);function Kx(e){if(null!=e.gradient)return function qje(e){const t=[e.start,e.stop,e.count].map(n=>null==n?null:Be(n));for(;t.length&&null==On(t);)t.pop();return t.unshift(Fte(e.gradient)),`gradient(${t.join(",")})`}(e);let t=e.signal?`(${e.signal})`:e.color?function Wje(e){return e.c?Xx("hcl",e.h,e.c,e.l):e.h||e.s?Xx("hsl",e.h,e.s,e.l):e.l||e.a?Xx("lab",e.l,e.a,e.b):e.r||e.g||e.b?Xx("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?Lte(e.field):void 0!==e.value?Be(e.value):void 0;return null!=e.scale&&(t=function Yje(e,t){const n=Fte(e.scale);return null!=e.range?t=`lerp(_range(${n}), ${+e.range})`:(void 0!==t&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(1==+e.band?"":"*"+Jx(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),null==t&&(t="0")),t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t=`pow(${t},${Jx(e.exponent)})`),null!=e.mult&&(t+=`*${Jx(e.mult)}`),null!=e.offset&&(t+=`+${Jx(e.offset)}`),e.round&&(t=`round(${t})`),t}const Xx=(e,t,n,i)=>`(${e}(${[t,n,i].map(Kx).join(",")})+'')`;function Jx(e){return it(e)?"("+Kx(e)+")":e}function Lte(e){return jte(it(e)?e:{datum:e})}function jte(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):be("Invalid field reference: "+Be(e));return e.signal||(i=Qe(i)?gc(i).map(Be).join("]["):jte(i)),t+"["+i+"]"}function Bte(e,t,n,i,r,o){const s={};(o=o||{}).encoders={$encode:s},e=function Gje(e,t,n,i,r){const o={},s={};let a,l,u,c;for(l in l="lineBreak","text"===t&&null!=r[l]&&!I_(l,e)&&$3(o,l,r[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===j3?r.group:n===L3?an({},r.mark,r[t]):null,c)u=I_(l,e)||("fill"===l||"stroke"===l)&&(I_("fill",e)||I_("stroke",e)),u||$3(o,l,c[l]);for(l in Ze(i).forEach(d=>{const f=r.style&&r.style[d];for(const h in f)I_(h,e)||$3(o,h,f[h])}),e=an({},e),o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=an(s,e.enter),a&&(e.update=an(a,e.update)),e}(e,t,n,i,r.config);for(const a in e)s[a]=Xje(e[a],t,o,r);return o}function Xje(e,t,n,i){const r={},o={};for(const s in e)null!=e[s]&&(r[s]=Qje(Jje(e[s]),i,n,o));return{$expr:{marktype:t,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function Jje(e){return Ce(e)?function Kje(e){let t="";return e.forEach(n=>{const i=Kx(n);t+=n.test?`(${n.test})?${i}:`:i}),":"===On(t)&&(t+="null"),t}(e):Kx(e)}function Qje(e,t,n,i){const r=Pc(e,t);return r.$fields.forEach(o=>i[o]=1),an(n,r.$params),r.$expr}const e8e=["value","update","init","react","bind"];function $te(e,t){be(e+' for "outer" push: '+Be(t))}function Vte(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||$te("No prior signal definition",n),e8e.forEach(i=>{void 0!==e[i]&&$te("Invalid property ",i)});else{const i=t.addSignal(n,e.value);!1===e.react&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function V3(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Qx(e,t,n,i){return new V3(e,t,n,i)}function Zx(e,t){return Qx("operator",e,t)}function wt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function qb(e,t){return t?{$field:e,$name:t}:{$field:e}}const H3=qb("key");function Hte(e,t){return{$compare:e,$order:t}}function eT(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const U3="scope",z3="view";function no(e){return e&&e.signal}function tT(e){if(no(e))return!0;if(it(e))for(const t in e)if(tT(e[t]))return!0;return!1}function xu(e,t){return null!=e?e:t}function Ag(e){return e&&e.signal||e}function Yb(e,t){return(e.merge?a8e:e.stream?l8e:e.type?u8e:be("Invalid stream specification: "+Be(e)))(e,t)}function a8e(e,t){const i=G3({merge:e.merge.map(r=>Yb(r,t))},e,t);return t.addStream(i).id}function l8e(e,t){const i=G3({stream:Yb(e.stream,t)},e,t);return t.addStream(i).id}function u8e(e,t){let n;"timer"===e.type?(n=t.event("timer",e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function s8e(e){return e===U3?z3:e||z3}(e.source),e.type);const i=G3({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function G3(e,t,n){let i=t.between;return i&&(2!==i.length&&be('Stream "between" parameter must have 2 entries: '+Be(t)),e.between=[Yb(i[0],n),Yb(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(function c8e(e,t,n){const i="event.item";return i+(e&&"*"!==e?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===U3&&i.push("inScope(event.item)"),i.length&&(e.filter=Pc("("+i.join(")&&(")+")",n).$expr),null!=(i=t.throttle)&&(e.throttle=+i),null!=(i=t.debounce)&&(e.debounce=+i),t.consume&&(e.consume=!0),e}const d8e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function p8e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}const _i=e=>(t,n,i)=>Qx(e,n,t||void 0,i),zte=_i("aggregate"),m8e=_i("axisticks"),Gte=_i("bound"),Tu=_i("collect"),Wte=_i("compare"),_8e=_i("datajoin"),qte=_i("encode"),y8e=_i("expression"),v8e=_i("facet"),b8e=_i("field"),w8e=_i("key"),E8e=_i("legendentries"),C8e=_i("load"),D8e=_i("mark"),S8e=_i("multiextent"),x8e=_i("multivalues"),T8e=_i("overlap"),A8e=_i("params"),Yte=_i("prefacet"),O8e=_i("projection"),N8e=_i("proxy"),M8e=_i("relay"),Kte=_i("render"),k8e=_i("scale"),Og=_i("sieve"),I8e=_i("sortitems"),Xte=_i("viewlayout"),R8e=_i("values");let P8e=0;const Jte={min:"min",max:"max",count:"sum"};function L8e(e,t){const n=t.getScale(e.name).params;let i;for(i in n.domain=Qte(e.domain,e,t),null!=e.range&&(n.range=ene(e,t,n)),null!=e.interpolate&&function q8e(e,t){t.interpolate=Nl(e.type||e),null!=e.gamma&&(t.interpolateGamma=Nl(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=function W8e(e){return it(e)?{interval:Nl(e.interval),step:Nl(e.step)}:Nl(e)}(e.nice)),null!=e.bins&&(n.bins=function G8e(e,t){return e.signal||Ce(e)?nT(e,t):t.objectProperty(e)}(e.bins,t)),e)gt(n,i)||"name"===i||(n[i]=Nl(e[i],t))}function Nl(e,t){return it(e)?e.signal?t.signalRef(e.signal):be("Unsupported object: "+Be(e)):e}function nT(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Nl(n,t))}function iT(e){be("Can not find data set: "+Be(e))}function Qte(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(Ce(e)?j8e:e.fields?$8e:B8e)(e,t,n);(null!=t.domainMin||null!=t.domainMax)&&be("No scale domain defined for domainMin/domainMax to override.")}function j8e(e,t,n){return e.map(i=>Nl(i,n))}function B8e(e,t,n){const i=n.getData(e.data);return i||iT(e.data),u_(t.type)?i.valuesRef(n,e.field,Zte(e.sort,!1)):RK(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function $8e(e,t,n){const i=e.data,r=e.fields.reduce((o,s)=>(s=Qe(s)?{data:i,field:s}:Ce(s)||s.signal?function V8e(e,t){const n="_:vega:_"+P8e++,i=Tu({});if(Ce(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+Be(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Og({})]),{data:n,field:"data"}}(s,n):s,o.push(s),o),[]);return(u_(t.type)?H8e:RK(t.type)?U8e:z8e)(e,n,r)}function H8e(e,t,n){const i=Zte(e.sort,!0);let r,o;const s=n.map(u=>{const c=t.getData(u.data);return c||iT(u.data),c.countsRef(t,u.field,i)}),a={groupby:H3,pulse:s};i&&(r=i.op||"count",o=i.field?eT(r,i.field):"count",a.ops=[Jte[r]],a.fields=[t.fieldRef(o)],a.as=[o]),r=t.add(zte(a));const l=t.add(Tu({pulse:wt(r)}));return o=t.add(R8e({field:H3,sort:t.sortRef(i),pulse:wt(l)})),wt(o)}function Zte(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!Jte[e.op]&&be("Multiple domain scales can not be sorted using "+e.op):be("No field provided for sort aggregate op: "+e.op):it(e)?e.field="key":e={field:"key"}),e}function U8e(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||iT(r.data),o.domainRef(t,r.field)});return wt(t.add(x8e({values:i})))}function z8e(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||iT(r.data),o.extentRef(t,r.field)});return wt(t.add(S8e({extents:i})))}function ene(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Qe(r)){if(i&&gt(i,r))return ene(e=an({},e,{range:i[r]}),t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=u_(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:be("Unrecognized scale range value: "+Be(r))}else{if(r.scheme)return n.scheme=Ce(r.scheme)?nT(r.scheme,t):Nl(r.scheme,t),r.extent&&(n.schemeExtent=nT(r.extent,t)),void(r.count&&(n.schemeCount=Nl(r.count,t)));if(r.step)return void(n.rangeStep=Nl(r.step,t));if(u_(e.type)&&!Ce(r))return Qte(r,e,t);Ce(r)||be("Unsupported range type: "+Be(r))}return r.map(o=>(Ce(o)?nT:Nl)(o,t))}function W3(e,t,n){return Ce(e)?e.map(i=>W3(i,t,n)):it(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:be("Unsupported parameter object: "+Be(e)):e}const Au="top",Vh="bottom",Y3="label",Ml="value",Kb="guide-label",K3="guide-title",rT="gradient",X3="discrete",Q3=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],Xb={name:1,style:1,interactive:1},Ln={value:0},kl={value:1},oT="group",Z3="rule",Ng="text";function Jb(e){return e.type=oT,e.interactive=e.interactive||!1,e}function Ca(e,t){const n=(i,r)=>xu(e[i],xu(t[i],r));return n.isVertical=i=>"vertical"===xu(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>xu(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>xu(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>xu(e.columns,xu(t.columns,+n.isVertical(!0))),n}function rne(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function sT(e,t,n){return`item.anchor === 'start' ? ${e} : item.anchor === 'end' ? ${t} : ${n}`}const e5=sT(Be("left"),Be("right"),Be("center"));function one(e,t){return t?e?it(e)?Object.assign({},e,{offset:one(e.offset,t)}):{value:e,offset:t}:t:e}function Xa(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=k_(e.encode,t,Xb)):e.interactive=!1,e}function s4e(e,t,n,i){const r=Ca(e,n),o=r.isVertical(),s=r.gradientThickness(),a=r.gradientLength();let l,u,c,d,f;o?(u=[0,1],c=[0,0],d=s,f=a):(u=[0,0],c=[1,0],d=a,f=s);const h={enter:l={opacity:Ln,x:Ln,y:Ln,width:yo(d),height:yo(f)},update:an({},l,{opacity:kl,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Ln}};return Bo(h,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),Xa({type:"rect",role:"legend-gradient",encode:h},i)}function a4e(e,t,n,i,r){const o=Ca(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,d,f,h="";s?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:Ln,fill:{scale:t,field:Ml}};p[u]={signal:h+"datum.perc",mult:l},p[c]=Ln,p[d]={signal:h+"datum.perc2",mult:l},p[f]=yo(a);const m={enter:p,update:an({},p,{opacity:kl}),exit:{opacity:Ln}};return Bo(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Xa({type:"rect",role:"legend-band",key:Ml,from:r,encode:m},i)}const u4e=`datum.perc<=0?"${Vh}":datum.perc>=1?"top":"middle"`;function sne(e,t,n,i){const r=Ca(e,t),o=r.isVertical(),s=yo(r.gradientThickness()),a=r.gradientLength();let u,c,d,f,l=r("labelOverlap"),h="";const p={enter:u={opacity:Ln},update:c={opacity:kl,text:{field:Y3}},exit:{opacity:Ln}};return Bo(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:xu(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:u4e},d="y",f="x",h="1-"):(u.align=c.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum.perc",mult:a},u[f]=c[f]=s,s.offset=xu(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum.index"}:void 0,Xa({type:Ng,role:Pte,style:Kb,key:Ml,from:i,encode:p,overlap:l},n)}function c4e(e,t,n,i,r){const o=Ca(e,t),s=n.entries,a=!(!s||!s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},f=`(${r}) ? datum.offset : datum.size`,h=u?yo(u):{field:"size"},p="datum.index",m=`max(1, ${r})`;let _,b,v,D,A;h.mult=.5,_={enter:b={opacity:Ln,x:{signal:f,mult:.5,offset:c},y:h},update:v={opacity:kl,x:b.x,y:b.y},exit:{opacity:Ln}};let I=null,L=null;e.fill||(I=t.symbolBaseFillColor,L=t.symbolBaseStrokeColor),Bo(_,{fill:o("symbolFillColor",I),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",L),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Q3.forEach(W=>{e[W]&&(v[W]=b[W]={scale:e[W],field:Ml})});const k=Xa({type:"symbol",role:"legend-symbol",key:Ml,from:d,clip:!!u||void 0,encode:_},n.symbols),B=yo(c);B.offset=o("labelOffset"),_={enter:b={opacity:Ln,x:{signal:f,offset:B},y:h},update:v={opacity:kl,text:{field:Y3},x:b.x,y:b.y},exit:{opacity:Ln}},Bo(_,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const q=Xa({type:Ng,role:Pte,style:Kb,key:Ml,from:d,encode:_},n.labels);return _={enter:{noBound:{value:!u},width:Ln,height:u?yo(u):Ln,opacity:Ln},exit:{opacity:Ln},update:v={opacity:kl,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(D=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${D}`,v.column.signal=`floor(${p} / ${D})`,A={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,A={field:p}),v.column.signal=`(${r})?${v.column.signal}:${p}`,Jb({role:B3,from:i={facet:{data:i,name:"value",groupby:"index"}},encode:k_(_,s,Xb),marks:[k,q],name:l,interactive:a,sort:A})}const t5='item.orient === "left"',n5='item.orient === "right"',aT=`(${t5} || ${n5})`,f4e=`datum.vgrad && ${aT}`,h4e=sT('"top"','"bottom"','"middle"'),g4e=`datum.vgrad && ${n5} ? (${sT('"right"','"left"','"center"')}) : (${aT} && !(datum.vgrad && ${t5})) ? "left" : ${e5}`,m4e=`item._anchor || (${aT} ? "middle" : "start")`,_4e=`${f4e} ? (${t5} ? -90 : 90) : 0`,y4e=`${aT} ? (datum.vgrad ? (${n5} ? "bottom" : "top") : ${h4e}) : "top"`;function b4e(e,t){let n;return it(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ane(e.path)+")":e.sphere&&(n="geoShape("+ane(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ane(e){return it(e)&&e.signal?e.signal:Be(e)}function lne(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===oT?B3:t||L3:t}function w4e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||lne(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function E4e(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function i5(e,t){const n=JW(e.type);n||be("Unrecognized transform type: "+Be(e.type));const i=Qx(n.type.toLowerCase(),null,une(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function une(e,t,n){const i={},r=e.params.length;for(let o=0;o<r;++o){const s=e.params[o];i[s.name]=C4e(s,t,n)}return i}function C4e(e,t,n){const i=e.type,r=t[e.name];return"index"===i?function D4e(e,t,n){return Qe(t.from)||be('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==r?"param"===i?function S4e(e,t,n){const i=t[e.name];return e.array?(Ce(i)||be("Expected an array of sub-parameters. Instead: "+Be(i)),i.map(r=>dne(e,r,n))):dne(e,i,n)}(e,t,n):"projection"===i?n.projectionRef(t[e.name]):e.array&&!no(r)?r.map(o=>cne(e,o,n)):cne(e,r,n):void(e.required&&be("Missing required "+Be(t.type)+" parameter: "+Be(e.name)))}function cne(e,t,n){const i=e.type;if(no(t))return fne(i)?be("Expression references can not be signals."):r5(i)?n.fieldRef(t):hne(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||r5(i);return r&&x4e(t)?n.exprRef(t.expr,t.as):r&&T4e(t)?qb(t.field,t.as):fne(i)?Pc(t,n):A4e(i)?wt(n.getData(t).values):r5(i)?qb(t):hne(i)?n.compareRef(t):t}}function dne(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const a in r.key)if(r.key[a]!==t[a]){r=null;break}if(r)break}r||be("Unsupported parameter: "+Be(t));const o=an(une(r,t,n),r.key);return wt(n.add(A8e(o)))}const x4e=e=>e&&e.expr,T4e=e=>e&&e.field,A4e=e=>"data"===e,fne=e=>"expr"===e,r5=e=>"field"===e,hne=e=>"compare"===e;function lT(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:wt(t.getData(e.data).output)}function Mg(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}function pne(e){return Qe(e)?e:null}function gne(e,t,n){const i=eT(n.op,n.field);let r;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Qb(e,t,n,i,r,o,s){const a=t[n]||(t[n]={}),l=function r8e(e){return it(e)?("descending"===e.order?"-":"+")+eT(e.op,e.field):""}(o);let c,d,u=pne(r);if(null!=u&&(e=t.scope,u+=l?"|"+l:"",c=a[u]),!c){const f=o?{field:H3,pulse:t.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:wt(t.output)};l&&(f.sort=e.sortRef(o)),d=e.add(Qx(i,void 0,f)),s&&(t.index[r]=d),c=wt(d),null!=u&&(a[u]=c)}return c}function mne(e,t,n){const i=e.remove,r=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(Zx()),c=Pc("if("+e.trigger+',modify("'+n+'",'+[r,i,o,s,a].map(d=>null==d?"null":d).join(",")+"),0)",t);l.update=c.$expr,l.params=c.$params}function uT(e,t){const n=lne(e),i=e.type===oT,r=e.from&&e.from.facet,o=e.overlap;let a,l,u,c,d,f,h,s=e.layout||n===B3||n===j3;const p=n===L3||s||r,m=function O4e(e,t,n){let i,r,o,s,a;return e?(i=e.facet)&&(t||be("Only group marks can be faceted."),null!=i.field?s=a=lT(i,n):(e.data?a=wt(n.getData(e.data).aggregate):(o=i5(an({type:"aggregate",groupby:Ze(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=lT(i,n),s=a=wt(n.add(o))),r=n.keyRef(i.groupby,!0))):s=wt(n.add(Tu(null,[{}]))),s||(s=lT(e,n)),{key:r,pulse:s,parent:a}}(e.from,i,t);l=t.add(_8e({key:m.key||(e.key?qb(e.key):void 0),pulse:m.pulse,clean:!i}));const _=wt(l);l=u=t.add(Tu({pulse:_})),l=t.add(D8e({markdef:w4e(e),interactive:E4e(e.interactive,t),clip:b4e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:wt(l)}));const b=wt(l);l=c=t.add(qte(Bte(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(L=>{const k=i5(L,t),B=k.metadata;(B.generates||B.changes)&&be("Mark transforms should not generate new data."),B.nomod||(c.params.mod=!0),k.params.pulse=wt(l),t.add(l=k)}),e.sort&&(l=t.add(I8e({sort:t.compareRef(e.sort),pulse:wt(l)})));const v=wt(l);(r||s)&&(s=t.add(Xte({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:v})),f=wt(s));const D=t.add(Gte({mark:b,pulse:f||v}));h=wt(D),i&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,f||h,_),r?function N4e(e,t,n){const i=e.from.facet,r=i.name,o=lT(i,t);let s;i.name||be("Facet must have a name: "+Be(i)),i.data||be("Facet must reference a data set: "+Be(i)),i.field?s=t.add(Yte({field:t.fieldRef(i.field),pulse:o})):i.groupby?s=t.add(v8e({key:t.keyRef(i.groupby),group:wt(t.proxy(n.parent)),pulse:o})):be("Facet must specify groupby or field: "+Be(i));const a=t.fork(),l=a.add(Tu()),u=a.add(Og({pulse:wt(l)}));a.addData(r,new Mg(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,t,m):p?function M4e(e,t,n){const i=t.add(Yte({pulse:n.pulse})),r=t.fork();r.add(Og()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(D))),o&&(h=function k4e(e,t,n){const i=e.method,r=e.bound,o=e.separation,s={separation:no(o)?n.signalRef(o.signal):o,method:no(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const a=r.tolerance;s.boundTolerance=no(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return wt(n.add(T8e(s)))}(o,h,t));const A=t.add(Kte({pulse:h})),I=t.add(Og({pulse:wt(A)},void 0,t.parent()));null!=e.name&&(d=e.name,t.addData(d,new Mg(t,u,A,I)),e.on&&e.on.forEach(L=>{(L.insert||L.remove||L.toggle)&&be("Marks only support modify triggers."),mne(L,t,d)}))}function F4e(e,t,n){const i={enter:{},update:{}};return Bo(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function _ne(e,t,n){return t[e]?`scale("${t[e]}",datum)`:rne(e,n[0].encode)}function H4e(e,t){const n={enter:{},update:{}};return Bo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:e5},angle:{signal:'item.orient==="left"?-90:item.orient==="right"?90:0'},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),k_(n,t,Xb)}function kg(e){const t=Tu({},e);return t.metadata={source:!0},t}function yne(e,t){return C8e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}Mg.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let o=t[0],s=null,a=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=wt(t[a-1]),e.add(t[a]),"aggregate"===t[a].type&&(s=t[a]);return new Mg(e,o,r,i,s)},Mg.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),o=pne(t);let s,a,l;return null!=o&&(e=i.scope,s=r[o]),s?n&&n.field&&gne(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:wt(i.output)},n&&n.field&&gne(e,l,n),a=e.add(zte(l)),s=e.add(Tu({pulse:wt(a)})),s={agg:a,ref:wt(s)},null!=o&&(r[o]=s)),s.ref},tuplesRef(){return wt(this.values)},extentRef(e,t){return Qb(e,this,"extent","extent",t,!1)},domainRef(e,t){return Qb(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Qb(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Qb(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Qb(e,this,"indata","tupleindex",t,!0,!0)}};const vne=e=>e===Vh||e===Au,cT=(e,t,n)=>no(e)?X4e(e.signal,t,n):"left"===e||e===Au?t:n,vo=(e,t,n)=>no(e)?Y4e(e.signal,t,n):vne(e)?t:n,Ou=(e,t,n)=>no(e)?K4e(e.signal,t,n):vne(e)?n:t,bne=(e,t,n)=>no(e)?J4e(e.signal,t,n):e===Au?{value:t}:{value:n},Y4e=(e,t,n)=>wne(`${e} === 'top' || ${e} === '${Vh}'`,t,n),K4e=(e,t,n)=>wne(`${e} !== 'top' && ${e} !== '${Vh}'`,t,n),X4e=(e,t,n)=>o5(`${e} === 'left' || ${e} === 'top'`,t,n),J4e=(e,t,n)=>o5(`${e} === 'top'`,t,n),wne=(e,t,n)=>(t=null!=t?yo(t):t,n=null!=n?yo(n):n,Ene(t)&&Ene(n)?{signal:`${e} ? (${t=t?t.signal||Be(t.value):null}) : (${n=n?n.signal||Be(n.value):null})`}:[an({test:e},t)].concat(n||[])),Ene=e=>null==e||1===Object.keys(e).length,o5=(e,t,n)=>({signal:`${e} ? (${L_(t)}) : (${L_(n)})`}),Z4e=(e,t,n,i,r)=>({signal:(null!=i?`${e} === 'left' ? (${L_(i)}) : `:"")+(null!=n?`${e} === '${Vh}' ? (${L_(n)}) : `:"")+(null!=r?`${e} === 'right' ? (${L_(r)}) : `:"")+(null!=t?`${e} === 'top' ? (${L_(t)}) : `:"")+"(null)"}),L_=e=>no(e)?e.signal:null==e?null:Be(e),j_=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function B_(e,t,n,i){let r;if(t&&gt(t,e))return t[e];if(gt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[K3][r]}if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[Kb][r]}return null}function Cne(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function Dne(e,t){return{scale:e.scale,range:t}}function s5(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function sBe(e,t,n,i,r,o){const s=Ca(e,t),a=e.orient,l=e.scale,u=cT(a,-1,1),c=Ag(s("labelFlush")),d=Ag(s("labelFlushOffset")),f=s("labelAlign"),h=s("labelBaseline");let m,p=0===c||!!c;const _=yo(r);_.mult=u,_.offset=yo(s("labelPadding")||0),_.offset.mult=u;const b={scale:l,field:Ml,band:.5,offset:one(o.offset,s("labelOffset"))},v=vo(a,p?s5(l,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>no(e)?((e,t,n)=>o5(`${e} === 'right'`,t,n))(e.signal,t,n):"right"===e?{value:t}:{value:n})(a,"left","right")),D=vo(a,bne(a,"bottom","top"),p?s5(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),A=s5(l,c,`-(${d})`,d,0);p=p&&d;const I={opacity:Ln,x:vo(a,b,_),y:Ou(a,b,_)},L={enter:I,update:m={opacity:kl,text:{field:Y3},x:I.x,y:I.y,align:v,baseline:D},exit:{opacity:Ln,x:I.x,y:I.y}};Bo(L,{dx:!f&&p?vo(a,A):null,dy:!h&&p?Ou(a,A):null}),Bo(L,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:f,baseline:h});const k=s("labelBound");let B=s("labelOverlap");return B=B||k?{separation:s("labelSeparation"),method:B,order:"datum.index",bound:k?{scale:l,orient:a,tolerance:k}:null}:void 0,m.align!==v&&(m.align=j_(m.align,v)),m.baseline!==D&&(m.baseline=j_(m.baseline,D)),Xa({type:Ng,role:"axis-label",style:Kb,key:Ml,from:i,encode:L,overlap:B},n)}function uBe(e,t){const n=function tBe(e,t){var a,l,u,n=t.config,i=n.style,r=n.axis,o="band"===t.scaleType(e.scale)&&n.axisBand,s=e.orient;if(no(s)){const d=Cne([n.axisX,n.axisY]),f=Cne([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);for(u of(a={},d))a[u]=vo(s,B_(u,n.axisX,r,i),B_(u,n.axisY,r,i));for(u of(l={},f))l[u]=Z4e(s.signal,B_(u,n.axisTop,r,i),B_(u,n.axisBottom,r,i),B_(u,n.axisLeft,r,i),B_(u,n.axisRight,r,i))}else a=s===Au||s===Vh?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?an({},r,a,l,o):r}(e,t),i=e.encode||{},r=i.axis||{},o=r.name||void 0,s=r.interactive,a=r.style,l=Ca(e,n),u=function o4e(e){const t=e("tickBand");let i,r,n=e("tickOffset");return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},it(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):"extent"===t?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=e.title},d=wt(t.add(Tu({},[c]))),f=wt(t.add(m8e({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(function iBe(e,t,n,i,r){const o=Ca(e,t),s=e.orient,a=e.gridScale,l=cT(s,1,-1),u=function rBe(e,t){if(1!==t)if(it(e)){let n=e=an({},e);for(;null!=n.mult;){if(!it(n.mult))return n.mult=no(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n=n.mult=an({},n.mult)}n.mult=t}else e=no(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);return e}(e.offset,l);let c,d,f;const h={enter:c={opacity:Ln},update:f={opacity:kl},exit:d={opacity:Ln}};Bo(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Ml,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},m=vo(s,{signal:"height"},{signal:"width"}),_=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},b=a?{scale:a,range:1,mult:l,offset:u}:an(m,{mult:l,offset:u});return c.x=f.x=vo(s,p,_),c.y=f.y=Ou(s,p,_),c.x2=f.x2=Ou(s,b),c.y2=f.y2=vo(s,b),d.x=vo(s,p),d.y=Ou(s,p),Xa({type:Z3,role:"axis-grid",key:Ml,from:i,encode:h},n)}(e,n,i.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(function oBe(e,t,n,i,r,o){const s=Ca(e,t),a=e.orient,l=cT(a,-1,1);let u,c,d;const f={enter:u={opacity:Ln},update:d={opacity:kl},exit:c={opacity:Ln}};Bo(f,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=yo(r);h.mult=l;const p={scale:e.scale,field:Ml,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return d.y=u.y=vo(a,Ln,p),d.y2=u.y2=vo(a,h),c.x=vo(a,p),d.x=u.x=Ou(a,Ln,p),d.x2=u.x2=Ou(a,h),c.y=Ou(a,p),Xa({type:Z3,role:"axis-tick",key:Ml,from:i,encode:f},n)}(e,n,i.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(sBe(e,n,i.labels,f,p,u))),c.domain&&h.push(function nBe(e,t,n,i){const r=Ca(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Ln},update:a={opacity:kl},exit:{opacity:Ln}};Bo(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=Dne(e,0),c=Dne(e,1);return s.x=a.x=vo(o,u,Ln),s.x2=a.x2=vo(o,c),s.y=a.y=Ou(o,u,Ln),s.y2=a.y2=Ou(o,c),Xa({type:Z3,role:"axis-domain",from:i,encode:l},n)}(e,n,i.domain,d)),c.title&&h.push(function aBe(e,t,n,i){const r=Ca(e,t),o=e.orient,s=cT(o,-1,1);let a,l;const u={enter:a={opacity:Ln,anchor:yo(r("titleAnchor",null)),align:{signal:e5}},update:l=an({},a,{opacity:kl,text:yo(e.title)}),exit:{opacity:Ln}},c={signal:`lerp(range("${e.scale}"), ${sT(0,1,.5)})`};return l.x=vo(o,c),l.y=Ou(o,c),a.angle=vo(o,Ln,((e,t)=>no(e)?{signal:`(${e.signal}) * 90`}:{value:90*e})(s)),a.baseline=vo(o,bne(o,Vh,Au),{value:Vh}),l.angle=a.angle,l.baseline=a.baseline,Bo(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),function lBe(e,t,n,i){const r=(a,l)=>null!=a?(n.update[l]=j_(yo(a),n.update[l]),!1):!I_(l,i),o=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===o?yo(s):vo(t,yo(s),yo(o))}(r,o,u,n),u.update.align=j_(u.update.align,a.align),u.update.angle=j_(u.update.angle,a.angle),u.update.baseline=j_(u.update.baseline,a.baseline),Xa({type:Ng,role:"axis-title",style:K3,from:i,encode:u},n)}(e,n,i.title,d)),uT(Jb({role:"axis",from:d,encode:k_(cBe(l,e),r,Xb),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function cBe(e,t){const n={enter:{},update:{}};return Bo(n,{orient:e("orient"),offset:e("offset")||0,position:xu(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Sne(e,t,n){const i=Ze(e.signals),r=Ze(e.scales);return n||i.forEach(o=>Vte(o,t)),Ze(e.projections).forEach(o=>function Y8e(e,t){const n=t.config.projection||{},i={};for(const r in e)"name"!==r&&(i[r]=W3(e[r],r,t));for(const r in n)null==i[r]&&(i[r]=W3(n[r],r,t));t.addProjection(e.name,i)}(o,t)),r.forEach(o=>function F8e(e,t){const n=e.type||"linear";MK(n)||be("Unrecognized scale type: "+Be(n)),t.addScale(e.name,{type:n,domain:void 0})}(o,t)),Ze(e.data).forEach(o=>function G4e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(i5(i,t))}),e.on&&e.on.forEach(i=>{mne(i,t,e.name)}),t.addDataPipeline(e.name,function W4e(e,t,n){const i=[];let a,l,u,c,d,r=null,o=!1,s=!1;for(e.values?no(e.values)||tT(e.format)?(i.push(yne(t,e)),i.push(r=kg())):i.push(r=kg({$ingest:e.values,$format:e.format})):e.url?tT(e.url)||tT(e.format)?(i.push(yne(t,e)),i.push(r=kg())):i.push(r=kg({$request:e.url,$format:e.format})):e.source&&(r=a=Ze(e.source).map(f=>wt(t.getData(f).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!r&&!d.source&&i.push(r=kg()),i.push(c),d.generates&&(s=!0),d.modifies&&!s&&(o=!0),d.source?r=c:d.changes&&(r=null);return a&&(u=a.length-1,i[0]=M8e({derive:o,pulse:u?a:a[0]}),(o||u)&&i.splice(1,0,kg())),r||i.push(kg()),i.push(Og({})),i}(e,t,n))}(o,t)),r.forEach(o=>L8e(o,t)),(n||i).forEach(o=>function g8e(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?be("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Pc(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>function f8e(e,t,n){const i=e.encode,r={target:n};let o=e.events,s=e.update,a=[];o||be("Signal update missing events specification."),Qe(o)&&(o=$h(o,t.isSubscope()?U3:z3)),o=Ze(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[p8e(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),null!=i&&(s&&be("Signal encode and update are mutually exclusive."),s="encode(item(),"+Be(i)+")"),r.update=Qe(s)?Pc(s,t):null!=s.expr?Pc(s.expr,t):null!=s.value?s.value:null!=s.signal?{$expr:d8e,$params:{$value:t.signalRef(s.signal)}}:be("Invalid signal update specification."),e.force&&(r.options={force:!0}),a.forEach(l=>t.addUpdate(an(function h8e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Yb(e,t)}}(l,t),r)))}(r,t,n.id))}(o,t)),Ze(e.axes).forEach(o=>uBe(o,t)),Ze(e.marks).forEach(o=>uT(o,t)),Ze(e.legends).forEach(o=>function I4e(e,t){const n=t.config.legend,i=e.encode||{},r=Ca(e,n),o=i.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let d,f,h,c=0;Q3.forEach(D=>e[D]?(u[D]=e[D],c=c||e[D]):0),c||be("Missing valid scale for legend.");const p=function R4e(e,t){let n=e.type||"symbol";return!e.type&&1===function P4e(e){return Q3.reduce((t,n)=>t+(e[n]?1:0),0)}(e)&&(e.fill||e.stroke)&&(n=rP(t)?rT:oP(t)?X3:"symbol"),n!==rT?n:oP(t)?X3:rT}(e,t.scaleType(c)),m={title:null!=e.title,scales:u,type:p,vgrad:"symbol"!==p&&r.isVertical()},_=wt(t.add(Tu(null,[m]))),v=wt(t.add(E8e(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===rT?(h=[s4e(e,c,n,i.gradient),sne(e,n,i.labels,v)],f.count=f.count||t.signalRef(`max(2,2*floor((${Ag(r.gradientLength())})/100))`)):p===X3?h=[a4e(e,c,n,i.gradient,v),sne(e,n,i.labels,v)]:(d=function d4e(e,t){const n=Ca(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),h=[c4e(e,n,i,v,Ag(d.columns))],f.size=function L4e(e,t,n){const i=Ag(_ne("size",e,n)),r=Ag(_ne("strokeWidth",e,n)),o=Ag(function j4e(e,t,n){return rne("fontSize",e)||function r4e(e,t,n){const i=t.config.style[n];return i&&i[e]}("fontSize",t,n)}(n[1].encode,t,Kb));return Pc(`max(ceil(sqrt(${i})+${r}),${o})`,t)}(e,t,h[0].marks)),h=[Jb({role:"legend-entry",from:_,encode:{enter:{x:{value:0},y:{value:0}}},marks:h,layout:d,interactive:a})],m.title&&h.push(function v4e(e,t,n,i){const r=Ca(e,t),o={enter:{opacity:Ln},update:{opacity:kl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ln}};return Bo(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:m4e},angle:{signal:_4e},align:{signal:g4e},baseline:{signal:y4e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),Xa({type:Ng,role:"legend-title",style:K3,from:i,encode:o},n)}(e,n,i.title,_)),uT(Jb({role:"legend",from:_,encode:k_(F4e(r,e,n),o,Xb),marks:h,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:a,style:l}),t)}(o,t)),e.title&&function $4e(e,t){const n=Ca(e=Qe(e)?{text:e}:e,t.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,s=r.interactive,a=r.style,l=[],c=wt(t.add(Tu(null,[{}])));return l.push(function U4e(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bo(s,{text:e.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xa({type:Ng,role:"title-text",style:"group-title",from:i,encode:s},n)}(e,n,function V4e(e){const t=e.encode;return t&&t.title||an({name:e.name,interactive:e.interactive,style:e.style},t)}(e),c)),e.subtitle&&l.push(function z4e(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bo(s,{text:e.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xa({type:Ng,role:"title-subtitle",style:"group-subtitle",from:i,encode:s},n)}(e,n,i.subtitle,c)),uT(Jb({role:"title",from:c,encode:H4e(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}(e.title,t),t.parseLambdas(),t}function Zb(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function xne(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Tne(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function a5(e){return(Ce(e)?pBe:gBe)(e)}function pBe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(it(r)?r.signal||a5(r):Be(r))}return n+"]"}function gBe(e){let i,r,t="{",n=0;for(i in e)r=e[i],t+=(++n>1?",":"")+Be(i)+":"+(it(r)?r.signal||a5(r):Be(r));return t+"}"}function _Be(e,t,n){return it(e)||be("Input Vega specification must be an object."),function fBe(e,t){const n=t.config,i=wt(t.root=t.add(Zx())),r=function hBe(e,t){const n=s=>xu(e[s],t[s]),i=[Zb("background",n("background")),Zb("autosize",Tje(n("autosize"))),Zb("padding",Oje(n("padding"))),Zb("width",n("width")||0),Zb("height",n("height")||0)],r=i.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return Ze(e.signals).forEach(s=>{gt(r,s.name)?s=an(r[s.name],s):i.push(s),o[s.name]=s}),Ze(t.signals).forEach(s=>{!gt(o,s.name)&&!gt(r,s.name)&&i.push(s)}),i}(e,n);r.forEach(u=>Vte(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Tu()),s=t.add(qte(Bte((e=>k_({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),oT,j3,e.style,t,{pulse:wt(o)}))),a=t.add(Xte({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:wt(s)}));t.operators.pop(),t.pushState(wt(s),wt(a),null),Sne(e,t,r),t.operators.push(a);let l=t.add(Gte({mark:i,pulse:wt(a)}));return l=t.add(Kte({pulse:wt(l)})),l=t.add(Og({pulse:wt(l)})),t.addData("root",new Mg(t,o,o,l)),t}(e,new xne(t=R0(function mBe(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}xne.prototype=Tne.prototype={parse(e){return Sne(e,this)},fork(){return new Tne(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof V3?wt(e):e;return this.add(N8e({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,o){let s,a;i&&(s=i.data||(i.data={}),a=s[r]||(s[r]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(wt(this.add(Og({pulse:e})))),this._parent.push(t),this._lookup.push(n?wt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return On(this._parent)},encode(){return On(this._encode)},lookup(){return On(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Qe(e))return qb(e,t);e.signal||be("Unsupported field reference: "+Be(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=wt(this.add(b8e(r)))}return i},compareRef(e){let t=!1;const n=o=>no(o)?(t=!0,this.signalRef(o.signal)):function o8e(e){return e&&e.expr}(o)?(t=!0,this.exprRef(o.expr)):o,i=Ze(e.field).map(n),r=Ze(e.order).map(n);return t?wt(this.add(Wte({fields:i,orders:r}))):Hte(i,r)},keyRef(e,t){let n=!1;const r=this.signals;return e=Ze(e).map(o=>no(o)?(n=!0,wt(r[o.signal])):o),n?wt(this.add(w8e({fields:e,flat:t}))):function t8e(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef(e){if(!e)return e;const t=eT(e.op,e.field),n=e.order||"ascending";return n.signal?wt(this.add(Wte({fields:t,orders:this.signalRef(n.signal)}))):Hte(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return gt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&be("Duplicate signal name: "+Be(e));const n=t instanceof V3?t:this.add(Zx(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||be("Unrecognized signal name: "+Be(e)),this.signals[e]},signalRef(e){return this.signals[e]?wt(this.signals[e]):(gt(this.lambdas,e)||(this.lambdas[e]=this.add(Zx(null))),wt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Pc(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&it(e)?this.signalRef(e.signal||a5(e)):e},exprRef(e,t){const n={expr:Pc(e,this)};return t&&(n.expr.$name=t),wt(this.add(y8e(n)))},addBinding(e,t){this.bindings||be("Nested signals do not support binding: "+Be(e)),this.bindings.push(an({signal:e},t))},addScaleProj(e,t){gt(this.scales,e)&&be("Duplicate scale or projection name: "+Be(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,k8e(t))},addProjection(e,t){this.addScaleProj(e,O8e(t))},getScale(e){return this.scales[e]||be("Unrecognized scale name: "+Be(e)),this.scales[e]},scaleRef(e){return wt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return gt(this.data,e)&&be("Duplicate data set name: "+Be(e)),this.data[e]=t},getData(e){return this.data[e]||be("Undefined data set name: "+Be(e)),this.data[e]},addDataPipeline(e,t){return gt(this.data,e)&&be("Duplicate data set name: "+Be(e)),this.addData(e,Mg.fromEntries(this,t))}};an(J0,yn,N,wn,ln,En,Ut,Wt,Vt,ei,Tr,ir);const PBe="5.21.0";var LBe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},jBe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},BBe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const $Be=Array.prototype.slice,Ig=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,$Be.call(t,1))};var HBe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,i,r,o,s)=>new Date(e,t||0,null!=n?n:1,i||0,r||0,o||0,s||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Ig("join",arguments)},indexof:function(){return Ig("indexOf",arguments)},lastindexof:function(){return Ig("lastIndexOf",arguments)},slice:function(){return Ig("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Ig("substring",arguments,String)},split:function(){return Ig("split",arguments,String)},replace:function(){return Ig("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const UBe=["view","item","group","xy","x","y"],zBe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:LBe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);return n&&(e.memberDepth-=1),i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),"if"===i?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||HBe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>jBe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>BBe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,n[r]=e(i.value),n},{})};function ew(e,t,n,i,r,o){const s=a=>zBe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=o,UBe.forEach(a=>s.fn[a]=(...l)=>r.vega[a](...l)),s(e)}var GBe={operator(e,t){const n=t.ast,i=e.functions;return r=>ew(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,o)=>ew(n,i,o,r)},event(e,t){const n=t.ast,i=e.functions;return r=>ew(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,o)=>ew(n,i,r,o.item&&o.item.datum,o)},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o="group"===n||"image"===n||"rect"===n;return(s,a)=>{const l=s.datum;let c,u=0;for(const d in i)c=ew(i[d].ast,r,a,l,void 0,s),s[d]!==c&&(s[d]=c,u=1);return"rule"!==n&&function FBe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(s,i,o),u}}};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,i){return Array.isArray(i)?n.push.apply(n,e.call(i,t-1)):n.push(i),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var qBe=Le(259),YBe=Le.n(qBe),KBe=Le(559),XBe=Le.n(KBe),JBe=Le(245),l5=Le.n(JBe);function u5(e){return!!e.or}function c5(e){return!!e.and}function d5(e){return!!e.not}function dT(e,t){if(d5(e))dT(e.not,t);else if(c5(e))for(const n of e.and)dT(n,t);else if(u5(e))for(const n of e.or)dT(n,t);else t(e)}function $_(e,t){return d5(e)?{not:$_(e.not,t)}:c5(e)?{and:e.and.map(n=>$_(n,t))}:u5(e)?{or:e.or.map(n=>$_(n,t))}:t(e)}const Fc=XBe(),rn=YBe();function Ane(e){throw new Error(e)}function V_(e,t){const n={};for(const i of t)gt(e,i)&&(n[i]=e[i]);return n}function Ja(e,t){const n=Object.assign({},e);for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>l5()(e)).join(",")})`};const Fi=l5();function Nn(e){if(mi(e))return e;const t=Qe(e)?e:l5()(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return n}function f5(e){return!1===e||null===e}function Mn(e,t){return e.includes(t)}function Rg(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function h5(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function One(e,...t){for(const n of t)QBe(e,null!=n?n:{});return e}function QBe(e,t){for(const n of Te(t))P0(e,n,t[n],!0)}function Lc(e,t){const n=[],i={};let r;for(const o of e)r=t(o),!(r in i)&&(i[r]=1,n.push(o));return n}function ZBe(e,t){const n=Te(e),i=Te(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Nne(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function p5(e,t){for(const n of e)if(t.has(n))return!0;return!1}function g5(e){const t=new Set;for(const n of e){const r=gc(n).map((s,a)=>0===a?s:`[${s}]`),o=r.map((s,a)=>r.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function m5(e,t){return void 0===e||void 0===t||p5(g5(e),g5(t))}function yi(e){return 0===Te(e).length}const Te=Object.keys,ds=Object.values,Hh=Object.entries;function tw(e){return!0===e||!1===e}function Wi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function nw(e,t){return d5(e)?`!(${nw(e.not,t)})`:c5(e)?`(${e.and.map(n=>nw(n,t)).join(") && (")})`:u5(e)?`(${e.or.map(n=>nw(n,t)).join(") || (")})`:t(e)}function fT(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&fT(e[n],t)&&delete e[n],yi(e)}function iw(e){return e.charAt(0).toUpperCase()+e.substr(1)}function _5(e,t="datum"){const n=gc(e),i=[];for(let r=1;r<=n.length;r++){const o=`[${n.slice(0,r).map(Be).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function Mne(e,t="datum"){return`${t}[${Be(gc(e).join("."))}]`}function e6e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Il(e){return`${gc(e).map(e6e).join("\\.")}`}function Pg(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function y5(e){return`${gc(e).join(".")}`}function H_(e){return e?gc(e).length:0}function Br(...e){for(const t of e)if(void 0!==t)return t}let kne=42;function Ine(e){const t=++kne;return e?String(e)+t:t}function t6e(){kne=42}function Rne(e){return Pne(e)?e:`__${e}`}function Pne(e){return e.startsWith("__")}function rw(e){if(void 0!==e)return(e%360+360)%360}function hT(e){return!!mi(e)||!isNaN(e)&&!isNaN(parseFloat(e))}var ow=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const sf="row",af="column",pT="facet",nr="x",bo="y",Nu="x2",jc="y2",Uh="xOffset",U_="yOffset",Bc="radius",lf="radius2",Mu="theta",uf="theta2",$c="latitude",Vc="longitude",ku="latitude2",Rl="longitude2",Da="color",Hc="fill",Uc="stroke",Sa="shape",cf="size",Fg="angle",df="opacity",zh="fillOpacity",Gh="strokeOpacity",Wh="strokeWidth",qh="strokeDash",sw="text",aw="order",lw="detail",gT="key",Lg="tooltip",mT="href",_T="url",yT="description",Fne={theta:1,theta2:1,radius:1,radius2:1};function Lne(e){return e in Fne}const v5={longitude:1,longitude2:1,latitude:1,latitude2:1},o6e=Te(v5),vT=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),Fne),v5),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function z_(e){return e===Da||e===Hc||e===Uc}const jne={row:1,column:1,facet:1},Pl=Te(jne),bT=Object.assign(Object.assign({},vT),jne),s6e=Te(bT),b5=ow(bT,["order","detail","tooltip"]),Bne=ow(b5,["row","column","facet"]);function a6e(e){return!!Bne[e]}function $ne(e){return!!bT[e]}Te(b5),Te(Bne);const l6e=[Nu,jc,ku,Rl,uf,lf];function Vne(e){return jg(e)!==e}function jg(e){switch(e){case Nu:return nr;case jc:return bo;case ku:return $c;case Rl:return Vc;case uf:return Mu;case lf:return Bc}return e}function Yh(e){if(Lne(e))switch(e){case Mu:return"startAngle";case uf:return"endAngle";case Bc:return"outerRadius";case lf:return"innerRadius"}return e}function ff(e){switch(e){case nr:return Nu;case bo:return jc;case $c:return ku;case Vc:return Rl;case Mu:return uf;case Bc:return lf}}function xa(e){switch(e){case nr:case Nu:return"width";case bo:case jc:return"height"}}function Hne(e){switch(e){case nr:return"xOffset";case bo:return"yOffset"}}function Une(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const c6e=Te(vT),wT=ow(vT,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),d6e=Te(wT),w5={x:1,y:1},zc=Te(w5);function $o(e){return e in w5}const E5={theta:1,radius:1},f6e=Te(E5);function ET(e){return"width"===e?nr:bo}const C5={xOffset:1,yOffset:1};function G_(e){return e in C5}Te(C5);const zne=ow(wT,["text","tooltip","href","url","description","detail","key","order"]),h6e=Te(zne),Gne=Object.assign(Object.assign(Object.assign(Object.assign({},w5),E5),C5),zne),CT=Te(Gne);function Kh(e){return!!Gne[e]}const D5={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},_6e=ow(D5,["geoshape"]);function S5(e){switch(e){case nr:case bo:case Mu:case Bc:case Uh:case U_:case cf:case Fg:case Wh:case df:case zh:case Gh:case Nu:case jc:case uf:case lf:return;case pT:case sf:case af:case Sa:case qh:case sw:case Lg:case mT:case _T:case yT:return"discrete";case Da:case Hc:case Uc:return"flexible";case $c:case Vc:case ku:case Rl:case lw:case gT:case aw:return}}const v6e={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},b6e={count:1,min:1,max:1};function hf(e){return!!e&&!!e.argmin}function Xh(e){return!!e&&!!e.argmax}function x5(e){return Qe(e)&&!!v6e[e]}const w6e=new Set(["count","valid","missing","distinct"]);function Wne(e){return Qe(e)&&w6e.has(e)}const C6e=new Set(["count","sum","distinct","valid","missing"]),D6e=new Set(["mean","average","median","q1","q3","min","max"]);function qne(e){return th(e)&&(e=GT(e,void 0)),"bin"+Te(e).map(t=>DT(e[t])?Wi(`_${t}_${Hh(e[t])}`):Wi(`_${t}_${e[t]}`)).join("")}function Li(e){return!0===e||Bg(e)&&!e.binned}function Xs(e){return"binned"===e||Bg(e)&&!0===e.binned}function Bg(e){return it(e)}function DT(e){return null==e?void 0:e.param}function Yne(e){switch(e){case sf:case af:case cf:case Da:case Hc:case Uc:case Wh:case df:case zh:case Gh:case Sa:return 6;case qh:return 4;default:return 10}}function uw(e){return e&&!!e.expr}function Ta(e){const t=Te(e||{}),n={};for(const i of t)n[i]=Qa(e[i]);return n}function Kne(e){const{anchor:t,frame:n,offset:i,orient:r,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p}=e,m=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),_=Object.assign(Object.assign({},m),a?{fill:a}:{}),b=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),i?{offset:i}:{}),r?{orient:r}:{}),void 0!==o?{angle:o}:{}),void 0!==s?{limit:s}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{subtitleColor:l}:{}),u?{subtitleFont:u}:{}),c?{subtitleFontSize:c}:{}),d?{subtitleFontStyle:d}:{}),f?{subtitleFontWeight:f}:{}),h?{subtitleLineHeight:h}:{}),p?{subtitlePadding:p}:{});return{titleMarkConfig:_,subtitleMarkConfig:V_(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:b,subtitle:v}}function Jh(e){return Qe(e)||Ce(e)&&Qe(e[0])}function _t(e){return e&&!!e.signal}function Qh(e){return!!e.step}function pf(e){return!Ce(e)&&"field"in e&&"data"in e}const A6e=Te({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),O6e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},T5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var A5=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function Xne(e){const t=Ce(e.condition)?e.condition.map(Jne):Jne(e.condition);return Object.assign(Object.assign({},Qa(e)),{condition:t})}function Qa(e){if(uw(e)){const{expr:t}=e,n=A5(e,["expr"]);return Object.assign({signal:t},n)}return e}function Jne(e){if(uw(e)){const{expr:t}=e,n=A5(e,["expr"]);return Object.assign({signal:t},n)}return e}function Bi(e){if(uw(e)){const{expr:t}=e,n=A5(e,["expr"]);return Object.assign({signal:t},n)}return _t(e)?e:void 0!==e?{value:e}:void 0}function N6e(e){return _t(e)?e.signal:Be(e)}function Qne(e){return _t(e)?e.signal:Be(e.value)}function gf(e){return _t(e)?e.signal:null==e?null:Be(e)}function Zne(e){var t;return[].concat(e.type,null!==(t=e.style)&&void 0!==t?t:[])}function ii(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&void 0!==t[r]?t[r]:void 0!==t[e]?t[e]:!o||r&&r!==e?$g(e,t,n,i):void 0}function $g(e,t,n,{vgChannel:i}={}){return Br(i?ST(e,t,n.style):void 0,ST(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function ST(e,t,n){return eie(e,Zne(t),n)}function eie(e,t,n){let i;t=Ze(t);for(const r of t){const o=n[r];o&&void 0!==o[e]&&(i=o[e])}return i}function tie(e,t){return Ze(e).reduce((n,i)=>{var r;return n.field.push(We(i,t)),n.order.push(null!==(r=i.sort)&&void 0!==r?r:"ascending"),n},{field:[],order:[]})}function nie(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(Fc(r,i))return;n.push(i)}),n}function iie(e,t){return Fc(e,t)||!t?e:e?[...Ze(e),...Ze(t)].join(", "):t}function rie(e,t){const n=e.value,i=t.value;if(null==n||null===i)return{explicit:e.explicit,value:null};if((Jh(n)||_t(n))&&(Jh(i)||_t(i)))return{explicit:e.explicit,value:iie(n,i)};if(Jh(n)||_t(n))return{explicit:e.explicit,value:n};if(Jh(i)||_t(i))return{explicit:e.explicit,value:i};if(!(Jh(n)||_t(n)||Jh(i)||_t(i)))return{explicit:e.explicit,value:nie(n,i)};throw new Error("It should never reach here")}function O5(e){return`Invalid specification ${Fi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function oie(e){return("width"==e?"Width":"Height")+' "container" only works for single views and layered views.'}function sie(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function aie(e){return e?`Dropping "fit-${e}" because spec has discrete ${xa(e)}.`:'Dropping "fit" because spec has discrete size.'}function N5(e){return`Unknown field for ${e}. Cannot calculate view size.`}function lie(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function I6e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function uie(e){return`Selection not supported for ${e} yet.`}function cie(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function die(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function W6e(e){return`Ignoring an invalid transform: ${Fi(e)}.`}function fie(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function X6e(e){return`${e}Offset dropped because ${e} is continuous`}function J6e(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function hie(e){return`Invalid field type "${e}".`}function pie(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function M5(e,t){return`Dropping ${Fi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function xT(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function i$e(e){return`${e} encoding has no scale, so specified scale is ignored.`}function r$e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function o$e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function s$e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function k5(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function h$e(e){return`Using unaggregated domain with raw field has no effect (${Fi(e)}).`}function p$e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function g$e(e){return`Unaggregated domain is currently unsupported for log scale (${Fi(e)}).`}function gie(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function mie(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const _ie="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function TT(e,t){return`Invalid ${e}: ${Fi(t)}.`}function yie(e){return`1D error band does not support ${e}.`}function vie(e){return`Channel ${e} is required for "binned" bin.`}const bie=ck(uk);let Gc=bie;function ke(...e){Gc.warn(...e)}function Vg(e){if(e&&it(e))for(const t of R5)if(t in e)return!0;return!1}const Eie=["january","february","march","april","may","june","july","august","september","october","november","december"],B$e=Eie.map(e=>e.substr(0,3)),Cie=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],$$e=Cie.map(e=>e.substr(0,3));function I5(e,t){const n=[];if(t&&void 0!==e.day&&Te(e).length>1&&(ke(function O$e(e){return`Dropping day from datetime ${Fi(e)} as day cannot be combined with other units.`}(e)),delete(e=rn(e)).day),n.push(void 0!==e.year?e.year:2012),void 0!==e.month){const i=t?function H$e(e){if(hT(e)&&(e=+e),mi(e))return e-1;{const t=e.toLowerCase(),n=Eie.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=B$e.indexOf(i);if(-1!==r)return r;throw new Error(TT("month",e))}}(e.month):e.month;n.push(i)}else if(void 0!==e.quarter){const i=t?function V$e(e){if(hT(e)&&(e=+e),mi(e))return e>4&&ke(TT("quarter",e)),e-1;throw new Error(TT("quarter",e))}(e.quarter):e.quarter;n.push(mi(i)?3*i:`${i}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const i=t?function U$e(e){if(hT(e)&&(e=+e),mi(e))return e%7;{const t=e.toLowerCase(),n=Cie.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=$$e.indexOf(i);if(-1!==r)return r;throw new Error(TT("day",e))}}(e.day):e.day;n.push(mi(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(void 0===r?0:r)}return n}function dw(e){const n=I5(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}const Die={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},R5=Te(Die);function P5(e){return e.startsWith("utc")}const K$e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function F5(e){return R5.filter(t=>Sie(e,t))}function Sie(e,t){const n=e.indexOf(t);return!(n<0||n>0&&"seconds"===t&&"i"===e.charAt(n-1)||e.length>n+3&&"day"===t&&"o"===e.charAt(n+3)||n>0&&"year"===t&&"f"===e.charAt(n-1))}function xie(e){if(!e)return;const t=F5(e);return`timeUnitSpecifier(${Fi(t)}, ${Fi(K$e)})`}function Js(e){if(!e)return;let t;return Qe(e)?t={unit:e}:it(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),P5(t.unit)&&(t.utc=!0,t.unit=function Y$e(e){return e.substr(3)}(t.unit)),t}function L5(e){return e&&!!e.field&&void 0!==e.equal}function j5(e){return e&&!!e.field&&void 0!==e.lt}function B5(e){return e&&!!e.field&&void 0!==e.lte}function $5(e){return e&&!!e.field&&void 0!==e.gt}function V5(e){return e&&!!e.field&&void 0!==e.gte}function H5(e){if(null==e?void 0:e.field){if(Ce(e.range)&&2===e.range.length)return!0;if(_t(e.range))return!0}return!1}function U5(e){return e&&!!e.field&&(Ce(e.oneOf)||Ce(e.in))}function Tie(e){return U5(e)||L5(e)||H5(e)||j5(e)||$5(e)||B5(e)||V5(e)}function Wc(e,t){return WT(e,{timeUnit:t,wrapTime:!0})}function Aie(e,t=!0){var n;const{field:i}=e,r=null===(n=Js(e.timeUnit))||void 0===n?void 0:n.unit,o=r?`time(${function X$e(e,t,{end:n}={end:!1}){const i=_5(t),r=P5(e)?"utc":"";function o(l){return"quarter"===l?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const a={};for(const l of R5)Sie(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),function z$e(e){const n=I5(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}(a)}(r,i)})`:We(e,{expr:"datum"});if(L5(e))return`${o}===${Wc(e.equal,r)}`;if(j5(e))return`${o}<${Wc(e.lt,r)}`;if($5(e))return`${o}>${Wc(e.gt,r)}`;if(B5(e))return`${o}<=${Wc(e.lte,r)}`;if(V5(e))return`${o}>=${Wc(e.gte,r)}`;if(U5(e))return`indexof([${function t9e(e,t){return e.map(n=>Wc(n,t))}(e.oneOf,r).join(",")}], ${o}) !== -1`;if(function e9e(e){return e&&!!e.field&&void 0!==e.valid}(e))return z5(o,e.valid);if(H5(e)){const{range:s}=e,a=_t(s)?{signal:`${s.signal}[0]`}:s[0],l=_t(s)?{signal:`${s.signal}[1]`}:s[1];if(null!==a&&null!==l&&t)return"inrange("+o+", ["+Wc(a,r)+", "+Wc(l,r)+"])";const u=[];return null!==a&&u.push(`${o} >= ${Wc(a,r)}`),null!==l&&u.push(`${o} <= ${Wc(l,r)}`),u.length>0?u.join(" && "):"true"}throw new Error(`Invalid field predicate: ${Fi(e)}`)}function z5(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function n9e(e){var t;return Tie(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:null===(t=Js(e.timeUnit))||void 0===t?void 0:t.unit}):e}const Hg={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function i9e(e){return"quantitative"===e||"temporal"===e}function Oie(e){return"ordinal"===e||"nominal"===e}const Ug=Hg.quantitative,G5=Hg.ordinal,W_=Hg.temporal,W5=Hg.nominal,q_=Hg.geojson;Te(Hg);const AT={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function s9e(e,t){const n=AT[e],i=AT[t];return n===i||"ordinal-position"===n&&"time"===i||"ordinal-position"===i&&"time"===n}Te(AT);const a9e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Nie(e){return a9e[e]}const Mie=new Set(["linear","log","pow","sqrt","symlog"]),kie=new Set([...Mie,"time","utc"]);function Iie(e){return Mie.has(e)}const Rie=new Set(["quantile","quantize","threshold"]),l9e=new Set([...kie,...Rie,"sequential","identity"]),u9e=new Set(["ordinal","bin-ordinal","point","band"]);function wo(e){return u9e.has(e)}function Za(e){return l9e.has(e)}function Iu(e){return kie.has(e)}function Y_(e){return Rie.has(e)}function Pie(e){return null==e?void 0:e.param}const q5={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},p9e=(Te(q5),function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(q5,["type","domain","range","rangeMax","rangeMin","scheme"])),g9e=Te(p9e);function Y5(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Iu(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return Iu(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return Iu(e);case"nice":return Iu(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return Za(e)&&!Mn(["log","time","utc","threshold","quantile"],e)}}function Fie(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return z_(e)?void 0:function d$e(e){return`Cannot use the scale property "${e}" with non-color channel.`}(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const fs={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Lie=fs.arc,OT=fs.area,NT=fs.bar,y9e=fs.image,MT=fs.line,kT=fs.point,v9e=fs.rect,IT=fs.rule,jie=fs.text,K5=fs.tick,b9e=fs.trail,X5=fs.circle,J5=fs.square,Bie=fs.geoshape;function ep(e){return["line","area","trail"].includes(e)}function $ie(e){return["rect","bar","image","arc"].includes(e)}const Vie=new Set(Te(fs));function Ru(e){return e.type}const C9e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],Hie=Te({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),Uie=Te({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function K_(e){return e&&null!=e.band}const x9e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]};function Q5(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:o}=e,s=ej(e);return Ue(n)&&!Wne(n.aggregate)&&r&&Iu(r.get("type"))?function M9e({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){return ep(n.type)?i:null===ii("invalid",n,r)?[k9e(e,t),i]:i}({fieldDef:n,channel:t,markDef:i,ref:s,config:o}):s}function k9e(e,t){const n=Z5(e,!0),r="y"===jg(t)?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function Z5(e,t=!0){return z5(Qe(e)?e:We(e,{expr:"datum"}),!t)}function zg(e,t,n,i){const r={};if(t&&(r.scale=t),Yc(e)){const{datum:o}=e;Vg(o)?r.signal=dw(o):_t(o)?r.signal=o.signal:uw(o)?r.signal=o.expr:r.value=o}else r.field=We(e,n);if(i){const{offset:o,band:s}=i;o&&(r.offset=o),s&&(r.band=s)}return r}function RT({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,bandPosition:o=.5}){const s=0<o&&o<1?"datum":void 0,a=We(t,{expr:s,suffix:r}),l=void 0!==n?We(n,{expr:s}):We(t,{suffix:"end",expr:s}),u={};if(0===o||1===o)u.scale=e,u.field=0===o?a:l;else{const c=_t(o)?`${o.signal} * ${a} + (1-${o.signal}) * ${l}`:`${o} * ${a} + ${1-o} * ${l}`;u.signal=`scale("${e}", ${c})`}return i&&(u.offset=i),u}function ej({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){var d;if(t){if(Kt(t)){const f=null==s?void 0:s.get("type");if(Fl(t)){null!=c||(c=nre({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:h,timeUnit:p,type:m}=t;if(Li(h)||c&&p&&m===W_)return(null==a?void 0:a.impute)?zg(t,o,{binSuffix:"mid"},{offset:l}):c&&!wo(f)?RT({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):zg(t,o,gw(t,e)?{binSuffix:"range"}:{},{offset:l});if(Xs(h)){if(Ue(n))return RT({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});ke(vie(e===nr?Nu:jc))}}return zg(t,o,wo(f)?{binSuffix:"range"}:{},{offset:l,band:"band"===f?null!==(d=null!=c?c:t.bandPosition)&&void 0!==d?d:.5:void 0})}if(Pu(t)){const h=l?{offset:l}:{};return Object.assign(Object.assign({},fw(e,t.value)),h)}}return sn(u)&&(u=u()),u&&Object.assign(Object.assign({},u),l?{offset:l}:{})}function fw(e,t){return Mn(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:Mn(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:Bi(t)}function Gg(e){return e&&"number"!==e&&"time"!==e}function Gie(e,t,n){return`${e}(${t}${n?`, ${Fi(n)}`:""})`}function tj({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o}){var s,a;if(Gg(n))return nj({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:o});const l=Wie(e,i,r);if(Q_(e)){const u=function F9e(e,t,n,i,r){return!t||n?`${r?"utc":"time"}Format(${e}, '${n=Qe(n)?n:i}')`:function J$e(e,t,n){if(!e)return;const i=xie(e);return`${n||P5(e)?"utc":"time"}Format(${t}, ${i})`}(t,e,r)}(l,Ue(e)?null===(s=Js(e.timeUnit))||void 0===s?void 0:s.unit:void 0,t,o.timeFormat,Wg(e)&&"utc"===(null===(a=e.scale)||void 0===a?void 0:a.type));return u?{signal:u}:void 0}return t=Kie($T(e),t,o),Ue(e)&&Li(e.bin)?{signal:PT(l,We(e,{expr:i,binSuffix:"end"}),t,n,o)}:t||"quantitative"===$T(e)?{signal:`${Xie(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function Wie(e,t,n){return Ue(e)?n?`${We(e,{expr:t,suffix:"end"})}-${We(e,{expr:t,suffix:"start"})}`:We(e,{expr:t}):function I9e(e){const{datum:t}=e;return Vg(t)?dw(t):`${Fi(t)}`}(e)}function nj({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o,field:s}){return null!=s||(s=Wie(e,i,r)),Ue(e)&&Li(e.bin)?{signal:PT(s,We(e,{expr:i,binSuffix:"end"}),t,n,o)}:{signal:Gie(n,s,t)}}function qie(e,t,n,i,r,o){var s;if(!Gg(i))return Q_(e)?function P9e(e,t,n,i){return e||(t?{signal:xie(t)}:i?void 0:n.timeFormat)}(n,Ue(e)?null===(s=Js(e.timeUnit))||void 0===s?void 0:s.unit:void 0,r,o):Kie(t,n,r)}function Yie(e,t,n){return e&&(_t(e)||"number"===e||"time"===e)?e:Q_(t)&&"time"!==n&&"utc"!==n?"time":void 0}function Kie(e,t,n){return Qe(t)?t:e===Ug?n.numberFormat:void 0}function Xie(e,t){return`format(${e}, "${t||""}")`}function Jie(e,t,n,i){var r;return Gg(n)?Gie(n,e,t):Xie(e,null!==(r=Qe(t)?t:void 0)&&void 0!==r?r:i.numberFormat)}function PT(e,t,n,i,r){const o=Jie(e,n,i,r),s=Jie(t,n,i,r);return`${z5(e,!1)} ? "null" : ${o} + " \u2013 " + ${s}`}const FT="min",L9e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Qie(e){return e in L9e}function Zie(e){return!!e&&!!e.encoding}function qc(e){return!(!e||"count"!==e.op&&!e.field)}function ere(e){return!!e&&Ce(e)}function hw(e){return"row"in e||"column"in e}function ij(e){return!!e&&"header"in e}function LT(e){return"facet"in e}var rj=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function tre(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),i?{bin:i}:{}),r?{aggregate:r}:{}),{field:t})}function oj(e){return"sort"in e}function nre({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Kt(e)&&void 0!==e.bandPosition)return e.bandPosition;if(Ue(e)){const{timeUnit:r,bin:o}=e;if(r&&!t)return $ie(n.type)?0:$g("timeUnitBandPosition",n,i);if(Li(o))return.5}}function ire({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:o,useVlSizeChannel:s}){var a,l,u;const c=xa(e),d=ii(s?"size":c,i,r,{vgChannel:c});if(void 0!==d)return d;if(Ue(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:$g("timeUnitBandSize",i,r)};if(Li(h)&&!wo(o))return{band:1}}return $ie(i.type)?o?wo(o)?(null===(a=r[i.type])||void 0===a?void 0:a.discreteBandSize)||{band:1}:null===(l=r[i.type])||void 0===l?void 0:l.continuousBandSize:null===(u=r[i.type])||void 0===u?void 0:u.discreteBandSize:void 0}function rre(e,t,n,i){return!!(Li(e.bin)||e.timeUnit&&Fl(e)&&"temporal"===e.type)&&void 0!==nre({fieldDef:e,fieldDef2:t,markDef:n,config:i})}function jT(e){return e&&"condition"in e}function BT(e){const t=e&&e.condition;return!!t&&!Ce(t)&&Ue(t)}function pw(e){const t=e&&e.condition;return!!t&&!Ce(t)&&Kt(t)}function Ue(e){return e&&(!!e.field||"count"===e.aggregate)}function $T(e){return e&&e.type}function Yc(e){return e&&"datum"in e}function Kc(e){return Fl(e)&&!HT(e)||VT(e)}function VT(e){return Yc(e)&&mi(e.datum)}function Kt(e){return Ue(e)||Yc(e)}function Fl(e){return e&&("field"in e||"count"===e.aggregate)&&"type"in e}function Pu(e){return e&&"value"in e&&"value"in e}function Wg(e){return e&&("scale"in e||"sort"in e)}function sj(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function ore(e){return e&&"legend"in e}function sre(e){return e&&("format"in e||"formatType"in e)}function V9e(e){return Ja(e,["legend","axis","header","scale"])}function We(e,t={}){var n,i,r;let o=e.field;const s=t.prefix;let a=t.suffix,l="";if(function z9e(e){return"count"===e.aggregate}(e))o=Rne("count");else{let u;if(!t.nofn)if(function H9e(e){return"op"in e}(e))u=e.op;else{const{bin:c,aggregate:d,timeUnit:f}=e;Li(c)?(u=qne(c),a=(null!==(n=t.binSuffix)&&void 0!==n?n:"")+(null!==(i=t.suffix)&&void 0!==i?i:"")):d?Xh(d)?(l=`["${o}"]`,o=`argmax_${d.argmax}`):hf(d)?(l=`["${o}"]`,o=`argmin_${d.argmin}`):u=String(d):f&&(u=function Q$e(e){const t=Js(e),{utc:n}=t,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["utc"]);return i.unit?(n?"utc":"")+Te(i).map(r=>Wi(`${"unit"===r?"":`_${r}_`}${i[r]}`)).join(""):(n?"utc":"")+"timeunit"+Te(i).map(r=>Wi(`_${r}_${i[r]}`)).join("")}(f),a=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(null!==(r=t.suffix)&&void 0!==r?r:""))}u&&(o=o?`${u}_${o}`:u)}return a&&(o=`${o}_${a}`),s&&(o=`${s}_${o}`),t.forAs?y5(o):t.expr?Mne(o,t.expr)+l:Il(o)+l}function HT(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ue(e)&&!!e.bin;case"temporal":return!1}throw new Error(hie(e.type))}const are=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function W9e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Xh(t))return`${r} for argmax(${t.argmax})`;if(hf(t))return`${r} for argmin(${t.argmin})`;const o=Js(i),s=t||(null==o?void 0:o.unit)||(null==o?void 0:o.maxbins)&&"timeunit"||Li(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}(e);default:return function G9e(e,t){var n;const{field:i,bin:r,timeUnit:o,aggregate:s}=e;if("count"===s)return t.countTitle;if(Li(r))return`${i} (binned)`;if(o){const a=null===(n=Js(o))||void 0===n?void 0:n.unit;if(a)return`${i} (${F5(a).join("-")})`}else if(s)return Xh(s)?`${i} for max ${s.argmax}`:hf(s)?`${i} for min ${s.argmin}`:`${iw(s)} of ${i}`;return i}(e,t)}};let lre=are;function ure(e){lre=e}function X_(e,t,{allowDisabling:n,includeDefault:i=!0}){var r,o;const s=null===(r=aj(e))||void 0===r?void 0:r.title;if(!Ue(e))return null!=s?s:e.title;const a=e,l=i?lj(a,t):void 0;return n?Br(s,a.title,l):null!==(o=null!=s?s:a.title)&&void 0!==o?o:l}function aj(e){return sj(e)&&e.axis?e.axis:ore(e)&&e.legend?e.legend:ij(e)&&e.header?e.header:void 0}function lj(e,t){return lre(e,t)}function UT(e){var t;if(sre(e)){const{format:n,formatType:i}=e;return{format:n,formatType:i}}{const n=null!==(t=aj(e))&&void 0!==t?t:{},{format:i,formatType:r}=n;return{format:i,formatType:r}}}function Xc(e){return Ue(e)?e:BT(e)?e.condition:void 0}function io(e){return Kt(e)?e:pw(e)?e.condition:void 0}function cre(e,t,n,i={}){return Qe(e)||mi(e)||th(e)?(ke(function Q6e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fi(n)}}.`}(t,Qe(e)?"string":mi(e)?"number":"boolean",e)),{value:e}):Kt(e)?zT(e,t,n,i):pw(e)?Object.assign(Object.assign({},e),{condition:zT(e.condition,t,n,i)}):e}function zT(e,t,n,i){if(sre(e)){const{formatType:o}=e,s=rj(e,["format","formatType"]);if(Gg(o)&&!n.customFormatTypes)return ke(fie(t)),zT(s,t,n,i)}else{const r=sj(e)?"axis":ore(e)?"legend":ij(e)?"header":null;if(r&&e[r]){const o=e[r],{formatType:a}=o,l=rj(o,["format","formatType"]);if(Gg(a)&&!n.customFormatTypes)return ke(fie(t)),zT(Object.assign(Object.assign({},e),{[r]:l}),t,n,i)}}return Ue(e)?uj(e,t,i):function K9e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=mi(n)?"quantitative":Qe(n)?"nominal":Vg(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}(e)}function uj(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:s}=e,a=Object.assign({},e);if(!n&&i&&!x5(i)&&!Xh(i)&&!hf(i)&&(ke(function e$e(e){return`Invalid aggregation operator "${e}".`}(i)),delete a.aggregate),r&&(a.timeUnit=Js(r)),s&&(a.field=`${s}`),Li(o)&&(a.bin=GT(o,t)),Xs(o)&&!$o(t)&&ke(function I$e(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),Fl(a)){const{type:l}=a,u=function r9e(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Ug:return"quantitative";case"t":case W_:return"temporal";case"o":case G5:return"ordinal";case"n":case W5:return"nominal";case q_:return"geojson"}}(l);l!==u&&(a.type=u),"quantitative"!==l&&Wne(i)&&(ke(function Z6e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(l,i)),a.type="quantitative")}else if(!Vne(t)){const l=function Y9e(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(oj(e)&&Ce(e.sort))return"ordinal";const{aggregate:i,bin:r,timeUnit:o}=e;if(o)return"temporal";if(r||i&&!Xh(i)&&!hf(i))return"quantitative";if(Wg(e)&&(null===(n=e.scale)||void 0===n?void 0:n.type))switch(AT[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(a,t);a.type=l}if(Fl(a)){const{compatible:l,warning:u}=function X9e(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case sf:case af:case pT:return HT(e)?J_:{compatible:!1,warning:o$e(t)};case nr:case bo:case Uh:case U_:case Da:case Hc:case Uc:case sw:case lw:case gT:case Lg:case mT:case _T:case Fg:case Mu:case Bc:case yT:return J_;case Vc:case Rl:case $c:case ku:return n!==Ug?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:J_;case df:case zh:case Gh:case Wh:case cf:case uf:case lf:case Nu:case jc:return"nominal"!==n||e.sort?J_:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case Sa:case qh:return HT(e)||function U9e(e){var t;return Wg(e)&&Y_(null===(t=e.scale)||void 0===t?void 0:t.type)}(e)?J_:{compatible:!1,warning:s$e(t)};case aw:return"nominal"!==e.type||"sort"in e?J_:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(a,t)||{};!1===l&&ke(u)}if(oj(a)&&Qe(a.sort)){const{sort:l}=a;if(Qie(l))return Object.assign(Object.assign({},a),{sort:{encoding:l}});const u=l.substr(1);if("-"===l.charAt(0)&&Qie(u))return Object.assign(Object.assign({},a),{sort:{encoding:u,order:"descending"}})}if(ij(a)){const{header:l}=a;if(l){const{orient:u}=l,c=rj(l,["orient"]);if(u)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return a}function GT(e,t){return th(e)?{maxbins:Yne(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign(Object.assign({},e),{maxbins:Yne(t)})}const J_={compatible:!0};function Q_(e){const{formatType:t}=UT(e);return"time"===t||!t&&function J9e(e){return e&&("temporal"===e.type||Ue(e)&&!!e.timeUnit)}(e)}function WT(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var o;const s=t&&(null===(o=Js(t))||void 0===o?void 0:o.unit);let l,a=s||"temporal"===n;return uw(e)?l=e.expr:_t(e)?l=e.signal:Vg(e)?(a=!0,l=dw(e)):(Qe(e)||mi(e))&&a&&(l=`datetime(${Fi(e)})`,function q$e(e){return!!Die[e]}(s)&&(mi(e)&&e<1e4||Qe(e)&&isNaN(Date.parse(e)))&&(l=dw({[s]:e}))),l?i&&a?`time(${l})`:l:r?void 0:Fi(e)}function dre(e,t){const{type:n}=e;return t.map(i=>{const r=WT(i,{timeUnit:Ue(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:i})}function gw(e,t){return Li(e.bin)?Kh(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const fre={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function mw(e){return e&&e.condition}const hre=["domain","grid","labels","ticks","title"],Q9e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},pre={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},gre=Object.assign(Object.assign({},pre),{style:1,labelExpr:1,encoding:1});function mre(e){return!!gre[e]}Te(gre);const _re=Te({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function mf(e){return"mark"in e}class qT{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return!!mf(t)&&function N9e(e){return Ru(e)?e.type:e}(t.mark)===this.name}}function qg(e,t){const n=e&&e[t];return!!n&&(Ce(n)?Rg(n,i=>!!i.field):Ue(n)||BT(n))}function yre(e,t){const n=e&&e[t];return!!n&&(Ce(n)?Rg(n,i=>!!i.field):Ue(n)||Yc(n)||pw(n))}function cj(e,t){if($o(t)){const n=e[t];if((Ue(n)||Yc(n))&&Oie(n.type))return yre(e,Hne(t))}return!1}function dj(e){return Rg(s6e,t=>{if(qg(e,t)){const n=e[t];if(Ce(n))return Rg(n,i=>!!i.aggregate);{const i=Xc(n);return i&&!!i.aggregate}}return!1})}function vre(e,t){const n=[],i=[],r=[],o=[],s={};return fj(e,(a,l)=>{if(Ue(a)){const{field:u,aggregate:c,bin:d,timeUnit:f}=a,h=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(a,["field","aggregate","bin","timeUnit"]);if(c||f||d){const p=aj(a),m=null==p?void 0:p.title;let _=We(a,{forAs:!0});const b=Object.assign(Object.assign(Object.assign({},m?[]:{title:X_(a,t,{allowDisabling:!0})}),h),{field:_});if(c){let v;if(Xh(c)?(v="argmax",_=We({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${_}.${u}`):hf(c)?(v="argmin",_=We({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${_}.${u}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(v=c),v){const D={op:v,as:_};u&&(D.field=u),o.push(D)}}else if(n.push(_),Fl(a)&&Li(d))i.push({bin:d,field:u,as:_}),n.push(We(a,{binSuffix:"end"})),gw(a,l)&&n.push(We(a,{binSuffix:"range"})),$o(l)&&(s[`${l}2`]={field:`${_}_end`}),b.bin="binned",Vne(l)||(b.type=Ug);else if(f){r.push({timeUnit:f,field:u,as:_});const v=Fl(a)&&a.type!==W_&&"time";v&&(l===sw||l===Lg?b.formatType=v:function p6e(e){return!!wT[e]}(l)?b.legend=Object.assign({formatType:v},b.legend):$o(l)&&(b.axis=Object.assign({formatType:v},b.axis)))}s[l]=b}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:n,encoding:s}}function e7e(e,t,n){const i=function m6e(e,t){return function y6e(e){switch(e){case Da:case Hc:case Uc:case yT:case lw:case gT:case Lg:case mT:case aw:case df:case zh:case Gh:case Wh:case pT:case sf:case af:return D5;case nr:case bo:case Uh:case U_:case $c:case Vc:return _6e;case Nu:case jc:case ku:case Rl:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case cf:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case qh:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Sa:return{point:"always",geoshape:"always"};case sw:return{text:"always"};case Fg:return{point:"always",square:"always",text:"always"};case _T:return{image:"always"};case Mu:case Bc:return{text:"always",arc:"always"};case uf:case lf:return{arc:"always"}}}(e)[t]}(t,n);if(!i)return!1;if("binned"===i){const r=e[t===Nu?nr:bo];return!!(Ue(r)&&Ue(e[t])&&Xs(r.bin))}return!0}function YT(e,t){const n={};for(const i of Te(e)){const r=cre(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function fj(e,t,n){if(e)for(const i of Te(e)){const r=e[i];if(Ce(r))for(const o of r)t.call(n,o,i);else t.call(n,r,i)}}function bre(e,t){return Te(t).reduce((n,i)=>{switch(i){case nr:case bo:case mT:case yT:case _T:case Nu:case jc:case Uh:case U_:case Mu:case uf:case Bc:case lf:case $c:case Vc:case ku:case Rl:case sw:case Sa:case Fg:case Lg:return n;case aw:if("line"===e||"trail"===e)return n;case lw:case gT:{const r=t[i];if(Ce(r)||Ue(r))for(const o of Ze(r))o.aggregate||n.push(We(o,{}));return n}case cf:if("trail"===e)return n;case Da:case Hc:case Uc:case df:case zh:case Gh:case qh:case Wh:{const r=Xc(t[i]);return r&&!r.aggregate&&n.push(We(r,{})),n}}},[])}var wre=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function hj(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=i?` of ${pj(t)}`:"";return{field:s+t.field,type:t.type,title:_t(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=function n7e(e){const t=[];for(const n of Te(e))if(qg(e,n)){const r=Ze(e[n]);for(const o of r)Ue(o)?t.push(o):BT(o)&&t.push(o.condition)}return t}(n).map(V9e);return{tooltip:[...r,...Lc(o,Nn)]}}function pj(e){const{title:t,field:n}=e;return Br(t,n)}function gj(e,t,n,i,r){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c,extraEncoding:d={}})=>{const f=pj(n);return Ere(e,a,r,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${u}_${n.field}`,type:n.type},void 0!==f?{title:f}:{}),void 0!==o?{scale:o}:{}),void 0!==s?{axis:s}:{})},Qe(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{}),i),d)})}}function Ere(e,t,n,i){const{clip:r,color:o,opacity:s}=e,a=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),r?{clip:r}:{}),o?{color:o}:{}),s?{opacity:s}:{}),Ru(i.mark)?i.mark:{type:i.mark}),{style:`${a}-${t}`}),th(e[t])?{}:e[t])})]:[]}function Cre(e,t,n){const{encoding:i}=e,r="vertical"===t?"y":"x",s=i[`${r}2`],a=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:KT(i[r],n),continuousAxisChannelDef2:KT(s,n),continuousAxisChannelDefError:KT(a,n),continuousAxisChannelDefError2:KT(l,n),continuousAxis:r}}function KT(e,t){if(null==e?void 0:e.aggregate){const{aggregate:n}=e,i=wre(e,["aggregate"]);return n!==t&&ke(function k$e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),i}return e}function Dre(e,t){const{mark:n,encoding:i}=e,{x:r,y:o}=i;if(Ru(n)&&n.orient)return n.orient;if(Kc(r)){if(Kc(o)){const s=Ue(r)&&r.aggregate,a=Ue(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Q_(o)&&!Q_(r)?"horizontal":"vertical"}return"horizontal"}if(Kc(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}var XT=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const JT="boxplot",s7e=new qT(JT,xre);function Sre(e){return mi(e)?"tukey":e}function xre(e,{config:t}){var n,i;e=Object.assign(Object.assign({},e),{encoding:YT(e.encoding,t)});const{mark:r,params:s}=e,l=XT(e,["mark","encoding","params","projection"]),u=Ru(r)?r:{type:r};s&&ke(uie("boxplot"));const c=null!==(n=u.extent)&&void 0!==n?n:t.boxplot.extent,d=ii("size",u,t),f=Sre(c),{bins:h,timeUnits:p,transform:m,continuousAxisChannelDef:_,continuousAxis:b,groupby:v,aggregate:D,encodingWithoutContinuousAxis:A,ticksOrient:I,boxOrient:L,customTooltipWithoutAggregatedField:k}=function a7e(e,t,n){const i=Dre(e,JT),{continuousAxisChannelDef:r,continuousAxis:o}=Cre(e,i,JT),s=r.field,a=Sre(t),l=[...Tre(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:("min-max"===a?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===a?"upper_whisker_":"max_")+s}],u="min-max"===a||"tukey"===a?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],h=XT(e.encoding,["symbol"==typeof o?o:o+""]),{customTooltipWithoutAggregatedField:p,filteredEncoding:m}=function r7e(e){const{tooltip:t}=e,n=wre(e,["tooltip"]);if(!t)return{filteredEncoding:n};let i,r;if(Ce(t)){for(const o of t)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return Ce(r)&&1===r.length&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}(h),{bins:_,timeUnits:b,aggregate:v,groupby:D,encoding:A}=vre(m,n),I="vertical"===i?"horizontal":"vertical",L=i;return{bins:_,timeUnits:b,transform:[..._,...b,{aggregate:[...v,...l],groupby:D},...u],groupby:D,aggregate:v,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:A,ticksOrient:I,boxOrient:L,customTooltipWithoutAggregatedField:p}}(e,c,t),{color:B,size:q}=A,W=XT(A,["color","size"]),X=rd=>gj(u,b,_,rd,t.boxplot),oe=X(W),ae=X(A),Se=X(Object.assign(Object.assign({},W),q?{size:q}:{})),ie=hj([{fieldPrefix:"min-max"===f?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===f?"lower_whisker_":"min_",titlePrefix:"Min"}],_,A),te={type:"tick",color:"black",opacity:1,orient:I,invalid:null,aria:!1},de="min-max"===f?ie:hj([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],_,A),pe=[...oe({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:de}),...oe({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:de}),...oe({partName:"ticks",mark:te,positionPrefix:"lower_whisker",extraEncoding:de}),...oe({partName:"ticks",mark:te,positionPrefix:"upper_whisker",extraEncoding:de})],Re=[..."tukey"!==f?pe:[],...ae({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:L,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:ie}),...Se({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},it(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),d?{size:d}:{}),{orient:I,aria:!1}),positionPrefix:"mid_box",extraEncoding:ie})];if("min-max"===f)return Object.assign(Object.assign({},l),{transform:(null!==(i=l.transform)&&void 0!==i?i:[]).concat(m),layer:Re});const rt=`datum["lower_box_${_.field}"]`,Xt=`datum["upper_box_${_.field}"]`,$t=`(${Xt} - ${rt})`,Zn=`${rt} - ${c} * ${$t}`,kt=`${Xt} + ${c} * ${$t}`,qi=`datum["${_.field}"]`,Ho={joinaggregate:Tre(_.field),groupby:v},Oi={transform:[{filter:`(${Zn} <= ${qi}) && (${qi} <= ${kt})`},{aggregate:[{op:"min",field:_.field,as:`lower_whisker_${_.field}`},{op:"max",field:_.field,as:`upper_whisker_${_.field}`},{op:"min",field:`lower_box_${_.field}`,as:`lower_box_${_.field}`},{op:"max",field:`upper_box_${_.field}`,as:`upper_box_${_.field}`},...D],groupby:v}],layer:pe},qe=XT(W,["tooltip"]),{scale:Et,axis:Zt}=_,Ie=pj(_),Hr=Ja(Zt,["title"]),kn=Ere(u,"outliers",t.boxplot,{transform:[{filter:`(${qi} < ${Zn}) || (${qi} > ${kt})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[b]:Object.assign(Object.assign(Object.assign({field:_.field,type:_.type},void 0!==Ie?{title:Ie}:{}),void 0!==Et?{scale:Et}:{}),yi(Hr)?{}:{axis:Hr})},qe),B?{color:B}:{}),k?{tooltip:k}:{})})[0];let xr;const mr=[...h,...p,Ho];return kn?xr={transform:mr,layer:[kn,Oi]}:(xr=Oi,xr.transform.unshift(...mr)),Object.assign(Object.assign({},l),{layer:[xr,{transform:m,layer:Re}]})}function Tre(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}var Are=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const mj="errorbar",u7e=new qT(mj,Ore);function Ore(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:YT(e.encoding,t)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=Nre(e,mj,t);delete o.size;const c=gj(a,r,i,o,t.errorbar),d=a.thickness,f=a.size,h=Object.assign(Object.assign({type:"tick",orient:s,aria:!1},void 0!==d?{thickness:d}:{}),void 0!==f?{size:f}:{}),p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==d?{size:d}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function Nre(e,t,n){var i;const{mark:r,encoding:o,params:s}=e,l=Are(e,["mark","encoding","params","projection"]),u=Ru(r)?r:{type:r};s&&ke(uie(t));const{orient:c,inputType:d}=function c7e(e,t){const{encoding:n}=e;if(function d7e(e){return(Kt(e.x)||Kt(e.y))&&!Kt(e.x2)&&!Kt(e.y2)&&!Kt(e.xError)&&!Kt(e.xError2)&&!Kt(e.yError)&&!Kt(e.yError2)}(n))return{orient:Dre(e,t),inputType:"raw"};const i=function f7e(e){return Kt(e.x2)||Kt(e.y2)}(n),r=function h7e(e){return Kt(e.xError)||Kt(e.xError2)||Kt(e.yError)||Kt(e.yError2)}(n),o=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Kt(a)&&Kt(l))throw new Error(`${t} cannot have both x2 and y2`);if(Kt(a)){if(Kc(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(Kt(l)){if(Kc(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const a=n.xError,u=n.yError,c=n.yError2;if(Kt(n.xError2)&&!Kt(a))throw new Error(`${t} cannot have xError2 without xError`);if(Kt(c)&&!Kt(u))throw new Error(`${t} cannot have yError2 without yError`);if(Kt(a)&&Kt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Kt(a)){if(Kc(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(Kt(u)){if(Kc(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:h,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:m,continuousAxis:_}=Cre(e,c,t),{errorBarSpecificAggregate:b,postAggregateCalculates:v,tooltipSummary:D,tooltipTitleWithFieldName:A}=function p7e(e,t,n,i,r,o,s,a){let l=[],u=[];const c=t.field;let d,f=!1;if("raw"===o){const h=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":a.errorbar.center,p=e.extent?e.extent:"mean"===h?"stderr":"iqr";if("median"===h!=("iqr"===p)&&ke(function M$e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(h,p,s)),"stderr"===p||"stdev"===p)l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:iw(h)},{fieldPrefix:"upper_",titlePrefix:Mre(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Mre(h,p,"-")}],f=!0;else{let m,_,b;"ci"===p?(m="mean",_="ci0",b="ci1"):(m="median",_="q1",b="q3"),l=[{op:_,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:X_({field:c,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:X_({field:c,aggregate:_,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:X_({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ke(function N$e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}(e.center,e.extent)),"aggregated-upper-lower"===o?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],u.push(r?{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}:{calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Pg(Pg(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}(u,f,h,p,m,d,t,n),B="x"===_?"x2":"y2",W="x"===_?"xError":"yError",oe="x"===_?"xError2":"yError2",Se=Are(o,["symbol"==typeof _?_:_+"","symbol"==typeof B?B:B+"","symbol"==typeof W?W:W+"","symbol"==typeof oe?oe:oe+""]),{bins:ie,timeUnits:te,aggregate:de,groupby:pe,encoding:Re}=vre(Se,n),rt=[...de,...b],Xt="raw"!==d?[]:pe,$t=hj(D,f,Re,A);return{transform:[...null!==(i=l.transform)&&void 0!==i?i:[],...ie,...te,...0===rt.length?[]:[{aggregate:rt,groupby:Xt}],...v],groupby:Xt,continuousAxisChannelDef:f,continuousAxis:_,encodingWithoutContinuousAxis:Re,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:$t}}function Mre(e,t,n){return`${iw(e)} ${n} ${t}`}const _j="errorband",m7e=new qT(_j,kre);function kre(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:YT(e.encoding,t)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=Nre(e,_j,t),u=s,c=gj(u,r,i,o,t.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return d?(f=Object.assign(Object.assign(Object.assign({},f),p),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign(Object.assign({},h),p),{aria:!1})):u.interpolate?ke(yie("interpolate")):u.tension&&ke(yie("tension")),Object.assign(Object.assign({},a),{transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]})}const yj={};function vj(e,t,n){const i=new qT(e,t);yj[e]={normalizer:i,parts:n}}vj(JT,xre,["box","median","outliers","rule","ticks"]),vj(mj,Ore,["ticks","rule"]),vj(_j,kre,["band","borders"]);const y7e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Ire={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Rre={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},v7e=Te(Ire),b7e=Te(Rre),Pre=Te({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Fre=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Lre={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},_w=(Te(Lre),"_vgsid_"),E7e={point:{on:"click",fields:[_w],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function bj(e){return!(!e||"legend"!==e&&!e.legend)}function wj(e){return bj(e)&&it(e)}function Ej(e){return!!e.select}var C7e=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function jre(e){const t=[];for(const n of e||[]){if(Ej(n))continue;const{expr:i,bind:r}=n,o=C7e(n,["expr","bind"]);if(r&&i){const s=Object.assign(Object.assign({},o),{bind:r,init:i});t.push(s)}else{const s=Object.assign(Object.assign(Object.assign({},o),i?{update:i}:{}),r?{bind:r}:{});t.push(s)}}return t}function Cj(e){return"concat"in e}function QT(e){return"vconcat"in e}function Dj(e){return"hconcat"in e}function Bre({step:e,offsetIsDiscrete:t}){var n;return t?null!==(n=e.for)&&void 0!==n?n:"offset":"position"}function Jc(e){return it(e)&&void 0!==e.step}function $re(e){return e.view||e.width||e.height}const S7e=Te({align:1,bounds:1,center:1,columns:1,spacing:1});function Sj(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e["width"===t?"continuousWidth":"continuousHeight"]}function ZT(e,t){const n=eA(e,t);return Jc(n)?n.step:Hre}function eA(e,t){var n;return Br(null!==(n=e[t])&&void 0!==n?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Hre=20,O7e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Hre},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:E7e,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},_f=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Ure={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},zre={blue:_f[0],orange:_f[1],red:_f[2],teal:_f[3],green:_f[4],yellow:_f[5],purple:_f[6],pink:_f[7],brown:_f[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Gre(e){const t=Te(e||{}),n={};for(const i of t){const r=e[i];n[i]=mw(r)?Xne(r):Qa(r)}return n}const R7e=[...Uie,..._re,...Pre,"background","padding","legend","lineBreak","scale","style","title","view"];function Wre(e={}){const{color:t,font:n,fontSize:i,selection:r}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["color","font","fontSize","selection"]),s=R0({},rn(O7e),n?function k7e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function N7e(e={}){return{signals:[{name:"color",value:it(e)?Object.assign(Object.assign({},zre),e):zre}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},i?function M7e(e){return{signals:[{name:"fontSize",value:it(e)?Object.assign(Object.assign({},Ure),e):Ure}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(i):{},o||{});r&&P0(s,"selection",r,!0);const a=Ja(s,R7e);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Qa(s[l]));for(const l of Uie)s[l]&&(a[l]=Ta(s[l]));for(const l of _re)s[l]&&(a[l]=Gre(s[l]));for(const l of Pre)s[l]&&(a[l]=Ta(s[l]));return s.legend&&(a.legend=Ta(s.legend)),s.scale&&(a.scale=Ta(s.scale)),s.style&&(a.style=function I7e(e){const t=Te(e),n={};for(const i of t)n[i]=Gre(e[i]);return n}(s.style)),s.title&&(a.title=Ta(s.title)),s.view&&(a.view=Ta(s.view)),a}const P7e=new Set(["view",...Vie]),F7e=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],L7e=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function $7e(e,t,n,i){"view"===t&&(n="cell");const o=Object.assign(Object.assign({},i?e[t][i]:e[t]),e.style[null!=n?n:t]);yi(o)||(e.style[null!=n?n:t]=o),i||delete e[t]}function tA(e){return"layer"in e}class xj{map(t,n){return LT(t)?this.mapFacet(t,n):function V7e(e){return"repeat"in e}(t)?this.mapRepeat(t,n):Dj(t)?this.mapHConcat(t,n):QT(t)?this.mapVConcat(t,n):Cj(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(tA(t))return this.mapLayer(t,n);if(mf(t))return this.mapUnit(t,n);throw new Error(O5(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(i=>this.map(i,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(i=>this.map(i,n))})}mapConcat(t,n){const{concat:i}=t,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["concat"]);return Object.assign(Object.assign({},r),{concat:i.map(o=>this.map(o,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const z7e={zero:1,center:1,normalize:1},W7e=new Set([Lie,NT,OT,IT,kT,X5,J5,MT,jie,K5]),q7e=new Set([NT,OT,Lie]);function Z_(e){return Ue(e)&&"quantitative"===$T(e)&&!e.bin}function qre(e,t){var n,i;const r="x"===t?"y":"radius",o=e[t],s=e[r];if(Ue(o)&&Ue(s))if(Z_(o)&&Z_(s)){if(o.stack)return t;if(s.stack)return r;const a=Ue(o)&&!!o.aggregate;if(a!==(Ue(s)&&!!s.aggregate))return a?t:r;{const u=null===(n=o.scale)||void 0===n?void 0:n.type,c=null===(i=s.scale)||void 0===i?void 0:i.type;if(u&&"linear"!==u)return r;if(c&&"linear"!==c)return t}}else{if(Z_(o))return t;if(Z_(s))return r}else{if(Z_(o))return t;if(Z_(s))return r}}function Yre(e,t,n={}){var i,r;const o=Ru(e)?e.type:e;if(!W7e.has(o))return null;const s=qre(t,"x")||qre(t,"theta");if(!s)return null;const a=t[s],l=Ue(a)?We(a,{}):void 0,u=function Y7e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(s),c=[],d=new Set;if(t[u]){const p=t[u],m=Ue(p)?We(p,{}):void 0;m&&m!==l&&(c.push(u),d.add(m));const _="x"===u?"xOffset":"yOffset",b=t[_],v=Ue(b)?We(b,{}):void 0;v&&v!==l&&(c.push(_),d.add(v))}const f=d6e.reduce((p,m)=>{if("tooltip"!==m&&qg(t,m)){const _=t[m];for(const b of Ze(_)){const v=Xc(b);if(v.aggregate)continue;const D=We(v,{});(!D||!d.has(D))&&p.push({channel:m,fieldDef:v})}}return p},[]);let h;if(void 0!==a.stack?h=th(a.stack)?a.stack?"zero":null:a.stack:q7e.has(o)&&(h="zero"),!h||!function G7e(e){return e in z7e}(h)||dj(t)&&0===f.length)return null;if((null===(i=null==a?void 0:a.scale)||void 0===i?void 0:i.type)&&"linear"!==(null===(r=null==a?void 0:a.scale)||void 0===r?void 0:r.type)){if(n.disallowNonLinearStack)return null;ke(function T$e(e){return`Cannot stack non-linear scale (${e}).`}(a.scale.type))}return Kt(t[ff(s)])?(void 0!==a.stack&&ke(function x$e(e){return`Cannot stack "${e}" if there is already "${e}2".`}(s)),null):(Ue(a)&&a.aggregate&&!C6e.has(a.aggregate)&&ke(function A$e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}(a.aggregate)),{groupbyChannels:c,groupbyFields:d,fieldChannel:s,impute:null!==a.impute&&ep(o),stackBy:f,offset:h})}var Kre=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function K7e(e){const i=Kre(e,["point","line"]);return Te(i).length>1?i:i.type}function X7e(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:Ja(e[t],["point","line"])}));return e}function Tj(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?it(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?it(t.point)?t.point:{}:void 0}function Xre(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class J7e{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(mf(t)){const{mark:i,encoding:r}=t,o=Ru(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!Tj(o,n[o.type],r);case"area":return!!Tj(o,n[o.type],r)||!!Xre(o,n[o.type])}}return!1}run(t,n,i){const{config:r}=n,{params:o,projection:s,mark:a,encoding:l}=t,u=Kre(t,["params","projection","mark","encoding"]),c=YT(l,r),d=Ru(a)?a:{type:a},f=Tj(d,r[d.type],c),h="area"===d.type&&Xre(d,r[d.type]),p=[Object.assign(Object.assign({},o?{params:o}:{}),{mark:K7e(Object.assign(Object.assign({},"area"===d.type&&void 0===d.opacity&&void 0===d.fillOpacity?{opacity:.7}:{}),d)),encoding:Ja(c,["shape"])})],m=Yre(d,c);let _=c;if(m){const{fieldChannel:b,offset:v}=m;_=Object.assign(Object.assign({},c),{[b]:Object.assign(Object.assign({},c[b]),v?{stack:v}:{})})}return h&&p.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"line"},V_(d,["clip","interpolate","tension","tooltip"])),h),encoding:_})),f&&p.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},V_(d,["clip","tooltip"])),f),encoding:_})),i(Object.assign(Object.assign({},u),{layer:p}),Object.assign(Object.assign({},n),{config:X7e(r)}))}}function Z7e(e,t){return t?hw(e)?eoe(e,t):Jre(e,t):e}function Aj(e,t){return t?eoe(e,t):e}function Oj(e,t,n){const i=t[e];return function B9e(e){return e&&!Qe(e)&&"repeat"in e}(i)?i.repeat in n?Object.assign(Object.assign({},t),{[e]:n[i.repeat]}):void ke(function H6e(e){return`Unknown repeated value "${e}".`}(i.repeat)):t}function Jre(e,t){if(void 0!==(e=Oj("field",e,t))){if(null===e)return null;if(oj(e)&&qc(e.sort)){const n=Oj("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function Qre(e,t){if(Ue(e))return Jre(e,t);{const n=Oj("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Zre(e,t){if(!Kt(e)){if(pw(e)){const n=Qre(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["condition"])}return e}{const n=Qre(e,t);if(n)return n;if(jT(e))return{condition:e.condition}}}function eoe(e,t){const n={};for(const i in e)if(gt(e,i)){const r=e[i];if(Ce(r))n[i]=r.map(o=>Zre(o,t)).filter(o=>o);else{const o=Zre(r,t);void 0!==o&&(n[i]=o)}}return n}class eVe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(mf(t)){const{encoding:n,mark:i}=t;if("line"===i||Ru(i)&&"line"===i.type)for(const r of l6e){const s=n[jg(r)];if(n[r]&&(Ue(s)&&!Xs(s.bin)||Yc(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:o}=t;return ke(function u$e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!r.x2,!!r.y2)),i(Object.assign(Object.assign({},t),{mark:it(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),n)}}var tp=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function toe({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...Te(e),...Te(t)]);for(const o of r){const s=t[o],a=e[o];if(Kt(s)){const l=Object.assign(Object.assign({},a),s);i[o]=l}else pw(s)?i[o]=Object.assign(Object.assign({},s),{condition:Object.assign(Object.assign({},a),s.condition)}):s||null===s?i[o]=s:(n||Pu(a)||_t(a)||Kt(a)||Ce(a))&&(i[o]=a)}}else i=t;return!i||yi(i)?void 0:i}function noe(e){const{parentProjection:t,projection:n}=e;return t&&n&&ke(function Y6e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fi(t)} is overridden by a child projection ${Fi(n)}.`}({parentProjection:t,projection:n})),null!=n?n:t}function Nj(e){return"filter"in e}function nVe(e){return void 0!==(null==e?void 0:e.stop)}function ioe(e){return"lookup"in e}function oVe(e){return"pivot"in e}function sVe(e){return"density"in e}function aVe(e){return"quantile"in e}function lVe(e){return"regression"in e}function uVe(e){return"loess"in e}function cVe(e){return"sample"in e}function dVe(e){return"window"in e}function fVe(e){return"joinaggregate"in e}function hVe(e){return"flatten"in e}function pVe(e){return"calculate"in e}function roe(e){return"bin"in e}function gVe(e){return"impute"in e}function mVe(e){return"timeUnit"in e}function _Ve(e){return"aggregate"in e}function yVe(e){return"stack"in e}function vVe(e){return"fold"in e}var np=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function ooe(e,t){const{transform:n}=e,i=np(e,["transform"]);if(n){const r=n.map(o=>{if(Nj(o))return{filter:Mj(o,t)};if(roe(o)&&Bg(o.bin))return Object.assign(Object.assign({},o),{bin:aoe(o.bin)});if(ioe(o)){const s=o.from,{selection:a}=s,l=np(s,["selection"]);return a?Object.assign(Object.assign({},o),{from:Object.assign({param:a},l)}):o}return o});return Object.assign(Object.assign({},i),{transform:r})}return e}function soe(e,t){var n,i;const r=rn(e);if(Ue(r)&&Bg(r.bin)&&(r.bin=aoe(r.bin)),Wg(r)&&(null===(i=null===(n=r.scale)||void 0===n?void 0:n.domain)||void 0===i?void 0:i.selection)){const o=r.scale.domain,{selection:s}=o,a=np(o,["selection"]);r.scale.domain=Object.assign(Object.assign({},a),s?{param:s}:{})}if(jT(r))if(Ce(r.condition))r.condition=r.condition.map(o=>{const{param:a}=o,u=np(o,["selection","param","test"]);return a?o:Object.assign(Object.assign({},u),{test:Mj(o,t)})});else{const o=soe(r.condition,t),{param:a}=o,u=np(o,["selection","param","test"]);r.condition=a?r.condition:Object.assign(Object.assign({},u),{test:Mj(r.condition,t)})}return r}function aoe(e){const t=e.extent;if(null==t?void 0:t.selection){const{selection:n}=t,i=np(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},i),{param:n})})}return e}function Mj(e,t){const n=i=>$_(i,r=>{var o,s,a;const u={param:r,empty:null===(o=t.emptySelections[r])||void 0===o||o};return null!==(s=(a=t.selectionPredicates)[r])&&void 0!==s||(a[r]=[]),t.selectionPredicates[r].push(u),u});return e.selection?n(e.selection):$_(e.test||e.filter,i=>i.selection?n(i.selection):i)}class kj extends xj{map(t,n){var i;const r=null!==(i=n.selections)&&void 0!==i?i:[];if(t.params&&!mf(t)){const o=[];for(const s of t.params)Ej(s)?r.push(s):o.push(s);t.params=o}return n.selections=r,super.map(t,loe(t,n))}mapUnit(t,n){var i;const r=n.selections;if(!r||!r.length)return t;const o=(null!==(i=n.path)&&void 0!==i?i:[]).concat(t.name),s=[];for(const a of r)if(a.views&&a.views.length)for(const l of a.views)(Qe(l)&&(l===t.name||o.indexOf(l)>=0)||Ce(l)&&l.map(u=>o.indexOf(u)).every((u,c,d)=>-1!==u&&(0===c||u>d[c-1])))&&s.push(a);else s.push(a);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=kj.prototype[e];kj.prototype[e]=function(n,i){return t.call(this,n,loe(n,i))}}function loe(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:(null!==(n=t.path)&&void 0!==n?n:[]).concat(e.name)}):t}function uoe(e,t){void 0===t&&(t=Wre(e.config));const n=function SVe(e,t={}){const n={config:t};return DVe.map(EVe.map(CVe.map(e,n),n),n)}(e,t),{width:i,height:r}=e,o=function xVe(e,t,n){let{width:i,height:r}=t;const o=mf(e)||tA(e),s={};o?"container"==i&&"container"==r?(s.type="fit",s.contains="padding"):"container"==i?(s.type="fit-x",s.contains="padding"):"container"==r&&(s.type="fit-y",s.contains="padding"):("container"==i&&(ke(oie("width")),i=void 0),"container"==r&&(ke(oie("height")),r=void 0));const a=Object.assign(Object.assign(Object.assign({type:"pad"},s),n?coe(n.autosize):{}),coe(e.autosize));if("fit"===a.type&&!o&&(ke('Autosize "fit" only works for single views and layered views.'),a.type="pad"),"container"==i&&!("fit"==a.type||"fit-x"==a.type)&&ke(sie("width")),"container"==r&&!("fit"==a.type||"fit-y"==a.type)&&ke(sie("height")),!Fc(a,{type:"pad"}))return a}(n,{width:i,height:r,autosize:e.autosize},t);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const EVe=new class tVe extends xj{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[s7e,u7e,m7e,new J7e,new eVe]}map(t,n){if(mf(t)){const i=qg(t.encoding,sf),r=qg(t.encoding,af),o=qg(t.encoding,pT);if(i||r||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,o=Aj(t.encoding,n.repeater),s=Object.assign(Object.assign({},t),o?{encoding:o}:{});if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return function H7e(e){return!Ce(e.repeat)&&e.repeat.layer}(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r}=t,o=tp(t,["repeat","spec"]),{row:s,column:a,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},s?{row:s}:{}),a?{column:a}:{}),spec:{repeat:{layer:l},spec:r}}),n):Object.assign(Object.assign({},o),{layer:l.map(d=>{const f=Object.assign(Object.assign({},u),{layer:d}),h=`${(r.name||"")+c}child__layer_${Wi(d)}`,p=this.mapLayerOrUnit(r,Object.assign(Object.assign({},n),{repeater:f,repeaterPrefix:h}));return p.name=h,p})})}mapNonLayerRepeat(t,n){var i;const{repeat:r,spec:o,data:s}=t,a=tp(t,["repeat","spec","data"]);!Ce(r)&&t.columns&&(t=Ja(t,["columns"]),ke(cie("repeat")));const l=[],{repeater:u={},repeaterPrefix:c=""}=n,d=!Ce(r)&&r.row||[u?u.row:null],f=!Ce(r)&&r.column||[u?u.column:null],h=Ce(r)&&r||[u?u.repeat:null];for(const m of h)for(const _ of d)for(const b of f){const v={repeat:m,row:_,column:b,layer:u.layer},D=(o.name||"")+c+"child__"+(Ce(r)?`${Wi(m)}`:(r.row?`row_${Wi(_)}`:"")+(r.column?`column_${Wi(b)}`:"")),A=this.map(o,Object.assign(Object.assign({},n),{repeater:v,repeaterPrefix:D}));A.name=D,l.push(Ja(A,["data"]))}const p=Ce(r)?t.columns:r.column?r.column.length:1;return Object.assign(Object.assign({data:null!==(i=o.data)&&void 0!==i?i:s,align:"all"},a),{columns:p,concat:l})}mapFacet(t,n){const{facet:i}=t;return hw(i)&&t.columns&&(t=Ja(t,["columns"]),ke(cie("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=noe({parentProjection:s,projection:r}),u=toe({parentEncoding:o,encoding:Aj(i,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),l?{projection:l}:{}),u?{encoding:u}:{}),{config:a})}mapFacetedUnit(t,n){const i=t.encoding,{row:r,column:o,facet:s}=i,a=tp(i,["row","column","facet"]),{mark:l,width:u,projection:c,height:d,view:f,params:h}=t,m=tp(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:_,layout:b}=this.getFacetMappingAndLayout({row:r,column:o,facet:s},n),v=Aj(a,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},m),b),{facet:_,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),d?{height:d}:{}),f?{view:f}:{}),c?{projection:c}:{}),{mark:l,encoding:v}),h?{params:h}:{})}),n)}getFacetMappingAndLayout(t,n){var i;const{row:r,column:o,facet:s}=t;if(r||o){s&&ke(function a$e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}([...r?[sf]:[],...o?[af]:[]]));const a={},l={};for(const u of[sf,af]){const c=t[u];if(c){const m=tp(c,["align","center","spacing","columns"]);a[u]=m;for(const _ of["align","center","spacing"])void 0!==c[_]&&(null!==(i=l[_])&&void 0!==i||(l[_]={}),l[_][u]=c[_])}}return{facetMapping:a,layout:l}}{const{align:a,center:l,spacing:u,columns:c}=s;return{facetMapping:Z7e(tp(s,["align","center","spacing","columns"]),n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},a?{align:a}:{}),l?{center:l}:{}),u?{spacing:u}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:i,parentProjection:r}=n,o=tp(n,["parentEncoding","parentProjection"]);const{encoding:s,projection:a}=t,l=tp(t,["encoding","projection"]),u=Object.assign(Object.assign({},o),{parentEncoding:toe({parentEncoding:i,encoding:s,layer:!0}),parentProjection:noe({parentProjection:r,projection:a})});return super.mapLayer(l,u)}},CVe=new class wVe extends xj{map(t,n){var i,r;return null!==(i=n.emptySelections)&&void 0!==i||(n.emptySelections={}),null!==(r=n.selectionPredicates)&&void 0!==r||(n.selectionPredicates={}),t=ooe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if((t=ooe(t,n)).encoding){const i={};for(const[r,o]of Hh(t.encoding))i[r]=soe(o,n);t=Object.assign(Object.assign({},t),{encoding:i})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const i=t,{selection:r}=i,o=np(i,["selection"]);return r?Object.assign(Object.assign({},o),{params:Hh(r).map(([s,a])=>{var l;const u=a,{init:c,bind:d,empty:f}=u,h=np(u,["init","bind","empty"]);"single"===h.type?(h.type="point",h.toggle=!1):"multi"===h.type&&(h.type="point"),n.emptySelections[s]="none"!==f;for(const p of ds(null!==(l=n.selectionPredicates[s])&&void 0!==l?l:{}))p.empty="none"!==f;return{name:s,value:c,select:h,bind:d}})}):t}},DVe=new kj;function coe(e){return Qe(e)?{type:e}:null!=e?e:{}}const OVe=["background","padding"];function doe(e,t){const n={};for(const i of OVe)e&&void 0!==e[i]&&(n[i]=Qa(e[i]));return t&&(n.params=e.params),n}class yf{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new yf(rn(this.explicit),rn(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return Br(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){void 0!==n&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){void 0!==n[t]?this.set(t,n[t],!0):void 0!==i[t]&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){void 0!==n[t]&&this.set(t,n[t],!0)}copyAll(t){for(const n of Te(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Qc(e){return{explicit:!0,value:e}}function el(e){return{explicit:!1,value:e}}function foe(e){return(t,n,i,r)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:nA(t,n,i,r)}}function nA(e,t,n,i){return e.explicit&&t.explicit&&ke(function v$e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fi(n)} and ${Fi(i)}). Using ${Fi(n)}.`}(n,i,e.value,t.value)),e}function ip(e,t,n,i,r=nA){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Fc(e.value,t.value)?e:r(e,t,n,i)}class NVe extends yf{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function ey(e){return"url"in e}function yw(e){return"values"in e}function hoe(e){return"name"in e&&!ey(e)&&!yw(e)&&!rp(e)}function rp(e){return e&&(poe(e)||goe(e)||Ij(e))}function poe(e){return"sequence"in e}function goe(e){return"sphere"in e}function Ij(e){return"graticule"in e}var Ai=(()=>(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"}(Ai||(Ai={})),Ai))(),MVe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function ty(e,t=!0,n=es){if(Ce(e)){const i=e.map(r=>ty(r,t,n));return t?`[${i.join(", ")}]`:i}return Vg(e)?n(t?dw(e):function G$e(e){const t=I5(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(Fi(e)):e}function kVe(e,t){var n;for(const i of ds(null!==(n=e.component.selection)&&void 0!==n?n:{})){const r=i.name;let o=`${r}${ap}, ${"global"===i.resolve?"true":`{unit: ${ry(e)}}`}`;for(const s of aA)!s.defined(i)||(s.signals&&(t=s.signals(e,i,t)),s.modifyExpr&&(o=s.modifyExpr(e,i,o)));t.push({name:r+fHe,on:[{events:{signal:i.name+ap},update:`modify(${Be(i.name+Yg)}, ${o})`}]})}return Rj(t)}function IVe(e,t){if(e.component.selection&&Te(e.component.selection).length){const n=Be(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:$h("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Rj(t)}function moe(e,t){var n;for(const i of ds(null!==(n=e.component.selection)&&void 0!==n?n:{}))for(const r of aA)r.defined(i)&&r.marks&&(t=r.marks(e,i,t));return t}function Rj(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class vi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){this._children.includes(t)?ke("Attempt to add the same child twice."):void 0!==n?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}class Qs extends vi{constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${Ine()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var _oe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class Zc extends vi{constructor(t,n){super(t),this.formula=n}clone(){return new Zc(null,rn(this.formula))}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o)=>{const{field:s,timeUnit:a}=o;if(a){const l=We(o,{forAs:!0});r[Nn({as:l,field:s,timeUnit:a})]={as:l,field:s,timeUnit:a}}return r},{});return yi(i)?null:new Zc(t,i)}static makeFromTransform(t,n){const i=Object.assign({},n),{timeUnit:r}=i,o=_oe(i,["timeUnit"]),s=Js(r),a=Object.assign(Object.assign({},o),{timeUnit:s});return new Zc(t,{[Nn(a)]:a})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Hh(this.formula))t.has(r.as)||(n[i]=r);this.formula=n}producedFields(){return new Set(ds(this.formula).map(t=>t.as))}dependentFields(){return new Set(ds(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${Nn(this.formula)}`}assemble(){const t=[];for(const n of ds(this.formula)){const{field:i,as:r,timeUnit:o}=n,s=Js(o),{unit:a,utc:l}=s,u=_oe(s,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Il(i),type:"timeunit"},a?{units:F5(a)}:{}),l?{timezone:"utc"}:{}),u),{as:[r,`${r}_end`]}))}return t}}const vw="_tuple_fields";class BVe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const $Ve={defined:()=>!0,parse:(e,t,n)=>{var i;const r=t.name,o=null!==(i=t.project)&&void 0!==i?i:t.project=new BVe,s={},a={},l=new Set,u=(m,_)=>{const b="visual"===_?m.channel:m.field;let v=Wi(`${r}_${b}`);for(let D=1;l.has(v);D++)v=Wi(`${r}_${b}_${D}`);return l.add(v),{[_]:v}},c=t.type,d=e.config.selection[c],f=void 0!==n.value?Ze(n.value):null;let{fields:h,encodings:p}=it(n.select)?n.select:{};if(!h&&!p&&f)for(const m of f)if(it(m))for(const _ of Te(m))a6e(_)?(p||(p=[])).push(_):"interval"===c?(ke('Interval selections should be initialized using "x" and/or "y" keys.'),p=d.encodings):(h||(h=[])).push(_);!h&&!p&&(p=d.encodings,"fields"in d&&(h=d.fields));for(const m of null!=p?p:[]){const _=e.fieldDef(m);if(_){let b=_.field;if(_.aggregate){ke(I6e(m,_.aggregate));continue}if(!b){ke(lie(m));continue}if(_.timeUnit){b=e.vgField(m);const v={timeUnit:_.timeUnit,as:b,field:_.field};a[Nn(v)]=v}if(!s[b]){let v="E";"interval"===c?Za(e.getScaleComponent(m).get("type"))&&(v="R"):_.bin&&(v="R-RE");const D={field:b,channel:m,type:v};D.signals=Object.assign(Object.assign({},u(D,"data")),u(D,"visual")),o.items.push(s[b]=D),o.hasField[b]=o.hasChannel[m]=s[b]}}else ke(lie(m))}for(const m of null!=h?h:[]){if(o.hasField[m])continue;const _={type:"E",field:m};_.signals=Object.assign({},u(_,"data")),o.items.push(_),o.hasField[m]=_}f&&(t.init=f.map(m=>o.items.map(_=>it(m)?void 0!==m[_.channel]?m[_.channel]:m[_.field]:m))),yi(a)||(o.timeUnit=new Zc(null,a))},signals:(e,t,n)=>{const i=t.name+vw;return n.filter(o=>o.name===i).length>0?n:n.concat({name:i,value:t.project.items.map(o=>{const l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(o,["signals","hasLegend"]);return l.field=Il(l.field),l})})}},op={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!Kh(r))continue;const o=e.getScaleComponent(r),s=o?o.get("type"):void 0;o&&Za(s)?(o.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)):ke("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>0===n.filter(a=>a.name===s.signals.data).length);if(!e.parent||Fj(e)||0===i.length)return n;const r=n.filter(s=>s.name===t.name)[0];let o=r.update;if(o.indexOf(joe)>=0)r.update=`{${i.map(s=>`${Be(Il(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const a=`${Be(Il(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}r.update=o}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Fj(e))for(const i of t.scales){const r=n.filter(o=>o.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function Pj(e,t){return`domain(${Be(e.scaleName(t))})`}function Fj(e){var t;return e.parent&&dy(e.parent)&&(null!==(t=!e.parent.parent)&&void 0!==t?t:Fj(e.parent.parent))}const ny="_brush",Lj="_scale_trigger",HVe={defined:e=>"interval"===e.type,signals:(e,t,n)=>{const i=t.name,r=i+vw,o=op.defined(t),s=t.init?t.init[0]:null,a=[],l=[];if(t.translate&&!o){const c=`!event.item || event.item.mark.name !== ${Be(i+ny)}`;yoe(t,(d,f)=>{var h,p;const m=Ze(null!==(h=(p=f.between[0]).filter)&&void 0!==h?h:p.filter=[]);return m.includes(c)||m.push(c),d})}t.project.items.forEach((c,d)=>{const f=c.channel;if(f!==nr&&f!==bo)return void ke("Interval selections only support x and y encoding channels.");const p=function UVe(e,t,n,i){const r=n.channel,o=n.signals.visual,s=n.signals.data,a=op.defined(t),l=Be(e.scaleName(r)),u=e.getScaleComponent(r),c=u?u.get("type"):void 0,d=m=>`scale(${l}, ${m})`,f=e.getSizeSignalRef(r===nr?"width":"height").signal,h=`${r}(unit)`,p=yoe(t,(m,_)=>[...m,{events:_.between[0],update:`[${h}, ${h}]`},{events:_,update:`[${o}[0], clamp(${h}, 0, ${f})]`}]);return p.push({events:{signal:t.name+Lj},update:Za(c)?`[${d(`${s}[0]`)}, ${d(`${s}[1]`)}]`:"[0, 0]"}),a?[{name:s,on:[]}]:[Object.assign(Object.assign({name:o},i?{init:ty(i,!0,d)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:s},i?{init:ty(i)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${l}, ${o})`}]})]}(e,t,c,s?s[d]:null),m=c.signals.data,_=c.signals.visual,b=Be(e.scaleName(f)),D=Za(e.getScaleComponent(f).get("type"))?"+":"";n.push(...p),a.push(m),l.push({scaleName:e.scaleName(f),expr:`(!isArray(${m}) || (${D}invert(${b}, ${_})[0] === ${D}${m}[0] && ${D}invert(${b}, ${_})[1] === ${D}${m}[1]))`})}),!o&&l.length&&n.push({name:i+Lj,value:{},on:[{events:l.map(c=>({scale:c.scaleName})),update:`${l.map(c=>c.expr).join(" && ")} ? ${i+Lj} : {}`}]});const u=`unit: ${ry(e)}, fields: ${r}, values`;return n.concat(Object.assign(Object.assign({name:i+ap},s?{init:`{${u}: ${ty(s)}}`}:{}),a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}))},marks:(e,t,n)=>{const i=t.name,{x:r,y:o}=t.project.hasChannel,s=null==r?void 0:r.signals.visual,a=null==o?void 0:o.signals.visual,l=`data(${Be(t.name+Yg)})`;if(op.defined(t)||!r&&!o)return n;const u={x:void 0!==r?{signal:`${s}[0]`}:{value:0},y:void 0!==o?{signal:`${a}[0]`}:{value:0},x2:void 0!==r?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${a}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const _ of Te(u))u[_]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${ry(e)}`},u[_]),{value:0}];const c=t.mark,{fill:d,fillOpacity:f,cursor:h}=c,p=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(c,["fill","fillOpacity","cursor"]),m=Te(p).reduce((_,b)=>(_[b]=[{test:[void 0!==r&&`${s}[0] !== ${s}[1]`,void 0!==o&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:p[b]},{value:null}],_),{});return[{name:`${i+ny}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:f}},update:u}},...n,{name:i+ny,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),m)}}]}};function yoe(e,t){return e.events.reduce((n,i)=>i.between?t(n,i):(ke(`${i} is not an ordered event stream for interval selections.`),n),[])}const zVe={defined:e=>"point"===e.type,signals:(e,t,n)=>{var i;const r=t.name,o=r+vw,a="(item().isVoronoi ? datum.datum : datum)",l=t.project.items.map(h=>{const p=e.fieldDef(h.channel);return(null==p?void 0:p.bin)?`[${a}[${Be(e.vgField(h.channel,{}))}], ${a}[${Be(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${a}[${Be(h.field)}]`}).join(", "),u=`unit: ${ry(e)}, fields: ${o}, values`,c=t.events,d=ds(null!==(i=e.component.selection)&&void 0!==i?i:{}).reduce((h,p)=>"interval"===p.type?h.concat(p.name+ny):h,[]).map(h=>`indexof(item().mark.name, '${h}') < 0`).join(" && ");return n.concat([{name:r+ap,on:c?[{events:c,update:`${"datum && item().mark.marktype !== 'group'"+(d?` && ${d}`:"")} ? {${u}: [${l}]} : null`,force:!0}]:[]}])}};function iy(e,t,n,i){const r=jT(t)&&t.condition,o=i(t);return r?{[n]:[...Ze(r).map(l=>{const u=i(l);if(function j9e(e){return e.param}(l)){const{param:c,empty:d}=l,f=Hoe(e,{param:c,empty:d});return Object.assign({test:f},u)}{const c=lA(e,l.test);return Object.assign({test:c},u)}}),...void 0!==o?[o]:[]]}:void 0!==o?{[n]:o}:{}}function jj(e,t="text"){return iy(e,e.encoding[t],t,i=>iA(i,e.config))}function iA(e,t,n="datum"){if(e){if(Pu(e))return Bi(e.value);if(Kt(e)){const{format:i,formatType:r}=UT(e);return tj({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function voe(e,t={}){const{encoding:n,markDef:i,config:r,stack:o}=e,s=n.tooltip;if(Ce(s))return{tooltip:woe({tooltip:s},o,r,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return iy(e,s,"tooltip",l=>{const u=iA(l,r,a);if(u)return u;if(null===l)return;let c=ii("tooltip",i,r);return!0===c&&(c={content:"encoding"}),Qe(c)?{value:c}:it(c)?_t(c)?c:"encoding"===c.content?woe(n,o,r,t):{signal:a}:void 0})}}function boe(e,t,n,{reactiveGeom:i}={}){const r={},o=i?"datum.datum":"datum",s=[];function a(u,c){const d=jg(c),f=Fl(u)?u:Object.assign(Object.assign({},u),{type:e[d].type}),p=Ze(f.title||lj(f,n)).join(", ");let m;if($o(c)){const _="x"===c?"x2":"y2",b=Xc(e[_]);if(Xs(f.bin)&&b){const v=We(f,{expr:o}),D=We(b,{expr:o}),{format:A,formatType:I}=UT(f);m=PT(v,D,A,I,n),r[_]=!0}else if(t&&t.fieldChannel===c&&"normalize"===t.offset){const{format:v,formatType:D}=UT(f);m=tj({fieldOrDatumDef:f,format:v,formatType:D,expr:o,config:n,normalizeStack:!0}).signal}}null!=m||(m=iA(f,n,o).signal),s.push({channel:c,key:p,value:m})}fj(e,(u,c)=>{Ue(u)?a(u,c):BT(u)&&a(u.condition,c)});const l={};for(const{channel:u,key:c,value:d}of s)!r[u]&&!l[c]&&(l[c]=d);return l}function woe(e,t,n,{reactiveGeom:i}={}){const r=boe(e,t,n,{reactiveGeom:i}),o=Hh(r).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Eo(e,t,n={}){const{markDef:i,encoding:r,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;return void 0===a&&(null!=l||(l=ii(e,i,o,{vgChannel:s,ignoreVgConfig:!0})),void 0!==l&&(a=Bi(l))),iy(t,r[e],null!=s?s:e,c=>ej({channel:e,channelDef:c,markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function Eoe(e,t={filled:void 0}){var n,i,r,o;const{markDef:s,encoding:a,config:l}=e,{type:u}=s,c=null!==(n=t.filled)&&void 0!==n?n:ii("filled",s,l),d=Mn(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,f=null!==(r=null!==(i=ii(!0===c?"color":void 0,s,l,{vgChannel:"fill"}))&&void 0!==i?i:l.mark[!0===c&&"color"])&&void 0!==r?r:d,h=null!==(o=ii(!1===c?"color":void 0,s,l,{vgChannel:"stroke"}))&&void 0!==o?o:l.mark[!1===c&&"color"],p=c?"fill":"stroke",m=Object.assign(Object.assign({},f?{fill:Bi(f)}:{}),h?{stroke:Bi(h)}:{});return s.color&&(c?s.fill:s.stroke)&&ke(pie("property",{fill:"fill"in s,stroke:"stroke"in s})),Object.assign(Object.assign(Object.assign(Object.assign({},m),Eo("color",e,{vgChannel:p,defaultValue:c?f:h})),Eo("fill",e,{defaultValue:a.fill?f:void 0})),Eo("stroke",e,{defaultValue:a.stroke?h:void 0}))}function bw({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const o=`${e}Offset`,s=t[o],a=n[o];if(("xOffset"===o||"yOffset"===o)&&a)return{offsetType:"encoding",offset:ej({channel:o,channelDef:a,markDef:t,config:null==i?void 0:i.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:Bi(s),bandPosition:r})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function hs(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:o,config:s,stack:a}=t,l=r[e],u=r[ff(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=bw({channel:e,markDef:o,encoding:r,model:t,bandPosition:.5}),p=Bj({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!l&&$o(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:function KVe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:o,markDef:s}=e;if(Kt(n)&&r&&t===r.fieldChannel){if(Ue(n)){let a=n.bandPosition;if(void 0===a&&"text"===s.type&&("radius"===t||"theta"===t)&&(a=.5),void 0!==a)return RT({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return zg(n,i,{suffix:"end"},{offset:o})}return Q5(e)}({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:"encoding"===h?0:void 0});return m?{[i||e]:m}:void 0}function Bj({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:o,config:s}=e;return()=>{const a=jg(n),l=Yh(n),u=ii(n,o,s,{vgChannel:l});if(void 0!==u)return fw(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){if(!Mn(["log","time","utc"],r.get("type"))&&r.domainDefinitelyIncludesZero())return{scale:i,value:0}}if("zeroOrMin"===t)return"y"===a?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[xa(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const XVe={left:"x",center:"xc",right:"x2"},JVe={top:"y",middle:"yc",bottom:"y2"};function Coe(e,t,n,i="middle"){if("radius"===e||"theta"===e)return Yh(e);const r="x"===e?"align":"baseline",o=ii(r,t,n);let s;return _t(o)?(ke(function l$e(e){return`The ${e} for range marks cannot be an expression`}(r)),s=void 0):s=o,"x"===e?XVe[s||("top"===i?"left":"center")]:JVe[s||i]}function rA(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?Doe(e,t,{defaultPos:n,defaultPos2:i}):hs(e,t,{defaultPos:n})}function Doe(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:o}=t,s=ff(e),a=xa(e),l=function QVe(e,t,n){const{encoding:i,mark:r,markDef:o,stack:s,config:a}=e,l=jg(n),u=xa(n),c=Yh(n),d=i[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=bw(n in i||n in o?{channel:n,markDef:o,encoding:i,model:e}:{channel:l,markDef:o,encoding:i,model:e});if(!d&&("x2"===n||"y2"===n)&&(i.latitude||i.longitude)){const _=xa(n),b=e.markDef[_];return null!=b?{[_]:{value:b}}:{[c]:{field:e.getName(n)}}}const m=function ZVe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Kt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?zg(t,o,{suffix:"start"},{offset:l}):Q5({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:i,config:r,offset:l,defaultRef:u})}({channel:n,channelDef:d,channel2Def:i[n],markDef:o,config:a,scaleName:f,scale:h,stack:s,offset:p,defaultRef:void 0});return void 0!==m?{[c]:m}:oA(n,o)||oA(n,{[n]:ST(n,o,a.style),[u]:ST(u,o,a.style)})||oA(n,a[r])||oA(n,a.mark)||{[c]:Bj({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}(t,i,s),u=l[a]?Coe(e,r,o):Yh(e);return Object.assign(Object.assign({},hs(e,t,{defaultPos:n,vgChannel:u})),l)}function oA(e,t){const n=xa(e),i=Yh(e);if(void 0!==t[i])return{[i]:fw(e,t[i])};if(void 0!==t[e])return{[i]:fw(e,t[e])};if(t[n]){const r=t[n];if(!K_(r))return{[n]:fw(e,r)};ke(function t$e(e){return`Position range does not support relative band size for ${e}.`}(n))}}function sp(e,t){var n,i;const{config:r,encoding:o,markDef:s}=e,a=s.type,l=ff(t),u=xa(t),c=o[t],d=o[l],f=e.getScaleComponent(t),h=f?f.get("type"):void 0,p=s.orient,m=null!==(i=null!==(n=o[u])&&void 0!==n?n:o.size)&&void 0!==i?i:ii("size",s,r,{vgChannel:u}),_="bar"===a&&("x"===t?"vertical"===p:"horizontal"===p);return!Ue(c)||!(Li(c.bin)||Xs(c.bin)||c.timeUnit&&!d)||m&&!K_(m)||wo(h)?(Kt(c)&&wo(h)||_)&&!d?function tHe(e,t,n){const{markDef:i,encoding:r,config:o,stack:s}=n,a=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=xa(t),d=ff(t),f=function u6e(e){switch(e){case nr:return"xOffset";case bo:return"yOffset";case Nu:return"x2Offset";case jc:return"y2Offset";case Mu:return"thetaOffset";case Bc:return"radiusOffset";case uf:return"theta2Offset";case lf:return"radius2Offset"}}(t),h=n.scaleName(f),p="horizontal"===a&&"y"===t||"vertical"===a&&"x"===t;let m;(r.size||i.size)&&(p?m=Eo("size",n,{vgChannel:c,defaultRef:Bi(i.size)}):ke(function m$e(e){return`Cannot apply size to non-oriented mark "${e}".`}(i.type)));const _=ire({channel:t,fieldDef:e,markDef:i,config:o,scaleType:null==u?void 0:u.get("type"),useVlSizeChannel:p});m=m||{[c]:eHe(c,h||l,u,o,_)};const v=Coe(t,i,o,"band"===(null==u?void 0:u.get("type"))&&"band"in m[c]?"top":"middle"),D="xc"===v||"yc"===v,{offset:A,offsetType:I}=bw({channel:t,markDef:i,encoding:r,model:n,bandPosition:D?.5:0}),L=Q5({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:u,stack:s,offset:A,defaultRef:Bj({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:D?"encoding"===I?0:.5:_t(_)?{signal:`(1-${_})/2`}:K_(_)?(1-_.band)/2:0});if(c)return Object.assign({[v]:L},m);{const k=Yh(d),B=m[c],q=A?Object.assign(Object.assign({},B),{offset:A}):B;return{[v]:L,[k]:Ce(L)?[L[0],Object.assign(Object.assign({},L[1]),{offset:q})]:Object.assign(Object.assign({},L),{offset:q})}}}(c,t,e):Doe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function nHe({fieldDef:e,fieldDef2:t,channel:n,model:i}){var r,o,s;const{config:a,markDef:l,encoding:u}=i,c=i.getScaleComponent(n),d=i.scaleName(n),f=c?c.get("type"):void 0,h=c.get("reverse"),p=ire({channel:n,fieldDef:e,markDef:l,config:a,scaleType:f}),m=null===(r=i.component.axes[n])||void 0===r?void 0:r[0],_=null!==(o=null==m?void 0:m.get("translate"))&&void 0!==o?o:.5,b=$o(n)&&null!==(s=ii("binSpacing",l,a))&&void 0!==s?s:0,v=ff(n),D=Yh(n),A=Yh(v),{offset:I}=bw({channel:n,markDef:l,encoding:u,model:i,bandPosition:0}),L=_t(p)?{signal:`(1-${p.signal})/2`}:K_(p)?(1-p.band)/2:.5;if(Li(e.bin)||e.timeUnit)return{[A]:Soe({fieldDef:e,scaleName:d,bandPosition:L,offset:ww(v,b,h,_,I)}),[D]:Soe({fieldDef:e,scaleName:d,bandPosition:_t(L)?{signal:`1-${L.signal}`}:1-L,offset:ww(n,b,h,_,I)})};if(Xs(e.bin)){const k=zg(e,d,{},{offset:ww(v,b,h,_,I)});if(Ue(t))return{[A]:k,[D]:zg(t,d,{},{offset:ww(n,b,h,_,I)})};if(Bg(e.bin)&&e.bin.step)return{[A]:k,[D]:{signal:`scale("${d}", ${We(e,{expr:"datum"})} + ${e.bin.step})`,offset:ww(n,b,h,_,I)}}}ke(vie(v))}({fieldDef:c,fieldDef2:d,channel:t,model:e})}function eHe(e,t,n,i,r){if(K_(r)){if(!n)return{mult:r.band,field:{group:e}};{const s=n.get("type");if("band"===s)return{scale:t,band:r.band};1!==r.band&&(ke(function f$e(e){return`Cannot use the relative band size with ${e} scale.`}(s)),r=void 0)}}else{if(_t(r))return r;if(r)return{value:r}}if(n){const s=n.get("range");if(Qh(s)&&mi(s.step))return{value:s.step-2}}return{value:ZT(i.view,e)-2}}function ww(e,t,n,i,r){if(Lne(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(_t(n)||_t(r)||_t(i)){const s=gf(n),a=gf(r),l=gf(i);return{signal:(l?`${l} + `:"")+(s?`(${s} ? -1 : 1) * `:"")+(a?`(${a} + ${o})`:o)}}return r=r||0,i+(n?-r-o:+r+o)}function Soe({fieldDef:e,scaleName:t,bandPosition:n,offset:i}){return RT({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i})}const iHe=new Set(["aria","width","height"]);function Ll(e,t){const{fill:n,stroke:i}="include"===t.color?Eoe(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function rHe(e,t){return A6e.reduce((n,i)=>(!iHe.has(i)&&void 0!==e[i]&&"ignore"!==t[i]&&(n[i]=Bi(e[i])),n),{})}(e.markDef,t)),xoe(e,"fill",n)),xoe(e,"stroke",i)),Eo("opacity",e)),Eo("fillOpacity",e)),Eo("strokeOpacity",e)),Eo("strokeWidth",e)),Eo("strokeDash",e)),function YVe(e){const{encoding:t,mark:n}=e,i=t.order;return!ep(n)&&Pu(i)?iy(e,i,"zindex",r=>Bi(r.value)):{}}(e)),voe(e)),jj(e,"href")),function GVe(e){const{markDef:t,config:n}=e,i=ii("aria",t,n);return!1===i?{}:Object.assign(Object.assign(Object.assign({},i?{aria:i}:{}),function WVe(e){const{mark:t,markDef:n,config:i}=e;if(!1===i.aria)return{};const r=ii("ariaRoleDescription",n,i);return null!=r?{ariaRoleDescription:{value:r}}:t in O6e?{}:{ariaRoleDescription:{value:t}}}(e)),function qVe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,o=t.description;if(o)return iy(e,o,"description",l=>iA(l,e.config));const s=ii("description",n,i);if(null!=s)return{description:Bi(s)};if(!1===i.aria)return{};const a=boe(t,r,i);return yi(a)?void 0:{description:{signal:Hh(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}(e))}(e))}function xoe(e,t,n){const{config:i,mark:r,markDef:o}=e;if("hide"===ii("invalid",o,i)&&n&&!ep(r)){const a=function oHe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const l=a.get("type"),u=e.vgField(s,{expr:"datum"});u&&Za(l)&&(o[u]=!0)}return o},{}),r=Te(i);if(r.length>0){const o=t?"||":"&&";return r.map(s=>Z5(s,t)).join(` ${o} `)}}(e,{invalid:!0,channels:CT});if(a)return{[t]:[{test:a,value:null},...Ze(n)]}}return n?{[t]:n}:{}}function $j(e){const{config:t,markDef:n}=e;if(ii("invalid",n,t)){const r=function sHe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const l=a.get("type"),u=e.vgField(s,{expr:"datum"});u&&Za(l)&&(o[u]=!0)}return o},{}),r=Te(i);if(r.length>0){const o=t?"||":"&&";return r.map(s=>Z5(s,t)).join(` ${o} `)}}(e,{channels:zc});if(r)return{defined:{signal:r}}}return{}}function Toe(e,t){if(void 0!==t)return{[e]:Bi(t)}}const Vj="voronoi",Aoe={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Vj)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,o=e.mark;if(ep(o))return ke(function R6e(e){return`The "nearest" transform is not supported for ${e} marks.`}(o)),n;const s={name:e.getName(Vj),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},voe(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{var d;const f=null!==(d=u.name)&&void 0!==d?d:"";f===e.component.mark[0].name?a=c:f.indexOf(Vj)>=0&&(l=!0)}),l||n.splice(a+1,0,s),n}},Ooe={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!bj(e.bind),parse:(e,t,n)=>Boe(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,o=t.bind,s=t.init&&t.init[0],a=Aoe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{var c,d;const f=Wi(`${i}_${l.field}`);n.filter(p=>p.name===f).length||n.unshift(Object.assign(Object.assign({name:f},s?{init:ty(s[u])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Be(l.field)}] : null`}]:[],bind:null!==(d=null!==(c=o[l.field])&&void 0!==c?c:o[l.channel])&&void 0!==d?d:o}))}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.filter(u=>u.name===i+ap)[0],s=i+vw,a=r.items.map(u=>Wi(`${i}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},sA="_toggle",Noe={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+sA,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ap,i=t.name+sA;return`${i} ? null : ${n}, `+("global"===t.resolve?`${i} ? null : true, `:`${i} ? null : {unit: ${ry(e)}}, `)+`${i} ? ${n} : null`}},aHe={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=Qe(t.clear)?$h(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Ooe.defined(t))for(const i of t.project.items){const r=n.findIndex(o=>o.name===Wi(`${t.name}_${i.field}`));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,o){-1!==r&&n[r].on&&n[r].on.push({events:t.clear,update:o})}if("interval"===t.type)for(const r of t.project.items){const o=n.findIndex(s=>s.name===r.signals.visual);i(o,"[0, 0]"),-1===o&&i(n.findIndex(a=>a.name===r.signals.data),"null")}else{let r=n.findIndex(o=>o.name===t.name+ap);i(r,"null"),Noe.defined(t)&&(r=n.findIndex(o=>o.name===t.name+sA),i(r,"false"))}return n}},Moe={defined:e=>{const t="global"===e.resolve&&e.bind&&bj(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==_w;return t&&!n&&ke("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{var i;const r=rn(n);if(r.select=Qe(r.select)?{type:r.select,toggle:t.toggle}:Object.assign(Object.assign({},r.select),{toggle:t.toggle}),Boe(t,r),it(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=Ze(null!==(i=l.filter)&&void 0!==i?i:[]),l.filter.includes(a)||l.filter.push(a)}const o=wj(t.bind)?t.bind.legend:"click",s=Qe(o)?$h(o,"view"):Ze(o);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=wj(t.bind)&&t.bind.legend,o=s=>a=>{const l=rn(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Wi(s.field)}_legend`,l=`${i}_${a}`;if(0===n.filter(c=>c.name===l).length){const c=r.merge.map(o(`${a}_symbols`)).concat(r.merge.map(o(`${a}_labels`))).concat(r.merge.map(o(`${a}_entries`)));n.unshift(Object.assign(Object.assign({name:l},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(f=>f.name===i+ap),s=i+vw,a=r.items.filter(f=>f.hasLegend).map(f=>Wi(`${i}_${Wi(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(f=>f.name===i+sA),d=wj(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:d})):c.on[0].events=d),n}},koe="_translate_anchor",Ioe="_translate_delta",cHe={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const i=t.name,r=op.defined(t),o=i+koe,{x:s,y:a}=t.project.hasChannel;let l=$h(t.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+ny,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==s?`, extent_x: ${r?Pj(e,nr):`slice(${s.signals.visual})`}`:"")+(void 0!==a?`, extent_y: ${r?Pj(e,bo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+Ioe,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==s&&Roe(e,t,s,"width",n),void 0!==a&&Roe(e,t,a,"height",n),n}};function Roe(e,t,n,i,r){var o,s;const a=t.name,l=a+koe,u=a+Ioe,c=n.channel,d=op.defined(t),f=r.filter(k=>k.name===n.signals[d?"data":"visual"])[0],h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(c),m=p.get("type"),_=p.get("reverse"),v=`${l}.extent_${c}`,L=`${d?"log"===m?"panLog":"symlog"===m?"panSymlog":"pow"===m?"panPow":"panLinear":"panLinear"}(${v}, ${d?c===nr?_?"":"-":_?"-":"":""}${u}.${c} / ${d?`${h}`:`span(${v})`}${d?"pow"===m?`, ${null!==(o=p.get("exponent"))&&void 0!==o?o:1}`:"symlog"===m?`, ${null!==(s=p.get("constant"))&&void 0!==s?s:1}`:"":""})`;f.on.push({events:{signal:u},update:d?L:`clampRange(${L}, 0, ${h})`})}const Poe="_zoom_anchor",Foe="_zoom_delta",dHe={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=op.defined(t),o=i+Foe,{x:s,y:a}=t.project.hasChannel,l=Be(e.scaleName(nr)),u=Be(e.scaleName(bo));let c=$h(t.zoom,"scope");return r||(c=c.map(d=>(d.markname=i+ny,d))),n.push({name:i+Poe,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>!!d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&Loe(e,t,s,"width",n),void 0!==a&&Loe(e,t,a,"height",n),n}};function Loe(e,t,n,i,r){var o,s;const a=t.name,l=n.channel,u=op.defined(t),c=r.filter(A=>A.name===n.signals[u?"data":"visual"])[0],d=e.getSizeSignalRef(i).signal,f=e.getScaleComponent(l),h=f.get("type"),p=u?Pj(e,l):c.name,m=a+Foe,D=`${u?"log"===h?"zoomLog":"symlog"===h?"zoomSymlog":"pow"===h?"zoomPow":"zoomLinear":"zoomLinear"}(${p}, ${a}${Poe}.${l}, ${m}${u?"pow"===h?`, ${null!==(o=f.get("exponent"))&&void 0!==o?o:1}`:"symlog"===h?`, ${null!==(s=f.get("constant"))&&void 0!==s?s:1}`:"":""})`;c.on.push({events:{signal:m},update:u?D:`clampRange(${D}, 0, ${d})`})}const Yg="_store",ap="_tuple",fHe="_modify",joe="vlSelectionResolve",aA=[zVe,HVe,$Ve,Noe,Ooe,op,Moe,aHe,cHe,dHe,Aoe];function ry(e,{escape:t}={escape:!0}){let n=t?Be(e.name):e.name;const i=function hHe(e){let t=e.parent;for(;t&&!ju(t);)t=t.parent;return t}(e);if(i){const{facet:r}=i;for(const o of Pl)r[o]&&(n+=` + '__facet_${o}_' + (facet[${Be(i.vgField(o))}])`)}return n}function Hj(e){var t;return ds(null!==(t=e.component.selection)&&void 0!==t?t:{}).reduce((n,i)=>n||i.project.items.some(r=>r.field===_w),!1)}function Boe(e,t){(Qe(t.select)||!t.select.on)&&delete e.events,(Qe(t.select)||!t.select.clear)&&delete e.clear,(Qe(t.select)||!t.select.toggle)&&delete e.toggle}function Uj(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...Uj(e.object)),t.push(...Uj(e.property))),t)}function $oe(e){return"MemberExpression"===e.object.type?$oe(e.object):"datum"===e.object.name}function Voe(e){const t=n3(e),n=new Set;return t.visit(i=>{"MemberExpression"===i.type&&$oe(i)&&n.add(Uj(i).slice(1).join("."))}),n}class oy extends vi{constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=lA(this.model,this.filter,this),this._dependentFields=Voe(this.expr)}clone(){return new oy(null,this.model,rn(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Hoe(e,t,n,i="datum"){const r=Qe(t)?t:t.param,o=Wi(r),s=Be(o+Yg);let a;try{a=e.getSelectionComponent(o,r)}catch(c){return`!!${o}`}if(a.project.timeUnit){const c=null!=n?n:e.component.data.raw,d=a.project.timeUnit.clone();c.parent?d.insertAsParentOf(c):c.parent=d}const l=`vlSelectionTest(${s}, ${i}${"global"===a.resolve?")":`, ${Be(a.resolve)})`}`,u=`length(data(${s}))`;return!1===t.empty?`${u} && ${l}`:`!${u} || ${l}`}function Uoe(e,t,n){const i=Wi(t),r=n.encoding;let s,o=n.field;try{s=e.getSelectionComponent(i,t)}catch(a){return i}if(r||o){if(r&&!o){const a=s.project.items.filter(l=>l.channel===r);!a.length||a.length>1?(o=s.project.items[0].field,ke((a.length?"Multiple ":"No ")+`matching ${Be(r)} encoding found for selection ${Be(n.param)}. Using "field": ${Be(o)}.`)):o=a[0].field}}else o=s.project.items[0].field,s.project.items.length>1&&ke(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Be(o)}.`);return`${s.name}[${Be(Il(o))}]`}function lA(e,t,n){return nw(t,i=>Qe(i)?i:function Z$e(e){return null==e?void 0:e.param}(i)?Hoe(e,i,n):Aie(i))}var uA=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function zj(e,t,n,i){var r,o,s,a,l;null!==(r=e.encode)&&void 0!==r||(e.encode={}),null!==(o=(a=e.encode)[t])&&void 0!==o||(a[t]={}),null!==(s=(l=e.encode[t]).update)&&void 0!==s||(l.update={}),e.encode[t].update[n]=i}function Ew(e,t,n,i={header:!1}){var r,o;const s=e.combine(),{disable:a,orient:l,scale:u,labelExpr:c,title:d,zindex:f}=s,h=uA(s,["disable","orient","scale","labelExpr","title","zindex"]);if(!a){for(const p in h){const m=Q9e[p],_=h[p];if(m&&m!==t&&"both"!==m)delete h[p];else if(mw(_)){const{condition:b}=_,v=uA(_,["condition"]),D=Ze(b),A=fre[p];if(A){const{vgProp:I,part:L}=A;zj(h,L,I,[...D.map(B=>{const{test:q}=B,W=uA(B,["test"]);return Object.assign({test:lA(null,q)},W)}),v]),delete h[p]}else if(null===A){const I={signal:D.map(L=>{const{test:k}=L,B=uA(L,["test"]);return`${lA(null,k)} ? ${Qne(B)} : `}).join("")+Qne(v)};h[p]=I}}else if(_t(_)){const b=fre[p];if(b){const{vgProp:v,part:D}=b;zj(h,D,v,_),delete h[p]}}Mn(["labelAlign","labelBaseline"],p)&&null===h[p]&&delete h[p]}if("grid"===t){if(!h.grid)return;if(h.encode){const{grid:p}=h.encode;h.encode=Object.assign({},p?{grid:p}:{}),yi(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:u,orient:l},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Br(f,0)})}{if(!i.header&&e.mainExtracted)return;if(void 0!==c){let m=c;(null===(o=null===(r=h.encode)||void 0===r?void 0:r.labels)||void 0===o?void 0:o.update)&&_t(h.encode.labels.update.text)&&(m=Pg(c,"datum.label",h.encode.labels.update.text.signal)),zj(h,"labels","text",{signal:m})}if(null===h.labelAlign&&delete h.labelAlign,h.encode){for(const m of hre)e.hasAxisPart(m)||delete h.encode[m];yi(h.encode)&&delete h.encode}const p=function mHe(e,t){if(e)return Ce(e)&&!Jh(e)?e.map(n=>lj(n,t)).join(", "):e}(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:l,grid:!1},p?{title:p}:{}),h),!1===n.aria?{aria:!1}:{}),{zindex:Br(f,0)})}}}function zoe(e){const{axes:t}=e.component,n=[];for(const i of zc)if(t[i])for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const o="x"===i?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}return n}function Goe(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if("axisOrient"===r){const o="x"===n?"bottom":"left",s=t["x"===n?"axisBottom":"axisLeft"]||{},a=t["x"===n?"axisTop":"axisRight"]||{},l=new Set([...Te(s),...Te(a)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${o}" ? ${gf(s[c])} : ${gf(a[c])}`};return u}return t[r]})])}function vHe(e,t){var n;const i=[{}];for(const r of e){let o=null===(n=t[r])||void 0===n?void 0:n.style;if(o){o=Ze(o);for(const s of o)i.push(t.style[s])}}return Object.assign.apply(null,i)}function Gj(e,t,n,i={}){var r;const o=eie(e,n,t);if(void 0!==o)return{configFrom:"style",configValue:o};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null===(r=i[s])||void 0===r?void 0:r[e]))return{configFrom:s,configValue:i[s][e]};return{}}const Woe={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:i,formatType:r}=n;return qie(e,e.type,i,r,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Yie(i,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var i;return null!==(i=t.grid)&&void 0!==i?i:function bHe(e,t){return!wo(e)&&Ue(t)&&!Li(null==t?void 0:t.bin)&&!Xs(null==t?void 0:t.bin)}(n,e)},gridScale:({model:e,channel:t})=>function wHe(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||Yoe(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||qoe(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var i;return null!==(i=e.labelFlush)&&void 0!==i?i:function CHe(e,t){if("x"===t&&Mn(["quantitative","temporal"],e))return!0}(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var i;return null!==(i=e.labelOverlap)&&void 0!==i?i:function DHe(e,t,n,i){if(n&&!it(i)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy"}(t.type,n,Ue(t)&&!!t.timeUnit,Ue(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{var o;const s="x"===e?"width":"y"===e?"height":void 0,a=s?t.getSizeSignalRef(s):void 0;return null!==(o=n.tickCount)&&void 0!==o?o:function xHe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!wo(t)&&"log"!==t){if(Ue(e)){if(Li(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Mn(["month","hours","day","quarter"],null===(r=Js(e.timeUnit))||void 0===r?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}({fieldOrDatumDef:i,scaleType:r,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const i=Koe(t,n);if(void 0!==i)return i;const r=t.typedFieldDef(n),s=t.fieldDef("x"===n?"x2":"y2");return nie(r?[tre(r)]:[],Ue(s)?[tre(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function THe(e,t){const n=e.values;return Ce(n)?dre(t,n):_t(n)?n:void 0}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var i;return null!==(i=e.zindex)&&void 0!==i?i:function AHe(e,t){return"rect"===e&&HT(t)?1:0}(n,t)}};function Wj(e){return`(((${e.signal} % 360) + 360) % 360)`}function qoe(e,t,n,i){if(void 0!==e){if("x"===n){if(_t(e)){const r=Wj(e);return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${_t(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}return 45<e&&e<135||225<e&&e<315?"middle":_t(t)?{signal:`${t.signal} ${e<=45||315<=e?"===":"!=="} "top" ? "bottom" : "top"`}:(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(_t(e)){const r=Wj(e);return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${_t(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}return e<=45||315<=e||135<=e&&e<=225?i?"middle":null:_t(t)?{signal:`${t.signal} ${45<=e&&e<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function Yoe(e,t,n){if(void 0===e)return;const i="x"===n,r=i?0:90,o=i?"bottom":"left";if(_t(e)){const s=Wj(e);return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${_t(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}return(e+r)%180==0?i?null:"center":_t(t)?{signal:`${t.signal} ${r<e&&e<180+r?"===":"!=="} "${o}" ? "left" : "right"`}:(r<e&&e<180+r)==(t===o)?"left":"right"}function Koe(e,t){const n="x"===t?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),o=i?i.title:void 0,s=r?r.title:void 0;return o&&s?iie(o,s):o||s||(void 0!==o?o:void 0!==s?s:void 0)}class sy extends vi{constructor(t,n){super(t),this.transform=n,this._dependentFields=Voe(this.transform.calculate)}clone(){return new sy(null,rn(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Wg(i)&&ere(i.sort)){const{field:o,timeUnit:s}=i,a=i.sort,l=a.map((u,c)=>`${Aie({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new sy(t,{calculate:l,as:ay(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Nn(this.transform)}`}}function ay(e,t,n){return We(e,Object.assign({prefix:t,suffix:"sort_index"},null!=n?n:{}))}function cA(e,t){return Mn(["top","bottom"],t)?"column":Mn(["left","right"],t)||"row"===e?"row":"column"}function ly(e,t,n,i){return Br((t||{})[e],("row"===i?n.headerRow:"column"===i?n.headerColumn:n.headerFacet)[e],n.header[e])}function dA(e,t,n,i){const r={};for(const o of e){const s=ly(o,t||{},n,i);void 0!==s&&(r[o]=s)}return r}const qj=["row","column"],Yj=["header","footer"];function OHe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=dA(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=cA(t,a),u=rw(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===t?{orient:"left"}:{}),{style:"guide-title"}),Joe(u,l)),Xoe(l,u,o)),Qoe(i,r,t,v7e,Ire))}}function Xoe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=Yoe(t,"row"===e?"left":"top","row"===e?"y":"x");return i?{align:i}:{}}function Joe(e,t){const n=qoe(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function NHe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of Yj)if(n[r])for(const o of n[r]){const s=kHe(e,t,r,n,o);null!=s&&i.push(s)}return i}function MHe(e,t){var n;const{sort:i}=e;return qc(i)?{field:We(i,{expr:"datum"}),order:null!==(n=i.order)&&void 0!==n?n:"ascending"}:Ce(i)?{field:ay(e,t,{expr:"datum"}),order:"ascending"}:{field:We(e,{expr:"datum"}),order:null!=i?i:"ascending"}}function Kj(e,t,n){const{format:i,formatType:r,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=dA(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=tj({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=cA(t,a);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?Pg(Pg(l,"datum.label",u),"datum.value",We(e,{expr:"parent"})):u}},"row"===t?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Joe(o,c)),Xoe(c,o,s)),Qoe(n,e,t,b7e,Rre))}function kHe(e,t,n,i,r){if(r){let o=null;const{facetFieldDef:s}=i,a=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:d}=dA(["labelOrient"],s.header,a,t);("row"===t&&!Mn(["top","bottom"],d)||"column"===t&&!Mn(["left","right"],d))&&(o=Kj(s,t,a))}const l=ju(e)&&!hw(e.facet),u=r.axes,c=(null==u?void 0:u.length)>0;if(o||c){const d="row"===t?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:MHe(s,t)}:{}),c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{}),c?{axes:u}:{})}}return null}const IHe={column:{start:0,end:1},row:{start:1,end:0}};function RHe(e,t){return IHe[t][e]}function Qoe(e,t,n,i,r){const o={};for(const s of i){if(!r[s])continue;const a=ly(s,null==t?void 0:t.header,e,n);void 0!==a&&(o[r[s]]=a)}return o}function Xj(e){return[...fA(e,"width"),...fA(e,"height"),...fA(e,"childWidth"),...fA(e,"childHeight")]}function fA(e,t){const n="width"===t?"x":"y",i=e.component.layoutSize.get(t);if(!i||"merged"===i)return[];const r=e.getSizeSignalRef(t).signal;if("step"===i){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(wo(s)&&Qh(a)){const l=e.scaleName(n);return ju(e.parent)&&"independent"===e.parent.component.resolve.scale[n]?[Zoe(l,a)]:[Zoe(l,a),{name:r,update:ese(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==i){const o=r.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",l=`isFinite(${s}) ? ${s} : ${Sj(e.config.view,o?"width":"height")}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}return[{name:r,value:i}]}function Zoe(e,t){const n=`${e}_step`;return _t(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function ese(e,t,n){const i=t.get("type"),r=t.get("padding"),o=Br(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s="band"===i?void 0!==s?s:r:1,`bandspace(${n}, ${gf(s)}, ${gf(o)}) * ${e}_step`}function tse(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function nse(e,t){return Te(e).reduce((n,i)=>{const r=e[i];return Object.assign(Object.assign({},n),iy(t,r,i,o=>Bi(o.value)))},{})}function ise(e,t){if(ju(t))return"theta"===e?"independent":"shared";if(dy(t))return"shared";if(f8(t))return $o(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function Jj(e,t){const n=e.scale[t],i=$o(t)?"axis":"legend";return"independent"===n?("shared"===e[i][t]&&ke(function w$e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[i][t]||"shared"}const FHe=Object.assign(Object.assign({},Lre),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),rse=Te(FHe);class LHe extends yf{}const ose={symbols:function jHe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:o}){var s,a,l,u,c,d,f,h;if("symbol"!==o)return;const{markDef:p,encoding:m,config:_,mark:b}=n,v=p.filled&&"trail"!==b;let D=Object.assign(Object.assign({},function M6e(e,t,n){for(const i of n){const r=$g(i,t.markDef,t.config);void 0!==r&&(e[i]=Bi(r))}return e}({},n,C9e)),Eoe(n,{filled:v}));const A=null!==(s=r.get("symbolOpacity"))&&void 0!==s?s:_.legend.symbolOpacity,I=null!==(a=r.get("symbolFillColor"))&&void 0!==a?a:_.legend.symbolFillColor,L=null!==(l=r.get("symbolStrokeColor"))&&void 0!==l?l:_.legend.symbolStrokeColor,k=void 0===A?null!==(u=sse(m.opacity))&&void 0!==u?u:p.opacity:void 0;if(D.fill)if("fill"===i||v&&i===Da)delete D.fill;else if(D.fill.field)I?delete D.fill:(D.fill=Bi(null!==(c=_.legend.symbolBaseFillColor)&&void 0!==c?c:"black"),D.fillOpacity=Bi(null!=k?k:1));else if(Ce(D.fill)){const B=null!==(h=null!==(f=Qj(null!==(d=m.fill)&&void 0!==d?d:m.color))&&void 0!==f?f:p.fill)&&void 0!==h?h:v&&p.color;B&&(D.fill=Bi(B))}if(D.stroke)if("stroke"===i||!v&&i===Da)delete D.stroke;else if(D.stroke.field||L)delete D.stroke;else if(Ce(D.stroke)){const B=Br(Qj(m.stroke||m.color),p.stroke,v?p.color:void 0);B&&(D.stroke={value:B})}if(i!==df){const B=Ue(t)&&lse(0,r,t);B?D.opacity=[Object.assign({test:B},Bi(null!=k?k:1)),Bi(_.legend.unselectedOpacity)]:k&&(D.opacity=Bi(k))}return D=Object.assign(Object.assign({},D),e),yi(D)?void 0:D},gradient:function BHe(e,{model:t,legendType:n,legendCmpt:i}){var r;if("gradient"!==n)return;const{config:o,markDef:s,encoding:a}=t;let l={};const c=void 0===(null!==(r=i.get("gradientOpacity"))&&void 0!==r?r:o.legend.gradientOpacity)?sse(a.opacity)||s.opacity:void 0;return c&&(l.opacity=Bi(c)),l=Object.assign(Object.assign({},l),e),yi(l)?void 0:l},labels:function $He(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const o=n.legend(i)||{},s=n.config,a=Ue(t)?lse(0,r,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o,d=Gg(c)?nj({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):void 0,f=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),d?{text:d}:{}),e);return yi(f)?void 0:f},entries:function VHe(e,{legendCmpt:t}){const n=t.get("selections");return(null==n?void 0:n.length)?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}};function sse(e){return ase(e,(t,n)=>Math.max(t,n.value))}function Qj(e){return ase(e,(t,n)=>Br(t,n.value))}function ase(e,t){return function $9e(e){const t=e&&e.condition;return!!t&&(Ce(t)||Pu(t))}(e)?Ze(e.condition).reduce(t,e.value):Pu(e)?e.value:void 0}function lse(e,t,n){const i=t.get("selections");if(!(null==i?void 0:i.length))return;const r=Be(n.field);return i.map(o=>`(!length(data(${Be(Wi(o)+Yg)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const use={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return qie(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Yie(i,t,n)},gradientLength:e=>{var t,n;const{legend:i,legendConfig:r}=e;return null!==(n=null!==(t=i.gradientLength)&&void 0!==t?t:r.gradientLength)&&void 0!==n?n:function YHe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Iu(r))return"horizontal"===n?"top"===i||"bottom"===i?cse(t,"width",s,o):s:cse(t,"height",l,a)}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var i,r;return null!==(r=null!==(i=e.labelOverlap)&&void 0!==i?i:t.labelOverlap)&&void 0!==r?r:function KHe(e){if(Mn(["quantile","threshold","log","symlog"],e))return"greedy"}(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>{var r;return null!==(r=e.symbolType)&&void 0!==r?r:function UHe(e,t,n,i){var r;if("shape"!==t){const o=null!==(r=Qj(n))&&void 0!==r?r:i;if(o)return o}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,i.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>X_(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(z_(n)&&Iu(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function HHe(e,t){const n=e.values;return Ce(n)?dre(t,n):_t(n)?n:void 0}(t,e)};function cse(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function dse(e){const t=$r(e)?function XHe(e){const{encoding:t}=e,n={};for(const i of[Da,...Fre]){const r=io(t[i]);!r||!e.getScaleComponent(i)||i===Sa&&Ue(r)&&r.type===q_||(n[i]=ZHe(e,i))}return n}(e):function eUe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){dse(i);for(const r of Te(i.component.legends))n.legend[r]=Jj(e.component.resolve,r),"shared"===n.legend[r]&&(t[r]=fse(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of Te(t))for(const r of e.children)!r.component.legends[i]||"shared"===n.legend[i]&&delete r.component.legends[i];return t}(e);return e.component.legends=t,t}function QHe(e,t,n,i){switch(t){case"disable":return void 0!==n;case"values":return!!(null==n?void 0:n.values);case"title":if("title"===t&&e===(null==i?void 0:i.title))return!0}return e===(n||{})[t]}function ZHe(e,t){var n,i,r;let o=e.legend(t);const{markDef:s,encoding:a,config:l}=e,u=l.legend,c=new LHe({},function JHe(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function uHe(e,t,n){var i,r,o,s;const a=null===(i=e.fieldDef(t))||void 0===i?void 0:i.field;for(const l of ds(null!==(r=e.component.selection)&&void 0!==r?r:{})){const u=null!==(o=l.project.hasField[a])&&void 0!==o?o:l.project.hasChannel[t];if(u&&Moe.defined(l)){const c=null!==(s=n.get("selections"))&&void 0!==s?s:[];c.push(l.name),n.set("selections",c,!1),u.hasLegend=!0}}}(e,t,c);const d=void 0!==o?!o:u.disable;if(c.set("disable",d,void 0!==o),d)return c;o=o||{};const f=e.getScaleComponent(t).get("type"),h=io(a[t]),p=Ue(h)?null===(n=Js(h.timeUnit))||void 0===n?void 0:n.unit:void 0,m=o.orient||l.legend.orient||"right",_=function zHe(e){const{legend:t}=e;return Br(t.type,function GHe({channel:e,timeUnit:t,scaleType:n}){if(z_(e)){if(Mn(["quarter","month","day"],t))return"symbol";if(Iu(n))return"gradient"}return"symbol"}(e))}({legend:o,channel:t,timeUnit:p,scaleType:f}),b=function WHe({legendConfig:e,legendType:t,orient:n,legend:i}){var r,o;return null!==(o=null!==(r=i.direction)&&void 0!==r?r:e[t?"gradientDirection":"symbolDirection"])&&void 0!==o?o:function qHe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}({legend:o,legendType:_,orient:m,legendConfig:u}),v={legend:o,channel:t,model:e,markDef:s,encoding:a,fieldOrDatumDef:h,legendConfig:u,config:l,scaleType:f,orient:m,legendType:_,direction:b};for(const k of rse){if("gradient"===_&&k.startsWith("symbol")||"symbol"===_&&k.startsWith("gradient"))continue;const B=k in use?use[k](v):o[k];if(void 0!==B){const q=QHe(B,k,o,e.fieldDef(t));(q||void 0===l.legend[k])&&c.set(k,B,q)}}const D=null!==(i=null==o?void 0:o.encoding)&&void 0!==i?i:{},A=c.get("selections"),I={},L={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:_};for(const k of["labels","legend","title","symbols","gradient","entries"]){const B=nse(null!==(r=D[k])&&void 0!==r?r:{},e),q=k in ose?ose[k](B,L):B;void 0!==q&&!yi(q)&&(I[k]=Object.assign(Object.assign(Object.assign({},(null==A?void 0:A.length)&&Ue(h)?{name:`${Wi(h.field)}_legend_${k}`}:{}),(null==A?void 0:A.length)?{interactive:!!A}:{}),{update:q}))}return yi(I)||c.set("encode",I,!!(null==o?void 0:o.encoding)),c}function fse(e,t){var n,i,r,o;if(!e)return t.clone();const s=e.getWithExplicit("orient"),a=t.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;let l=!1;for(const u of rse){const c=ip(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,f)=>{switch(u){case"symbolType":return tUe(d,f);case"title":return rie(d,f);case"type":return l=!0,el("symbol")}return nA(d,f,u,"legend")});e.setWithExplicit(u,c)}return l&&((null===(i=null===(n=e.implicit)||void 0===n?void 0:n.encode)||void 0===i?void 0:i.gradient)&&fT(e.implicit,["encode","gradient"]),(null===(o=null===(r=e.explicit)||void 0===r?void 0:r.encode)||void 0===o?void 0:o.gradient)&&fT(e.explicit,["encode","gradient"])),e}function tUe(e,t){return"circle"===t.value?t:e}function hse(e){const t=e.component.legends,n={};for(const r of Te(t)){const o=e.getScaleComponent(r),s=Fi(o.get("domains"));if(n[s])for(const a of n[s])fse(a,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return ds(n).flat().map(r=>function rUe(e,t){var n,i,r;const o=e.combine(),{disable:s,labelExpr:a}=o,u=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(o,["disable","labelExpr","selections"]);if(!s){if(!1===t.aria&&null==u.aria&&(u.aria=!1),null===(n=u.encode)||void 0===n?void 0:n.symbols){const c=u.encode.symbols.update;c.fill&&"transparent"!==c.fill.value&&!c.stroke&&!u.stroke&&(c.stroke={value:"transparent"});for(const d of Fre)u[d]&&delete c[d]}if(u.title||delete u.title,void 0!==a){let c=a;(null===(r=null===(i=u.encode)||void 0===i?void 0:i.labels)||void 0===r?void 0:r.update)&&_t(u.encode.labels.update.text)&&(c=Pg(a,"datum.label",u.encode.labels.update.text.signal)),function iUe(e,t,n,i){var r,o,s,a,l;null!==(r=e.encode)&&void 0!==r||(e.encode={}),null!==(o=(a=e.encode)[t])&&void 0!==o||(a[t]={}),null!==(s=(l=e.encode[t]).update)&&void 0!==s||(l.update={}),e.encode[t].update[n]=i}(u,"labels","text",{signal:c})}return u}}(r,e.config)).filter(r=>void 0!==r)}function pse(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=_t(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Mn(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}return[Object.assign(Object.assign({name:i},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const aUe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class gse extends yf{constructor(t,n,i,r){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function mse(e){e.component.projection=$r(e)?function lUe(e){var t;if(e.hasProjection){const n=Ta(e.specifiedProjection),i=!(n&&(null!=n.scale||null!=n.translate)),r=i?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=i?function uUe(e){const t=[],{encoding:n}=e;for(const i of[[Vc,$c],[Rl,ku]])(io(n[i[0]])||io(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Sa)&&e.typedFieldDef(Sa).type===q_&&t.push({signal:e.getName(`geojson_${t.length}`)}),0===t.length&&t.push(e.requestDataName(Ai.Main)),t}(e):void 0,s=new gse(e.projectionName(!0),Object.assign(Object.assign({},null!==(t=Ta(e.config.projection))&&void 0!==t?t:{}),null!=n?n:{}),r,o);return s.get("type")||s.set("type","equalEarth",!1),s}}(e):function dUe(e){if(0===e.children.length)return;let t;for(const i of e.children)mse(i);const n=h5(e.children,i=>{const r=i.component.projection;if(r){if(t){const o=function cUe(e,t){const n=h5(aUe,r=>!!(!gt(e.explicit,r)&&!gt(t.explicit,r)||gt(e.explicit,r)&&gt(t.explicit,r)&&Fc(e.get(r),t.get(r))));if(Fc(e.size,t.size)){if(n)return e;if(Fc(e.explicit,{}))return t;if(Fc(t.explicit,{}))return e}return null}(t,r);return o&&(t=o),!!o}return t=r,!0}return!0});if(t&&n){const i=e.projectionName(!0),r=new gse(i,t.specifiedProjection,t.size,rn(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),i),s.merged=!0)}return r}}(e)}function _se(e,t){return`${qne(e)}_${t}`}function Zj(e,t,n){var i;const o=_se(null!==(i=GT(n,void 0))&&void 0!==i?i:{},t);return e.getName(`${o}_bins`)}function yse(e,t,n){let i,r;i=function gUe(e){return"as"in e}(e)?Qe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[We(e,{forAs:!0}),We(e,{binSuffix:"end",forAs:!0})];const o=Object.assign({},GT(t,void 0)),s=_se(o,e.field),{signal:a,extentSignal:l}=function pUe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,s);if(DT(o.extent)){const c=o.extent;r=Uoe(n,c.param,c),delete o.extent}return{key:s,binComponent:Object.assign(Object.assign(Object.assign({bin:o,field:e.field,as:[i]},a?{signal:a}:{}),l?{extentSignal:l}:{}),r?{span:r}:{})}}class ed extends vi{constructor(t,n){super(t),this.bins=n}clone(){return new ed(null,rn(this.bins))}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,s)=>{if(Fl(o)&&Li(o.bin)){const{key:a,binComponent:l}=yse(o,o.bin,n);r[a]=Object.assign(Object.assign(Object.assign({},l),r[a]),function hUe(e,t,n,i){var r,o;if(gw(t,n)){const s=$r(e)&&null!==(o=null!==(r=e.axis(n))&&void 0!==r?r:e.legend(n))&&void 0!==o?o:{},a=We(t,{expr:"datum"}),l=We(t,{expr:"datum",binSuffix:"end"});return{formulaAs:We(t,{binSuffix:"range",forAs:!0}),formula:PT(a,l,s.format,s.formatType,i)}}return{}}(n,o,s,n.config))}return r},{});return yi(i)?null:new ed(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:o}=yse(n,n.bin,i);return new ed(t,{[r]:o})}merge(t,n){for(const i of Te(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Lc([...this.bins[i].as,...t.bins[i].as],Nn)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(ds(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ds(this.bins).map(t=>t.field))}hash(){return`Bin ${Nn(this.bins)}`}assemble(){return ds(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,o=t.bin,{extent:s}=o,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(o,["extent"]),l=Object.assign(Object.assign(Object.assign({type:"bin",field:Il(t.field),as:i,signal:t.signal},DT(s)?{extent:null}:{extent:s}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!s&&t.extentSignal&&(n.push({type:"extent",field:Il(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const u of r)for(let c=0;c<2;c++)n.push({type:"formula",expr:We({field:i[c]},{expr:"datum"}),as:u[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class Fu extends vi{constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}clone(){return new Fu(null,new Set(this.dimensions),rn(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},o=new Set;return i&&(n.forEachFieldDef((s,a)=>{var l,u,c,d;const{aggregate:f,field:h}=s;if(f)if("count"===f)null!==(l=r["*"])&&void 0!==l||(r["*"]={}),r["*"].count=new Set([We(s,{forAs:!0})]);else{if(hf(f)||Xh(f)){const p=hf(f)?"argmin":"argmax",m=f[p];null!==(u=r[m])&&void 0!==u||(r[m]={}),r[m][p]=new Set([We({op:p,field:m},{forAs:!0})])}else null!==(c=r[h])&&void 0!==c||(r[h]={}),r[h][f]=new Set([We(s,{forAs:!0})]);Kh(a)&&"unaggregated"===n.scaleDomain(a)&&(null!==(d=r[h])&&void 0!==d||(r[h]={}),r[h].min=new Set([We({field:h,aggregate:"min"},{forAs:!0})]),r[h].max=new Set([We({field:h,aggregate:"max"},{forAs:!0})]))}else!function mUe(e,t,n,i){var r;const o=$r(i)?i.encoding[ff(t)]:void 0;if(Fl(n)&&$r(i)&&rre(n,o,i.markDef,i.config))e.add(We(n,{})),e.add(We(n,{suffix:"end"})),n.bin&&gw(n,t)&&e.add(We(n,{binSuffix:"range"}));else if(function r6e(e){return e in v5}(t)){const s=function i6e(e){switch(e){case $c:return"y";case ku:return"y2";case Vc:return"x";case Rl:return"x2"}}(t);e.add(i.getName(s))}else e.add(We(n));return Wg(n)&&function h9e(e){return it(e)&&"field"in e}(null===(r=n.scale)||void 0===r?void 0:r.range)&&e.add(n.scale.range.field),e}(o,a,s,n)}),o.size+Te(r).length!==0)?new Fu(t,o,r):null}static makeFromTransform(t,n){var i,r,o;const s=new Set,a={};for(const l of n.aggregate){const{op:u,field:c,as:d}=l;u&&("count"===u?(null!==(i=a["*"])&&void 0!==i||(a["*"]={}),a["*"].count=new Set([d||We(l,{forAs:!0})])):(null!==(r=a[c])&&void 0!==r||(a[c]={}),a[c][u]=new Set([d||We(l,{forAs:!0})])))}for(const l of null!==(o=n.groupby)&&void 0!==o?o:[])s.add(l);return s.size+Te(a).length===0?null:new Fu(t,s,a)}merge(t){return Nne(this.dimensions,t.dimensions)?(function _Ue(e,t){var n;for(const i of Te(t)){const r=t[i];for(const o of Te(r))i in e?e[i][o]=new Set([...null!==(n=e[i][o])&&void 0!==n?n:[],...r[o]]):e[i]={[o]:r[o]}}}(this.measures,t.measures),!0):(function j$e(...e){Gc.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Te(this.measures)])}producedFields(){const t=new Set;for(const n of Te(this.measures))for(const i of Te(this.measures[n])){const r=this.measures[n][i];0===r.size?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Nn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const o of Te(this.measures))for(const s of Te(this.measures[o]))for(const a of this.measures[o][s])i.push(a),t.push(s),n.push("*"===o?null:Il(o));return{type:"aggregate",groupby:[...this.dimensions].map(Il),ops:t,fields:n,as:i}}}class uy extends vi{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const o of Pl){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]=Object.assign({name:n.getName(`${o}_domain`),fields:[We(s),...Li(a)?[We(s,{binSuffix:"end"})]:[]]},qc(l)?{sortField:l}:Ce(l)?{sortIndexField:ay(s,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of Pl)this[n]&&(t+=` ${n.charAt(0)}:${Nn(this[n])}`);return t}get fields(){var t;const n=[];for(const i of Pl)(null===(t=this[i])||void 0===t?void 0:t.fields)&&n.push(...this[i].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of Pl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of zc){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if(wo(r)&&Qh(o)){const a=u8(pA(this.childModel,n));a?t[n]=a:ke(N5(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];r&&i&&i[r]&&(n?(o.push(`distinct_${i[r]}`),s.push("max")):(o.push(i[r]),s.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=FT,field:d}=l;o.push(d),s.push(c),a.push(We(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:null!=n?n:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:s,as:a}:{})]}}assembleFacetHeaderData(t){var n,i;const{columns:r}=this.model.layout,{layoutHeaders:o}=this.model.component,s=[],a={};for(const c of qj){for(const d of Yj){const f=null!==(n=o[c]&&o[c][d])&&void 0!==n?n:[];for(const h of f)if((null===(i=h.axes)||void 0===i?void 0:i.length)>0){a[c]=!0;break}}if(a[c]){const d=`length(data("${this.facet.name}"))`;s.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:"row"===c?r?{signal:`ceil(${d} / ${r})`}:1:r?{signal:`min(${d}, ${r})`}:{signal:d}}]})}}const{row:l,column:u}=a;return(l||u)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,t)),s}assemble(){var t,n;const i=[];let r=null;const o=this.getChildIndependentFieldsWithStep(),{column:s,row:a,facet:l}=this;if(s&&a&&(o.x||o.y)){r=`cross_${this.column.name}_${this.row.name}`;const u=[].concat(null!==(t=o.x)&&void 0!==t?t:[],null!==(n=o.y)&&void 0!==n?n:[]),c=u.map(()=>"distinct");i.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:c}]})}for(const u of[af,sf])this[u]&&i.push(this.assembleRowColumnHeaderData(u,r,o));if(l){const u=this.assembleFacetHeaderData(o);u&&i.push(...u)}return i}}function vse(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function vUe(e){const t={};return dT(e.filter,n=>{var i;if(Tie(n)){let r=null;L5(n)?r=Qa(n.equal):B5(n)?r=Qa(n.lte):j5(n)?r=Qa(n.lt):$5(n)?r=Qa(n.gt):V5(n)?r=Qa(n.gte):H5(n)?r=n.range[0]:U5(n)&&(r=(null!==(i=n.oneOf)&&void 0!==i?i:n.in)[0]),r&&(Vg(r)?t[n.field]="date":mi(r)?t[n.field]="number":Qe(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}class ps extends vi{constructor(t,n){super(t),this._parse=n}clone(){return new ps(null,rn(this._parse))}hash(){return`Parse ${Nn(this._parse)}`}static makeExplicit(t,n,i){var r;let o={};const s=n.data;return!rp(s)&&(null===(r=null==s?void 0:s.format)||void 0===r?void 0:r.parse)&&(o=s.format.parse),this.makeWithAncestors(t,o,{},i)}static makeWithAncestors(t,n,i,r){for(const a of Te(i)){const l=r.getWithExplicit(a);void 0!==l.value&&(l.explicit||l.value===i[a]||"derived"===l.value||"flatten"===i[a]?delete i[a]:ke(die(a,i[a],l.value)))}for(const a of Te(n)){const l=r.get(a);void 0!==l&&(l===n[a]?delete n[a]:ke(die(a,n[a],l)))}const o=new yf(n,i);r.copyAll(o);const s={};for(const a of Te(o.combine())){const l=o.get(a);null!==l&&(s[a]=l)}return 0===Te(s).length||r.parseNothing?null:new ps(t,s)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of Te(this._parse)){const i=this._parse[n];1===H_(n)&&(t[n]=i)}return t}producedFields(){return new Set(Te(this._parse))}dependentFields(){return new Set(Te(this._parse))}assembleTransforms(t=!1){return Te(this._parse).filter(n=>!t||H_(n)>1).map(n=>{const i=function yUe(e,t){const n=_5(e);return"number"===t?`toNumber(${n})`:"boolean"===t?`toBoolean(${n})`:"string"===t?`toString(${n})`:"date"===t?`toDate(${n})`:"flatten"===t?n:t.startsWith("date:")?`timeParse(${n},'${vse(t.slice(5,t.length))}')`:t.startsWith("utc:")?`utcParse(${n},'${vse(t.slice(4,t.length))}')`:(ke(function z6e(e){return`Unrecognized parse "${e}".`}(t)),null)}(n,this._parse[n]);return i?{type:"formula",expr:i,as:y5(n)}:null}).filter(n=>null!==n)}}class lp extends vi{clone(){return new lp(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([_w])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:_w}}}class Cw extends vi{constructor(t,n){super(t),this.params=n}clone(){return new Cw(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Nn(this.params)}`}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class Dw extends vi{constructor(t,n){super(t),this.params=n}clone(){return new Dw(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}hash(){return`Hash ${Nn(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class Kg extends vi{constructor(t){let n;if(super(null),null!=t||(t={name:"source"}),rp(t)||(n=t.format?Object.assign({},Ja(t.format,["parse"])):{}),yw(t))this._data={values:t.values};else if(ey(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Mn(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else goe(t)?this._data={values:[{type:"Sphere"}]}:(hoe(t)||rp(t))&&(this._data={});this._generator=rp(t),t.name&&(this._name=t.name),n&&!yi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var Sw,bse=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};function e8(e){return e instanceof Kg||e instanceof Cw||e instanceof Dw}class t8{constructor(){Sw.set(this,void 0),bse(this,Sw,!1,"f")}setModified(){bse(this,Sw,!0,"f")}get modifiedFlag(){return function(e,t,n,i){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}(this,Sw)}}Sw=new WeakMap;class Xg extends t8{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class n8 extends t8{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class CUe extends n8{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)void 0===i[n[r]]?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of Te(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class DUe extends n8{constructor(t){super(),this.requiresSelectionId=t&&Hj(t)}run(t){t instanceof lp&&(this.requiresSelectionId&&(e8(t.parent)||t.parent instanceof Fu||t.parent instanceof ps)||(this.setModified(),t.remove()))}}class SUe extends t8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Zc&&(i=t.producedFields(),p5(i,n)&&(this.setModified(),t.removeFormulas(n),0===t.producedFields.length&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class xUe extends n8{constructor(){super()}run(t){t instanceof Qs&&!t.isRequired()&&(this.setModified(),t.remove())}}class TUe extends Xg{run(t){if(!(e8(t)||t.numChildren()>1))for(const n of t.children)if(n instanceof ps)if(t instanceof ps)this.setModified(),t.merge(n);else{if(m5(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}class AUe extends Xg{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof ps);if(t.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const s of i){const a=s.parse;for(const l of Te(a))l in r?r[l]!==a[l]&&o.add(l):r[l]=a[l]}for(const s of o)delete r[s];if(!yi(r)){this.setModified();const s=new ps(t,r);for(const a of n){if(a instanceof ps)for(const l of Te(r))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof ps&&0===Te(a.parse).length&&a.remove()}}}}}class OUe extends Xg{run(t){t instanceof Qs||t.numChildren()>0||t instanceof uy||t instanceof Kg||(this.setModified(),t.remove())}}class NUe extends Xg{run(t){const n=t.children.filter(r=>r instanceof Zc),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class MUe extends Xg{run(t){const n=t.children.filter(r=>r instanceof Fu),i={};for(const r of n){const o=Nn(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of Te(i)){const o=i[r];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class kUe extends Xg{constructor(t){super(),this.model=t}run(t){const n=!(e8(t)||t instanceof oy||t instanceof ps||t instanceof lp),i=[],r=[];for(const o of t.children)o instanceof ed&&(n&&!m5(t.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ed?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class IUe extends Xg{run(t){const n=[...t.children];if(!Rg(n,s=>s instanceof Qs)||t.numChildren()<=1)return;const r=[];let o;for(const s of n)if(s instanceof Qs){let a=s;for(;1===a.numChildren();){const[l]=a.children;if(!(l instanceof Qs))break;a=l}r.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=o}}}class Jg extends vi{constructor(t,n){super(t),this.transform=n}clone(){return new Jg(null,rn(this.transform))}addDimensions(t){this.transform.groupby=Lc(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return null!==(n=t.as)&&void 0!==n?n:We(t)}hash(){return`JoinAggregateTransform ${Nn(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),t.push(void 0===o.field?null:o.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:i,ops:n,fields:t},void 0!==r?{groupby:r}:{})}}class vf extends vi{constructor(t,n){super(t),this._stack=n}clone(){return new vf(null,rn(this._stack))}static makeFromTransform(t,n){const{stack:i,groupby:r,as:o,offset:s="zero"}=n,a=[],l=[];if(void 0!==n.sort)for(const d of n.sort)a.push(d.field),l.push(Br(d.order,"ascending"));const u={field:a,order:l};let c;return c=function PUe(e){return Ce(e)&&e.every(t=>Qe(t))&&e.length>1}(o)?o:Qe(o)?[o,`${o}_end`]:[`${n.stack}_start`,`${n.stack}_end`],new vf(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=i,u=o.map(h=>Xc(r[h])).filter(h=>!!h),c=function RUe(e){return e.stack.stackBy.reduce((t,n)=>{const r=We(n.fieldDef);return r&&t.push(r),t},[])}(n),d=n.encoding.order;let f;return f=Ce(d)||Ue(d)?tie(d):c.reduce((h,p)=>(h.field.push(p),h.order.push("y"===s?"descending":"ascending"),h),{field:[],order:[]}),new vf(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Nn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[We(r,{binSuffix:"mid"})]:[We(r,{}),We(r,{binSuffix:"end"})]:[We(r)]).flat():null!=i?i:[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:d=.5,bin:f}=c;if(f){const h=We(c,{expr:"datum"}),p=We(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${d}*${h}+${1-d}*${p}`,as:We(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...o,...n],key:We(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:u,offset:a}),t}}class cy extends vi{constructor(t,n){super(t),this.transform=n}clone(){return new cy(null,rn(this.transform))}addDimensions(t){this.transform.groupby=Lc(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const i=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(i.add,i),(null!==(n=this.transform.sort)&&void 0!==n?n:[]).forEach(r=>i.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>void 0!==r).forEach(i.add,i),i}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return null!==(n=t.as)&&void 0!==n?n:We(t)}hash(){return`WindowTransform ${Nn(this.transform)}`}assemble(){var t;const n=[],i=[],r=[],o=[];for(const f of this.transform.window)i.push(f.op),r.push(this.getDefaultName(f)),o.push(void 0===f.param?null:f.param),n.push(void 0===f.field?null:f.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&null===s[0]&&null===s[1]&&i.every(f=>x5(f)))return Object.assign({type:"joinaggregate",as:r,ops:i,fields:n},void 0!==a?{groupby:a}:{});const l=[],u=[];if(void 0!==this.transform.sort)for(const f of this.transform.sort)l.push(f.field),u.push(null!==(t=f.order)&&void 0!==t?t:"ascending");const d=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:r,ops:i,fields:n,sort:{field:l,order:u}},void 0!==d?{ignorePeers:d}:{}),void 0!==a?{groupby:a}:{}),void 0!==s?{frame:s}:{})}}function i8(e){if(e instanceof uy)if(1!==e.numChildren()||e.children[0]instanceof Qs){const t=e.model.component.data.main;wse(t);const n=function FUe(e){return function t(n){if(!(n instanceof uy)){const i=n.clone();if(i instanceof Qs){const r=r8+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof Fu||i instanceof vf||i instanceof cy||i instanceof Jg)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}}(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else{const t=e.children[0];(t instanceof Fu||t instanceof vf||t instanceof cy||t instanceof Jg)&&t.addDimensions(e.fields),t.swapWithParent(),i8(e)}else e.children.map(i8)}function wse(e){if(e instanceof Qs&&e.type===Ai.Main&&1===e.numChildren()){const t=e.children[0];t instanceof uy||(t.swapWithParent(),wse(e))}}const r8="scale_";function o8(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!o8(t.children))return!1}return!0}function Lu(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function Ese(e,t,n){let i=e.sources,r=!1;return r=Lu(new xUe,i)||r,r=Lu(new DUe(t),i)||r,i=i.filter(o=>o.numChildren()>0),r=Lu(new OUe,i)||r,i=i.filter(o=>o.numChildren()>0),n||(r=Lu(new TUe,i)||r,r=Lu(new kUe(t),i)||r,r=Lu(new SUe,i)||r,r=Lu(new AUe,i)||r,r=Lu(new MUe,i)||r,r=Lu(new NUe,i)||r,r=Lu(new CUe,i)||r,r=Lu(new IUe,i)||r),e.sources=i,r}class Oa{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Oa(()=>t(n))}}function Cse(e){$r(e)?function BUe(e){const t=e.component.scales;for(const n of Te(t)){const i=HUe(e,n);if(t[n].setWithExplicit("domains",i),zUe(e,n),e.component.data.isFaceted){let o=e;for(;!ju(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[n])for(const a of i.value)pf(a)&&(a.data=r8+a.data.replace(r8,""))}}}(e):function $Ue(e){for(const n of e.children)Cse(n);const t=e.component.scales;for(const n of Te(t)){let i,r=null;for(const o of e.children){const s=o.component.scales[n];if(s){i=void 0===i?s.getWithExplicit("domains"):ip(i,s.getWithExplicit("domains"),"domains","scale",l8);const a=s.get("selectionExtent");r&&a&&r.param!==a.param&&ke("The same selection must be used to override scale domains in a layered view."),r=a}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}(e)}function HUe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=function VUe(e,t,n,i){if("unaggregated"===e){const{valid:r,reason:o}=Dse(t,n);if(!r)return void ke(o)}else if(void 0===e&&i.useUnaggregatedDomain){const{valid:r}=Dse(t,n);if(r)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:r})),"x"===t&&io(i.x2)?io(i.x)?ip(up(n,r,e,"x"),up(n,r,e,"x2"),"domain","scale",l8):up(n,r,e,"x2"):"y"===t&&io(i.y2)?io(i.y)?ip(up(n,r,e,"y"),up(n,r,e,"y2"),"domain","scale",l8):up(n,r,e,"y2"):up(n,r,e,t)}function s8(e,t,n){var i;const r=null===(i=Js(n))||void 0===i?void 0:i.unit;return"temporal"===t||r?function UUe(e,t,n){return e.map(i=>({signal:`{data: ${WT(i,{timeUnit:n,type:t})}}`}))}(e,t,r):[e]}function up(e,t,n,i){const{encoding:r}=n,o=io(r[i]),{type:s}=o,a=o.timeUnit;if(function f9e(e){return e&&e.unionWith}(t)){const d=up(e,void 0,n,i),f=s8(t.unionWith,s,a);return Qc([...d.value,...f])}if(_t(t))return Qc([t]);if(t&&"unaggregated"!==t&&!Pie(t))return Qc(s8(t,s,a));const l=n.stack;if(l&&i===l.fieldChannel){if("normalize"===l.offset)return el([[0,1]]);const d=n.requestDataName(Ai.Main);return el([{data:d,field:n.vgField(i,{suffix:"start"})},{data:d,field:n.vgField(i,{suffix:"end"})}])}const u=Kh(i)&&Ue(o)?function GUe(e,t,n){if(!wo(n))return;const i=e.fieldDef(t),r=i.sort;if(ere(r))return{op:"min",field:ay(i,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(qc(r))return a8(r,o&&!s.has(r.field));if(Zie(r)){const{encoding:a,order:l}=r,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=o&&!s.has(d);if(hf(c)||Xh(c))return a8({field:We(u),order:l},f);if(x5(c)||!c)return a8({op:c,field:d,order:l},f)}else{if("descending"===r)return{op:"min",field:e.vgField(t),order:"descending"};if(Mn(["ascending",void 0],r))return!0}}(n,i,e):void 0;if(Yc(o))return el(s8([o.datum],s,a));const c=o;if("unaggregated"===t){const d=n.requestDataName(Ai.Main),{field:f}=o;return el([{data:d,field:We({field:f,aggregate:"min"})},{data:d,field:We({field:f,aggregate:"max"})}])}if(Li(c.bin)){if(wo(e))return el("bin-ordinal"===e?[]:[{data:tw(u)?n.requestDataName(Ai.Main):n.requestDataName(Ai.Raw),field:n.vgField(i,gw(c,i)?{binSuffix:"range"}:{}),sort:!0!==u&&it(u)?u:{field:n.vgField(i,{}),op:"min"}}]);{const{bin:d}=c;if(Li(d)){const f=Zj(n,c.field,d);return el([new Oa(()=>{const h=n.getSignalName(f);return`[${h}.start, ${h}.stop]`})])}return el([{data:n.requestDataName(Ai.Main),field:n.vgField(i,{})}])}}if(c.timeUnit&&Mn(["time","utc"],e)&&rre(c,$r(n)?n.encoding[ff(i)]:void 0,n.markDef,n.config)){const d=n.requestDataName(Ai.Main);return el([{data:d,field:n.vgField(i)},{data:d,field:n.vgField(i,{suffix:"end"})}])}return el(u?[{data:tw(u)?n.requestDataName(Ai.Main):n.requestDataName(Ai.Raw),field:n.vgField(i),sort:u}]:[{data:n.requestDataName(Ai.Main),field:n.vgField(i)}])}function a8(e,t){const{op:n,field:i,order:r}=e;return Object.assign(Object.assign({op:null!=n?n:t?"sum":FT},i?{field:Il(i)}:{}),r?{order:r}:{})}function zUe(e,t){var n;const i=e.component.scales[t],r=e.specifiedScales[t].domain,o=null===(n=e.fieldDef(t))||void 0===n?void 0:n.bin,s=Pie(r)&&r,a=Bg(o)&&DT(o.extent)&&o.extent;(s||a)&&i.set("selectionExtent",null!=s?s:a,!0)}function Dse(e,t){const{aggregate:n,type:i}=e;return n?Qe(n)&&!D6e.has(n)?{valid:!1,reason:p$e(n)}:"quantitative"===i&&"log"===t?{valid:!1,reason:g$e(e)}:{valid:!0}:{valid:!1,reason:h$e(e)}}function l8(e,t,n,i){return e.explicit&&t.explicit&&ke(function b$e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fi(n)} and ${Fi(i)}). Using the union of the two domains.`}(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function u8(e){if(pf(e)&&Qe(e.field))return e.field;if(function x6e(e){return!Ce(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(pf(n)&&Qe(n.field))if(t){if(t!==n.field)return ke("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return ke("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function T6e(e){return!Ce(e)&&"fields"in e&&"data"in e}(e)){ke("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return Qe(t)?t:void 0}}function pA(e,t){return function WUe(e){const t=Lc(e.map(s=>pf(s)?function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(s,["sort"]):s),Nn),n=Lc(e.map(s=>{if(pf(s)){const a=s.sort;return void 0!==a&&!tw(a)&&("op"in a&&"count"===a.op&&delete a.field,"ascending"===a.order&&delete a.order),a}}).filter(s=>void 0!==s),Nn);if(0===t.length)return;if(1===t.length){const s=e[0];if(pf(s)&&n.length>0){let a=n[0];return n.length>1?(ke(_ie),a=!0):it(a)&&"field"in a&&s.field===a.field&&(a=!a.order||{order:a.order}),Object.assign(Object.assign({},s),{sort:a})}return s}const i=Lc(n.map(s=>tw(s)||!("op"in s)||Qe(s.op)&&s.op in b6e?s:(ke(function E$e(e){return`Dropping sort property ${Fi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(s)),!0)),Nn);let r;1===i.length?r=i[0]:i.length>1&&(ke(_ie),r=!0);const o=Lc(e.map(s=>pf(s)?s.data:null),s=>s);return Object.assign(1===o.length&&null!==o[0]?{data:o[0],fields:t.map(a=>a.field)}:{fields:t},r?{sort:r}:{})}(e.component.scales[t].get("domains").map(r=>(pf(r)&&(r.data=e.lookupDataSource(r.data)),r)))}function Sse(e){return dy(e)||f8(e)?e.children.reduce((t,n)=>t.concat(Sse(n)),xse(e)):xse(e)}function xse(e){return Te(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:o,type:s,selectionExtent:a,reverse:c}=r,d=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(r,["name","type","selectionExtent","domains","range","reverse"]),f=function YUe(e,t,n,i){if($o(n)){if(Qh(e))return{step:{signal:`${t}_step`}}}else if(it(e)&&pf(e))return Object.assign(Object.assign({},e),{data:i.lookupDataSource(e.data)});return e}(r.range,o,n,e),h=pA(e,n),p=a?function LVe(e,t,n,i){const r=Uoe(e,t.param,t);return{signal:Za(n.get("type"))&&Ce(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}(e,a,i,h):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:s},h?{domain:h}:{}),p?{domainRaw:p}:{}),{range:f}),void 0!==c?{reverse:c}:{}),d)),t},[])}class Tse extends yf{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||Rg(this.get("domains"),t=>Ce(t)&&2===t.length&&t[0]<=0&&t[1]>=0)}}const KUe=["range","scheme"];function Ase(e,t){const n=e.fieldDef(t);if(null==n?void 0:n.bin){const{bin:i,field:r}=n,o=xa(t),s=e.getName(o);if(it(i)&&i.binned&&void 0!==i.step)return new Oa(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(Li(i)){const a=Zj(e,r,i);return new Oa(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function JUe(e,t){const n=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(const d of KUe)if(void 0!==n[d]){const f=Y5(o,d),h=Fie(e,d);if(f)if(h)ke(h);else switch(d){case"range":{const p=n.range;if(Ce(p)){if($o(e))return Qc(p.map(m=>{if("width"===m||"height"===m){const _=t.getName(m),b=t.getSignalName.bind(t);return Oa.fromName(b,_)}return m}))}else if(it(p))return Qc({data:t.requestDataName(Ai.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Qc(p)}case"scheme":return Qc(QUe(n[d]))}else ke(gie(o,d,e))}const s=e===nr||"xOffset"===e?"width":"height",a=i[s];if(Jc(a))if($o(e))if(wo(o)){const d=Ose(a,t,e);if(d)return Qc({step:d})}else ke(mie(s));else if(G_(e)&&"band"===t.getScaleComponent(e===Uh?"x":"y").get("type")){const p=Nse(a,o);if(p)return Qc(p)}const{rangeMin:l,rangeMax:u}=n,c=function ZUe(e,t){const{size:n,config:i,mark:r,encoding:o}=t,s=t.getSignalName.bind(t),{type:a}=io(o[e]),u=t.getScaleComponent(e).get("type"),{domain:c,domainMid:d}=t.specifiedScales[e];switch(e){case nr:case bo:{if(Mn(["point","band"],u)){const p=Mse(e,n,i.view);if(Jc(p))return{step:Ose(p,t,e)}}const f=xa(e),h=t.getName(f);return e===bo&&Za(u)?[Oa.fromName(s,h),0]:[0,Oa.fromName(s,h)]}case Uh:case U_:return function eze(e,t,n){const i=e===Uh?"x":"y",o=t.getScaleComponent(i).get("type"),s=t.scaleName(i);if("band"===o){const a=Mse(i,t.size,t.config.view);if(Jc(a)){const l=Nse(a,n);if(l)return l}return[0,{signal:`bandwidth('${s}')`}]}return Ane(`Cannot use ${e} scale if ${i} scale is not discrete.`)}(e,t,u);case cf:{const h=kse(r,t.component.scales[e].get("zero"),i),p=function ize(e,t,n,i){const r={x:Ase(n,"x"),y:Ase(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==i.scale.maxBandSize)return i.scale.maxBandSize;const o=Rse(t,r,i.view);return mi(o)?o-1:new Oa(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=Rse(t,r,i.view);return mi(o)?Math.pow(.95*o,2):new Oa(()=>`pow(0.95 * ${o.signal}, 2)`)}}throw new Error(xT("size",e))}(r,n,t,i);return Y_(u)?function nze(e,t,n){const i=()=>{const r=gf(t),o=gf(e),s=`(${r} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${r} + ${s}, ${s})`};return _t(t)?new Oa(i):{signal:i()}}(h,p,function tze(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&Ce(n)?n.length+1:(ke(function R$e(e){return`Domain for ${e} is required for threshold scale.`}(i)),3)}}(u,i,c,e)):[h,p]}case Mu:return[0,2*Math.PI];case Fg:return[0,360];case Bc:return[0,new Oa(()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`)];case Wh:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case qh:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Sa:return"symbol";case Da:case Hc:case Uc:return"ordinal"===u?"nominal"===a?"category":"ordinal":void 0!==d?"diverging":"rect"===r||"geoshape"===r?"heatmap":"ramp";case df:case zh:case Gh:return[i.scale.minOpacity,i.scale.maxOpacity]}}(e,t);return(void 0!==l||void 0!==u)&&Y5(o,"rangeMin")&&Ce(c)&&2===c.length?Qc([null!=l?l:c[0],null!=u?u:c[1]]):el(c)}function QUe(e){return function d9e(e){return!Qe(e)&&!!e.name}(e)?Object.assign({scheme:e.name},Ja(e,["name"])):{scheme:e}}function Ose(e,t,n){var i,r,o,s,a;const{encoding:l}=t,u=t.getScaleComponent(n),c=Hne(n),d=l[c];if("offset"===Bre({step:e,offsetIsDiscrete:Kt(d)&&Oie(d.type)})&&yre(l,c)){const h=t.getScaleComponent(c);let m=`domain('${t.scaleName(c)}').length`;"band"===h.get("type")&&(m=`bandspace(${m}, ${null!==(r=null!==(i=h.get("paddingInner"))&&void 0!==i?i:h.get("padding"))&&void 0!==r?r:0}, ${null!==(s=null!==(o=h.get("paddingOuter"))&&void 0!==o?o:h.get("padding"))&&void 0!==s?s:0})`);const _=null!==(a=u.get("paddingInner"))&&void 0!==a?a:u.get("padding");return{signal:`${e.step} * ${m} / (1-${N6e(_)})`}}return e.step}function Nse(e,t){if("offset"===Bre({step:e,offsetIsDiscrete:wo(t)}))return{step:e.step}}function Mse(e,t,n){const i=e===nr?"width":"height";return t[i]||eA(n,i)}function kse(e,t,n){if(t)return _t(t)?{signal:`${t.signal} ? 0 : ${kse(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(xT("size",e))}function Rse(e,t,n){const i=Jc(e.width)?e.width.step:ZT(n,"width"),r=Jc(e.height)?e.height.step:ZT(n,"height");return t.x||t.y?new Oa(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function Pse(e,t){$r(e)?function rze(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:s}=e;for(const a of Te(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),d=io(r[a]),f=l[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),_=Y5(h,t),b=Fie(a,t);if(void 0!==f&&(_?b&&ke(b):ke(gie(h,t,a))),_&&void 0===b)if(void 0!==f){const v=d.timeUnit,D=d.type;switch(t){case"domainMax":case"domainMin":Vg(l[t])||"temporal"===D||v?u.set(t,{signal:WT(l[t],{type:D,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=t in Fse?Fse[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:cj(r,a)}):i.scale[t];void 0!==v&&u.set(t,v,!1)}}}(e,t):jse(e,t)}const Fse={bins:({model:e,fieldOrDatumDef:t})=>Ue(t)?function oze(e,t){const n=t.bin;if(Li(n)){const i=Zj(e,t.field,n);return new Oa(()=>e.getSignalName(i))}if(Xs(n)&&Bg(n)&&void 0!==n.step)return{step:n.step}}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function sze(e,t){if(Mn([Da,Hc,Uc],e)&&"nominal"!==t)return"hcl"}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>function aze(e,t,n,i,r,o){var s;if(!((null===(s=Xc(o))||void 0===s?void 0:s.bin)||Ce(n)||null!=r||null!=i||Mn(["time","utc"],e)))return!!$o(t)||void 0}(e,t,n,i,r,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>function lze(e,t,n,i,r,o){if($o(e)){if(Iu(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:s,orient:a}=r;if("bar"===s&&(!Ue(i)||!i.bin&&!i.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if("point"===t)return n.pointPadding}}(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:o})=>function uze(e,t,n,i,r,o=!1){if(void 0===e){if($o(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=r;return o?u:Br(s,"bar"===n?a:l)}if(G_(t)&&"band"===i)return r.offsetBandPaddingInner}}(e,t,n.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>function cze(e,t,n,i,r,o=!1){if(void 0===e)if($o(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=r;if(o)return a;if("band"===n)return Br(s,_t(i)?{signal:`${i.signal}/2`}:i/2)}else if(G_(t)){if("point"===n)return.5;if("band"===n)return r.offsetBandPaddingOuter}}(e,t,n,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>function dze(e,t,n,i){return"x"===n&&void 0!==i.xReverse?Za(e)&&"descending"===t?_t(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:!(!Za(e)||"descending"!==t)||void 0}(t,Ue(e)?e.sort:void 0,n,i.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r})=>function fze(e,t,n,i,r){if(n&&"unaggregated"!==n&&Za(r)){if(Ce(n)){const a=n[n.length-1];if(n[0]<=0&&a>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!Y_(r))return!0;if((!Ue(t)||!t.bin)&&Mn([...zc,...f6e],e)){const{orient:s,type:a}=i;return!(Mn(["bar","area","line","trail"],a)&&("horizontal"===s&&"y"===e||"vertical"===s&&"x"===e))}return!1}(e,t,n,i,r)};function Lse(e){$r(e)?function XUe(e){const t=e.component.scales;for(const n of CT){const i=t[n];if(!i)continue;const r=JUe(n,e);i.setWithExplicit("range",r)}}(e):jse(e,"range")}function jse(e,t){const n=e.component.scales;for(const i of e.children)"range"===t?Lse(i):Pse(i,t);for(const i of Te(n)){let r;for(const o of e.children){const s=o.component.scales[i];s&&(r=ip(r,s.getWithExplicit(t),t,"scale",foe((l,u)=>"range"===t&&l.step&&u.step?l.step-u.step:0)))}n[i].setWithExplicit(t,r)}}function hze(e,t,n,i,r=!1){const o=function pze(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":if(z_(e)||"discrete"===S5(e))return"shape"===e&&"ordinal"===t.type&&ke(k5(e,"ordinal")),"ordinal";if($o(e)||G_(e)){if(Mn(["rect","bar","image","rule"],n.type)||i)return"band"}else if("arc"===n.type&&e in E5)return"band";return K_(n[xa(e)])||sj(t)&&(null===(r=t.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return z_(e)?"time":"discrete"===S5(e)?(ke(k5(e,"temporal")),"ordinal"):Ue(t)&&t.timeUnit&&Js(t.timeUnit).utc?"utc":"time";case"quantitative":return z_(e)?Ue(t)&&Li(t.bin)?"bin-ordinal":"linear":"discrete"===S5(e)?(ke(k5(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(hie(t.type))}(t,n,i,r),{type:s}=e;return Kh(t)?void 0!==s?function _9e(e,t,n=!1){if(!Kh(e))return!1;switch(e){case nr:case bo:case Uh:case U_:case Mu:case Bc:return!(!Iu(t)&&"band"!==t)||"point"===t&&!n;case cf:case Wh:case df:case zh:case Gh:case Fg:return Iu(t)||Y_(t)||Mn(["band","point","ordinal"],t);case Da:case Hc:case Uc:return"band"!==t;case qh:case Sa:return"ordinal"===t||Y_(t)}}(t,s)?Ue(n)&&!function m9e(e,t){return Mn([G5,W5],t)?void 0===e||wo(e):t===W_?Mn(["time","utc",void 0],e):t!==Ug||Iie(e)||Y_(e)||void 0===e}(s,n.type)?(ke(function y$e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(s,o)),o):s:(ke(function _$e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,s,o)),o):o:null}function Bse(e){e.component.scales=$r(e)?function mze(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const o of CT){const s=io(t[o]);if(s&&n===Bie&&o===Sa&&s.type===q_)continue;let a=s&&s.scale;if(!G_(o)||cj(t,Une(o))){if(s&&null!==a&&!1!==a){null!=a||(a={});const u=hze(a,o,s,i,cj(t,o));r[o]=new Tse(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}else a&&ke(i$e(o))}return r}(e):function yze(e){var t,n;const i=e.component.scales={},r={},o=e.component.resolve;for(const s of e.children){Bse(s);for(const a of Te(s.component.scales))if(null!==(t=(n=o.scale)[a])&&void 0!==t||(n[a]=ise(a,e)),"shared"===o.scale[a]){const l=r[a],u=s.component.scales[a].getWithExplicit("type");l?s9e(l.value,u.value)?r[a]=ip(l,u,"type","scale",_ze):(o.scale[a]="independent",delete r[a]):r[a]=u}}for(const s of Te(r)){const a=e.scaleName(s,!0);i[s]=new Tse(a,r[s]);for(const u of e.children){const c=u.component.scales[s];c&&(u.renameScale(c.get("name"),a),c.merged=!0)}}return i}(e)}const _ze=foe((e,t)=>Nie(e)-Nie(t));var c8=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class d8{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return void 0!==this.nameMap[t]}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function $r(e){return"unit"===(null==e?void 0:e.type)}function ju(e){return"facet"===(null==e?void 0:e.type)}function f8(e){return"concat"===(null==e?void 0:e.type)}function dy(e){return"layer"===(null==e?void 0:e.type)}class h8{constructor(t,n,i,r,o,s,a){var l,u;this.type=n,this.parent=i,this.config=o,this.correctDataNames=c=>{var d,f,h;return(null===(d=c.from)||void 0===d?void 0:d.data)&&(c.from.data=this.lookupDataSource(c.from.data)),(null===(h=null===(f=c.from)||void 0===f?void 0:f.facet)||void 0===h?void 0:h.data)&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c},this.parent=i,this.config=o,this.view=Ta(a),this.name=null!==(l=t.name)&&void 0!==l?l:r,this.title=Jh(t.title)?{text:t.title}:t.title?Ta(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new d8,this.projectionNameMap=i?i.projectionNameMap:new d8,this.signalNameMap=i?i.signalNameMap:new d8,this.data=t.data,this.description=t.description,this.transforms=function bVe(e){return e.map(t=>Nj(t)?{filter:$_(t.filter,n9e)}:t)}(null!==(u=t.transform)&&void 0!==u?u:[]),this.layout="layer"===n||"unit"===n?{}:function x7e(e,t,n){var i,r;const o=n[t],s={},{spacing:a,columns:l}=o;void 0!==a&&(s.spacing=a),void 0!==l&&(LT(e)&&!hw(e.facet)||Cj(e))&&(s.columns=l),QT(e)&&(s.columns=1);for(const u of S7e)if(void 0!==e[u])if("spacing"===u){const c=e[u];s[u]=mi(c)?c:{row:null!==(i=c.row)&&void 0!==i?i:a,column:null!==(r=c.column)&&void 0!==r?r:a}}else s[u]=e[u];return s}(t,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:LT(t)||(null==i?void 0:i.component.data.isFaceted)&&void 0===t.data},layoutSize:new yf,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},s?rn(s):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function gze(e,{ignoreRange:t}={}){Bse(e),Cse(e);for(const n of g9e)Pse(e,n);t||Lse(e)}(this)}parseProjection(){mse(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){dse(this)}assembleEncodeFromView(t){const i=c8(t,["style"]),r={};for(const o of Te(i)){const s=i[o];void 0!==s&&(r[o]=Bi(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),t||(this.description&&(n.description=Bi(this.description)),"unit"!==this.type&&"layer"!==this.type)?yi(n)?void 0:n:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=n?n:{})}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,i=c8(t,["spacing"]),{component:r,config:o}=this,s=function PHe(e,t){const n={};for(const i of Pl){const r=e[i];if(null==r?void 0:r.facetFieldDef){const{titleAnchor:o,titleOrient:s}=dA(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),a=cA(i,s),l=RHe(o,a);void 0!==l&&(n[a]=l)}}return yi(n)?void 0:n}(r.layoutHeaders,o);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),i),s?{titleBand:s}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Pl)t[i].title&&n.push(OHe(this,i));for(const i of qj)n=n.concat(NHe(this,i));return n}assembleAxes(){return function _He(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Ew(r,"grid",t)),...i.map(r=>Ew(r,"grid",t)),...n.map(r=>Ew(r,"main",t)),...i.map(r=>Ew(r,"main",t))].filter(r=>r)}(this.component.axes,this.config)}assembleLegends(){return hse(this)}assembleProjections(){return function oUe(e){return dy(e)||f8(e)?function sUe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),pse(e))}(e):pse(e)}(this)}assembleTitle(){var t,n,i;const r=null!==(t=this.title)&&void 0!==t?t:{},{encoding:o}=r,s=c8(r,["encoding"]),a=Object.assign(Object.assign(Object.assign({},Kne(this.config.title).nonMarkTitleProperties),s),o?{encode:{update:o}}:{});if(a.text)return Mn(["unit","layer"],this.type)?Mn(["middle",void 0],a.anchor)&&(null!==(n=a.frame)&&void 0!==n||(a.frame="group")):null!==(i=a.anchor)&&void 0!==i||(a.anchor="start"),yi(a)?void 0:a}assembleGroup(t=[]){const n={};(t=t.concat(this.assembleSignals())).length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||ju(this.parent)?Sse(this):[];r.length>0&&(n.scales=r);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Wi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ai[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(ju(this.parent)){const i=ET(tse(t)),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),s=r.get("range");if(wo(o)&&Qh(s)){const a=r.get("name"),u=u8(pA(this,i));return u?{signal:ese(a,r,We({aggregate:"distinct",field:u},{expr:"datum"}))}:(ke(N5(i)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){return n?this.getName(t):$ne(t)&&Kh(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(function P6e(e){return`Cannot find a selection named "${e}".`}(n));return i}hasAxisOrientSignalRef(){var t,n;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some(i=>i.hasOrientSignalRef()))||(null===(n=this.component.axes.y)||void 0===n?void 0:n.some(i=>i.hasOrientSignalRef()))}}class $se extends h8{vgField(t,n={}){const i=this.fieldDef(t);if(i)return We(i,n)}reduceFieldDef(t,n){return function i7e(e,t,n,i){return e?Te(e).reduce((r,o)=>{const s=e[o];return Ce(s)?s.reduce((a,l)=>t.call(i,a,l,o),r):t.call(i,r,s,o)},n):n}(this.getMapping(),(i,r,o)=>{const s=Xc(r);return s?t(i,s,o):i},n)}forEachFieldDef(t,n){fj(this.getMapping(),(i,r)=>{const o=Xc(i);o&&t(o,r)},n)}}class gA extends vi{constructor(t,n){var i,r,o;super(t),this.transform=n,this.transform=rn(n);const s=null!==(i=this.transform.as)&&void 0!==i?i:[void 0,void 0];this.transform.as=[null!==(r=s[0])&&void 0!==r?r:"value",null!==(o=s[1])&&void 0!==o?o:"density"]}clone(){return new gA(null,rn(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Nn(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["density"]);return Object.assign({type:"kde",field:n},i)}}class xw extends vi{constructor(t,n){super(t),this.filter=n}clone(){return new xw(null,Object.assign({},this.filter))}static make(t,n){const{config:i,mark:r,markDef:o}=n;if("filter"!==ii("invalid",o,i))return null;const a=n.reduceFieldDef((l,u,c)=>{const d=Kh(c)&&n.getScaleComponent(c);return d&&Za(d.get("type"))&&"count"!==u.aggregate&&!ep(r)&&(l[u.field]=u),l},{});return Te(a).length?new xw(t,a):null}dependentFields(){return new Set(Te(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Nn(this.filter)}`}assemble(){const t=Te(this.filter).reduce((n,i)=>{const r=this.filter[i],o=We(r,{expr:"datum"});return null!==r&&("temporal"===r.type?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):"quantitative"===r.type&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class mA extends vi{constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,s)=>{var a;return null!==(a=r[s])&&void 0!==a?a:o})}clone(){return new mA(this.parent,rn(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Nn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class _A extends vi{constructor(t,n){var i,r,o;super(t),this.transform=n,this.transform=rn(n);const s=null!==(i=this.transform.as)&&void 0!==i?i:[void 0,void 0];this.transform.as=[null!==(r=s[0])&&void 0!==r?r:"key",null!==(o=s[1])&&void 0!==o?o:"value"]}clone(){return new _A(null,rn(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Nn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class fy extends vi{constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}clone(){return new fy(null,rn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Vc,$c],[Rl,ku]]){const o=r.map(s=>{const a=io(n.encoding[s]);return Ue(a)?a.field:Yc(a)?{expr:`${a.datum}`}:Pu(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new fy(t,o,null,n.getName("geojson_"+i++)))}if(n.channelHasField(Sa)){const r=n.typedFieldDef(Sa);r.type===q_&&(t=new fy(t,null,r.field,n.getName("geojson_"+i++)))}return t}dependentFields(){var t;const n=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(Qe);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Nn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class Tw extends vi{constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}clone(){return new Tw(null,this.projection,rn(this.fields),rn(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Vc,$c],[Rl,ku]]){const r=i.map(s=>{const a=io(n.encoding[s]);return Ue(a)?a.field:Yc(a)?{expr:`${a.datum}`}:Pu(a)?{expr:`${a.value}`}:void 0}),o=i[0]===Rl?"2":"";(r[0]||r[1])&&(t=new Tw(t,n.projectionName(),r,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Qe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Nn(this.fields)} ${Nn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Qg extends vi{constructor(t,n){super(t),this.transform=n}clone(){return new Qg(null,rn(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Qg(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,o=i.y;if(Ue(r)&&Ue(o)){const s=r.impute?r:o.impute?o:void 0;if(void 0===s)return;const a=r.impute?o:o.impute?r:void 0,{method:l,value:u,frame:c,keyvals:d}=s.impute,f=bre(n.mark,i);return new Qg(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:s.field,key:a.field},l?{method:l}:{}),void 0!==u?{value:u}:{}),c?{frame:c}:{}),void 0!==d?{keyvals:d}:{}),f.length?{groupby:f}:{}))}return null}hash(){return`Impute ${Nn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:o,value:s,frame:a=[null,null]}=this.transform,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},i?{keyvals:nVe(i)?this.processSequence(i):i}:{}),{method:"value"}),o?{groupby:o}:{}),{value:r&&"value"!==r?null:s});return r&&"value"!==r?[l,Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1},o?{groupby:o}:{}),{type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t}]:[l]}}class yA extends vi{constructor(t,n){var i,r,o;super(t),this.transform=n,this.transform=rn(n);const s=null!==(i=this.transform.as)&&void 0!==i?i:[void 0,void 0];this.transform.as=[null!==(r=s[0])&&void 0!==r?r:n.on,null!==(o=s[1])&&void 0!==o?o:n.loess]}clone(){return new yA(null,rn(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Nn(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:i}=t,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["loess","on"]);return Object.assign({type:"loess",x:i,y:n},r)}}class Aw extends vi{constructor(t,n,i){super(t),this.transform=n,this.secondary=i}clone(){return new Aw(null,rn(this.transform),this.secondary)}static make(t,n,i,r){const o=n.component.data.sources,{from:s}=i;let a=null;if(function iVe(e){return"data"in e}(s)){let l=zse(s.data,o);l||(l=new Kg(s.data),o.push(l));const u=n.getName(`lookup_${r}`);a=new Qs(l,u,Ai.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(function rVe(e){return"param"in e}(s)){const l=s.param;let u;i=Object.assign({as:l},i);try{u=n.getSelectionComponent(Wi(l),l)}catch(c){throw new Error(function j6e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}(l))}if(a=u.materialized,!a)throw new Error(function B6e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(l))}return new Aw(t,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ze(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Nn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Ze(this.transform.as)}:{});else{let n=this.transform.as;Qe(n)||(ke('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}class vA extends vi{constructor(t,n){var i,r,o;super(t),this.transform=n,this.transform=rn(n);const s=null!==(i=this.transform.as)&&void 0!==i?i:[void 0,void 0];this.transform.as=[null!==(r=s[0])&&void 0!==r?r:"prob",null!==(o=s[1])&&void 0!==o?o:"value"]}clone(){return new vA(null,rn(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Nn(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["quantile"]);return Object.assign({type:"quantile",field:n},i)}}class bA extends vi{constructor(t,n){var i,r,o;super(t),this.transform=n,this.transform=rn(n);const s=null!==(i=this.transform.as)&&void 0!==i?i:[void 0,void 0];this.transform.as=[null!==(r=s[0])&&void 0!==r?r:n.on,null!==(o=s[1])&&void 0!==o?o:n.regression]}clone(){return new bA(null,rn(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Nn(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:i}=t,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["regression","on"]);return Object.assign({type:"regression",x:i,y:n},r)}}class wA extends vi{constructor(t,n){super(t),this.transform=n}clone(){return new wA(null,rn(this.transform))}addDimensions(t){var n;this.transform.groupby=Lc((null!==(n=this.transform.groupby)&&void 0!==n?n:[]).concat(t),i=>i)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}hash(){return`PivotTransform ${Nn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:o}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},void 0!==r?{limit:r}:{}),void 0!==o?{op:o}:{}),void 0!==i?{groupby:i}:{})}}class EA extends vi{constructor(t,n){super(t),this.transform=n}clone(){return new EA(null,rn(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Nn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Vse(e){let t=0;return function n(i,r){var o;if(i instanceof Kg&&!i.isGenerator&&!ey(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof ps&&(i.parent instanceof Kg&&!r.source?(r.format=Object.assign(Object.assign({},null!==(o=r.format)&&void 0!==o?o:{}),{parse:i.assembleFormatParse()}),r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof uy)return r.name||(r.name="data_"+t++),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,void e.push(...i.assemble());switch((i instanceof Cw||i instanceof Dw||i instanceof xw||i instanceof oy||i instanceof sy||i instanceof Tw||i instanceof Fu||i instanceof Aw||i instanceof cy||i instanceof Jg||i instanceof _A||i instanceof mA||i instanceof gA||i instanceof yA||i instanceof vA||i instanceof bA||i instanceof lp||i instanceof EA||i instanceof wA)&&r.transform.push(i.assemble()),(i instanceof ed||i instanceof Zc||i instanceof Qg||i instanceof vf||i instanceof fy)&&r.transform.push(...i.assemble()),i instanceof Qs&&(r.source&&0===r.transform.length?i.setSource(r.source):i.parent instanceof Qs?i.setSource(r.name):(r.name||(r.name="data_"+t++),i.setSource(r.name),1===i.numChildren()&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Qs&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name="data_"+t++);let s=r.name;!r.source||r.transform.length>0?e.push(r):s=r.source;for(const a of i.children)n(a,{name:null,source:s,transform:[]});break}}}}function Sze(e){return"top"===e||"left"===e||_t(e)?"header":"footer"}function Tze(e,t){var n;const{facet:i,config:r,child:o,component:s}=e;if(e.channelHasField(t)){const a=i[t],l=ly("title",null,r,t);let u=X_(a,r,{allowDisabling:!0,includeDefault:void 0===l||!!l});o.component.layoutHeaders[t].title&&(u=Ce(u)?u.join(", "):u,u+=` / ${o.component.layoutHeaders[t].title}`,o.component.layoutHeaders[t].title=null);const c=ly("labelOrient",a.header,r,t),d=null!==a.header&&Br(null===(n=a.header)||void 0===n?void 0:n.labels,r.header.labels,!0),f=Mn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:null!==a.header?u:null,facetFieldDef:a,[f]:"facet"===t?[]:[Hse(e,t,d)]}}}function Hse(e,t,n){const i="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function Use(e,t){var n;const{child:i}=e;if(i.component.axes[t]){const{layoutHeaders:r,resolve:o}=e.component;if(o.axis[t]=Jj(o,t),"shared"===o.axis[t]){const s="x"===t?"column":"row",a=r[s];for(const l of i.component.axes[t]){const u=Sze(l.get("orient"));null!==(n=a[u])&&void 0!==n||(a[u]=[Hse(e,s,!1)]);const c=Ew(l,"main",e.config,{header:!0});c&&a[u][0].axes.push(c),l.mainExtracted=!0}}}}function p8(e){for(const t of e.children)t.parseLayoutSize()}function CA(e,t){var n;const i=tse(t),r=ET(i),o=e.component.resolve,s=e.component.layoutSize;let a;for(const l of e.children){const u=l.component.layoutSize.getWithExplicit(i),c=null!==(n=o.scale[r])&&void 0!==n?n:ise(r,e);if("independent"===c&&"step"===u.value){a=void 0;break}if(a){if("independent"===c&&a.value!==u.value){a=void 0;break}a=ip(a,u,i,"")}else a=u}if(a){for(const l of e.children)e.renameSignal(l.getName(i),e.getName(t)),l.component.layoutSize.set(i,"merged",!1);s.setWithExplicit(t,a)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Mze(e,t){const i=e.config,r=e.getScaleComponent("width"===t?"x":"y");if(r){const o=r.get("type"),s=r.get("range");if(wo(o)){const a=eA(i.view,t);return Qh(s)||Jc(a)?"step":a}return Sj(i.view,t)}if(e.hasProjection||"arc"===e.mark)return Sj(i.view,t);{const o=eA(i.view,t);return Jc(o)?o.step:o}}function g8(e,t,n){return We(t,Object.assign({suffix:`by_${We(e)}`},null!=n?n:{}))}class Ow extends $se{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=b8(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!hw(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Te(t),i={};for(const r of n){if(![sf,af].includes(r)){ke(xT(r,"facet"));break}const o=t[r];if(void 0===o.field){ke(M5(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(t,n){const i=uj(t,n);return i.header?i.header=Ta(i.header):null===i.header&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=DA(this),this.child.parseData()}parseLayoutSize(){p8(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function xze(e){for(const t of Pl)Tze(e,t);Use(e,"x"),Use(e,"y")}(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,i;const r={};for(const o of Pl)for(const s of Yj){const a=this.component.layoutHeaders[o],l=a[s],{facetFieldDef:u}=a;if(u){const c=ly("titleOrient",u.header,this.config,o);if(["right","bottom"].includes(c)){const d=cA(o,c);null!==(t=r.titleAnchor)&&void 0!==t||(r.titleAnchor={}),r.titleAnchor[d]="end"}}if(null==l?void 0:l[0]){const c="row"===o?"height":"width",d="header"===s?"headerBand":"footerBand";"facet"!==o&&!this.child.component.layoutSize.get(c)&&(null!==(n=r[d])&&void 0!==n||(r[d]={}),r[d][o]=.5),a.title&&(null!==(i=r.offset)&&void 0!==i||(r.offset={}),r.offset["row"===o?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&"independent"===this.component.resolve.scale.x||!t&&"independent"===this.component.resolve.scale.y)&&(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),i?{columns:i}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Ow))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Ow?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:We(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Ow){if(this.child.channelHasField("column")){const r=We(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of zc){const o=this.child.component.scales[r];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(wo(s)&&Qh(a)){const u=u8(pA(this.child,r));u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):ke(N5(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Pl){const d=this.facet[c];if(d){l.push(We(d));const{bin:f,sort:h}=d;if(Li(f)&&l.push(We(d,{binSuffix:"end"})),qc(h)){const{field:p,op:m=FT}=h,_=g8(d,h);i&&r?(o.push(_),s.push("max"),a.push(_)):(o.push(p),s.push(m),a.push(_))}else if(Ce(h)){const p=ay(d,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!i&&!!r;return Object.assign({name:t,data:n,groupby:l},u||o.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),o.length?{fields:o,ops:s,as:a}:{})}:{})}facetSortFields(t){const{facet:n}=this,i=n[t];return i?qc(i.sort)?[g8(i,i.sort,{expr:"datum"})]:Ce(i.sort)?[ay(i,t,{expr:"datum"})]:[We(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(qc(r)?r.order:!Ce(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:n,config:i}=this;if(n.facet)return Kj(n.facet,"facet",i);const r={row:["top","bottom"],column:["left","right"]};for(const o of qj)if(n[o]){const s=ly("labelOrient",null===(t=n[o])||void 0===t?void 0:t.header,i,o);if(r[o].includes(s))return Kj(n[o],o,i)}}assembleMarks(){const{child:t}=this,i=function Cze(e){const t=[],n=Vse(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},o?{title:o}:{}),s?{style:s}:{}),{from:{facet:this.assembleFacet()},sort:{field:Pl.map(l=>this.facetSortFields(l)).flat(),order:Pl.map(l=>this.facetSortOrder(l)).flat()}}),i.length>0?{data:i}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(IVe(this,[])))]}getMapping(){return this.facet}}function zse(e,t){var n,i,r,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=null===(n=e.format)||void 0===n?void 0:n.mesh,u=null===(i=a.format)||void 0===i?void 0:i.feature;if(l&&u)continue;const c=null===(r=e.format)||void 0===r?void 0:r.feature;if((c||u)&&c!==u)continue;const d=null===(o=a.format)||void 0===o?void 0:o.mesh;if(!l&&!d||l===d)if(yw(e)&&yw(a)){if(Fc(e.values,a.values))return s}else if(ey(e)&&ey(a)){if(e.url===a.url)return s}else if(hoe(e)&&e.name===s.dataName)return s}return null}function DA(e){var t,n,i,r,o,s,a,l,u,c;let d=function Ize(e,t){if(e.data||!e.parent){if(null===e.data){const i=new Kg({values:[]});return t.push(i),i}const n=zse(e.data,t);if(n)return rp(e.data)||(n.data.format=One({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Kg(e.data);return t.push(i),i}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:f,outputNodeRefCounts:h}=e.component.data,p=e.data,_=p&&(rp(p)||ey(p)||yw(p))||!e.parent?new NVe:e.parent.component.data.ancestorParse.clone();rp(p)?(poe(p)?d=new Dw(d,p.sequence):Ij(p)&&(d=new Cw(d,p.graticule)),_.parseNothing=!0):null===(null===(t=null==p?void 0:p.format)||void 0===t?void 0:t.parse)&&(_.parseNothing=!0),d=null!==(n=ps.makeExplicit(d,e,_))&&void 0!==n?n:d,d=new lp(d);const b=e.parent&&dy(e.parent);($r(e)||ju(e))&&b&&(d=null!==(i=ed.makeFromEncoding(d,e))&&void 0!==i?i:d),e.transforms.length>0&&(d=function Rze(e,t,n){var i,r;let o=0;for(const s of t.transforms){let a,l;if(pVe(s))l=e=new sy(e,s),a="derived";else if(Nj(s)){const u=vUe(s);l=e=null!==(i=ps.makeWithAncestors(e,{},u,n))&&void 0!==i?i:e,e=new oy(e,t,s.filter)}else if(roe(s))l=e=ed.makeFromTransform(e,s,t),a="number";else if(mVe(s))a="date",void 0===n.getWithExplicit(s.field).value&&(e=new ps(e,{[s.field]:a}),n.set(s.field,a,!1)),l=e=Zc.makeFromTransform(e,s);else if(_Ve(s))l=e=Fu.makeFromTransform(e,s),a="number",Hj(t)&&(e=new lp(e));else if(ioe(s))l=e=Aw.make(e,t,s,o++),a="derived";else if(dVe(s))l=e=new cy(e,s),a="number";else if(fVe(s))l=e=new Jg(e,s),a="number";else if(yVe(s))l=e=vf.makeFromTransform(e,s),a="derived";else if(vVe(s))l=e=new _A(e,s),a="derived";else if(hVe(s))l=e=new mA(e,s),a="derived";else if(oVe(s))l=e=new wA(e,s),a="derived";else if(cVe(s))e=new EA(e,s);else if(gVe(s))l=e=Qg.makeFromTransform(e,s),a="derived";else if(sVe(s))l=e=new gA(e,s),a="derived";else if(aVe(s))l=e=new vA(e,s),a="derived";else if(lVe(s))l=e=new bA(e,s),a="derived";else{if(!uVe(s)){ke(W6e(s));continue}l=e=new yA(e,s),a="derived"}if(l&&void 0!==a)for(const u of null!==(r=l.producedFields())&&void 0!==r?r:[])n.set(u,a,!1)}return e}(d,e,_));const v=function wUe(e){const t={};if($r(e)&&e.component.selection)for(const n of Te(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&H_(r.field)>1&&(t[r.field]="flatten")}return t}(e),D=function bUe(e){const t={};function n(i){Q_(i)?t[i.field]="date":"quantitative"===i.type&&function E6e(e){return Qe(e)&&Mn(["min","max"],e)}(i.aggregate)?t[i.field]="number":H_(i.field)>1?i.field in t||(t[i.field]="flatten"):Wg(i)&&qc(i.sort)&&H_(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if(($r(e)||ju(e))&&e.forEachFieldDef((i,r)=>{if(Fl(i))n(i);else{const o=jg(r),s=e.fieldDef(o);n(Object.assign(Object.assign({},i),{type:s.type}))}}),$r(e)){const{mark:i,markDef:r,encoding:o}=e;if(ep(i)&&!e.encoding.order){const a=o["horizontal"===r.orient?"y":"x"];Ue(a)&&"quantitative"===a.type&&!(a.field in t)&&(t[a.field]="number")}}return t}(e);d=null!==(r=ps.makeWithAncestors(d,{},Object.assign(Object.assign({},v),D),_))&&void 0!==r?r:d,$r(e)&&(d=fy.parseAll(d,e),d=Tw.parseAll(d,e)),($r(e)||ju(e))&&(b||(d=null!==(o=ed.makeFromEncoding(d,e))&&void 0!==o?o:d),d=null!==(s=Zc.makeFromEncoding(d,e))&&void 0!==s?s:d,d=sy.parseAllForSortIndex(d,e));const A=e.getDataName(Ai.Raw),I=new Qs(d,A,Ai.Raw,h);if(f[A]=I,d=I,$r(e)){const q=Fu.makeFromEncoding(d,e);q&&(d=q,Hj(e)&&(d=new lp(d))),d=null!==(a=Qg.makeFromEncoding(d,e))&&void 0!==a?a:d,d=null!==(l=vf.makeFromEncoding(d,e))&&void 0!==l?l:d}$r(e)&&(d=null!==(u=xw.make(d,e))&&void 0!==u?u:d);const L=e.getDataName(Ai.Main),k=new Qs(d,L,Ai.Main,h);f[L]=k,d=k,$r(e)&&function gHe(e,t){var n;for(const[i,r]of Hh(null!==(n=e.component.selection)&&void 0!==n?n:{})){const o=e.getName(`lookup_${i}`);e.component.data.outputNodes[o]=r.materialized=new Qs(new oy(t,e,{param:i}),o,Ai.Lookup,e.component.data.outputNodeRefCounts)}}(e,k);let B=null;if(ju(e)){const q=e.getName("facet");d=null!==(c=function kze(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const o of[n,i])if(qc(o.sort)){const{field:s,op:a=FT}=o.sort;e=r=new Jg(e,{joinaggregate:[{op:a,field:s,as:g8(o,o.sort,{forAs:!0})}],groupby:[We(o)]})}return r}return null}(d,e.facet))&&void 0!==c?c:d,B=new uy(d,e,q,k.getSource()),f[q]=B}return Object.assign(Object.assign({},e.component.data),{outputNodes:f,outputNodeRefCounts:h,raw:I,main:k,facetRoot:B,ancestorParse:_})}class Pze extends h8{constructor(t,n,i,r){var o,s,a,l;super(t,"concat",n,i,r,t.resolve),("shared"===(null===(s=null===(o=t.resolve)||void 0===o?void 0:o.axis)||void 0===s?void 0:s.x)||"shared"===(null===(l=null===(a=t.resolve)||void 0===a?void 0:a.axis)||void 0===l?void 0:l.y))&&ke("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(t).map((u,c)=>b8(u,this,this.getName(`concat_${c}`),void 0,r))}parseData(){this.component.data=DA(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Te(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return QT(t)?t.vconcat:Dj(t)?t.hconcat:t.concat}parseLayoutSize(){!function Oze(e){p8(e);const n=void 0===e.layout.columns?"height":"childHeight";CA(e,1===e.layout.columns?"width":"childWidth"),CA(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Xj(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),i?{style:i}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}const Lze=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},pre),{labelExpr:1,encode:1}),Gse=Te(Lze);class m8 extends yf{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new m8(rn(this.explicit),rn(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!function Fze(e){return!1===e||null===e}(this.get(t)))}hasOrientSignalRef(){return _t(this.explicit.orient)}}const $ze={bottom:"top",top:"bottom",left:"right",right:"left"};function Hze(e,t){if(!e)return t.map(n=>n.clone());{if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],o=t[i];if(!!r!=!!o)return;if(r&&o){const s=r.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[i]=Uze(r,o)}}}return e}function Uze(e,t){for(const n of Gse){const i=ip(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,o)=>{switch(n){case"title":return rie(r,o);case"gridScale":return{explicit:r.explicit,value:Br(r.value,o.value)}}return nA(r,o,n,"axis")});e.setWithExplicit(n,i)}return e}function zze(e,t,n,i,r){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(_t(n.labelAngle)?n.labelAngle:rw(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Koe(i,r))return!0}return e===n[t]}const Gze=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Wze(e,t){var n,i,r;let o=t.axis(e);const s=new m8,a=io(t.encoding[e]),{mark:l,config:u}=t,c=(null==o?void 0:o.orient)||(null===(n=u["x"===e?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(i=u.axis)||void 0===i?void 0:i.orient)||function SHe(e){return"x"===e?"bottom":"left"}(e),d=t.getScaleComponent(e).get("type"),f=function yHe(e,t,n,i){const r="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:Iie(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",s=_t(n)?"axisOrient":`axis${iw(n)}`,a=[...r,...r.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:Goe(a,i,e,n),vgAxisConfig:Goe(l,i,e,n),axisConfigStyle:vHe([...l,...a],i)}}(e,d,c,t.config),h=void 0!==o?!o:Gj("disable",u.style,null==o?void 0:o.style,f).configValue;if(s.set("disable",h,void 0!==o),h)return s;o=o||{};const p=function EHe(e,t,n,i,r){const o=null==t?void 0:t.labelAngle;if(void 0!==o)return _t(o)?o:rw(o);{const{configValue:s}=Gj("labelAngle",i,null==t?void 0:t.style,r);return void 0!==s?rw(s):n!==nr||!Mn([W5,G5],e.type)||Ue(e)&&e.timeUnit?void 0:270}}(a,o,e,u.style,f),m={fieldOrDatumDef:a,axis:o,channel:e,model:t,scaleType:d,orient:c,labelAngle:p,mark:l,config:u};for(const v of Gse){const D=v in Woe?Woe[v](m):mre(v)?o[v]:void 0,A=void 0!==D,I=zze(D,v,o,t,e);if(A&&I)s.set(v,D,I);else{const{configValue:L,configFrom:k}=mre(v)&&"values"!==v?Gj(v,u.style,o.style,f):{},B=void 0!==L;A&&!B?s.set(v,D,I):("vgAxisConfig"!==k||Gze.has(v)&&B||mw(L)||_t(L))&&s.set(v,L,!1)}}const _=null!==(r=o.encoding)&&void 0!==r?r:{},b=hre.reduce((v,D)=>{var A;if(!s.hasAxisPart(D))return v;const I=nse(null!==(A=_[D])&&void 0!==A?A:{},t),L="labels"===D?function jze(e,t,n){var i;const{encoding:r,config:o}=e,s=null!==(i=io(r[t]))&&void 0!==i?i:io(r[ff(t)]),a=e.axis(t)||{},{format:l,formatType:u}=a;return Gg(u)?Object.assign({text:nj({fieldOrDatumDef:s,field:"datum.value",format:l,formatType:u,config:o})},n):n}(t,e,I):I;return void 0!==L&&!yi(L)&&(v[D]={update:L}),v},{});return yi(b)||s.set("encode",b,!!o.encoding||void 0!==o.labelAngle),s}const Zze={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),hs("x",e,{defaultPos:"mid"})),hs("y",e,{defaultPos:"mid"})),sp(e,"radius")),sp(e,"theta"))},eGe={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),rA("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),rA("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient})),$j(e))},tGe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),sp(e,"x")),sp(e,"y"))},nGe={vgMark:"shape",encodeEntry:e=>Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&Ue(n)&&n.type===q_?{field:We(n,{expr:"datum"})}:{})]}},iGe={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),sp(e,"x")),sp(e,"y")),jj(e,"url"))},rGe={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),hs("x",e,{defaultPos:"mid"})),hs("y",e,{defaultPos:"mid"})),Eo("size",e,{vgChannel:"strokeWidth"})),$j(e))},oGe={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),hs("x",e,{defaultPos:"mid"})),hs("y",e,{defaultPos:"mid"})),Eo("size",e)),$j(e))};function _8(e,t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),hs("x",e,{defaultPos:"mid"})),hs("y",e,{defaultPos:"mid"})),Eo("size",e)),Eo("angle",e)),function sGe(e,t,n){return n?{shape:{value:n}}:Eo("shape",e)}(e,0,t))}const aGe={vgMark:"symbol",encodeEntry:e=>_8(e)},lGe={vgMark:"symbol",encodeEntry:e=>_8(e,"circle")},uGe={vgMark:"symbol",encodeEntry:e=>_8(e,"square")},cGe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),sp(e,"x")),sp(e,"y"))},dGe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rA("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n})),rA("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n})),Eo("size",e,{vgChannel:"strokeWidth"})):{}}},fGe={vgMark:"text",encodeEntry:e=>{const{config:t}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),hs("x",e,{defaultPos:"mid"})),hs("y",e,{defaultPos:"mid"})),jj(e)),Eo("size",e,{vgChannel:"fontSize"})),Eo("angle",e)),Toe("align",function hGe(e,t,n){if(void 0===ii("align",e,n))return"center"}(e.markDef,0,t))),Toe("baseline",function pGe(e,t,n){if(void 0===ii("baseline",e,n))return"middle"}(e.markDef,0,t))),hs("radius",e,{defaultPos:null})),hs("theta",e,{defaultPos:null}))}},gGe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r="horizontal"===i?"width":"height",o="horizontal"===i?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ll(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),hs("x",e,{defaultPos:"mid",vgChannel:"xc"})),hs("y",e,{defaultPos:"mid",vgChannel:"yc"})),Eo("size",e,{defaultValue:mGe(e),vgChannel:r})),{[o]:Bi(ii("thickness",n,t))})}};function mGe(e){var t;const{config:n,markDef:i}=e,{orient:r}=i,o="horizontal"===r?"width":"height",s=e.getScaleComponent("horizontal"===r?"x":"y"),a=null!==(t=ii("size",i,n,{vgChannel:o}))&&void 0!==t?t:n.tick.bandSize;if(void 0!==a)return a;{const l=s?s.get("range"):void 0;return l&&Qh(l)&&mi(l.step)?3*l.step/4:3*ZT(n.view,o)/4}}const SA={arc:Zze,area:eGe,bar:tGe,circle:lGe,geoshape:nGe,image:iGe,line:rGe,point:aGe,rect:cGe,rule:dGe,square:uGe,text:fGe,tick:gGe,trail:oGe};const Wse="faceted_path_",qse="stack_group_";function y8(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:o}=e,s=Br(i.clip,function wGe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!(null==t?void 0:t.get("selectionExtent"))&&!(null==n?void 0:n.get("selectionExtent")))||void 0}(e),function EGe(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),a=Zne(i),l=r.key,u=function bGe(e){var t;const{encoding:n,stack:i,mark:r,markDef:o,config:s}=e,a=n.order;if(!(!Ce(a)&&Pu(a)&&f5(a.value)||!a&&f5(ii("order",o,s)))){if((Ce(a)||Ue(a))&&!i)return tie(a,{expr:"datum"});if(ep(r)){const l="horizontal"===o.orient?"y":"x",u=n[l];if(Ue(u)){const c=u.sort;return Ce(c)?{field:We(u,{prefix:l,suffix:"sort_index",expr:"datum"})}:qc(c)?{field:We({aggregate:dj(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:Zie(c)?{field:We(e.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:null===c?void 0:{field:We(u,{binSuffix:(null===(t=e.stack)||void 0===t?void 0:t.impute)?"mid":void 0,expr:"datum"})}}return}}}(e),c=function CGe(e){if(!e.component.selection)return null;const t=Te(e.component.selection).length;let n=t,i=e.parent;for(;i&&0===n;)n=Te(i.component.selection).length,i=i.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}(e),d=ii("aria",i,o),f=SA[n].postEncodingTransform?SA[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:SA[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),!1===d?{aria:d}:{}),{from:{data:t.fromPrefix+e.requestDataName(Ai.Main)},encode:{update:SA[n].encodeEntry(e)}}),f?{transform:f}:{})]}class Yse extends $se{constructor(t,n,i,r={},o){var s;super(t,"unit",n,i,o,void 0,$re(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=Ru(t.mark)?Object.assign({},t.mark):{type:t.mark},l=a.type;void 0===a.filled&&(a.filled=function Jze(e,t,{graticule:n}){if(n)return!1;const i=$g("filled",e,t),r=e.type;return Br(i,r!==kT&&r!==MT&&r!==IT)}(a,o,{graticule:t.data&&Ij(t.data)}));const u=this.encoding=function t7e(e,t,n,i){const r={};for(const o of Te(e))$ne(o)||ke(r$e(o));for(let o of c6e){if(!e[o])continue;const s=e[o];if(G_(o)){const a=Une(o),l=r[a];if(Ue(l)){if(i9e(l.type)&&Ue(s)){ke(X6e(a));continue}}else o=a,ke(J6e(a))}if("angle"===o&&"arc"===t&&!e.theta&&(ke("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=Mu),e7e(e,o,t)){if(o===cf&&"line"===t){const a=Xc(e[o]);if(null==a?void 0:a.aggregate){ke("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");continue}}if(o===Da&&(n?"fill"in e:"stroke"in e))ke(pie("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(o===lw||o===aw&&!Ce(s)&&!Pu(s)||o===Lg&&Ce(s))s&&(r[o]=Ze(s).reduce((a,l)=>(Ue(l)?a.push(uj(l,o)):ke(M5(l,o)),a),[]));else{if(o===Lg&&null===s)r[o]=null;else if(!(Ue(s)||Yc(s)||Pu(s)||jT(s)||_t(s))){ke(M5(s,o));continue}r[o]=cre(s,o,i)}}else ke(xT(o,t))}return r}(t.encoding||{},l,a.filled,o);this.markDef=function Yze(e,t,n){const i=Ta(e),r=ii("orient",i,n);if(i.orient=function Qze(e,t,n){switch(e){case kT:case X5:case J5:case jie:case v9e:case y9e:return}const{x:i,y:r,x2:o,y2:s}=t;switch(e){case NT:if(Ue(i)&&(Xs(i.bin)||Ue(r)&&r.aggregate&&!i.aggregate))return"vertical";if(Ue(r)&&(Xs(r.bin)||Ue(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o&&(Ue(i)&&i.type===Ug&&!Li(i.bin)||VT(i)))return"horizontal";if(!s&&(Ue(r)&&r.type===Ug&&!Li(r.bin)||VT(r)))return"vertical"}case IT:if(o&&(!Ue(i)||!Xs(i.bin))&&s&&(!Ue(r)||!Xs(r.bin)))return;case OT:if(s)return Ue(r)&&Xs(r.bin)?"horizontal":"vertical";if(o)return Ue(i)&&Xs(i.bin)?"vertical":"horizontal";if(e===IT){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case MT:case K5:{const a=Kc(i),l=Kc(r);if(n)return n;if(a&&!l)return"tick"!==e?"horizontal":"vertical";if(!a&&l)return"tick"!==e?"vertical":"horizontal";if(a&&l){const u=i,c=r,d=u.type===W_,f=c.type===W_;return d&&!f?"tick"!==e?"vertical":"horizontal":!d&&f?"tick"!==e?"horizontal":"vertical":!u.aggregate&&c.aggregate?"tick"!==e?"vertical":"horizontal":u.aggregate&&!c.aggregate&&"tick"!==e?"horizontal":"vertical"}return}}return"vertical"}(i.type,t,r),void 0!==r&&r!==i.orient&&ke(function c$e(e,t){return`Specified orient "${e}" overridden with "${t}".`}(i.orient,r)),"bar"===i.type&&i.orient){const a=ii("cornerRadiusEnd",i,n);if(void 0!==a){const l="horizontal"===i.orient&&t.x2||"vertical"===i.orient&&t.y2?["cornerRadius"]:x9e[i.orient];for(const u of l)i[u]=a;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}return void 0===ii("opacity",i,n)&&(i.opacity=function Xze(e,t){if(Mn([kT,K5,X5,J5],e)&&!dj(t))return.7}(i.type,t)),void 0===ii("cursor",i,n)&&(i.cursor=function Kze(e,t,n){return t.href||e.href||ii("href",e,n)?"pointer":e.cursor}(i,t,n)),i}(a,u,o),this.size=function qze({encoding:e,size:t}){for(const n of zc){const i=xa(n);Jc(t[i])&&Kc(e[n])&&(delete t[i],ke(mie(i)))}return t}({encoding:u,size:$re(t)?Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):r}),this.stack=Yre(l,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(null!==(s=t.params)&&void 0!==s?s:[]).filter(c=>Ej(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===Bie,i=t&&o6e.some(r=>Kt(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return CT.reduce((i,r)=>{var o;const s=io(n[r]);return s&&(i[r]=this.initScale(null!==(o=s.scale)&&void 0!==o?o:{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Ta(t);return Ce(n)&&(r.domain=n.map(Qa)),Ce(i)&&(r.range=i.map(Qa)),r}initAxes(t){return zc.reduce((n,i)=>{const r=t[i];if(Kt(r)||i===nr&&Kt(t.x2)||i===bo&&Kt(t.y2)){const o=Kt(r)?r.axis:void 0;n[i]=o&&this.initAxis(Object.assign({},o))}return n},{})}initAxis(t){const n=Te(t),i={};for(const r of n){const o=t[r];i[r]=mw(o)?Xne(o):Qa(o)}return i}initLegends(t){return h6e.reduce((n,i)=>{const r=io(t[i]);if(r&&function g6e(e){switch(e){case Da:case Hc:case Uc:case cf:case Sa:case df:case Wh:case qh:return!0;case zh:case Gh:case Fg:return!1}}(i)){const o=r.legend;n[i]=o&&Ta(o)}return n},{})}parseData(){this.component.data=DA(this)}parseLayoutSize(){!function Nze(e){const{size:t,component:n}=e;for(const i of zc){const r=xa(i);if(t[r]){const o=t[r];n.layoutSize.set(r,Jc(o)?"step":o,!0)}else{const o=Mze(e,r);n.layoutSize.set(r,o,!1)}}}(this)}parseSelections(){this.component.selection=function pHe(e,t){var n;const i={},r=e.config.selection;if(!t||!t.length)return i;for(const o of t){const s=Wi(o.name),a=o.select,l=Qe(a)?a:a.type,u=it(a)?rn(a):{type:l},c=r[l];for(const f in c)"fields"===f||"encodings"===f||("mark"===f&&(u[f]=Object.assign(Object.assign({},c[f]),u[f])),(void 0===u[f]||!0===u[f])&&(u[f]=null!==(n=c[f])&&void 0!==n?n:u[f]));const d=i[s]=Object.assign(Object.assign({},u),{name:s,type:l,init:o.value,bind:o.bind,events:Qe(u.on)?$h(u.on,"scope"):Ze(rn(u.on))});for(const f of aA)f.defined(d)&&f.parse&&f.parse(e,d,o)}return i}(this,this.selection)}parseMarkGroup(){this.component.mark=function _Ge(e){if(Mn([MT,OT,b9e],e.mark)){const t=bre(e.mark,e.encoding);if(t.length>0)return function yGe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Wse+e.requestDataName(Ai.Main),data:e.requestDataName(Ai.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:y8(e,{fromPrefix:Wse})}]}(e,t)}else if(e.mark===NT){const t=T5.some(n=>ii(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return function vGe(e){var t;const[n]=y8(e,{fromPrefix:qse}),i=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),o=(c,d)=>`${c}(${[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})].map(h=>`scale('${i}',${h})`).join(",")})`;let s,a;"x"===e.stack.fieldChannel?(s=Object.assign(Object.assign({},V_(n.encode.update,["y","yc","y2","height",...T5])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},Ja(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(s=Object.assign(Object.assign({},V_(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},Ja(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const c of T5){const d=$g(c,e.markDef,e.config);n.encode.update[c]?(s[c]=n.encode.update[c],delete n.encode.update[c]):d&&(s[c]=Bi(d)),d&&(n.encode.update[c]={value:0})}const l=[];if((null===(t=e.stack.groupbyChannels)||void 0===t?void 0:t.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),f=We(d);f&&l.push(f),((null==d?void 0:d.bin)||(null==d?void 0:d.timeUnit))&&l.push(We(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(n.encode.update[d])return Object.assign(Object.assign({},c),{[d]:n.encode.update[d]});{const f=$g(d,e.markDef,e.config);return void 0!==f?Object.assign(Object.assign({},c),{[d]:Bi(f)}):c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ai.Main),name:qse+e.requestDataName(Ai.Main),groupby:l,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:a},marks:[n]}]}]}(e)}return y8(e)}(this)}parseAxesAndHeaders(){this.component.axes=function Bze(e){return zc.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Wze(n,e)]),t),{})}(this)}assembleSelectionTopLevelSignals(t){return function RVe(e,t){var n;let i=!1;for(const r of ds(null!==(n=e.component.selection)&&void 0!==n?n:{})){const o=r.name,s=Be(o+Yg);if(0===t.filter(l=>l.name===o).length){const u="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${joe}(${s}, ${Be("global"===r.resolve?"union":r.resolve)}${u}`})}i=!0;for(const l of aA)l.defined(r)&&l.topLevelSignals&&(t=l.topLevelSignals(e,r,t))}return i&&0===t.filter(o=>"unit"===o.name).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),Rj(t)}(this,t)}assembleSignals(){return[...zoe(this),...kVe(this,[])]}assembleSelectionData(t){return function PVe(e,t){var n;const i=[...t];for(const r of ds(null!==(n=e.component.selection)&&void 0!==n?n:{})){const o={name:r.name+Yg};if(r.init){const a=r.project.items.map(l=>MVe(l,["signals"]));o.values=r.init.map(l=>({unit:ry(e,{escape:!1}),fields:a,values:ty(l,!1)}))}i.filter(a=>a.name===r.name+Yg).length||i.push(o)}return i}(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Xj(this)}assembleMarks(){var t;let n=null!==(t=this.component.mark)&&void 0!==t?t:[];return(!this.parent||!dy(this.parent))&&(n=moe(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return void 0!==t?t:this.encoding.x||this.encoding.y?"cell":void 0}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return qg(this.encoding,t)}fieldDef(t){return Xc(this.encoding[t])}typedFieldDef(t){const n=this.fieldDef(t);return Fl(n)?n:null}}class v8 extends h8{constructor(t,n,i,r,o){super(t,"layer",n,i,o,t.resolve,t.view);const s=Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((a,l)=>{if(tA(a))return new v8(a,this,this.getName(`layer_${l}`),s,o);if(mf(a))return new Yse(a,this,this.getName(`layer_${l}`),s,o);throw new Error(O5(a))})}parseData(){this.component.data=DA(this);for(const t of this.children)t.parseData()}parseLayoutSize(){!function Aze(e){p8(e),CA(e,"width"),CA(e,"height")}(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Te(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){!function Vze(e){var t;const{axes:n,resolve:i}=e.component,r={top:0,bottom:0,right:0,left:0};for(const o of e.children){o.parseAxesAndHeaders();for(const s of Te(o.component.axes))i.axis[s]=Jj(e.component.resolve,s),"shared"===i.axis[s]&&(n[s]=Hze(n[s],o.component.axes[s]),n[s]||(i.axis[s]="independent",delete n[s]))}for(const o of zc){for(const s of e.children)if(s.component.axes[o]){if("independent"===i.axis[o]){n[o]=(null!==(t=n[o])&&void 0!==t?t:[]).concat(s.component.axes[o]);for(const a of s.component.axes[o]){const{value:l,explicit:u}=a.getWithExplicit("orient");if(!_t(l)){if(r[l]>0&&!u){const c=$ze[l];r[l]>r[c]&&a.set("orient",c,!1)}r[l]++}}}delete s.component.axes[o]}if("independent"===i.axis[o]&&n[o]&&n[o].length>1)for(const s of n[o])s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),zoe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Xj(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Ze(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:1===n.length?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return function FVe(e,t){for(const n of e.children)$r(n)&&(t=moe(n,t));return t}(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),hse(this))}}function b8(e,t,n,i,r){if(LT(e))return new Ow(e,t,n,r);if(tA(e))return new v8(e,t,n,i,r);if(mf(e))return new Yse(e,t,n,i,r);if(function D7e(e){return QT(e)||Dj(e)||Cj(e)}(e))return new Pze(e,t,n,r);throw new Error(O5(e))}function SGe(e,t={}){t.logger&&function L$e(e){Gc=e}(t.logger),t.fieldTitle&&ure(t.fieldTitle);try{const n=Wre(R0(t.config,e.config)),i=uoe(e,n),r=b8(i,null,"",void 0,n);return r.parse(),function LUe(e,t){o8(e.sources);let n=0,i=0;for(let r=0;r<5&&Ese(e,t,!0);r++)n++;e.sources.map(i8);for(let r=0;r<5&&Ese(e,t,!1);r++)i++;o8(e.sources),5===Math.max(n,i)&&ke("Maximum optimization runs(5) reached.")}(r.component.data,r),{spec:TGe(r,xGe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&function wie(){return Gc=bie,Gc}(),t.fieldTitle&&function q9e(){ure(are)}()}}function xGe(e,t,n,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Qe(t)&&(t={type:t}),r&&o&&function TVe(e){return"fit"===e||"fit-x"===e||"fit-y"===e}(t.type))if("step"===r&&"step"===o)ke(aie()),t.type="pad";else if("step"===r||"step"===o){const s="step"===r?"width":"height";ke(aie(ET(s))),t.type=function AVe(e){return e?`fit-${ET(e)}`:"fit"}("width"===s?"height":"width")}return Object.assign(Object.assign(Object.assign({},1===Te(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),doe(n,!1)),doe(e,!0))}function TGe(e,t,n={},i){const r=e.config?function j7e(e){e=rn(e);for(const t of F7e)delete e[t];if(e.axis)for(const t in e.axis)mw(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of y7e)delete e.legend[t];if(e.mark){for(const t of Hie)delete e.mark[t];e.mark.tooltip&&it(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(jre(e.params)),delete e.params);for(const t of P7e){for(const i of Hie)delete e[t][i];const n=L7e[t];if(n)for(const i of n)delete e[t][i];$7e(e,t)}for(const t of function _7e(){return Te(yj)}())delete e[t];!function B7e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=Kne(e.title);yi(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),yi(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),yi(i)?delete e.title:e.title=i}(e);for(const t in e)it(e[t])&&yi(e[t])&&delete e[t];return yi(e)?void 0:e}(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function Dze(e,t){var n,i;const r=[],o=Vse(r);let s=0;for(const l of e.sources){l.hasName()||(l.dataName="source_"+s++);const u=l.assemble();o(l,u)}for(const l of r)0===l.transform.length&&delete l.transform;let a=0;for(const[l,u]of r.entries())0===(null!==(n=u.transform)&&void 0!==n?n:[]).length&&!u.source&&r.splice(a++,0,r.splice(l,1)[0]);for(const l of r)for(const u of null!==(i=l.transform)&&void 0!==i?i:[])"lookup"===u.type&&(u.from=e.outputNodes[u.from].getSource());for(const l of r)l.name in t&&(l.values=t[l.name]);return r}(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>"width"!==h.name&&"height"!==h.name||void 0===h.value||(t[h.name]=+h.value,!1));const{params:d}=t,f=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),f),a?{title:a}:{}),l?{style:l}:{}),u?{encode:{update:u}}:{}),{data:o}),s.length>0?{projections:s}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...jre(d)])),r?{config:r}:{}),i?{usermeta:i}:{})}const AGe="5.2.0",Kse=function OGe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}},hy="#fff",YGe={background:"#333",title:{color:hy,subtitleColor:hy},style:{"guide-label":{fill:hy},"guide-title":{fill:hy}},axis:{domainColor:hy,gridColor:"#888",tickColor:hy}},Zg="#4572a7",KGe={background:"#fff",arc:{fill:Zg},area:{fill:Zg},line:{stroke:Zg,strokeWidth:2},path:{stroke:Zg},rect:{fill:Zg},shape:{stroke:Zg},symbol:{fill:Zg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},em="#30a2da",w8="#cbcbcb",QGe={arc:{fill:em},area:{fill:em},axis:{domainColor:w8,grid:!0,gridColor:w8,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:w8,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:em,strokeWidth:2},path:{stroke:em,strokeWidth:.5},rect:{fill:em},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:em},bar:{binSpacing:2,fill:em,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},tm="#000",ZGe={group:{fill:"#e5e5e5"},arc:{fill:tm},area:{fill:tm},line:{stroke:tm},path:{stroke:tm},rect:{fill:tm},shape:{stroke:tm},symbol:{fill:tm,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Qse="Benton Gothic, sans-serif",nm="#82c6df",E8="Benton Gothic Bold, sans-serif",Nw={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},iWe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:E8,fontSize:22,fontWeight:"normal"},arc:{fill:nm},area:{fill:nm},line:{stroke:nm,strokeWidth:2},path:{stroke:nm},rect:{fill:nm},shape:{stroke:nm},symbol:{fill:nm,size:30},axis:{labelFont:Qse,labelFontSize:11.5,labelFontWeight:"normal",titleFont:E8,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Qse,labelFontSize:11.5,symbolType:"square",titleFont:E8,titleFontSize:13,titleFontWeight:"normal"},range:{category:Nw["category-6"],diverging:Nw["fireandice-6"],heatmap:Nw["fire-7"],ordinal:Nw["fire-7"],ramp:Nw["fire-7"]}},im="#ab5787",xA="#979797",rWe={background:"#f9f9f9",arc:{fill:im},area:{fill:im},line:{stroke:im},path:{stroke:im},rect:{fill:im},shape:{stroke:im},symbol:{fill:im,size:30},axis:{domainColor:xA,domainWidth:.5,gridWidth:.2,labelColor:xA,tickColor:xA,tickWidth:.2,titleColor:xA},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},rm="#3e5c69",oWe={background:"#fff",arc:{fill:rm},area:{fill:rm},line:{stroke:rm},path:{stroke:rm},rect:{fill:rm},shape:{stroke:rm},symbol:{fill:rm},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},jl="#1696d2",TA="Lato",C8="Lato",Mw={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},cWe={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:TA},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:C8,labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:TA},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:C8,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:TA,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:C8,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:TA,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Mw["six-groups-cat-1"],diverging:Mw["diverging-colors"],heatmap:Mw["diverging-colors"],ordinal:Mw["six-groups-seq"],ramp:Mw["shades-blue"]},area:{fill:jl},rect:{fill:jl},line:{color:jl,stroke:jl,strokeWidth:5},trail:{color:jl,stroke:jl,strokeWidth:0,size:1},path:{stroke:jl,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:jl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:jl,stroke:null}},arc:{fill:jl},shape:{stroke:jl},symbol:{fill:jl,size:30}},om="#3366CC",AA="Arial, sans-serif",dWe={arc:{fill:om},area:{fill:om},path:{stroke:om},rect:{fill:om},shape:{stroke:om},symbol:{stroke:om},circle:{fill:om},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:AA,fontSize:12},"guide-title":{font:AA,fontSize:12},"group-title":{font:AA,fontSize:12}},title:{font:AA,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},fWe="2.10.0";function rae(e,t){return JSON.stringify(e,function PWe(e){const t=[];return function(n,i){if("object"!=typeof i||null===i)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}(t))}const oae="vg-tooltip-element",LWe={offsetX:10,offsetY:10,id:oae,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function jWe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function RWe(e,t,n){if(Ce(e))return`[${e.map(i=>t(Qe(i)?i:rae(i,n))).join(", ")}]`;if(it(e)){let i="";const r=e,{title:o,image:s}=r,a=function IWe(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(r,["title","image"]);o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${t(s)}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];void 0!==c&&(it(c)&&(c=rae(c,n)),i+=`<tr><td class="key">${t(u)}:</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}};class sae{constructor(t){this.options=Object.assign(Object.assign({},LWe),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=function BWe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(oae,e)}(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){var o;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(null!==(o=document.fullscreenElement)&&void 0!==o?o:document.body).appendChild(this.el),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:l}=function $We(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let o=e.clientY+i;return o+t.height>window.innerHeight&&(o=+e.clientY-i-t.height),{x:r,y:o}}(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${l}px; left: ${a}px`)}}function VWe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aae(e,t,n,i,r,o,s){try{var a=e[o](s),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(i,r)}function OA(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function s(l){aae(o,i,r,s,a,"next",l)}function a(l){aae(o,i,r,s,a,"throw",l)}s(void 0)})}}var td,lae=Object.prototype,sm=lae.hasOwnProperty,D8="function"==typeof Symbol?Symbol:{},NA=D8.iterator||"@@iterator",HWe=D8.asyncIterator||"@@asyncIterator",MA=D8.toStringTag||"@@toStringTag";function uae(e,t,n,i){var o=Object.create((t&&t.prototype instanceof x8?t:x8).prototype),s=new N8(i||[]);return o._invoke=function qWe(e,t,n){var i=cae;return function(o,s){if(i===dae)throw new Error("Generator is already running");if(i===kA){if("throw"===o)throw s;return gae()}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var l=pae(a,n);if(l){if(l===Bu)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===cae)throw i=kA,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=dae;var u=S8(e,t,n);if("normal"===u.type){if(i=n.done?kA:UWe,u.arg===Bu)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=kA,n.method="throw",n.arg=u.arg)}}}(e,n,s),o}function S8(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}var cae="suspendedStart",UWe="suspendedYield",dae="executing",kA="completed",Bu={};function x8(){}function IA(){}function py(){}var T8={};T8[NA]=function(){return this};var A8=Object.getPrototypeOf,RA=A8&&A8(A8(M8([])));RA&&RA!==lae&&sm.call(RA,NA)&&(T8=RA);var gy=py.prototype=x8.prototype=Object.create(T8);function fae(e){["next","throw","return"].forEach(function(t){e[t]=function(n){return this._invoke(t,n)}})}function hae(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===IA||"GeneratorFunction"===(t.displayName||t.name))}function PA(e,t){function n(o,s,a,l){var u=S8(e[o],e,s);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&sm.call(d,"__await")?t.resolve(d.__await).then(function(f){n("next",f,a,l)},function(f){n("throw",f,a,l)}):t.resolve(d).then(function(f){c.value=f,a(c)},function(f){return n("throw",f,a,l)})}l(u.arg)}var i;this._invoke=function r(o,s){function a(){return new t(function(l,u){n(o,s,l,u)})}return i=i?i.then(a,a):a()}}function pae(e,t){var n=e.iterator[t.method];if(n===td){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=td,pae(e,t),"throw"===t.method))return Bu;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return Bu}var i=S8(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,Bu;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=td),t.delegate=null,Bu):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,Bu)}function YWe(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O8(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N8(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(YWe,this),this.reset(!0)}function M8(e){if(e){var t=e[NA];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(sm.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=td,r.done=!0,r};return i.next=i}}return{next:gae}}function gae(){return{value:td,done:!0}}IA.prototype=gy.constructor=py,py.constructor=IA,py[MA]=IA.displayName="GeneratorFunction",fae(PA.prototype),PA.prototype[HWe]=function(){return this},fae(gy),gy[MA]="Generator",gy[NA]=function(){return this},gy.toString=function(){return"[object Generator]"},N8.prototype={constructor:N8,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=td,this.done=!1,this.delegate=null,this.method="next",this.arg=td,this.tryEntries.forEach(O8),!t)for(var n in this)"t"===n.charAt(0)&&sm.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=td)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(u,c){return s.type="throw",s.arg=t,n.next=u,c&&(n.method="next",n.arg=td),!!c}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var a=sm.call(o,"catchLoc"),l=sm.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&sm.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,Bu):this.complete(s)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),Bu},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),O8(i),Bu}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var o=r.arg;O8(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:M8(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=td),Bu}};var nd={wrap:uae,isGeneratorFunction:hae,AsyncIterator:PA,mark:function zWe(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,py):(e.__proto__=py,MA in e||(e[MA]="GeneratorFunction")),e.prototype=Object.create(gy),e},awrap:function GWe(e){return{__await:e}},async:function WWe(e,t,n,i,r){void 0===r&&(r=Promise);var o=new PA(uae(e,t,n,i),r);return hae(t)?o:o.next().then(function(s){return s.done?s.value:o.next()})},keys:function KWe(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function i(){for(;t.length;){var r=t.pop();if(r in e)return i.value=r,i.done=!1,i}return i.done=!0,i}},values:M8},XWe=qn;function qn(e){var t=this;if(t instanceof qn||(t=new qn),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function JWe(e,t,n){var i=t===e.head?new am(n,null,t,e):new am(n,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}function QWe(e,t){e.tail=new am(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ZWe(e,t){e.head=new am(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function am(e,t,n,i){if(!(this instanceof am))return new am(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}qn.Node=am,qn.create=qn,qn.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},qn.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},qn.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},qn.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)QWe(this,arguments[e]);return this.length},qn.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ZWe(this,arguments[e]);return this.length},qn.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},qn.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},qn.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;null!==n;i++)e.call(t,n.value,i,this),n=n.next},qn.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;null!==n;i--)e.call(t,n.value,i,this),n=n.prev},qn.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},qn.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},qn.prototype.map=function(e,t){t=t||this;for(var n=new qn,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},qn.prototype.mapReverse=function(e,t){t=t||this;for(var n=new qn,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},qn.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,n=this.head.value}for(var r=0;null!==i;r++)n=e(n,i.value,r),i=i.next;return n},qn.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==i;r--)n=e(n,i.value,r),i=i.prev;return n},qn.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},qn.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},qn.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new qn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;null!==r&&i<e;i++)r=r.next;for(;null!==r&&i<t;i++,r=r.next)n.push(r.value);return n},qn.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new qn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;null!==r&&i>t;i--)r=r.prev;for(;null!==r&&i>e;i--,r=r.prev)n.push(r.value);return n},qn.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var r=[];for(n=0;i&&n<t;n++)r.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<(arguments.length<=2?0:arguments.length-2);n++)i=JWe(this,i,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return r},qn.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};try{qn.prototype[Symbol.iterator]=nd.mark(function e(){var t;return nd.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t=this.head;case 1:if(!t){i.next=7;break}return i.next=4,t.value;case 4:t=t.next,i.next=1;break;case 7:case"end":return i.stop()}},e,this)})}catch(e){}var eqe=XWe,lm=Symbol("max"),bf=Symbol("length"),my=Symbol("lengthCalculator"),kw=Symbol("allowStale"),um=Symbol("maxAge"),wf=Symbol("dispose"),mae=Symbol("noDisposeOnSet"),Co=Symbol("lruList"),$u=Symbol("cache"),_ae=Symbol("updateAgeOnGet"),k8=()=>1,I8=(e,t,n)=>{var i=e[$u].get(t);if(i){var r=i.value;if(FA(e,r)){if(_y(e,i),!e[kw])return}else n&&(e[_ae]&&(i.value.now=Date.now()),e[Co].unshiftNode(i));return r.value}},FA=(e,t)=>{if(!t||!t.maxAge&&!e[um])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[um]&&n>e[um]},Iw=e=>{if(e[bf]>e[lm])for(var t=e[Co].tail;e[bf]>e[lm]&&null!==t;){var n=t.prev;_y(e,t),t=n}},_y=(e,t)=>{if(t){var n=t.value;e[wf]&&e[wf](n.key,n.value),e[bf]-=n.length,e[$u].delete(n.key),e[Co].removeNode(t)}};class nqe{constructor(t,n,i,r,o){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=o||0}}var yae=(e,t,n,i)=>{var r=n.value;FA(e,r)&&(_y(e,n),e[kw]||(r=void 0)),r&&t.call(i,r.value,r.key,e)},rqe=["includePrerelease","loose","rtl"],R8=e=>e?"object"!=typeof e?{loose:!0}:rqe.filter(t=>e[t]).reduce((t,n)=>(t[n]=!0,t),{}):{},Vu={exports:{}},P8={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},cqe="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{},LA=cqe;!function(e,t){var n=P8.MAX_SAFE_COMPONENT_LENGTH,i=LA,r=(t=e.exports={}).re=[],o=t.src=[],s=t.t={},a=0,l=(u,c,d)=>{var f=a++;i(f,c),s[u]=f,o[f]=c,r[f]=new RegExp(c,d?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION","(".concat(o[s.NUMERICIDENTIFIER],")\\.")+"(".concat(o[s.NUMERICIDENTIFIER],")\\.")+"(".concat(o[s.NUMERICIDENTIFIER],")")),l("MAINVERSIONLOOSE","(".concat(o[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[s.NUMERICIDENTIFIERLOOSE],")")),l("PRERELEASEIDENTIFIER","(?:".concat(o[s.NUMERICIDENTIFIER],"|").concat(o[s.NONNUMERICIDENTIFIER],")")),l("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[s.NUMERICIDENTIFIERLOOSE],"|").concat(o[s.NONNUMERICIDENTIFIER],")")),l("PRERELEASE","(?:-(".concat(o[s.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[s.PRERELEASEIDENTIFIER],")*))")),l("PRERELEASELOOSE","(?:-?(".concat(o[s.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[s.PRERELEASEIDENTIFIERLOOSE],")*))")),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD","(?:\\+(".concat(o[s.BUILDIDENTIFIER],"(?:\\.").concat(o[s.BUILDIDENTIFIER],")*))")),l("FULLPLAIN","v?".concat(o[s.MAINVERSION]).concat(o[s.PRERELEASE],"?").concat(o[s.BUILD],"?")),l("FULL","^".concat(o[s.FULLPLAIN],"$")),l("LOOSEPLAIN","[v=\\s]*".concat(o[s.MAINVERSIONLOOSE]).concat(o[s.PRERELEASELOOSE],"?").concat(o[s.BUILD],"?")),l("LOOSE","^".concat(o[s.LOOSEPLAIN],"$")),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE","".concat(o[s.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),l("XRANGEIDENTIFIER","".concat(o[s.NUMERICIDENTIFIER],"|x|X|\\*")),l("XRANGEPLAIN","[v=\\s]*(".concat(o[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIER],")")+"(?:".concat(o[s.PRERELEASE],")?").concat(o[s.BUILD],"?")+")?)?"),l("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[s.PRERELEASELOOSE],")?").concat(o[s.BUILD],"?")+")?)?"),l("XRANGE","^".concat(o[s.GTLT],"\\s*").concat(o[s.XRANGEPLAIN],"$")),l("XRANGELOOSE","^".concat(o[s.GTLT],"\\s*").concat(o[s.XRANGEPLAINLOOSE],"$")),l("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),l("COERCERTL",o[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM","(\\s*)".concat(o[s.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",l("TILDE","^".concat(o[s.LONETILDE]).concat(o[s.XRANGEPLAIN],"$")),l("TILDELOOSE","^".concat(o[s.LONETILDE]).concat(o[s.XRANGEPLAINLOOSE],"$")),l("LONECARET","(?:\\^)"),l("CARETTRIM","(\\s*)".concat(o[s.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",l("CARET","^".concat(o[s.LONECARET]).concat(o[s.XRANGEPLAIN],"$")),l("CARETLOOSE","^".concat(o[s.LONECARET]).concat(o[s.XRANGEPLAINLOOSE],"$")),l("COMPARATORLOOSE","^".concat(o[s.GTLT],"\\s*(").concat(o[s.LOOSEPLAIN],")$|^$")),l("COMPARATOR","^".concat(o[s.GTLT],"\\s*(").concat(o[s.FULLPLAIN],")$|^$")),l("COMPARATORTRIM","(\\s*)".concat(o[s.GTLT],"\\s*(").concat(o[s.LOOSEPLAIN],"|").concat(o[s.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE","^\\s*(".concat(o[s.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[s.XRANGEPLAIN],")")+"\\s*$"),l("HYPHENRANGELOOSE","^\\s*(".concat(o[s.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[s.XRANGEPLAINLOOSE],")")+"\\s*$"),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(Vu,Vu.exports);var vae=/^[0-9]+$/,jA=LA,wae=P8.MAX_LENGTH,BA=P8.MAX_SAFE_INTEGER,Eae=Vu.exports.re,Cae=Vu.exports.t,hqe=R8,Rw=(e,t)=>{var n=vae.test(e),i=vae.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};class Hu{constructor(t,n){if(n=hqe(n),t instanceof Hu){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: ".concat(t));if(t.length>wae)throw new TypeError("version is longer than ".concat(wae," characters"));jA("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var i=t.trim().match(n.loose?Eae[Cae.LOOSE]:Eae[Cae.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>BA||this.major<0)throw new TypeError("Invalid major version");if(this.minor>BA||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>BA||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=i[4]?i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){var o=+r;if(o>=0&&o<BA)return o}return r}):[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(jA("SemVer.compare",this.version,this.options,t),!(t instanceof Hu)){if("string"==typeof t&&t===this.version)return 0;t=new Hu(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Hu||(t=new Hu(t,this.options)),Rw(this.major,t.major)||Rw(this.minor,t.minor)||Rw(this.patch,t.patch)}comparePre(t){if(t instanceof Hu||(t=new Hu(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var i=this.prerelease[n],r=t.prerelease[n];if(jA("prerelease compare",n,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return Rw(i,r)}while(++n)}compareBuild(t){t instanceof Hu||(t=new Hu(t,this.options));var n=0;do{var i=this.build[n],r=t.build[n];if(jA("prerelease compare",n,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return Rw(i,r)}while(++n)}inc(t,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",n),this.inc("pre",n);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}n&&(this.prerelease[0]===n?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}var F8=Hu,Dae=F8,yy=(e,t,n)=>new Dae(e,n).compare(new Dae(t,n)),gqe=yy,yqe=yy,wqe=yy,Dqe=yy,Tqe=yy,Nqe=yy,Iqe=(e,t,n)=>0===gqe(e,t,n),Rqe=(e,t,n)=>0!==yqe(e,t,n),Pqe=(e,t,n)=>wqe(e,t,n)>0,Fqe=(e,t,n)=>Dqe(e,t,n)>=0,Lqe=(e,t,n)=>Tqe(e,t,n)<0,jqe=(e,t,n)=>Nqe(e,t,n)<=0,Pw=Symbol("SemVer ANY");class $A{static get ANY(){return Pw}constructor(t,n){if(n=Hqe(n),t instanceof $A){if(t.loose===!!n.loose)return t;t=t.value}j8("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.value=this.semver===Pw?"":this.operator+this.semver.version,j8("comp",this)}parse(t){var i=t.match(this.options.loose?Sae[xae.COMPARATORLOOSE]:Sae[xae.COMPARATOR]);if(!i)throw new TypeError("Invalid comparator: ".concat(t));this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),this.semver=i[2]?new Tae(i[2],this.options.loose):Pw}toString(){return this.value}test(t){if(j8("Comparator.test",t,this.options.loose),this.semver===Pw||t===Pw)return!0;if("string"==typeof t)try{t=new Tae(t,this.options)}catch(n){return!1}return L8(t,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof $A))throw new TypeError("a Comparator is required");if((!n||"object"!=typeof n)&&(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new Aae(t.value,n).test(this.value);if(""===t.operator)return""===t.value||new Aae(this.value,n).test(t.semver);var i=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),o=this.semver.version===t.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),a=L8(this.semver,"<",t.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),l=L8(this.semver,">",t.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return i||r||o&&s||a||l}}var Vqe=$A,Hqe=R8,Sae=Vu.exports.re,xae=Vu.exports.t,L8=(e,t,n,i)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Iqe(e,n,i);case"!=":return Rqe(e,n,i);case">":return Pqe(e,n,i);case">=":return Fqe(e,n,i);case"<":return Lqe(e,n,i);case"<=":return jqe(e,n,i);default:throw new TypeError("Invalid operator: ".concat(t))}},j8=LA,Tae=F8,Aae=Mae;function Oae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function Uqe(e,t){if(e){if("string"==typeof e)return Nae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nae(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw a}}}}function Nae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}class Fw{constructor(t,n){if(n=Gqe(n),t instanceof Fw)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new Fw(t.raw,n);if(t instanceof B8)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(a=>this.parseRange(a.trim())).filter(a=>a.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(t));if(this.set.length>1){var i=this.set[0];if(this.set=this.set.filter(a=>!Iae(a[0])),0===this.set.length)this.set=[i];else if(this.set.length>1){var o,r=Oae(this.set);try{for(r.s();!(o=r.n()).done;){var s=o.value;if(1===s.length&&Xqe(s[0])){this.set=[s];break}}}catch(a){r.e(a)}finally{r.f()}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();var n=Object.keys(this.options).join(","),i="parseRange:".concat(n,":").concat(t),r=kae.get(i);if(r)return r;var o=this.options.loose;t=t.replace(o?gs[Vo.HYPHENRANGELOOSE]:gs[Vo.HYPHENRANGE],sYe(this.options.includePrerelease)),Sr("hyphen replace",t),t=t.replace(gs[Vo.COMPARATORTRIM],qqe),Sr("comparator trim",t,gs[Vo.COMPARATORTRIM]),t=(t=(t=t.replace(gs[Vo.TILDETRIM],Yqe)).replace(gs[Vo.CARETTRIM],Kqe)).split(/\s+/).join(" ");var d,a=o?gs[Vo.COMPARATORLOOSE]:gs[Vo.COMPARATOR],l=t.split(" ").map(p=>Jqe(p,this.options)).join(" ").split(/\s+/).map(p=>oYe(p,this.options)).filter(this.options.loose?p=>!!p.match(a):()=>!0).map(p=>new B8(p,this.options)),u=new Map,c=Oae(l);try{for(c.s();!(d=c.n()).done;){var f=d.value;if(Iae(f))return[f];u.set(f.value,f)}}catch(p){c.e(p)}finally{c.f()}u.size>1&&u.has("")&&u.delete("");var h=[...u.values()];return kae.set(i,h),h}intersects(t,n){if(!(t instanceof Fw))throw new TypeError("a Range is required");return this.set.some(i=>Rae(i,n)&&t.set.some(r=>Rae(r,n)&&i.every(o=>r.every(s=>o.intersects(s,n)))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new Wqe(t,this.options)}catch(i){return!1}for(var n=0;n<this.set.length;n++)if(aYe(this.set[n],t,this.options))return!0;return!1}}var Mae=Fw,kae=new class tqe{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[lm]=t.max||1/0;var n=t.length||k8;if(this[my]="function"!=typeof n?k8:n,this[kw]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[um]=t.maxAge||0,this[wf]=t.dispose,this[mae]=t.noDisposeOnSet||!1,this[_ae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[lm]=t||1/0,Iw(this)}get max(){return this[lm]}set allowStale(t){this[kw]=!!t}get allowStale(){return this[kw]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[um]=t,Iw(this)}get maxAge(){return this[um]}set lengthCalculator(t){"function"!=typeof t&&(t=k8),t!==this[my]&&(this[my]=t,this[bf]=0,this[Co].forEach(n=>{n.length=this[my](n.value,n.key),this[bf]+=n.length})),Iw(this)}get lengthCalculator(){return this[my]}get length(){return this[bf]}get itemCount(){return this[Co].length}rforEach(t,n){n=n||this;for(var i=this[Co].tail;null!==i;){var r=i.prev;yae(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(var i=this[Co].head;null!==i;){var r=i.next;yae(this,t,i,n),i=r}}keys(){return this[Co].toArray().map(t=>t.key)}values(){return this[Co].toArray().map(t=>t.value)}reset(){this[wf]&&this[Co]&&this[Co].length&&this[Co].forEach(t=>this[wf](t.key,t.value)),this[$u]=new Map,this[Co]=new eqe,this[bf]=0}dump(){return this[Co].map(t=>!FA(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Co]}set(t,n,i){if((i=i||this[um])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");var r=i?Date.now():0,o=this[my](n,t);if(this[$u].has(t)){if(o>this[lm])return _y(this,this[$u].get(t)),!1;var a=this[$u].get(t).value;return this[wf]&&(this[mae]||this[wf](t,a.value)),a.now=r,a.maxAge=i,a.value=n,this[bf]+=o-a.length,a.length=o,this.get(t),Iw(this),!0}var l=new nqe(t,n,o,r,i);return l.length>this[lm]?(this[wf]&&this[wf](t,n),!1):(this[bf]+=l.length,this[Co].unshift(l),this[$u].set(t,this[Co].head),Iw(this),!0)}has(t){if(!this[$u].has(t))return!1;var n=this[$u].get(t).value;return!FA(this,n)}get(t){return I8(this,t,!0)}peek(t){return I8(this,t,!1)}pop(){var t=this[Co].tail;return t?(_y(this,t),t.value):null}del(t){_y(this,this[$u].get(t))}load(t){this.reset();for(var n=Date.now(),i=t.length-1;i>=0;i--){var r=t[i],o=r.e||0;if(0===o)this.set(r.k,r.v);else{var s=o-n;s>0&&this.set(r.k,r.v,s)}}}prune(){this[$u].forEach((t,n)=>I8(this,n,!1))}}({max:1e3}),Gqe=R8,B8=Vqe,Sr=LA,Wqe=F8,gs=Vu.exports.re,Vo=Vu.exports.t,qqe=Vu.exports.comparatorTrimReplace,Yqe=Vu.exports.tildeTrimReplace,Kqe=Vu.exports.caretTrimReplace,Iae=e=>"<0.0.0-0"===e.value,Xqe=e=>""===e.value,Rae=(e,t)=>{for(var n=!0,i=e.slice(),r=i.pop();n&&i.length;)n=i.every(o=>r.intersects(o,t)),r=i.pop();return n},Jqe=(e,t)=>(Sr("comp",e,t),e=eYe(e,t),Sr("caret",e),e=Qqe(e,t),Sr("tildes",e),e=nYe(e,t),Sr("xrange",e),e=rYe(e,t),Sr("stars",e),e),Zs=e=>!e||"x"===e.toLowerCase()||"*"===e,Qqe=(e,t)=>e.trim().split(/\s+/).map(n=>Zqe(n,t)).join(" "),Zqe=(e,t)=>e.replace(t.loose?gs[Vo.TILDELOOSE]:gs[Vo.TILDE],(i,r,o,s,a)=>{var l;return Sr("tilde",e,i,r,o,s,a),Zs(r)?l="":Zs(o)?l=">=".concat(r,".0.0 <").concat(+r+1,".0.0-0"):Zs(s)?l=">=".concat(r,".").concat(o,".0 <").concat(r,".").concat(+o+1,".0-0"):a?(Sr("replaceTilde pr",a),l=">=".concat(r,".").concat(o,".").concat(s,"-").concat(a," <").concat(r,".").concat(+o+1,".0-0")):l=">=".concat(r,".").concat(o,".").concat(s," <").concat(r,".").concat(+o+1,".0-0"),Sr("tilde return",l),l}),eYe=(e,t)=>e.trim().split(/\s+/).map(n=>tYe(n,t)).join(" "),tYe=(e,t)=>{Sr("caret",e,t);var i=t.includePrerelease?"-0":"";return e.replace(t.loose?gs[Vo.CARETLOOSE]:gs[Vo.CARET],(r,o,s,a,l)=>{var u;return Sr("caret",e,r,o,s,a,l),Zs(o)?u="":Zs(s)?u=">=".concat(o,".0.0").concat(i," <").concat(+o+1,".0.0-0"):Zs(a)?u="0"===o?">=".concat(o,".").concat(s,".0").concat(i," <").concat(o,".").concat(+s+1,".0-0"):">=".concat(o,".").concat(s,".0").concat(i," <").concat(+o+1,".0.0-0"):l?(Sr("replaceCaret pr",l),u="0"===o?"0"===s?">=".concat(o,".").concat(s,".").concat(a,"-").concat(l," <").concat(o,".").concat(s,".").concat(+a+1,"-0"):">=".concat(o,".").concat(s,".").concat(a,"-").concat(l," <").concat(o,".").concat(+s+1,".0-0"):">=".concat(o,".").concat(s,".").concat(a,"-").concat(l," <").concat(+o+1,".0.0-0")):(Sr("no pr"),u="0"===o?"0"===s?">=".concat(o,".").concat(s,".").concat(a).concat(i," <").concat(o,".").concat(s,".").concat(+a+1,"-0"):">=".concat(o,".").concat(s,".").concat(a).concat(i," <").concat(o,".").concat(+s+1,".0-0"):">=".concat(o,".").concat(s,".").concat(a," <").concat(+o+1,".0.0-0")),Sr("caret return",u),u})},nYe=(e,t)=>(Sr("replaceXRanges",e,t),e.split(/\s+/).map(n=>iYe(n,t)).join(" ")),iYe=(e,t)=>(e=e.trim()).replace(t.loose?gs[Vo.XRANGELOOSE]:gs[Vo.XRANGE],(i,r,o,s,a,l)=>{Sr("xRange",e,i,r,o,s,a,l);var u=Zs(o),c=u||Zs(s),d=c||Zs(a);return"="===r&&d&&(r=""),l=t.includePrerelease?"-0":"",u?i=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(c&&(s=0),a=0,">"===r?(r=">=",c?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===r&&(r="<",c?o=+o+1:s=+s+1),"<"===r&&(l="-0"),i="".concat(r+o,".").concat(s,".").concat(a).concat(l)):c?i=">=".concat(o,".0.0").concat(l," <").concat(+o+1,".0.0-0"):d&&(i=">=".concat(o,".").concat(s,".0").concat(l," <").concat(o,".").concat(+s+1,".0-0")),Sr("xRange return",i),i}),rYe=(e,t)=>(Sr("replaceStars",e,t),e.trim().replace(gs[Vo.STAR],"")),oYe=(e,t)=>(Sr("replaceGTE0",e,t),e.trim().replace(gs[t.includePrerelease?Vo.GTE0PRE:Vo.GTE0],"")),sYe=e=>(t,n,i,r,o,s,a,l,u,c,d,f,h)=>(n=Zs(i)?"":Zs(r)?">=".concat(i,".0.0").concat(e?"-0":""):Zs(o)?">=".concat(i,".").concat(r,".0").concat(e?"-0":""):s?">=".concat(n):">=".concat(n).concat(e?"-0":""),l=Zs(u)?"":Zs(c)?"<".concat(+u+1,".0.0-0"):Zs(d)?"<".concat(u,".").concat(+c+1,".0-0"):f?"<=".concat(u,".").concat(c,".").concat(d,"-").concat(f):e?"<".concat(u,".").concat(c,".").concat(+d+1,"-0"):"<=".concat(l),"".concat(n," ").concat(l).trim()),aYe=(e,t,n)=>{for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(var r=0;r<e.length;r++)if(Sr(e[r].semver),e[r].semver!==B8.ANY&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0},lYe=Mae,Pae=(e,t,n)=>{try{t=new lYe(t,n)}catch(i){return!1}return t.test(e)};function cYe(e,t,n){var i=e.open(t),a=new URL(t).origin,l=40;e.addEventListener("message",function u(d){d.source===i&&(l=0,e.removeEventListener("message",u,!1))},!1),setTimeout(function c(){l<=0||(i.postMessage(n,a),setTimeout(c,250),l-=1)},250)}var $8,dYe='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  outline: none;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid #0000;\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid #0000;\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function Fae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,o=n;r<o.length;r++){var s=o[r];fYe(e,s)}return e}function fYe(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];P0(e,r,t[r],!0)}}function Lae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lae(Object(n),!0).forEach(function(i){VWe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lae(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var dp=It,Lw=st,VA="undefined"!=typeof window?window:void 0;void 0===Lw&&null!=VA&&null!==($8=VA.vl)&&void 0!==$8&&$8.compile&&(Lw=VA.vl);var PYe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},FYe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},jw={vega:"Vega","vega-lite":"Vega-Lite"},HA={vega:dp.version,"vega-lite":Lw?Lw.version:"not available"},LYe={vega:e=>e,"vega-lite":(e,t)=>Lw.compile(e,{config:t}).spec},jYe='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',BYe="chart-wrapper";function $Ye(e){return"function"==typeof e}function jae(e,t,n,i){var r="<html><head>".concat(t,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),s=window.open("");s.document.write(r+e+o),s.document.title="".concat(jw[i]," JSON Source")}function VYe(e,t){if(e.$schema){var i,n=Kse(e.$schema);t&&t!==n.library&&console.warn("The given visualization spec is written in ".concat(jw[n.library],", but mode argument sets ").concat(null!==(i=jw[t])&&void 0!==i?i:t,"."));var r=n.library;return Pae(HA[r],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(jw[r]," ").concat(n.version,", but the current version of ").concat(jw[r]," is v").concat(HA[r],".")),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}function Bae(e){return function HYe(e){return!(!e||!("load"in e))}(e)?e:dp.loader(e)}function $ae(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}function vy(e,t){return V8.apply(this,arguments)}function V8(){return V8=OA(nd.mark(function e(t,n){var i,r,o,s,a,l,u,c,d,f,h=arguments;return nd.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=h.length>2&&void 0!==h[2]?h[2]:{},!Qe(n)){m.next=10;break}return a=Bae(o.loader),m.t0=JSON,m.next=6,a.load(n);case 6:m.t1=m.sent,s=m.t0.parse.call(m.t0,m.t1),m.next=11;break;case 10:s=n;case 11:return l=$ae(s).loader,(!a||l)&&(a=Bae(null!==(u=o.loader)&&void 0!==u?u:l)),m.next=15,Vae($ae(s),a);case 15:return c=m.sent,m.next=18,Vae(o,a);case 18:return f=cp(cp({},Fae(d=m.sent,c)),{},{config:R0(null!==(i=d.config)&&void 0!==i?i:{},null!==(r=c.config)&&void 0!==r?r:{})}),m.next=22,zYe(t,s,f,a);case 22:return m.abrupt("return",m.sent);case 23:case"end":return m.stop()}},e)})),V8.apply(this,arguments)}function Vae(e,t){return H8.apply(this,arguments)}function H8(){return H8=OA(nd.mark(function e(t,n){var i,r,o;return nd.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!Qe(t.config)){a.next=8;break}return a.t1=JSON,a.next=4,n.load(t.config);case 4:a.t2=a.sent,a.t0=a.t1.parse.call(a.t1,a.t2),a.next=9;break;case 8:a.t0=null!==(i=t.config)&&void 0!==i?i:{};case 9:if(r=a.t0,!Qe(t.patch)){a.next=18;break}return a.t4=JSON,a.next=14,n.load(t.patch);case 14:a.t5=a.sent,a.t3=a.t4.parse.call(a.t4,a.t5),a.next=19;break;case 18:a.t3=t.patch;case 19:return o=a.t3,a.abrupt("return",cp(cp(cp({},t),o?{patch:o}:{}),r?{config:r}:{}));case 21:case"end":return a.stop()}},e)})),H8.apply(this,arguments)}function UYe(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}function zYe(e,t){return U8.apply(this,arguments)}function U8(){return U8=OA(nd.mark(function e(t,n){var i,r,o,s,a,l,u,c,d,f,h,p,m,_,b,v,D,A,L,k,B,q,W,X,oe,ae,Se,ie,te,de,pe,Re,$t,Zn,kt,qi,Ho,Oi,ro,qe,Et,Zt,Ie,Hr,kn,xr,mr=arguments;return nd.wrap(function(Cf){for(;;)switch(Cf.prev=Cf.next){case 0:if(xr=function(){$t&&document.removeEventListener("click",$t),te.finalize()},d=mr.length>3?mr[3]:void 0,f=(c=mr.length>2&&void 0!==mr[2]?mr[2]:{}).theme?R0(Yi[c.theme],null!==(i=c.config)&&void 0!==i?i:{}):c.config,h=th(c.actions)?c.actions:Fae({},PYe,null!==(r=c.actions)&&void 0!==r?r:{}),p=cp(cp({},FYe),c.i18n),m=null!==(o=c.renderer)&&void 0!==o?o:"canvas",_=null!==(s=c.logLevel)&&void 0!==s?s:dp.Warn,b=null!==(a=c.downloadFileName)&&void 0!==a?a:"visualization",v="string"==typeof t?document.querySelector(t):t){Cf.next=12;break}throw new Error("".concat(t," does not exist"));case 12:return!1!==c.defaultStyle&&(D="vega-embed-style",A=UYe(v),L=A.rootContainer,A.root.getElementById(D)||((k=document.createElement("style")).id=D,k.innerText=void 0===c.defaultStyle||!0===c.defaultStyle?dYe.toString():c.defaultStyle,L.appendChild(k))),B=VYe(n,c.mode),q=LYe[B](n,f),"vega-lite"===B&&q.$schema&&(W=Kse(q.$schema),Pae(HA.vega,"^".concat(W.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(W.version,", but current version is v").concat(HA.vega,"."))),v.classList.add("vega-embed"),h&&v.classList.add("has-actions"),v.innerHTML="",X=v,h&&((oe=document.createElement("div")).classList.add(BYe),v.appendChild(oe),X=oe),(ae=c.patch)&&(q=ae instanceof Function?ae(q):qC(q,ae,!0,!1).newDocument),c.formatLocale&&dp.formatLocale(c.formatLocale),c.timeFormatLocale&&dp.timeFormatLocale(c.timeFormatLocale),ie=dp.parse(q,"vega-lite"===B?{}:f,{ast:Se=c.ast}),(te=new(c.viewClass||dp.View)(ie,cp({loader:d,logLevel:_,renderer:m},Se?{expr:null!==(l=null!==(u=dp.expressionInterpreter)&&void 0!==u?u:c.expr)&&void 0!==l?l:GBe}:{}))).addSignalListener("autosize",(od,Na)=>{var il=Na.type;"fit-x"==il?(X.classList.add("fit-x"),X.classList.remove("fit-y")):"fit-y"==il?(X.classList.remove("fit-x"),X.classList.add("fit-y")):"fit"==il?X.classList.add("fit-x","fit-y"):X.classList.remove("fit-x","fit-y")}),!1!==c.tooltip&&(de=$Ye(c.tooltip)?c.tooltip:new sae(!0===c.tooltip?{}:c.tooltip).call,te.tooltip(de)),void 0===(pe=c.hover)&&(pe="vega"===B),pe&&te.hover((Re="boolean"==typeof pe?{}:pe).hoverSet,Re.updateSet),c&&(null!=c.width&&te.width(c.width),null!=c.height&&te.height(c.height),null!=c.padding&&te.padding(c.padding)),Cf.next=36,te.initialize(X,c.bind).runAsync();case 36:if(!1!==h){if(Zn=v,!1!==c.defaultStyle&&((kt=document.createElement("details")).title=p.CLICK_TO_VIEW_ACTIONS,v.append(kt),Zn=kt,(qi=document.createElement("summary")).innerHTML=jYe,kt.append(qi),$t=od=>{kt.contains(od.target)||kt.removeAttribute("open")},document.addEventListener("click",$t)),Ho=document.createElement("div"),Zn.append(Ho),Ho.classList.add("vega-actions"),!0===h||!1!==h.export)for(Oi=function(){var Na=qe[ro];if(!0===h||!0===h.export||h.export[Na]){var il=p["".concat(Na.toUpperCase(),"_ACTION")],Ey=document.createElement("a");Ey.text=il,Ey.href="#",Ey.target="_blank",Ey.download="".concat(b,".").concat(Na),Ey.addEventListener("mousedown",function(){var ZXe=OA(nd.mark(function Fle(eJe){return nd.wrap(function(Uw){for(;;)switch(Uw.prev=Uw.next){case 0:return eJe.preventDefault(),Uw.next=3,te.toImageURL(Na,c.scaleFactor);case 3:this.href=Uw.sent;case 5:case"end":return Uw.stop()}},Fle,this)}));return function(Fle){return ZXe.apply(this,arguments)}}()),Ho.append(Ey)}},ro=0,qe=["svg","png"];ro<qe.length;ro++)Oi();(!0===h||!1!==h.source)&&((Et=document.createElement("a")).text=p.SOURCE_ACTION,Et.href="#",Et.addEventListener("click",function(od){var Na,il;jae(ak()(n),null!==(Na=c.sourceHeader)&&void 0!==Na?Na:"",null!==(il=c.sourceFooter)&&void 0!==il?il:"",B),od.preventDefault()}),Ho.append(Et)),"vega-lite"===B&&(!0===h||!1!==h.compiled)&&((Zt=document.createElement("a")).text=p.COMPILED_ACTION,Zt.href="#",Zt.addEventListener("click",function(od){var Na,il;jae(ak()(q),null!==(Na=c.sourceHeader)&&void 0!==Na?Na:"",null!==(il=c.sourceFooter)&&void 0!==il?il:"","vega"),od.preventDefault()}),Ho.append(Zt)),(!0===h||!1!==h.editor)&&(Hr=null!==(Ie=c.editorUrl)&&void 0!==Ie?Ie:"https://vega.github.io/editor/",(kn=document.createElement("a")).text=p.EDITOR_ACTION,kn.href="#",kn.addEventListener("click",function(od){cYe(window,Hr,{config:f,mode:B,renderer:m,spec:ak()(n)}),od.preventDefault()}),Ho.append(kn))}return Cf.abrupt("return",{view:te,spec:n,vgSpec:q,finalize:xr});case 38:case"end":return Cf.stop()}},e)})),U8.apply(this,arguments)}class Hae{}class Uae{}class Ef{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let i=t[n];const r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(n,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ef?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new Ef;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ef?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const r=("a"===t.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class GYe{encodeKey(t){return zae(t)}encodeValue(t){return zae(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const qYe=/%(\d[a-f0-9])/gi,YYe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function zae(e){return encodeURIComponent(e).replace(qYe,(t,n)=>{var i;return null!==(i=YYe[n])&&void 0!==i?i:t})}function Gae(e){return`${e}`}class fp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new GYe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WYe(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n];this.map.set(n,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new fp({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(Gae(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(Gae(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class KYe{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Wae(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function qae(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Yae(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Bw{constructor(t,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function XYe(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ef),this.context||(this.context=new KYe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new fp,this.urlWithParams=n}serializeBody(){return null===this.body?null:Wae(this.body)||qae(this.body)||Yae(this.body)||function JYe(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof fp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Yae(this.body)?null:qae(this.body)?this.body.type||null:Wae(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof fp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var n;const i=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const d=null!==(n=t.context)&&void 0!==n?n:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((f,h)=>f.set(h,t.setHeaders[h]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((f,h)=>f.set(h,t.setParams[h]),c)),new Bw(i,r,s,{params:c,headers:u,context:d,reportProgress:l,responseType:o,withCredentials:a})}}var Vr=(()=>((Vr=Vr||{})[Vr.Sent=0]="Sent",Vr[Vr.UploadProgress=1]="UploadProgress",Vr[Vr.ResponseHeader=2]="ResponseHeader",Vr[Vr.DownloadProgress=3]="DownloadProgress",Vr[Vr.Response=4]="Response",Vr[Vr.User=5]="User",Vr))();class z8{constructor(t,n=200,i="OK"){this.headers=t.headers||new Ef,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class G8 extends z8{constructor(t={}){super(t),this.type=Vr.ResponseHeader}clone(t={}){return new G8({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class UA extends z8{constructor(t={}){super(t),this.type=Vr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new UA({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Kae extends z8{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function W8(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let $w=(()=>{class e{constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof Bw)o=n;else{let l,u;l=r.headers instanceof Ef?r.headers:new Ef(r.headers),r.params&&(u=r.params instanceof fp?r.params:new fp({fromObject:r.params})),o=new Bw(n,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Yt(o).pipe(y0(l=>this.handler.handle(l)));if(n instanceof Bw||"events"===r.observe)return s;const a=s.pipe(Xo(l=>l instanceof UA));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ft(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ft(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ft(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(ft(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new fp).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,W8(r,i))}post(n,i,r={}){return this.request("POST",n,W8(r,i))}put(n,i,r={}){return this.request("PUT",n,W8(r,i))}}return e.\u0275fac=function(n){return new(n||e)(ze(Hae))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class Xae{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const Jae=new nn("HTTP_INTERCEPTORS");let QYe=(()=>{class e{intercept(n,i){return i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const ZYe=/^\)\]\}',?\n/;let Qae=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xn(i=>{const r=this.xhrFactory.build();if(r.open(n.method,n.urlWithParams),n.withCredentials&&(r.withCredentials=!0),n.headers.forEach((h,p)=>r.setRequestHeader(h,p.join(","))),n.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const h=n.detectContentTypeHeader();null!==h&&r.setRequestHeader("Content-Type",h)}if(n.responseType){const h=n.responseType.toLowerCase();r.responseType="json"!==h?h:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const h=1223===r.status?204:r.status,p=r.statusText||"OK",m=new Ef(r.getAllResponseHeaders()),_=function eKe(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||n.url;return s=new G8({headers:m,status:h,statusText:p,url:_}),s},l=()=>{let{headers:h,status:p,statusText:m,url:_}=a(),b=null;204!==p&&(b=void 0===r.response?r.responseText:r.response),0===p&&(p=b?200:0);let v=p>=200&&p<300;if("json"===n.responseType&&"string"==typeof b){const D=b;b=b.replace(ZYe,"");try{b=""!==b?JSON.parse(b):null}catch(A){b=D,v&&(v=!1,b={error:A,text:b})}}v?(i.next(new UA({body:b,headers:h,status:p,statusText:m,url:_||void 0})),i.complete()):i.error(new Kae({error:b,headers:h,status:p,statusText:m,url:_||void 0}))},u=h=>{const{url:p}=a(),m=new Kae({error:h,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(m)};let c=!1;const d=h=>{c||(i.next(a()),c=!0);let p={type:Vr.DownloadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),"text"===n.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},f=h=>{let p={type:Vr.UploadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",u),r.addEventListener("timeout",u),r.addEventListener("abort",u),n.reportProgress&&(r.addEventListener("progress",d),null!==o&&r.upload&&r.upload.addEventListener("progress",f)),r.send(o),i.next({type:Vr.Sent}),()=>{r.removeEventListener("error",u),r.removeEventListener("abort",u),r.removeEventListener("load",l),r.removeEventListener("timeout",u),n.reportProgress&&(r.removeEventListener("progress",d),null!==o&&r.upload&&r.upload.removeEventListener("progress",f)),r.readyState!==r.DONE&&r.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(ze(rV))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const q8=new nn("XSRF_COOKIE_NAME"),Y8=new nn("XSRF_HEADER_NAME");class Zae{}let tKe=(()=>{class e{constructor(n,i,r){this.doc=n,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=K7(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui),ze(Ev),ze(q8))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),K8=(()=>{class e{constructor(n,i){this.tokenService=n,this.headerName=i}intercept(n,i){const r=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(ze(Zae),ze(Y8))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),nKe=(()=>{class e{constructor(n,i){this.backend=n,this.injector=i,this.chain=null}handle(n){if(null===this.chain){const i=this.injector.get(Jae,[]);this.chain=i.reduceRight((r,o)=>new Xae(r,o),this.backend)}return this.chain.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(ze(Uae),ze(Pr))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),iKe=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:K8,useClass:QYe}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:q8,useValue:n.cookieName}:[],n.headerName?{provide:Y8,useValue:n.headerName}:[]]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:[K8,{provide:Jae,useExisting:K8,multi:!0},{provide:Zae,useClass:tKe},{provide:q8,useValue:"XSRF-TOKEN"},{provide:Y8,useValue:"X-XSRF-TOKEN"}]}),e})(),rKe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:[$w,{provide:Hae,useClass:nKe},Qae,{provide:Uae,useExisting:Qae}],imports:[[iKe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})(),oKe=(()=>{class e{transform(n,i){return"string"==typeof n?n:Number.isNaN(n)?null:n<1e3?n:(r=Math.floor(Math.log(n)/Math.log(1e3)),(n/Math.pow(1e3,r)).toFixed(i)+["k","M","B","T","P","E"][r-1]);var r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Nr({name:"bigNumSuff",type:e,pure:!0}),e})(),sKe=(()=>{class e{constructor(n){this.http=n,this.total_market_cap="unknown",this.total_employees="Unknown",this.number_of_suppliers="Unknown",this.workers_in_supply_chain="Unknown",this.selectedYear="latest"}ngOnInit(){this.updateSection()}ngAfterViewInit(){}updateSection(){this.http.get("https://wikirate.org/Core+Market_Cap+Answer.json?filter[not_ids]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list").subscribe(s=>{this.total_market_cap=this.getSum(s),vy("div#vis",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Market Cap of Apparel Top 100 Companies",width:900,height:560,autosize:"none",signals:[{name:"type",value:"equalEarth"},{name:"rotate0",value:-15},{name:"rotate1",value:0},{name:"rotate2",value:0},{name:"center0",value:0},{name:"center1",value:0},{name:"translate0",update:"width / 2"},{name:"translate1",update:"height / 2"},{name:"borderWidth",value:1},{name:"hover",value:null,on:[{events:"@circles:mouseover",update:"datum"},{events:"@circles:mouseout",update:"null"}]},{name:"title",value:"Market Cap of Apparel Top 100 Companies",update:"hover ? hover.name + ' (' + hover.market_cap_text + ')' : 'Market Cap of Apparel Top 100 Companies'"},{name:"cell_stroke",value:null,on:[{events:"dblclick",update:"cell_stroke ? null : 'brown'"},{events:"mousedown!",update:"cell_stroke"}]},{name:"tx",update:"width / 2"},{name:"ty",update:"height / 2"}],data:[{name:"world",url:"assets/world-110m.json",format:{type:"topojson",feature:"countries"},transform:[{type:"geopath",projection:"projection"}]},{name:"market_cap",values:s,format:{type:"json",parse:{value:"number"}}},{name:"apparel_top_100_geo",values:[{company:"Puma",lat:49.5755269,lng:10.8714149},{company:"H&M",lat:59.3317973,lng:18.0583112},{company:"Gap inc.",lat:37.79081085,lng:-122.3909804},{company:"Marks and Spencer Group plc",lat:51.51865225,lng:-.175000995},{company:"Asos",lat:51.5333888,lng:-.139905636},{company:"Nike Inc.",lat:45.507191,lng:-122.827393},{company:"Adidas AG",lat:49.58253265,lng:10.91048856},{company:"Louis Vuitton Malletier SA (LVMH)",lat:48.8586162,lng:2.3429393},{company:"Burberry Group plc",lat:51.49437555,lng:-.126392473},{company:"Guess? Inc",lat:34.02410214,lng:-118.2391726},{company:"Zalando SE",lat:52.50655705,lng:13.44148723},{company:"Nordstrom",lat:47.614361,lng:-122.335852},{company:"Fossil Group, Inc.",lat:32.939486,lng:-96.745425},{company:"Inditex",lat:43.32307,lng:-8.49019},{company:"American Eagle Outfitters",lat:40.4282854,lng:-79.9606724},{company:"Hugo Boss AG",lat:48.54694115,lng:9.271591308},{company:"Urban Outfitters",lat:39.9046154,lng:-75.1739344},{company:"Skechers USA Inc",lat:33.88490024,lng:-118.4100629},{company:"Ralph Lauren Corporation",lat:40.7638797,lng:-73.97161599},{company:"Prada",lat:43.5463209,lng:11.5707173},{company:"Under Armour",lat:39.27516635,lng:-76.5903856},{company:"Tapestry Inc",lat:40.75274965,lng:-74.00152052},{company:"Columbia Sportswear",lat:45.52966955,lng:-122.8248874},{company:"Foot Locker Inc.",lat:40.7526738,lng:-73.9950505},{company:"Abercrombie & Fitch",lat:40.0904919,lng:-82.7755106},{company:"Macy's",lat:40.7509149,lng:-73.98933149},{company:"DSW Inc.",lat:39.98864,lng:-82.89824},{company:"Esprit Holdings Limited",lat:22.2924077,lng:114.20294},{company:"Moncler",lat:45.4540887,lng:9.1588378},{company:"Asics Corporation",lat:34.6913,lng:135.183},{company:"Ross Stores",lat:37.7079277,lng:-121.8881302},{company:"Chico's FAS Inc",lat:28.75054,lng:-82.5001},{company:"Gildan Activewear Inc.",lat:45.504205,lng:-73.571125},{company:"Boohoo.com",lat:53.480813,lng:-2.2326412},{company:"Anta Sports Products",lat:24.66745455,lng:118.5540534},{company:"Gerry Weber",lat:52.0603355,lng:8.3615619},{company:"Brunello Cucinelli",lat:43.0830538,lng:12.277156},{company:"Next",lat:52.6071351,lng:-1.2418189},{company:"Salvatore Ferragamo SpA",lat:43.7722809,lng:11.2513491},{company:"Express Inc",lat:40.001342,lng:-83.094886},{company:"Tiffany & Co.",lat:42.7158328,lng:-73.7079487},{company:"Hermes International",lat:48.8688993,lng:2.3217376},{company:"Hudson's Bay Company",lat:43.7823924,lng:-79.7718789},{company:"United Arrows",lat:35.706766,lng:139.7616265},{company:"Canada Goose",lat:43.6954839,lng:-79.46397981},{company:"Bosideng International Holdings Limited",lat:31.2322758,lng:121.4692071},{company:"Metersbonwe",lat:31.2322758,lng:121.4692071},{company:"Dick's Sporting Goods",lat:40.465624,lng:-80.205892},{company:"Capri Holdings Ltd (formerly Michael Kors)",lat:51.51414,lng:-.11828},{company:"Buckle Inc",lat:40.699424,lng:-99.105033},{company:"TOD'S",lat:43.2627,lng:13.7203},{company:"Dillard's, Inc.",lat:34.753373,lng:-92.287569},{company:"Li-Ning",lat:39.812904,lng:116.547259},{company:"Children's Place Inc",lat:40.78885,lng:-74.056035},{company:"Steve Madden",lat:40.75017166,lng:-73.91508484},{company:"lululemon athletica",lat:49.272004,lng:-123.147121},{company:"PVH",lat:40.74969101,lng:-73.98155975},{company:"Ted Baker",lat:51.537667,lng:-.132265},{company:"Fast Retailing",lat:34.0372,lng:131.3577},{company:"JD Sports Fashion plc",lat:53.573908,lng:-2.278928},{company:"Burlington Stores Inc",lat:40.094145,lng:-74.812232},{company:"Sports Direct",lat:53.2063042,lng:-1.2205319},{company:"Superdry plc",lat:51.9202605,lng:-2.0968209},{company:"VF",lat:39.751618,lng:-105.002998},{company:"Christian Dior",lat:48.8697044,lng:2.325038},{company:"Semir",lat:27.9963899,lng:120.695345},{company:"L Brands",lat:39.981797,lng:-83.033627},{company:"Deckers Outdoor Corporation",lat:34.4314978,lng:-119.8635551},{company:"Hanesbrands",lat:36.18900595,lng:-80.2640623},{company:"Carter's Inc",lat:33.848681,lng:-84.366387},{company:"TJX",lat:42.308755,lng:-71.382745},{company:"Oxford Industries Inc",lat:33.7811172,lng:-84.3837092},{company:"Cato Corp",lat:35.128699,lng:-80.87873},{company:"JC Penney",lat:33.0136764,lng:-96.6925096},{company:"G-III Apparel Group, LTD.",lat:40.6256945,lng:-73.9870861},{company:"Lojas Renner S.A.",lat:-30.0324999,lng:-51.2303767},{company:"Kering",lat:48.8464177,lng:2.3153025},{company:"Caleres Inc",lat:38.6526865,lng:-90.3477704},{company:"Genesco Inc.",lat:36.114742,lng:-86.693776},{company:"Ascena Retail Group Inc",lat:41.07202702,lng:-74.17060403},{company:"Wolverine World Wide",lat:43.13425389,lng:-85.54185089},{company:"Mulberry Group Plc",lat:51.50370825,lng:-.191581413},{company:"Luxottica Group SpA",lat:45.4673878,lng:9.1775777},{company:"Arvind Limited",lat:23.0583877,lng:72.6371753},{company:"Aditya Birla Fashion & Retail Ltd",lat:19.0652797,lng:72.8793805},{company:"Vipshop Holdings",lat:23.1025812,lng:113.2245207},{company:"Geox SpA",lat:45.7883555,lng:12.0476363},{company:"Alpargatas - Havaianas",lat:-23.5506507,lng:-46.6333824},{company:"Onward Holdings",lat:35.666255,lng:139.775565},{company:"Lao Feng Xiang Jewelry",lat:31.2322758,lng:121.4692071},{company:"Richemont",lat:46.2587,lng:6.1351},{company:"Cia Hering",lat:-7.33561,lng:-47.46218},{company:"Vera Bradley Inc.",lat:40.9570408,lng:-85.3015323},{company:"Boot Barn Holdings Inc.",lat:33.6596704,lng:-117.7380569},{company:"Swatch Group",lat:47.1354263,lng:7.234641},{company:"Francesca's",lat:29.83278726,lng:-95.51077112},{company:"Chow Tai Fook",lat:22.28365,lng:114.15494},{company:"Van de Velde",lat:51.01324,lng:3.9258203},{company:"YOOX NET-A-PORTER Group SpA",lat:45.4450409,lng:9.1514221},{company:"Grendene",lat:-3.68611,lng:-40.34972}]},{name:"apparel_top_100_companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"},transform:[{type:"lookup",from:"market_cap",key:"company",fields:["id"],values:["value"],as:["market_cap"],default:0},{type:"lookup",from:"apparel_top_100_geo",key:"company",fields:["name"],values:["lat","lng"],as:["lat","lng"],default:0},{type:"geopoint",projection:"projection",fields:["lng","lat"]},{type:"formula",as:"market_cap_text",expr:"replace(format(datum.market_cap,'$,.4s'), 'G', 'B')"}]},{name:"graticule",transform:[{type:"graticule",step:[15,15]}]}],projections:[{name:"projection",type:"mercator"}],scales:[{name:"size",domain:{data:"apparel_top_100_companies",field:"market_cap"},zero:!1,range:[30,500]},{name:"color",type:"linear",nice:!0,domain:{data:"apparel_top_100_companies",field:"market_cap"},range:["#fef1eb","#F7733D"]}],marks:[{type:"shape",from:{data:"graticule"},encode:{update:{strokeWidth:{value:1},fill:{value:null}}},transform:[{type:"geoshape",projection:"projection"}]},{type:"shape",from:{data:"world"},encode:{update:{fill:{value:"#1D1E3F"},stroke:{value:"rgba(247,247,248, 0.8)"},strokeWidth:{signal:"+borderWidth"},zindex:{value:0}}},transform:[{type:"geoshape",projection:"projection"}]},{name:"circles",type:"symbol",from:{data:"apparel_top_100_companies"},encode:{enter:{x:{field:"x"},y:{field:"y"},size:{scale:"size",field:"market_cap"},fillOpacity:{value:1},stroke:{value:"white"},strokeWidth:{value:.5},tooltip:{signal:"{'title': datum.name,'Headquarters': datum.headquarters, 'Market Cap': datum.market_cap_text}"}},update:{fill:{scale:"color",field:"market_cap"},stroke:{value:"#171832"}},hover:{fill:{value:"#912E06"},stroke:{value:"#171832"}}},transform:[{type:"force",static:!0,forces:[{force:"collide",radius:{expr:"1 + sqrt(datum.size) / 2"}},{force:"x",x:"datum.x"},{force:"y",y:"datum.y"}]}]},{type:"text",interactive:!1,encode:{enter:{x:{value:895},y:{value:550},fill:{value:"#F7F7F8"},fontSize:{value:12},align:{value:"right"}},update:{text:{signal:"title"}}}}],legends:[{fill:"color",orient:"bottom-left",title:"Market Cap (in USD$)",labelColor:"#F7F7F8",titleColor:"#F7F7F8"}]},{renderer:"svg",actions:{source:!1,editor:!1}}).catch(console.warn)}),this.http.get("https://wikirate.org/Commons+Employee+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list").subscribe(s=>{this.total_employees=this.getSum(s)}),this.http.get("https://wikirate.org/Commons+Supplied_By+Answers.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Apparel%20100%20Companies&filter[year]="+this.selectedYear+"&limit=100&view=answer_list").subscribe(s=>{this.number_of_suppliers=this.getSum(s)}),this.http.get("https://wikirate.org/Clean_Clothes_Campaign+Number_of_Workers+Answers.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Supplier of Apparel 100&view=answer_list").subscribe(s=>{this.workers_in_supply_chain=this.getSum(s)})}getSum(n){let i=0;for(var r=0;r<n.length;r++)"Unknown"!==n[r].value&&(i+=Number(n[r].value));return 0==i&&(this.workers_in_supply_chain="Unknown"),i}}return e.\u0275fac=function(n){return new(n||e)(ee($w))},e.\u0275cmp=di({type:e,selectors:[["app-market-cap-map"]],decls:60,vars:25,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row","mb-2"],[1,"col-md-8"],[1,"showcase-title-white"],[1,"filters","col-md-4","mt-1"],[1,"year-filter","col-md-5","ml-auto"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],["value","2018",3,"ngValue"],[1,"row","justify-content-center","mb-2"],["id","vis",1,"mt-2"],[1,"row","align-items-end","mt-4"],[1,"mt-1","col-md","text-center"],[1,"secondary-info","mt-1"],[1,"primary-info"],[1,"explore","mt-1","d-none","d-md-block"],["target","_blank",3,"href"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"div",3),x(4,"h2",4),le(5," The top 100 apparel companies' headquarters and market cap value "),T(),T(),x(6,"div",5),x(7,"div",6),x(8,"select",7),gn("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateSection()}),x(9,"option",8),le(10,"latest"),T(),x(11,"option",9),le(12,"2020"),T(),x(13,"option",10),le(14,"2019"),T(),x(15,"option",11),le(16,"2018"),T(),T(),T(),T(),T(),x(17,"div",12),Ve(18,"div",13),T(),x(19,"div",14),x(20,"div",15),x(21,"div",16),le(22,"Total Market Cap"),T(),x(23,"div",17),le(24),h0(25,"bigNumSuff"),T(),x(26,"div",18),x(27,"a",19),le(28,"Dive Deeper"),Ve(29,"i",20),T(),T(),T(),x(30,"div",15),x(31,"div",16),le(32,"Employees"),T(),x(33,"div",17),le(34),h0(35,"bigNumSuff"),T(),x(36,"div",18),x(37,"a",19),le(38,"Dive Deeper"),Ve(39,"i",20),T(),T(),T(),x(40,"div",15),x(41,"div",16),le(42,"Suppliers"),T(),x(43,"div",17),le(44),h0(45,"bigNumSuff"),T(),x(46,"div",18),x(47,"a",19),le(48,"Dive Deeper"),Ve(49,"i",20),T(),T(),T(),x(50,"div",15),x(51,"div",16),le(52," Employees in Supply Chain "),T(),x(53,"div",17),le(54),h0(55,"bigNumSuff"),T(),x(56,"div",18),x(57,"a",19),le(58,"Dive Deeper"),Ve(59,"i",20),T(),T(),T(),T(),T(),T()),2&n&&(Ne(8),Je("ngModel",i.selectedYear),Ne(1),Je("ngValue","latest"),Ne(2),Je("ngValue",2020),Ne(2),Je("ngValue",2019),Ne(2),Je("ngValue",2018),Ne(9),Ba("USD$ ",yv(25,13,i.total_market_cap,1),"+"),Ne(3),Nd("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Market%20Cap&filter%5Byear%5D=",i.selectedYear,"",ua),Ne(7),Ba("",yv(35,16,i.total_employees,2),"+"),Ne(3),Nd("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Employees&filter%5Byear%5D=",i.selectedYear,"",ua),Ne(7),Ba("",yv(45,19,i.number_of_suppliers,2),"+"),Ne(3),Nd("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplied%20by&filter%5Byear%5D=",i.selectedYear,"",ua),Ne(7),Ba("",yv(55,22,i.workers_in_supply_chain,2),"+"),Ne(3),Nd("href","https://wikirate.org/Clean_Clothes_Campaign+Number_of_Workers?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bcompany_group%5D%5B%5D=Supplier%20of%20Apparel%20100&filter%5Byear%5D=",i.selectedYear,"",ua))},directives:[Jf,S0,zp,T0,A0],pipes:[oKe],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#f7f7f8;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),aKe=(()=>{class e{constructor(){this.selectedYear="latest",this.innerWidth=0}ngOnInit(){this.innerWidth=window.innerWidth,console.log(this.innerWidth),this.updateBarChart()}updateBarChart(){let n=20;this.innerWidth>=1200?n=40:this.innerWidth>=800&&(n=30),vy("div#esg-overall-wikirating",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"ESG Disclosure Rate",width:1080,height:510,padding:5,signals:[{name:"companies",value:n,bind:{input:"range",min:20,max:100,step:1}},{name:"order",value:"descending",bind:{input:"select",options:["ascending","descending"]}}],data:[{name:"apparel_companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"}},{name:"suppplier_info",url:"https://wikirate.org/Apparel_Research_Group+ESG_Disclosure_Rate+Answers.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0",format:{type:"json",parse:{value:"number"}},transform:[{type:"lookup",from:"apparel_companies",key:"id",fields:["company"],values:["name","headquarters"],as:["company_name","headquarters"],default:0},{type:"window",sort:{field:"value",order:{signal:"order"}},ops:["row_number"],as:["rank"]},{type:"filter",expr:"datum.rank <= companies"},{type:"formula",as:"rate",expr:"format(datum.value,',.2f')"}]}],marks:[{type:"rect",from:{data:"suppplier_info"},encode:{update:{y:{scale:"y",value:0},y2:{scale:"y",field:"value"},x:{scale:"x",field:"company_name"},width:{scale:"x",band:1},tooltip:{signal:"{'Company':datum.company_name, 'Headquarters':datum.headquarters , 'ESG Disclosure Rate':datum.rate}"},fill:{scale:"color",field:"value"},cornerRadiusTopRight:{value:3},cornerRadiusTopLeft:{value:3}},hover:{fill:{value:"black"}}}}],scales:[{name:"y",type:"linear",domain:[0,10],range:"height",nice:!0},{name:"x",type:"band",domain:{data:"suppplier_info",field:"company_name",sort:{op:"max",field:"value",order:{signal:"order"}}},range:"width",padding:.1},{name:"color",type:"linear",nice:!0,domain:{data:"suppplier_info",field:"value"},range:["#fef1eb","#F7733D"]}],axes:[{scale:"y",orient:"left",format:",d",tickCount:5,labelFontSize:{signal:"10 + 300 / companies"}},{scale:"x",orient:"bottom",labelAngle:55,labelAlign:"left",labelLimit:130,labelFontSize:{signal:"10 + 300 / companies"}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=di({type:e,selectors:[["app-esg-disclosure-rates"]],decls:29,vars:6,consts:[[1,"wikirate-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[1,"filters","col-md-4","mt-1"],[1,"year-filter","col-md-5","ml-auto"],["id","inputYear",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],[1,"col-12","mt-2"],[1,"bar-chart-container"],["id","esg-overall-wikirating",1,"m-2"],[1,"showcase-main-text","mt-2","col-md-9"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank",3,"href"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"div",3),x(4,"h2",4),le(5),T(),x(6,"h3",5),le(7," Company rating based on ESG data shared by companies public "),T(),T(),x(8,"div",6),x(9,"div",7),x(10,"select",8),gn("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateBarChart()}),x(11,"option",9),le(12,"latest"),T(),x(13,"option",10),le(14,"2020"),T(),x(15,"option",11),le(16,"2019"),T(),T(),T(),T(),T(),x(17,"div",2),x(18,"div",12),x(19,"div",13),Ve(20,"div",14),T(),T(),T(),x(21,"div",2),x(22,"div",15),le(23," Nearly a third of the top 100 apparel companies don\u2019t publish a recent report with sustainability information. For example, only half share information about their greenhouse gas (GHG) emissions. "),T(),x(24,"div",16),x(25,"div",17),x(26,"a",18),le(27,"Dive Deeper"),Ve(28,"i",19),T(),T(),T(),T(),T(),T()),2&n&&(Ne(5),Ba(" Company ESG disclosure rating (",i.selectedYear,") "),Ne(5),Je("ngModel",i.selectedYear),Ne(1),Je("ngValue","latest"),Ne(2),Je("ngValue",2020),Ne(2),Je("ngValue",2019),Ne(11),Nd("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=ESG%20Disclosure&filter%5Byear%5D=",i.selectedYear,"",ua))},directives:[Jf,S0,zp,T0,A0],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})();const lKe=["radarChartContainer"];function uKe(e,t){if(1&e&&(x(0,"option",15),le(1),T()),2&e){const n=t.$implicit;Je("ngValue",n.id),Ne(1),Md(n.name)}}function cKe(e,t){1&e&&(x(0,"div",21),Ve(1,"img",22),x(2,"p",23),le(3,"You explored unresearched areas, no data available."),T(),T())}let dKe=(()=>{class e{constructor(n,i,r,o){this.http=n,this.route=i,this.apparelService=r,this.renderer=o,this.environmental_disclosure_rate=0,this.social_disclosure_rate=0,this.governance_disclosure_rate=0,this.nodata=!0,this.selectedYear="latest",this.selectedCompany=0,this.apparelTop100=[],this.apparelTop100=r.getCompanies()}ngOnInit(){this.updateSection()}updateSection(){null!=this.radarChart&&this.renderer.removeChild(this.radarChartContainer.nativeElement,this.radarChart),this.nodata=!0,0!=this.selectedCompany?this.http.get("https://wikirate.org/Apparel_Research_Group+Environmental_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(n=>{n.length>0&&(this.environmental_disclosure_rate=n[0].value,this.http.get("https://wikirate.org/Apparel_Research_Group+Social_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(i=>{i.length>0&&(this.social_disclosure_rate=i[0].value,this.http.get("https://wikirate.org/Apparel_Research_Group+Governance_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(r=>{r.length>0&&(this.governance_disclosure_rate=r[0].value,this.nodata=!1,this.radarChart=this.renderer.createElement("div"),this.radarChart.id="esg-performance",this.radarChart.class="radar-chart-container m-2",this.renderer.appendChild(this.radarChartContainer.nativeElement,this.radarChart),this.updateRadarChart("of "+this.apparelService.getCompany(+this.selectedCompany).name))}))}))}):this.http.get("https://wikirate.org/Apparel_Research_Group+Environmental_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(n=>{this.environmental_disclosure_rate=0;for(var i=0;i<n.length;i++)this.environmental_disclosure_rate+=+n[i].value;this.environmental_disclosure_rate=this.environmental_disclosure_rate/n.length,this.http.get("https://wikirate.org/Apparel_Research_Group+Social_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&"+this.selectedYear+"&limit=0&view=answer_list").subscribe(r=>{this.social_disclosure_rate=0;for(var o=0;o<r.length;o++)this.social_disclosure_rate+=+r[o].value;this.social_disclosure_rate=this.social_disclosure_rate/r.length,this.http.get("https://wikirate.org/Apparel_Research_Group+Governance_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(s=>{this.governance_disclosure_rate=0;for(var a=0;a<s.length;a++)this.governance_disclosure_rate+=+s[a].value;this.governance_disclosure_rate=this.governance_disclosure_rate/s.length,this.nodata=!1,this.radarChart=this.renderer.createElement("div"),this.radarChart.id="esg-performance",this.radarChart.class="m-2",this.renderer.appendChild(this.radarChartContainer.nativeElement,this.radarChart),this.updateRadarChart("of Apparel Top 100 (avg Rating)")})})})}updateRadarChart(n){vy("div#esg-performance",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"A radar chart example, showing multiple dimensions in a radial layout.",width:510,height:460,padding:40,autosize:{type:"none",contains:"padding"},title:{text:"ESG Disclosure Rate ("+this.selectedYear+")",anchor:"middle",dy:-8,dx:{signal:"-width/4"},subtitle:n,color:"#F7F7F8",subtitleColor:"#F7F7F8"},signals:[{name:"radius",update:"width / 2.2"}],data:[{name:"table",values:[{key:["Environmental","Disclosure","Rate"],value:(Math.round(100*this.environmental_disclosure_rate)/100).toFixed(2),category:0},{key:["Social","Disclosure","Rate"],value:(Math.round(100*this.social_disclosure_rate)/100).toFixed(2),category:0},{key:["Governance","Disclosure","Rate"],value:(Math.round(100*this.governance_disclosure_rate)/100).toFixed(2),category:0}]},{name:"keys",source:"table",transform:[{type:"aggregate",groupby:["key"]}]}],scales:[{name:"angular",type:"point",range:[-3.14159,3.14159],padding:.5,domain:{data:"table",field:"key"}},{name:"radial",type:"linear",range:{signal:"[0, radius]"},zero:!0,nice:!1,domain:[0,10],domainMin:0},{name:"color",type:"ordinal",domain:{data:"table",field:"category"},range:["#F7733D","#F7733D"]}],encode:{enter:{x:{signal:"radius"},y:{signal:"radius"}}},marks:[{type:"group",name:"categories",zindex:1,from:{facet:{data:"table",name:"facet",groupby:["category"]}},marks:[{type:"line",name:"category-line",from:{data:"facet"},encode:{enter:{interpolate:{value:"linear-closed"},x:{signal:"scale('radial', datum.value) * cos(scale('angular', datum.key))"},y:{signal:"scale('radial', datum.value) * sin(scale('angular', datum.key))"},stroke:{scale:"color",field:"category"},strokeWidth:{value:1},fill:{scale:"color",field:"category"},fillOpacity:{value:.2}}}},{type:"text",name:"value-text",from:{data:"category-line"},encode:{enter:{x:{signal:"datum.x + 14 * cos(scale('angular', datum.datum.key))"},y:{signal:"datum.y + 14 * sin(scale('angular', datum.datum.key))"},text:{signal:"datum.datum.value"},align:{value:"center"},baseline:{value:"middle"},fontWeight:{value:"bold"},fill:{value:"#F7F7F8"}}}}]},{type:"rule",name:"radial-grid",from:{data:"keys"},zindex:0,encode:{enter:{x:{value:0},y:{value:0},x2:{signal:"radius * cos(scale('angular', datum.key))"},y2:{signal:"radius * sin(scale('angular', datum.key))"},stroke:{value:"lightgray"},strokeWidth:{value:1}}}},{type:"text",name:"key-label",from:{data:"keys"},zindex:1,encode:{enter:{x:{signal:"(radius + 11) * cos(scale('angular', datum.key))"},y:{signal:"(radius - 5) * sin(scale('angular', datum.key))"},text:{field:"key"},align:[{test:"abs(scale('angular', datum.key)) > PI / 2",value:"right"},{value:"left"}],baseline:[{test:"scale('angular', datum.key) > 0",value:"top"},{test:"scale('angular', datum.key) == 0",value:"middle"},{value:"bottom"}],fill:{value:"#F7F7F8"},fontWeight:{value:"bold"}}}},{type:"line",name:"outer-line",from:{data:"radial-grid"},encode:{enter:{interpolate:{value:"linear-closed"},x:{field:"x2"},y:{field:"y2"},stroke:{value:"#F7F7F8"},strokeWidth:{value:1}}}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}}return e.\u0275fac=function(n){return new(n||e)(ee($w),ee(hc),ee(D0),ee($a))},e.\u0275cmp=di({type:e,selectors:[["app-esg-performance"]],viewQuery:function(n,i){if(1&n&&Pp(lKe,5),2&n){let r;Si(r=xi())&&(i.radarChartContainer=r.first)}},decls:31,vars:8,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8","vertical-center"],[1,"content-container"],[1,"showcase-title","text-white"],[1,"showcase-subtitle-white"],[1,"filters","col-md-4"],[1,"row","col","justify-content-md-end"],[1,"company-filter","mt-1","mr-1"],["id","inputCompany",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"year-filter","mt-1"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"row","col-12","mt-2"],[1,"col-md"],[1,"chart-container"],["radarChartContainer",""],["id","no_data","class","text-center mt-5",4,"ngIf"],["id","no_data",1,"text-center","mt-5"],["src","assets/moon-light.svg","width","60px",1,"mb-1"],[1,"mt-3","showcase-main-text","text-white"]],template:function(n,i){1&n&&(x(0,"div",0),Ve(1,"hr"),x(2,"div",1),x(3,"div",2),x(4,"div",3),x(5,"div",4),x(6,"h2",5),le(7," Broken-down company ESG disclosure rating "),T(),x(8,"h3",6),x(9,"p"),le(10,"The top 100 apparel companies\u2019 ESG disclosure rates per axis by year."),T(),T(),T(),T(),x(11,"div",7),x(12,"div",8),x(13,"div",9),x(14,"select",10),gn("ngModelChange",function(o){return i.selectedCompany=o})("change",function(){return i.updateSection()}),Ht(15,uKe,2,2,"option",11),T(),T(),x(16,"div",12),x(17,"select",13),gn("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateSection()}),x(18,"option",14),le(19,"latest"),T(),x(20,"option",15),le(21,"2020"),T(),x(22,"option",15),le(23,"2019"),T(),x(24,"option",15),le(25,"2018"),T(),T(),T(),T(),T(),x(26,"div",16),x(27,"div",17),x(28,"div",18,19),Ht(30,cKe,4,0,"div",20),T(),T(),T(),T(),T(),T()),2&n&&(Ne(14),Je("ngModel",i.selectedCompany),Ne(1),Je("ngForOf",i.apparelTop100),Ne(2),Je("ngModel",i.selectedYear),Ne(1),Je("ngValue","latest"),Ne(2),Je("ngValue",2020),Ne(2),Je("ngValue",2019),Ne(2),Je("ngValue",2018),Ne(6),Je("ngIf",i.nodata))},directives:[Jf,S0,zp,zf,T0,A0,Fd],styles:[".radar-chart-container[_ngcontent-%COMP%]{width:470px;height:380px;border-radius:5px}"]}),e})(),fKe=(()=>{class e{constructor(){}ngOnInit(){this.createChart()}createChart(){vy("div#line-chart",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Apparel Top 100 Companies Reporting their Suppliers.",width:500,height:200,padding:5,signals:[{name:"interpolate",value:"cardinal"}],data:[{name:"supplier_lists",url:"https://wikirate.org/Commons+Supplier_List_all+Answer.json?filter[not_ids]=&filter[company_name]=&filter[value][]=Yes&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list",format:{type:"json",property:"items"},transform:[{type:"aggregate",groupby:["year"],fields:["company"],ops:["count"],as:["number_of_lists"]},{type:"filter",expr:"datum.year > 2016 && datum.year < 2021"}]}],scales:[{name:"x",type:"linear",range:"width",nice:!0,zero:!1,round:!0,domain:[2016,2021]},{name:"y",type:"linear",domain:[0,100],range:"height",nice:!0,zero:!1,round:!0},{name:"align",type:"ordinal",domain:["left","right","top","bottom"],range:["right","left","center","center"]},{name:"base",type:"ordinal",domain:["left","right","top","bottom"],range:["middle","middle","bottom","top"]},{name:"dx",type:"ordinal",domain:["left","right","top","bottom"],range:[-7,6,0,0]},{name:"dy",type:"ordinal",domain:["left","right","top","bottom"],range:[1,1,-5,8]}],axes:[{orient:"bottom",scale:"x",tickMinStep:1,format:""},{orient:"left",scale:"y",tickMinStep:2}],marks:[{type:"line",from:{data:"supplier_lists"},encode:{enter:{interpolate:{value:"linear"},x:{scale:"x",field:"year"},y:{scale:"y",field:"number_of_lists"},stroke:{value:"#000"},strokeWidth:{value:3}}}},{type:"symbol",from:{data:"supplier_lists"},encode:{enter:{x:{scale:"x",field:"year"},y:{scale:"y",field:"number_of_lists"},fill:{value:"#fff"},stroke:{value:"#000"},strokeWidth:{value:1},size:{value:60},tooltip:{signal:"{'Number of Companies': datum.number_of_lists, 'Year': datum.year}"}},update:{fill:{value:"#fff"},stroke:{value:"#000"}},hover:{fill:{value:"#000"},stroke:{value:"#fff"}}}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=di({type:e,selectors:[["app-supplier-lists-on-wikirate"]],decls:20,vars:0,consts:[[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[1,"col-md"],[1,"wikirate","chart-container","mt-2"],["id","line-chart",1,"m-2"],[1,"col-md-9"],[1,"showcase-main-text","mt-2"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank","href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplier%20List%20(all)"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"h2",3),le(4," Companies reporting their suppliers. "),T(),x(5,"h3",4),le(6," Number of the top 100 apparel companies publishing their list of suppliers. "),T(),T(),T(),x(7,"div",1),x(8,"div",5),x(9,"div",6),Ve(10,"div",7),T(),T(),T(),x(11,"div",1),x(12,"div",8),x(13,"div",9),le(14," The number of the top 100 apparel companies reporting their suppliers more than doubled from 10 to 23 between 2017 and 2020. "),T(),T(),x(15,"div",10),x(16,"div",11),x(17,"a",12),le(18,"Dive Deeper"),Ve(19,"i",13),T(),T(),T(),T(),T())},styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),hKe=(()=>{class e{transform(n,i){return"string"==typeof n?n:Number.isNaN(n)?null:n<1e3?n:n.toString().slice(0,n.toString().length-3)+","+n.toString().slice(-3)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Nr({name:"numFormat",type:e,pure:!0}),e})();function pKe(e,t){if(1&e&&(x(0,"span"),x(1,"b"),le(2),T(),T()),2&e){const n=Jn();Ne(2),Md("For "+n.selectedYear)}}function gKe(e,t){1&e&&(x(0,"b"),le(1,"For the most recent years"),T())}let mKe=(()=>{class e{constructor(n,i){this.http=n,this.route=i,this.number_of_reporting_companies="Unknown",this.unique_suppliers="Unknown",this.selectedYear="latest"}ngOnInit(){this.updateSection(),this.updateChart()}ngAfterViewInit(){}updateChart(){vy("div#bar-chart",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Number of Published Supplier Lists",width:750,height:510,padding:5,autosize:"fit",data:[{name:"companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"}},{name:"published_supplier_lists",url:"https://wikirate.org/Commons+Supplier_List_all+Answers.json?filter[not_ids]=&filter[company_name]=&filter[value][]=Yes&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0",transform:[{type:"lookup",from:"companies",key:"id",fields:["company"],values:["name","headquarters"],as:["company_name","headquarters"],default:0},{type:"aggregate",groupby:["company_name","headquarters"]}]}],marks:[{type:"rect",from:{data:"published_supplier_lists"},encode:{update:{y:{scale:"y",value:0},y2:{scale:"y",field:"count"},x:{scale:"x",field:"company_name"},width:{scale:"x",band:1},tooltip:{signal:"{'Company':datum.company_name, 'Headquarters':datum.headquarters , 'No. of Supplier Lists':datum.count}"},fill:{scale:"color",field:"count"},cornerRadiusTopRight:{value:5},cornerRadiusTopLeft:{value:5}},hover:{fill:{value:"#912E06"}}}}],scales:[{name:"y",type:"linear",domain:{data:"published_supplier_lists",field:"count"},range:"height",nice:!0},{name:"x",type:"band",domain:{data:"published_supplier_lists",field:"company_name",sort:{op:"max",field:"count",order:"descending"}},range:"width",padding:.1},{name:"color",type:"linear",nice:!0,domain:{data:"published_supplier_lists",field:"count"},range:["#fef1eb","#F7733D"]}],axes:[{scale:"y",orient:"left",format:",d",tickCount:5,labelFontSize:14,tickColor:"#F7F7F8",labelColor:"#F7F7F8",domainColor:"#F7F7F8"},{scale:"x",orient:"bottom",labelAngle:55,labelAlign:"left",labelLimit:100,labelFontSize:14,tickColor:"#F7F7F8",labelColor:"#F7F7F8",domainColor:"#F7F7F8"}]},{renderer:"svg",actions:{source:!1,editor:!1}})}updateSection(){this.http.get("https://wikirate.org/Commons+Supplied_By+Answer.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0&filter[year]="+this.selectedYear).subscribe(r=>{this.number_of_reporting_companies=0;for(var o=0;o<r.length;o++)"Unknown"!==r[o].value&&this.number_of_reporting_companies++}),this.http.get("https://wikirate.org/Commons+Supplier_of+Answer.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Supplier%20of%20Apparel%20100&filter[year]="+this.selectedYear+"&view=answer_list&limit=0").subscribe(r=>{this.unique_suppliers=r.length})}}return e.\u0275fac=function(n){return new(n||e)(ee($w),ee(hc))},e.\u0275cmp=di({type:e,selectors:[["app-number-of-suppliers-per-company"]],decls:43,vars:12,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title","text-white"],[1,"showcase-subtitle-white"],[1,"col-md-4","mt-2","mb-2"],[1,"year-filter","col-md-5","ml-md-auto"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],["value","2018",3,"ngValue"],[1,"row","mt-2"],[1,"col-md"],[1,"wikirate-box","chart-container"],["id","bar-chart",1,"m-2"],[1,"showcase-main-text-white","col-md-9"],[4,"ngIf"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank","href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplied%20By&filter%5Byear%5D=latest"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"div",3),x(4,"h2",4),le(5," Published supplier lists "),T(),x(6,"h3",5),le(7,"Number of published supplier lists per company."),T(),T(),x(8,"div",6),x(9,"div",7),x(10,"select",8),gn("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateSection()}),x(11,"option",9),le(12,"latest"),T(),x(13,"option",10),le(14,"2020"),T(),x(15,"option",11),le(16,"2019"),T(),x(17,"option",12),le(18,"2018"),T(),T(),T(),T(),T(),x(19,"div",13),x(20,"div",14),x(21,"div",15),Ve(22,"div",16),T(),T(),T(),x(23,"div",13),x(24,"div",17),Ht(25,pKe,3,1,"span",18),Ht(26,gKe,2,0,"b",18),le(27," WikiRate's researchers retrieved the supplier lists of "),x(28,"b"),le(29),T(),le(30," out of the top 100 companies. In total, these "),x(31,"b"),le(32),T(),le(33," were supplied by "),x(34,"b"),le(35),h0(36,"numFormat"),T(),le(37,". "),T(),x(38,"div",19),x(39,"div",20),x(40,"a",21),le(41,"Dive Deeper"),Ve(42,"i",22),T(),T(),T(),T(),T(),T()),2&n&&(Ne(10),Je("ngModel",i.selectedYear),Ne(1),Je("ngValue","latest"),Ne(2),Je("ngValue",2020),Ne(2),Je("ngValue",2019),Ne(2),Je("ngValue",2018),Ne(8),Je("ngIf","latest"!==i.selectedYear),Ne(1),Je("ngIf","latest"===i.selectedYear),Ne(3),Ba("",i.number_of_reporting_companies," companies"),Ne(3),Ba("",i.number_of_reporting_companies," companies"),Ne(3),Ba("",function B9(e,t,n){const i=e+20,r=fe(),o=Ff(r,i);return vv(r,i)?R9(r,As(),t,o.transform,n,o):o.transform(n)}(36,10,i.unique_suppliers)," different suppliers"))},directives:[Jf,S0,zp,T0,A0,Fd],pipes:[hKe],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#f7f7f8;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})();const _Ke=["map"];function yKe(e,t){if(1&e&&(x(0,"b"),le(1),T()),2&e){const n=Jn();Ne(1),Md("in "+n.selectedYear)}}function vKe(e,t){1&e&&(x(0,"span"),le(1),T()),2&e&&(Ne(1),Md(" based on the most recent available data"))}function bKe(e,t){if(1&e&&(x(0,"option",16),le(1),T()),2&e){const n=t.$implicit;Je("ngValue",n.id),Ne(1),Md(n.name)}}function wKe(e,t){1&e&&(x(0,"div",21),Ve(1,"img",22),x(2,"p",23),le(3,"You explored unresearched areas, no data available."),T(),T())}const EKe=function(e){return{"font-weight":e}};let CKe=(()=>{class e{constructor(n,i,r){this.http=n,this.apparelService=i,this.renderer=r,this.title="The top 100 apparel companies'",this.apparelTop100=[],this.suppliers=[],this.selectedYear="latest",this.selectedCompany=0,this.apparelTop100=i.getCompanies()}ngOnInit(){this.company=this.apparelService.getCompany(this.selectedCompany),this.title=0!=this.company.id?this.company.name:"The top 100 apparel companies'",this.updateChart()}ngAfterViewInit(){}updateChart(){let n="https://wikirate.org/Commons+Supplied_By+RelationshipAnswer/answer_list.json?filter[company_group]=Apparel%20100%20Companies&filter[year]="+this.selectedYear;0!=this.company.id&&(n="https://wikirate.org/Commons+Supplied_By+RelationshipAnswer/answer_list.json?filter[company_id]="+this.company.id+"&filter[year]="+this.selectedYear),this.suppliers=[],null!=this.suppliers_map&&this.renderer.removeChild(this.mapElement.nativeElement,this.suppliers_map),this.http.get(n).subscribe(i=>{this.suppliers=i,this.suppliers.length>0&&(this.suppliers_map=this.renderer.createElement("div"),this.suppliers_map.id="supplier-map",this.renderer.appendChild(this.mapElement.nativeElement,this.suppliers_map),vy("div#supplier-map",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Number of Apparel Top 100 Suppliers per Country",width:800,height:520,signals:[{name:"type",value:"equalEarth"},{name:"scale",value:200},{name:"rotate0",value:-15},{name:"rotate1",value:0},{name:"rotate2",value:0},{name:"center0",value:0},{name:"center1",value:0},{name:"translate0",update:"width / 2"},{name:"translate1",update:"height / 2"},{name:"borderWidth",value:2},{name:"hover",value:null,on:[{events:"@circles:mouseover",update:"datum"},{events:"@circles:mouseout",update:"null"}]},{name:"title",value:"Number of Apparel Top 100 Suppliers per Country",update:"hover ? hover.country + ' (' + hover.companies + ')' : 'Number of Apparel Top 100 Suppliers per Country'"},{name:"cell_stroke",value:null,on:[{events:"dblclick",update:"cell_stroke ? null : 'brown'"},{events:"mousedown!",update:"cell_stroke"}]}],data:[{name:"world",url:"assets/world-110m.json",format:{type:"topojson",feature:"countries"},transform:[{type:"geopath",projection:"projection"}]},{name:"suppliers_country",url:"../../assets/content/Core+Country+Answer.json",format:{type:"json",parse:"auto"}},{name:"suppliers",values:this.suppliers,transform:[{type:"lookup",from:"suppliers_country",key:"company",fields:["object_company"],values:["value"],as:["country"]}]},{name:"wikirate_countries",values:[{code:"AD",name:"Andorra",card_id:2917786},{code:"AE",name:"United Arab Emirates",card_id:169529},{code:"AF",name:"Afghanistan",card_id:2917789},{code:"AG",name:"Antigua and Barbuda",card_id:2917790},{code:"AI",name:"Anguilla",card_id:2917791},{code:"AL",name:"Albania",card_id:2917792},{code:"AM",name:"Armenia",card_id:2917793},{code:"AO",name:"Angola",card_id:2917794},{code:"AQ",name:"Antarctica",card_id:2917795},{code:"AR",name:"Argentina",card_id:14400},{code:"AS",name:"American Samoa",card_id:2917796},{code:"AT",name:"Austria",card_id:17233},{code:"AU",name:"Australia",card_id:14405},{code:"AW",name:"Aruba",card_id:2917797},{code:"AX",name:"\xc5land Islands",card_id:2917798},{code:"AZ",name:"Azerbaijan",card_id:2917799},{code:"BA",name:"Bosnia and Herzegovina",card_id:2917800},{code:"BB",name:"Barbados",card_id:2917801},{code:"BD",name:"Bangladesh",card_id:14386},{code:"BE",name:"Belgium",card_id:19867},{code:"BF",name:"Burkina Faso",card_id:14408},{code:"BG",name:"Bulgaria",card_id:13973},{code:"BH",name:"Bahrain",card_id:2917802},{code:"BI",name:"Burundi",card_id:2917803},{code:"BJ",name:"Benin",card_id:2917804},{code:"BL",name:"Saint Barth\xe9lemy",card_id:2917805},{code:"BM",name:"Bermuda",card_id:2917806},{code:"BN",name:"Brunei Darussalam",card_id:2917807},{code:"BO",name:"Bolivia",card_id:2917808},{code:"BQ",name:"Bonaire, Sint Eustatius and Saba",card_id:2917809},{code:"BR",name:"Brazil",card_id:12379},{code:"BS",name:"Bahamas",card_id:2917810},{code:"BT",name:"Bhutan",card_id:2917811},{code:"BV",name:"Bouvet Island",card_id:2917812},{code:"BW",name:"Botswana",card_id:2917813},{code:"BY",name:"Belarus",card_id:2917814},{code:"BZ",name:"Belize",card_id:2917815},{code:"CA",name:"Canada",card_id:14965},{code:"CC",name:"Cocos (Keeling) Islands",card_id:2917828},{code:"CD",name:"Democratic Republic of the Congo",card_id:2917829},{code:"CF",name:"Central African Republic",card_id:2917830},{code:"CG",name:"Congo",card_id:38190},{code:"CH",name:"Switzerland",card_id:15220},{code:"CI",name:"C\xf4te d'Ivoire",card_id:2917831},{code:"CK",name:"Cook Islands",card_id:2917832},{code:"CL",name:"Chile",card_id:14404},{code:"CM",name:"Cameroon",card_id:2917833},{code:"CN",name:"China",card_id:12378},{code:"CO",name:"Colombia",card_id:12320},{code:"CR",name:"Costa Rica",card_id:2917834},{code:"CU",name:"Cuba",card_id:19542},{code:"CV",name:"Cape Verde",card_id:2917835},{code:"CW",name:"Cura\xe7ao",card_id:2917836},{code:"CX",name:"Christmas Island",card_id:2917837},{code:"CY",name:"Cyprus",card_id:2917838},{code:"CZ",name:"Czech Republic",card_id:45425},{code:"DE",name:"Germany",card_id:15272},{code:"DJ",name:"Djibouti",card_id:2917839},{code:"DK",name:"Denmark",card_id:21425},{code:"DM",name:"Dominica",card_id:2917840},{code:"DO",name:"Dominican Republic",card_id:18543},{code:"DZ",name:"Algeria",card_id:2917841},{code:"EC",name:"Ecuador",card_id:2917842},{code:"EE",name:"Estonia",card_id:2917843},{code:"EG",name:"Egypt",card_id:2917844},{code:"EH",name:"Western Sahara",card_id:2917845},{code:"ER",name:"Eritrea",card_id:2917846},{code:"ES",name:"Spain",card_id:12333},{code:"ET",name:"Ethiopia",card_id:14424},{code:"FI",name:"Finland",card_id:2917847},{code:"FJ",name:"Fiji",card_id:2917848},{code:"FK",name:"Falkland Islands (Malvinas)",card_id:2917849},{code:"FM",name:"Micronesia, Federated States of",card_id:2917850},{code:"FO",name:"Faroe Islands",card_id:2917851},{code:"FR",name:"France",card_id:19365},{code:"GA",name:"Gabon",card_id:2917852},{code:"GB",name:"United Kingdom",card_id:14908},{code:"GD",name:"Grenada",card_id:2917853},{code:"GE",name:"Georgia",card_id:2917854},{code:"GF",name:"French Guiana",card_id:2917855},{code:"GG",name:"Guernsey",card_id:2917856},{code:"GH",name:"Ghana",card_id:18541},{code:"GI",name:"Gibraltar",card_id:2917857},{code:"GL",name:"Greenland",card_id:2917858},{code:"GM",name:"Gambia",card_id:2917859},{code:"GN",name:"Guinea",card_id:2917860},{code:"GP",name:"Guadeloupe",card_id:2917861},{code:"GQ",name:"Equatorial Guinea",card_id:2917862},{code:"GR",name:"Greece",card_id:34142},{code:"GS",name:"South Georgia and the South Sandwich Islands",card_id:2917863},{code:"GT",name:"Guatemala",card_id:2917864},{code:"GU",name:"Guam",card_id:2917865},{code:"GW",name:"Guinea-Bissau",card_id:2917866},{code:"GY",name:"Guyana",card_id:2917867},{code:"HK",name:"Hong Kong",card_id:2917868},{code:"HM",name:"Heard Island and McDonald Islands",card_id:2917869},{code:"HN",name:"Honduras",card_id:18094},{code:"HR",name:"Croatia",card_id:2917870},{code:"HT",name:"Haiti",card_id:2917871},{code:"HU",name:"Hungary",card_id:45424},{code:"ID",name:"Indonesia",card_id:14371},{code:"IE",name:"Ireland",card_id:14394},{code:"IL",name:"Israel",card_id:14701},{code:"IM",name:"Isle of Man",card_id:2917872},{code:"IN",name:"India",card_id:14389},{code:"IO",name:"British Indian Ocean Territory",card_id:2917873},{code:"IQ",name:"Iraq",card_id:3913},{code:"IR",name:"Iran",card_id:2917874},{code:"IS",name:"Iceland",card_id:2917875},{code:"IT",name:"Italy",card_id:16175},{code:"JE",name:"Jersey",card_id:2917876},{code:"JM",name:"Jamaica",card_id:2917877},{code:"JO",name:"Jordan",card_id:1812107},{code:"JP",name:"Japan",card_id:14387},{code:"KE",name:"Kenya",card_id:21392},{code:"KG",name:"Kyrgyzstan",card_id:2917878},{code:"KH",name:"Cambodia",card_id:13908},{code:"KI",name:"Kiribati",card_id:2917879},{code:"KM",name:"Comoros",card_id:2917880},{code:"KN",name:"Saint Kitts and Nevis",card_id:2917881},{code:"KP",name:"Korea, Democratic People's Republic of",card_id:2917882},{code:"KR",name:"Korea, Republic of",card_id:2917883},{code:"KW",name:"Kuwait",card_id:2917884},{code:"KY",name:"Cayman Islands",card_id:2917885},{code:"KZ",name:"Kazakhstan",card_id:2917886},{code:"LA",name:"Laos",card_id:2917887},{code:"LB",name:"Lebanon",card_id:2917888},{code:"LC",name:"Saint Lucia",card_id:2917889},{code:"LI",name:"Liechtenstein",card_id:2917890},{code:"LK",name:"Sri Lanka",card_id:2917891},{code:"LR",name:"Liberia",card_id:2917892},{code:"LS",name:"Lesotho",card_id:2917893},{code:"LT",name:"Lithuania",card_id:2917894},{code:"LU",name:"Luxembourg",card_id:20766},{code:"LV",name:"Latvia",card_id:2917895},{code:"LY",name:"Libya",card_id:2917896},{code:"MA",name:"Morocco",card_id:14426},{code:"MC",name:"Monaco",card_id:2917897},{code:"MD",name:"Moldova",card_id:2917898},{code:"ME",name:"Montenegro",card_id:2917899},{code:"MF",name:"Saint Martin (French part)",card_id:2917900},{code:"MG",name:"Madagascar",card_id:40709},{code:"MH",name:"Marshall Islands",card_id:2917901},{code:"MK",name:"North Macedonia",card_id:2917902},{code:"ML",name:"Mali",card_id:20033},{code:"MM",name:"Myanmar",card_id:2917903},{code:"MN",name:"Mongolia",card_id:2917904},{code:"MO",name:"Macao",card_id:2917905},{code:"MP",name:"Northern Mariana Islands",card_id:2917906},{code:"MQ",name:"Martinique",card_id:2917907},{code:"MR",name:"Mauritania",card_id:2917908},{code:"MS",name:"Montserrat",card_id:2917909},{code:"MT",name:"Malta",card_id:2917910},{code:"MU",name:"Mauritius",card_id:2917911},{code:"MV",name:"Maldives",card_id:2917912},{code:"MW",name:"Malawi",card_id:14410},{code:"MX",name:"Mexico",card_id:14403},{code:"MY",name:"Malaysia",card_id:16948},{code:"MZ",name:"Mozambique",card_id:2917913},{code:"NA",name:"Namibia",card_id:2917914},{code:"NC",name:"New Caledonia",card_id:2917915},{code:"NE",name:"Niger",card_id:2917916},{code:"NF",name:"Norfolk Island",card_id:2917917},{code:"NG",name:"Nigeria",card_id:14384},{code:"NI",name:"Nicaragua",card_id:2917918},{code:"NL",name:"Netherlands",card_id:2917919},{code:"NO",name:"Norway",card_id:2917920},{code:"NP",name:"Nepal",card_id:45091},{code:"NR",name:"Nauru",card_id:2917921},{code:"NU",name:"Niue",card_id:2917922},{code:"NZ",name:"New Zealand",card_id:2917923},{code:"OM",name:"Oman",card_id:2917924},{code:"PA",name:"Panama",card_id:2917925},{code:"PE",name:"Peru",card_id:16184},{code:"PF",name:"French Polynesia",card_id:2917926},{code:"PG",name:"Papua New Guinea",card_id:16949},{code:"PH",name:"Philippines",card_id:37238},{code:"PK",name:"Pakistan",card_id:36162},{code:"PL",name:"Poland",card_id:37189},{code:"PM",name:"Saint Pierre and Miquelon",card_id:2917927},{code:"PN",name:"Pitcairn",card_id:2917928},{code:"PR",name:"Puerto Rico",card_id:2917929},{code:"PS",name:"Palestinian Territory",card_id:2917930},{code:"PT",name:"Portugal",card_id:2917931},{code:"PW",name:"Palau",card_id:2917932},{code:"PY",name:"Paraguay",card_id:2917933},{code:"QA",name:"Qatar",card_id:168817},{code:"RE",name:"R\xe9union",card_id:2917934},{code:"RO",name:"Romania",card_id:13974},{code:"RS",name:"Serbia",card_id:2917935},{code:"RU",name:"Russia",card_id:35176},{code:"RW",name:"Rwanda",card_id:2917936},{code:"SA",name:"Saudi Arabia",card_id:43202},{code:"SB",name:"Solomon Islands",card_id:2917937},{code:"SC",name:"Seychelles",card_id:2917938},{code:"SD",name:"Sudan",card_id:14149},{code:"SE",name:"Sweden",card_id:43201},{code:"SG",name:"Singapore",card_id:2917939},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha",card_id:2917940},{code:"SI",name:"Slovenia",card_id:20157},{code:"SJ",name:"Svalbard and Jan Mayen",card_id:2917941},{code:"SK",name:"Slovakia",card_id:2917942},{code:"SL",name:"Sierra Leone",card_id:2917943},{code:"SM",name:"San Marino",card_id:2917944},{code:"SN",name:"Senegal",card_id:15492},{code:"SO",name:"Somalia",card_id:2917945},{code:"SR",name:"Suriname",card_id:2917946},{code:"SS",name:"South Sudan",card_id:2917947},{code:"ST",name:"Sao Tome and Principe",card_id:2917948},{code:"SV",name:"El Salvador",card_id:33639},{code:"SX",name:"Sint Maarten (Dutch part)",card_id:2917949},{code:"SY",name:"Syrian Arab Republic",card_id:2917950},{code:"SZ",name:"Swaziland",card_id:2917951},{code:"TC",name:"Turks and Caicos Islands",card_id:2917952},{code:"TD",name:"Chad",card_id:2917953},{code:"TF",name:"French Southern Territories",card_id:2917954},{code:"TG",name:"Togo",card_id:2917955},{code:"TH",name:"Thailand",card_id:14214},{code:"TJ",name:"Tajikistan",card_id:2917956},{code:"TK",name:"Tokelau",card_id:2917957},{code:"TL",name:"Timor-Leste",card_id:2917958},{code:"TM",name:"Turkmenistan",card_id:2917959},{code:"TN",name:"Tunisia",card_id:2917960},{code:"TO",name:"Tonga",card_id:2917961},{code:"TR",name:"Turkey",card_id:13972},{code:"TT",name:"Trinidad and Tobago",card_id:2917962},{code:"TV",name:"Tuvalu",card_id:2917963},{code:"TW",name:"Taiwan, Province of China",card_id:2917964},{code:"TZ",name:"Tanzania",card_id:16808},{code:"UA",name:"Ukraine",card_id:2917965},{code:"UG",name:"Uganda",card_id:40396},{code:"UM",name:"United States Minor Outlying Islands",card_id:2917966},{code:"US",name:"United States",card_id:14551},{code:"UY",name:"Uruguay",card_id:2918018},{code:"UZ",name:"Uzbekistan",card_id:14412},{code:"VA",name:"Holy See (Vatican City State)",card_id:2918019},{code:"VC",name:"Saint Vincent and the Grenadines",card_id:2918020},{code:"VE",name:"Venezuela",card_id:2918021},{code:"VG",name:"British Virgin Islands",card_id:2918022},{code:"VI",name:"U.S. Virgin Islands",card_id:2918023},{code:"VN",name:"Vietnam",card_id:2918024},{code:"VU",name:"Vanuatu",card_id:2918025},{code:"WF",name:"Wallis and Futuna",card_id:2918026},{code:"WS",name:"Samoa",card_id:2918027},{code:"XK",name:"Kosovo",card_id:2918028},{code:"YE",name:"Yemen",card_id:2918029},{code:"YT",name:"Mayotte",card_id:2918030},{code:"ZA",name:"South Africa",card_id:14938},{code:"ZM",name:"Zambia",card_id:2918031},{code:"ZW",name:"Zimbabwe",card_id:2918032}]},{name:"country_codes",values:[{name:"Afghanistan","alpha-2":"AF","country-code":"004"},{name:"\xc5land Islands","alpha-2":"AX","country-code":"248"},{name:"Albania","alpha-2":"AL","country-code":"008"},{name:"Algeria","alpha-2":"DZ","country-code":"012"},{name:"American Samoa","alpha-2":"AS","country-code":"016"},{name:"Andorra","alpha-2":"AD","country-code":"020"},{name:"Angola","alpha-2":"AO","country-code":"024"},{name:"Anguilla","alpha-2":"AI","country-code":"660"},{name:"Antarctica","alpha-2":"AQ","country-code":"010"},{name:"Antigua and Barbuda","alpha-2":"AG","country-code":"028"},{name:"Argentina","alpha-2":"AR","country-code":"032"},{name:"Armenia","alpha-2":"AM","country-code":"051"},{name:"Aruba","alpha-2":"AW","country-code":"533"},{name:"Australia","alpha-2":"AU","country-code":"036"},{name:"Austria","alpha-2":"AT","country-code":"040"},{name:"Azerbaijan","alpha-2":"AZ","country-code":"031"},{name:"Bahamas","alpha-2":"BS","country-code":"044"},{name:"Bahrain","alpha-2":"BH","country-code":"048"},{name:"Bangladesh","alpha-2":"BD","country-code":"050"},{name:"Barbados","alpha-2":"BB","country-code":"052"},{name:"Belarus","alpha-2":"BY","country-code":"112"},{name:"Belgium","alpha-2":"BE","country-code":"056"},{name:"Belize","alpha-2":"BZ","country-code":"084"},{name:"Benin","alpha-2":"BJ","country-code":"204"},{name:"Bermuda","alpha-2":"BM","country-code":"060"},{name:"Bhutan","alpha-2":"BT","country-code":"064"},{name:"Bolivia (Plurinational State of)","alpha-2":"BO","country-code":"068"},{name:"Bonaire, Sint Eustatius and Saba","alpha-2":"BQ","country-code":"535"},{name:"Bosnia and Herzegovina","alpha-2":"BA","country-code":"070"},{name:"Botswana","alpha-2":"BW","country-code":"072"},{name:"Bouvet Island","alpha-2":"BV","country-code":"074"},{name:"Brazil","alpha-2":"BR","country-code":"076"},{name:"British Indian Ocean Territory","alpha-2":"IO","country-code":"086"},{name:"Brunei Darussalam","alpha-2":"BN","country-code":"096"},{name:"Bulgaria","alpha-2":"BG","country-code":"100"},{name:"Burkina Faso","alpha-2":"BF","country-code":"854"},{name:"Burundi","alpha-2":"BI","country-code":"108"},{name:"Cabo Verde","alpha-2":"CV","country-code":"132"},{name:"Cambodia","alpha-2":"KH","country-code":"116"},{name:"Cameroon","alpha-2":"CM","country-code":"120"},{name:"Canada","alpha-2":"CA","country-code":"124"},{name:"Cayman Islands","alpha-2":"KY","country-code":"136"},{name:"Central African Republic","alpha-2":"CF","country-code":"140"},{name:"Chad","alpha-2":"TD","country-code":"148"},{name:"Chile","alpha-2":"CL","country-code":"152"},{name:"China","alpha-2":"CN","country-code":"156"},{name:"Christmas Island","alpha-2":"CX","country-code":"162"},{name:"Cocos (Keeling) Islands","alpha-2":"CC","country-code":"166"},{name:"Colombia","alpha-2":"CO","country-code":"170"},{name:"Comoros","alpha-2":"KM","country-code":"174"},{name:"Congo","alpha-2":"CG","country-code":"178"},{name:"Congo, Democratic Republic of the","alpha-2":"CD","country-code":"180"},{name:"Cook Islands","alpha-2":"CK","country-code":"184"},{name:"Costa Rica","alpha-2":"CR","country-code":"188"},{name:"C\xf4te d'Ivoire","alpha-2":"CI","country-code":"384"},{name:"Croatia","alpha-2":"HR","country-code":"191"},{name:"Cuba","alpha-2":"CU","country-code":"192"},{name:"Cura\xe7ao","alpha-2":"CW","country-code":"531"},{name:"Cyprus","alpha-2":"CY","country-code":"196"},{name:"Czechia","alpha-2":"CZ","country-code":"203"},{name:"Denmark","alpha-2":"DK","country-code":"208"},{name:"Djibouti","alpha-2":"DJ","country-code":"262"},{name:"Dominica","alpha-2":"DM","country-code":"212"},{name:"Dominican Republic","alpha-2":"DO","country-code":"214"},{name:"Ecuador","alpha-2":"EC","country-code":"218"},{name:"Egypt","alpha-2":"EG","country-code":"818"},{name:"El Salvador","alpha-2":"SV","country-code":"222"},{name:"Equatorial Guinea","alpha-2":"GQ","country-code":"226"},{name:"Eritrea","alpha-2":"ER","country-code":"232"},{name:"Estonia","alpha-2":"EE","country-code":"233"},{name:"Eswatini","alpha-2":"SZ","country-code":"748"},{name:"Ethiopia","alpha-2":"ET","country-code":"231"},{name:"Falkland Islands (Malvinas)","alpha-2":"FK","country-code":"238"},{name:"Faroe Islands","alpha-2":"FO","country-code":"234"},{name:"Fiji","alpha-2":"FJ","country-code":"242"},{name:"Finland","alpha-2":"FI","country-code":"246"},{name:"France","alpha-2":"FR","country-code":"250"},{name:"French Guiana","alpha-2":"GF","country-code":"254"},{name:"French Polynesia","alpha-2":"PF","country-code":"258"},{name:"French Southern Territories","alpha-2":"TF","country-code":"260"},{name:"Gabon","alpha-2":"GA","country-code":"266"},{name:"Gambia","alpha-2":"GM","country-code":"270"},{name:"Georgia","alpha-2":"GE","country-code":"268"},{name:"Germany","alpha-2":"DE","country-code":"276"},{name:"Ghana","alpha-2":"GH","country-code":"288"},{name:"Gibraltar","alpha-2":"GI","country-code":"292"},{name:"Greece","alpha-2":"GR","country-code":"300"},{name:"Greenland","alpha-2":"GL","country-code":"304"},{name:"Grenada","alpha-2":"GD","country-code":"308"},{name:"Guadeloupe","alpha-2":"GP","country-code":"312"},{name:"Guam","alpha-2":"GU","country-code":"316"},{name:"Guatemala","alpha-2":"GT","country-code":"320"},{name:"Guernsey","alpha-2":"GG","country-code":"831"},{name:"Guinea","alpha-2":"GN","country-code":"324"},{name:"Guinea-Bissau","alpha-2":"GW","country-code":"624"},{name:"Guyana","alpha-2":"GY","country-code":"328"},{name:"Haiti","alpha-2":"HT","country-code":"332"},{name:"Heard Island and McDonald Islands","alpha-2":"HM","country-code":"334"},{name:"Holy See","alpha-2":"VA","country-code":"336"},{name:"Honduras","alpha-2":"HN","country-code":"340"},{name:"Hong Kong","alpha-2":"HK","country-code":"344"},{name:"Hungary","alpha-2":"HU","country-code":"348"},{name:"Iceland","alpha-2":"IS","country-code":"352"},{name:"India","alpha-2":"IN","country-code":"356"},{name:"Indonesia","alpha-2":"ID","country-code":"360"},{name:"Iran (Islamic Republic of)","alpha-2":"IR","country-code":"364"},{name:"Iraq","alpha-2":"IQ","country-code":"368"},{name:"Ireland","alpha-2":"IE","country-code":"372"},{name:"Isle of Man","alpha-2":"IM","country-code":"833"},{name:"Israel","alpha-2":"IL","country-code":"376"},{name:"Italy","alpha-2":"IT","country-code":"380"},{name:"Jamaica","alpha-2":"JM","country-code":"388"},{name:"Japan","alpha-2":"JP","country-code":"392"},{name:"Jersey","alpha-2":"JE","country-code":"832"},{name:"Jordan","alpha-2":"JO","country-code":"400"},{name:"Kazakhstan","alpha-2":"KZ","country-code":"398"},{name:"Kenya","alpha-2":"KE","country-code":"404"},{name:"Kiribati","alpha-2":"KI","country-code":"296"},{name:"Korea (Democratic People's Republic of)","alpha-2":"KP","country-code":"408"},{name:"Korea, Republic of","alpha-2":"KR","country-code":"410"},{name:"Kuwait","alpha-2":"KW","country-code":"414"},{name:"Kyrgyzstan","alpha-2":"KG","country-code":"417"},{name:"Lao People's Democratic Republic","alpha-2":"LA","country-code":"418"},{name:"Latvia","alpha-2":"LV","country-code":"428"},{name:"Lebanon","alpha-2":"LB","country-code":"422"},{name:"Lesotho","alpha-2":"LS","country-code":"426"},{name:"Liberia","alpha-2":"LR","country-code":"430"},{name:"Libya","alpha-2":"LY","country-code":"434"},{name:"Liechtenstein","alpha-2":"LI","country-code":"438"},{name:"Lithuania","alpha-2":"LT","country-code":"440"},{name:"Luxembourg","alpha-2":"LU","country-code":"442"},{name:"Macao","alpha-2":"MO","country-code":"446"},{name:"Madagascar","alpha-2":"MG","country-code":"450"},{name:"Malawi","alpha-2":"MW","country-code":"454"},{name:"Malaysia","alpha-2":"MY","country-code":"458"},{name:"Maldives","alpha-2":"MV","country-code":"462"},{name:"Mali","alpha-2":"ML","country-code":"466"},{name:"Malta","alpha-2":"MT","country-code":"470"},{name:"Marshall Islands","alpha-2":"MH","country-code":"584"},{name:"Martinique","alpha-2":"MQ","country-code":"474"},{name:"Mauritania","alpha-2":"MR","country-code":"478"},{name:"Mauritius","alpha-2":"MU","country-code":"480"},{name:"Mayotte","alpha-2":"YT","country-code":"175"},{name:"Mexico","alpha-2":"MX","country-code":"484"},{name:"Micronesia (Federated States of)","alpha-2":"FM","country-code":"583"},{name:"Moldova, Republic of","alpha-2":"MD","country-code":"498"},{name:"Monaco","alpha-2":"MC","country-code":"492"},{name:"Mongolia","alpha-2":"MN","country-code":"496"},{name:"Montenegro","alpha-2":"ME","country-code":"499"},{name:"Montserrat","alpha-2":"MS","country-code":"500"},{name:"Morocco","alpha-2":"MA","country-code":"504"},{name:"Mozambique","alpha-2":"MZ","country-code":"508"},{name:"Myanmar","alpha-2":"MM","country-code":"104"},{name:"Namibia","alpha-2":"NA","country-code":"516"},{name:"Nauru","alpha-2":"NR","country-code":"520"},{name:"Nepal","alpha-2":"NP","country-code":"524"},{name:"Netherlands","alpha-2":"NL","country-code":"528"},{name:"New Caledonia","alpha-2":"NC","country-code":"540"},{name:"New Zealand","alpha-2":"NZ","country-code":"554"},{name:"Nicaragua","alpha-2":"NI","country-code":"558"},{name:"Niger","alpha-2":"NE","country-code":"562"},{name:"Nigeria","alpha-2":"NG","country-code":"566"},{name:"Niue","alpha-2":"NU","country-code":"570"},{name:"Norfolk Island","alpha-2":"NF","country-code":"574"},{name:"North Macedonia","alpha-2":"MK","country-code":"807"},{name:"Northern Mariana Islands","alpha-2":"MP","country-code":"580"},{name:"Norway","alpha-2":"NO","country-code":"578"},{name:"Oman","alpha-2":"OM","country-code":"512"},{name:"Pakistan","alpha-2":"PK","country-code":"586"},{name:"Palau","alpha-2":"PW","country-code":"585"},{name:"Palestine, State of","alpha-2":"PS","country-code":"275"},{name:"Panama","alpha-2":"PA","country-code":"591"},{name:"Papua New Guinea","alpha-2":"PG","country-code":"598"},{name:"Paraguay","alpha-2":"PY","country-code":"600"},{name:"Peru","alpha-2":"PE","country-code":"604"},{name:"Philippines","alpha-2":"PH","country-code":"608"},{name:"Pitcairn","alpha-2":"PN","country-code":"612"},{name:"Poland","alpha-2":"PL","country-code":"616"},{name:"Portugal","alpha-2":"PT","country-code":"620"},{name:"Puerto Rico","alpha-2":"PR","country-code":"630"},{name:"Qatar","alpha-2":"QA","country-code":"634"},{name:"R\xe9union","alpha-2":"RE","country-code":"638"},{name:"Romania","alpha-2":"RO","country-code":"642"},{name:"Russian Federation","alpha-2":"RU","country-code":"643"},{name:"Rwanda","alpha-2":"RW","country-code":"646"},{name:"Saint Barth\xe9lemy","alpha-2":"BL","country-code":"652"},{name:"Saint Helena, Ascension and Tristan da Cunha","alpha-2":"SH","country-code":"654"},{name:"Saint Kitts and Nevis","alpha-2":"KN","country-code":"659"},{name:"Saint Lucia","alpha-2":"LC","country-code":"662"},{name:"Saint Martin (French part)","alpha-2":"MF","country-code":"663"},{name:"Saint Pierre and Miquelon","alpha-2":"PM","country-code":"666"},{name:"Saint Vincent and the Grenadines","alpha-2":"VC","country-code":"670"},{name:"Samoa","alpha-2":"WS","country-code":"882"},{name:"San Marino","alpha-2":"SM","country-code":"674"},{name:"Sao Tome and Principe","alpha-2":"ST","country-code":"678"},{name:"Saudi Arabia","alpha-2":"SA","country-code":"682"},{name:"Senegal","alpha-2":"SN","country-code":"686"},{name:"Serbia","alpha-2":"RS","country-code":"688"},{name:"Seychelles","alpha-2":"SC","country-code":"690"},{name:"Sierra Leone","alpha-2":"SL","country-code":"694"},{name:"Singapore","alpha-2":"SG","country-code":"702"},{name:"Sint Maarten (Dutch part)","alpha-2":"SX","country-code":"534"},{name:"Slovakia","alpha-2":"SK","country-code":"703"},{name:"Slovenia","alpha-2":"SI","country-code":"705"},{name:"Solomon Islands","alpha-2":"SB","country-code":"090"},{name:"Somalia","alpha-2":"SO","country-code":"706"},{name:"South Africa","alpha-2":"ZA","country-code":"710"},{name:"South Georgia and the South Sandwich Islands","alpha-2":"GS","country-code":"239"},{name:"South Sudan","alpha-2":"SS","country-code":"728"},{name:"Spain","alpha-2":"ES","country-code":"724"},{name:"Sri Lanka","alpha-2":"LK","country-code":"144"},{name:"Sudan","alpha-2":"SD","country-code":"729"},{name:"Suriname","alpha-2":"SR","country-code":"740"},{name:"Svalbard and Jan Mayen","alpha-2":"SJ","country-code":"744"},{name:"Sweden","alpha-2":"SE","country-code":"752"},{name:"Switzerland","alpha-2":"CH","country-code":"756"},{name:"Syrian Arab Republic","alpha-2":"SY","country-code":"760"},{name:"Taiwan, Province of China","alpha-2":"TW","country-code":"158"},{name:"Tajikistan","alpha-2":"TJ","country-code":"762"},{name:"Tanzania, United Republic of","alpha-2":"TZ","country-code":"834"},{name:"Thailand","alpha-2":"TH","country-code":"764"},{name:"Timor-Leste","alpha-2":"TL","country-code":"626"},{name:"Togo","alpha-2":"TG","country-code":"768"},{name:"Tokelau","alpha-2":"TK","country-code":"772"},{name:"Tonga","alpha-2":"TO","country-code":"776"},{name:"Trinidad and Tobago","alpha-2":"TT","country-code":"780"},{name:"Tunisia","alpha-2":"TN","country-code":"788"},{name:"Turkey","alpha-2":"TR","country-code":"792"},{name:"Turkmenistan","alpha-2":"TM","country-code":"795"},{name:"Turks and Caicos Islands","alpha-2":"TC","country-code":"796"},{name:"Tuvalu","alpha-2":"TV","country-code":"798"},{name:"Uganda","alpha-2":"UG","country-code":"800"},{name:"Ukraine","alpha-2":"UA","country-code":"804"},{name:"United Arab Emirates","alpha-2":"AE","country-code":"784"},{name:"United Kingdom of Great Britain and Northern Ireland","alpha-2":"GB","country-code":"826"},{name:"United States of America","alpha-2":"US","country-code":"840"},{name:"United States Minor Outlying Islands","alpha-2":"UM","country-code":"581"},{name:"Uruguay","alpha-2":"UY","country-code":"858"},{name:"Uzbekistan","alpha-2":"UZ","country-code":"860"},{name:"Vanuatu","alpha-2":"VU","country-code":"548"},{name:"Venezuela (Bolivarian Republic of)","alpha-2":"VE","country-code":"862"},{name:"Viet Nam","alpha-2":"VN","country-code":"704"},{name:"Virgin Islands (British)","alpha-2":"VG","country-code":"092"},{name:"Virgin Islands (U.S.)","alpha-2":"VI","country-code":"850"},{name:"Wallis and Futuna","alpha-2":"WF","country-code":"876"},{name:"Western Sahara","alpha-2":"EH","country-code":"732"},{name:"Yemen","alpha-2":"YE","country-code":"887"},{name:"Zambia","alpha-2":"ZM","country-code":"894"},{name:"Zimbabwe","alpha-2":"ZW","country-code":"716"}],format:{type:"json",parse:{"country-code":"number"}}},{name:"suppliers_per_country",source:"suppliers",transform:[{type:"aggregate",groupby:["country"],fields:["name"],ops:["count"],as:["companies"]},{type:"lookup",from:"wikirate_countries",key:"name",fields:["country"],values:["code"],as:["country_code"]},{type:"lookup",from:"country_codes",key:"alpha-2",fields:["country_code"],values:["country-code"],as:["country_number"]},{type:"lookup",from:"world",key:"id",fields:["country_number"],as:["geo"]},{type:"filter",expr:"datum.geo"},{type:"formula",as:"centroid",expr:"geoCentroid('projection', datum.geo)"}]},{name:"graticule",transform:[{type:"graticule"}]}],projections:[{name:"projection",type:{signal:"type"},scale:{signal:"scale"},rotate:[{signal:"rotate0"},{signal:"rotate1"},{signal:"rotate2"}],center:[{signal:"center0"},{signal:"center1"}],translate:[{signal:"translate0"},{signal:"translate1"}]}],scales:[{name:"size",domain:{data:"suppliers_per_country",field:"companies"},zero:!1,range:[50,2e3]},{name:"color",type:"linear",nice:!0,domain:{data:"suppliers_per_country",field:"companies"},range:["#fef1eb","#F7733D"]}],marks:[{type:"shape",from:{data:"graticule"},encode:{update:{strokeWidth:{value:1},stroke:{signal:"'#ddd'"},fill:{value:null}}},transform:[{type:"geoshape",projection:"projection"}]},{type:"shape",from:{data:"world"},encode:{update:{strokeWidth:{signal:"+borderWidth"},fill:{value:"#171832"},zindex:{value:0}}},transform:[{type:"geoshape",projection:"projection"}]},{name:"circles",type:"symbol",from:{data:"suppliers_per_country"},encode:{enter:{x:{field:"centroid[0]"},y:{field:"centroid[1]"},size:{scale:"size",field:"companies"},strokeWidth:{value:.7},tooltip:{signal:"{'title': datum.country, 'Number of Companies': datum.companies}"}},update:{fill:{scale:"color",field:"companies"},stroke:{value:"#171832"}},hover:{fill:{value:"#912E06"},stroke:{value:"#171832"}}},transform:[{type:"force",static:!0,forces:[{force:"collide",radius:{expr:"1 + sqrt(datum.size) / 2"}},{force:"x",x:"datum.centroid[0]"},{force:"y",y:"datum.centroid[1]"}]}]}],legends:[{fill:"color",orient:"bottom-left",title:"No. of Suppliers"}]},{renderer:"svg",actions:{source:!1,editor:!1}}))},i=>{})}onSelectYear(){this.updateChart()}onSelectCompany(){this.company=this.apparelService.getCompany(this.selectedCompany),this.title=0!=this.company.id?this.company.name:"The top 100 apparel companies'",this.updateChart()}}return e.\u0275fac=function(n){return new(n||e)(ee($w),ee(D0),ee($a))},e.\u0275cmp=di({type:e,selectors:[["app-suppliers-map"]],viewQuery:function(n,i){if(1&n&&Pp(_Ke,5),2&n){let r;Si(r=xi())&&(i.mapElement=r.first)}},decls:31,vars:14,consts:[[1,"wikirate-creme-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[3,"ngStyle"],[4,"ngIf"],[1,"filters","col-md-4"],[1,"row","col","justify-content-md-end"],[1,"company-filter","mt-1","mr-1"],["id","inputCompany",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"year-filter","mt-1"],["id","inputYear",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"row","mb-2","no-gutters","mt-2","col-12"],["map",""],[1,"col-md"],["id","no_data","class","mt-4 text-center",4,"ngIf"],["id","no_data",1,"mt-4","text-center"],["src","assets/moon.svg","width","60px",1,"mb-1"],[1,"mt-2","showcase-main-text"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"div",3),x(4,"h2",4),le(5," Suppliers per country "),T(),x(6,"h3",5),x(7,"span",6),le(8),T(),le(9," suppliers' locations "),Ht(10,yKe,2,1,"b",7),Ht(11,vKe,2,1,"span",7),T(),T(),x(12,"div",8),x(13,"div",9),x(14,"div",10),x(15,"select",11),gn("ngModelChange",function(o){return i.selectedCompany=o})("change",function(){return i.onSelectCompany()}),Ht(16,bKe,2,2,"option",12),T(),T(),x(17,"div",13),x(18,"select",14),gn("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateChart()}),x(19,"option",15),le(20,"latest"),T(),x(21,"option",16),le(22,"2020"),T(),x(23,"option",16),le(24,"2019"),T(),x(25,"option",16),le(26,"2018"),T(),T(),T(),T(),T(),x(27,"div",17,18),x(29,"div",19),Ht(30,wKe,4,0,"div",20),T(),T(),T(),T(),T()),2&n&&(Ne(7),Je("ngStyle",f0(12,EKe,0!=i.selectedCompany?"600":"400")),Ne(1),Md(i.title),Ne(2),Je("ngIf","latest"!==i.selectedYear),Ne(1),Je("ngIf","latest"===i.selectedYear),Ne(4),Je("ngModel",i.selectedCompany),Ne(1),Je("ngForOf",i.apparelTop100),Ne(2),Je("ngModel",i.selectedYear),Ne(1),Je("ngValue","latest"),Ne(2),Je("ngValue",2020),Ne(2),Je("ngValue",2019),Ne(2),Je("ngValue",2018),Ne(5),Je("ngIf",i.suppliers&&0==i.suppliers.length))},directives:[eV,Fd,Jf,S0,zp,zf,T0,A0],styles:[""]}),e})(),DKe=(()=>{class e{constructor(n){this.router=n}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(ee(Jo))},e.\u0275cmp=di({type:e,selectors:[["more-data"]],decls:12,vars:0,consts:[[1,"wikirate-box"],[1,"wikirate-container","align-content-center"],[1,"row","justify-content-center"],[1,"showcase-title","call-to-action-title","text-center","mb-2","col-8"],[1,"mini-text","col-8"],[1,"row","justify-content-center","mt-4"],[1,"explore","mt-1"],["target","_blank","href","https://docs.google.com/forms/d/e/1FAIpQLSf4vZZ25-LQ1_xxriPxFH-Iwm6Mgok6exzAe1B3Hus1Yj8ifg/viewform"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"h2",3),le(4,"We need more open data"),T(),x(5,"div",4),le(6," The top 100 apparel companies in the world disclose only half of key environmental, social and governance indicators assessed here. To create systemic change and achieve the environmental and societal goals of the 21st century, we need companies to make available more comparable, open data! "),T(),T(),x(7,"div",5),x(8,"div",6),x(9,"a",7),le(10,"Learn More"),Ve(11,"i",8),T(),T(),T(),T(),T())},styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{cursor:pointer;color:inherit;text-decoration:inherit}"]}),e})(),SKe=(()=>{class e{constructor(n,i,r,o){this.route=n,this.scroll=i,this.meta=r,this.titleService=o,o.setTitle("Apparel companies' ESG data disclosure ratings & supplier transparency"),r.addTags([{name:"keywords",content:"wikirate, esg data,apparel supply chain,apparel company esg ratings,manufacturing supply chain,supply chain,supply transparency,apparel esg data,fashion esg data,esg company,esg companies,esg company rating,esg rating,esg ratings,esg ranking,esg rankings,esg data ranking,esg data rating,environmental,environmental concerns,social concerns,environmental social corporate governance,adidas esg data,data visualizations,data infographics"},{name:"description",content:"Discover ESG data disclosure ratings and supplier transparency of the biggest 100 apparel companies in infographics, charts, and maps by Wikirate."}])}ngOnInit(){this.route.params.subscribe(n=>{this.report_params={id:+n.id,year:n.year}}),this.scrollToTop()}scrollToTop(){this.scroll.scrollToPosition([0,0])}}return e.\u0275fac=function(n){return new(n||e)(ee(hc),ee(Tv),ee(UN),ee(zN))},e.\u0275cmp=di({type:e,selectors:[["dynamic-report"]],decls:8,vars:0,consts:[["id","market-cap-map"]],template:function(n,i){1&n&&(Ve(0,"intro"),Ve(1,"app-market-cap-map",0),Ve(2,"app-esg-disclosure-rates"),Ve(3,"app-esg-performance"),Ve(4,"app-supplier-lists-on-wikirate"),Ve(5,"app-number-of-suppliers-per-company"),Ve(6,"app-suppliers-map"),Ve(7,"more-data"))},directives:[AEe,sKe,aKe,dKe,fKe,mKe,CKe,DKe],styles:[""]}),e})();Le(467);const xKe=["carousel"],TKe=function(e){return{active:e}};function AKe(e,t){if(1&e&&(x(0,"div",81),x(1,"div",24),x(2,"div",25),x(3,"div",24),x(4,"div",25),x(5,"div",82),Ve(6,"img",83),T(),x(7,"div",84),x(8,"p"),le(9),T(),T(),T(),T(),T(),T(),T()),2&e){const n=t.$implicit;Je("ngClass",f0(3,TKe,0==t.index)),Ne(6),Od("src",n.logo,ua),Ne(3),Md(n.contributor)}}const OKe=[{path:"apparel_top_100/reports/0/latest",redirectTo:"/apparel_top_100/home",pathMatch:"full"},{path:"apparel_top_100/home",component:SKe},{path:"apparel_top_100/about",component:(()=>{class e{constructor(n,i,r){this.scroll=n,this.meta=i,this.titleService=r,this.images=[944,1011,984].map(o=>`https://picsum.photos/id/${o}/900/500`),this.currentIndex=1,this.contributors=[{contributor:"Fashion Revolution",logo:"https://dq06ugkuram52.cloudfront.net/files/3765463/22301376-medium.jpg"},{contributor:"Open Apparel Registry",logo:"https://dq06ugkuram52.cloudfront.net/files/5661929/21257596-medium.jpg"},{contributor:"AMD Akademie Mode & Design Berlin",logo:"https://dq06ugkuram52.cloudfront.net/files/5467212/20834915-medium.jpg"},{contributor:"Walk Free Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/1831839/12602420-medium.png"},{contributor:"Clean Clothes Campaign",logo:"https://dq06ugkuram52.cloudfront.net/files/564260/12604027-medium.png"},{contributor:"Columbia University SIPA",logo:"https://dq06ugkuram52.cloudfront.net/files/8104623/26042255-medium.png"},{contributor:"University of Wollongong",logo:"https://dq06ugkuram52.cloudfront.net/files/2549498/12602498-medium.png"},{contributor:"Glasgow Caledonian University",logo:"https://dq06ugkuram52.cloudfront.net/files/2381047/12602618-medium.png"},{contributor:"Nottingham Trent University",logo:"https://dq06ugkuram52.cloudfront.net/files/3700624/14894897-medium.png"},{contributor:"Universidad EAFIT",logo:"https://dq06ugkuram52.cloudfront.net/files/2593569/15069279-medium.png"},{contributor:"Ewha Womans University",logo:"https://dq06ugkuram52.cloudfront.net/files/2718582/12716390-medium.jpeg"},{contributor:"University of Connecticut",logo:"https://dq06ugkuram52.cloudfront.net/files/2877060/13099154-medium.png"},{contributor:"Australian National University",logo:"https://dq06ugkuram52.cloudfront.net/files/5295432/20444349-medium.png"},{contributor:"University of Nottingham",logo:"https://dq06ugkuram52.cloudfront.net/files/3149947/13561221-medium.png"},{contributor:"Global Reporting Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/801180/12603989-medium.jpg"},{contributor:"Ellen MacArthur Foundation",logo:"https://dq06ugkuram52.cloudfront.net/files/5405942/20706304-medium.png"},{contributor:"Textile Exchange",logo:"https://dq06ugkuram52.cloudfront.net/files/5406497/20709161-medium.jpg"},{contributor:"Science Based Targets Initiative",logo:"../../assets/SBTI-logo.jpg"},{contributor:"Poverty Footprint",logo:"https://dq06ugkuram52.cloudfront.net/files/1828145/12602552-medium.png"},{contributor:"Business & Human Rights Resource Center",logo:"../../assets/BHRRC-logo.png"},{logo:"https://dq06ugkuram52.cloudfront.net/files/5663399/21715396-medium.jpeg",contributor:"As You Sow"},{contributor:"Responsible Sourcing Network",logo:"https://dq06ugkuram52.cloudfront.net/files/5340655/20553116-medium.jpg"},{contributor:"Accord on Fire and Building Safety in Bangladesh",logo:"https://dq06ugkuram52.cloudfront.net/files/5424763/20734161-medium.png"},{contributor:"Ethical Trading Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/168320/20704071-medium.jpeg"},{contributor:"Fair Labor Association",logo:"https://dq06ugkuram52.cloudfront.net/files/61327/12604154-medium.gif"},{contributor:"ACT Action, Collaboration, Transformation",logo:"https://dq06ugkuram52.cloudfront.net/files/5417974/20726868-medium.png"},{contributor:"ShareAction",logo:"https://dq06ugkuram52.cloudfront.net/files/3763173/15057247-medium.png"},{contributor:"SastainoMetric",logo:"https://dq06ugkuram52.cloudfront.net/files/8126858/26084088-medium.png"}],r.setTitle("Behind Apparel 100"),i.addTags([{name:"keywords",content:"wikirate, esg data,apparel supply chain,apparel company esg ratings,manufacturing supply chain,supply chain,supply transparency,apparel esg data,fashion esg data,esg company,esg companies,esg company rating,esg rating,esg ratings,esg ranking,esg rankings,esg data ranking,esg data rating,environmental,environmental concerns,social concerns,environmental social corporate governance,adidas esg data,data visualizations,data infographics"},{name:"description",content:"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way. These maps and infographics show how much and which type of supply chain and ESG data to share. This apparel company transparency and ESG data research came together with the support of the WikiRate community."}]),i.updateTag({name:"og:title",content:"Behind Apparel 100"},"property='og:title'"),i.updateTag({name:"og:url",content:"//showcase.wikirate.org/#/apparel_top_100/about"},"property='og:url'"),i.updateTag({name:"og:description",content:"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way."},"property='og:description'"),i.updateTag({name:"twitter:description",content:"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way."},"property='twitter:description'"),i.updateTag({name:"twitter:title",content:"Behind Apparel 100"},"property='twitter:title'")}ngOnInit(){this.scrollToTop()}prev(){this.carousel.nativeElement.carousel("prev")}next(){this.carousel.nativeElement.on("slid.bs.carousel",()=>{this.carousel.nativeElement.carousel("2")})}scrollToTop(){this.scroll.scrollToPosition([0,0])}}return e.\u0275fac=function(n){return new(n||e)(ee(Tv),ee(UN),ee(zN))},e.\u0275cmp=di({type:e,selectors:[["app-about"]],viewQuery:function(n,i){if(1&n&&Pp(xKe,7),2&n){let r;Si(r=xi())&&(i.carousel=r.first)}},decls:376,vars:1,consts:[[1,"wikirate-creme-box"],[1,"wikirate-container"],[1,"row"],[1,"col","mt-2","text-center"],[1,"mini-title","text-center"],[1,"showcase-main-text","mt-3"],[1,"row","mt-4"],[1,"col-4","text-center","mb-4"],[1,"primary-info-navy"],[1,"secondary-info-navy","mt-1"],[1,"col-4","text-center"],[1,"wikirate-navy-box"],[1,"col-md-8"],[1,"showcase-title","text-white","mt-2","mb-2"],[1,"showcase-main-text-white"],[1,"col-md-4","vertical-center","justify-content-center"],["onclick","window.open('https://forms.gle/8ru3Wh8QMoJ8NZ8Y7','_blank')",1,"btn","btn-highlight","pr-4","pl-4","mt-2"],[1,"wikirate-box"],[1,"mini-title","text-center","mt-4"],[1,"row","mt-5","mb-4"],[1,"secondary-info-navy"],["id","quotes","data-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","mt-4","mb-4","active"],[1,"row","justify-content-center"],[1,"col-9"],[1,"image-box","col-3","vertical-center","justify-content-center","d-none","d-md-inline-flex"],["src","https://dq06ugkuram52.cloudfront.net/files/3765463/22301376-medium.jpg"],[1,"showcase-main-text","font-italic"],[1,"note","mt-3"],[1,"note"],[1,"carousel-item","mt-4","mb-4"],["src","https://dq06ugkuram52.cloudfront.net/files/564260/12604027-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/5467212/20834915-medium.jpg"],[1,"col-3","image-box","vertical-center","justify-content-center","d-none","d-md-inline-flex"],["src","https://dq06ugkuram52.cloudfront.net/files/2549498/12602498-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/1831839/12602420-medium.png"],["role","button","data-slide","prev","href","#quotes",1,"carousel-control-prev","mt-4","mr-4"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button","data-slide","next","href","#quotes",1,"carousel-control-next","mt-4","mr-4"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"wikirate-box","wikirate-container","d-none","d-md-block"],[1,"mini-title","text-center","mb-5"],["id","partners-logos","data-ride","carousel",1,"carousel","slide"],[1,"carousel-inner-logos"],[1,"row","col-4"],[1,"image-box","col-11","d-flex","justify-content-center","align-items-center","m-2"],[1,"col-11","tiny-text-nany","text-center","m-2","mt-1"],[1,"image-box","col-11","d-flex","justify-content-center","align-items-md-center","m-2"],["src","https://dq06ugkuram52.cloudfront.net/files/5661929/21257596-medium.jpg"],["src","https://dq06ugkuram52.cloudfront.net/files/564260/12604027-medium.png",1,"contributor"],["src","https://dq06ugkuram52.cloudfront.net/files/8104623/26042255-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/2381047/12602618-medium.png",1,"contributor"],["src","https://dq06ugkuram52.cloudfront.net/files/3700624/14894897-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/2593569/15069279-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/2718582/12716390-medium.jpeg"],["src","https://dq06ugkuram52.cloudfront.net/files/2877060/13099154-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/5295432/20444349-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/3149947/13561221-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/801180/12603989-medium.jpg"],["src","https://dq06ugkuram52.cloudfront.net/files/5405942/20706304-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/5406497/20709161-medium.jpg"],["src","../../assets/SBTI-logo.jpg"],["src","https://dq06ugkuram52.cloudfront.net/files/1828145/12602552-medium.png"],["src","../../assets/BHRRC-logo.png"],["src","https://dq06ugkuram52.cloudfront.net/files/5663399/21715396-medium.jpeg"],["src","https://dq06ugkuram52.cloudfront.net/files/5340655/20553116-medium.jpg"],["src","https://dq06ugkuram52.cloudfront.net/files/5424763/20734161-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/168320/20704071-medium.jpeg"],["src","https://dq06ugkuram52.cloudfront.net/files/61327/12604154-medium.gif"],["src","https://dq06ugkuram52.cloudfront.net/files/5417974/20726868-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/3763173/15057247-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/8126858/26084088-medium.png"],["role","button","data-slide","prev","href","#partners-logos",1,"carousel-control-prev","mt-4","mr-4"],["role","button","data-slide","next","href","#partners-logos",1,"carousel-control-next","mt-4","mr-4"],[1,"wikirate-box","wikirate-container","d-block","d-md-none"],["id","partners-logos-small-screen","data-ride","carousel",1,"carousel","slide"],["class","carousel-item mt-4 mb-4",3,"ngClass",4,"ngFor","ngForOf"],["role","button","data-slide","prev","href","#partners-logos-small-screen",1,"carousel-control-prev","mt-4","mr-4"],["role","button","data-slide","next","href","#partners-logos-small-screen",1,"carousel-control-next","mt-4","mr-4"],[1,"carousel-item","mt-4","mb-4",3,"ngClass"],[1,"col-11","d-flex","justify-content-center","align-items-md-center","m-2"],[1,"image-box-small-screen",3,"src"],[1,"col-11","tiny-text-nany","text-center","m-2","mt-3"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"div",3),x(4,"div",4),le(5," Behind Apparel 100 "),T(),x(6,"div",5),x(7,"p"),le(8,"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way. These maps and infographics show how much and which type of supply chain and ESG data to share. This apparel company transparency and ESG data research came together with the support of the WikiRate community. "),T(),T(),x(9,"div",6),x(10,"div",7),x(11,"div",8),le(12,"335"),T(),x(13,"div",9),le(14,"RESEARCHERS"),T(),T(),x(15,"div",10),x(16,"div",8),le(17,"10"),T(),x(18,"div",9),le(19,"UNIVERSITIES"),T(),T(),x(20,"div",10),x(21,"div",8),le(22,"17"),T(),x(23,"div",9),le(24,"NGOs"),T(),T(),T(),T(),T(),T(),T(),x(25,"div",11),x(26,"div",1),x(27,"div",2),x(28,"div",12),x(29,"h2",13),le(30,"Create your own powerful open data ecosystem story "),T(),x(31,"div",14),x(32,"p"),le(33,"With our open, free, and flexible data, we can create an open data ecosystem that tells a story the world deserves to know. "),T(),x(34,"p"),le(35,"Presented with engaging infographic designs and interactive charts and maps, make your point to your audience in an accessible, clear, and powerful way. "),T(),x(36,"p"),le(37,"Get in touch; we'd love to hear from you."),T(),T(),T(),x(38,"div",15),x(39,"button",16),le(40," Get in Touch "),T(),T(),T(),T(),T(),x(41,"div",17),x(42,"div",1),x(43,"p",18),le(44," The research in numbers: "),T(),x(45,"div",19),x(46,"div",10),x(47,"div",8),le(48,"31K+"),T(),x(49,"div",20),le(50,"DATA POINTS"),T(),T(),x(51,"div",10),x(52,"div",8),le(53,"171"),T(),x(54,"div",20),le(55,"METRICS"),T(),T(),x(56,"div",10),x(57,"div",8),le(58,"30K+"),T(),x(59,"div",20),le(60,"CORPORATE RELATIONSHIPS"),T(),T(),T(),T(),T(),x(61,"div",0),x(62,"div",1),x(63,"div",21),x(64,"div",22),x(65,"div",23),x(66,"div",24),x(67,"div",25),x(68,"div",24),x(69,"div",26),Ve(70,"img",27),T(),x(71,"div",12),x(72,"div",28),le(73,'"We believe in collaborating to improve the fashion industry and are delighted to be continuing our partnership with WikiRate into 2022. Using the WikiRate platform to host FTI research has made our work more accessible and impactful across a range of stakeholders who use our data to enable their activism and research." '),T(),x(74,"div",29),x(75,"b"),le(76," Fashion Revolution "),T(),T(),Ve(77,"div",30),T(),T(),T(),T(),T(),x(78,"div",31),x(79,"div",24),x(80,"div",25),x(81,"div",2),x(82,"div",26),Ve(83,"img",32),T(),x(84,"div",12),x(85,"div",28),le(86,'"WikiRate has proven an invaluable partner for our Fashion Checker campaign. The platform\u2019s sophisticated functionalities and open data approach has given us the flexibility we needed to bring our data to the public so that it can be used by advocates to create real change." '),T(),x(87,"div",29),x(88,"b"),le(89," Anne Bienias "),T(),T(),x(90,"div",30),le(91,"Clean Clothes Campaign"),T(),T(),T(),T(),T(),T(),x(92,"div",31),x(93,"div",24),x(94,"div",25),x(95,"div",2),x(96,"div",26),Ve(97,"img",33),T(),x(98,"div",12),x(99,"div",28),le(100,'"This collaborative project was a great opportunity to further develop our research skills which in turn allowed us to be more critical and analytical of fashion labels. Working with WikiRate made us understand the importance of finding the right and accurate information that backs up or contradicts the image that a fashion label is trying to portray" '),T(),x(101,"div",29),x(102,"b"),le(103," Student of Akademie Mode & Design (AMD) Berlin "),T(),T(),Ve(104,"div",30),T(),T(),T(),T(),T(),x(105,"div",31),x(106,"div",24),x(107,"div",25),x(108,"div",2),x(109,"div",34),Ve(110,"img",35),T(),x(111,"div",12),x(112,"div",28),le(113,'"WikiRate provides the opportunity for students to get a real-life experience with CSR, which helps develop their social awareness, problem-solving and critical thinking skills" '),T(),x(114,"div",29),x(115,"b"),le(116," Dr. Stephanie Perkiss "),T(),T(),x(117,"div",30),le(118,"University of Wollongong, Australia"),T(),T(),T(),T(),T(),T(),x(119,"div",31),x(120,"div",24),x(121,"div",25),x(122,"div",2),x(123,"div",26),Ve(124,"img",36),T(),x(125,"div",12),x(126,"div",28),le(127,'"We\'ve worked with the WikiRate for the last five years to scale our research on modern slavery. The WikiRate team maintains our methodology on their platform and each year coordinates hundreds of university students to contribute new data for analysis that we use to improve legislation to end modern slavery." '),T(),x(128,"div",29),x(129,"b"),le(130," Katharine Bryant "),T(),T(),x(131,"div",30),le(132,"Walk Free Initiative"),T(),T(),T(),T(),T(),T(),T(),x(133,"a",37),Ve(134,"span",38),x(135,"span",39),le(136,"Previous"),T(),T(),x(137,"a",40),Ve(138,"span",41),x(139,"span",39),le(140,"Next"),T(),T(),T(),T(),T(),x(141,"div",42),x(142,"p",43),le(143," Analysis made possible by data and metrics from the following organizations: "),T(),x(144,"div",44),x(145,"div",45),x(146,"div",23),x(147,"div",24),x(148,"div",25),x(149,"div",24),x(150,"div",46),x(151,"div",47),Ve(152,"img",27),T(),x(153,"div",48),x(154,"p"),le(155,"Fashion Revolution"),T(),T(),T(),x(156,"div",46),x(157,"div",49),Ve(158,"img",50),T(),x(159,"div",48),x(160,"p"),le(161,"Open Apparel Registry"),T(),T(),T(),x(162,"div",46),x(163,"div",49),Ve(164,"img",33),T(),x(165,"div",48),x(166,"p"),le(167,"AMD Akademie Mode & Design Berlin"),T(),T(),T(),T(),T(),T(),T(),x(168,"div",31),x(169,"div",24),x(170,"div",25),x(171,"div",24),x(172,"div",46),x(173,"div",49),Ve(174,"img",36),T(),x(175,"div",48),x(176,"p"),le(177,"Walk Free Initiative"),T(),T(),T(),x(178,"div",46),x(179,"div",49),Ve(180,"img",51),T(),x(181,"div",48),x(182,"p"),le(183,"Clean Clothes Campaign"),T(),T(),T(),x(184,"div",46),x(185,"div",49),Ve(186,"img",52),T(),x(187,"div",48),x(188,"p"),le(189,"Columbia University SIPA"),T(),T(),T(),T(),T(),T(),T(),x(190,"div",31),x(191,"div",24),x(192,"div",25),x(193,"div",24),x(194,"div",46),x(195,"div",49),Ve(196,"img",35),T(),x(197,"div",48),x(198,"p"),le(199,"University of Wollongong"),T(),T(),T(),x(200,"div",46),x(201,"div",49),Ve(202,"img",53),T(),x(203,"div",48),x(204,"p"),le(205,"Glasgow Caledonian University"),T(),T(),T(),x(206,"div",46),x(207,"div",49),Ve(208,"img",54),T(),x(209,"div",48),x(210,"p"),le(211,"Nottingham Trent University"),T(),T(),T(),T(),T(),T(),T(),x(212,"div",31),x(213,"div",24),x(214,"div",25),x(215,"div",24),x(216,"div",46),x(217,"div",49),Ve(218,"img",55),T(),x(219,"div",48),x(220,"p"),le(221,"Universidad EAFIT"),T(),T(),T(),x(222,"div",46),x(223,"div",49),Ve(224,"img",56),T(),x(225,"div",48),x(226,"p"),le(227,"Ewha Womans University"),T(),T(),T(),x(228,"div",46),x(229,"div",49),Ve(230,"img",57),T(),x(231,"div",48),x(232,"p"),le(233,"University of Connecticut"),T(),T(),T(),T(),T(),T(),T(),x(234,"div",31),x(235,"div",24),x(236,"div",25),x(237,"div",24),x(238,"div",46),x(239,"div",49),Ve(240,"img",58),T(),x(241,"div",48),x(242,"p"),le(243,"Australian National University"),T(),T(),T(),x(244,"div",46),x(245,"div",49),Ve(246,"img",59),T(),x(247,"div",48),x(248,"p"),le(249,"University of Nottingham"),T(),T(),T(),x(250,"div",46),x(251,"div",49),Ve(252,"img",60),T(),x(253,"div",48),x(254,"p"),le(255,"Global Reporting Initiative"),T(),T(),T(),T(),T(),T(),T(),x(256,"div",31),x(257,"div",24),x(258,"div",25),x(259,"div",24),x(260,"div",46),x(261,"div",49),Ve(262,"img",61),T(),x(263,"div",48),x(264,"p"),le(265,"Ellen MacArthur Foundation"),T(),T(),T(),x(266,"div",46),x(267,"div",49),Ve(268,"img",62),T(),x(269,"div",48),x(270,"p"),le(271,"Textile Exchange"),T(),T(),T(),x(272,"div",46),x(273,"div",49),Ve(274,"img",63),T(),x(275,"div",48),x(276,"p"),le(277,"Science Based Targets Initiative"),T(),T(),T(),T(),T(),T(),T(),x(278,"div",31),x(279,"div",24),x(280,"div",25),x(281,"div",24),x(282,"div",46),x(283,"div",49),Ve(284,"img",64),T(),x(285,"div",48),x(286,"p"),le(287,"Poverty Footprint"),T(),T(),T(),x(288,"div",46),x(289,"div",49),Ve(290,"img",65),T(),x(291,"div",48),x(292,"p"),le(293,"Business & Human Rights Resource Center"),T(),T(),T(),x(294,"div",46),x(295,"div",49),Ve(296,"img",66),T(),x(297,"div",48),x(298,"p"),le(299,"As You Sow"),T(),T(),T(),T(),T(),T(),T(),x(300,"div",31),x(301,"div",24),x(302,"div",25),x(303,"div",24),x(304,"div",46),x(305,"div",49),Ve(306,"img",67),T(),x(307,"div",48),x(308,"p"),le(309,"Responsible Sourcing Network"),T(),T(),T(),x(310,"div",46),x(311,"div",49),Ve(312,"img",68),T(),x(313,"div",48),x(314,"p"),le(315,"Accord on Fire and Building Safety in Bangladesh"),T(),T(),T(),x(316,"div",46),x(317,"div",49),Ve(318,"img",69),T(),x(319,"div",48),x(320,"p"),le(321,"Ethical Trading Initiative"),T(),T(),T(),T(),T(),T(),T(),x(322,"div",31),x(323,"div",24),x(324,"div",25),x(325,"div",24),x(326,"div",46),x(327,"div",49),Ve(328,"img",70),T(),x(329,"div",48),x(330,"p"),le(331,"Fair Labor Association"),T(),T(),T(),x(332,"div",46),x(333,"div",49),Ve(334,"img",71),T(),x(335,"div",48),x(336,"p"),le(337,"ACT Action, Collaboration, Transformation"),T(),T(),T(),x(338,"div",46),x(339,"div",49),Ve(340,"img",72),T(),x(341,"div",48),x(342,"p"),le(343,"ShareAction"),T(),T(),T(),T(),T(),T(),T(),x(344,"div",31),x(345,"div",24),x(346,"div",25),x(347,"div",24),x(348,"div",46),x(349,"div",49),Ve(350,"img",73),T(),x(351,"div",48),x(352,"p"),le(353,"SastainoMetric"),T(),T(),T(),T(),T(),T(),T(),T(),x(354,"a",74),Ve(355,"span",38),x(356,"span",39),le(357,"Previous"),T(),T(),x(358,"a",75),Ve(359,"span",41),x(360,"span",39),le(361,"Next"),T(),T(),T(),T(),x(362,"div",76),x(363,"p",43),le(364," Analysis made possible by data and metrics from the following organizations: "),T(),x(365,"div",77),x(366,"div",45),Ht(367,AKe,10,5,"div",78),T(),x(368,"a",79),Ve(369,"span",38),x(370,"span",39),le(371,"Previous"),T(),T(),x(372,"a",80),Ve(373,"span",41),x(374,"span",39),le(375,"Next"),T(),T(),T(),T()),2&n&&(Ne(367),Je("ngForOf",i.contributors))},directives:[zf,X7],styles:[".img[_ngcontent-%COMP%]{width:250px;height:250px;min-width:250px;min-height:250px}.image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:auto}.roadmap[_ngcontent-%COMP%]{height:500px}.showcase-circle-purple[_ngcontent-%COMP%]{width:4.25rem;height:4.25rem;background-color:#484c9d!important}.showcase-circle-orange[_ngcontent-%COMP%]{width:4.25rem;height:4.25rem;background-color:#f7733d!important}.showcase-icon-container[_ngcontent-%COMP%]{height:5rem!important;width:5rem!important}.contributor[_ngcontent-%COMP%]{width:100%;height:auto}.image-box[_ngcontent-%COMP%]{width:140px;height:140px}.image-box-small-screen[_ngcontent-%COMP%]{height:auto;max-width:200px}"]}),e})()},{path:"**",redirectTo:"/apparel_top_100/home",pathMatch:"full"}];let NKe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:[{provide:jp,useClass:CN}],imports:[[HM,HN,gM.forRoot(OKe,{anchorScrolling:"enabled"})],gM]}),e})();const MKe=["search_text"];let kKe=(()=>{class e{constructor(n,i,r){this.route=n,this.router=i,this.apparelService=r,this.exploreMore=!1,this.apparelTop100=[],this.apparelTop100=r.getCompanies()}ngOnInit(){this.report_params={id:0,year:"latest"},this.router.events.pipe(Xo(n=>n instanceof XN&&Object.keys(n.snapshot.params).length>0),ft(n=>n instanceof XN?n.snapshot.params:{})).subscribe(n=>{this.report_params.id=n.id,this.report_params.year=n.year,this.selectedCompany=this.apparelService.getCompany(+this.report_params.id).name}),this.apparelService.exploreMore.subscribe(n=>{this.exploreMore=n})}setValue(n){this.search_text.nativeElement.value=n.name,this.report_params.id=n.id,null===n&&(this.search_text.nativeElement.value="overview",this.report_params.id=0)}navigateToYear(n){let i=n.target.value;i&&(null===this.report_params.id&&(this.report_params.id=0),this.router.navigate(["/apparel_top_100/reports/"+this.report_params.id+"/"+i]))}navigateToCompany(n){this.router.navigate(["/apparel_top_100/reports/"+n.id+"/"+this.report_params.year])}}return e.\u0275fac=function(n){return new(n||e)(ee(hc),ee(Jo),ee(D0))},e.\u0275cmp=di({type:e,selectors:[["header-component"]],viewQuery:function(n,i){if(1&n&&Pp(MKe,5),2&n){let r;Si(r=xi())&&(i.search_text=r.first)}},decls:26,vars:0,consts:[[1,"wikirate-box","bg-navy"],[1,"container"],[1,"navbar","bg-navy","navbar-expand","nomargin","drop-shadow","navbar-light"],["routerLink","apparel_top_100/home",1,"navbar-brand","title","mr-3"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","apparel_top_100/about",1,"nav-link","ml-3","mr-3"],[1,"nav-item","dropdown"],["type","button","id","share","data-toggle","dropdown","aria-expanded","false",1,"nav-item","nav-link","ml-3","mr-3","dropdown-toggle"],[1,"bi","bi-arrow-up-right"],["aria-labelledby","share",1,"dropdown-menu"],["target","_blank","href","https://www.facebook.com/sharer/sharer.php?u=https://showcase.wikirate.org/",1,"dropdown-item"],[1,"bi","bi-facebook","ml-2","mr-2"],["target","_blank","href","https://twitter.com/intent/tweet?url=https://showcase.wikirate.org/&text=",1,"dropdown-item"],[1,"bi","bi-twitter","ml-2","mr-2"],["target","_blank","href","https://www.linkedin.com/shareArticle?mini=true&url=https://showcase.wikirate.org/",1,"dropdown-item"],[1,"bi","bi-linkedin","ml-2","mr-2"],["target","_blank","href","mailto:info@example.com?&subject=&cc=&bcc=&body=https://showcase.wikirate.org/%0A",1,"dropdown-item"],[1,"bi","bi-envelope-fill","ml-2","mr-2"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"nav",2),x(3,"a",3),le(4,"Apparel 100"),T(),x(5,"ul",4),x(6,"li",5),x(7,"a",6),le(8,"ABOUT"),T(),T(),x(9,"li",7),x(10,"a",8),le(11," SHARE "),Ve(12,"i",9),T(),x(13,"div",10),x(14,"a",11),Ve(15,"i",12),le(16,"facebook"),T(),x(17,"a",13),Ve(18,"i",14),le(19,"twitter"),T(),x(20,"a",15),Ve(21,"i",16),le(22,"linkedin"),T(),x(23,"a",17),Ve(24,"i",18),le(25,"mail"),T(),T(),T(),T(),T(),T(),T())},directives:[JM,DC],styles:["a[_ngcontent-%COMP%]{color:#000}hr[_ngcontent-%COMP%]{margin:.5em}.nav[_ngcontent-%COMP%]{margin-top:.5em;background:white}.title[_ngcontent-%COMP%]{font-weight:700;letter-spacing:0em;text-align:left;color:#fff!important}.dropdown-menu[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto}.dropdown-toggle[_ngcontent-%COMP%]:after{content:none!important}"]}),e})(),IKe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=di({type:e,selectors:[["footer"]],decls:19,vars:0,consts:[[1,"wikirate-creme-purple-box"],[1,"wikirate-container"],[1,"row","text-center"],[1,"col-12"],[1,"row","justify-content-center","mb-3"],[1,"tiny-text"],[1,"row","justify-content-center"],["href","https://wikirate.org","target","_blank"],["src","assets/Wikirate%20Logo.svg"],[1,"col-sm-7","mini-text","mt-3","justify-content-center"],[1,"wikirate-navy-box"],[1,"footer-container"],[1,"row"],[1,"col-11"],[1,"note","mt-3","text-light-white","mb-3"]],template:function(n,i){1&n&&(x(0,"div",0),x(1,"div",1),x(2,"div",2),x(3,"div",3),x(4,"div",4),x(5,"div",5),le(6,"Powered by "),T(),T(),x(7,"div",6),x(8,"a",7),Ve(9,"img",8),T(),T(),x(10,"div",6),x(11,"div",9),le(12," WikiRate is an open data platform that brings corporate ESG data together in one place, making it accessible, comparable, and free for all. "),T(),T(),T(),T(),T(),T(),x(13,"div",10),x(14,"div",11),x(15,"div",12),x(16,"div",13),x(17,"div",14),le(18," Copyright \xa9 2021 Wikirate.org All rights reserved "),T(),T(),T(),T(),T())},styles:[".nopadding[_ngcontent-%COMP%]{padding:0!important}.text-light-white[_ngcontent-%COMP%]{color:#f7f7f8!important}"]}),e})();function RKe(e,t){if(1&e){const n=function lc(){return fe()}();x(0,"div",2),gn("click",function(){return lr(n),Jn().scrollToTop()}),x(1,"button",3),gn("click",function(){return lr(n),Jn().scrollToTop()}),Ve(2,"i",4),T(),T()}}let PKe=(()=>{class e{constructor(n,i){this.scroll=n,this.router=i,this.pageYoffset=0}onScroll(n){this.pageYoffset=window.pageYOffset}ngOnInit(){this.setUpAnalytics()}scrollToTop(){this.scroll.scrollToPosition([0,0])}setUpAnalytics(){this.router.events.pipe(Xo(n=>n instanceof b0)).subscribe(n=>{gtag("config","UA-34941429-8",{page_path:n.urlAfterRedirects})})}}return e.\u0275fac=function(n){return new(n||e)(ee(Tv),ee(Jo))},e.\u0275cmp=di({type:e,selectors:[["app-root"]],hostBindings:function(n,i){1&n&&gn("scroll",function(o){return i.onScroll(o)},!1,vB)},decls:6,vars:1,consts:[["report",""],["class","scroll-to-top show-scrollTop",3,"click",4,"ngIf"],[1,"scroll-to-top","show-scrollTop",3,"click"],[1,"btn","btn-highlight","btn-circle",3,"click"],[1,"bi","bi-chevron-up"]],template:function(n,i){1&n&&(x(0,"div",null,0),Ve(2,"header-component"),Ve(3,"router-outlet"),Ht(4,RKe,3,0,"div",1),T(),Ve(5,"footer")),2&n&&(Ne(4),Je("ngIf",i.pageYoffset>0))},directives:[kKe,lM,Fd,IKe],styles:[".scroll-to-top[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px;opacity:0;transition:all .2s ease-in-out}.show-scrollTop[_ngcontent-%COMP%]{opacity:1;transition:all .2s ease-in-out}"]}),e})(),FKe=(()=>{class e{constructor(n){this.apparelService=n}resolve(n,i){return this.apparelService.getCompany(+n.params.id)}}return e.\u0275fac=function(n){return new(n||e)(ze(D0))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function LKe(){return"undefined"!=typeof window&&void 0!==window.document}function X8(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function hp(e){switch(e.length){case 0:return new zv;case 1:return e[0];default:return new TH(e)}}function ele(e,t,n,i,r={},o={}){const s=[],a=[];let l=-1,u=null;if(i.forEach(c=>{const d=c.offset,f=d==l,h=f&&u||{};Object.keys(c).forEach(p=>{let m=p,_=c[p];if("offset"!==p)switch(m=t.normalizePropertyName(m,s),_){case"!":_=r[p];break;case $d:_=o[p];break;default:_=t.normalizeStyleValue(p,m,_,s)}h[m]=_}),f||a.push(h),u=h,l=d}),s.length){const c="\n - ";throw new Error(`Unable to animate due to the following errors:${c}${s.join(c)}`)}return a}function J8(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&Q8(n,"start",e)));break;case"done":e.onDone(()=>i(n&&Q8(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&Q8(n,"destroy",e)))}}function Q8(e,t,n){const i=n.totalTime,o=Z8(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==i?e.totalTime:i,!!n.disabled),s=e._data;return null!=s&&(o._data=s),o}function Z8(e,t,n,i,r="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function tl(e,t,n){let i;return e instanceof Map?(i=e.get(t),i||e.set(t,i=n)):(i=e[t],i||(i=e[t]=n)),i}function tle(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let e4=(e,t)=>!1,nle=(e,t,n)=>[];(X8()||"undefined"!=typeof Element)&&(e4=LKe()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),nle=(e,t,n)=>{if(n)return Array.from(e.querySelectorAll(t));const i=e.querySelector(t);return i?[i]:[]});let cm=null,ile=!1;function rle(e){cm||(cm=function BKe(){return"undefined"!=typeof document?document.body:null}()||{},ile=!!cm.style&&"WebkitAppearance"in cm.style);let t=!0;return cm.style&&!function jKe(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in cm.style,!t&&ile&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in cm.style)),t}const ole=e4,sle=nle;let ale=(()=>{class e{validateStyleProperty(n){return rle(n)}matchesElement(n,i){return!1}containsElement(n,i){return ole(n,i)}query(n,i,r){return sle(n,i,r)}computeStyle(n,i,r){return r||""}animate(n,i,r,o,s,a=[],l){return new zv(r,o)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),t4=(()=>{class e{}return e.NOOP=new ale,e})();const n4="ng-enter",zA="ng-leave",GA="ng-trigger",WA=".ng-trigger",ule="ng-animating",i4=".ng-animating";function dm(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:r4(parseFloat(t[1]),t[2])}function r4(e,t){return"s"===t?1e3*e:e}function qA(e,t,n){return e.hasOwnProperty("duration")?e:function HKe(e,t,n){let r,o=0,s="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=r4(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=r4(parseFloat(l),a[4]));const u=a[5];u&&(s=u)}else r=e;if(!n){let a=!1,l=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),a=!0),o<0&&(t.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&t.splice(l,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:o,easing:s}}(e,t,n)}function by(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function pp(e,t,n={}){if(t)for(let i in e)n[i]=e[i];else by(e,n);return n}function dle(e,t,n){return n?t+":"+n+";":""}function fle(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=dle(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=dle(0,GKe(n),e.style[n]));e.setAttribute("style",t)}function id(e,t,n){e.style&&(Object.keys(t).forEach(i=>{const r=s4(i);n&&!n.hasOwnProperty(i)&&(n[i]=e.style[r]),e.style[r]=t[i]}),X8()&&fle(e))}function fm(e,t){e.style&&(Object.keys(t).forEach(n=>{const i=s4(n);e.style[i]=""}),X8()&&fle(e))}function Vw(e){return Array.isArray(e)?1==e.length?e[0]:SH(e):e}const o4=new RegExp("{{\\s*(.+?)\\s*}}","g");function hle(e){let t=[];if("string"==typeof e){let n;for(;n=o4.exec(e);)t.push(n[1]);o4.lastIndex=0}return t}function YA(e,t,n){const i=e.toString(),r=i.replace(o4,(o,s)=>{let a=t[s];return t.hasOwnProperty(s)||(n.push(`Please provide a value for the animation param ${s}`),a=""),a.toString()});return r==i?e:r}function KA(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const zKe=/-+([a-z0-9])/g;function s4(e){return e.replace(zKe,(...t)=>t[1].toUpperCase())}function GKe(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function nl(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function ple(e,t){return window.getComputedStyle(e)[t]}function YKe(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(i=>function KKe(e,t,n){if(":"==e[0]){const l=function XKe(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const r=i[1],o=i[2],s=i[3];t.push(gle(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&t.push(gle(s,r))}(i,n,t)):n.push(e),n}const JA=new Set(["true","1"]),QA=new Set(["false","0"]);function gle(e,t){const n=JA.has(e)||QA.has(e),i=JA.has(t)||QA.has(t);return(r,o)=>{let s="*"==e||e==r,a="*"==t||t==o;return!s&&n&&"boolean"==typeof r&&(s=r?JA.has(e):QA.has(e)),!a&&i&&"boolean"==typeof o&&(a=o?JA.has(t):QA.has(t)),s&&a}}const JKe=new RegExp("s*:selfs*,?","g");function a4(e,t,n){return new QKe(e).build(t,n)}class QKe{constructor(t){this._driver=t}build(t,n){const i=new tXe(n);return this._resetContextStyleTimingState(i),nl(this,Vw(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,r=n.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,o.push(this.visitState(l,n))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,s.push(l)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};if(i.styles.forEach(a=>{if(ZA(a)){const l=a;Object.keys(l).forEach(u=>{hle(l[u]).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}}),o.size){const a=KA(o.values());n.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=nl(this,Vw(t.animation),n);return{type:1,matchers:YKe(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:hm(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>nl(this,i,n)),options:hm(t.options)}}visitGroup(t,n){const i=n.currentTime;let r=0;const o=t.steps.map(s=>{n.currentTime=i;const a=nl(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:hm(t.options)}}visitAnimate(t,n){const i=function iXe(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return l4(qA(e,t).duration,0,"");const i=e;if(i.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=l4(0,0,"");return o.dynamic=!0,o.strValue=i,o}return n=n||qA(i,t),l4(n.duration,n.delay,n.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let r,o=t.styles?t.styles:yl({});if(5==o.type)r=this.visitKeyframes(o,n);else{let s=t.styles,a=!1;if(!s){a=!0;const u={};i.easing&&(u.easing=i.easing),s=yl(u)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[];Array.isArray(t.styles)?t.styles.forEach(s=>{"string"==typeof s?s==$d?i.push(s):n.errors.push(`The provided style string value ${s} is not allowed.`):i.push(s)}):i.push(t.styles);let r=!1,o=null;return i.forEach(s=>{if(ZA(s)){const a=s,l=a.easing;if(l&&(o=l,delete a.easing),!r)for(let u in a)if(a[u].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:o,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{"string"!=typeof s&&Object.keys(s).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void n.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=n.collectedStyles[n.currentQuerySelector],u=l[a];let c=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(n.errors.push(`The CSS property "${a}" that exists between the times of "${u.startTime}ms" and "${u.endTime}ms" is also being animated in a parallel animation between the times of "${o}ms" and "${r}ms"`),c=!1),o=u.startTime),c&&(l[a]={startTime:o,endTime:r}),n.options&&function UKe(e,t,n){const i=t.params||{},r=hle(e);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(`Unable to resolve the local animation param ${o} in the given list of values`)})}(s[a],n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),i;let o=0;const s=[];let a=!1,l=!1,u=0;const c=t.steps.map(b=>{const v=this._makeStyleAst(b,n);let D=null!=v.offset?v.offset:function nXe(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(ZA(n)&&n.hasOwnProperty("offset")){const i=n;t=parseFloat(i.offset),delete i.offset}});else if(ZA(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(v.styles),A=0;return null!=D&&(o++,A=v.offset=D),l=l||A<0||A>1,a=a||A<u,u=A,s.push(A),v});l&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&n.errors.push("Please ensure that all keyframe offsets are in order");const d=t.steps.length;let f=0;o>0&&o<d?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==o&&(f=1/(d-1));const h=d-1,p=n.currentTime,m=n.currentAnimateTimings,_=m.duration;return c.forEach((b,v)=>{const D=f>0?v==h?1:f*v:s[v],A=D*_;n.currentTime=p+m.delay+A,m.duration=A,this._validateStyleAst(b,n),b.offset=D,i.styles.push(b)}),i}visitReference(t,n){return{type:8,animation:nl(this,Vw(t.animation),n),options:hm(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:hm(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:hm(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,r=t.options||{};n.queryCount++,n.currentQuery=t;const[o,s]=function ZKe(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(JKe,"")),e=e.replace(/@\*/g,WA).replace(/@\w+/g,n=>WA+"-"+n.substr(1)).replace(/:animating/g,i4),[e,t]}(t.selector);n.currentQuerySelector=i.length?i+" "+o:o,tl(n.collectedStyles,n.currentQuerySelector,{});const a=nl(this,Vw(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:hm(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:qA(t.timings,n.errors,!0);return{type:12,animation:nl(this,Vw(t.animation),n),timings:i,options:null}}}class tXe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ZA(e){return!Array.isArray(e)&&"object"==typeof e}function hm(e){return e?(e=by(e)).params&&(e.params=function eXe(e){return e?by(e):null}(e.params)):e={},e}function l4(e,t,n){return{duration:e,delay:t,easing:n}}function u4(e,t,n,i,r,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class e2{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const sXe=new RegExp(":enter","g"),lXe=new RegExp(":leave","g");function c4(e,t,n,i,r,o={},s={},a,l,u=[]){return(new uXe).buildKeyframes(e,t,n,i,r,o,s,a,l,u)}class uXe{buildKeyframes(t,n,i,r,o,s,a,l,u,c=[]){u=u||new e2;const d=new d4(t,n,u,r,o,c,[]);d.options=l,d.currentTimeline.setStyles([s],null,d.errors,l),nl(this,i,d);const f=d.timelines.filter(h=>h.containsAnimation());if(Object.keys(a).length){let h;for(let p=f.length-1;p>=0;p--){const m=f[p];if(m.element===n){h=m;break}}h&&!h.allowOnlyTimelineStyles()&&h.setStyles([a],null,d.errors,l)}return f.length?f.map(h=>h.buildKeyframes()):[u4(n,[],[],[],0,0,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(t.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_visitSubInstructions(t,n,i){let o=n.currentTimeline.currentTime;const s=null!=i.duration?dm(i.duration):null,a=null!=i.delay?dm(i.delay):null;return 0!==s&&t.forEach(l=>{const u=n.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(t,n){n.updateOptions(t.options,!0),nl(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let r=n;const o=t.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=t2);const s=dm(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>nl(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let r=n.currentTimeline.currentTime;const o=t.options&&t.options.delay?dm(t.options.delay):0;t.steps.forEach(s=>{const a=n.createSubContext(t.options);o&&a.delayNextStep(o),nl(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return qA(n.params?YA(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,r=t.options||{},o=r.delay?dm(r.delay):0;o&&(6===n.previousNode.type||0==i&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=t2);let s=i;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{n.currentQueryIndex=c;const d=n.createSubContext(t.options,u);o&&d.delayNextStep(o),u===n.element&&(l=d.currentTimeline),nl(this,t.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,r=n.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1);let l=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const c=n.currentTimeline;l&&c.delayNextStep(l);const d=c.currentTime;nl(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const t2={};class d4{constructor(t,n,i,r,o,s,a,l){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=t2,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new n2(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=dm(i.duration)),null!=i.delay&&(r.delay=dm(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=YA(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return t}createSubContext(t=null,n,i){const r=n||this.element,o=new d4(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=t2,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const r={duration:null!=n?n:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},o=new cXe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(sXe,"."+this._enterClassName)).replace(lXe,"."+this._leaveClassName);let u=this._driver.query(this.element,t,1!=i);0!==i&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&0==a.length&&s.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),a}}class n2{constructor(t,n,i,r){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new n2(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles[t]=n,this._globalTimelineStyles[t]=n,this._styleSummary[t]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||$d,this._currentKeyframe[n]=$d}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,r){n&&(this._previousKeyframe.easing=n);const o=r&&r.params||{},s=function dXe(e,t){const n={};let i;return e.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(o=>{n[o]=$d})):pp(r,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(a=>{const l=YA(s[a],o,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:$d),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const n=this._localTimelineStyles[t];this._pendingStyles[t]=n,this._updateStyle(t,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(n=>{const i=this._styleSummary[n],r=t._styleSummary[n];(!i||r.time>i.time)&&this._updateStyle(n,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const u=pp(a,!0);Object.keys(u).forEach(c=>{const d=u[c];"!"==d?t.add(c):d==$d&&n.add(c)}),i||(u.offset=l/this.duration),r.push(u)});const o=t.size?KA(t.values()):[],s=n.size?KA(n.values()):[];if(i){const a=r[0],l=by(a);a.offset=0,l.offset=1,r=[a,l]}return u4(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class cXe extends n2{constructor(t,n,i,r,o,s,a=!1){super(t,n,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const o=[],s=i+n,a=n/s,l=pp(t[0],!1);l.offset=0,o.push(l);const u=pp(t[0],!1);u.offset=yle(a),o.push(u);const c=t.length-1;for(let d=1;d<=c;d++){let f=pp(t[d],!1);f.offset=yle((n+f.offset*i)/s),o.push(f)}i=s,n=0,r="",t=o}return u4(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function yle(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class f4{}class fXe extends f4{normalizePropertyName(t,n){return s4(t)}normalizeStyleValue(t,n,i,r){let o="";const s=i.toString().trim();if(hXe[n]&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${t}:${i}`)}return s+o}}const hXe=(()=>function pXe(e){const t={};return e.forEach(n=>t[n]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function vle(e,t,n,i,r,o,s,a,l,u,c,d,f){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:f}}const h4={};class ble{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,r){return function gXe(e,t,n,i,r){return e.some(o=>o(t,n,i,r))}(this.ast.matchers,t,n,i,r)}buildStyles(t,n,i){const r=this._stateStyles["*"],o=this._stateStyles[t],s=r?r.buildStyles(n,i):{};return o?o.buildStyles(n,i):s}build(t,n,i,r,o,s,a,l,u,c){const d=[],f=this.ast.options&&this.ast.options.params||h4,p=this.buildStyles(i,a&&a.params||h4,d),m=l&&l.params||h4,_=this.buildStyles(r,m,d),b=new Set,v=new Map,D=new Map,A="void"===r,I={params:Object.assign(Object.assign({},f),m)},L=c?[]:c4(t,n,this.ast.animation,o,s,p,_,I,u,d);let k=0;if(L.forEach(q=>{k=Math.max(q.duration+q.delay,k)}),d.length)return vle(n,this._triggerName,i,r,A,p,_,[],[],v,D,k,d);L.forEach(q=>{const W=q.element,X=tl(v,W,{});q.preStyleProps.forEach(ae=>X[ae]=!0);const oe=tl(D,W,{});q.postStyleProps.forEach(ae=>oe[ae]=!0),W!==n&&b.add(W)});const B=KA(b.values());return vle(n,this._triggerName,i,r,A,p,_,L,B,v,D,k)}}class mXe{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i={},r=by(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!=s&&(r[o]=s)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const s=o;Object.keys(s).forEach(a=>{let l=s[a];l.length>1&&(l=YA(l,r,n));const u=this.normalizer.normalizePropertyName(a,n);l=this.normalizer.normalizeStyleValue(a,u,l,n),i[u]=l})}}),i}}class yXe{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states={},n.states.forEach(r=>{this.states[r.name]=new mXe(r.style,r.options&&r.options.params||{},i)}),wle(this.states,"true","1"),wle(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new ble(t,r,this.states))}),this.fallbackTransition=function vXe(e,t,n){return new ble(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,r){return this.transitionFactories.find(s=>s.match(t,n,i,r))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function wle(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const bXe=new e2;class wXe{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,n){const i=[],r=a4(this._driver,n,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[t]=r}_buildPlayer(t,n,i){const r=t.element,o=ele(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const r=[],o=this._animations[t];let s;const a=new Map;if(o?(s=c4(this._driver,n,o,n4,zA,{},{},i,bXe,r),s.forEach(c=>{const d=tl(a,c.element,{});c.postStyleProps.forEach(f=>d[f]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((c,d)=>{Object.keys(c).forEach(f=>{c[f]=this._driver.computeStyle(d,f,$d)})});const u=hp(s.map(c=>{const d=a.get(c.element);return this._buildPlayer(c,{},d)}));return this._playersById[t]=u,u.onDestroy(()=>this.destroy(t)),this.players.push(u),u}destroy(t){const n=this._getPlayer(t);n.destroy(),delete this._playersById[t];const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById[t];if(!n)throw new Error(`Unable to find the timeline player referenced by ${t}`);return n}listen(t,n,i,r){const o=Z8(n,"","","");return J8(this._getPlayer(t),i,o,r),()=>{}}command(t,n,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,n,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Ele="ng-animate-queued",p4="ng-animate-disabled",xXe=[],Cle={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},TXe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Bl="__ng_removed";class g4{constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function MXe(e){return null!=e?e:null}(i?t.value:t),i){const o=by(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const Hw="void",m4=new g4(Hw);class AXe{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,$l(n,this._hostClassName)}listen(t,n,i,r){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${n}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if(!function kXe(e){return"start"==e||"done"==e}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${n}" is not supported!`);const o=tl(this._elementListeners,t,[]),s={name:n,phase:i,callback:r};o.push(s);const a=tl(this._engine.statesByElement,t,{});return a.hasOwnProperty(n)||($l(t,GA),$l(t,GA+"-"+n),a[n]=m4),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers[n]||delete a[n]})}}register(t,n){return!this._triggers[t]&&(this._triggers[t]=n,!0)}_getTrigger(t){const n=this._triggers[t];if(!n)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return n}trigger(t,n,i,r=!0){const o=this._getTrigger(n),s=new _4(this.id,n,t);let a=this._engine.statesByElement.get(t);a||($l(t,GA),$l(t,GA+"-"+n),this._engine.statesByElement.set(t,a={}));let l=a[n];const u=new g4(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a[n]=u,l||(l=m4),u.value!==Hw&&l.value===u.value){if(!function PXe(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const o=n[r];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(l.params,u.params)){const m=[],_=o.matchStyles(l.value,l.params,m),b=o.matchStyles(u.value,u.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{fm(t,_),id(t,b)})}return}const f=tl(this._engine.playersByElement,t,[]);f.forEach(m=>{m.namespaceId==this.id&&m.triggerName==n&&m.queued&&m.destroy()});let h=o.matchTransition(l.value,u.value,t,u.params),p=!1;if(!h){if(!r)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:h,fromState:l,toState:u,player:s,isFallbackTransition:p}),p||($l(t,Ele),s.onStart(()=>{wy(t,Ele)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);const _=this._engine.playersByElement.get(t);if(_){let b=_.indexOf(s);b>=0&&_.splice(b,1)}}),this.players.push(s),f.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((n,i)=>{delete n[t]}),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,WA,!0);i.forEach(r=>{if(r[Bl])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,n,i,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(Object.keys(o).forEach(l=>{if(s.set(l,o[l].value),this._triggers[l]){const u=this.trigger(t,l,Hw,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,s),i&&hp(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const r=new Set;n.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers[s].fallbackTransition,u=i[s]||m4,c=new g4(Hw),d=new _4(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:u,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,n);else{const o=t[Bl];(!o||o===Cle)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){$l(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=Z8(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,J8(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class OXe{constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new AXe(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let o=i;o>=0;o--)if(this.driver.containsElement(this._namespaceList[o].hostElement,n)){this._namespaceList.splice(o+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let r=this._namespaceLookup[t];r&&r.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let o=0;o<r.length;o++){const s=i[r[o]].namespaceId;if(s){const a=this._fetchNamespace(s);a&&n.add(a)}}}return n}trigger(t,n,i,r){if(r2(n)){const o=this._fetchNamespace(t);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(t,n,i,r){if(!r2(n))return;const o=n[Bl];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),$l(t,p4)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),wy(t,p4))}removeNode(t,n,i,r){if(r2(n)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r),i){const s=this.namespacesByHostElement.get(n);s&&s.id!==t&&s.removeNode(n,r)}}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,i,r,o){this.collectedLeaveElements.push(n),n[Bl]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,n,i,r,o){return r2(n)?this._fetchNamespace(t).listen(n,i,r,o):()=>{}}_buildInstruction(t,n,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,n,o)}destroyInnerAnimations(t){let n=this.driver.query(t,WA,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,i4,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return hp(this.players).onDone(()=>t());t()})}processLeaveNode(t){var n;const i=t[Bl];if(i&&i.setForRemoval){if(t[Bl]=Cle,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(n=t.classList)||void 0===n?void 0:n.contains(p4))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)$l(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?hp(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,n){const i=new e2,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(te=>{c.add(te);const de=this.driver.query(te,".ng-animate-queued",!0);for(let pe=0;pe<de.length;pe++)c.add(de[pe])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=xle(f,this.collectedEnterElements),p=new Map;let m=0;h.forEach((te,de)=>{const pe=n4+m++;p.set(de,pe),te.forEach(Re=>$l(Re,pe))});const _=[],b=new Set,v=new Set;for(let te=0;te<this.collectedLeaveElements.length;te++){const de=this.collectedLeaveElements[te],pe=de[Bl];pe&&pe.setForRemoval&&(_.push(de),b.add(de),pe.hasAnimation?this.driver.query(de,".ng-star-inserted",!0).forEach(Re=>b.add(Re)):v.add(de))}const D=new Map,A=xle(f,Array.from(b));A.forEach((te,de)=>{const pe=zA+m++;D.set(de,pe),te.forEach(Re=>$l(Re,pe))}),t.push(()=>{h.forEach((te,de)=>{const pe=p.get(de);te.forEach(Re=>wy(Re,pe))}),A.forEach((te,de)=>{const pe=D.get(de);te.forEach(Re=>wy(Re,pe))}),_.forEach(te=>{this.processLeaveNode(te)})});const I=[],L=[];for(let te=this._namespaceList.length-1;te>=0;te--)this._namespaceList[te].drainQueuedTransitions(n).forEach(pe=>{const Re=pe.player,rt=pe.element;if(I.push(Re),this.collectedEnterElements.length){const Oi=rt[Bl];if(Oi&&Oi.setForMove){if(Oi.previousTriggersValues&&Oi.previousTriggersValues.has(pe.triggerName)){const ro=Oi.previousTriggersValues.get(pe.triggerName),qe=this.statesByElement.get(pe.element);qe&&qe[pe.triggerName]&&(qe[pe.triggerName].value=ro)}return void Re.destroy()}}const Xt=!d||!this.driver.containsElement(d,rt),$t=D.get(rt),Zn=p.get(rt),kt=this._buildInstruction(pe,i,Zn,$t,Xt);if(kt.errors&&kt.errors.length)return void L.push(kt);if(Xt)return Re.onStart(()=>fm(rt,kt.fromStyles)),Re.onDestroy(()=>id(rt,kt.toStyles)),void r.push(Re);if(pe.isFallbackTransition)return Re.onStart(()=>fm(rt,kt.fromStyles)),Re.onDestroy(()=>id(rt,kt.toStyles)),void r.push(Re);const qi=[];kt.timelines.forEach(Oi=>{Oi.stretchStartingKeyframe=!0,this.disabledNodes.has(Oi.element)||qi.push(Oi)}),kt.timelines=qi,i.append(rt,kt.timelines),s.push({instruction:kt,player:Re,element:rt}),kt.queriedElements.forEach(Oi=>tl(a,Oi,[]).push(Re)),kt.preStyleProps.forEach((Oi,ro)=>{const qe=Object.keys(Oi);if(qe.length){let Et=l.get(ro);Et||l.set(ro,Et=new Set),qe.forEach(Zt=>Et.add(Zt))}}),kt.postStyleProps.forEach((Oi,ro)=>{const qe=Object.keys(Oi);let Et=u.get(ro);Et||u.set(ro,Et=new Set),qe.forEach(Zt=>Et.add(Zt))})});if(L.length){const te=[];L.forEach(de=>{te.push(`@${de.triggerName} has failed due to:\n`),de.errors.forEach(pe=>te.push(`- ${pe}\n`))}),I.forEach(de=>de.destroy()),this.reportError(te)}const k=new Map,B=new Map;s.forEach(te=>{const de=te.element;i.has(de)&&(B.set(de,de),this._beforeAnimationBuild(te.player.namespaceId,te.instruction,k))}),r.forEach(te=>{const de=te.element;this._getPreviousPlayers(de,!1,te.namespaceId,te.triggerName,null).forEach(Re=>{tl(k,de,[]).push(Re),Re.destroy()})});const q=_.filter(te=>Ale(te,l,u)),W=new Map;Sle(W,this.driver,v,u,$d).forEach(te=>{Ale(te,l,u)&&q.push(te)});const oe=new Map;h.forEach((te,de)=>{Sle(oe,this.driver,new Set(te),l,"!")}),q.forEach(te=>{const de=W.get(te),pe=oe.get(te);W.set(te,Object.assign(Object.assign({},de),pe))});const ae=[],Se=[],ie={};s.forEach(te=>{const{element:de,player:pe,instruction:Re}=te;if(i.has(de)){if(c.has(de))return pe.onDestroy(()=>id(de,Re.toStyles)),pe.disabled=!0,pe.overrideTotalTime(Re.totalTime),void r.push(pe);let rt=ie;if(B.size>1){let $t=de;const Zn=[];for(;$t=$t.parentNode;){const kt=B.get($t);if(kt){rt=kt;break}Zn.push($t)}Zn.forEach(kt=>B.set(kt,rt))}const Xt=this._buildAnimation(pe.namespaceId,Re,k,o,oe,W);if(pe.setRealPlayer(Xt),rt===ie)ae.push(pe);else{const $t=this.playersByElement.get(rt);$t&&$t.length&&(pe.parentPlayer=hp($t)),r.push(pe)}}else fm(de,Re.fromStyles),pe.onDestroy(()=>id(de,Re.toStyles)),Se.push(pe),c.has(de)&&r.push(pe)}),Se.forEach(te=>{const de=o.get(te.element);if(de&&de.length){const pe=hp(de);te.setRealPlayer(pe)}}),r.forEach(te=>{te.parentPlayer?te.syncPlayerEvents(te.parentPlayer):te.destroy()});for(let te=0;te<_.length;te++){const de=_[te],pe=de[Bl];if(wy(de,zA),pe&&pe.hasAnimation)continue;let Re=[];if(a.size){let Xt=a.get(de);Xt&&Xt.length&&Re.push(...Xt);let $t=this.driver.query(de,i4,!0);for(let Zn=0;Zn<$t.length;Zn++){let kt=a.get($t[Zn]);kt&&kt.length&&Re.push(...kt)}}const rt=Re.filter(Xt=>!Xt.destroyed);rt.length?IXe(this,de,rt):this.processLeaveNode(de)}return _.length=0,ae.forEach(te=>{this.players.push(te),te.onDone(()=>{te.destroy();const de=this.players.indexOf(te);this.players.splice(de,1)}),te.play()}),ae}elementContainsData(t,n){let i=!1;const r=n[Bl];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,r,o){let s=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==Hw;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,n,i){const o=n.element,s=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const u=l.element,c=u!==o,d=tl(i,u,[]);this._getPreviousPlayers(u,c,s,a,n.toState).forEach(h=>{const p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}fm(o,n.fromStyles)}_buildAnimation(t,n,i,r,o,s){const a=n.triggerName,l=n.element,u=[],c=new Set,d=new Set,f=n.timelines.map(p=>{const m=p.element;c.add(m);const _=m[Bl];if(_&&_.removedBeforeQueried)return new zv(p.duration,p.delay);const b=m!==l,v=function RXe(e){const t=[];return Tle(e,t),t}((i.get(m)||xXe).map(k=>k.getRealPlayer())).filter(k=>!!k.element&&k.element===m),D=o.get(m),A=s.get(m),I=ele(0,this._normalizer,0,p.keyframes,D,A),L=this._buildPlayer(p,I,v);if(p.subTimeline&&r&&d.add(m),b){const k=new _4(t,a,m);k.setRealPlayer(L),u.push(k)}return L});u.forEach(p=>{tl(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function NXe(e,t,n){let i;if(e instanceof Map){if(i=e.get(t),i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&e.delete(t)}}else if(i=e[t],i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&delete e[t]}return i}(this.playersByQueriedElement,p.element,p))}),c.forEach(p=>$l(p,ule));const h=hp(f);return h.onDestroy(()=>{c.forEach(p=>wy(p,ule)),id(l,n.toStyles)}),d.forEach(p=>{tl(r,p,[]).push(h)}),h}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new zv(t.duration,t.delay)}}class _4{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new zv,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(i=>J8(t,n,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){tl(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function r2(e){return e&&1===e.nodeType}function Dle(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function Sle(e,t,n,i,r){const o=[];n.forEach(l=>o.push(Dle(l)));const s=[];i.forEach((l,u)=>{const c={};l.forEach(d=>{const f=c[d]=t.computeStyle(u,d,r);(!f||0==f.length)&&(u[Bl]=TXe,s.push(u))}),e.set(u,c)});let a=0;return n.forEach(l=>Dle(l,o[a++])),s}function xle(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const u=a.parentNode;return l=n.has(u)?u:r.has(u)?1:s(u),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&n.get(l).push(a)}),n}function $l(e,t){var n;null===(n=e.classList)||void 0===n||n.add(t)}function wy(e,t){var n;null===(n=e.classList)||void 0===n||n.remove(t)}function IXe(e,t,n){hp(n).onDone(()=>e.processLeaveNode(t))}function Tle(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof TH?Tle(i.players,t):t.push(i)}}function Ale(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(o=>r.add(o)):t.set(e,i),n.delete(e),!0}class o2{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new OXe(t,n,i),this._timelineEngine=new wXe(t,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,n,i,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],u=a4(this._driver,o,l);if(l.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function _Xe(e,t,n){return new yXe(e,t,n)}(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,r){this._transitionEngine.insertNode(t,n,i,r)}onRemove(t,n,i,r){this._transitionEngine.removeNode(t,n,r||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,r){if("@"==i.charAt(0)){const[o,s]=tle(i);this._timelineEngine.command(o,n,s,r)}else this._transitionEngine.trigger(t,n,i,r)}listen(t,n,i,r,o){if("@"==i.charAt(0)){const[s,a]=tle(i);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(t,n,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let LXe=(()=>{class e{constructor(n,i,r){this._element=n,this._startStyles=i,this._endStyles=r,this._state=0;let o=e.initialStylesByElement.get(n);o||e.initialStylesByElement.set(n,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&id(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(id(this._element,this._initialStyles),this._endStyles&&(id(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(fm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fm(this._element,this._endStyles),this._endStyles=null),id(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function y4(e){let t=null;const n=Object.keys(e);for(let i=0;i<n.length;i++){const r=n[i];jXe(r)&&(t=t||{},t[r]=e[r])}return t}function jXe(e){return"display"===e||"position"===e}class Ole{constructor(t,n,i,r){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,n,i){return t.animate(n,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const n=this._finalKeyframe;Object.keys(n).forEach(i=>{"offset"!=i&&(t[i]=this._finished?n[i]:ple(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class BXe{validateStyleProperty(t){return rle(t)}matchesElement(t,n){return!1}containsElement(t,n){return ole(t,n)}query(t,n,i){return sle(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}animate(t,n,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const u={},c=s.filter(f=>f instanceof Ole);(function WKe(e,t){return 0===e||0===t})(i,r)&&c.forEach(f=>{let h=f.currentSnapshot;Object.keys(h).forEach(p=>u[p]=h[p])}),n=function qKe(e,t,n){const i=Object.keys(n);if(i.length&&t.length){let o=t[0],s=[];if(i.forEach(a=>{o.hasOwnProperty(a)||s.push(a),o[a]=n[a]}),s.length)for(var r=1;r<t.length;r++){let a=t[r];s.forEach(function(l){a[l]=ple(e,l)})}}return t}(t,n=n.map(f=>pp(f,!1)),u);const d=function FXe(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=y4(t[0]),t.length>1&&(i=y4(t[t.length-1]))):t&&(n=y4(t)),n||i?new LXe(e,n,i):null}(t,n);return new Ole(t,n,l,d)}}let $Xe=(()=>{class e extends DH{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:ci.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(n)?SH(n):n;return Nle(this._renderer,null,i,"register",[r]),new VXe(i,this._renderer)}}return e.\u0275fac=function(n){return new(n||e)(ze(c0),ze(Ui))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class VXe extends class Bve{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new HXe(this._id,t,n||{},this._renderer)}}class HXe{constructor(t,n,i,r){this.id=t,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return Nle(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,n;return null!==(n=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:0}}function Nle(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}const Mle="@.disabled";let UXe=(()=>{class e{constructor(n,i,r){this.delegate=n,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=null==s?void 0:s.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(n,i){const o=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let c=this._rendererCache.get(o);return c||(c=new kle("",o,this.engine),this._rendererCache.set(o,c)),c}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(s,a,n,c.name,c)};return i.data.animation.forEach(l),new zXe(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,r){n>=0&&n<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(n){return new(n||e)(ze(c0),ze(o2),ze(gi))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class kle{constructor(t,n,i){this.namespaceId=t,this.delegate=n,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>n.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,r=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,r)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==Mle?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class zXe extends kle{constructor(t,n,i,r){super(n,i,r),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==Mle?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.substr(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const r=function GXe(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let o=n.substr(1),s="";return"@"!=o.charAt(0)&&([o,s]=function WXe(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,n,i)}}let qXe=(()=>{class e extends o2{constructor(n,i,r){super(n.body,i,r)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(n){return new(n||e)(ze(Ui),ze(t4),ze(f4))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const Ile=new nn("AnimationModuleType"),Rle=[{provide:DH,useClass:$Xe},{provide:f4,useFactory:function YXe(){return new fXe}},{provide:o2,useClass:qXe},{provide:c0,useFactory:function KXe(e,t,n){return new UXe(e,t,n)},deps:[sC,o2,gi]}],Ple=[{provide:t4,useFactory:()=>new BXe},{provide:Ile,useValue:"BrowserAnimations"},...Rle],XXe=[{provide:t4,useClass:ale},{provide:Ile,useValue:"NoopAnimations"},...Rle];let JXe=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?XXe:Ple}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=un({providers:Ple,imports:[HN]}),e})(),QXe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=cn({type:e,bootstrap:[PKe]}),e.\u0275inj=un({providers:[D0,FKe],imports:[[HM,HN,NKe,rKe,gM,TEe,JXe]]}),e})();(function Gge(){D7=!1})(),u_e().bootstrapModule(QXe).catch(e=>console.error(e))},467:function(oo,so,Le){!function(yt,Ye,yn){"use strict";function Gt(ne){return ne&&"object"==typeof ne&&"default"in ne?ne:{default:ne}}var N=Gt(Ye),wn=Gt(yn);function ln(ne,K){for(var V=0;V<K.length;V++){var E=K[V];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(ne,E.key,E)}}function En(ne,K,V){return K&&ln(ne.prototype,K),V&&ln(ne,V),ne}function Wt(){return Wt=Object.assign||function(ne){for(var K=1;K<arguments.length;K++){var V=arguments[K];for(var E in V)Object.prototype.hasOwnProperty.call(V,E)&&(ne[E]=V[E])}return ne},Wt.apply(this,arguments)}function Ut(ne,K){ne.prototype=Object.create(K.prototype),ne.prototype.constructor=ne,Vt(ne,K)}function Vt(ne,K){return(Vt=Object.setPrototypeOf||function(E,F){return E.__proto__=F,E})(ne,K)}var ei="transitionend";function Yi(ne){var K=this,V=!1;return N.default(this).one(we.TRANSITION_END,function(){V=!0}),setTimeout(function(){V||we.triggerTransitionEnd(K)},ne),this}var we={TRANSITION_END:"bsTransitionEnd",getUID:function(K){do{K+=~~(1e6*Math.random())}while(document.getElementById(K));return K},getSelectorFromElement:function(K){var V=K.getAttribute("data-target");if(!V||"#"===V){var E=K.getAttribute("href");V=E&&"#"!==E?E.trim():""}try{return document.querySelector(V)?V:null}catch(F){return null}},getTransitionDurationFromElement:function(K){if(!K)return 0;var V=N.default(K).css("transition-duration"),E=N.default(K).css("transition-delay"),F=parseFloat(V),$=parseFloat(E);return F||$?(V=V.split(",")[0],E=E.split(",")[0],1e3*(parseFloat(V)+parseFloat(E))):0},reflow:function(K){return K.offsetHeight},triggerTransitionEnd:function(K){N.default(K).trigger(ei)},supportsTransitionEnd:function(){return Boolean(ei)},isElement:function(K){return(K[0]||K).nodeType},typeCheckConfig:function(K,V,E){for(var F in E)if(Object.prototype.hasOwnProperty.call(E,F)){var $=E[F],ce=V[F],me=ce&&we.isElement(ce)?"element":null==(ne=ce)?""+ne:{}.toString.call(ne).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp($).test(me))throw new Error(K.toUpperCase()+': Option "'+F+'" provided type "'+me+'" but expected type "'+$+'".')}var ne},findShadowRoot:function(K){if(!document.documentElement.attachShadow)return null;if("function"==typeof K.getRootNode){var V=K.getRootNode();return V instanceof ShadowRoot?V:null}return K instanceof ShadowRoot?K:K.parentNode?we.findShadowRoot(K.parentNode):null},jQueryDetection:function(){if(void 0===N.default)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var K=N.default.fn.jquery.split(" ")[0].split(".");if(K[0]<2&&K[1]<9||1===K[0]&&9===K[1]&&K[2]<1||K[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};we.jQueryDetection(),function $e(){N.default.fn.emulateTransitionEnd=Yi,N.default.event.special[we.TRANSITION_END]=function st(){return{bindType:ei,delegateType:ei,handle:function(K){if(N.default(K.target).is(this))return K.handleObj.handler.apply(this,arguments)}}}()}();var $n="alert",Vn="bs.alert",ao=N.default.fn[$n],_r=function(){function ne(V){this._element=V}var K=ne.prototype;return K.close=function(E){var F=this._element;E&&(F=this._getRootElement(E)),this._triggerCloseEvent(F).isDefaultPrevented()||this._removeElement(F)},K.dispose=function(){N.default.removeData(this._element,Vn),this._element=null},K._getRootElement=function(E){var F=we.getSelectorFromElement(E),$=!1;return F&&($=document.querySelector(F)),$||($=N.default(E).closest(".alert")[0]),$},K._triggerCloseEvent=function(E){var F=N.default.Event("close.bs.alert");return N.default(E).trigger(F),F},K._removeElement=function(E){var F=this;if(N.default(E).removeClass("show"),N.default(E).hasClass("fade")){var $=we.getTransitionDurationFromElement(E);N.default(E).one(we.TRANSITION_END,function(ce){return F._destroyElement(E,ce)}).emulateTransitionEnd($)}else this._destroyElement(E)},K._destroyElement=function(E){N.default(E).detach().trigger("closed.bs.alert").remove()},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this),$=F.data(Vn);$||($=new ne(this),F.data(Vn,$)),"close"===E&&$[E](this)})},ne._handleDismiss=function(E){return function(F){F&&F.preventDefault(),E.close(this)}},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),ne}();N.default(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',_r._handleDismiss(new _r)),N.default.fn[$n]=_r._jQueryInterface,N.default.fn[$n].Constructor=_r,N.default.fn[$n].noConflict=function(){return N.default.fn[$n]=ao,_r._jQueryInterface};var yr="button",Vl="bs.button",rl=N.default.fn[yr],or="active",Ur='[data-toggle^="button"]',lo='input:not([type="hidden"])',ct=function(){function ne(V){this._element=V,this.shouldAvoidTriggerChange=!1}var K=ne.prototype;return K.toggle=function(){var E=!0,F=!0,$=N.default(this._element).closest('[data-toggle="buttons"]')[0];if($){var ce=this._element.querySelector(lo);if(ce){if("radio"===ce.type)if(ce.checked&&this._element.classList.contains(or))E=!1;else{var me=$.querySelector(".active");me&&N.default(me).removeClass(or)}E&&(("checkbox"===ce.type||"radio"===ce.type)&&(ce.checked=!this._element.classList.contains(or)),this.shouldAvoidTriggerChange||N.default(ce).trigger("change")),ce.focus(),F=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(F&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(or)),E&&N.default(this._element).toggleClass(or))},K.dispose=function(){N.default.removeData(this._element,Vl),this._element=null},ne._jQueryInterface=function(E,F){return this.each(function(){var $=N.default(this),ce=$.data(Vl);ce||(ce=new ne(this),$.data(Vl,ce)),ce.shouldAvoidTriggerChange=F,"toggle"===E&&ce[E]()})},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),ne}();N.default(document).on("click.bs.button.data-api",Ur,function(ne){var K=ne.target,V=K;if(N.default(K).hasClass("btn")||(K=N.default(K).closest(".btn")[0]),!K||K.hasAttribute("disabled")||K.classList.contains("disabled"))ne.preventDefault();else{var E=K.querySelector(lo);if(E&&(E.hasAttribute("disabled")||E.classList.contains("disabled")))return void ne.preventDefault();("INPUT"===V.tagName||"LABEL"!==K.tagName)&&ct._jQueryInterface.call(N.default(K),"toggle","INPUT"===V.tagName)}}).on("focus.bs.button.data-api blur.bs.button.data-api",Ur,function(ne){var K=N.default(ne.target).closest(".btn")[0];N.default(K).toggleClass("focus",/^focus(in)?$/.test(ne.type))}),N.default(window).on("load.bs.button.data-api",function(){for(var ne=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),K=0,V=ne.length;K<V;K++){var E=ne[K],F=E.querySelector(lo);F.checked||F.hasAttribute("checked")?E.classList.add(or):E.classList.remove(or)}for(var $=0,ce=(ne=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;$<ce;$++){var me=ne[$];"true"===me.getAttribute("aria-pressed")?me.classList.add(or):me.classList.remove(or)}}),N.default.fn[yr]=ct._jQueryInterface,N.default.fn[yr].Constructor=ct,N.default.fn[yr].noConflict=function(){return N.default.fn[yr]=rl,ct._jQueryInterface};var li="carousel",An="bs.carousel",ft="."+An,gp=N.default.fn[li],So="active",qu="next",Ar="prev",ud="slid"+ft,Ge=".active.carousel-item",Yn={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},vs={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Or={TOUCH:"touch",PEN:"pen"},$i=function(){function ne(V,E){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(E),this._element=V,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var K=ne.prototype;return K.next=function(){this._isSliding||this._slide(qu)},K.nextWhenVisible=function(){var E=N.default(this._element);!document.hidden&&E.is(":visible")&&"hidden"!==E.css("visibility")&&this.next()},K.prev=function(){this._isSliding||this._slide(Ar)},K.pause=function(E){E||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(we.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},K.cycle=function(E){E||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},K.to=function(E){var F=this;this._activeElement=this._element.querySelector(Ge);var $=this._getItemIndex(this._activeElement);if(!(E>this._items.length-1||E<0)){if(this._isSliding)return void N.default(this._element).one(ud,function(){return F.to(E)});if($===E)return this.pause(),void this.cycle();this._slide(E>$?qu:Ar,this._items[E])}},K.dispose=function(){N.default(this._element).off(ft),N.default.removeData(this._element,An),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},K._getConfig=function(E){return E=Wt({},Yn,E),we.typeCheckConfig(li,E,vs),E},K._handleSwipe=function(){var E=Math.abs(this.touchDeltaX);if(!(E<=40)){var F=E/this.touchDeltaX;this.touchDeltaX=0,F>0&&this.prev(),F<0&&this.next()}},K._addEventListeners=function(){var E=this;this._config.keyboard&&N.default(this._element).on("keydown.bs.carousel",function(F){return E._keydown(F)}),"hover"===this._config.pause&&N.default(this._element).on("mouseenter.bs.carousel",function(F){return E.pause(F)}).on("mouseleave.bs.carousel",function(F){return E.cycle(F)}),this._config.touch&&this._addTouchEventListeners()},K._addTouchEventListeners=function(){var E=this;if(this._touchSupported){var F=function(Me){E._pointerEvent&&Or[Me.originalEvent.pointerType.toUpperCase()]?E.touchStartX=Me.originalEvent.clientX:E._pointerEvent||(E.touchStartX=Me.originalEvent.touches[0].clientX)},ce=function(Me){E._pointerEvent&&Or[Me.originalEvent.pointerType.toUpperCase()]&&(E.touchDeltaX=Me.originalEvent.clientX-E.touchStartX),E._handleSwipe(),"hover"===E._config.pause&&(E.pause(),E.touchTimeout&&clearTimeout(E.touchTimeout),E.touchTimeout=setTimeout(function(Nt){return E.cycle(Nt)},500+E._config.interval))};N.default(this._element.querySelectorAll(".carousel-item img")).on("dragstart.bs.carousel",function(me){return me.preventDefault()}),this._pointerEvent?(N.default(this._element).on("pointerdown.bs.carousel",function(me){return F(me)}),N.default(this._element).on("pointerup.bs.carousel",function(me){return ce(me)}),this._element.classList.add("pointer-event")):(N.default(this._element).on("touchstart.bs.carousel",function(me){return F(me)}),N.default(this._element).on("touchmove.bs.carousel",function(me){var Me;E.touchDeltaX=(Me=me).originalEvent.touches&&Me.originalEvent.touches.length>1?0:Me.originalEvent.touches[0].clientX-E.touchStartX}),N.default(this._element).on("touchend.bs.carousel",function(me){return ce(me)}))}},K._keydown=function(E){if(!/input|textarea/i.test(E.target.tagName))switch(E.which){case 37:E.preventDefault(),this.prev();break;case 39:E.preventDefault(),this.next()}},K._getItemIndex=function(E){return this._items=E&&E.parentNode?[].slice.call(E.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(E)},K._getItemByDirection=function(E,F){var $=E===qu,ce=E===Ar,me=this._getItemIndex(F);if((ce&&0===me||$&&me===this._items.length-1)&&!this._config.wrap)return F;var fe=(me+(E===Ar?-1:1))%this._items.length;return-1===fe?this._items[this._items.length-1]:this._items[fe]},K._triggerSlideEvent=function(E,F){var $=this._getItemIndex(E),ce=this._getItemIndex(this._element.querySelector(Ge)),me=N.default.Event("slide.bs.carousel",{relatedTarget:E,direction:F,from:ce,to:$});return N.default(this._element).trigger(me),me},K._setActiveIndicatorElement=function(E){if(this._indicatorsElement){var F=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));N.default(F).removeClass(So);var $=this._indicatorsElement.children[this._getItemIndex(E)];$&&N.default($).addClass(So)}},K._updateInterval=function(){var E=this._activeElement||this._element.querySelector(Ge);if(E){var F=parseInt(E.getAttribute("data-interval"),10);F?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=F):this._config.interval=this._config.defaultInterval||this._config.interval}},K._slide=function(E,F){var fe,At,lr,$=this,ce=this._element.querySelector(Ge),me=this._getItemIndex(ce),Me=F||ce&&this._getItemByDirection(E,ce),Nt=this._getItemIndex(Me),Pn=Boolean(this._interval);if(E===qu?(fe="carousel-item-left",At="carousel-item-next",lr="left"):(fe="carousel-item-right",At="carousel-item-prev",lr="right"),Me&&N.default(Me).hasClass(So))this._isSliding=!1;else if(!this._triggerSlideEvent(Me,lr).isDefaultPrevented()&&ce&&Me){this._isSliding=!0,Pn&&this.pause(),this._setActiveIndicatorElement(Me),this._activeElement=Me;var Ed=N.default.Event(ud,{relatedTarget:Me,direction:lr,from:me,to:Nt});if(N.default(this._element).hasClass("slide")){N.default(Me).addClass(At),we.reflow(Me),N.default(ce).addClass(fe),N.default(Me).addClass(fe);var Cd=we.getTransitionDurationFromElement(ce);N.default(ce).one(we.TRANSITION_END,function(){N.default(Me).removeClass(fe+" "+At).addClass(So),N.default(ce).removeClass(So+" "+At+" "+fe),$._isSliding=!1,setTimeout(function(){return N.default($._element).trigger(Ed)},0)}).emulateTransitionEnd(Cd)}else N.default(ce).removeClass(So),N.default(Me).addClass(So),this._isSliding=!1,N.default(this._element).trigger(Ed);Pn&&this.cycle()}},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this).data(An),$=Wt({},Yn,N.default(this).data());"object"==typeof E&&($=Wt({},$,E));var ce="string"==typeof E?E:$.slide;if(F||(F=new ne(this,$),N.default(this).data(An,F)),"number"==typeof E)F.to(E);else if("string"==typeof ce){if(void 0===F[ce])throw new TypeError('No method named "'+ce+'"');F[ce]()}else $.interval&&$.ride&&(F.pause(),F.cycle())})},ne._dataApiClickHandler=function(E){var F=we.getSelectorFromElement(this);if(F){var $=N.default(F)[0];if($&&N.default($).hasClass("carousel")){var ce=Wt({},N.default($).data(),N.default(this).data()),me=this.getAttribute("data-slide-to");me&&(ce.interval=!1),ne._jQueryInterface.call(N.default($),ce),me&&N.default($).data(An).to(me),E.preventDefault()}}},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return Yn}}]),ne}();N.default(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",$i._dataApiClickHandler),N.default(window).on("load.bs.carousel.data-api",function(){for(var ne=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),K=0,V=ne.length;K<V;K++){var E=N.default(ne[K]);$i._jQueryInterface.call(E,E.data())}}),N.default.fn[li]=$i._jQueryInterface,N.default.fn[li].Constructor=$i,N.default.fn[li].noConflict=function(){return N.default.fn[li]=gp,$i._jQueryInterface};var zr="collapse",bs="bs.collapse",ws=N.default.fn[zr],ql="show",cd="collapse",Yu="collapsing",Ku="collapsed",vp='[data-toggle="collapse"]',Xl={toggle:!0,parent:""},_m={toggle:"boolean",parent:"(string|element)"},fd=function(){function ne(V,E){this._isTransitioning=!1,this._element=V,this._config=this._getConfig(E),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+V.id+'"],[data-toggle="collapse"][data-target="#'+V.id+'"]'));for(var F=[].slice.call(document.querySelectorAll(vp)),$=0,ce=F.length;$<ce;$++){var me=F[$],Me=we.getSelectorFromElement(me),Nt=[].slice.call(document.querySelectorAll(Me)).filter(function(Pn){return Pn===V});null!==Me&&Nt.length>0&&(this._selector=Me,this._triggerArray.push(me))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var K=ne.prototype;return K.toggle=function(){N.default(this._element).hasClass(ql)?this.hide():this.show()},K.show=function(){var F,$,E=this;if(!(this._isTransitioning||N.default(this._element).hasClass(ql)||(this._parent&&0===(F=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(At){return"string"==typeof E._config.parent?At.getAttribute("data-parent")===E._config.parent:At.classList.contains(cd)})).length&&(F=null),F&&($=N.default(F).not(this._selector).data(bs),$&&$._isTransitioning)))){var ce=N.default.Event("show.bs.collapse");if(N.default(this._element).trigger(ce),!ce.isDefaultPrevented()){F&&(ne._jQueryInterface.call(N.default(F).not(this._selector),"hide"),$||N.default(F).data(bs,null));var me=this._getDimension();N.default(this._element).removeClass(cd).addClass(Yu),this._element.style[me]=0,this._triggerArray.length&&N.default(this._triggerArray).removeClass(Ku).attr("aria-expanded",!0),this.setTransitioning(!0);var Pn="scroll"+(me[0].toUpperCase()+me.slice(1)),fe=we.getTransitionDurationFromElement(this._element);N.default(this._element).one(we.TRANSITION_END,function(){N.default(E._element).removeClass(Yu).addClass(cd+" "+ql),E._element.style[me]="",E.setTransitioning(!1),N.default(E._element).trigger("shown.bs.collapse")}).emulateTransitionEnd(fe),this._element.style[me]=this._element[Pn]+"px"}}},K.hide=function(){var E=this;if(!this._isTransitioning&&N.default(this._element).hasClass(ql)){var F=N.default.Event("hide.bs.collapse");if(N.default(this._element).trigger(F),!F.isDefaultPrevented()){var $=this._getDimension();this._element.style[$]=this._element.getBoundingClientRect()[$]+"px",we.reflow(this._element),N.default(this._element).addClass(Yu).removeClass(cd+" "+ql);var ce=this._triggerArray.length;if(ce>0)for(var me=0;me<ce;me++){var Me=this._triggerArray[me],Nt=we.getSelectorFromElement(Me);null!==Nt&&(N.default([].slice.call(document.querySelectorAll(Nt))).hasClass(ql)||N.default(Me).addClass(Ku).attr("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[$]="";var At=we.getTransitionDurationFromElement(this._element);N.default(this._element).one(we.TRANSITION_END,function(){E.setTransitioning(!1),N.default(E._element).removeClass(Yu).addClass(cd).trigger("hidden.bs.collapse")}).emulateTransitionEnd(At)}}},K.setTransitioning=function(E){this._isTransitioning=E},K.dispose=function(){N.default.removeData(this._element,bs),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},K._getConfig=function(E){return(E=Wt({},Xl,E)).toggle=Boolean(E.toggle),we.typeCheckConfig(zr,E,_m),E},K._getDimension=function(){return N.default(this._element).hasClass("width")?"width":"height"},K._getParent=function(){var F,E=this;we.isElement(this._config.parent)?(F=this._config.parent,void 0!==this._config.parent.jquery&&(F=this._config.parent[0])):F=document.querySelector(this._config.parent);var ce=[].slice.call(F.querySelectorAll('[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'));return N.default(ce).each(function(me,Me){E._addAriaAndCollapsedClass(ne._getTargetFromElement(Me),[Me])}),F},K._addAriaAndCollapsedClass=function(E,F){var $=N.default(E).hasClass(ql);F.length&&N.default(F).toggleClass(Ku,!$).attr("aria-expanded",$)},ne._getTargetFromElement=function(E){var F=we.getSelectorFromElement(E);return F?document.querySelector(F):null},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this),$=F.data(bs),ce=Wt({},Xl,F.data(),"object"==typeof E&&E?E:{});if(!$&&ce.toggle&&"string"==typeof E&&/show|hide/.test(E)&&(ce.toggle=!1),$||($=new ne(this,ce),F.data(bs,$)),"string"==typeof E){if(void 0===$[E])throw new TypeError('No method named "'+E+'"');$[E]()}})},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return Xl}}]),ne}();N.default(document).on("click.bs.collapse.data-api",vp,function(ne){"A"===ne.currentTarget.tagName&&ne.preventDefault();var K=N.default(this),V=we.getSelectorFromElement(this),E=[].slice.call(document.querySelectorAll(V));N.default(E).each(function(){var F=N.default(this),ce=F.data(bs)?"toggle":K.data();fd._jQueryInterface.call(F,ce)})}),N.default.fn[zr]=fd._jQueryInterface,N.default.fn[zr].Constructor=fd,N.default.fn[zr].noConflict=function(){return N.default.fn[zr]=ws,fd._jQueryInterface};var wi="dropdown",Vi="bs.dropdown",xo="."+Vi,hd=".data-api",Kn=N.default.fn[wi],Qu=new RegExp("38|40|27"),Tf="disabled",Pt="show",ym="dropdown-menu-right",Sy="hide"+xo,pd="hidden"+xo,bm="click"+xo+hd,ia="keydown"+xo+hd,gd='[data-toggle="dropdown"]',Af=".dropdown-menu",Em={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},lt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},Jl=function(){function ne(V,E){this._element=V,this._popper=null,this._config=this._getConfig(E),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var K=ne.prototype;return K.toggle=function(){if(!this._element.disabled&&!N.default(this._element).hasClass(Tf)){var E=N.default(this._menu).hasClass(Pt);ne._clearMenus(),!E&&this.show(!0)}},K.show=function(E){if(void 0===E&&(E=!1),!(this._element.disabled||N.default(this._element).hasClass(Tf)||N.default(this._menu).hasClass(Pt))){var F={relatedTarget:this._element},$=N.default.Event("show.bs.dropdown",F),ce=ne._getParentFromElement(this._element);if(N.default(ce).trigger($),!$.isDefaultPrevented()){if(!this._inNavbar&&E){if(void 0===wn.default)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var me=this._element;"parent"===this._config.reference?me=ce:we.isElement(this._config.reference)&&(me=this._config.reference,void 0!==this._config.reference.jquery&&(me=this._config.reference[0])),"scrollParent"!==this._config.boundary&&N.default(ce).addClass("position-static"),this._popper=new wn.default(me,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===N.default(ce).closest(".navbar-nav").length&&N.default(document.body).children().on("mouseover",null,N.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),N.default(this._menu).toggleClass(Pt),N.default(ce).toggleClass(Pt).trigger(N.default.Event("shown.bs.dropdown",F))}}},K.hide=function(){if(!this._element.disabled&&!N.default(this._element).hasClass(Tf)&&N.default(this._menu).hasClass(Pt)){var E={relatedTarget:this._element},F=N.default.Event(Sy,E),$=ne._getParentFromElement(this._element);N.default($).trigger(F),!F.isDefaultPrevented()&&(this._popper&&this._popper.destroy(),N.default(this._menu).toggleClass(Pt),N.default($).toggleClass(Pt).trigger(N.default.Event(pd,E)))}},K.dispose=function(){N.default.removeData(this._element,Vi),N.default(this._element).off(xo),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},K.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},K._addEventListeners=function(){var E=this;N.default(this._element).on("click.bs.dropdown",function(F){F.preventDefault(),F.stopPropagation(),E.toggle()})},K._getConfig=function(E){return E=Wt({},this.constructor.Default,N.default(this._element).data(),E),we.typeCheckConfig(wi,E,this.constructor.DefaultType),E},K._getMenuElement=function(){if(!this._menu){var E=ne._getParentFromElement(this._element);E&&(this._menu=E.querySelector(Af))}return this._menu},K._getPlacement=function(){var E=N.default(this._element.parentNode),F="bottom-start";return E.hasClass("dropup")?F=N.default(this._menu).hasClass(ym)?"top-end":"top-start":E.hasClass("dropright")?F="right-start":E.hasClass("dropleft")?F="left-start":N.default(this._menu).hasClass(ym)&&(F="bottom-end"),F},K._detectNavbar=function(){return N.default(this._element).closest(".navbar").length>0},K._getOffset=function(){var E=this,F={};return"function"==typeof this._config.offset?F.fn=function($){return $.offsets=Wt({},$.offsets,E._config.offset($.offsets,E._element)),$}:F.offset=this._config.offset,F},K._getPopperConfig=function(){var E={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(E.modifiers.applyStyle={enabled:!1}),Wt({},E,this._config.popperConfig)},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this).data(Vi);if(F||(F=new ne(this,"object"==typeof E?E:null),N.default(this).data(Vi,F)),"string"==typeof E){if(void 0===F[E])throw new TypeError('No method named "'+E+'"');F[E]()}})},ne._clearMenus=function(E){if(!E||3!==E.which&&("keyup"!==E.type||9===E.which))for(var F=[].slice.call(document.querySelectorAll(gd)),$=0,ce=F.length;$<ce;$++){var me=ne._getParentFromElement(F[$]),Me=N.default(F[$]).data(Vi),Nt={relatedTarget:F[$]};if(E&&"click"===E.type&&(Nt.clickEvent=E),Me){var Pn=Me._menu;if(N.default(me).hasClass(Pt)&&!(E&&("click"===E.type&&/input|textarea/i.test(E.target.tagName)||"keyup"===E.type&&9===E.which)&&N.default.contains(me,E.target))){var fe=N.default.Event(Sy,Nt);N.default(me).trigger(fe),!fe.isDefaultPrevented()&&("ontouchstart"in document.documentElement&&N.default(document.body).children().off("mouseover",null,N.default.noop),F[$].setAttribute("aria-expanded","false"),Me._popper&&Me._popper.destroy(),N.default(Pn).removeClass(Pt),N.default(me).removeClass(Pt).trigger(N.default.Event(pd,Nt)))}}}},ne._getParentFromElement=function(E){var F,$=we.getSelectorFromElement(E);return $&&(F=document.querySelector($)),F||E.parentNode},ne._dataApiKeydownHandler=function(E){if(!(/input|textarea/i.test(E.target.tagName)?32===E.which||27!==E.which&&(40!==E.which&&38!==E.which||N.default(E.target).closest(Af).length):!Qu.test(E.which))&&!this.disabled&&!N.default(this).hasClass(Tf)){var F=ne._getParentFromElement(this),$=N.default(F).hasClass(Pt);if($||27!==E.which){if(E.preventDefault(),E.stopPropagation(),!$||27===E.which||32===E.which)return 27===E.which&&N.default(F.querySelector(gd)).trigger("focus"),void N.default(this).trigger("click");var ce=[].slice.call(F.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(Me){return N.default(Me).is(":visible")});if(0!==ce.length){var me=ce.indexOf(E.target);38===E.which&&me>0&&me--,40===E.which&&me<ce.length-1&&me++,me<0&&(me=0),ce[me].focus()}}}},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return Em}},{key:"DefaultType",get:function(){return lt}}]),ne}();N.default(document).on(ia,gd,Jl._dataApiKeydownHandler).on(ia,Af,Jl._dataApiKeydownHandler).on(bm+" keyup.bs.dropdown.data-api",Jl._clearMenus).on(bm,gd,function(ne){ne.preventDefault(),ne.stopPropagation(),Jl._jQueryInterface.call(N.default(this),"toggle")}).on(bm,".dropdown form",function(ne){ne.stopPropagation()}),N.default.fn[wi]=Jl._jQueryInterface,N.default.fn[wi].Constructor=Jl,N.default.fn[wi].noConflict=function(){return N.default.fn[wi]=Kn,Jl._jQueryInterface};var un="modal",y="bs.modal",w="."+y,O=N.default.fn[un],Y="modal-open",ue="fade",xe="show",se="modal-static",vt="hidden"+w,et="show"+w,ki="focusin"+w,ci="resize"+w,In="click.dismiss"+w,Ft="keydown.dismiss"+w,Cn="mousedown.dismiss"+w,Cs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",vr=".sticky-top",Go={backdrop:!0,keyboard:!0,focus:!0,show:!0},No={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Hi=function(){function ne(V,E){this._config=this._getConfig(E),this._element=V,this._dialog=V.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var K=ne.prototype;return K.toggle=function(E){return this._isShown?this.hide():this.show(E)},K.show=function(E){var F=this;if(!this._isShown&&!this._isTransitioning){var $=N.default.Event(et,{relatedTarget:E});N.default(this._element).trigger($),!$.isDefaultPrevented()&&(this._isShown=!0,N.default(this._element).hasClass(ue)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),N.default(this._element).on(In,'[data-dismiss="modal"]',function(ce){return F.hide(ce)}),N.default(this._dialog).on(Cn,function(){N.default(F._element).one("mouseup.dismiss.bs.modal",function(ce){N.default(ce.target).is(F._element)&&(F._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return F._showElement(E)}))}},K.hide=function(E){var F=this;if(E&&E.preventDefault(),this._isShown&&!this._isTransitioning){var $=N.default.Event("hide.bs.modal");if(N.default(this._element).trigger($),this._isShown&&!$.isDefaultPrevented()){this._isShown=!1;var ce=N.default(this._element).hasClass(ue);if(ce&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),N.default(document).off(ki),N.default(this._element).removeClass(xe),N.default(this._element).off(In),N.default(this._dialog).off(Cn),ce){var me=we.getTransitionDurationFromElement(this._element);N.default(this._element).one(we.TRANSITION_END,function(Me){return F._hideModal(Me)}).emulateTransitionEnd(me)}else this._hideModal()}}},K.dispose=function(){[window,this._element,this._dialog].forEach(function(E){return N.default(E).off(w)}),N.default(document).off(ki),N.default.removeData(this._element,y),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},K.handleUpdate=function(){this._adjustDialog()},K._getConfig=function(E){return E=Wt({},Go,E),we.typeCheckConfig(un,E,No),E},K._triggerBackdropTransition=function(){var E=this,F=N.default.Event("hidePrevented.bs.modal");if(N.default(this._element).trigger(F),!F.isDefaultPrevented()){var $=this._element.scrollHeight>document.documentElement.clientHeight;$||(this._element.style.overflowY="hidden"),this._element.classList.add(se);var ce=we.getTransitionDurationFromElement(this._dialog);N.default(this._element).off(we.TRANSITION_END),N.default(this._element).one(we.TRANSITION_END,function(){E._element.classList.remove(se),$||N.default(E._element).one(we.TRANSITION_END,function(){E._element.style.overflowY=""}).emulateTransitionEnd(E._element,ce)}).emulateTransitionEnd(ce),this._element.focus()}},K._showElement=function(E){var F=this,$=N.default(this._element).hasClass(ue),ce=this._dialog?this._dialog.querySelector(".modal-body"):null;(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),N.default(this._dialog).hasClass("modal-dialog-scrollable")&&ce?ce.scrollTop=0:this._element.scrollTop=0,$&&we.reflow(this._element),N.default(this._element).addClass(xe),this._config.focus&&this._enforceFocus();var me=N.default.Event("shown.bs.modal",{relatedTarget:E}),Me=function(){F._config.focus&&F._element.focus(),F._isTransitioning=!1,N.default(F._element).trigger(me)};if($){var Nt=we.getTransitionDurationFromElement(this._dialog);N.default(this._dialog).one(we.TRANSITION_END,Me).emulateTransitionEnd(Nt)}else Me()},K._enforceFocus=function(){var E=this;N.default(document).off(ki).on(ki,function(F){document!==F.target&&E._element!==F.target&&0===N.default(E._element).has(F.target).length&&E._element.focus()})},K._setEscapeEvent=function(){var E=this;this._isShown?N.default(this._element).on(Ft,function(F){E._config.keyboard&&27===F.which?(F.preventDefault(),E.hide()):!E._config.keyboard&&27===F.which&&E._triggerBackdropTransition()}):this._isShown||N.default(this._element).off(Ft)},K._setResizeEvent=function(){var E=this;this._isShown?N.default(window).on(ci,function(F){return E.handleUpdate(F)}):N.default(window).off(ci)},K._hideModal=function(){var E=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){N.default(document.body).removeClass(Y),E._resetAdjustments(),E._resetScrollbar(),N.default(E._element).trigger(vt)})},K._removeBackdrop=function(){this._backdrop&&(N.default(this._backdrop).remove(),this._backdrop=null)},K._showBackdrop=function(E){var F=this,$=N.default(this._element).hasClass(ue)?ue:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",$&&this._backdrop.classList.add($),N.default(this._backdrop).appendTo(document.body),N.default(this._element).on(In,function(Nt){F._ignoreBackdropClick?F._ignoreBackdropClick=!1:Nt.target===Nt.currentTarget&&("static"===F._config.backdrop?F._triggerBackdropTransition():F.hide())}),$&&we.reflow(this._backdrop),N.default(this._backdrop).addClass(xe),!E)return;if(!$)return void E();var ce=we.getTransitionDurationFromElement(this._backdrop);N.default(this._backdrop).one(we.TRANSITION_END,E).emulateTransitionEnd(ce)}else if(!this._isShown&&this._backdrop){N.default(this._backdrop).removeClass(xe);var me=function(){F._removeBackdrop(),E&&E()};if(N.default(this._element).hasClass(ue)){var Me=we.getTransitionDurationFromElement(this._backdrop);N.default(this._backdrop).one(we.TRANSITION_END,me).emulateTransitionEnd(Me)}else me()}else E&&E()},K._adjustDialog=function(){var E=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&E&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!E&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},K._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},K._checkScrollbar=function(){var E=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(E.left+E.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},K._setScrollbar=function(){var E=this;if(this._isBodyOverflowing){var F=[].slice.call(document.querySelectorAll(Cs)),$=[].slice.call(document.querySelectorAll(vr));N.default(F).each(function(Me,Nt){var Pn=Nt.style.paddingRight,fe=N.default(Nt).css("padding-right");N.default(Nt).data("padding-right",Pn).css("padding-right",parseFloat(fe)+E._scrollbarWidth+"px")}),N.default($).each(function(Me,Nt){var Pn=Nt.style.marginRight,fe=N.default(Nt).css("margin-right");N.default(Nt).data("margin-right",Pn).css("margin-right",parseFloat(fe)-E._scrollbarWidth+"px")});var ce=document.body.style.paddingRight,me=N.default(document.body).css("padding-right");N.default(document.body).data("padding-right",ce).css("padding-right",parseFloat(me)+this._scrollbarWidth+"px")}N.default(document.body).addClass(Y)},K._resetScrollbar=function(){var E=[].slice.call(document.querySelectorAll(Cs));N.default(E).each(function(ce,me){var Me=N.default(me).data("padding-right");N.default(me).removeData("padding-right"),me.style.paddingRight=Me||""});var F=[].slice.call(document.querySelectorAll(""+vr));N.default(F).each(function(ce,me){var Me=N.default(me).data("margin-right");void 0!==Me&&N.default(me).css("margin-right",Me).removeData("margin-right")});var $=N.default(document.body).data("padding-right");N.default(document.body).removeData("padding-right"),document.body.style.paddingRight=$||""},K._getScrollbarWidth=function(){var E=document.createElement("div");E.className="modal-scrollbar-measure",document.body.appendChild(E);var F=E.getBoundingClientRect().width-E.clientWidth;return document.body.removeChild(E),F},ne._jQueryInterface=function(E,F){return this.each(function(){var $=N.default(this).data(y),ce=Wt({},Go,N.default(this).data(),"object"==typeof E&&E?E:{});if($||($=new ne(this,ce),N.default(this).data(y,$)),"string"==typeof E){if(void 0===$[E])throw new TypeError('No method named "'+E+'"');$[E](F)}else ce.show&&$.show(F)})},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return Go}}]),ne}();N.default(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(ne){var V,K=this,E=we.getSelectorFromElement(this);E&&(V=document.querySelector(E));var F=N.default(V).data(y)?"toggle":Wt({},N.default(V).data(),N.default(this).data());("A"===this.tagName||"AREA"===this.tagName)&&ne.preventDefault();var $=N.default(V).one(et,function(ce){ce.isDefaultPrevented()||$.one(vt,function(){N.default(K).is(":visible")&&K.focus()})});Hi._jQueryInterface.call(N.default(V),F,this)}),N.default.fn[un]=Hi._jQueryInterface,N.default.fn[un].Constructor=Hi,N.default.fn[un].noConflict=function(){return N.default.fn[un]=O,Hi._jQueryInterface};var Zu=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Rn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,al=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function md(ne,K,V){if(0===ne.length)return ne;if(V&&"function"==typeof V)return V(ne);for(var F=(new window.DOMParser).parseFromString(ne,"text/html"),$=Object.keys(K),ce=[].slice.call(F.body.querySelectorAll("*")),me=function(At,lr){var Xn=ce[At],Ed=Xn.nodeName.toLowerCase();if(-1===$.indexOf(Xn.nodeName.toLowerCase()))return Xn.parentNode.removeChild(Xn),"continue";var Cd=[].slice.call(Xn.attributes),fl=[].concat(K["*"]||[],K[Ed]||[]);Cd.forEach(function(Tm){(function Dp(ne,K){var V=ne.nodeName.toLowerCase();if(-1!==K.indexOf(V))return-1===Zu.indexOf(V)||Boolean(Rn.test(ne.nodeValue)||al.test(ne.nodeValue));for(var E=K.filter(function(ce){return ce instanceof RegExp}),F=0,$=E.length;F<$;F++)if(E[F].test(V))return!0;return!1})(Tm,fl)||Xn.removeAttribute(Tm.nodeName)})},Me=0,Nt=ce.length;Me<Nt;Me++)me(Me);return F.body.innerHTML}var cn="tooltip",_d="bs.tooltip",Pe="."+_d,Nr=N.default.fn[cn],br="bs-tooltip",ll=new RegExp("(^|\\s)"+br+"\\S+","g"),ra=["sanitize","whiteList","sanitizeFn"],Mr="fade",ul="show",Zl="show",Hn="hover",Ss="focus",en={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},fi={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},tn={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},oa={HIDE:"hide"+Pe,HIDDEN:"hidden"+Pe,SHOW:"show"+Pe,SHOWN:"shown"+Pe,INSERTED:"inserted"+Pe,CLICK:"click"+Pe,FOCUSIN:"focusin"+Pe,FOCUSOUT:"focusout"+Pe,MOUSEENTER:"mouseenter"+Pe,MOUSELEAVE:"mouseleave"+Pe},vn=function(){function ne(V,E){if(void 0===wn.default)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=V,this.config=this._getConfig(E),this.tip=null,this._setListeners()}var K=ne.prototype;return K.enable=function(){this._isEnabled=!0},K.disable=function(){this._isEnabled=!1},K.toggleEnabled=function(){this._isEnabled=!this._isEnabled},K.toggle=function(E){if(this._isEnabled)if(E){var F=this.constructor.DATA_KEY,$=N.default(E.currentTarget).data(F);$||($=new this.constructor(E.currentTarget,this._getDelegateConfig()),N.default(E.currentTarget).data(F,$)),$._activeTrigger.click=!$._activeTrigger.click,$._isWithActiveTrigger()?$._enter(null,$):$._leave(null,$)}else{if(N.default(this.getTipElement()).hasClass(ul))return void this._leave(null,this);this._enter(null,this)}},K.dispose=function(){clearTimeout(this._timeout),N.default.removeData(this.element,this.constructor.DATA_KEY),N.default(this.element).off(this.constructor.EVENT_KEY),N.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&N.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},K.show=function(){var E=this;if("none"===N.default(this.element).css("display"))throw new Error("Please use show on visible elements");var F=N.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){N.default(this.element).trigger(F);var $=we.findShadowRoot(this.element),ce=N.default.contains(null!==$?$:this.element.ownerDocument.documentElement,this.element);if(F.isDefaultPrevented()||!ce)return;var me=this.getTipElement(),Me=we.getUID(this.constructor.NAME);me.setAttribute("id",Me),this.element.setAttribute("aria-describedby",Me),this.setContent(),this.config.animation&&N.default(me).addClass(Mr);var Nt="function"==typeof this.config.placement?this.config.placement.call(this,me,this.element):this.config.placement,Pn=this._getAttachment(Nt);this.addAttachmentClass(Pn);var fe=this._getContainer();N.default(me).data(this.constructor.DATA_KEY,this),N.default.contains(this.element.ownerDocument.documentElement,this.tip)||N.default(me).appendTo(fe),N.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new wn.default(this.element,me,this._getPopperConfig(Pn)),N.default(me).addClass(ul),N.default(me).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&N.default(document.body).children().on("mouseover",null,N.default.noop);var At=function(){E.config.animation&&E._fixTransition();var Ed=E._hoverState;E._hoverState=null,N.default(E.element).trigger(E.constructor.Event.SHOWN),"out"===Ed&&E._leave(null,E)};if(N.default(this.tip).hasClass(Mr)){var lr=we.getTransitionDurationFromElement(this.tip);N.default(this.tip).one(we.TRANSITION_END,At).emulateTransitionEnd(lr)}else At()}},K.hide=function(E){var F=this,$=this.getTipElement(),ce=N.default.Event(this.constructor.Event.HIDE),me=function(){F._hoverState!==Zl&&$.parentNode&&$.parentNode.removeChild($),F._cleanTipClass(),F.element.removeAttribute("aria-describedby"),N.default(F.element).trigger(F.constructor.Event.HIDDEN),null!==F._popper&&F._popper.destroy(),E&&E()};if(N.default(this.element).trigger(ce),!ce.isDefaultPrevented()){if(N.default($).removeClass(ul),"ontouchstart"in document.documentElement&&N.default(document.body).children().off("mouseover",null,N.default.noop),this._activeTrigger.click=!1,this._activeTrigger[Ss]=!1,this._activeTrigger[Hn]=!1,N.default(this.tip).hasClass(Mr)){var Me=we.getTransitionDurationFromElement($);N.default($).one(we.TRANSITION_END,me).emulateTransitionEnd(Me)}else me();this._hoverState=""}},K.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},K.isWithContent=function(){return Boolean(this.getTitle())},K.addAttachmentClass=function(E){N.default(this.getTipElement()).addClass(br+"-"+E)},K.getTipElement=function(){return this.tip=this.tip||N.default(this.config.template)[0],this.tip},K.setContent=function(){var E=this.getTipElement();this.setElementContent(N.default(E.querySelectorAll(".tooltip-inner")),this.getTitle()),N.default(E).removeClass(Mr+" "+ul)},K.setElementContent=function(E,F){"object"!=typeof F||!F.nodeType&&!F.jquery?this.config.html?(this.config.sanitize&&(F=md(F,this.config.whiteList,this.config.sanitizeFn)),E.html(F)):E.text(F):this.config.html?N.default(F).parent().is(E)||E.empty().append(F):E.text(N.default(F).text())},K.getTitle=function(){var E=this.element.getAttribute("data-original-title");return E||(E="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),E},K._getPopperConfig=function(E){var F=this;return Wt({},{placement:E,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(me){me.originalPlacement!==me.placement&&F._handlePopperPlacementChange(me)},onUpdate:function(me){return F._handlePopperPlacementChange(me)}},this.config.popperConfig)},K._getOffset=function(){var E=this,F={};return"function"==typeof this.config.offset?F.fn=function($){return $.offsets=Wt({},$.offsets,E.config.offset($.offsets,E.element)),$}:F.offset=this.config.offset,F},K._getContainer=function(){return!1===this.config.container?document.body:we.isElement(this.config.container)?N.default(this.config.container):N.default(document).find(this.config.container)},K._getAttachment=function(E){return en[E.toUpperCase()]},K._setListeners=function(){var E=this;this.config.trigger.split(" ").forEach(function($){if("click"===$)N.default(E.element).on(E.constructor.Event.CLICK,E.config.selector,function(Me){return E.toggle(Me)});else if("manual"!==$){var ce=$===Hn?E.constructor.Event.MOUSEENTER:E.constructor.Event.FOCUSIN,me=$===Hn?E.constructor.Event.MOUSELEAVE:E.constructor.Event.FOCUSOUT;N.default(E.element).on(ce,E.config.selector,function(Me){return E._enter(Me)}).on(me,E.config.selector,function(Me){return E._leave(Me)})}}),this._hideModalHandler=function(){E.element&&E.hide()},N.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=Wt({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},K._fixTitle=function(){var E=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==E)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},K._enter=function(E,F){var $=this.constructor.DATA_KEY;(F=F||N.default(E.currentTarget).data($))||(F=new this.constructor(E.currentTarget,this._getDelegateConfig()),N.default(E.currentTarget).data($,F)),E&&(F._activeTrigger["focusin"===E.type?Ss:Hn]=!0),N.default(F.getTipElement()).hasClass(ul)||F._hoverState===Zl?F._hoverState=Zl:(clearTimeout(F._timeout),F._hoverState=Zl,F.config.delay&&F.config.delay.show?F._timeout=setTimeout(function(){F._hoverState===Zl&&F.show()},F.config.delay.show):F.show())},K._leave=function(E,F){var $=this.constructor.DATA_KEY;if((F=F||N.default(E.currentTarget).data($))||(F=new this.constructor(E.currentTarget,this._getDelegateConfig()),N.default(E.currentTarget).data($,F)),E&&(F._activeTrigger["focusout"===E.type?Ss:Hn]=!1),!F._isWithActiveTrigger()){if(clearTimeout(F._timeout),F._hoverState="out",!F.config.delay||!F.config.delay.hide)return void F.hide();F._timeout=setTimeout(function(){"out"===F._hoverState&&F.hide()},F.config.delay.hide)}},K._isWithActiveTrigger=function(){for(var E in this._activeTrigger)if(this._activeTrigger[E])return!0;return!1},K._getConfig=function(E){var F=N.default(this.element).data();return Object.keys(F).forEach(function($){-1!==ra.indexOf($)&&delete F[$]}),"number"==typeof(E=Wt({},this.constructor.Default,F,"object"==typeof E&&E?E:{})).delay&&(E.delay={show:E.delay,hide:E.delay}),"number"==typeof E.title&&(E.title=E.title.toString()),"number"==typeof E.content&&(E.content=E.content.toString()),we.typeCheckConfig(cn,E,this.constructor.DefaultType),E.sanitize&&(E.template=md(E.template,E.whiteList,E.sanitizeFn)),E},K._getDelegateConfig=function(){var E={};if(this.config)for(var F in this.config)this.constructor.Default[F]!==this.config[F]&&(E[F]=this.config[F]);return E},K._cleanTipClass=function(){var E=N.default(this.getTipElement()),F=E.attr("class").match(ll);null!==F&&F.length&&E.removeClass(F.join(""))},K._handlePopperPlacementChange=function(E){this.tip=E.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(E.placement))},K._fixTransition=function(){var E=this.getTipElement(),F=this.config.animation;null===E.getAttribute("x-placement")&&(N.default(E).removeClass(Mr),this.config.animation=!1,this.hide(),this.show(),this.config.animation=F)},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this),$=F.data(_d),ce="object"==typeof E&&E;if(($||!/dispose|hide/.test(E))&&($||($=new ne(this,ce),F.data(_d,$)),"string"==typeof E)){if(void 0===$[E])throw new TypeError('No method named "'+E+'"');$[E]()}})},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return fi}},{key:"NAME",get:function(){return cn}},{key:"DATA_KEY",get:function(){return _d}},{key:"Event",get:function(){return oa}},{key:"EVENT_KEY",get:function(){return Pe}},{key:"DefaultType",get:function(){return tn}}]),ne}();N.default.fn[cn]=vn._jQueryInterface,N.default.fn[cn].Constructor=vn,N.default.fn[cn].noConflict=function(){return N.default.fn[cn]=Nr,vn._jQueryInterface};var Ii="popover",Ra="bs.popover",kr="."+Ra,qt=N.default.fn[Ii],ec="bs-popover",Wo=new RegExp("(^|\\s)"+ec+"\\S+","g"),dl=Wt({},vn.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),xs=Wt({},vn.DefaultType,{content:"(string|element|function)"}),Bn={HIDE:"hide"+kr,HIDDEN:"hidden"+kr,SHOW:"show"+kr,SHOWN:"shown"+kr,INSERTED:"inserted"+kr,CLICK:"click"+kr,FOCUSIN:"focusin"+kr,FOCUSOUT:"focusout"+kr,MOUSEENTER:"mouseenter"+kr,MOUSELEAVE:"mouseleave"+kr},tc=function(ne){function K(){return ne.apply(this,arguments)||this}Ut(K,ne);var V=K.prototype;return V.isWithContent=function(){return this.getTitle()||this._getContent()},V.addAttachmentClass=function(F){N.default(this.getTipElement()).addClass(ec+"-"+F)},V.getTipElement=function(){return this.tip=this.tip||N.default(this.config.template)[0],this.tip},V.setContent=function(){var F=N.default(this.getTipElement());this.setElementContent(F.find(".popover-header"),this.getTitle());var $=this._getContent();"function"==typeof $&&($=$.call(this.element)),this.setElementContent(F.find(".popover-body"),$),F.removeClass("fade show")},V._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},V._cleanTipClass=function(){var F=N.default(this.getTipElement()),$=F.attr("class").match(Wo);null!==$&&$.length>0&&F.removeClass($.join(""))},K._jQueryInterface=function(F){return this.each(function(){var $=N.default(this).data(Ra),ce="object"==typeof F?F:null;if(($||!/dispose|hide/.test(F))&&($||($=new K(this,ce),N.default(this).data(Ra,$)),"string"==typeof F)){if(void 0===$[F])throw new TypeError('No method named "'+F+'"');$[F]()}})},En(K,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return dl}},{key:"NAME",get:function(){return Ii}},{key:"DATA_KEY",get:function(){return Ra}},{key:"Event",get:function(){return Bn}},{key:"EVENT_KEY",get:function(){return kr}},{key:"DefaultType",get:function(){return xs}}]),K}(vn);N.default.fn[Ii]=tc._jQueryInterface,N.default.fn[Ii].Constructor=tc,N.default.fn[Ii].noConflict=function(){return N.default.fn[Ii]=qt,tc._jQueryInterface};var Pa="scrollspy",j="bs.scrollspy",H="."+j,_e=N.default.fn[Pa],ve="active",pt="position",on=".nav, .list-group",Un=".nav-link",Ji=".list-group-item",vd={offset:10,method:"auto",target:""},If={offset:"number",method:"string",target:"(string|element)"},Ir=function(){function ne(V,E){var F=this;this._element=V,this._scrollElement="BODY"===V.tagName?window:V,this._config=this._getConfig(E),this._selector=this._config.target+" "+Un+","+this._config.target+" "+Ji+","+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,N.default(this._scrollElement).on("scroll.bs.scrollspy",function($){return F._process($)}),this.refresh(),this._process()}var K=ne.prototype;return K.refresh=function(){var E=this,$="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":pt:this._config.method,ce=$===pt?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(Me){var Nt,Pn=we.getSelectorFromElement(Me);if(Pn&&(Nt=document.querySelector(Pn)),Nt){var fe=Nt.getBoundingClientRect();if(fe.width||fe.height)return[N.default(Nt)[$]().top+ce,Pn]}return null}).filter(function(Me){return Me}).sort(function(Me,Nt){return Me[0]-Nt[0]}).forEach(function(Me){E._offsets.push(Me[0]),E._targets.push(Me[1])})},K.dispose=function(){N.default.removeData(this._element,j),N.default(this._scrollElement).off(H),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},K._getConfig=function(E){if("string"!=typeof(E=Wt({},vd,"object"==typeof E&&E?E:{})).target&&we.isElement(E.target)){var F=N.default(E.target).attr("id");F||(F=we.getUID(Pa),N.default(E.target).attr("id",F)),E.target="#"+F}return we.typeCheckConfig(Pa,E,If),E},K._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},K._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},K._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},K._process=function(){var E=this._getScrollTop()+this._config.offset,F=this._getScrollHeight(),$=this._config.offset+F-this._getOffsetHeight();if(this._scrollHeight!==F&&this.refresh(),E>=$){var ce=this._targets[this._targets.length-1];this._activeTarget!==ce&&this._activate(ce)}else{if(this._activeTarget&&E<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var me=this._offsets.length;me--;)this._activeTarget!==this._targets[me]&&E>=this._offsets[me]&&(void 0===this._offsets[me+1]||E<this._offsets[me+1])&&this._activate(this._targets[me])}},K._activate=function(E){this._activeTarget=E,this._clear();var F=this._selector.split(",").map(function(ce){return ce+'[data-target="'+E+'"],'+ce+'[href="'+E+'"]'}),$=N.default([].slice.call(document.querySelectorAll(F.join(","))));$.hasClass("dropdown-item")?($.closest(".dropdown").find(".dropdown-toggle").addClass(ve),$.addClass(ve)):($.addClass(ve),$.parents(on).prev(Un+", "+Ji).addClass(ve),$.parents(on).prev(".nav-item").children(Un).addClass(ve)),N.default(this._scrollElement).trigger("activate.bs.scrollspy",{relatedTarget:E})},K._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(E){return E.classList.contains(ve)}).forEach(function(E){return E.classList.remove(ve)})},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this).data(j);if(F||(F=new ne(this,"object"==typeof E&&E),N.default(this).data(j,F)),"string"==typeof E){if(void 0===F[E])throw new TypeError('No method named "'+E+'"');F[E]()}})},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return vd}}]),ne}();N.default(window).on("load.bs.scrollspy.data-api",function(){for(var ne=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),V=ne.length;V--;){var E=N.default(ne[V]);Ir._jQueryInterface.call(E,E.data())}}),N.default.fn[Pa]=Ir._jQueryInterface,N.default.fn[Pa].Constructor=Ir,N.default.fn[Pa].noConflict=function(){return N.default.fn[Pa]=_e,Ir._jQueryInterface};var Rf="bs.tab",b4=N.default.fn.tab,Sp="active",Sm=".active",Xw="> li > .active",wd=function(){function ne(V){this._element=V}var K=ne.prototype;return K.show=function(){var E=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&N.default(this._element).hasClass(Sp)||N.default(this._element).hasClass("disabled"))){var F,$,ce=N.default(this._element).closest(".nav, .list-group")[0],me=we.getSelectorFromElement(this._element);if(ce){var Me="UL"===ce.nodeName||"OL"===ce.nodeName?Xw:Sm;$=($=N.default.makeArray(N.default(ce).find(Me)))[$.length-1]}var Nt=N.default.Event("hide.bs.tab",{relatedTarget:this._element}),Pn=N.default.Event("show.bs.tab",{relatedTarget:$});if($&&N.default($).trigger(Nt),N.default(this._element).trigger(Pn),!Pn.isDefaultPrevented()&&!Nt.isDefaultPrevented()){me&&(F=document.querySelector(me)),this._activate(this._element,ce);var fe=function(){var lr=N.default.Event("hidden.bs.tab",{relatedTarget:E._element}),Xn=N.default.Event("shown.bs.tab",{relatedTarget:$});N.default($).trigger(lr),N.default(E._element).trigger(Xn)};F?this._activate(F,F.parentNode,fe):fe()}}},K.dispose=function(){N.default.removeData(this._element,Rf),this._element=null},K._activate=function(E,F,$){var ce=this,Me=(!F||"UL"!==F.nodeName&&"OL"!==F.nodeName?N.default(F).children(Sm):N.default(F).find(Xw))[0],Nt=$&&Me&&N.default(Me).hasClass("fade"),Pn=function(){return ce._transitionComplete(E,Me,$)};if(Me&&Nt){var fe=we.getTransitionDurationFromElement(Me);N.default(Me).removeClass("show").one(we.TRANSITION_END,Pn).emulateTransitionEnd(fe)}else Pn()},K._transitionComplete=function(E,F,$){if(F){N.default(F).removeClass(Sp);var ce=N.default(F.parentNode).find("> .dropdown-menu .active")[0];ce&&N.default(ce).removeClass(Sp),"tab"===F.getAttribute("role")&&F.setAttribute("aria-selected",!1)}N.default(E).addClass(Sp),"tab"===E.getAttribute("role")&&E.setAttribute("aria-selected",!0),we.reflow(E),E.classList.contains("fade")&&E.classList.add("show");var me=E.parentNode;if(me&&"LI"===me.nodeName&&(me=me.parentNode),me&&N.default(me).hasClass("dropdown-menu")){var Me=N.default(E).closest(".dropdown")[0];if(Me){var Nt=[].slice.call(Me.querySelectorAll(".dropdown-toggle"));N.default(Nt).addClass(Sp)}E.setAttribute("aria-expanded",!0)}$&&$()},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this),$=F.data(Rf);if($||($=new ne(this),F.data(Rf,$)),"string"==typeof E){if(void 0===$[E])throw new TypeError('No method named "'+E+'"');$[E]()}})},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),ne}();N.default(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(ne){ne.preventDefault(),wd._jQueryInterface.call(N.default(this),"show")}),N.default.fn.tab=wd._jQueryInterface,N.default.fn.tab.Constructor=wd,N.default.fn.tab.noConflict=function(){return N.default.fn.tab=b4,wd._jQueryInterface};var Pf="toast",Py="bs.toast",hi="."+Py,Jw=N.default.fn[Pf],xp="show",h2="showing",Tp="click.dismiss"+hi,Ly={animation:!0,autohide:!0,delay:500},jy={animation:"boolean",autohide:"boolean",delay:"number"},xm=function(){function ne(V,E){this._element=V,this._config=this._getConfig(E),this._timeout=null,this._setListeners()}var K=ne.prototype;return K.show=function(){var E=this,F=N.default.Event("show.bs.toast");if(N.default(this._element).trigger(F),!F.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var $=function(){E._element.classList.remove(h2),E._element.classList.add(xp),N.default(E._element).trigger("shown.bs.toast"),E._config.autohide&&(E._timeout=setTimeout(function(){E.hide()},E._config.delay))};if(this._element.classList.remove("hide"),we.reflow(this._element),this._element.classList.add(h2),this._config.animation){var ce=we.getTransitionDurationFromElement(this._element);N.default(this._element).one(we.TRANSITION_END,$).emulateTransitionEnd(ce)}else $()}},K.hide=function(){if(this._element.classList.contains(xp)){var E=N.default.Event("hide.bs.toast");N.default(this._element).trigger(E),!E.isDefaultPrevented()&&this._close()}},K.dispose=function(){this._clearTimeout(),this._element.classList.contains(xp)&&this._element.classList.remove(xp),N.default(this._element).off(Tp),N.default.removeData(this._element,Py),this._element=null,this._config=null},K._getConfig=function(E){return E=Wt({},Ly,N.default(this._element).data(),"object"==typeof E&&E?E:{}),we.typeCheckConfig(Pf,E,this.constructor.DefaultType),E},K._setListeners=function(){var E=this;N.default(this._element).on(Tp,'[data-dismiss="toast"]',function(){return E.hide()})},K._close=function(){var E=this,F=function(){E._element.classList.add("hide"),N.default(E._element).trigger("hidden.bs.toast")};if(this._element.classList.remove(xp),this._config.animation){var $=we.getTransitionDurationFromElement(this._element);N.default(this._element).one(we.TRANSITION_END,F).emulateTransitionEnd($)}else F()},K._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},ne._jQueryInterface=function(E){return this.each(function(){var F=N.default(this),$=F.data(Py);if($||($=new ne(this,"object"==typeof E&&E),F.data(Py,$)),"string"==typeof E){if(void 0===$[E])throw new TypeError('No method named "'+E+'"');$[E](this)}})},En(ne,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"DefaultType",get:function(){return jy}},{key:"Default",get:function(){return Ly}}]),ne}();N.default.fn[Pf]=xm._jQueryInterface,N.default.fn[Pf].Constructor=xm,N.default.fn[Pf].noConflict=function(){return N.default.fn[Pf]=Jw,xm._jQueryInterface},yt.Alert=_r,yt.Button=ct,yt.Carousel=$i,yt.Collapse=fd,yt.Dropdown=Jl,yt.Modal=Hi,yt.Popover=tc,yt.Scrollspy=Ir,yt.Tab=wd,yt.Toast=xm,yt.Tooltip=vn,yt.Util=we,Object.defineProperty(yt,"__esModule",{value:!0})}(so,Le(229),Le(483))},259:oo=>{var so=function(){"use strict";function Le(Ut,Vt){return null!=Vt&&Ut instanceof Vt}var yt,Ye,yn;try{yt=Map}catch(Ut){yt=function(){}}try{Ye=Set}catch(Ut){Ye=function(){}}try{yn=Promise}catch(Ut){yn=function(){}}function Gt(Ut,Vt,ei,Tr,ir){"object"==typeof Vt&&(ei=Vt.depth,Tr=Vt.prototype,ir=Vt.includeNonEnumerable,Vt=Vt.circular);var It=[],st=[],Yi="undefined"!=typeof Buffer;return void 0===Vt&&(Vt=!0),void 0===ei&&(ei=1/0),function $e(we,$n){if(null===we)return null;if(0===$n)return we;var Jt,Vn;if("object"!=typeof we)return we;if(Le(we,yt))Jt=new yt;else if(Le(we,Ye))Jt=new Ye;else if(Le(we,yn))Jt=new yn(function(_s,ys){we.then(function(_r){_s($e(_r,$n-1))},function(_r){ys($e(_r,$n-1))})});else if(Gt.__isArray(we))Jt=[];else if(Gt.__isRegExp(we))Jt=new RegExp(we.source,Wt(we)),we.lastIndex&&(Jt.lastIndex=we.lastIndex);else if(Gt.__isDate(we))Jt=new Date(we.getTime());else{if(Yi&&Buffer.isBuffer(we))return Jt=Buffer.allocUnsafe?Buffer.allocUnsafe(we.length):new Buffer(we.length),we.copy(Jt),Jt;Le(we,Error)?Jt=Object.create(we):void 0===Tr?(Vn=Object.getPrototypeOf(we),Jt=Object.create(Vn)):(Jt=Object.create(Tr),Vn=Tr)}if(Vt){var S=It.indexOf(we);if(-1!=S)return st[S];It.push(we),st.push(Jt)}for(var rr in Le(we,yt)&&we.forEach(function(_s,ys){var _r=$e(ys,$n-1),yr=$e(_s,$n-1);Jt.set(_r,yr)}),Le(we,Ye)&&we.forEach(function(_s){var ys=$e(_s,$n-1);Jt.add(ys)}),we){var ao;Vn&&(ao=Object.getOwnPropertyDescriptor(Vn,rr)),(!ao||null!=ao.set)&&(Jt[rr]=$e(we[rr],$n-1))}if(Object.getOwnPropertySymbols){var Ni=Object.getOwnPropertySymbols(we);for(rr=0;rr<Ni.length;rr++){var bi=Ni[rr];(Ki=Object.getOwnPropertyDescriptor(we,bi))&&!Ki.enumerable&&!ir||(Jt[bi]=$e(we[bi],$n-1),Ki.enumerable||Object.defineProperty(Jt,bi,{enumerable:!1}))}}if(ir){var ti=Object.getOwnPropertyNames(we);for(rr=0;rr<ti.length;rr++){var Ki,ms=ti[rr];(Ki=Object.getOwnPropertyDescriptor(we,ms))&&Ki.enumerable||(Jt[ms]=$e(we[ms],$n-1),Object.defineProperty(Jt,ms,{enumerable:!1}))}}return Jt}(Ut,ei)}function N(Ut){return Object.prototype.toString.call(Ut)}function Wt(Ut){var Vt="";return Ut.global&&(Vt+="g"),Ut.ignoreCase&&(Vt+="i"),Ut.multiline&&(Vt+="m"),Vt}return Gt.clonePrototype=function(Vt){if(null===Vt)return null;var ei=function(){};return ei.prototype=Vt,new ei},Gt.__objToStr=N,Gt.__isDate=function wn(Ut){return"object"==typeof Ut&&"[object Date]"===N(Ut)},Gt.__isArray=function ln(Ut){return"object"==typeof Ut&&"[object Array]"===N(Ut)},Gt.__isRegExp=function En(Ut){return"object"==typeof Ut&&"[object RegExp]"===N(Ut)},Gt.__getRegExpFlags=Wt,Gt}();oo.exports&&(oo.exports=so)},559:oo=>{"use strict";oo.exports=function so(Le,yt){if(Le===yt)return!0;if(Le&&yt&&"object"==typeof Le&&"object"==typeof yt){if(Le.constructor!==yt.constructor)return!1;var Ye,yn,Gt;if(Array.isArray(Le)){if((Ye=Le.length)!=yt.length)return!1;for(yn=Ye;0!=yn--;)if(!so(Le[yn],yt[yn]))return!1;return!0}if(Le.constructor===RegExp)return Le.source===yt.source&&Le.flags===yt.flags;if(Le.valueOf!==Object.prototype.valueOf)return Le.valueOf()===yt.valueOf();if(Le.toString!==Object.prototype.toString)return Le.toString()===yt.toString();if((Ye=(Gt=Object.keys(Le)).length)!==Object.keys(yt).length)return!1;for(yn=Ye;0!=yn--;)if(!Object.prototype.hasOwnProperty.call(yt,Gt[yn]))return!1;for(yn=Ye;0!=yn--;){var N=Gt[yn];if(!so(Le[N],yt[N]))return!1}return!0}return Le!=Le&&yt!=yt}},245:oo=>{"use strict";oo.exports=function(so,Le){Le||(Le={}),"function"==typeof Le&&(Le={cmp:Le});var Gt,yt="boolean"==typeof Le.cycles&&Le.cycles,Ye=Le.cmp&&(Gt=Le.cmp,function(N){return function(wn,ln){return Gt({key:wn,value:N[wn]},{key:ln,value:N[ln]})}}),yn=[];return function Gt(N){if(N&&N.toJSON&&"function"==typeof N.toJSON&&(N=N.toJSON()),void 0!==N){if("number"==typeof N)return isFinite(N)?""+N:"null";if("object"!=typeof N)return JSON.stringify(N);var wn,ln;if(Array.isArray(N)){for(ln="[",wn=0;wn<N.length;wn++)wn&&(ln+=","),ln+=Gt(N[wn])||"null";return ln+"]"}if(null===N)return"null";if(-1!==yn.indexOf(N)){if(yt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var En=yn.push(N)-1,Wt=Object.keys(N).sort(Ye&&Ye(N));for(ln="",wn=0;wn<Wt.length;wn++){var Ut=Wt[wn],Vt=Gt(N[Ut]);!Vt||(ln&&(ln+=","),ln+=JSON.stringify(Ut)+":"+Vt)}return yn.splice(En,1),"{"+ln+"}"}}(so)}},229:function(oo,so){var yt;!function(Ye,yn){"use strict";"object"==typeof oo.exports?oo.exports=Ye.document?yn(Ye,!0):function(Gt){if(!Gt.document)throw new Error("jQuery requires a window with a document");return yn(Gt)}:yn(Ye)}("undefined"!=typeof window?window:this,function(Ye,yn){"use strict";var Gt=[],N=Object.getPrototypeOf,wn=Gt.slice,ln=Gt.flat?function(g){return Gt.flat.call(g)}:function(g){return Gt.concat.apply([],g)},En=Gt.push,Wt=Gt.indexOf,Ut={},Vt=Ut.toString,ei=Ut.hasOwnProperty,Tr=ei.toString,ir=Tr.call(Object),It={},st=function(y){return"function"==typeof y&&"number"!=typeof y.nodeType&&"function"!=typeof y.item},Yi=function(y){return null!=y&&y===y.window},$e=Ye.document,we={type:!0,src:!0,nonce:!0,noModule:!0};function $n(g,y,w){var C,O,M=(w=w||$e).createElement("script");if(M.text=g,y)for(C in we)(O=y[C]||y.getAttribute&&y.getAttribute(C))&&M.setAttribute(C,O);w.head.appendChild(M).parentNode.removeChild(M)}function Jt(g){return null==g?g+"":"object"==typeof g||"function"==typeof g?Ut[Vt.call(g)]||"object":typeof g}var S=function(g,y){return new S.fn.init(g,y)};function rr(g){var y=!!g&&"length"in g&&g.length,w=Jt(g);return!st(g)&&!Yi(g)&&("array"===w||0===y||"number"==typeof y&&y>0&&y-1 in g)}S.fn=S.prototype={jquery:"3.6.0",constructor:S,length:0,toArray:function(){return wn.call(this)},get:function(g){return null==g?wn.call(this):g<0?this[g+this.length]:this[g]},pushStack:function(g){var y=S.merge(this.constructor(),g);return y.prevObject=this,y},each:function(g){return S.each(this,g)},map:function(g){return this.pushStack(S.map(this,function(y,w){return g.call(y,w,y)}))},slice:function(){return this.pushStack(wn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(g,y){return(y+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(g,y){return y%2}))},eq:function(g){var y=this.length,w=+g+(g<0?y:0);return this.pushStack(w>=0&&w<y?[this[w]]:[])},end:function(){return this.prevObject||this.constructor()},push:En,sort:Gt.sort,splice:Gt.splice},S.extend=S.fn.extend=function(){var g,y,w,C,O,M,R=arguments[0]||{},U=1,z=arguments.length,Y=!1;for("boolean"==typeof R&&(Y=R,R=arguments[U]||{},U++),"object"!=typeof R&&!st(R)&&(R={}),U===z&&(R=this,U--);U<z;U++)if(null!=(g=arguments[U]))for(y in g)C=g[y],"__proto__"!==y&&R!==C&&(Y&&C&&(S.isPlainObject(C)||(O=Array.isArray(C)))?(w=R[y],M=O&&!Array.isArray(w)?[]:O||S.isPlainObject(w)?w:{},O=!1,R[y]=S.extend(Y,M,C)):void 0!==C&&(R[y]=C));return R},S.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(g){throw new Error(g)},noop:function(){},isPlainObject:function(g){var y,w;return!(!g||"[object Object]"!==Vt.call(g)||(y=N(g))&&("function"!=typeof(w=ei.call(y,"constructor")&&y.constructor)||Tr.call(w)!==ir))},isEmptyObject:function(g){var y;for(y in g)return!1;return!0},globalEval:function(g,y,w){$n(g,{nonce:y&&y.nonce},w)},each:function(g,y){var w,C=0;if(rr(g))for(w=g.length;C<w&&!1!==y.call(g[C],C,g[C]);C++);else for(C in g)if(!1===y.call(g[C],C,g[C]))break;return g},makeArray:function(g,y){var w=y||[];return null!=g&&(rr(Object(g))?S.merge(w,"string"==typeof g?[g]:g):En.call(w,g)),w},inArray:function(g,y,w){return null==y?-1:Wt.call(y,g,w)},merge:function(g,y){for(var w=+y.length,C=0,O=g.length;C<w;C++)g[O++]=y[C];return g.length=O,g},grep:function(g,y,w){for(var O=[],M=0,R=g.length,U=!w;M<R;M++)!y(g[M],M)!==U&&O.push(g[M]);return O},map:function(g,y,w){var C,O,M=0,R=[];if(rr(g))for(C=g.length;M<C;M++)null!=(O=y(g[M],M,w))&&R.push(O);else for(M in g)null!=(O=y(g[M],M,w))&&R.push(O);return ln(R)},guid:1,support:It}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=Gt[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(g,y){Ut["[object "+y+"]"]=y.toLowerCase()});var ao=function(g){var y,w,C,O,M,R,U,z,Y,ue,xe,se,ge,dt,vt,et,sr,ki,ci,In="sizzle"+1*new Date,Ft=g.document,co=0,Cn=0,Ct=oa(),Nf=oa(),Cp=oa(),ar=oa(),Dn=function(j,H){return j===H&&(xe=!0),0},Cs={}.hasOwnProperty,vr=[],Go=vr.pop,No=vr.push,Hi=vr.push,Zu=vr.slice,Ql=function(j,H){for(var J=0,_e=j.length;J<_e;J++)if(j[J]===H)return J;return-1},di="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Rn="[\\x20\\t\\r\\n\\f]",al="(?:\\\\[\\da-fA-F]{1,6}"+Rn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Dp="\\["+Rn+"*("+al+")(?:"+Rn+"*([*^$|!~]?=)"+Rn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+al+"))|)"+Rn+"*\\]",md=":("+al+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Dp+")*)|.*)\\)|)",cn=new RegExp(Rn+"+","g"),Mf=new RegExp("^"+Rn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Rn+"+$","g"),_d=new RegExp("^"+Rn+"*,"+Rn+"*"),Pe=new RegExp("^"+Rn+"*([>+~]|"+Rn+")"+Rn+"*"),Nr=new RegExp(Rn+"|>"),br=new RegExp(md),ll=new RegExp("^"+al+"$"),ra={ID:new RegExp("^#("+al+")"),CLASS:new RegExp("^\\.("+al+")"),TAG:new RegExp("^("+al+"|[*])"),ATTR:new RegExp("^"+Dp),PSEUDO:new RegExp("^"+md),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Rn+"*(even|odd|(([+-]|)(\\d*)n|)"+Rn+"*(?:([+-]|)"+Rn+"*(\\d+)|))"+Rn+"*\\)|)","i"),bool:new RegExp("^(?:"+di+")$","i"),needsContext:new RegExp("^"+Rn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Rn+"*((?:-\\d)?\\d*)"+Rn+"*\\)|)(?=[^-]|$)","i")},Mr=/HTML$/i,ul=/^(?:input|select|textarea|button)$/i,Zl=/^h\d$/i,Ds=/^[^{]+\{\s*\[native \w/,kf=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ia=/[+~]/,Hn=new RegExp("\\\\[\\da-fA-F]{1,6}"+Rn+"?|\\\\([^\\r\\n\\f])","g"),Ss=function(j,H){var J="0x"+j.slice(1)-65536;return H||(J<0?String.fromCharCode(J+65536):String.fromCharCode(J>>10|55296,1023&J|56320))},Mo=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ke=function(j,H){return H?"\0"===j?"\ufffd":j.slice(0,-1)+"\\"+j.charCodeAt(j.length-1).toString(16)+" ":"\\"+j},en=function(){se()},fi=cl(function(j){return!0===j.disabled&&"fieldset"===j.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Hi.apply(vr=Zu.call(Ft.childNodes),Ft.childNodes)}catch(j){Hi={apply:vr.length?function(H,J){No.apply(H,Zu.call(J))}:function(H,J){for(var _e=H.length,Z=0;H[_e++]=J[Z++];);H.length=_e-1}}}function tn(j,H,J,_e){var Z,ve,Oe,He,Xe,Dt,pt,Tt=H&&H.ownerDocument,on=H?H.nodeType:9;if(J=J||[],"string"!=typeof j||!j||1!==on&&9!==on&&11!==on)return J;if(!_e&&(se(H),H=H||ge,vt)){if(11!==on&&(Xe=kf.exec(j)))if(Z=Xe[1]){if(9===on){if(!(Oe=H.getElementById(Z)))return J;if(Oe.id===Z)return J.push(Oe),J}else if(Tt&&(Oe=Tt.getElementById(Z))&&ci(H,Oe)&&Oe.id===Z)return J.push(Oe),J}else{if(Xe[2])return Hi.apply(J,H.getElementsByTagName(j)),J;if((Z=Xe[3])&&w.getElementsByClassName&&H.getElementsByClassName)return Hi.apply(J,H.getElementsByClassName(Z)),J}if(w.qsa&&!ar[j+" "]&&(!et||!et.test(j))&&(1!==on||"object"!==H.nodeName.toLowerCase())){if(pt=j,Tt=H,1===on&&(Nr.test(j)||Pe.test(j))){for(((Tt=Ia.test(j)&&yd(H.parentNode)||H)!==H||!w.scope)&&((He=H.getAttribute("id"))?He=He.replace(Mo,Ke):H.setAttribute("id",He=In)),ve=(Dt=R(j)).length;ve--;)Dt[ve]=(He?"#"+He:":scope")+" "+wr(Dt[ve]);pt=Dt.join(",")}try{return Hi.apply(J,Tt.querySelectorAll(pt)),J}catch(Un){ar(j,!0)}finally{He===In&&H.removeAttribute("id")}}}return z(j.replace(Mf,"$1"),H,J,_e)}function oa(){var j=[];return function H(J,_e){return j.push(J+" ")>C.cacheLength&&delete H[j.shift()],H[J+" "]=_e}}function vn(j){return j[In]=!0,j}function Ii(j){var H=ge.createElement("fieldset");try{return!!j(H)}catch(J){return!1}finally{H.parentNode&&H.parentNode.removeChild(H),H=null}}function Ei(j,H){for(var J=j.split("|"),_e=J.length;_e--;)C.attrHandle[J[_e]]=H}function Ra(j,H){var J=H&&j,_e=J&&1===j.nodeType&&1===H.nodeType&&j.sourceIndex-H.sourceIndex;if(_e)return _e;if(J)for(;J=J.nextSibling;)if(J===H)return-1;return j?1:-1}function kr(j){return function(H){return"input"===H.nodeName.toLowerCase()&&H.type===j}}function qt(j){return function(H){var J=H.nodeName.toLowerCase();return("input"===J||"button"===J)&&H.type===j}}function ec(j){return function(H){return"form"in H?H.parentNode&&!1===H.disabled?"label"in H?"label"in H.parentNode?H.parentNode.disabled===j:H.disabled===j:H.isDisabled===j||H.isDisabled!==!j&&fi(H)===j:H.disabled===j:"label"in H&&H.disabled===j}}function Wo(j){return vn(function(H){return H=+H,vn(function(J,_e){for(var Z,ve=j([],J.length,H),Oe=ve.length;Oe--;)J[Z=ve[Oe]]&&(J[Z]=!(_e[Z]=J[Z]))})})}function yd(j){return j&&void 0!==j.getElementsByTagName&&j}for(y in w=tn.support={},M=tn.isXML=function(j){var J=j&&(j.ownerDocument||j).documentElement;return!Mr.test(j&&j.namespaceURI||J&&J.nodeName||"HTML")},se=tn.setDocument=function(j){var H,J,_e=j?j.ownerDocument||j:Ft;return _e==ge||9!==_e.nodeType||!_e.documentElement||(dt=(ge=_e).documentElement,vt=!M(ge),Ft!=ge&&(J=ge.defaultView)&&J.top!==J&&(J.addEventListener?J.addEventListener("unload",en,!1):J.attachEvent&&J.attachEvent("onunload",en)),w.scope=Ii(function(Z){return dt.appendChild(Z).appendChild(ge.createElement("div")),void 0!==Z.querySelectorAll&&!Z.querySelectorAll(":scope fieldset div").length}),w.attributes=Ii(function(Z){return Z.className="i",!Z.getAttribute("className")}),w.getElementsByTagName=Ii(function(Z){return Z.appendChild(ge.createComment("")),!Z.getElementsByTagName("*").length}),w.getElementsByClassName=Ds.test(ge.getElementsByClassName),w.getById=Ii(function(Z){return dt.appendChild(Z).id=In,!ge.getElementsByName||!ge.getElementsByName(In).length}),w.getById?(C.filter.ID=function(Z){var ve=Z.replace(Hn,Ss);return function(Oe){return Oe.getAttribute("id")===ve}},C.find.ID=function(Z,ve){if(void 0!==ve.getElementById&&vt){var Oe=ve.getElementById(Z);return Oe?[Oe]:[]}}):(C.filter.ID=function(Z){var ve=Z.replace(Hn,Ss);return function(Oe){var He=void 0!==Oe.getAttributeNode&&Oe.getAttributeNode("id");return He&&He.value===ve}},C.find.ID=function(Z,ve){if(void 0!==ve.getElementById&&vt){var Oe,He,Xe,Dt=ve.getElementById(Z);if(Dt){if((Oe=Dt.getAttributeNode("id"))&&Oe.value===Z)return[Dt];for(Xe=ve.getElementsByName(Z),He=0;Dt=Xe[He++];)if((Oe=Dt.getAttributeNode("id"))&&Oe.value===Z)return[Dt]}return[]}}),C.find.TAG=w.getElementsByTagName?function(Z,ve){return void 0!==ve.getElementsByTagName?ve.getElementsByTagName(Z):w.qsa?ve.querySelectorAll(Z):void 0}:function(Z,ve){var Oe,He=[],Xe=0,Dt=ve.getElementsByTagName(Z);if("*"===Z){for(;Oe=Dt[Xe++];)1===Oe.nodeType&&He.push(Oe);return He}return Dt},C.find.CLASS=w.getElementsByClassName&&function(Z,ve){if(void 0!==ve.getElementsByClassName&&vt)return ve.getElementsByClassName(Z)},sr=[],et=[],(w.qsa=Ds.test(ge.querySelectorAll))&&(Ii(function(Z){var ve;dt.appendChild(Z).innerHTML="<a id='"+In+"'></a><select id='"+In+"-\r\\' msallowcapture=''><option selected=''></option></select>",Z.querySelectorAll("[msallowcapture^='']").length&&et.push("[*^$]="+Rn+"*(?:''|\"\")"),Z.querySelectorAll("[selected]").length||et.push("\\["+Rn+"*(?:value|"+di+")"),Z.querySelectorAll("[id~="+In+"-]").length||et.push("~="),(ve=ge.createElement("input")).setAttribute("name",""),Z.appendChild(ve),Z.querySelectorAll("[name='']").length||et.push("\\["+Rn+"*name"+Rn+"*="+Rn+"*(?:''|\"\")"),Z.querySelectorAll(":checked").length||et.push(":checked"),Z.querySelectorAll("a#"+In+"+*").length||et.push(".#.+[+~]"),Z.querySelectorAll("\\\f"),et.push("[\\r\\n\\f]")}),Ii(function(Z){Z.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ve=ge.createElement("input");ve.setAttribute("type","hidden"),Z.appendChild(ve).setAttribute("name","D"),Z.querySelectorAll("[name=d]").length&&et.push("name"+Rn+"*[*^$|!~]?="),2!==Z.querySelectorAll(":enabled").length&&et.push(":enabled",":disabled"),dt.appendChild(Z).disabled=!0,2!==Z.querySelectorAll(":disabled").length&&et.push(":enabled",":disabled"),Z.querySelectorAll("*,:x"),et.push(",.*:")})),(w.matchesSelector=Ds.test(ki=dt.matches||dt.webkitMatchesSelector||dt.mozMatchesSelector||dt.oMatchesSelector||dt.msMatchesSelector))&&Ii(function(Z){w.disconnectedMatch=ki.call(Z,"*"),ki.call(Z,"[s!='']:x"),sr.push("!=",md)}),et=et.length&&new RegExp(et.join("|")),sr=sr.length&&new RegExp(sr.join("|")),H=Ds.test(dt.compareDocumentPosition),ci=H||Ds.test(dt.contains)?function(Z,ve){var Oe=9===Z.nodeType?Z.documentElement:Z,He=ve&&ve.parentNode;return Z===He||!(!He||1!==He.nodeType||!(Oe.contains?Oe.contains(He):Z.compareDocumentPosition&&16&Z.compareDocumentPosition(He)))}:function(Z,ve){if(ve)for(;ve=ve.parentNode;)if(ve===Z)return!0;return!1},Dn=H?function(Z,ve){if(Z===ve)return xe=!0,0;var Oe=!Z.compareDocumentPosition-!ve.compareDocumentPosition;return Oe||(1&(Oe=(Z.ownerDocument||Z)==(ve.ownerDocument||ve)?Z.compareDocumentPosition(ve):1)||!w.sortDetached&&ve.compareDocumentPosition(Z)===Oe?Z==ge||Z.ownerDocument==Ft&&ci(Ft,Z)?-1:ve==ge||ve.ownerDocument==Ft&&ci(Ft,ve)?1:ue?Ql(ue,Z)-Ql(ue,ve):0:4&Oe?-1:1)}:function(Z,ve){if(Z===ve)return xe=!0,0;var Oe,He=0,Xe=Z.parentNode,Dt=ve.parentNode,pt=[Z],Tt=[ve];if(!Xe||!Dt)return Z==ge?-1:ve==ge?1:Xe?-1:Dt?1:ue?Ql(ue,Z)-Ql(ue,ve):0;if(Xe===Dt)return Ra(Z,ve);for(Oe=Z;Oe=Oe.parentNode;)pt.unshift(Oe);for(Oe=ve;Oe=Oe.parentNode;)Tt.unshift(Oe);for(;pt[He]===Tt[He];)He++;return He?Ra(pt[He],Tt[He]):pt[He]==Ft?-1:Tt[He]==Ft?1:0}),ge},tn.matches=function(j,H){return tn(j,null,null,H)},tn.matchesSelector=function(j,H){if(se(j),w.matchesSelector&&vt&&!ar[H+" "]&&(!sr||!sr.test(H))&&(!et||!et.test(H)))try{var J=ki.call(j,H);if(J||w.disconnectedMatch||j.document&&11!==j.document.nodeType)return J}catch(_e){ar(H,!0)}return tn(H,ge,null,[j]).length>0},tn.contains=function(j,H){return(j.ownerDocument||j)!=ge&&se(j),ci(j,H)},tn.attr=function(j,H){(j.ownerDocument||j)!=ge&&se(j);var J=C.attrHandle[H.toLowerCase()],_e=J&&Cs.call(C.attrHandle,H.toLowerCase())?J(j,H,!vt):void 0;return void 0!==_e?_e:w.attributes||!vt?j.getAttribute(H):(_e=j.getAttributeNode(H))&&_e.specified?_e.value:null},tn.escape=function(j){return(j+"").replace(Mo,Ke)},tn.error=function(j){throw new Error("Syntax error, unrecognized expression: "+j)},tn.uniqueSort=function(j){var H,J=[],_e=0,Z=0;if(xe=!w.detectDuplicates,ue=!w.sortStable&&j.slice(0),j.sort(Dn),xe){for(;H=j[Z++];)H===j[Z]&&(_e=J.push(Z));for(;_e--;)j.splice(J[_e],1)}return ue=null,j},O=tn.getText=function(j){var H,J="",_e=0,Z=j.nodeType;if(Z){if(1===Z||9===Z||11===Z){if("string"==typeof j.textContent)return j.textContent;for(j=j.firstChild;j;j=j.nextSibling)J+=O(j)}else if(3===Z||4===Z)return j.nodeValue}else for(;H=j[_e++];)J+=O(H);return J},(C=tn.selectors={cacheLength:50,createPseudo:vn,match:ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(j){return j[1]=j[1].replace(Hn,Ss),j[3]=(j[3]||j[4]||j[5]||"").replace(Hn,Ss),"~="===j[2]&&(j[3]=" "+j[3]+" "),j.slice(0,4)},CHILD:function(j){return j[1]=j[1].toLowerCase(),"nth"===j[1].slice(0,3)?(j[3]||tn.error(j[0]),j[4]=+(j[4]?j[5]+(j[6]||1):2*("even"===j[3]||"odd"===j[3])),j[5]=+(j[7]+j[8]||"odd"===j[3])):j[3]&&tn.error(j[0]),j},PSEUDO:function(j){var H,J=!j[6]&&j[2];return ra.CHILD.test(j[0])?null:(j[3]?j[2]=j[4]||j[5]||"":J&&br.test(J)&&(H=R(J,!0))&&(H=J.indexOf(")",J.length-H)-J.length)&&(j[0]=j[0].slice(0,H),j[2]=J.slice(0,H)),j.slice(0,3))}},filter:{TAG:function(j){var H=j.replace(Hn,Ss).toLowerCase();return"*"===j?function(){return!0}:function(J){return J.nodeName&&J.nodeName.toLowerCase()===H}},CLASS:function(j){var H=Ct[j+" "];return H||(H=new RegExp("(^|"+Rn+")"+j+"("+Rn+"|$)"))&&Ct(j,function(J){return H.test("string"==typeof J.className&&J.className||void 0!==J.getAttribute&&J.getAttribute("class")||"")})},ATTR:function(j,H,J){return function(_e){var Z=tn.attr(_e,j);return null==Z?"!="===H:!H||(Z+="","="===H?Z===J:"!="===H?Z!==J:"^="===H?J&&0===Z.indexOf(J):"*="===H?J&&Z.indexOf(J)>-1:"$="===H?J&&Z.slice(-J.length)===J:"~="===H?(" "+Z.replace(cn," ")+" ").indexOf(J)>-1:"|="===H&&(Z===J||Z.slice(0,J.length+1)===J+"-"))}},CHILD:function(j,H,J,_e,Z){var ve="nth"!==j.slice(0,3),Oe="last"!==j.slice(-4),He="of-type"===H;return 1===_e&&0===Z?function(Xe){return!!Xe.parentNode}:function(Xe,Dt,pt){var Tt,on,Un,St,Ji,Wr,qo=ve!==Oe?"nextSibling":"previousSibling",Ci=Xe.parentNode,vd=He&&Xe.nodeName.toLowerCase(),If=!pt&&!He,Ir=!1;if(Ci){if(ve){for(;qo;){for(St=Xe;St=St[qo];)if(He?St.nodeName.toLowerCase()===vd:1===St.nodeType)return!1;Wr=qo="only"===j&&!Wr&&"nextSibling"}return!0}if(Wr=[Oe?Ci.firstChild:Ci.lastChild],Oe&&If){for(Ir=(Ji=(Tt=(on=(Un=(St=Ci)[In]||(St[In]={}))[St.uniqueID]||(Un[St.uniqueID]={}))[j]||[])[0]===co&&Tt[1])&&Tt[2],St=Ji&&Ci.childNodes[Ji];St=++Ji&&St&&St[qo]||(Ir=Ji=0)||Wr.pop();)if(1===St.nodeType&&++Ir&&St===Xe){on[j]=[co,Ji,Ir];break}}else if(If&&(Ir=Ji=(Tt=(on=(Un=(St=Xe)[In]||(St[In]={}))[St.uniqueID]||(Un[St.uniqueID]={}))[j]||[])[0]===co&&Tt[1]),!1===Ir)for(;(St=++Ji&&St&&St[qo]||(Ir=Ji=0)||Wr.pop())&&((He?St.nodeName.toLowerCase()!==vd:1!==St.nodeType)||!++Ir||(If&&((on=(Un=St[In]||(St[In]={}))[St.uniqueID]||(Un[St.uniqueID]={}))[j]=[co,Ir]),St!==Xe)););return(Ir-=Z)===_e||Ir%_e==0&&Ir/_e>=0}}},PSEUDO:function(j,H){var J,_e=C.pseudos[j]||C.setFilters[j.toLowerCase()]||tn.error("unsupported pseudo: "+j);return _e[In]?_e(H):_e.length>1?(J=[j,j,"",H],C.setFilters.hasOwnProperty(j.toLowerCase())?vn(function(Z,ve){for(var Oe,He=_e(Z,H),Xe=He.length;Xe--;)Z[Oe=Ql(Z,He[Xe])]=!(ve[Oe]=He[Xe])}):function(Z){return _e(Z,0,J)}):_e}},pseudos:{not:vn(function(j){var H=[],J=[],_e=U(j.replace(Mf,"$1"));return _e[In]?vn(function(Z,ve,Oe,He){for(var Xe,Dt=_e(Z,null,He,[]),pt=Z.length;pt--;)(Xe=Dt[pt])&&(Z[pt]=!(ve[pt]=Xe))}):function(Z,ve,Oe){return H[0]=Z,_e(H,null,Oe,J),H[0]=null,!J.pop()}}),has:vn(function(j){return function(H){return tn(j,H).length>0}}),contains:vn(function(j){return j=j.replace(Hn,Ss),function(H){return(H.textContent||O(H)).indexOf(j)>-1}}),lang:vn(function(j){return ll.test(j||"")||tn.error("unsupported lang: "+j),j=j.replace(Hn,Ss).toLowerCase(),function(H){var J;do{if(J=vt?H.lang:H.getAttribute("xml:lang")||H.getAttribute("lang"))return(J=J.toLowerCase())===j||0===J.indexOf(j+"-")}while((H=H.parentNode)&&1===H.nodeType);return!1}}),target:function(j){var H=g.location&&g.location.hash;return H&&H.slice(1)===j.id},root:function(j){return j===dt},focus:function(j){return j===ge.activeElement&&(!ge.hasFocus||ge.hasFocus())&&!!(j.type||j.href||~j.tabIndex)},enabled:ec(!1),disabled:ec(!0),checked:function(j){var H=j.nodeName.toLowerCase();return"input"===H&&!!j.checked||"option"===H&&!!j.selected},selected:function(j){return!0===j.selected},empty:function(j){for(j=j.firstChild;j;j=j.nextSibling)if(j.nodeType<6)return!1;return!0},parent:function(j){return!C.pseudos.empty(j)},header:function(j){return Zl.test(j.nodeName)},input:function(j){return ul.test(j.nodeName)},button:function(j){var H=j.nodeName.toLowerCase();return"input"===H&&"button"===j.type||"button"===H},text:function(j){var H;return"input"===j.nodeName.toLowerCase()&&"text"===j.type&&(null==(H=j.getAttribute("type"))||"text"===H.toLowerCase())},first:Wo(function(){return[0]}),last:Wo(function(j,H){return[H-1]}),eq:Wo(function(j,H,J){return[J<0?J+H:J]}),even:Wo(function(j,H){for(var J=0;J<H;J+=2)j.push(J);return j}),odd:Wo(function(j,H){for(var J=1;J<H;J+=2)j.push(J);return j}),lt:Wo(function(j,H,J){for(var _e=J<0?J+H:J>H?H:J;--_e>=0;)j.push(_e);return j}),gt:Wo(function(j,H,J){for(var _e=J<0?J+H:J;++_e<H;)j.push(_e);return j})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[y]=kr(y);for(y in{submit:!0,reset:!0})C.pseudos[y]=qt(y);function eu(){}function wr(j){for(var H=0,J=j.length,_e="";H<J;H++)_e+=j[H].value;return _e}function cl(j,H,J){var _e=H.dir,Z=H.next,ve=Z||_e,Oe=J&&"parentNode"===ve,He=Cn++;return H.first?function(Xe,Dt,pt){for(;Xe=Xe[_e];)if(1===Xe.nodeType||Oe)return j(Xe,Dt,pt);return!1}:function(Xe,Dt,pt){var Tt,on,Un,St=[co,He];if(pt){for(;Xe=Xe[_e];)if((1===Xe.nodeType||Oe)&&j(Xe,Dt,pt))return!0}else for(;Xe=Xe[_e];)if(1===Xe.nodeType||Oe)if(on=(Un=Xe[In]||(Xe[In]={}))[Xe.uniqueID]||(Un[Xe.uniqueID]={}),Z&&Z===Xe.nodeName.toLowerCase())Xe=Xe[_e]||Xe;else{if((Tt=on[ve])&&Tt[0]===co&&Tt[1]===He)return St[2]=Tt[2];if(on[ve]=St,St[2]=j(Xe,Dt,pt))return!0}return!1}}function dl(j){return j.length>1?function(H,J,_e){for(var Z=j.length;Z--;)if(!j[Z](H,J,_e))return!1;return!0}:j[0]}function Bn(j,H,J,_e,Z){for(var ve,Oe=[],He=0,Xe=j.length,Dt=null!=H;He<Xe;He++)(ve=j[He])&&(!J||J(ve,_e,Z))&&(Oe.push(ve),Dt&&H.push(He));return Oe}function tc(j,H,J,_e,Z,ve){return _e&&!_e[In]&&(_e=tc(_e)),Z&&!Z[In]&&(Z=tc(Z,ve)),vn(function(Oe,He,Xe,Dt){var pt,Tt,on,Un=[],St=[],Ji=He.length,Wr=Oe||function xs(j,H,J){for(var _e=0,Z=H.length;_e<Z;_e++)tn(j,H[_e],J);return J}(H||"*",Xe.nodeType?[Xe]:Xe,[]),qo=!j||!Oe&&H?Wr:Bn(Wr,Un,j,Xe,Dt),Ci=J?Z||(Oe?j:Ji||_e)?[]:He:qo;if(J&&J(qo,Ci,Xe,Dt),_e)for(pt=Bn(Ci,St),_e(pt,[],Xe,Dt),Tt=pt.length;Tt--;)(on=pt[Tt])&&(Ci[St[Tt]]=!(qo[St[Tt]]=on));if(Oe){if(Z||j){if(Z){for(pt=[],Tt=Ci.length;Tt--;)(on=Ci[Tt])&&pt.push(qo[Tt]=on);Z(null,Ci=[],pt,Dt)}for(Tt=Ci.length;Tt--;)(on=Ci[Tt])&&(pt=Z?Ql(Oe,on):Un[Tt])>-1&&(Oe[pt]=!(He[pt]=on))}}else Ci=Bn(Ci===He?Ci.splice(Ji,Ci.length):Ci),Z?Z(null,He,Ci,Dt):Hi.apply(He,Ci)})}function Pa(j){for(var H,J,_e,Z=j.length,ve=C.relative[j[0].type],Oe=ve||C.relative[" "],He=ve?1:0,Xe=cl(function(Tt){return Tt===H},Oe,!0),Dt=cl(function(Tt){return Ql(H,Tt)>-1},Oe,!0),pt=[function(Tt,on,Un){var St=!ve&&(Un||on!==Y)||((H=on).nodeType?Xe(Tt,on,Un):Dt(Tt,on,Un));return H=null,St}];He<Z;He++)if(J=C.relative[j[He].type])pt=[cl(dl(pt),J)];else{if((J=C.filter[j[He].type].apply(null,j[He].matches))[In]){for(_e=++He;_e<Z&&!C.relative[j[_e].type];_e++);return tc(He>1&&dl(pt),He>1&&wr(j.slice(0,He-1).concat({value:" "===j[He-2].type?"*":""})).replace(Mf,"$1"),J,He<_e&&Pa(j.slice(He,_e)),_e<Z&&Pa(j=j.slice(_e)),_e<Z&&wr(j))}pt.push(J)}return dl(pt)}return eu.prototype=C.filters=C.pseudos,C.setFilters=new eu,R=tn.tokenize=function(j,H){var J,_e,Z,ve,Oe,He,Xe,Dt=Nf[j+" "];if(Dt)return H?0:Dt.slice(0);for(Oe=j,He=[],Xe=C.preFilter;Oe;){for(ve in(!J||(_e=_d.exec(Oe)))&&(_e&&(Oe=Oe.slice(_e[0].length)||Oe),He.push(Z=[])),J=!1,(_e=Pe.exec(Oe))&&(J=_e.shift(),Z.push({value:J,type:_e[0].replace(Mf," ")}),Oe=Oe.slice(J.length)),C.filter)(_e=ra[ve].exec(Oe))&&(!Xe[ve]||(_e=Xe[ve](_e)))&&(J=_e.shift(),Z.push({value:J,type:ve,matches:_e}),Oe=Oe.slice(J.length));if(!J)break}return H?Oe.length:Oe?tn.error(j):Nf(j,He).slice(0)},U=tn.compile=function(j,H){var J,_e=[],Z=[],ve=Cp[j+" "];if(!ve){for(H||(H=R(j)),J=H.length;J--;)(ve=Pa(H[J]))[In]?_e.push(ve):Z.push(ve);ve=Cp(j,function sa(j,H){var J=H.length>0,_e=j.length>0,Z=function(ve,Oe,He,Xe,Dt){var pt,Tt,on,Un=0,St="0",Ji=ve&&[],Wr=[],qo=Y,Ci=ve||_e&&C.find.TAG("*",Dt),vd=co+=null==qo?1:Math.random()||.1,If=Ci.length;for(Dt&&(Y=Oe==ge||Oe||Dt);St!==If&&null!=(pt=Ci[St]);St++){if(_e&&pt){for(Tt=0,!Oe&&pt.ownerDocument!=ge&&(se(pt),He=!vt);on=j[Tt++];)if(on(pt,Oe||ge,He)){Xe.push(pt);break}Dt&&(co=vd)}J&&((pt=!on&&pt)&&Un--,ve&&Ji.push(pt))}if(Un+=St,J&&St!==Un){for(Tt=0;on=H[Tt++];)on(Ji,Wr,Oe,He);if(ve){if(Un>0)for(;St--;)Ji[St]||Wr[St]||(Wr[St]=Go.call(Xe));Wr=Bn(Wr)}Hi.apply(Xe,Wr),Dt&&!ve&&Wr.length>0&&Un+H.length>1&&tn.uniqueSort(Xe)}return Dt&&(co=vd,Y=qo),Ji};return J?vn(Z):Z}(Z,_e)),ve.selector=j}return ve},z=tn.select=function(j,H,J,_e){var Z,ve,Oe,He,Xe,Dt="function"==typeof j&&j,pt=!_e&&R(j=Dt.selector||j);if(J=J||[],1===pt.length){if((ve=pt[0]=pt[0].slice(0)).length>2&&"ID"===(Oe=ve[0]).type&&9===H.nodeType&&vt&&C.relative[ve[1].type]){if(!(H=(C.find.ID(Oe.matches[0].replace(Hn,Ss),H)||[])[0]))return J;Dt&&(H=H.parentNode),j=j.slice(ve.shift().value.length)}for(Z=ra.needsContext.test(j)?0:ve.length;Z--&&!C.relative[He=(Oe=ve[Z]).type];)if((Xe=C.find[He])&&(_e=Xe(Oe.matches[0].replace(Hn,Ss),Ia.test(ve[0].type)&&yd(H.parentNode)||H))){if(ve.splice(Z,1),!(j=_e.length&&wr(ve)))return Hi.apply(J,_e),J;break}}return(Dt||U(j,pt))(_e,H,!vt,J,!H||Ia.test(j)&&yd(H.parentNode)||H),J},w.sortStable=In.split("").sort(Dn).join("")===In,w.detectDuplicates=!!xe,se(),w.sortDetached=Ii(function(j){return 1&j.compareDocumentPosition(ge.createElement("fieldset"))}),Ii(function(j){return j.innerHTML="<a href='#'></a>","#"===j.firstChild.getAttribute("href")})||Ei("type|href|height|width",function(j,H,J){if(!J)return j.getAttribute(H,"type"===H.toLowerCase()?1:2)}),(!w.attributes||!Ii(function(j){return j.innerHTML="<input/>",j.firstChild.setAttribute("value",""),""===j.firstChild.getAttribute("value")}))&&Ei("value",function(j,H,J){if(!J&&"input"===j.nodeName.toLowerCase())return j.defaultValue}),Ii(function(j){return null==j.getAttribute("disabled")})||Ei(di,function(j,H,J){var _e;if(!J)return!0===j[H]?H.toLowerCase():(_e=j.getAttributeNode(H))&&_e.specified?_e.value:null}),tn}(Ye);S.find=ao,S.expr=ao.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=ao.uniqueSort,S.text=ao.getText,S.isXMLDoc=ao.isXML,S.contains=ao.contains,S.escapeSelector=ao.escape;var Ni=function(g,y,w){for(var C=[],O=void 0!==w;(g=g[y])&&9!==g.nodeType;)if(1===g.nodeType){if(O&&S(g).is(w))break;C.push(g)}return C},bi=function(g,y){for(var w=[];g;g=g.nextSibling)1===g.nodeType&&g!==y&&w.push(g);return w},Ki=S.expr.match.needsContext;function ti(g,y){return g.nodeName&&g.nodeName.toLowerCase()===y.toLowerCase()}var ms=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function _s(g,y,w){return st(y)?S.grep(g,function(C,O){return!!y.call(C,O,C)!==w}):y.nodeType?S.grep(g,function(C){return C===y!==w}):"string"!=typeof y?S.grep(g,function(C){return Wt.call(y,C)>-1!==w}):S.filter(y,g,w)}S.filter=function(g,y,w){var C=y[0];return w&&(g=":not("+g+")"),1===y.length&&1===C.nodeType?S.find.matchesSelector(C,g)?[C]:[]:S.find.matches(g,S.grep(y,function(O){return 1===O.nodeType}))},S.fn.extend({find:function(g){var y,w,C=this.length,O=this;if("string"!=typeof g)return this.pushStack(S(g).filter(function(){for(y=0;y<C;y++)if(S.contains(O[y],this))return!0}));for(w=this.pushStack([]),y=0;y<C;y++)S.find(g,O[y],w);return C>1?S.uniqueSort(w):w},filter:function(g){return this.pushStack(_s(this,g||[],!1))},not:function(g){return this.pushStack(_s(this,g||[],!0))},is:function(g){return!!_s(this,"string"==typeof g&&Ki.test(g)?S(g):g||[],!1).length}});var ys,_r=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,yr=S.fn.init=function(g,y,w){var C,O;if(!g)return this;if(w=w||ys,"string"==typeof g){if(!(C="<"===g[0]&&">"===g[g.length-1]&&g.length>=3?[null,g,null]:_r.exec(g))||!C[1]&&y)return!y||y.jquery?(y||w).find(g):this.constructor(y).find(g);if(C[1]){if(S.merge(this,S.parseHTML(C[1],(y=y instanceof S?y[0]:y)&&y.nodeType?y.ownerDocument||y:$e,!0)),ms.test(C[1])&&S.isPlainObject(y))for(C in y)st(this[C])?this[C](y[C]):this.attr(C,y[C]);return this}return(O=$e.getElementById(C[2]))&&(this[0]=O,this.length=1),this}return g.nodeType?(this[0]=g,this.length=1,this):st(g)?void 0!==w.ready?w.ready(g):g(S):S.makeArray(g,this)};yr.prototype=S.fn,ys=S($e);var Uu=/^(?:parents|prev(?:Until|All))/,Vl={children:!0,contents:!0,next:!0,prev:!0};function ea(g,y){for(;(g=g[y])&&1!==g.nodeType;);return g}S.fn.extend({has:function(g){var y=S(g,this),w=y.length;return this.filter(function(){for(var C=0;C<w;C++)if(S.contains(this,y[C]))return!0})},closest:function(g,y){var w,C=0,O=this.length,M=[],R="string"!=typeof g&&S(g);if(!Ki.test(g))for(;C<O;C++)for(w=this[C];w&&w!==y;w=w.parentNode)if(w.nodeType<11&&(R?R.index(w)>-1:1===w.nodeType&&S.find.matchesSelector(w,g))){M.push(w);break}return this.pushStack(M.length>1?S.uniqueSort(M):M)},index:function(g){return g?"string"==typeof g?Wt.call(S(g),this[0]):Wt.call(this,g.jquery?g[0]:g):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(g,y){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(g,y))))},addBack:function(g){return this.add(null==g?this.prevObject:this.prevObject.filter(g))}}),S.each({parent:function(g){var y=g.parentNode;return y&&11!==y.nodeType?y:null},parents:function(g){return Ni(g,"parentNode")},parentsUntil:function(g,y,w){return Ni(g,"parentNode",w)},next:function(g){return ea(g,"nextSibling")},prev:function(g){return ea(g,"previousSibling")},nextAll:function(g){return Ni(g,"nextSibling")},prevAll:function(g){return Ni(g,"previousSibling")},nextUntil:function(g,y,w){return Ni(g,"nextSibling",w)},prevUntil:function(g,y,w){return Ni(g,"previousSibling",w)},siblings:function(g){return bi((g.parentNode||{}).firstChild,g)},children:function(g){return bi(g.firstChild)},contents:function(g){return null!=g.contentDocument&&N(g.contentDocument)?g.contentDocument:(ti(g,"template")&&(g=g.content||g),S.merge([],g.childNodes))}},function(g,y){S.fn[g]=function(w,C){var O=S.map(this,y,w);return"Until"!==g.slice(-5)&&(C=w),C&&"string"==typeof C&&(O=S.filter(C,O)),this.length>1&&(Vl[g]||S.uniqueSort(O),Uu.test(g)&&O.reverse()),this.pushStack(O)}});var Xi=/[^\x20\t\r\n\f]+/g;function or(g){return g}function Uo(g){throw g}function Df(g,y,w,C){var O;try{g&&st(O=g.promise)?O.call(g).done(y).fail(w):g&&st(O=g.then)?O.call(g,y,w):y.apply(void 0,[g].slice(C))}catch(M){w.apply(void 0,[M])}}S.Callbacks=function(g){g="string"==typeof g?function rl(g){var y={};return S.each(g.match(Xi)||[],function(w,C){y[C]=!0}),y}(g):S.extend({},g);var y,w,C,O,M=[],R=[],U=-1,z=function(){for(O=O||g.once,C=y=!0;R.length;U=-1)for(w=R.shift();++U<M.length;)!1===M[U].apply(w[0],w[1])&&g.stopOnFalse&&(U=M.length,w=!1);g.memory||(w=!1),y=!1,O&&(M=w?[]:"")},Y={add:function(){return M&&(w&&!y&&(U=M.length-1,R.push(w)),function ue(xe){S.each(xe,function(se,ge){st(ge)?(!g.unique||!Y.has(ge))&&M.push(ge):ge&&ge.length&&"string"!==Jt(ge)&&ue(ge)})}(arguments),w&&!y&&z()),this},remove:function(){return S.each(arguments,function(ue,xe){for(var se;(se=S.inArray(xe,M,se))>-1;)M.splice(se,1),se<=U&&U--}),this},has:function(ue){return ue?S.inArray(ue,M)>-1:M.length>0},empty:function(){return M&&(M=[]),this},disable:function(){return O=R=[],M=w="",this},disabled:function(){return!M},lock:function(){return O=R=[],!w&&!y&&(M=w=""),this},locked:function(){return!!O},fireWith:function(ue,xe){return O||(xe=[ue,(xe=xe||[]).slice?xe.slice():xe],R.push(xe),y||z()),this},fire:function(){return Y.fireWith(this,arguments),this},fired:function(){return!!C}};return Y},S.extend({Deferred:function(g){var y=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],w="pending",C={state:function(){return w},always:function(){return O.done(arguments).fail(arguments),this},catch:function(M){return C.then(null,M)},pipe:function(){var M=arguments;return S.Deferred(function(R){S.each(y,function(U,z){var Y=st(M[z[4]])&&M[z[4]];O[z[1]](function(){var ue=Y&&Y.apply(this,arguments);ue&&st(ue.promise)?ue.promise().progress(R.notify).done(R.resolve).fail(R.reject):R[z[0]+"With"](this,Y?[ue]:arguments)})}),M=null}).promise()},then:function(M,R,U){var z=0;function Y(ue,xe,se,ge){return function(){var dt=this,vt=arguments,et=function(){var ki,ci;if(!(ue<z)){if((ki=se.apply(dt,vt))===xe.promise())throw new TypeError("Thenable self-resolution");st(ci=ki&&("object"==typeof ki||"function"==typeof ki)&&ki.then)?ge?ci.call(ki,Y(z,xe,or,ge),Y(z,xe,Uo,ge)):(z++,ci.call(ki,Y(z,xe,or,ge),Y(z,xe,Uo,ge),Y(z,xe,or,xe.notifyWith))):(se!==or&&(dt=void 0,vt=[ki]),(ge||xe.resolveWith)(dt,vt))}},sr=ge?et:function(){try{et()}catch(ki){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(ki,sr.stackTrace),ue+1>=z&&(se!==Uo&&(dt=void 0,vt=[ki]),xe.rejectWith(dt,vt))}};ue?sr():(S.Deferred.getStackHook&&(sr.stackTrace=S.Deferred.getStackHook()),Ye.setTimeout(sr))}}return S.Deferred(function(ue){y[0][3].add(Y(0,ue,st(U)?U:or,ue.notifyWith)),y[1][3].add(Y(0,ue,st(M)?M:or)),y[2][3].add(Y(0,ue,st(R)?R:Uo))}).promise()},promise:function(M){return null!=M?S.extend(M,C):C}},O={};return S.each(y,function(M,R){var U=R[2],z=R[5];C[R[1]]=U.add,z&&U.add(function(){w=z},y[3-M][2].disable,y[3-M][3].disable,y[0][2].lock,y[0][3].lock),U.add(R[3].fire),O[R[0]]=function(){return O[R[0]+"With"](this===O?void 0:this,arguments),this},O[R[0]+"With"]=U.fireWith}),C.promise(O),g&&g.call(O,O),O},when:function(g){var y=arguments.length,w=y,C=Array(w),O=wn.call(arguments),M=S.Deferred(),R=function(U){return function(z){C[U]=this,O[U]=arguments.length>1?wn.call(arguments):z,--y||M.resolveWith(C,O)}};if(y<=1&&(Df(g,M.done(R(w)).resolve,M.reject,!y),"pending"===M.state()||st(O[w]&&O[w].then)))return M.then();for(;w--;)Df(O[w],R(w),M.reject);return M.promise()}});var zu=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(g,y){Ye.console&&Ye.console.warn&&g&&zu.test(g.name)&&Ye.console.warn("jQuery.Deferred exception: "+g.message,g.stack,y)},S.readyException=function(g){Ye.setTimeout(function(){throw g})};var Do=S.Deferred();function Gu(){$e.removeEventListener("DOMContentLoaded",Gu),Ye.removeEventListener("load",Gu),S.ready()}S.fn.ready=function(g){return Do.then(g).catch(function(y){S.readyException(y)}),this},S.extend({isReady:!1,readyWait:1,ready:function(g){(!0===g?--S.readyWait:S.isReady)||(S.isReady=!0,!(!0!==g&&--S.readyWait>0)&&Do.resolveWith($e,[S]))}}),S.ready.then=Do.then,"complete"===$e.readyState||"loading"!==$e.readyState&&!$e.documentElement.doScroll?Ye.setTimeout(S.ready):($e.addEventListener("DOMContentLoaded",Gu),Ye.addEventListener("load",Gu));var Ur=function(g,y,w,C,O,M,R){var U=0,z=g.length,Y=null==w;if("object"===Jt(w))for(U in O=!0,w)Ur(g,y,U,w[U],!0,M,R);else if(void 0!==C&&(O=!0,st(C)||(R=!0),Y&&(R?(y.call(g,C),y=null):(Y=y,y=function(ue,xe,se){return Y.call(S(ue),se)})),y))for(;U<z;U++)y(g[U],w,R?C:C.call(g[U],U,y(g[U],w)));return O?g:Y?y.call(g):z?y(g[0],w):M},xn=/^-ms-/,sd=/-([a-z])/g;function Sf(g,y){return y.toUpperCase()}function lo(g){return g.replace(xn,"ms-").replace(sd,Sf)}var Hl=function(g){return 1===g.nodeType||9===g.nodeType||!+g.nodeType};function jn(){this.expando=S.expando+jn.uid++}jn.uid=1,jn.prototype={cache:function(g){var y=g[this.expando];return y||(y={},Hl(g)&&(g.nodeType?g[this.expando]=y:Object.defineProperty(g,this.expando,{value:y,configurable:!0}))),y},set:function(g,y,w){var C,O=this.cache(g);if("string"==typeof y)O[lo(y)]=w;else for(C in y)O[lo(C)]=y[C];return O},get:function(g,y){return void 0===y?this.cache(g):g[this.expando]&&g[this.expando][lo(y)]},access:function(g,y,w){return void 0===y||y&&"string"==typeof y&&void 0===w?this.get(g,y):(this.set(g,y,w),void 0!==w?w:y)},remove:function(g,y){var w,C=g[this.expando];if(void 0!==C){if(void 0!==y)for((w=(y=Array.isArray(y)?y.map(lo):(y=lo(y))in C?[y]:y.match(Xi)||[]).length);w--;)delete C[y[w]];(void 0===y||S.isEmptyObject(C))&&(g.nodeType?g[this.expando]=void 0:delete g[this.expando])}},hasData:function(g){var y=g[this.expando];return void 0!==y&&!S.isEmptyObject(y)}};var ct=new jn,li=new jn,ri=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,An=/[A-Z]/g;function Ul(g,y,w){var C;if(void 0===w&&1===g.nodeType)if(C="data-"+y.replace(An,"-$&").toLowerCase(),"string"==typeof(w=g.getAttribute(C))){try{w=function ft(g){return"true"===g||"false"!==g&&("null"===g?null:g===+g+""?+g:ri.test(g)?JSON.parse(g):g)}(w)}catch(O){}li.set(g,y,w)}else w=void 0;return w}S.extend({hasData:function(g){return li.hasData(g)||ct.hasData(g)},data:function(g,y,w){return li.access(g,y,w)},removeData:function(g,y){li.remove(g,y)},_data:function(g,y,w){return ct.access(g,y,w)},_removeData:function(g,y){ct.remove(g,y)}}),S.fn.extend({data:function(g,y){var w,C,O,M=this[0],R=M&&M.attributes;if(void 0===g){if(this.length&&(O=li.get(M),1===M.nodeType&&!ct.get(M,"hasDataAttrs"))){for(w=R.length;w--;)R[w]&&0===(C=R[w].name).indexOf("data-")&&(C=lo(C.slice(5)),Ul(M,C,O[C]));ct.set(M,"hasDataAttrs",!0)}return O}return"object"==typeof g?this.each(function(){li.set(this,g)}):Ur(this,function(U){var z;if(M&&void 0===U)return void 0!==(z=li.get(M,g))||void 0!==(z=Ul(M,g))?z:void 0;this.each(function(){li.set(this,g,U)})},null,y,arguments.length>1,null,!0)},removeData:function(g){return this.each(function(){li.remove(this,g)})}}),S.extend({queue:function(g,y,w){var C;if(g)return C=ct.get(g,y=(y||"fx")+"queue"),w&&(!C||Array.isArray(w)?C=ct.access(g,y,S.makeArray(w)):C.push(w)),C||[]},dequeue:function(g,y){var w=S.queue(g,y=y||"fx"),C=w.length,O=w.shift(),M=S._queueHooks(g,y);"inprogress"===O&&(O=w.shift(),C--),O&&("fx"===y&&w.unshift("inprogress"),delete M.stop,O.call(g,function(){S.dequeue(g,y)},M)),!C&&M&&M.empty.fire()},_queueHooks:function(g,y){var w=y+"queueHooks";return ct.get(g,w)||ct.access(g,w,{empty:S.Callbacks("once memory").add(function(){ct.remove(g,[y+"queue",w])})})}}),S.fn.extend({queue:function(g,y){var w=2;return"string"!=typeof g&&(y=g,g="fx",w--),arguments.length<w?S.queue(this[0],g):void 0===y?this:this.each(function(){var C=S.queue(this,g,y);S._queueHooks(this,g),"fx"===g&&"inprogress"!==C[0]&&S.dequeue(this,g)})},dequeue:function(g){return this.each(function(){S.dequeue(this,g)})},clearQueue:function(g){return this.queue(g||"fx",[])},promise:function(g,y){var w,C=1,O=S.Deferred(),M=this,R=this.length,U=function(){--C||O.resolveWith(M,[M])};for("string"!=typeof g&&(y=g,g=void 0),g=g||"fx";R--;)(w=ct.get(M[R],g+"queueHooks"))&&w.empty&&(C++,w.empty.add(U));return U(),O.promise(y)}});var gp=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ol=new RegExp("^(?:([+-])=|)("+gp+")([a-z%]*)$","i"),ta=["Top","Right","Bottom","Left"],Ma=$e.documentElement,zl=function(g){return S.contains(g.ownerDocument,g)},pm={composed:!0};Ma.getRootNode&&(zl=function(g){return S.contains(g.ownerDocument,g)||g.getRootNode(pm)===g.ownerDocument});var So=function(g,y){return"none"===(g=y||g).style.display||""===g.style.display&&zl(g)&&"none"===S.css(g,"display")};function ad(g,y,w,C){var O,M,R=20,U=C?function(){return C.cur()}:function(){return S.css(g,y,"")},z=U(),Y=w&&w[3]||(S.cssNumber[y]?"":"px"),ue=g.nodeType&&(S.cssNumber[y]||"px"!==Y&&+z)&&ol.exec(S.css(g,y));if(ue&&ue[3]!==Y){for(Y=Y||ue[3],ue=+(z/=2)||1;R--;)S.style(g,y,ue+Y),(1-M)*(1-(M=U()/z||.5))<=0&&(R=0),ue/=M;S.style(g,y,(ue*=2)+Y),w=w||[]}return w&&(ue=+ue||+z||0,O=w[1]?ue+(w[1]+1)*w[2]:+w[2],C&&(C.unit=Y,C.start=ue,C.end=O)),O}var Wu={};function xf(g){var y,w=g.ownerDocument,C=g.nodeName,O=Wu[C];return O||(y=w.body.appendChild(w.createElement(C)),O=S.css(y,"display"),y.parentNode.removeChild(y),"none"===O&&(O="block"),Wu[C]=O,O)}function ka(g,y){for(var w,C,O=[],M=0,R=g.length;M<R;M++)(C=g[M]).style&&(w=C.style.display,y?("none"===w&&(O[M]=ct.get(C,"display")||null,O[M]||(C.style.display="")),""===C.style.display&&So(C)&&(O[M]=xf(C))):"none"!==w&&(O[M]="none",ct.set(C,"display",w)));for(M=0;M<R;M++)null!=O[M]&&(g[M].style.display=O[M]);return g}S.fn.extend({show:function(){return ka(this,!0)},hide:function(){return ka(this)},toggle:function(g){return"boolean"==typeof g?g?this.show():this.hide():this.each(function(){So(this)?S(this).show():S(this).hide()})}});var y,w,Gl=/^(?:checkbox|radio)$/i,mp=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,qu=/^$|^module$|\/(?:java|ecma)script/i;y=$e.createDocumentFragment().appendChild($e.createElement("div")),(w=$e.createElement("input")).setAttribute("type","radio"),w.setAttribute("checked","checked"),w.setAttribute("name","t"),y.appendChild(w),It.checkClone=y.cloneNode(!0).cloneNode(!0).lastChild.checked,y.innerHTML="<textarea>x</textarea>",It.noCloneChecked=!!y.cloneNode(!0).lastChild.defaultValue,y.innerHTML="<option></option>",It.option=!!y.lastChild;var Ar={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Mi(g,y){var w;return w=void 0!==g.getElementsByTagName?g.getElementsByTagName(y||"*"):void 0!==g.querySelectorAll?g.querySelectorAll(y||"*"):[],void 0===y||y&&ti(g,y)?S.merge([g],w):w}function ld(g,y){for(var w=0,C=g.length;w<C;w++)ct.set(g[w],"globalEval",!y||ct.get(y[w],"globalEval"))}Ar.tbody=Ar.tfoot=Ar.colgroup=Ar.caption=Ar.thead,Ar.th=Ar.td,It.option||(Ar.optgroup=Ar.option=[1,"<select multiple='multiple'>","</select>"]);var gm=/<|&#?\w+;/;function ud(g,y,w,C,O){for(var M,R,U,z,Y,ue,xe=y.createDocumentFragment(),se=[],ge=0,dt=g.length;ge<dt;ge++)if((M=g[ge])||0===M)if("object"===Jt(M))S.merge(se,M.nodeType?[M]:M);else if(gm.test(M)){for(R=R||xe.appendChild(y.createElement("div")),U=(mp.exec(M)||["",""])[1].toLowerCase(),R.innerHTML=(z=Ar[U]||Ar._default)[1]+S.htmlPrefilter(M)+z[2],ue=z[0];ue--;)R=R.lastChild;S.merge(se,R.childNodes),(R=xe.firstChild).textContent=""}else se.push(y.createTextNode(M));for(xe.textContent="",ge=0;M=se[ge++];)if(C&&S.inArray(M,C)>-1)O&&O.push(M);else if(Y=zl(M),R=Mi(xe.appendChild(M),"script"),Y&&ld(R),w)for(ue=0;M=R[ue++];)qu.test(M.type||"")&&w.push(M);return xe}var _p=/^([^.]*)(?:\.(.+)|)/;function sl(){return!0}function na(){return!1}function mm(g,y){return g===function P(){try{return $e.activeElement}catch(g){}}()==("focus"===y)}function G(g,y,w,C,O,M){var R,U;if("object"==typeof y){for(U in"string"!=typeof w&&(C=C||w,w=void 0),y)G(g,U,w,C,y[U],M);return g}if(null==C&&null==O?(O=w,C=w=void 0):null==O&&("string"==typeof w?(O=C,C=void 0):(O=C,C=w,w=void 0)),!1===O)O=na;else if(!O)return g;return 1===M&&(R=O,O=function(z){return S().off(z),R.apply(this,arguments)},O.guid=R.guid||(R.guid=S.guid++)),g.each(function(){S.event.add(this,y,O,C,w)})}function Q(g,y,w){w?(ct.set(g,y,!1),S.event.add(g,y,{namespace:!1,handler:function(C){var O,M,R=ct.get(this,y);if(1&C.isTrigger&&this[y]){if(R.length)(S.event.special[y]||{}).delegateType&&C.stopPropagation();else if(R=wn.call(arguments),ct.set(this,y,R),O=w(this,y),this[y](),R!==(M=ct.get(this,y))||O?ct.set(this,y,!1):M={},R!==M)return C.stopImmediatePropagation(),C.preventDefault(),M&&M.value}else R.length&&(ct.set(this,y,{value:S.event.trigger(S.extend(R[0],S.Event.prototype),R.slice(1),this)}),C.stopImmediatePropagation())}})):void 0===ct.get(g,y)&&S.event.add(g,y,sl)}S.event={global:{},add:function(g,y,w,C,O){var M,R,U,z,Y,ue,xe,se,ge,dt,vt,et=ct.get(g);if(Hl(g))for(w.handler&&(w=(M=w).handler,O=M.selector),O&&S.find.matchesSelector(Ma,O),w.guid||(w.guid=S.guid++),(z=et.events)||(z=et.events=Object.create(null)),(R=et.handle)||(R=et.handle=function(sr){return void 0!==S&&S.event.triggered!==sr.type?S.event.dispatch.apply(g,arguments):void 0}),Y=(y=(y||"").match(Xi)||[""]).length;Y--;)ge=vt=(U=_p.exec(y[Y])||[])[1],dt=(U[2]||"").split(".").sort(),ge&&(xe=S.event.special[ge]||{},xe=S.event.special[ge=(O?xe.delegateType:xe.bindType)||ge]||{},ue=S.extend({type:ge,origType:vt,data:C,handler:w,guid:w.guid,selector:O,needsContext:O&&S.expr.match.needsContext.test(O),namespace:dt.join(".")},M),(se=z[ge])||((se=z[ge]=[]).delegateCount=0,(!xe.setup||!1===xe.setup.call(g,C,dt,R))&&g.addEventListener&&g.addEventListener(ge,R)),xe.add&&(xe.add.call(g,ue),ue.handler.guid||(ue.handler.guid=w.guid)),O?se.splice(se.delegateCount++,0,ue):se.push(ue),S.event.global[ge]=!0)},remove:function(g,y,w,C,O){var M,R,U,z,Y,ue,xe,se,ge,dt,vt,et=ct.hasData(g)&&ct.get(g);if(et&&(z=et.events)){for(Y=(y=(y||"").match(Xi)||[""]).length;Y--;)if(ge=vt=(U=_p.exec(y[Y])||[])[1],dt=(U[2]||"").split(".").sort(),ge){for(xe=S.event.special[ge]||{},se=z[ge=(C?xe.delegateType:xe.bindType)||ge]||[],U=U[2]&&new RegExp("(^|\\.)"+dt.join("\\.(?:.*\\.|)")+"(\\.|$)"),R=M=se.length;M--;)ue=se[M],(O||vt===ue.origType)&&(!w||w.guid===ue.guid)&&(!U||U.test(ue.namespace))&&(!C||C===ue.selector||"**"===C&&ue.selector)&&(se.splice(M,1),ue.selector&&se.delegateCount--,xe.remove&&xe.remove.call(g,ue));R&&!se.length&&((!xe.teardown||!1===xe.teardown.call(g,dt,et.handle))&&S.removeEvent(g,ge,et.handle),delete z[ge])}else for(ge in z)S.event.remove(g,ge+y[Y],w,C,!0);S.isEmptyObject(z)&&ct.remove(g,"handle events")}},dispatch:function(g){var y,w,C,O,M,R,U=new Array(arguments.length),z=S.event.fix(g),Y=(ct.get(this,"events")||Object.create(null))[z.type]||[],ue=S.event.special[z.type]||{};for(U[0]=z,y=1;y<arguments.length;y++)U[y]=arguments[y];if(z.delegateTarget=this,!ue.preDispatch||!1!==ue.preDispatch.call(this,z)){for(R=S.event.handlers.call(this,z,Y),y=0;(O=R[y++])&&!z.isPropagationStopped();)for(z.currentTarget=O.elem,w=0;(M=O.handlers[w++])&&!z.isImmediatePropagationStopped();)(!z.rnamespace||!1===M.namespace||z.rnamespace.test(M.namespace))&&(z.handleObj=M,z.data=M.data,void 0!==(C=((S.event.special[M.origType]||{}).handle||M.handler).apply(O.elem,U))&&!1===(z.result=C)&&(z.preventDefault(),z.stopPropagation()));return ue.postDispatch&&ue.postDispatch.call(this,z),z.result}},handlers:function(g,y){var w,C,O,M,R,U=[],z=y.delegateCount,Y=g.target;if(z&&Y.nodeType&&!("click"===g.type&&g.button>=1))for(;Y!==this;Y=Y.parentNode||this)if(1===Y.nodeType&&("click"!==g.type||!0!==Y.disabled)){for(M=[],R={},w=0;w<z;w++)void 0===R[O=(C=y[w]).selector+" "]&&(R[O]=C.needsContext?S(O,this).index(Y)>-1:S.find(O,this,null,[Y]).length),R[O]&&M.push(C);M.length&&U.push({elem:Y,handlers:M})}return Y=this,z<y.length&&U.push({elem:Y,handlers:y.slice(z)}),U},addProp:function(g,y){Object.defineProperty(S.Event.prototype,g,{enumerable:!0,configurable:!0,get:st(y)?function(){if(this.originalEvent)return y(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[g]},set:function(w){Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:w})}})},fix:function(g){return g[S.expando]?g:new S.Event(g)},special:{load:{noBubble:!0},click:{setup:function(g){var y=this||g;return Gl.test(y.type)&&y.click&&ti(y,"input")&&Q(y,"click",sl),!1},trigger:function(g){var y=this||g;return Gl.test(y.type)&&y.click&&ti(y,"input")&&Q(y,"click"),!0},_default:function(g){var y=g.target;return Gl.test(y.type)&&y.click&&ti(y,"input")&&ct.get(y,"click")||ti(y,"a")}},beforeunload:{postDispatch:function(g){void 0!==g.result&&g.originalEvent&&(g.originalEvent.returnValue=g.result)}}}},S.removeEvent=function(g,y,w){g.removeEventListener&&g.removeEventListener(y,w)},S.Event=function(g,y){if(!(this instanceof S.Event))return new S.Event(g,y);g&&g.type?(this.originalEvent=g,this.type=g.type,this.isDefaultPrevented=g.defaultPrevented||void 0===g.defaultPrevented&&!1===g.returnValue?sl:na,this.target=g.target&&3===g.target.nodeType?g.target.parentNode:g.target,this.currentTarget=g.currentTarget,this.relatedTarget=g.relatedTarget):this.type=g,y&&S.extend(this,y),this.timeStamp=g&&g.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:na,isPropagationStopped:na,isImmediatePropagationStopped:na,isSimulated:!1,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=sl,g&&!this.isSimulated&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=sl,g&&!this.isSimulated&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=sl,g&&!this.isSimulated&&g.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(g,y){S.event.special[g]={setup:function(){return Q(this,g,mm),!1},trigger:function(){return Q(this,g),!0},_default:function(){return!0},delegateType:y}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(g,y){S.event.special[g]={delegateType:y,bindType:y,handle:function(w){var C,O=this,M=w.relatedTarget,R=w.handleObj;return(!M||M!==O&&!S.contains(O,M))&&(w.type=R.origType,C=R.handler.apply(this,arguments),w.type=y),C}}}),S.fn.extend({on:function(g,y,w,C){return G(this,g,y,w,C)},one:function(g,y,w,C){return G(this,g,y,w,C,1)},off:function(g,y,w){var C,O;if(g&&g.preventDefault&&g.handleObj)return C=g.handleObj,S(g.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if("object"==typeof g){for(O in g)this.off(O,y,g[O]);return this}return(!1===y||"function"==typeof y)&&(w=y,y=void 0),!1===w&&(w=na),this.each(function(){S.event.remove(this,g,w,y)})}});var re=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Ee=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(g,y){return ti(g,"table")&&ti(11!==y.nodeType?y:y.firstChild,"tr")&&S(g).children("tbody")[0]||g}function je(g){return g.type=(null!==g.getAttribute("type"))+"/"+g.type,g}function Ge(g){return"true/"===(g.type||"").slice(0,5)?g.type=g.type.slice(5):g.removeAttribute("type"),g}function ot(g,y){var w,C,O,R,U,z;if(1===y.nodeType){if(ct.hasData(g)&&(z=ct.get(g).events))for(O in ct.remove(y,"handle events"),z)for(w=0,C=z[O].length;w<C;w++)S.event.add(y,O,z[O][w]);li.hasData(g)&&(R=li.access(g),U=S.extend({},R),li.set(y,U))}}function ht(g,y){var w=y.nodeName.toLowerCase();"input"===w&&Gl.test(g.type)?y.checked=g.checked:("input"===w||"textarea"===w)&&(y.defaultValue=g.defaultValue)}function nt(g,y,w,C){y=ln(y);var O,M,R,U,z,Y,ue=0,xe=g.length,se=xe-1,ge=y[0],dt=st(ge);if(dt||xe>1&&"string"==typeof ge&&!It.checkClone&&De.test(ge))return g.each(function(vt){var et=g.eq(vt);dt&&(y[0]=ge.call(this,vt,et.html())),nt(et,y,w,C)});if(xe&&(M=(O=ud(y,g[0].ownerDocument,!1,g,C)).firstChild,1===O.childNodes.length&&(O=M),M||C)){for(U=(R=S.map(Mi(O,"script"),je)).length;ue<xe;ue++)z=O,ue!==se&&(z=S.clone(z,!0,!0),U&&S.merge(R,Mi(z,"script"))),w.call(g[ue],z,ue);if(U)for(Y=R[R.length-1].ownerDocument,S.map(R,Ge),ue=0;ue<U;ue++)qu.test((z=R[ue]).type||"")&&!ct.access(z,"globalEval")&&S.contains(Y,z)&&(z.src&&"module"!==(z.type||"").toLowerCase()?S._evalUrl&&!z.noModule&&S._evalUrl(z.src,{nonce:z.nonce||z.getAttribute("nonce")},Y):$n(z.textContent.replace(Ee,""),z,Y))}return g}function at(g,y,w){for(var C,O=y?S.filter(y,g):g,M=0;null!=(C=O[M]);M++)!w&&1===C.nodeType&&S.cleanData(Mi(C)),C.parentNode&&(w&&zl(C)&&ld(Mi(C,"script")),C.parentNode.removeChild(C));return g}S.extend({htmlPrefilter:function(g){return g},clone:function(g,y,w){var C,O,M,R,U=g.cloneNode(!0),z=zl(g);if(!(It.noCloneChecked||1!==g.nodeType&&11!==g.nodeType||S.isXMLDoc(g)))for(R=Mi(U),C=0,O=(M=Mi(g)).length;C<O;C++)ht(M[C],R[C]);if(y)if(w)for(M=M||Mi(g),R=R||Mi(U),C=0,O=M.length;C<O;C++)ot(M[C],R[C]);else ot(g,U);return(R=Mi(U,"script")).length>0&&ld(R,!z&&Mi(g,"script")),U},cleanData:function(g){for(var y,w,C,O=S.event.special,M=0;void 0!==(w=g[M]);M++)if(Hl(w)){if(y=w[ct.expando]){if(y.events)for(C in y.events)O[C]?S.event.remove(w,C):S.removeEvent(w,C,y.handle);w[ct.expando]=void 0}w[li.expando]&&(w[li.expando]=void 0)}}}),S.fn.extend({detach:function(g){return at(this,g,!0)},remove:function(g){return at(this,g)},text:function(g){return Ur(this,function(y){return void 0===y?S.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=y)})},null,g,arguments.length)},append:function(){return nt(this,arguments,function(g){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,g).appendChild(g)})},prepend:function(){return nt(this,arguments,function(g){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var y=Ae(this,g);y.insertBefore(g,y.firstChild)}})},before:function(){return nt(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this)})},after:function(){return nt(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this.nextSibling)})},empty:function(){for(var g,y=0;null!=(g=this[y]);y++)1===g.nodeType&&(S.cleanData(Mi(g,!1)),g.textContent="");return this},clone:function(g,y){return g=null!=g&&g,y=null==y?g:y,this.map(function(){return S.clone(this,g,y)})},html:function(g){return Ur(this,function(y){var w=this[0]||{},C=0,O=this.length;if(void 0===y&&1===w.nodeType)return w.innerHTML;if("string"==typeof y&&!re.test(y)&&!Ar[(mp.exec(y)||["",""])[1].toLowerCase()]){y=S.htmlPrefilter(y);try{for(;C<O;C++)1===(w=this[C]||{}).nodeType&&(S.cleanData(Mi(w,!1)),w.innerHTML=y);w=0}catch(M){}}w&&this.empty().append(y)},null,g,arguments.length)},replaceWith:function(){var g=[];return nt(this,arguments,function(y){var w=this.parentNode;S.inArray(this,g)<0&&(S.cleanData(Mi(this)),w&&w.replaceChild(y,this))},g)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(g,y){S.fn[g]=function(w){for(var C,O=[],M=S(w),R=M.length-1,U=0;U<=R;U++)C=U===R?this:this.clone(!0),S(M[U])[y](C),En.apply(O,C.get());return this.pushStack(O)}});var Rt=new RegExp("^("+gp+")(?!px)[a-z%]+$","i"),Lt=function(g){var y=g.ownerDocument.defaultView;return(!y||!y.opener)&&(y=Ye),y.getComputedStyle(g)},Yn=function(g,y,w){var C,O,M={};for(O in y)M[O]=g.style[O],g.style[O]=y[O];for(O in C=w.call(g),y)g.style[O]=M[O];return C},vs=new RegExp(ta.join("|"),"i");function Or(g,y,w){var C,O,M,R,U=g.style;return(w=w||Lt(g))&&(""===(R=w.getPropertyValue(y)||w[y])&&!zl(g)&&(R=S.style(g,y)),!It.pixelBoxStyles()&&Rt.test(R)&&vs.test(y)&&(C=U.width,O=U.minWidth,M=U.maxWidth,U.minWidth=U.maxWidth=U.width=R,R=w.width,U.width=C,U.minWidth=O,U.maxWidth=M)),void 0!==R?R+"":R}function $i(g,y){return{get:function(){if(!g())return(this.get=y).apply(this,arguments);delete this.get}}}!function(){function g(){if(Y){z.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Y.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ma.appendChild(z).appendChild(Y);var ue=Ye.getComputedStyle(Y);w="1%"!==ue.top,U=12===y(ue.marginLeft),Y.style.right="60%",M=36===y(ue.right),C=36===y(ue.width),Y.style.position="absolute",O=12===y(Y.offsetWidth/3),Ma.removeChild(z),Y=null}}function y(ue){return Math.round(parseFloat(ue))}var w,C,O,M,R,U,z=$e.createElement("div"),Y=$e.createElement("div");!Y.style||(Y.style.backgroundClip="content-box",Y.cloneNode(!0).style.backgroundClip="",It.clearCloneStyle="content-box"===Y.style.backgroundClip,S.extend(It,{boxSizingReliable:function(){return g(),C},pixelBoxStyles:function(){return g(),M},pixelPosition:function(){return g(),w},reliableMarginLeft:function(){return g(),U},scrollboxSize:function(){return g(),O},reliableTrDimensions:function(){var ue,xe,se,ge;return null==R&&(ue=$e.createElement("table"),xe=$e.createElement("tr"),se=$e.createElement("div"),ue.style.cssText="position:absolute;left:-11111px;border-collapse:separate",xe.style.cssText="border:1px solid",xe.style.height="1px",se.style.height="9px",se.style.display="block",Ma.appendChild(ue).appendChild(xe).appendChild(se),ge=Ye.getComputedStyle(xe),R=parseInt(ge.height,10)+parseInt(ge.borderTopWidth,10)+parseInt(ge.borderBottomWidth,10)===xe.offsetHeight,Ma.removeChild(ue)),R}}))}();var zr=["Webkit","Moz","ms"],zo=$e.createElement("div").style,bs={};function Wl(g){return S.cssProps[g]||bs[g]||(g in zo?g:bs[g]=function ui(g){for(var y=g[0].toUpperCase()+g.slice(1),w=zr.length;w--;)if((g=zr[w]+y)in zo)return g}(g)||g)}var ws=/^(none|table(?!-c[ea]).+)/,ql=/^--/,cd={position:"absolute",visibility:"hidden",display:"block"},Yu={letterSpacing:"0",fontWeight:"400"};function Ku(g,y,w){var C=ol.exec(y);return C?Math.max(0,C[2]-(w||0))+(C[3]||"px"):y}function Yl(g,y,w,C,O,M){var R="width"===y?1:0,U=0,z=0;if(w===(C?"border":"content"))return 0;for(;R<4;R+=2)"margin"===w&&(z+=S.css(g,w+ta[R],!0,O)),C?("content"===w&&(z-=S.css(g,"padding"+ta[R],!0,O)),"margin"!==w&&(z-=S.css(g,"border"+ta[R]+"Width",!0,O))):(z+=S.css(g,"padding"+ta[R],!0,O),"padding"!==w?z+=S.css(g,"border"+ta[R]+"Width",!0,O):U+=S.css(g,"border"+ta[R]+"Width",!0,O));return!C&&M>=0&&(z+=Math.max(0,Math.ceil(g["offset"+y[0].toUpperCase()+y.slice(1)]-M-z-U-.5))||0),z}function Xu(g,y,w){var C=Lt(g),M=(!It.boxSizingReliable()||w)&&"border-box"===S.css(g,"boxSizing",!1,C),R=M,U=Or(g,y,C),z="offset"+y[0].toUpperCase()+y.slice(1);if(Rt.test(U)){if(!w)return U;U="auto"}return(!It.boxSizingReliable()&&M||!It.reliableTrDimensions()&&ti(g,"tr")||"auto"===U||!parseFloat(U)&&"inline"===S.css(g,"display",!1,C))&&g.getClientRects().length&&(M="border-box"===S.css(g,"boxSizing",!1,C),(R=z in g)&&(U=g[z])),(U=parseFloat(U)||0)+Yl(g,y,w||(M?"border":"content"),R,C,U)+"px"}function uo(g,y,w,C,O){return new uo.prototype.init(g,y,w,C,O)}S.extend({cssHooks:{opacity:{get:function(g,y){if(y){var w=Or(g,"opacity");return""===w?"1":w}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(g,y,w,C){if(g&&3!==g.nodeType&&8!==g.nodeType&&g.style){var O,M,R,U=lo(y),z=ql.test(y),Y=g.style;if(z||(y=Wl(U)),R=S.cssHooks[y]||S.cssHooks[U],void 0===w)return R&&"get"in R&&void 0!==(O=R.get(g,!1,C))?O:Y[y];if("string"==(M=typeof w)&&(O=ol.exec(w))&&O[1]&&(w=ad(g,y,O),M="number"),null==w||w!=w)return;"number"===M&&!z&&(w+=O&&O[3]||(S.cssNumber[U]?"":"px")),!It.clearCloneStyle&&""===w&&0===y.indexOf("background")&&(Y[y]="inherit"),(!R||!("set"in R)||void 0!==(w=R.set(g,w,C)))&&(z?Y.setProperty(y,w):Y[y]=w)}},css:function(g,y,w,C){var O,M,R,U=lo(y);return ql.test(y)||(y=Wl(U)),(R=S.cssHooks[y]||S.cssHooks[U])&&"get"in R&&(O=R.get(g,!0,w)),void 0===O&&(O=Or(g,y,C)),"normal"===O&&y in Yu&&(O=Yu[y]),""===w||w?(M=parseFloat(O),!0===w||isFinite(M)?M||0:O):O}}),S.each(["height","width"],function(g,y){S.cssHooks[y]={get:function(w,C,O){if(C)return!ws.test(S.css(w,"display"))||w.getClientRects().length&&w.getBoundingClientRect().width?Xu(w,y,O):Yn(w,cd,function(){return Xu(w,y,O)})},set:function(w,C,O){var M,R=Lt(w),U=!It.scrollboxSize()&&"absolute"===R.position,Y=(U||O)&&"border-box"===S.css(w,"boxSizing",!1,R),ue=O?Yl(w,y,O,Y,R):0;return Y&&U&&(ue-=Math.ceil(w["offset"+y[0].toUpperCase()+y.slice(1)]-parseFloat(R[y])-Yl(w,y,"border",!1,R)-.5)),ue&&(M=ol.exec(C))&&"px"!==(M[3]||"px")&&(w.style[y]=C,C=S.css(w,y)),Ku(0,C,ue)}}}),S.cssHooks.marginLeft=$i(It.reliableMarginLeft,function(g,y){if(y)return(parseFloat(Or(g,"marginLeft"))||g.getBoundingClientRect().left-Yn(g,{marginLeft:0},function(){return g.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(g,y){S.cssHooks[g+y]={expand:function(w){for(var C=0,O={},M="string"==typeof w?w.split(" "):[w];C<4;C++)O[g+ta[C]+y]=M[C]||M[C-2]||M[0];return O}},"margin"!==g&&(S.cssHooks[g+y].set=Ku)}),S.fn.extend({css:function(g,y){return Ur(this,function(w,C,O){var M,R,U={},z=0;if(Array.isArray(C)){for(M=Lt(w),R=C.length;z<R;z++)U[C[z]]=S.css(w,C[z],!1,M);return U}return void 0!==O?S.style(w,C,O):S.css(w,C)},g,y,arguments.length>1)}}),S.Tween=uo,(uo.prototype={constructor:uo,init:function(g,y,w,C,O,M){this.elem=g,this.prop=w,this.easing=O||S.easing._default,this.options=y,this.start=this.now=this.cur(),this.end=C,this.unit=M||(S.cssNumber[w]?"":"px")},cur:function(){var g=uo.propHooks[this.prop];return g&&g.get?g.get(this):uo.propHooks._default.get(this)},run:function(g){var y,w=uo.propHooks[this.prop];return this.pos=y=this.options.duration?S.easing[this.easing](g,this.options.duration*g,0,1,this.options.duration):g,this.now=(this.end-this.start)*y+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),w&&w.set?w.set(this):uo.propHooks._default.set(this),this}}).init.prototype=uo.prototype,(uo.propHooks={_default:{get:function(g){var y;return 1!==g.elem.nodeType||null!=g.elem[g.prop]&&null==g.elem.style[g.prop]?g.elem[g.prop]:(y=S.css(g.elem,g.prop,""))&&"auto"!==y?y:0},set:function(g){S.fx.step[g.prop]?S.fx.step[g.prop](g):1!==g.elem.nodeType||!S.cssHooks[g.prop]&&null==g.elem.style[Wl(g.prop)]?g.elem[g.prop]=g.now:S.style(g.elem,g.prop,g.now+g.unit)}}}).scrollTop=uo.propHooks.scrollLeft={set:function(g){g.elem.nodeType&&g.elem.parentNode&&(g.elem[g.prop]=g.now)}},S.easing={linear:function(g){return g},swing:function(g){return.5-Math.cos(g*Math.PI)/2},_default:"swing"},S.fx=uo.prototype.init,S.fx.step={};var Kl,dd,Cy=/^(?:toggle|show|hide)$/,Dy=/queueHooks$/;function yp(){dd&&(!1===$e.hidden&&Ye.requestAnimationFrame?Ye.requestAnimationFrame(yp):Ye.setTimeout(yp,S.fx.interval),S.fx.tick())}function vp(){return Ye.setTimeout(function(){Kl=void 0}),Kl=Date.now()}function Xl(g,y){var w,C=0,O={height:g};for(y=y?1:0;C<4;C+=2-y)O["margin"+(w=ta[C])]=O["padding"+w]=g;return y&&(O.opacity=O.width=g),O}function _m(g,y,w){for(var C,O=(Es.tweeners[y]||[]).concat(Es.tweeners["*"]),M=0,R=O.length;M<R;M++)if(C=O[M].call(w,y,g))return C}function Es(g,y,w){var C,O,M=0,R=Es.prefilters.length,U=S.Deferred().always(function(){delete z.elem}),z=function(){if(O)return!1;for(var xe=Kl||vp(),se=Math.max(0,Y.startTime+Y.duration-xe),dt=1-(se/Y.duration||0),vt=0,et=Y.tweens.length;vt<et;vt++)Y.tweens[vt].run(dt);return U.notifyWith(g,[Y,dt,se]),dt<1&&et?se:(et||U.notifyWith(g,[Y,1,0]),U.resolveWith(g,[Y]),!1)},Y=U.promise({elem:g,props:S.extend({},y),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},w),originalProperties:y,originalOptions:w,startTime:Kl||vp(),duration:w.duration,tweens:[],createTween:function(xe,se){var ge=S.Tween(g,Y.opts,xe,se,Y.opts.specialEasing[xe]||Y.opts.easing);return Y.tweens.push(ge),ge},stop:function(xe){var se=0,ge=xe?Y.tweens.length:0;if(O)return this;for(O=!0;se<ge;se++)Y.tweens[se].run(1);return xe?(U.notifyWith(g,[Y,1,0]),U.resolveWith(g,[Y,xe])):U.rejectWith(g,[Y,xe]),this}}),ue=Y.props;for(function wi(g,y){var w,C,O,M,R;for(w in g)if(O=y[C=lo(w)],M=g[w],Array.isArray(M)&&(O=M[1],M=g[w]=M[0]),w!==C&&(g[C]=M,delete g[w]),(R=S.cssHooks[C])&&"expand"in R)for(w in M=R.expand(M),delete g[C],M)w in g||(g[w]=M[w],y[w]=O);else y[C]=O}(ue,Y.opts.specialEasing);M<R;M++)if(C=Es.prefilters[M].call(Y,g,ue,Y.opts))return st(C.stop)&&(S._queueHooks(Y.elem,Y.opts.queue).stop=C.stop.bind(C)),C;return S.map(ue,_m,Y),st(Y.opts.start)&&Y.opts.start.call(g,Y),Y.progress(Y.opts.progress).done(Y.opts.done,Y.opts.complete).fail(Y.opts.fail).always(Y.opts.always),S.fx.timer(S.extend(z,{elem:g,anim:Y,queue:Y.opts.queue})),Y}S.Animation=S.extend(Es,{tweeners:{"*":[function(g,y){var w=this.createTween(g,y);return ad(w.elem,g,ol.exec(y),w),w}]},tweener:function(g,y){st(g)?(y=g,g=["*"]):g=g.match(Xi);for(var w,C=0,O=g.length;C<O;C++)(Es.tweeners[w=g[C]]=Es.tweeners[w]||[]).unshift(y)},prefilters:[function fd(g,y,w){var C,O,M,R,U,z,Y,ue,xe="width"in y||"height"in y,se=this,ge={},dt=g.style,vt=g.nodeType&&So(g),et=ct.get(g,"fxshow");for(C in w.queue||(null==(R=S._queueHooks(g,"fx")).unqueued&&(R.unqueued=0,U=R.empty.fire,R.empty.fire=function(){R.unqueued||U()}),R.unqueued++,se.always(function(){se.always(function(){R.unqueued--,S.queue(g,"fx").length||R.empty.fire()})})),y)if(Cy.test(O=y[C])){if(delete y[C],M=M||"toggle"===O,O===(vt?"hide":"show")){if("show"!==O||!et||void 0===et[C])continue;vt=!0}ge[C]=et&&et[C]||S.style(g,C)}if((z=!S.isEmptyObject(y))||!S.isEmptyObject(ge))for(C in xe&&1===g.nodeType&&(w.overflow=[dt.overflow,dt.overflowX,dt.overflowY],null==(Y=et&&et.display)&&(Y=ct.get(g,"display")),"none"===(ue=S.css(g,"display"))&&(Y?ue=Y:(ka([g],!0),Y=g.style.display||Y,ue=S.css(g,"display"),ka([g]))),("inline"===ue||"inline-block"===ue&&null!=Y)&&"none"===S.css(g,"float")&&(z||(se.done(function(){dt.display=Y}),null==Y&&(Y="none"===(ue=dt.display)?"":ue)),dt.display="inline-block")),w.overflow&&(dt.overflow="hidden",se.always(function(){dt.overflow=w.overflow[0],dt.overflowX=w.overflow[1],dt.overflowY=w.overflow[2]})),z=!1,ge)z||(et?"hidden"in et&&(vt=et.hidden):et=ct.access(g,"fxshow",{display:Y}),M&&(et.hidden=!vt),vt&&ka([g],!0),se.done(function(){for(C in vt||ka([g]),ct.remove(g,"fxshow"),ge)S.style(g,C,ge[C])})),z=_m(vt?et[C]:0,C,se),C in et||(et[C]=z.start,vt&&(z.end=z.start,z.start=0))}],prefilter:function(g,y){y?Es.prefilters.unshift(g):Es.prefilters.push(g)}}),S.speed=function(g,y,w){var C=g&&"object"==typeof g?S.extend({},g):{complete:w||!w&&y||st(g)&&g,duration:g,easing:w&&y||y&&!st(y)&&y};return S.fx.off?C.duration=0:"number"!=typeof C.duration&&(C.duration=C.duration in S.fx.speeds?S.fx.speeds[C.duration]:S.fx.speeds._default),(null==C.queue||!0===C.queue)&&(C.queue="fx"),C.old=C.complete,C.complete=function(){st(C.old)&&C.old.call(this),C.queue&&S.dequeue(this,C.queue)},C},S.fn.extend({fadeTo:function(g,y,w,C){return this.filter(So).css("opacity",0).show().end().animate({opacity:y},g,w,C)},animate:function(g,y,w,C){var O=S.isEmptyObject(g),M=S.speed(y,w,C),R=function(){var U=Es(this,S.extend({},g),M);(O||ct.get(this,"finish"))&&U.stop(!0)};return R.finish=R,O||!1===M.queue?this.each(R):this.queue(M.queue,R)},stop:function(g,y,w){var C=function(O){var M=O.stop;delete O.stop,M(w)};return"string"!=typeof g&&(w=y,y=g,g=void 0),y&&this.queue(g||"fx",[]),this.each(function(){var O=!0,M=null!=g&&g+"queueHooks",R=S.timers,U=ct.get(this);if(M)U[M]&&U[M].stop&&C(U[M]);else for(M in U)U[M]&&U[M].stop&&Dy.test(M)&&C(U[M]);for(M=R.length;M--;)R[M].elem===this&&(null==g||R[M].queue===g)&&(R[M].anim.stop(w),O=!1,R.splice(M,1));(O||!w)&&S.dequeue(this,g)})},finish:function(g){return!1!==g&&(g=g||"fx"),this.each(function(){var y,w=ct.get(this),C=w[g+"queue"],O=w[g+"queueHooks"],M=S.timers,R=C?C.length:0;for(w.finish=!0,S.queue(this,g,[]),O&&O.stop&&O.stop.call(this,!0),y=M.length;y--;)M[y].elem===this&&M[y].queue===g&&(M[y].anim.stop(!0),M.splice(y,1));for(y=0;y<R;y++)C[y]&&C[y].finish&&C[y].finish.call(this);delete w.finish})}}),S.each(["toggle","show","hide"],function(g,y){var w=S.fn[y];S.fn[y]=function(C,O,M){return null==C||"boolean"==typeof C?w.apply(this,arguments):this.animate(Xl(y,!0),C,O,M)}}),S.each({slideDown:Xl("show"),slideUp:Xl("hide"),slideToggle:Xl("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(g,y){S.fn[g]=function(w,C,O){return this.animate(y,w,C,O)}}),S.timers=[],S.fx.tick=function(){var g,y=0,w=S.timers;for(Kl=Date.now();y<w.length;y++)!(g=w[y])()&&w[y]===g&&w.splice(y--,1);w.length||S.fx.stop(),Kl=void 0},S.fx.timer=function(g){S.timers.push(g),S.fx.start()},S.fx.interval=13,S.fx.start=function(){dd||(dd=!0,yp())},S.fx.stop=function(){dd=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(g,y){return g=S.fx&&S.fx.speeds[g]||g,this.queue(y=y||"fx",function(w,C){var O=Ye.setTimeout(w,g);C.stop=function(){Ye.clearTimeout(O)}})},function(){var g=$e.createElement("input"),w=$e.createElement("select").appendChild($e.createElement("option"));g.type="checkbox",It.checkOn=""!==g.value,It.optSelected=w.selected,(g=$e.createElement("input")).value="t",g.type="radio",It.radioValue="t"===g.value}();var Vi,xo=S.expr.attrHandle;S.fn.extend({attr:function(g,y){return Ur(this,S.attr,g,y,arguments.length>1)},removeAttr:function(g){return this.each(function(){S.removeAttr(this,g)})}}),S.extend({attr:function(g,y,w){var C,O,M=g.nodeType;if(3!==M&&8!==M&&2!==M)return void 0===g.getAttribute?S.prop(g,y,w):((1!==M||!S.isXMLDoc(g))&&(O=S.attrHooks[y.toLowerCase()]||(S.expr.match.bool.test(y)?Vi:void 0)),void 0!==w?null===w?void S.removeAttr(g,y):O&&"set"in O&&void 0!==(C=O.set(g,w,y))?C:(g.setAttribute(y,w+""),w):O&&"get"in O&&null!==(C=O.get(g,y))?C:null==(C=S.find.attr(g,y))?void 0:C)},attrHooks:{type:{set:function(g,y){if(!It.radioValue&&"radio"===y&&ti(g,"input")){var w=g.value;return g.setAttribute("type",y),w&&(g.value=w),y}}}},removeAttr:function(g,y){var w,C=0,O=y&&y.match(Xi);if(O&&1===g.nodeType)for(;w=O[C++];)g.removeAttribute(w)}}),Vi={set:function(g,y,w){return!1===y?S.removeAttr(g,w):g.setAttribute(w,w),w}},S.each(S.expr.match.bool.source.match(/\w+/g),function(g,y){var w=xo[y]||S.find.attr;xo[y]=function(C,O,M){var R,U,z=O.toLowerCase();return M||(U=xo[z],xo[z]=R,R=null!=w(C,O,M)?z:null,xo[z]=U),R}});var hd=/^(?:input|select|textarea|button)$/i,Kn=/^(?:a|area)$/i;function To(g){return(g.match(Xi)||[]).join(" ")}function hn(g){return g.getAttribute&&g.getAttribute("class")||""}function Ju(g){return Array.isArray(g)?g:"string"==typeof g&&g.match(Xi)||[]}S.fn.extend({prop:function(g,y){return Ur(this,S.prop,g,y,arguments.length>1)},removeProp:function(g){return this.each(function(){delete this[S.propFix[g]||g]})}}),S.extend({prop:function(g,y,w){var C,O,M=g.nodeType;if(3!==M&&8!==M&&2!==M)return(1!==M||!S.isXMLDoc(g))&&(O=S.propHooks[y=S.propFix[y]||y]),void 0!==w?O&&"set"in O&&void 0!==(C=O.set(g,w,y))?C:g[y]=w:O&&"get"in O&&null!==(C=O.get(g,y))?C:g[y]},propHooks:{tabIndex:{get:function(g){var y=S.find.attr(g,"tabindex");return y?parseInt(y,10):hd.test(g.nodeName)||Kn.test(g.nodeName)&&g.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),It.optSelected||(S.propHooks.selected={get:function(g){return null},set:function(g){}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(g){var y,w,C,O,M,R,U,z=0;if(st(g))return this.each(function(Y){S(this).addClass(g.call(this,Y,hn(this)))});if((y=Ju(g)).length)for(;w=this[z++];)if(O=hn(w),C=1===w.nodeType&&" "+To(O)+" "){for(R=0;M=y[R++];)C.indexOf(" "+M+" ")<0&&(C+=M+" ");O!==(U=To(C))&&w.setAttribute("class",U)}return this},removeClass:function(g){var y,w,C,O,M,R,U,z=0;if(st(g))return this.each(function(Y){S(this).removeClass(g.call(this,Y,hn(this)))});if(!arguments.length)return this.attr("class","");if((y=Ju(g)).length)for(;w=this[z++];)if(O=hn(w),C=1===w.nodeType&&" "+To(O)+" "){for(R=0;M=y[R++];)for(;C.indexOf(" "+M+" ")>-1;)C=C.replace(" "+M+" "," ");O!==(U=To(C))&&w.setAttribute("class",U)}return this},toggleClass:function(g,y){var w=typeof g,C="string"===w||Array.isArray(g);return"boolean"==typeof y&&C?y?this.addClass(g):this.removeClass(g):st(g)?this.each(function(O){S(this).toggleClass(g.call(this,O,hn(this),y),y)}):this.each(function(){var O,M,R,U;if(C)for(M=0,R=S(this),U=Ju(g);O=U[M++];)R.hasClass(O)?R.removeClass(O):R.addClass(O);else(void 0===g||"boolean"===w)&&((O=hn(this))&&ct.set(this,"__className__",O),this.setAttribute&&this.setAttribute("class",O||!1===g?"":ct.get(this,"__className__")||""))})},hasClass:function(g){var y,w,C=0;for(y=" "+g+" ";w=this[C++];)if(1===w.nodeType&&(" "+To(hn(w))+" ").indexOf(y)>-1)return!0;return!1}});var bp=/\r/g;S.fn.extend({val:function(g){var y,w,C,O=this[0];return arguments.length?(C=st(g),this.each(function(M){var R;1===this.nodeType&&(null==(R=C?g.call(this,M,S(this).val()):g)?R="":"number"==typeof R?R+="":Array.isArray(R)&&(R=S.map(R,function(U){return null==U?"":U+""})),(!(y=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])||!("set"in y)||void 0===y.set(this,R,"value"))&&(this.value=R))})):O?(y=S.valHooks[O.type]||S.valHooks[O.nodeName.toLowerCase()])&&"get"in y&&void 0!==(w=y.get(O,"value"))?w:"string"==typeof(w=O.value)?w.replace(bp,""):null==w?"":w:void 0}}),S.extend({valHooks:{option:{get:function(g){var y=S.find.attr(g,"value");return null!=y?y:To(S.text(g))}},select:{get:function(g){var y,w,C,O=g.options,M=g.selectedIndex,R="select-one"===g.type,U=R?null:[],z=R?M+1:O.length;for(C=M<0?z:R?M:0;C<z;C++)if(((w=O[C]).selected||C===M)&&!w.disabled&&(!w.parentNode.disabled||!ti(w.parentNode,"optgroup"))){if(y=S(w).val(),R)return y;U.push(y)}return U},set:function(g,y){for(var w,C,O=g.options,M=S.makeArray(y),R=O.length;R--;)((C=O[R]).selected=S.inArray(S.valHooks.option.get(C),M)>-1)&&(w=!0);return w||(g.selectedIndex=-1),M}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(g,y){if(Array.isArray(y))return g.checked=S.inArray(S(g).val(),y)>-1}},It.checkOn||(S.valHooks[this].get=function(g){return null===g.getAttribute("value")?"on":g.value})}),It.focusin="onfocusin"in Ye;var pn=/^(?:focusinfocus|focusoutblur)$/,zt=function(g){g.stopPropagation()};S.extend(S.event,{trigger:function(g,y,w,C){var O,M,R,U,z,Y,ue,xe,se=[w||$e],ge=ei.call(g,"type")?g.type:g,dt=ei.call(g,"namespace")?g.namespace.split("."):[];if(M=xe=R=w=w||$e,3!==w.nodeType&&8!==w.nodeType&&!pn.test(ge+S.event.triggered)&&(ge.indexOf(".")>-1&&(dt=ge.split("."),ge=dt.shift(),dt.sort()),z=ge.indexOf(":")<0&&"on"+ge,(g=g[S.expando]?g:new S.Event(ge,"object"==typeof g&&g)).isTrigger=C?2:3,g.namespace=dt.join("."),g.rnamespace=g.namespace?new RegExp("(^|\\.)"+dt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g.result=void 0,g.target||(g.target=w),y=null==y?[g]:S.makeArray(y,[g]),ue=S.event.special[ge]||{},C||!ue.trigger||!1!==ue.trigger.apply(w,y))){if(!C&&!ue.noBubble&&!Yi(w)){for(pn.test((U=ue.delegateType||ge)+ge)||(M=M.parentNode);M;M=M.parentNode)se.push(M),R=M;R===(w.ownerDocument||$e)&&se.push(R.defaultView||R.parentWindow||Ye)}for(O=0;(M=se[O++])&&!g.isPropagationStopped();)xe=M,g.type=O>1?U:ue.bindType||ge,(Y=(ct.get(M,"events")||Object.create(null))[g.type]&&ct.get(M,"handle"))&&Y.apply(M,y),(Y=z&&M[z])&&Y.apply&&Hl(M)&&(g.result=Y.apply(M,y),!1===g.result&&g.preventDefault());return g.type=ge,!C&&!g.isDefaultPrevented()&&(!ue._default||!1===ue._default.apply(se.pop(),y))&&Hl(w)&&z&&st(w[ge])&&!Yi(w)&&((R=w[z])&&(w[z]=null),S.event.triggered=ge,g.isPropagationStopped()&&xe.addEventListener(ge,zt),w[ge](),g.isPropagationStopped()&&xe.removeEventListener(ge,zt),S.event.triggered=void 0,R&&(w[z]=R)),g.result}},simulate:function(g,y,w){var C=S.extend(new S.Event,w,{type:g,isSimulated:!0});S.event.trigger(C,null,y)}}),S.fn.extend({trigger:function(g,y){return this.each(function(){S.event.trigger(g,y,this)})},triggerHandler:function(g,y){var w=this[0];if(w)return S.event.trigger(g,y,w,!0)}}),It.focusin||S.each({focus:"focusin",blur:"focusout"},function(g,y){var w=function(C){S.event.simulate(y,C.target,S.event.fix(C))};S.event.special[y]={setup:function(){var C=this.ownerDocument||this.document||this,O=ct.access(C,y);O||C.addEventListener(g,w,!0),ct.access(C,y,(O||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,O=ct.access(C,y)-1;O?ct.access(C,y,O):(C.removeEventListener(g,w,!0),ct.remove(C,y))}}});var Qu=Ye.location,Tf={guid:Date.now()},Pt=/\?/;S.parseXML=function(g){var y,w;if(!g||"string"!=typeof g)return null;try{y=(new Ye.DOMParser).parseFromString(g,"text/xml")}catch(C){}return w=y&&y.getElementsByTagName("parsererror")[0],(!y||w)&&S.error("Invalid XML: "+(w?S.map(w.childNodes,function(C){return C.textContent}).join("\n"):g)),y};var wp=/\[\]$/,jt=/\r?\n/g,Gr=/^(?:submit|button|image|reset|file)$/i,ym=/^(?:input|select|textarea|keygen)/i;function vm(g,y,w,C){var O;if(Array.isArray(y))S.each(y,function(M,R){w||wp.test(g)?C(g,R):vm(g+"["+("object"==typeof R&&null!=R?M:"")+"]",R,w,C)});else if(w||"object"!==Jt(y))C(g,y);else for(O in y)vm(g+"["+O+"]",y[O],w,C)}S.param=function(g,y){var w,C=[],O=function(M,R){var U=st(R)?R():R;C[C.length]=encodeURIComponent(M)+"="+encodeURIComponent(null==U?"":U)};if(null==g)return"";if(Array.isArray(g)||g.jquery&&!S.isPlainObject(g))S.each(g,function(){O(this.name,this.value)});else for(w in g)vm(w,g[w],y,O);return C.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var g=S.prop(this,"elements");return g?S.makeArray(g):this}).filter(function(){var g=this.type;return this.name&&!S(this).is(":disabled")&&ym.test(this.nodeName)&&!Gr.test(g)&&(this.checked||!Gl.test(g))}).map(function(g,y){var w=S(this).val();return null==w?null:Array.isArray(w)?S.map(w,function(C){return{name:y.name,value:C.replace(jt,"\r\n")}}):{name:y.name,value:w.replace(jt,"\r\n")}}).get()}});var Sy=/%20/g,pd=/#.*$/,Ao=/([?&])_=[^&]*/,zw=/^(.*?):[ \t]*([^\r\n]*)$/gm,bm=/^(?:GET|HEAD)$/,ia=/^\/\//,Ty={},gd={},Ay="*/".concat("*"),Af=$e.createElement("a");function wm(g){return function(y,w){"string"!=typeof y&&(w=y,y="*");var C,O=0,M=y.toLowerCase().match(Xi)||[];if(st(w))for(;C=M[O++];)"+"===C[0]?(C=C.slice(1)||"*",(g[C]=g[C]||[]).unshift(w)):(g[C]=g[C]||[]).push(w)}}function Oy(g,y,w,C){var O={},M=g===gd;function R(U){var z;return O[U]=!0,S.each(g[U]||[],function(Y,ue){var xe=ue(y,w,C);return"string"!=typeof xe||M||O[xe]?M?!(z=xe):void 0:(y.dataTypes.unshift(xe),R(xe),!1)}),z}return R(y.dataTypes[0])||!O["*"]&&R("*")}function Ep(g,y){var w,C,O=S.ajaxSettings.flatOptions||{};for(w in y)void 0!==y[w]&&((O[w]?g:C||(C={}))[w]=y[w]);return C&&S.extend(!0,g,C),g}Af.href=Qu.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qu.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Qu.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ay,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(g,y){return y?Ep(Ep(g,S.ajaxSettings),y):Ep(S.ajaxSettings,g)},ajaxPrefilter:wm(Ty),ajaxTransport:wm(gd),ajax:function(g,y){"object"==typeof g&&(y=g,g=void 0);var w,C,O,M,R,U,z,Y,ue,xe,se=S.ajaxSetup({},y=y||{}),ge=se.context||se,dt=se.context&&(ge.nodeType||ge.jquery)?S(ge):S.event,vt=S.Deferred(),et=S.Callbacks("once memory"),sr=se.statusCode||{},ki={},ci={},In="canceled",Ft={readyState:0,getResponseHeader:function(Cn){var Ct;if(z){if(!M)for(M={};Ct=zw.exec(O);)M[Ct[1].toLowerCase()+" "]=(M[Ct[1].toLowerCase()+" "]||[]).concat(Ct[2]);Ct=M[Cn.toLowerCase()+" "]}return null==Ct?null:Ct.join(", ")},getAllResponseHeaders:function(){return z?O:null},setRequestHeader:function(Cn,Ct){return null==z&&(Cn=ci[Cn.toLowerCase()]=ci[Cn.toLowerCase()]||Cn,ki[Cn]=Ct),this},overrideMimeType:function(Cn){return null==z&&(se.mimeType=Cn),this},statusCode:function(Cn){var Ct;if(Cn)if(z)Ft.always(Cn[Ft.status]);else for(Ct in Cn)sr[Ct]=[sr[Ct],Cn[Ct]];return this},abort:function(Cn){var Ct=Cn||In;return w&&w.abort(Ct),co(0,Ct),this}};if(vt.promise(Ft),se.url=((g||se.url||Qu.href)+"").replace(ia,Qu.protocol+"//"),se.type=y.method||y.type||se.method||se.type,se.dataTypes=(se.dataType||"*").toLowerCase().match(Xi)||[""],null==se.crossDomain){U=$e.createElement("a");try{U.href=se.url,U.href=U.href,se.crossDomain=Af.protocol+"//"+Af.host!=U.protocol+"//"+U.host}catch(Cn){se.crossDomain=!0}}if(se.data&&se.processData&&"string"!=typeof se.data&&(se.data=S.param(se.data,se.traditional)),Oy(Ty,se,y,Ft),z)return Ft;for(ue in(Y=S.event&&se.global)&&0==S.active++&&S.event.trigger("ajaxStart"),se.type=se.type.toUpperCase(),se.hasContent=!bm.test(se.type),C=se.url.replace(pd,""),se.hasContent?se.data&&se.processData&&0===(se.contentType||"").indexOf("application/x-www-form-urlencoded")&&(se.data=se.data.replace(Sy,"+")):(xe=se.url.slice(C.length),se.data&&(se.processData||"string"==typeof se.data)&&(C+=(Pt.test(C)?"&":"?")+se.data,delete se.data),!1===se.cache&&(C=C.replace(Ao,"$1"),xe=(Pt.test(C)?"&":"?")+"_="+Tf.guid+++xe),se.url=C+xe),se.ifModified&&(S.lastModified[C]&&Ft.setRequestHeader("If-Modified-Since",S.lastModified[C]),S.etag[C]&&Ft.setRequestHeader("If-None-Match",S.etag[C])),(se.data&&se.hasContent&&!1!==se.contentType||y.contentType)&&Ft.setRequestHeader("Content-Type",se.contentType),Ft.setRequestHeader("Accept",se.dataTypes[0]&&se.accepts[se.dataTypes[0]]?se.accepts[se.dataTypes[0]]+("*"!==se.dataTypes[0]?", "+Ay+"; q=0.01":""):se.accepts["*"]),se.headers)Ft.setRequestHeader(ue,se.headers[ue]);if(se.beforeSend&&(!1===se.beforeSend.call(ge,Ft,se)||z))return Ft.abort();if(In="abort",et.add(se.complete),Ft.done(se.success),Ft.fail(se.error),w=Oy(gd,se,y,Ft)){if(Ft.readyState=1,Y&&dt.trigger("ajaxSend",[Ft,se]),z)return Ft;se.async&&se.timeout>0&&(R=Ye.setTimeout(function(){Ft.abort("timeout")},se.timeout));try{z=!1,w.send(ki,co)}catch(Cn){if(z)throw Cn;co(-1,Cn)}}else co(-1,"No Transport");function co(Cn,Ct,Nf,Cp){var ar,Dn,Cs,vr,Go,No=Ct;z||(z=!0,R&&Ye.clearTimeout(R),w=void 0,O=Cp||"",Ft.readyState=Cn>0?4:0,ar=Cn>=200&&Cn<300||304===Cn,Nf&&(vr=function Gw(g,y,w){for(var C,O,M,R,U=g.contents,z=g.dataTypes;"*"===z[0];)z.shift(),void 0===C&&(C=g.mimeType||y.getResponseHeader("Content-Type"));if(C)for(O in U)if(U[O]&&U[O].test(C)){z.unshift(O);break}if(z[0]in w)M=z[0];else{for(O in w){if(!z[0]||g.converters[O+" "+z[0]]){M=O;break}R||(R=O)}M=M||R}if(M)return M!==z[0]&&z.unshift(M),w[M]}(se,Ft,Nf)),!ar&&S.inArray("script",se.dataTypes)>-1&&S.inArray("json",se.dataTypes)<0&&(se.converters["text script"]=function(){}),vr=function Oo(g,y,w,C){var O,M,R,U,z,Y={},ue=g.dataTypes.slice();if(ue[1])for(R in g.converters)Y[R.toLowerCase()]=g.converters[R];for(M=ue.shift();M;)if(g.responseFields[M]&&(w[g.responseFields[M]]=y),!z&&C&&g.dataFilter&&(y=g.dataFilter(y,g.dataType)),z=M,M=ue.shift())if("*"===M)M=z;else if("*"!==z&&z!==M){if(!(R=Y[z+" "+M]||Y["* "+M]))for(O in Y)if((U=O.split(" "))[1]===M&&(R=Y[z+" "+U[0]]||Y["* "+U[0]])){!0===R?R=Y[O]:!0!==Y[O]&&(M=U[0],ue.unshift(U[1]));break}if(!0!==R)if(R&&g.throws)y=R(y);else try{y=R(y)}catch(xe){return{state:"parsererror",error:R?xe:"No conversion from "+z+" to "+M}}}return{state:"success",data:y}}(se,vr,Ft,ar),ar?(se.ifModified&&((Go=Ft.getResponseHeader("Last-Modified"))&&(S.lastModified[C]=Go),(Go=Ft.getResponseHeader("etag"))&&(S.etag[C]=Go)),204===Cn||"HEAD"===se.type?No="nocontent":304===Cn?No="notmodified":(No=vr.state,Dn=vr.data,ar=!(Cs=vr.error))):(Cs=No,(Cn||!No)&&(No="error",Cn<0&&(Cn=0))),Ft.status=Cn,Ft.statusText=(Ct||No)+"",ar?vt.resolveWith(ge,[Dn,No,Ft]):vt.rejectWith(ge,[Ft,No,Cs]),Ft.statusCode(sr),sr=void 0,Y&&dt.trigger(ar?"ajaxSuccess":"ajaxError",[Ft,se,ar?Dn:Cs]),et.fireWith(ge,[Ft,No]),Y&&(dt.trigger("ajaxComplete",[Ft,se]),--S.active||S.event.trigger("ajaxStop")))}return Ft},getJSON:function(g,y,w){return S.get(g,y,w,"json")},getScript:function(g,y){return S.get(g,void 0,y,"script")}}),S.each(["get","post"],function(g,y){S[y]=function(w,C,O,M){return st(C)&&(M=M||O,O=C,C=void 0),S.ajax(S.extend({url:w,type:y,dataType:M,data:C,success:O},S.isPlainObject(w)&&w))}}),S.ajaxPrefilter(function(g){var y;for(y in g.headers)"content-type"===y.toLowerCase()&&(g.contentType=g.headers[y]||"")}),S._evalUrl=function(g,y,w){return S.ajax({url:g,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){S.globalEval(C,y,w)}})},S.fn.extend({wrapAll:function(g){var y;return this[0]&&(st(g)&&(g=g.call(this[0])),y=S(g,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&y.insertBefore(this[0]),y.map(function(){for(var w=this;w.firstElementChild;)w=w.firstElementChild;return w}).append(this)),this},wrapInner:function(g){return st(g)?this.each(function(y){S(this).wrapInner(g.call(this,y))}):this.each(function(){var y=S(this),w=y.contents();w.length?w.wrapAll(g):y.append(g)})},wrap:function(g){var y=st(g);return this.each(function(w){S(this).wrapAll(y?g.call(this,w):g)})},unwrap:function(g){return this.parent(g).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(g){return!S.expr.pseudos.visible(g)},S.expr.pseudos.visible=function(g){return!!(g.offsetWidth||g.offsetHeight||g.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new Ye.XMLHttpRequest}catch(g){}};var oi={0:200,1223:204},Of=S.ajaxSettings.xhr();It.cors=!!Of&&"withCredentials"in Of,It.ajax=Of=!!Of,S.ajaxTransport(function(g){var y,w;if(It.cors||Of&&!g.crossDomain)return{send:function(C,O){var M,R=g.xhr();if(R.open(g.type,g.url,g.async,g.username,g.password),g.xhrFields)for(M in g.xhrFields)R[M]=g.xhrFields[M];for(M in g.mimeType&&R.overrideMimeType&&R.overrideMimeType(g.mimeType),!g.crossDomain&&!C["X-Requested-With"]&&(C["X-Requested-With"]="XMLHttpRequest"),C)R.setRequestHeader(M,C[M]);y=function(U){return function(){y&&(y=w=R.onload=R.onerror=R.onabort=R.ontimeout=R.onreadystatechange=null,"abort"===U?R.abort():"error"===U?"number"!=typeof R.status?O(0,"error"):O(R.status,R.statusText):O(oi[R.status]||R.status,R.statusText,"text"!==(R.responseType||"text")||"string"!=typeof R.responseText?{binary:R.response}:{text:R.responseText},R.getAllResponseHeaders()))}},R.onload=y(),w=R.onerror=R.ontimeout=y("error"),void 0!==R.onabort?R.onabort=w:R.onreadystatechange=function(){4===R.readyState&&Ye.setTimeout(function(){y&&w()})},y=y("abort");try{R.send(g.hasContent&&g.data||null)}catch(U){if(y)throw U}},abort:function(){y&&y()}}}),S.ajaxPrefilter(function(g){g.crossDomain&&(g.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(g){return S.globalEval(g),g}}}),S.ajaxPrefilter("script",function(g){void 0===g.cache&&(g.cache=!1),g.crossDomain&&(g.type="GET")}),S.ajaxTransport("script",function(g){var y,w;if(g.crossDomain||g.scriptAttrs)return{send:function(C,O){y=S("<script>").attr(g.scriptAttrs||{}).prop({charset:g.scriptCharset,src:g.url}).on("load error",w=function(M){y.remove(),w=null,M&&O("error"===M.type?404:200,M.type)}),$e.head.appendChild(y[0])},abort:function(){w&&w()}}});var g,Ny=[],Em=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var g=Ny.pop()||S.expando+"_"+Tf.guid++;return this[g]=!0,g}}),S.ajaxPrefilter("json jsonp",function(g,y,w){var C,O,M,R=!1!==g.jsonp&&(Em.test(g.url)?"url":"string"==typeof g.data&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&Em.test(g.data)&&"data");if(R||"jsonp"===g.dataTypes[0])return C=g.jsonpCallback=st(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,R?g[R]=g[R].replace(Em,"$1"+C):!1!==g.jsonp&&(g.url+=(Pt.test(g.url)?"&":"?")+g.jsonp+"="+C),g.converters["script json"]=function(){return M||S.error(C+" was not called"),M[0]},g.dataTypes[0]="json",O=Ye[C],Ye[C]=function(){M=arguments},w.always(function(){void 0===O?S(Ye).removeProp(C):Ye[C]=O,g[C]&&(g.jsonpCallback=y.jsonpCallback,Ny.push(C)),M&&st(O)&&O(M[0]),M=O=void 0}),"script"}),It.createHTMLDocument=((g=$e.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===g.childNodes.length),S.parseHTML=function(g,y,w){return"string"!=typeof g?[]:("boolean"==typeof y&&(w=y,y=!1),y||(It.createHTMLDocument?((C=(y=$e.implementation.createHTMLDocument("")).createElement("base")).href=$e.location.href,y.head.appendChild(C)):y=$e),M=!w&&[],(O=ms.exec(g))?[y.createElement(O[1])]:(O=ud([g],y,M),M&&M.length&&S(M).remove(),S.merge([],O.childNodes)));var C,O,M},S.fn.load=function(g,y,w){var C,O,M,R=this,U=g.indexOf(" ");return U>-1&&(C=To(g.slice(U)),g=g.slice(0,U)),st(y)?(w=y,y=void 0):y&&"object"==typeof y&&(O="POST"),R.length>0&&S.ajax({url:g,type:O||"GET",dataType:"html",data:y}).done(function(z){M=arguments,R.html(C?S("<div>").append(S.parseHTML(z)).find(C):z)}).always(w&&function(z,Y){R.each(function(){w.apply(this,M||[z.responseText,Y,z])})}),this},S.expr.pseudos.animated=function(g){return S.grep(S.timers,function(y){return g===y.elem}).length},S.offset={setOffset:function(g,y,w){var C,O,M,R,U,z,ue=S.css(g,"position"),xe=S(g),se={};"static"===ue&&(g.style.position="relative"),U=xe.offset(),M=S.css(g,"top"),z=S.css(g,"left"),("absolute"===ue||"fixed"===ue)&&(M+z).indexOf("auto")>-1?(R=(C=xe.position()).top,O=C.left):(R=parseFloat(M)||0,O=parseFloat(z)||0),st(y)&&(y=y.call(g,w,S.extend({},U))),null!=y.top&&(se.top=y.top-U.top+R),null!=y.left&&(se.left=y.left-U.left+O),"using"in y?y.using.call(g,se):xe.css(se)}},S.fn.extend({offset:function(g){if(arguments.length)return void 0===g?this:this.each(function(O){S.offset.setOffset(this,g,O)});var y,w,C=this[0];return C?C.getClientRects().length?{top:(y=C.getBoundingClientRect()).top+(w=C.ownerDocument.defaultView).pageYOffset,left:y.left+w.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var g,y,w,C=this[0],O={top:0,left:0};if("fixed"===S.css(C,"position"))y=C.getBoundingClientRect();else{for(y=this.offset(),w=C.ownerDocument,g=C.offsetParent||w.documentElement;g&&(g===w.body||g===w.documentElement)&&"static"===S.css(g,"position");)g=g.parentNode;g&&g!==C&&1===g.nodeType&&((O=S(g).offset()).top+=S.css(g,"borderTopWidth",!0),O.left+=S.css(g,"borderLeftWidth",!0))}return{top:y.top-O.top-S.css(C,"marginTop",!0),left:y.left-O.left-S.css(C,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var g=this.offsetParent;g&&"static"===S.css(g,"position");)g=g.offsetParent;return g||Ma})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(g,y){var w="pageYOffset"===y;S.fn[g]=function(C){return Ur(this,function(O,M,R){var U;if(Yi(O)?U=O:9===O.nodeType&&(U=O.defaultView),void 0===R)return U?U[y]:O[M];U?U.scrollTo(w?U.pageXOffset:R,w?R:U.pageYOffset):O[M]=R},g,C,arguments.length)}}),S.each(["top","left"],function(g,y){S.cssHooks[y]=$i(It.pixelPosition,function(w,C){if(C)return C=Or(w,y),Rt.test(C)?S(w).position()[y]+"px":C})}),S.each({Height:"height",Width:"width"},function(g,y){S.each({padding:"inner"+g,content:y,"":"outer"+g},function(w,C){S.fn[C]=function(O,M){var R=arguments.length&&(w||"boolean"!=typeof O),U=w||(!0===O||!0===M?"margin":"border");return Ur(this,function(z,Y,ue){var xe;return Yi(z)?0===C.indexOf("outer")?z["inner"+g]:z.document.documentElement["client"+g]:9===z.nodeType?(xe=z.documentElement,Math.max(z.body["scroll"+g],xe["scroll"+g],z.body["offset"+g],xe["offset"+g],xe["client"+g])):void 0===ue?S.css(z,Y,U):S.style(z,Y,ue,U)},y,R?O:void 0,R)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(g,y){S.fn[y]=function(w){return this.on(y,w)}}),S.fn.extend({bind:function(g,y,w){return this.on(g,null,y,w)},unbind:function(g,y){return this.off(g,null,y)},delegate:function(g,y,w,C){return this.on(y,g,w,C)},undelegate:function(g,y,w){return 1===arguments.length?this.off(g,"**"):this.off(y,g||"**",w)},hover:function(g,y){return this.mouseenter(g).mouseleave(y||g)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(g,y){S.fn[y]=function(w,C){return arguments.length>0?this.on(y,null,w,C):this.trigger(y)}});var lt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(g,y){var w,C,O;if("string"==typeof y&&(w=g[y],y=g,g=w),st(g))return C=wn.call(arguments,2),O=function(){return g.apply(y||this,C.concat(wn.call(arguments)))},O.guid=g.guid=g.guid||S.guid++,O},S.holdReady=function(g){g?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=ti,S.isFunction=st,S.isWindow=Yi,S.camelCase=lo,S.type=Jt,S.now=Date.now,S.isNumeric=function(g){var y=S.type(g);return("number"===y||"string"===y)&&!isNaN(g-parseFloat(g))},S.trim=function(g){return null==g?"":(g+"").replace(lt,"")},void 0!==(yt=function(){return S}.apply(so,[]))&&(oo.exports=yt);var Jl=Ye.jQuery,un=Ye.$;return S.noConflict=function(g){return Ye.$===S&&(Ye.$=un),g&&Ye.jQuery===S&&(Ye.jQuery=Jl),S},void 0===yn&&(Ye.jQuery=Ye.$=S),S})},483:(oo,so,Le)=>{"use strict";Le.r(so),Le.d(so,{default:()=>mm});var yt="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,Ye=function(){for(var P=["Edge","Trident","Firefox"],G=0;G<P.length;G+=1)if(yt&&navigator.userAgent.indexOf(P[G])>=0)return 1;return 0}(),wn=yt&&window.Promise?function yn(P){var G=!1;return function(){G||(G=!0,window.Promise.resolve().then(function(){G=!1,P()}))}}:function Gt(P){var G=!1;return function(){G||(G=!0,setTimeout(function(){G=!1,P()},Ye))}};function ln(P){return P&&"[object Function]"==={}.toString.call(P)}function En(P,G){if(1!==P.nodeType)return[];var re=P.ownerDocument.defaultView.getComputedStyle(P,null);return G?re[G]:re}function Wt(P){return"HTML"===P.nodeName?P:P.parentNode||P.host}function Ut(P){if(!P)return document.body;switch(P.nodeName){case"HTML":case"BODY":return P.ownerDocument.body;case"#document":return P.body}var G=En(P);return/(auto|scroll|overlay)/.test(G.overflow+G.overflowY+G.overflowX)?P:Ut(Wt(P))}function Vt(P){return P&&P.referenceNode?P.referenceNode:P}var ei=yt&&!(!window.MSInputMethodContext||!document.documentMode),Tr=yt&&/MSIE 10/.test(navigator.userAgent);function ir(P){return 11===P?ei:10===P?Tr:ei||Tr}function It(P){if(!P)return document.documentElement;for(var G=ir(10)?document.body:null,Q=P.offsetParent||null;Q===G&&P.nextElementSibling;)Q=(P=P.nextElementSibling).offsetParent;var re=Q&&Q.nodeName;return re&&"BODY"!==re&&"HTML"!==re?-1!==["TH","TD","TABLE"].indexOf(Q.nodeName)&&"static"===En(Q,"position")?It(Q):Q:P?P.ownerDocument.documentElement:document.documentElement}function Yi(P){return null!==P.parentNode?Yi(P.parentNode):P}function $e(P,G){if(!(P&&P.nodeType&&G&&G.nodeType))return document.documentElement;var Q=P.compareDocumentPosition(G)&Node.DOCUMENT_POSITION_FOLLOWING,re=Q?P:G,De=Q?G:P,Ee=document.createRange();Ee.setStart(re,0),Ee.setEnd(De,0);var Ae=Ee.commonAncestorContainer;if(P!==Ae&&G!==Ae||re.contains(De))return function st(P){var G=P.nodeName;return"BODY"!==G&&("HTML"===G||It(P.firstElementChild)===P)}(Ae)?Ae:It(Ae);var je=Yi(P);return je.host?$e(je.host,G):$e(P,Yi(G).host)}function we(P){var G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",Q="top"===G?"scrollTop":"scrollLeft",re=P.nodeName;if("BODY"===re||"HTML"===re){var De=P.ownerDocument.documentElement,Ee=P.ownerDocument.scrollingElement||De;return Ee[Q]}return P[Q]}function $n(P,G){var Q=arguments.length>2&&void 0!==arguments[2]&&arguments[2],re=we(G,"top"),De=we(G,"left"),Ee=Q?-1:1;return P.top+=re*Ee,P.bottom+=re*Ee,P.left+=De*Ee,P.right+=De*Ee,P}function Jt(P,G){var Q="x"===G?"Left":"Top",re="Left"===Q?"Right":"Bottom";return parseFloat(P["border"+Q+"Width"])+parseFloat(P["border"+re+"Width"])}function Vn(P,G,Q,re){return Math.max(G["offset"+P],G["scroll"+P],Q["client"+P],Q["offset"+P],Q["scroll"+P],ir(10)?parseInt(Q["offset"+P])+parseInt(re["margin"+("Height"===P?"Top":"Left")])+parseInt(re["margin"+("Height"===P?"Bottom":"Right")]):0)}function S(P){var G=P.body,Q=P.documentElement,re=ir(10)&&getComputedStyle(Q);return{height:Vn("Height",G,Q,re),width:Vn("Width",G,Q,re)}}var rr=function(P,G){if(!(P instanceof G))throw new TypeError("Cannot call a class as a function")},ao=function(){function P(G,Q){for(var re=0;re<Q.length;re++){var De=Q[re];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(G,De.key,De)}}return function(G,Q,re){return Q&&P(G.prototype,Q),re&&P(G,re),G}}(),Ni=function(P,G,Q){return G in P?Object.defineProperty(P,G,{value:Q,enumerable:!0,configurable:!0,writable:!0}):P[G]=Q,P},bi=Object.assign||function(P){for(var G=1;G<arguments.length;G++){var Q=arguments[G];for(var re in Q)Object.prototype.hasOwnProperty.call(Q,re)&&(P[re]=Q[re])}return P};function Ki(P){return bi({},P,{right:P.left+P.width,bottom:P.top+P.height})}function ti(P){var G={};try{if(ir(10)){G=P.getBoundingClientRect();var Q=we(P,"top"),re=we(P,"left");G.top+=Q,G.left+=re,G.bottom+=Q,G.right+=re}else G=P.getBoundingClientRect()}catch(nt){}var De={left:G.left,top:G.top,width:G.right-G.left,height:G.bottom-G.top},Ee="HTML"===P.nodeName?S(P.ownerDocument):{},Ge=P.offsetWidth-(Ee.width||P.clientWidth||De.width),ot=P.offsetHeight-(Ee.height||P.clientHeight||De.height);if(Ge||ot){var ht=En(P);Ge-=Jt(ht,"x"),ot-=Jt(ht,"y"),De.width-=Ge,De.height-=ot}return Ki(De)}function ms(P,G){var Q=arguments.length>2&&void 0!==arguments[2]&&arguments[2],re=ir(10),De="HTML"===G.nodeName,Ee=ti(P),Ae=ti(G),je=Ut(P),Ge=En(G),ot=parseFloat(Ge.borderTopWidth),ht=parseFloat(Ge.borderLeftWidth);Q&&De&&(Ae.top=Math.max(Ae.top,0),Ae.left=Math.max(Ae.left,0));var nt=Ki({top:Ee.top-Ae.top-ot,left:Ee.left-Ae.left-ht,width:Ee.width,height:Ee.height});if(nt.marginTop=0,nt.marginLeft=0,!re&&De){var at=parseFloat(Ge.marginTop),Rt=parseFloat(Ge.marginLeft);nt.top-=ot-at,nt.bottom-=ot-at,nt.left-=ht-Rt,nt.right-=ht-Rt,nt.marginTop=at,nt.marginLeft=Rt}return(re&&!Q?G.contains(je):G===je&&"BODY"!==je.nodeName)&&(nt=$n(nt,G)),nt}function _s(P){var G=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Q=P.ownerDocument.documentElement,re=ms(P,Q),De=Math.max(Q.clientWidth,window.innerWidth||0),Ee=Math.max(Q.clientHeight,window.innerHeight||0),Ae=G?0:we(Q),je=G?0:we(Q,"left"),Ge={top:Ae-re.top+re.marginTop,left:je-re.left+re.marginLeft,width:De,height:Ee};return Ki(Ge)}function ys(P){var G=P.nodeName;if("BODY"===G||"HTML"===G)return!1;if("fixed"===En(P,"position"))return!0;var Q=Wt(P);return!!Q&&ys(Q)}function _r(P){if(!P||!P.parentElement||ir())return document.documentElement;for(var G=P.parentElement;G&&"none"===En(G,"transform");)G=G.parentElement;return G||document.documentElement}function yr(P,G,Q,re){var De=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Ee={top:0,left:0},Ae=De?_r(P):$e(P,Vt(G));if("viewport"===re)Ee=_s(Ae,De);else{var je=void 0;"scrollParent"===re?"BODY"===(je=Ut(Wt(G))).nodeName&&(je=P.ownerDocument.documentElement):je="window"===re?P.ownerDocument.documentElement:re;var Ge=ms(je,Ae,De);if("HTML"!==je.nodeName||ys(Ae))Ee=Ge;else{var ot=S(P.ownerDocument),ht=ot.height,nt=ot.width;Ee.top+=Ge.top-Ge.marginTop,Ee.bottom=ht+Ge.top,Ee.left+=Ge.left-Ge.marginLeft,Ee.right=nt+Ge.left}}var at="number"==typeof(Q=Q||0);return Ee.left+=at?Q:Q.left||0,Ee.top+=at?Q:Q.top||0,Ee.right-=at?Q:Q.right||0,Ee.bottom-=at?Q:Q.bottom||0,Ee}function Uu(P){return P.width*P.height}function Vl(P,G,Q,re,De){var Ee=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===P.indexOf("auto"))return P;var Ae=yr(Q,re,Ee,De),je={top:{width:Ae.width,height:G.top-Ae.top},right:{width:Ae.right-G.right,height:Ae.height},bottom:{width:Ae.width,height:Ae.bottom-G.bottom},left:{width:G.left-Ae.left,height:Ae.height}},Ge=Object.keys(je).map(function(at){return bi({key:at},je[at],{area:Uu(je[at])})}).sort(function(at,Rt){return Rt.area-at.area}),ot=Ge.filter(function(at){return at.width>=Q.clientWidth&&at.height>=Q.clientHeight}),ht=ot.length>0?ot[0].key:Ge[0].key,nt=P.split("-")[1];return ht+(nt?"-"+nt:"")}function ea(P,G,Q){var re=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,De=re?_r(G):$e(G,Vt(Q));return ms(Q,De,re)}function Xi(P){var Q=P.ownerDocument.defaultView.getComputedStyle(P),re=parseFloat(Q.marginTop||0)+parseFloat(Q.marginBottom||0),De=parseFloat(Q.marginLeft||0)+parseFloat(Q.marginRight||0);return{width:P.offsetWidth+De,height:P.offsetHeight+re}}function rl(P){var G={left:"right",right:"left",bottom:"top",top:"bottom"};return P.replace(/left|right|bottom|top/g,function(Q){return G[Q]})}function or(P,G,Q){Q=Q.split("-")[0];var re=Xi(P),De={width:re.width,height:re.height},Ee=-1!==["right","left"].indexOf(Q),Ae=Ee?"top":"left",je=Ee?"left":"top",Ge=Ee?"height":"width",ot=Ee?"width":"height";return De[Ae]=G[Ae]+G[Ge]/2-re[Ge]/2,De[je]=Q===je?G[je]-re[ot]:G[rl(je)],De}function Uo(P,G){return Array.prototype.find?P.find(G):P.filter(G)[0]}function zu(P,G,Q){var re=void 0===Q?P:P.slice(0,function Df(P,G,Q){if(Array.prototype.findIndex)return P.findIndex(function(De){return De[G]===Q});var re=Uo(P,function(De){return De[G]===Q});return P.indexOf(re)}(P,"name",Q));return re.forEach(function(De){De.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var Ee=De.function||De.fn;De.enabled&&ln(Ee)&&(G.offsets.popper=Ki(G.offsets.popper),G.offsets.reference=Ki(G.offsets.reference),G=Ee(G,De))}),G}function Do(){if(!this.state.isDestroyed){var P={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};P.offsets.reference=ea(this.state,this.popper,this.reference,this.options.positionFixed),P.placement=Vl(this.options.placement,P.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),P.originalPlacement=P.placement,P.positionFixed=this.options.positionFixed,P.offsets.popper=or(this.popper,P.offsets.reference,P.placement),P.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",P=zu(this.modifiers,P),this.state.isCreated?this.options.onUpdate(P):(this.state.isCreated=!0,this.options.onCreate(P))}}function Gu(P,G){return P.some(function(Q){return Q.enabled&&Q.name===G})}function Ur(P){for(var G=[!1,"ms","Webkit","Moz","O"],Q=P.charAt(0).toUpperCase()+P.slice(1),re=0;re<G.length;re++){var De=G[re],Ee=De?""+De+Q:P;if(void 0!==document.body.style[Ee])return Ee}return null}function xn(){return this.state.isDestroyed=!0,Gu(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Ur("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function sd(P){var G=P.ownerDocument;return G?G.defaultView:window}function Sf(P,G,Q,re){var De="BODY"===P.nodeName,Ee=De?P.ownerDocument.defaultView:P;Ee.addEventListener(G,Q,{passive:!0}),De||Sf(Ut(Ee.parentNode),G,Q,re),re.push(Ee)}function lo(P,G,Q,re){Q.updateBound=re,sd(P).addEventListener("resize",Q.updateBound,{passive:!0});var De=Ut(P);return Sf(De,"scroll",Q.updateBound,Q.scrollParents),Q.scrollElement=De,Q.eventsEnabled=!0,Q}function Hl(){this.state.eventsEnabled||(this.state=lo(this.reference,0,this.state,this.scheduleUpdate))}function ct(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function jn(P,G){return sd(P).removeEventListener("resize",G.updateBound),G.scrollParents.forEach(function(Q){Q.removeEventListener("scroll",G.updateBound)}),G.updateBound=null,G.scrollParents=[],G.scrollElement=null,G.eventsEnabled=!1,G}(this.reference,this.state))}function li(P){return""!==P&&!isNaN(parseFloat(P))&&isFinite(P)}function ri(P,G){Object.keys(G).forEach(function(Q){var re="";-1!==["width","height","top","right","bottom","left"].indexOf(Q)&&li(G[Q])&&(re="px"),P.style[Q]=G[Q]+re})}var ol=yt&&/Firefox/i.test(navigator.userAgent);function Ma(P,G,Q){var re=Uo(P,function(je){return je.name===G}),De=!!re&&P.some(function(je){return je.name===Q&&je.enabled&&je.order<re.order});if(!De){var Ee="`"+G+"`";console.warn("`"+Q+"` modifier is required by "+Ee+" modifier in order to work, be sure to include it before "+Ee+"!")}return De}var So=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ad=So.slice(3);function Wu(P){var G=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Q=ad.indexOf(P),re=ad.slice(Q+1).concat(ad.slice(0,Q));return G?re.reverse():re}var sl={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function ld(P){var G=P.placement,Q=G.split("-")[0],re=G.split("-")[1];if(re){var De=P.offsets,Ee=De.reference,Ae=De.popper,je=-1!==["bottom","top"].indexOf(Q),Ge=je?"left":"top",ot=je?"width":"height",ht={start:Ni({},Ge,Ee[Ge]),end:Ni({},Ge,Ee[Ge]+Ee[ot]-Ae[ot])};P.offsets.popper=bi({},Ae,ht[re])}return P}},offset:{order:200,enabled:!0,fn:function Ar(P,G){var Ge,Q=G.offset,De=P.offsets,Ee=De.popper,Ae=De.reference,je=P.placement.split("-")[0];return Ge=li(+Q)?[+Q,0]:function qu(P,G,Q,re){var De=[0,0],Ee=-1!==["right","left"].indexOf(re),Ae=P.split(/(\+|\-)/).map(function(ht){return ht.trim()}),je=Ae.indexOf(Uo(Ae,function(ht){return-1!==ht.search(/,|\s/)}));Ae[je]&&-1===Ae[je].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var Ge=/\s*,\s*|\s+/,ot=-1!==je?[Ae.slice(0,je).concat([Ae[je].split(Ge)[0]]),[Ae[je].split(Ge)[1]].concat(Ae.slice(je+1))]:[Ae];return ot=ot.map(function(ht,nt){var at=(1===nt?!Ee:Ee)?"height":"width",Rt=!1;return ht.reduce(function(Lt,Yn){return""===Lt[Lt.length-1]&&-1!==["+","-"].indexOf(Yn)?(Lt[Lt.length-1]=Yn,Rt=!0,Lt):Rt?(Lt[Lt.length-1]+=Yn,Rt=!1,Lt):Lt.concat(Yn)},[]).map(function(Lt){return function mp(P,G,Q,re){var De=P.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),Ee=+De[1],Ae=De[2];return Ee?0===Ae.indexOf("%")?Ki("%p"===Ae?Q:re)[G]/100*Ee:"vh"===Ae||"vw"===Ae?("vh"===Ae?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*Ee:Ee:P}(Lt,at,G,Q)})}),ot.forEach(function(ht,nt){ht.forEach(function(at,Rt){li(at)&&(De[nt]+=at*("-"===ht[Rt-1]?-1:1))})}),De}(Q,Ee,Ae,je),"left"===je?(Ee.top+=Ge[0],Ee.left-=Ge[1]):"right"===je?(Ee.top+=Ge[0],Ee.left+=Ge[1]):"top"===je?(Ee.left+=Ge[0],Ee.top-=Ge[1]):"bottom"===je&&(Ee.left+=Ge[0],Ee.top+=Ge[1]),P.popper=Ee,P},offset:0},preventOverflow:{order:300,enabled:!0,fn:function Mi(P,G){var Q=G.boundariesElement||It(P.instance.popper);P.instance.reference===Q&&(Q=It(Q));var re=Ur("transform"),De=P.instance.popper.style,Ee=De.top,Ae=De.left,je=De[re];De.top="",De.left="",De[re]="";var Ge=yr(P.instance.popper,P.instance.reference,G.padding,Q,P.positionFixed);De.top=Ee,De.left=Ae,De[re]=je,G.boundaries=Ge;var ht=P.offsets.popper,nt={primary:function(Rt){var Lt=ht[Rt];return ht[Rt]<Ge[Rt]&&!G.escapeWithReference&&(Lt=Math.max(ht[Rt],Ge[Rt])),Ni({},Rt,Lt)},secondary:function(Rt){var Lt="right"===Rt?"left":"top",Yn=ht[Lt];return ht[Rt]>Ge[Rt]&&!G.escapeWithReference&&(Yn=Math.min(ht[Lt],Ge[Rt]-("right"===Rt?ht.width:ht.height))),Ni({},Lt,Yn)}};return G.priority.forEach(function(at){var Rt=-1!==["left","top"].indexOf(at)?"primary":"secondary";ht=bi({},ht,nt[Rt](at))}),P.offsets.popper=ht,P},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function Gl(P){var G=P.offsets,Q=G.popper,re=G.reference,De=P.placement.split("-")[0],Ee=Math.floor,Ae=-1!==["top","bottom"].indexOf(De),je=Ae?"right":"bottom",Ge=Ae?"left":"top",ot=Ae?"width":"height";return Q[je]<Ee(re[Ge])&&(P.offsets.popper[Ge]=Ee(re[Ge])-Q[ot]),Q[Ge]>Ee(re[je])&&(P.offsets.popper[Ge]=Ee(re[je])),P}},arrow:{order:500,enabled:!0,fn:function zl(P,G){var Q;if(!Ma(P.instance.modifiers,"arrow","keepTogether"))return P;var re=G.element;if("string"==typeof re){if(!(re=P.instance.popper.querySelector(re)))return P}else if(!P.instance.popper.contains(re))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),P;var De=P.placement.split("-")[0],Ee=P.offsets,Ae=Ee.popper,je=Ee.reference,Ge=-1!==["left","right"].indexOf(De),ot=Ge?"height":"width",ht=Ge?"Top":"Left",nt=ht.toLowerCase(),at=Ge?"left":"top",Rt=Ge?"bottom":"right",Lt=Xi(re)[ot];je[Rt]-Lt<Ae[nt]&&(P.offsets.popper[nt]-=Ae[nt]-(je[Rt]-Lt)),je[nt]+Lt>Ae[Rt]&&(P.offsets.popper[nt]+=je[nt]+Lt-Ae[Rt]),P.offsets.popper=Ki(P.offsets.popper);var Yn=je[nt]+je[ot]/2-Lt/2,vs=En(P.instance.popper),Or=parseFloat(vs["margin"+ht]),$i=parseFloat(vs["border"+ht+"Width"]),zr=Yn-P.offsets.popper[nt]-Or-$i;return zr=Math.max(Math.min(Ae[ot]-Lt,zr),0),P.arrowElement=re,P.offsets.arrow=(Ni(Q={},nt,Math.round(zr)),Ni(Q,at,""),Q),P},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function ka(P,G){if(Gu(P.instance.modifiers,"inner")||P.flipped&&P.placement===P.originalPlacement)return P;var Q=yr(P.instance.popper,P.instance.reference,G.padding,G.boundariesElement,P.positionFixed),re=P.placement.split("-")[0],De=rl(re),Ee=P.placement.split("-")[1]||"",Ae=[];switch(G.behavior){case"flip":Ae=[re,De];break;case"clockwise":Ae=Wu(re);break;case"counterclockwise":Ae=Wu(re,!0);break;default:Ae=G.behavior}return Ae.forEach(function(je,Ge){if(re!==je||Ae.length===Ge+1)return P;re=P.placement.split("-")[0],De=rl(re);var ot=P.offsets.popper,ht=P.offsets.reference,nt=Math.floor,at="left"===re&&nt(ot.right)>nt(ht.left)||"right"===re&&nt(ot.left)<nt(ht.right)||"top"===re&&nt(ot.bottom)>nt(ht.top)||"bottom"===re&&nt(ot.top)<nt(ht.bottom),Rt=nt(ot.left)<nt(Q.left),Lt=nt(ot.right)>nt(Q.right),Yn=nt(ot.top)<nt(Q.top),vs=nt(ot.bottom)>nt(Q.bottom),Or="left"===re&&Rt||"right"===re&&Lt||"top"===re&&Yn||"bottom"===re&&vs,$i=-1!==["top","bottom"].indexOf(re),bs=!!G.flipVariations&&($i&&"start"===Ee&&Rt||$i&&"end"===Ee&&Lt||!$i&&"start"===Ee&&Yn||!$i&&"end"===Ee&&vs)||!!G.flipVariationsByContent&&($i&&"start"===Ee&&Lt||$i&&"end"===Ee&&Rt||!$i&&"start"===Ee&&vs||!$i&&"end"===Ee&&Yn);(at||Or||bs)&&(P.flipped=!0,(at||Or)&&(re=Ae[Ge+1]),bs&&(Ee=function pm(P){return"end"===P?"start":"start"===P?"end":P}(Ee)),P.placement=re+(Ee?"-"+Ee:""),P.offsets.popper=bi({},P.offsets.popper,or(P.instance.popper,P.offsets.reference,P.placement)),P=zu(P.instance.modifiers,P,"flip"))}),P},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function ud(P){var G=P.placement,Q=G.split("-")[0],re=P.offsets,De=re.popper,Ee=re.reference,Ae=-1!==["left","right"].indexOf(Q),je=-1===["top","left"].indexOf(Q);return De[Ae?"left":"top"]=Ee[Q]-(je?De[Ae?"width":"height"]:0),P.placement=rl(G),P.offsets.popper=Ki(De),P}},hide:{order:800,enabled:!0,fn:function gm(P){if(!Ma(P.instance.modifiers,"hide","preventOverflow"))return P;var G=P.offsets.reference,Q=Uo(P.instance.modifiers,function(re){return"preventOverflow"===re.name}).boundaries;if(G.bottom<Q.top||G.left>Q.right||G.top>Q.bottom||G.right<Q.left){if(!0===P.hide)return P;P.hide=!0,P.attributes["x-out-of-boundaries"]=""}else{if(!1===P.hide)return P;P.hide=!1,P.attributes["x-out-of-boundaries"]=!1}return P}},computeStyle:{order:850,enabled:!0,fn:function ta(P,G){var Q=G.x,re=G.y,De=P.offsets.popper,Ee=Uo(P.instance.modifiers,function(zr){return"applyStyle"===zr.name}).gpuAcceleration;void 0!==Ee&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var Lt,Yn,Ae=void 0!==Ee?Ee:G.gpuAcceleration,je=It(P.instance.popper),Ge=ti(je),ot={position:De.position},ht=function gp(P,G){var Q=P.offsets,re=Q.popper,Ee=Math.round,Ae=Math.floor,je=function(Or){return Or},Ge=Ee(Q.reference.width),ot=Ee(re.width),ht=-1!==["left","right"].indexOf(P.placement),nt=-1!==P.placement.indexOf("-"),Lt=G?ht||nt||Ge%2==ot%2?Ee:Ae:je,Yn=G?Ee:je;return{left:Lt(Ge%2==1&&ot%2==1&&!nt&&G?re.left-1:re.left),top:Yn(re.top),bottom:Yn(re.bottom),right:Lt(re.right)}}(P,window.devicePixelRatio<2||!ol),nt="bottom"===Q?"top":"bottom",at="right"===re?"left":"right",Rt=Ur("transform");if(Yn="bottom"===nt?"HTML"===je.nodeName?-je.clientHeight+ht.bottom:-Ge.height+ht.bottom:ht.top,Lt="right"===at?"HTML"===je.nodeName?-je.clientWidth+ht.right:-Ge.width+ht.right:ht.left,Ae&&Rt)ot[Rt]="translate3d("+Lt+"px, "+Yn+"px, 0)",ot[nt]=0,ot[at]=0,ot.willChange="transform";else{var Or="right"===at?-1:1;ot[nt]=Yn*("bottom"===nt?-1:1),ot[at]=Lt*Or,ot.willChange=nt+", "+at}return P.attributes=bi({},{"x-placement":P.placement},P.attributes),P.styles=bi({},ot,P.styles),P.arrowStyles=bi({},P.offsets.arrow,P.arrowStyles),P},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function ft(P){return ri(P.instance.popper,P.styles),function An(P,G){Object.keys(G).forEach(function(Q){!1!==G[Q]?P.setAttribute(Q,G[Q]):P.removeAttribute(Q)})}(P.instance.popper,P.attributes),P.arrowElement&&Object.keys(P.arrowStyles).length&&ri(P.arrowElement,P.arrowStyles),P},onLoad:function Ul(P,G,Q,re,De){var Ee=ea(De,G,P,Q.positionFixed),Ae=Vl(Q.placement,Ee,G,P,Q.modifiers.flip.boundariesElement,Q.modifiers.flip.padding);return G.setAttribute("x-placement",Ae),ri(G,{position:Q.positionFixed?"fixed":"absolute"}),Q},gpuAcceleration:void 0}}},na=function(){function P(G,Q){var re=this,De=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rr(this,P),this.scheduleUpdate=function(){return requestAnimationFrame(re.update)},this.update=wn(this.update.bind(this)),this.options=bi({},P.Defaults,De),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=G&&G.jquery?G[0]:G,this.popper=Q&&Q.jquery?Q[0]:Q,this.options.modifiers={},Object.keys(bi({},P.Defaults.modifiers,De.modifiers)).forEach(function(Ae){re.options.modifiers[Ae]=bi({},P.Defaults.modifiers[Ae]||{},De.modifiers?De.modifiers[Ae]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(Ae){return bi({name:Ae},re.options.modifiers[Ae])}).sort(function(Ae,je){return Ae.order-je.order}),this.modifiers.forEach(function(Ae){Ae.enabled&&ln(Ae.onLoad)&&Ae.onLoad(re.reference,re.popper,re.options,Ae,re.state)}),this.update();var Ee=this.options.eventsEnabled;Ee&&this.enableEventListeners(),this.state.eventsEnabled=Ee}return ao(P,[{key:"update",value:function(){return Do.call(this)}},{key:"destroy",value:function(){return xn.call(this)}},{key:"enableEventListeners",value:function(){return Hl.call(this)}},{key:"disableEventListeners",value:function(){return ct.call(this)}}]),P}();na.Utils=("undefined"!=typeof window?window:global).PopperUtils,na.placements=So,na.Defaults=sl;const mm=na},564:oo=>{"use strict";var so=/("(?:[^\\"]|\\.)*")|[:,]/g;oo.exports=function(yt,Ye){var yn,Gt,N;return Ye=Ye||{},yn=JSON.stringify([1],void 0,void 0===Ye.indent?2:Ye.indent).slice(2,-3),Gt=""===yn?1/0:void 0===Ye.maxLength?80:Ye.maxLength,N=Ye.replacer,function wn(ln,En,Wt){var Ut,Vt,ei,Tr,ir,It,st,Yi,$e,we,$n,Jt;if(ln&&"function"==typeof ln.toJSON&&(ln=ln.toJSON()),void 0===($n=JSON.stringify(ln,N)))return $n;if($n.length<=(st=Gt-En.length-Wt)&&($e=$n.replace(so,function(Vn,S){return S||Vn+" "})).length<=st)return $e;if(null!=N&&(ln=JSON.parse($n),N=void 0),"object"==typeof ln&&null!==ln){if(Yi=En+yn,ei=[],Vt=0,Array.isArray(ln))for(we="[",Ut="]",st=ln.length;Vt<st;Vt++)ei.push(wn(ln[Vt],Yi,Vt===st-1?0:1)||"null");else for(we="{",Ut="}",st=(It=Object.keys(ln)).length;Vt<st;Vt++)Tr=It[Vt],ir=JSON.stringify(Tr)+": ",void 0!==(Jt=wn(ln[Tr],Yi,ir.length+(Vt===st-1?0:1)))&&ei.push(ir+Jt);if(ei.length>0)return[we,yn+ei.join(",\n"+Yi),Ut].join("\n"+En)}return $n}(yt,"",0)}}},oo=>{oo(oo.s=379)}]);
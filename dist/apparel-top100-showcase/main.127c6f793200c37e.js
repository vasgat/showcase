"use strict";(self.webpackChunkapparel_top100_showcase=self.webpackChunkapparel_top100_showcase||[]).push([[179],{830:(O_,mb,ht)=>{var Kd={};ht.r(Kd),ht.d(Kd,{aggregate:()=>jc,bin:()=>cR,collect:()=>dR,compare:()=>CX,countpattern:()=>fR,cross:()=>hR,density:()=>pR,dotbin:()=>mR,expression:()=>kX,extent:()=>_R,facet:()=>ND,field:()=>IX,filter:()=>vR,flatten:()=>bR,fold:()=>wR,formula:()=>ER,generate:()=>OX,impute:()=>DR,joinaggregate:()=>CR,kde:()=>SR,key:()=>RX,load:()=>FX,lookup:()=>TR,multiextent:()=>PX,multivalues:()=>LX,params:()=>$X,pivot:()=>AR,prefacet:()=>BX,project:()=>NR,proxy:()=>VX,quantile:()=>MR,relay:()=>jX,sample:()=>kR,sequence:()=>IR,sieve:()=>UX,subflow:()=>yR,timeunit:()=>OR,tupleindex:()=>zX,values:()=>GX,window:()=>RR});var Vs={};ht.r(Vs),ht.d(Vs,{interpolate:()=>qc,interpolateArray:()=>_Fe,interpolateBasis:()=>MQ,interpolateBasisClosed:()=>kQ,interpolateCubehelix:()=>oPe,interpolateCubehelixLong:()=>sPe,interpolateDate:()=>PQ,interpolateDiscrete:()=>UFe,interpolateHcl:()=>nPe,interpolateHclLong:()=>iPe,interpolateHsl:()=>JFe,interpolateHslLong:()=>ZFe,interpolateHue:()=>HFe,interpolateLab:()=>tPe,interpolateNumber:()=>la,interpolateNumberArray:()=>KR,interpolateObject:()=>LQ,interpolateRgb:()=>YR,interpolateRgbBasis:()=>gFe,interpolateRgbBasisClosed:()=>mFe,interpolateRound:()=>Yy,interpolateString:()=>$Q,interpolateTransformCss:()=>WFe,interpolateTransformSvg:()=>qFe,interpolateZoom:()=>QFe,piecewise:()=>aF,quantize:()=>aPe});var ic={};ht.r(ic),ht.d(ic,{bound:()=>jee,identifier:()=>IP,mark:()=>Hee,overlap:()=>zee,render:()=>Xee,viewlayout:()=>nte});var mp={};ht.r(mp),ht.d(mp,{axisticks:()=>rte,datajoin:()=>ote,encode:()=>ste,legendentries:()=>ate,linkpath:()=>OP,pie:()=>RP,scale:()=>hte,sortitems:()=>mte,stack:()=>PP});var rc={};ht.r(rc),ht.d(rc,{contour:()=>pL,geojson:()=>_L,geopath:()=>yL,geopoint:()=>vL,geoshape:()=>bL,graticule:()=>wL,heatmap:()=>EL,isocontour:()=>dL,kde2d:()=>hL,projection:()=>Fne});var _p={};ht.r(_p),ht.d(_p,{force:()=>AL});var ki={};ht.r(ki),ht.d(ki,{nest:()=>LL,pack:()=>BL,partition:()=>jL,stratify:()=>UL,tree:()=>zL,treelinks:()=>GL,treemap:()=>qL});var Xd={};ht.r(Xd),ht.d(Xd,{label:()=>r3});var R_={};ht.r(R_),ht.d(R_,{loess:()=>o3,regression:()=>a3});var Qd={};ht.r(Qd),ht.d(Qd,{voronoi:()=>P3});var yo={};ht.r(yo),ht.d(yo,{wordcloud:()=>$3});var zl={};ht.r(zl),ht.d(zl,{crossfilter:()=>B3,resolvefilter:()=>V3});var Jd={};ht.r(Jd),ht.d(Jd,{Bounds:()=>Jn,CanvasHandler:()=>g1,CanvasRenderer:()=>LC,DATE:()=>to,DAY:()=>sr,DAYOFYEAR:()=>rl,Dataflow:()=>qg,Debug:()=>eY,Error:()=>BI,EventStream:()=>bD,Gradient:()=>oZ,GroupItem:()=>hC,HOURS:()=>Oo,Handler:()=>uP,HybridHandler:()=>bee,HybridRenderer:()=>wP,Info:()=>Zq,Item:()=>fC,MILLISECONDS:()=>sa,MINUTES:()=>Ro,MONTH:()=>or,Marks:()=>Lo,MultiPulse:()=>$O,None:()=>Jq,Operator:()=>Zt,Parameters:()=>vD,Pulse:()=>Vc,QUARTER:()=>eo,RenderType:()=>rd,Renderer:()=>h1,ResourceLoader:()=>mZ,SECONDS:()=>_s,SVGHandler:()=>tee,SVGRenderer:()=>bP,SVGStringRenderer:()=>vee,Scenegraph:()=>HZ,TIME_UNITS:()=>lO,Transform:()=>Y,View:()=>moe,WEEK:()=>ci,Warn:()=>VI,YEAR:()=>Pi,accessor:()=>Jr,accessorFields:()=>tr,accessorName:()=>On,array:()=>ve,ascending:()=>QE,bandwidthNRD:()=>WO,bin:()=>oX,bootstrapCI:()=>sX,boundClip:()=>Mee,boundContext:()=>s1,boundItem:()=>aP,boundMark:()=>BZ,boundStroke:()=>Tu,changeset:()=>Uf,clampRange:()=>fY,codegenExpression:()=>dre,compare:()=>GI,constant:()=>rr,cumulativeLogNormal:()=>JO,cumulativeNormal:()=>SD,cumulativeUniform:()=>nR,dayofyear:()=>VY,debounce:()=>WI,defaultLocale:()=>CO,definition:()=>QK,densityLogNormal:()=>QO,densityNormal:()=>qO,densityUniform:()=>tR,domChild:()=>fi,domClear:()=>Ds,domCreate:()=>nd,domFind:()=>lP,dotbin:()=>aX,error:()=>Q,expressionFunction:()=>Un,extend:()=>it,extent:()=>tl,extentIndex:()=>hY,falsy:()=>Ic,fastmap:()=>Og,field:()=>ps,flush:()=>pY,font:()=>xC,fontFamily:()=>d1,fontSize:()=>hl,format:()=>fD,formatLocale:()=>cD,formats:()=>IO,hasOwnProperty:()=>Ce,id:()=>my,identity:()=>nr,inferType:()=>OK,inferTypes:()=>RK,ingest:()=>It,inherits:()=>pe,inrange:()=>Rg,interpolate:()=>AF,interpolateColors:()=>aC,interpolateRange:()=>UJ,intersect:()=>xee,intersectBoxLine:()=>lm,intersectPath:()=>WF,intersectPoint:()=>qF,intersectRule:()=>CZ,isArray:()=>J,isBoolean:()=>Oc,isDate:()=>Rc,isFunction:()=>nt,isIterable:()=>gY,isNumber:()=>Ct,isObject:()=>ye,isRegExp:()=>mY,isString:()=>be,isTuple:()=>mD,key:()=>qI,lerp:()=>_Y,lineHeight:()=>ed,loader:()=>hD,locale:()=>MK,logger:()=>jI,lruCache:()=>yY,markup:()=>vP,merge:()=>vY,mergeConfig:()=>kg,multiLineOffset:()=>rP,one:()=>Mg,pad:()=>bY,panLinear:()=>sY,panLog:()=>aY,panPow:()=>lY,panSymlog:()=>uY,parse:()=>SGe,parseExpression:()=>K3,parseSelector:()=>bd,path:()=>$D,pathCurves:()=>RF,pathEqual:()=>kee,pathParse:()=>om,pathRectangle:()=>fZ,pathRender:()=>t1,pathSymbols:()=>dZ,pathTrail:()=>hZ,peek:()=>mt,point:()=>AC,projection:()=>cL,quantileLogNormal:()=>ZO,quantileNormal:()=>xD,quantileUniform:()=>iR,quantiles:()=>zO,quantizeInterpolator:()=>HJ,quarter:()=>cY,quartiles:()=>GO,random:()=>ys,randomInteger:()=>cOe,randomKDE:()=>KO,randomLCG:()=>uOe,randomLogNormal:()=>uX,randomMixture:()=>cX,randomNormal:()=>YO,randomUniform:()=>dX,read:()=>$K,regressionConstant:()=>rR,regressionExp:()=>hX,regressionLinear:()=>oR,regressionLoess:()=>yX,regressionLog:()=>fX,regressionPoly:()=>gX,regressionPow:()=>pX,regressionQuad:()=>sR,renderModule:()=>jC,repeat:()=>_y,resetDefaultLocale:()=>iIe,resetSVGClipId:()=>gZ,resetSVGDefIds:()=>E$e,responseType:()=>LK,runtimeContext:()=>Xre,sampleCurve:()=>AD,sampleLogNormal:()=>XO,sampleNormal:()=>CD,sampleUniform:()=>eR,scale:()=>xt,sceneEqual:()=>DP,sceneFromJSON:()=>jZ,scenePickVisit:()=>bC,sceneToJSON:()=>VZ,sceneVisit:()=>da,sceneZOrder:()=>YF,scheme:()=>NF,serializeXML:()=>fee,setHybridRendererOptions:()=>y$e,setRandom:()=>aOe,span:()=>yy,splitAccessPath:()=>el,stringValue:()=>fe,textMetrics:()=>Po,timeBin:()=>oK,timeFloor:()=>qY,timeFormatLocale:()=>Oy,timeInterval:()=>Hg,timeOffset:()=>XY,timeSequence:()=>ZY,timeUnitSpecifier:()=>BY,timeUnits:()=>cO,toBoolean:()=>YI,toDate:()=>KI,toNumber:()=>ir,toSet:()=>oa,toString:()=>XI,transform:()=>JK,transforms:()=>Yg,truncate:()=>wY,truthy:()=>gs,tupleid:()=>Fe,typeParsers:()=>NO,utcFloor:()=>YY,utcInterval:()=>zg,utcOffset:()=>QY,utcSequence:()=>eK,utcdayofyear:()=>HY,utcquarter:()=>dY,utcweek:()=>zY,version:()=>xGe,visitArray:()=>Fc,week:()=>jY,writeConfig:()=>Ig,zero:()=>kc,zoomLinear:()=>UI,zoomLog:()=>HI,zoomPow:()=>XE,zoomSymlog:()=>zI});var Zd={};ht.r(Zd),ht.d(Zd,{accessPathDepth:()=>Wm,accessPathWithDatum:()=>u5,compile:()=>qZe,contains:()=>ft,deepEqual:()=>Yo,deleteNestedProperty:()=>Px,duplicate:()=>Ke,entries:()=>Ed,every:()=>o5,fieldIntersection:()=>l5,flatAccessWithDatum:()=>Dse,getFirstDefined:()=>Hn,hasIntersection:()=>s5,hasProperty:()=>le,hash:()=>pt,internalField:()=>xse,isBoolean:()=>bv,isEmpty:()=>zt,isEqual:()=>BGe,isInternalField:()=>Tse,isNullOrFalse:()=>r5,isNumeric:()=>Lx,keys:()=>ie,logicalExpr:()=>wv,mergeDeep:()=>wse,never:()=>bse,normalize:()=>lue,normalizeAngle:()=>Dv,omit:()=>fo,pick:()=>Hm,prefixGenerator:()=>a5,removePathFromField:()=>Gm,replaceAll:()=>Mh,replacePathInField:()=>Ns,resetIdCounter:()=>jGe,setEqual:()=>Ese,some:()=>zm,stringify:()=>Gt,titleCase:()=>Ev,unique:()=>xl,uniqueId:()=>Sse,vals:()=>Ui,varName:()=>yn,version:()=>XZe});var ef={};ht.r(ef),ht.d(ef,{carbong10:()=>Xet,carbong100:()=>Jet,carbong90:()=>Qet,carbonwhite:()=>Ket,dark:()=>yet,excel:()=>vet,fivethirtyeight:()=>Eet,ggplot2:()=>Det,googlecharts:()=>Pet,latimes:()=>Aet,powerbi:()=>Get,quartz:()=>Net,urbaninstitute:()=>Fet,version:()=>Zet,vox:()=>Met});var qr={};function gt(e){return"function"==typeof e}function tf(e){const n=e(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}ht.r(qr),ht.d(qr,{afterMain:()=>FW,afterRead:()=>IW,afterWrite:()=>$W,applyStyles:()=>CI,arrow:()=>bI,auto:()=>OE,basePlacements:()=>wg,beforeMain:()=>OW,beforeRead:()=>MW,beforeWrite:()=>PW,bottom:()=>Mo,clippingParents:()=>AW,computeStyles:()=>DI,createPopper:()=>Z4,createPopperBase:()=>cAe,createPopperLite:()=>JW,detectOverflow:()=>Tg,end:()=>Eg,eventListeners:()=>wI,flip:()=>_I,hide:()=>_fe,left:()=>Ar,main:()=>RW,modifierPhases:()=>BW,offset:()=>SI,placements:()=>uI,popper:()=>Dg,popperGenerator:()=>PE,popperOffsets:()=>EI,preventOverflow:()=>vI,read:()=>kW,reference:()=>NW,right:()=>ko,start:()=>Nf,top:()=>Tr,variationPlacements:()=>lI,viewport:()=>aI,write:()=>LW});const nf=tf(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function ts(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Ii{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(gt(i))try{i()}catch(o){t=o instanceof nf?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{KB(o)}catch(s){t=t??[],s instanceof nf?t=[...t,...s.errors]:t.push(s)}}if(t)throw new nf(t)}}add(t){var n;if(t&&t!==this)if(this.closed)KB(t);else{if(t instanceof Ii){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&ts(n,t)}remove(t){const{_finalizers:n}=this;n&&ts(n,t),t instanceof Ii&&t._removeParent(this)}}Ii.EMPTY=(()=>{const e=new Ii;return e.closed=!0,e})();const _b=Ii.EMPTY;function yb(e){return e instanceof Ii||e&&"closed"in e&&gt(e.remove)&&gt(e.add)&&gt(e.unsubscribe)}function KB(e){gt(e)?e():e.unsubscribe()}const rf={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},vb={setTimeout(e,t,...n){const{delegate:i}=vb;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=vb;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function XB(e){vb.setTimeout(()=>{const{onUnhandledError:t}=rf;if(!t)throw e;t(e)})}function yp(){}const ape=LA("C",void 0,void 0);function LA(e,t,n){return{kind:e,value:t,error:n}}let sf=null;function bb(e){if(rf.useDeprecatedSynchronousErrorHandling){const t=!sf;if(t&&(sf={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:i}=sf;if(sf=null,n)throw i}}else e()}class $A extends Ii{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,yb(t)&&t.add(this)):this.destination=ppe}static create(t,n,i){return new F_(t,n,i)}next(t){this.isStopped?VA(function upe(e){return LA("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?VA(function lpe(e){return LA("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?VA(ape,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dpe=Function.prototype.bind;function BA(e,t){return dpe.call(e,t)}class fpe{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){wb(i)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){wb(i)}else wb(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){wb(n)}}}class F_ extends $A{constructor(t,n,i){let r;if(super(),gt(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&rf.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&BA(t.next,o),error:t.error&&BA(t.error,o),complete:t.complete&&BA(t.complete,o)}):r=t}this.destination=new fpe(r)}}function wb(e){rf.useDeprecatedSynchronousErrorHandling?function cpe(e){rf.useDeprecatedSynchronousErrorHandling&&sf&&(sf.errorThrown=!0,sf.error=e)}(e):XB(e)}function VA(e,t){const{onStoppedNotification:n}=rf;n&&vb.setTimeout(()=>n(e,t))}const ppe={closed:!0,next:yp,error:function hpe(e){throw e},complete:yp},jA="function"==typeof Symbol&&Symbol.observable||"@@observable";function Gl(e){return e}function QB(e){return 0===e.length?Gl:1===e.length?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}let qt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function _pe(e){return e&&e instanceof $A||function mpe(e){return e&&gt(e.next)&&gt(e.error)&&gt(e.complete)}(e)&&yb(e)}(n)?n:new F_(n,i,r);return bb(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=JB(i))((r,o)=>{const s=new F_({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[jA](){return this}pipe(...n){return QB(n)(this)}toPromise(n){return new(n=JB(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function JB(e){var t;return null!==(t=e??rf.Promise)&&void 0!==t?t:Promise}const ype=tf(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let bn=(()=>{class e extends qt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new ZB(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new ype}next(n){bb(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){bb(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){bb(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?_b:(this.currentObservers=null,o.push(n),new Ii(()=>{this.currentObservers=null,ts(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new qt;return n.source=this,n}}return e.create=(t,n)=>new ZB(t,n),e})();class ZB extends bn{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)}error(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:_b}}function e6(e){return gt(e?.lift)}function Tn(e){return t=>{if(e6(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function en(e,t,n,i,r){return new vpe(e,t,n,i,r)}class vpe extends $A{constructor(t,n,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function qe(e,t){return Tn((n,i)=>{let r=0;n.subscribe(en(i,o=>{i.next(e.call(t,o,r++))}))})}function oc(e){return this instanceof oc?(this.v=e,this):new oc(e)}function i6(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return",function s(h){return function(p){return Promise.resolve(p).then(h,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,p){i[h]&&(r[h]=function(g){return new Promise(function(m,_){o.push([h,g,m,_])>1||l(h,g)})},p&&(r[h]=p(r[h])))}function l(h,p){try{!function u(h){h.value instanceof oc?Promise.resolve(h.value.v).then(c,d):f(o[0][2],h)}(i[h](p))}catch(g){f(o[0][3],g)}}function c(h){l("next",h)}function d(h){l("throw",h)}function f(h,p){h(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function r6(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function GA(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}(a,l,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const WA=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function o6(e){return gt(e?.then)}function s6(e){return gt(e[jA])}function a6(e){return Symbol.asyncIterator&&gt(e?.[Symbol.asyncIterator])}function l6(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const u6=function jpe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function c6(e){return gt(e?.[u6])}function d6(e){return i6(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:i,done:r}=yield oc(n.read());if(r)return yield oc(void 0);yield yield oc(i)}}finally{n.releaseLock()}})}function f6(e){return gt(e?.getReader)}function Oi(e){if(e instanceof qt)return e;if(null!=e){if(s6(e))return function Upe(e){return new qt(t=>{const n=e[jA]();if(gt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(WA(e))return function Hpe(e){return new qt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(o6(e))return function zpe(e){return new qt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,XB)})}(e);if(a6(e))return h6(e);if(c6(e))return function Gpe(e){return new qt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(f6(e))return function Wpe(e){return h6(d6(e))}(e)}throw l6(e)}function h6(e){return new qt(t=>{(function qpe(e,t){var n,i,r,o;return function t6(e,t,n,i){return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=r6(e);!(i=yield n.next()).done;)if(t.next(i.value),t.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Wl(e,t,n,i=0,r=!1){const o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function ti(e,t,n=1/0){return gt(t)?ti((i,r)=>qe((o,s)=>t(i,o,r,s))(Oi(e(i,r))),n):("number"==typeof t&&(n=t),Tn((i,r)=>function Ype(e,t,n,i,r,o,s,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&t.complete()},h=g=>u<i?p(g):l.push(g),p=g=>{o&&t.next(g),u++;let m=!1;Oi(n(g,c++)).subscribe(en(t,_=>{r?.(_),o?h(_):t.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<i;){const _=l.shift();s?Wl(t,s,()=>p(_)):p(_)}f()}catch(_){t.error(_)}}))};return e.subscribe(en(t,h,()=>{d=!0,f()})),()=>{a?.()}}(i,r,e,n)))}function vp(e=1/0){return ti(Gl,e)}const js=new qt(e=>e.complete());function p6(e){return e&&gt(e.schedule)}function qA(e){return e[e.length-1]}function Eb(e){return gt(qA(e))?e.pop():void 0}function P_(e){return p6(qA(e))?e.pop():void 0}function g6(e,t=0){return Tn((n,i)=>{n.subscribe(en(i,r=>Wl(i,e,()=>i.next(r),t),()=>Wl(i,e,()=>i.complete(),t),r=>Wl(i,e,()=>i.error(r),t)))})}function m6(e,t=0){return Tn((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function _6(e,t){if(!e)throw new Error("Iterable cannot be null");return new qt(n=>{Wl(n,t,()=>{const i=e[Symbol.asyncIterator]();Wl(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Wn(e,t){return t?function nge(e,t){if(null!=e){if(s6(e))return function Qpe(e,t){return Oi(e).pipe(m6(t),g6(t))}(e,t);if(WA(e))return function Zpe(e,t){return new qt(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}(e,t);if(o6(e))return function Jpe(e,t){return Oi(e).pipe(m6(t),g6(t))}(e,t);if(a6(e))return _6(e,t);if(c6(e))return function ege(e,t){return new qt(n=>{let i;return Wl(n,t,()=>{i=e[u6](),Wl(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>gt(i?.return)&&i.return()})}(e,t);if(f6(e))return function tge(e,t){return _6(d6(e),t)}(e,t)}throw l6(e)}(e,t):Oi(e)}function YA(e,t,...n){if(!0===t)return void e();if(!1===t)return;const i=new F_({next:()=>{i.unsubscribe(),e()}});return t(...n).subscribe(i)}function Yt(e){for(let t in e)if(e[t]===Yt)return t;throw Error("Could not find renamed property on target object.")}function KA(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Kt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Kt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function XA(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const oge=Yt({__forward_ref__:Yt});function At(e){return e.__forward_ref__=At,e.toString=function(){return Kt(this())},e}function We(e){return QA(e)?e():e}function QA(e){return"function"==typeof e&&e.hasOwnProperty(oge)&&e.__forward_ref__===At}class ne extends Error{constructor(t,n){super(function Db(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function Je(e){return"string"==typeof e?e:null==e?"":String(e)}function Cb(e,t){throw new ne(-201,!1)}function bo(e,t){null==e&&function Ot(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function Ae(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Et(e){return{providers:e.providers||[],imports:e.imports||[]}}function Sb(e){return y6(e,xb)||y6(e,b6)}function y6(e,t){return e.hasOwnProperty(t)?e[t]:null}function v6(e){return e&&(e.hasOwnProperty(JA)||e.hasOwnProperty(pge))?e[JA]:null}const xb=Yt({\u0275prov:Yt}),JA=Yt({\u0275inj:Yt}),b6=Yt({ngInjectableDef:Yt}),pge=Yt({ngInjectorDef:Yt});var He=(()=>((He=He||{})[He.Default=0]="Default",He[He.Host=1]="Host",He[He.Self=2]="Self",He[He.SkipSelf=4]="SkipSelf",He[He.Optional=8]="Optional",He))();let ZA;function ns(e){const t=ZA;return ZA=e,t}function w6(e,t,n){const i=Sb(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&He.Optional?null:void 0!==t?t:void Cb(Kt(e))}function sc(e){return{toString:e}.toString()}var Us=(()=>((Us=Us||{})[Us.OnPush=0]="OnPush",Us[Us.Default=1]="Default",Us))(),Hs=(()=>{return(e=Hs||(Hs={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Hs;var e})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),bp={},Mt=[],Tb=Yt({\u0275cmp:Yt}),e2=Yt({\u0275dir:Yt}),t2=Yt({\u0275pipe:Yt}),E6=Yt({\u0275mod:Yt}),Yl=Yt({\u0275fac:Yt}),L_=Yt({__NG_ELEMENT_ID__:Yt});let mge=0;function An(e){return sc(()=>{const n=!0===e.standalone,i={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Us.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Mt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Hs.Emulated,id:"c"+mge++,styles:e.styles||Mt,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return r.inputs=S6(e.inputs,i),r.outputs=S6(e.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(D6).filter(C6):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(_r).filter(C6):null,r})}function D6(e){return Bt(e)||mr(e)}function C6(e){return null!==e}function kt(e){return sc(()=>({type:e.type,bootstrap:e.bootstrap||Mt,declarations:e.declarations||Mt,imports:e.imports||Mt,exports:e.exports||Mt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function S6(e,t){if(null==e)return bp;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}const we=An;function qi(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Bt(e){return e[Tb]||null}function mr(e){return e[e2]||null}function _r(e){return e[t2]||null}function wo(e,t){const n=e[E6]||null;if(!n&&!0===t)throw new Error(`Type ${Kt(e)} does not have '\u0275mod' property.`);return n}function Yr(e){return Array.isArray(e)&&"object"==typeof e[1]}function Gs(e){return Array.isArray(e)&&!0===e[1]}function o2(e){return 0!=(8&e.flags)}function kb(e){return 2==(2&e.flags)}function Ib(e){return 1==(1&e.flags)}function Ws(e){return null!==e.template}function Ege(e){return 0!=(256&e[2])}function df(e,t){return e.hasOwnProperty(Yl)?e[Yl]:null}class Sge{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function yr(){return A6}function A6(e){return e.type.prototype.ngOnChanges&&(e.setInput=Tge),xge}function xge(){const e=M6(this),t=e?.current;if(t){const n=e.previous;if(n===bp)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Tge(e,t,n,i){const r=M6(e)||function Age(e,t){return e[N6]=t}(e,{previous:bp,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],l=s[a];o[a]=new Sge(l&&l.currentValue,t,s===bp),e[i]=t}yr.ngInherit=!0;const N6="__ngSimpleChanges__";function M6(e){return e[N6]||null}function qn(e){for(;Array.isArray(e);)e=e[0];return e}function Ob(e,t){return qn(t[e])}function Do(e,t){return qn(t[e.index])}function c2(e,t){return e.data[t]}function Sp(e,t){return e[t]}function Co(e,t){const n=t[e];return Yr(n)?n:n[0]}function Rb(e){return 64==(64&e[2])}function ac(e,t){return null==t?null:e[t]}function k6(e){e[18]=0}function d2(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Xe={lFrame:j6(null),bindingsEnabled:!0};function O6(){return Xe.bindingsEnabled}function re(){return Xe.lFrame.lView}function yt(){return Xe.lFrame.tView}function os(e){return Xe.lFrame.contextLView=e,e[8]}function ss(e){return Xe.lFrame.contextLView=null,e}function ni(){let e=R6();for(;null!==e&&64===e.type;)e=e.parent;return e}function R6(){return Xe.lFrame.currentTNode}function Ua(e,t){const n=Xe.lFrame;n.currentTNode=e,n.isParent=t}function f2(){return Xe.lFrame.isParent}function h2(){Xe.lFrame.isParent=!1}function vr(){const e=Xe.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function xp(){return Xe.lFrame.bindingIndex++}function Xl(e){const t=Xe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Hge(e,t){const n=Xe.lFrame;n.bindingIndex=n.bindingRootIndex=e,p2(t)}function p2(e){Xe.lFrame.currentDirectiveIndex=e}function $6(){return Xe.lFrame.currentQueryIndex}function m2(e){Xe.lFrame.currentQueryIndex=e}function Gge(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function B6(e,t,n){if(n&He.SkipSelf){let r=t,o=e;for(;!(r=r.parent,null!==r||n&He.Host||(r=Gge(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;t=r,e=o}const i=Xe.lFrame=V6();return i.currentTNode=t,i.lView=e,!0}function _2(e){const t=V6(),n=e[1];Xe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function V6(){const e=Xe.lFrame,t=null===e?null:e.child;return null===t?j6(e):t}function j6(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function U6(){const e=Xe.lFrame;return Xe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const H6=U6;function y2(){const e=U6();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function br(){return Xe.lFrame.selectedIndex}function lc(e){Xe.lFrame.selectedIndex=e}function wn(){const e=Xe.lFrame;return c2(e.tView,e.selectedIndex)}function Fb(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks||(e.viewHooks=[])).push(-n,l),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function Pb(e,t,n){z6(e,t,3,n)}function Lb(e,t,n,i){(3&e[2])===n&&z6(e,t,n,i)}function v2(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function z6(e,t,n,i){const o=i??-1,s=t.length-1;let a=0;for(let l=void 0!==i?65535&e[18]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(e[18]+=65536),(a<o||-1==o)&&(eme(e,n,t,l),e[18]=(4294901760&e[18])+l+2),l++}function eme(e,t,n,i){const r=n[i]<0,o=n[i+1],a=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class H_{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function $b(e,t,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{const o=r,s=n[++i];W6(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function G6(e){return 3===e||4===e||6===e}function W6(e){return 64===e.charCodeAt(0)}function Bb(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||q6(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function q6(e,t,n,i,r){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function Y6(e){return-1!==e}function Tp(e){return 32767&e}function Ap(e,t){let n=function ome(e){return e>>16}(e),i=t;for(;n>0;)i=i[15],n--;return i}let w2=!0;function Vb(e){const t=w2;return w2=e,t}let sme=0;const Ha={};function G_(e,t){const n=D2(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,E2(i.data,e),E2(t,null),E2(i.blueprint,null));const r=jb(e,t),o=e.injectorIndex;if(Y6(r)){const s=Tp(r),a=Ap(r,t),l=a[1].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function E2(e,t){e.push(0,0,0,0,0,0,0,0,t)}function D2(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function jb(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){if(i=i9(r),null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function Ub(e,t,n){!function ame(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(L_)&&(i=n[L_]),null==i&&(i=n[L_]=sme++);const r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function Q6(e,t,n){if(n&He.Optional||void 0!==e)return e;Cb()}function J6(e,t,n,i){if(n&He.Optional&&void 0===i&&(i=null),0==(n&(He.Self|He.Host))){const r=e[9],o=ns(void 0);try{return r?r.get(t,i,n&He.Optional):w6(t,i,n&He.Optional)}finally{ns(o)}}return Q6(i,0,n)}function Z6(e,t,n,i=He.Default,r){if(null!==e){if(1024&t[2]){const s=function fme(e,t,n,i,r){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=e9(o,s,n,i|He.Self,Ha);if(a!==Ha)return a;let l=o.parent;if(!l){const u=s[21];if(u){const c=u.get(n,Ha,i);if(c!==Ha)return c}l=i9(s),s=s[15]}o=l}return r}(e,t,n,i,Ha);if(s!==Ha)return s}const o=e9(e,t,n,i,Ha);if(o!==Ha)return o}return J6(t,n,i,r)}function e9(e,t,n,i,r){const o=function cme(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(L_)?e[L_]:void 0;return"number"==typeof t?t>=0?255&t:dme:t}(n);if("function"==typeof o){if(!B6(t,e,i))return i&He.Host?Q6(r,0,i):J6(t,n,i,r);try{const s=o(i);if(null!=s||i&He.Optional)return s;Cb()}finally{H6()}}else if("number"==typeof o){let s=null,a=D2(e,t),l=-1,u=i&He.Host?t[16][6]:null;for((-1===a||i&He.SkipSelf)&&(l=-1===a?jb(e,t):t[a+8],-1!==l&&n9(i,!1)?(s=t[1],a=Tp(l),t=Ap(l,t)):a=-1);-1!==a;){const c=t[1];if(t9(o,a,c.data)){const d=ume(a,t,n,s,i,u);if(d!==Ha)return d}l=t[a+8],-1!==l&&n9(i,t[1].data[a+8]===u)&&t9(o,a,t)?(s=c,a=Tp(l),t=Ap(l,t)):a=-1}}return r}function ume(e,t,n,i,r,o){const s=t[1],a=s.data[e+8],c=Hb(a,s,n,null==i?kb(a)&&w2:i!=s&&0!=(3&a.type),r&He.Host&&o===a);return null!==c?W_(t,s,c,a):Ha}function Hb(e,t,n,i,r){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,f=r?a+c:e.directiveEnd;for(let h=i?a:a+c;h<f;h++){const p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(r){const h=s[l];if(h&&Ws(h)&&h.type===n)return l}return null}function W_(e,t,n,i){let r=e[n];const o=t.data;if(function tme(e){return e instanceof H_}(r)){const s=r;s.resolving&&function sge(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ne(-200,`Circular dependency in DI detected for ${e}${n}`)}(function Nt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Je(e)}(o[n]));const a=Vb(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?ns(s.injectImpl):null;B6(e,i,He.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function Zge(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const s=A6(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&ns(l),Vb(a),s.resolving=!1,H6()}}return r}function t9(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function n9(e,t){return!(e&He.Self||e&He.Host&&t)}class Np{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return Z6(this._tNode,this._lView,t,i,n)}}function dme(){return new Np(ni(),re())}function Xi(e){return sc(()=>{const t=e.prototype.constructor,n=t[Yl]||C2(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const o=r[Yl]||C2(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function C2(e){return QA(e)?()=>{const t=C2(We(e));return t&&t()}:df(e)}function i9(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const kp="__parameters__";function Op(e,t,n){return sc(()=>{const i=function S2(e){return function(...n){if(e){const i=e(...n);for(const r in i)this[r]=i[r]}}}(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,u,c){const d=l.hasOwnProperty(kp)?l[kp]:Object.defineProperty(l,kp,{value:[]})[kp];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}class Oe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function So(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),So(i,t)):t!==e&&t.push(i)}return t}function Ql(e,t){e.forEach(n=>Array.isArray(n)?Ql(n,t):t(n))}function o9(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function zb(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function K_(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function xo(e,t,n){let i=Rp(e,t);return i>=0?e[1|i]=n:(i=~i,function mme(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function T2(e,t){const n=Rp(e,t);if(n>=0)return e[1|n]}function Rp(e,t){return function l9(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}(e,t,1)}const X_={},N2="__NG_DI_FLAG__",Wb="ngTempTokenPath",Cme=/\n/gm,u9="__source";let Q_;function Fp(e){const t=Q_;return Q_=e,t}function xme(e,t=He.Default){if(void 0===Q_)throw new ne(-203,!1);return null===Q_?w6(e,void 0,t):Q_.get(e,t&He.Optional?null:void 0,t)}function he(e,t=He.Default){return(function gge(){return ZA}()||xme)(We(e),t)}function Ln(e,t=He.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),he(e,t)}function M2(e){const t=[];for(let n=0;n<e.length;n++){const i=We(e[n]);if(Array.isArray(i)){if(0===i.length)throw new ne(900,!1);let r,o=He.Default;for(let s=0;s<i.length;s++){const a=i[s],l=Tme(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(he(r,o))}else t.push(he(i))}return t}function J_(e,t){return e[N2]=t,e.prototype[N2]=t,e}function Tme(e){return e[N2]}const Z_=J_(Op("Optional"),8),e0=J_(Op("SkipSelf"),4);var Kr=(()=>((Kr=Kr||{})[Kr.Important=1]="Important",Kr[Kr.DashCase=2]="DashCase",Kr))();const F2=new Map;let Gme=0;const L2="__ngContext__";function Qi(e,t){Yr(t)?(e[L2]=t[20],function qme(e){F2.set(e[20],e)}(t)):e[L2]=t}function B2(e,t){return undefined(e,t)}function o0(e){const t=e[3];return Gs(t)?t[3]:t}function V2(e){return M9(e[13])}function j2(e){return M9(e[4])}function M9(e){for(;null!==e&&!Gs(e);)e=e[4];return e}function Lp(e,t,n,i,r){if(null!=i){let o,s=!1;Gs(i)?o=i:Yr(i)&&(s=!0,i=i[0]);const a=qn(i);0===e&&null!==n?null==r?P9(t,n,a):hf(t,n,a,r||null,!0):1===e&&null!==n?hf(t,n,a,r||null,!0):2===e?function Y2(e,t,n){const i=Kb(e,t);i&&function g_e(e,t,n,i){e.removeChild(t,n,i)}(e,i,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function y_e(e,t,n,i,r){const o=n[7];o!==qn(n)&&Lp(t,e,i,o,r);for(let a=10;a<n.length;a++){const l=n[a];s0(l[1],l,e,t,i,o)}}(t,e,o,n,r)}}function H2(e,t,n){return e.createElement(t,n)}function I9(e,t){const n=e[9],i=n.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,d2(r,-1)),n.splice(i,1)}function z2(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const r=i[17];null!==r&&r!==e&&I9(r,i),t>0&&(e[n-1][4]=i[4]);const o=zb(e,10+t);!function a_e(e,t){s0(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function O9(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&s0(e,t,n,3,null,null),function c_e(e){let t=e[13];if(!t)return G2(e[1],e);for(;t;){let n=null;if(Yr(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)Yr(t)&&G2(t[1],t),t=t[3];null===t&&(t=e),Yr(t)&&G2(t[1],t),n=t&&t[4]}t=n}}(t)}}function G2(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function p_e(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const r=t[n[i]];if(!(r instanceof H_)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(r)}finally{}}}}(e,t),function h_e(e,t){const n=e.cleanup,i=t[7];let r=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(t):qn(t[s]),l=i[r=n[o+2]],u=n[o+3];"boolean"==typeof u?a.removeEventListener(n[o],l,u):u>=0?i[r=u]():i[r=-u].unsubscribe(),o+=2}else{const s=i[r=n[o+1]];n[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)(0,i[o])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&Gs(t[3])){n!==t[3]&&I9(n,t);const i=t[19];null!==i&&i.detachView(e)}!function Yme(e){F2.delete(e[20])}(t)}}function R9(e,t,n){return function F9(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const r=e.data[i.directiveStart].encapsulation;if(r===Hs.None||r===Hs.Emulated)return null}return Do(i,n)}(e,t.parent,n)}function hf(e,t,n,i,r){e.insertBefore(t,n,i,r)}function P9(e,t,n){e.appendChild(t,n)}function L9(e,t,n,i,r){null!==i?hf(e,t,n,i,r):P9(e,t,n)}function Kb(e,t){return e.parentNode(t)}function $9(e,t,n){return V9(e,t,n)}let J2,V9=function B9(e,t,n){return 40&e.type?Do(e,n):null};function Xb(e,t,n,i){const r=R9(e,i,t),o=t[11],a=$9(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)L9(o,r,n[l],a,!1);else L9(o,r,n,a,!1)}function Qb(e,t){if(null!==t){const n=t.type;if(3&n)return Do(t,e);if(4&n)return q2(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return Qb(e,i);{const r=e[t.index];return Gs(r)?q2(-1,r):qn(r)}}if(32&n)return B2(t,e)()||qn(e[t.index]);{const i=U9(e,t);return null!==i?Array.isArray(i)?i[0]:Qb(o0(e[16]),i):Qb(e,t.next)}}return null}function U9(e,t){return null!==t?e[16][6].projection[t.projection]:null}function q2(e,t){const n=10+e+1;if(n<t.length){const i=t[n],r=i[1].firstChild;if(null!==r)return Qb(i,r)}return t[7]}function K2(e,t,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;if(s&&0===t&&(a&&Qi(qn(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)K2(e,t,n.child,i,r,o,!1),Lp(t,e,r,a,o);else if(32&l){const u=B2(n,i);let c;for(;c=u();)Lp(t,e,r,c,o);Lp(t,e,r,a,o)}else 16&l?H9(e,t,i,n,r,o):Lp(t,e,r,a,o);n=s?n.projectionNext:n.next}}function s0(e,t,n,i,r,o){K2(n,i,e.firstChild,t,r,o,!1)}function H9(e,t,n,i,r,o){const s=n[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Lp(t,e,r,l[u],o);else K2(e,t,l,s[3],r,o,!0)}function z9(e,t,n){e.setAttribute(t,"style",n)}function X2(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}class K9{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function cc(e){return e instanceof K9?e.changingThisBreaksApplicationSecurity:e}const O_e=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Yn=(()=>((Yn=Yn||{})[Yn.NONE=0]="NONE",Yn[Yn.HTML=1]="HTML",Yn[Yn.STYLE=2]="STYLE",Yn[Yn.SCRIPT=3]="SCRIPT",Yn[Yn.URL=4]="URL",Yn[Yn.RESOURCE_URL=5]="RESOURCE_URL",Yn))();function Xr(e){const t=function u0(){const e=re();return e&&e[12]}();return t?t.sanitize(Yn.URL,e)||"":function a0(e,t){const n=function N_e(e){return e instanceof K9&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}(e,"URL")?cc(e):function eN(e){return(e=String(e)).match(O_e)?e:"unsafe:"+e}(Je(e))}const rN=new Oe("ENVIRONMENT_INITIALIZER"),i7=new Oe("INJECTOR",-1),r7=new Oe("INJECTOR_DEF_TYPES");class o7{get(t,n=X_){if(n===X_){const i=new Error(`NullInjectorError: No provider for ${Kt(t)}!`);throw i.name="NullInjectorError",i}return n}}function q_e(...e){return{\u0275providers:s7(0,e)}}function s7(e,...t){const n=[],i=new Set;let r;return Ql(t,o=>{const s=o;oN(s,n,[],i)&&(r||(r=[]),r.push(s))}),void 0!==r&&a7(r,n),n}function a7(e,t){for(let n=0;n<e.length;n++){const{providers:r}=e[n];Ql(r,o=>{t.push(o)})}}function oN(e,t,n,i){if(!(e=We(e)))return!1;let r=null,o=v6(e);const s=!o&&Bt(e);if(o||s){if(s&&!s.standalone)return!1;r=e}else{const l=e.ngModule;if(o=v6(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of l)oN(u,t,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;i.add(r);try{Ql(o.imports,c=>{oN(c,t,n,i)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&a7(u,t)}if(!a){const u=df(r)||(()=>new r);t.push({provide:r,useFactory:u,deps:Mt},{provide:r7,useValue:r,multi:!0},{provide:rN,useValue:()=>he(r),multi:!0})}const l=o.providers;null==l||a||Ql(l,c=>{t.push(c)})}}return r!==e&&void 0!==e.providers}const Y_e=Yt({provide:String,useValue:Yt});function sN(e){return null!==e&&"object"==typeof e&&Y_e in e}function gf(e){return"function"==typeof e}const aN=new Oe("Set Injector scope."),tw={},X_e={};let lN;function nw(){return void 0===lN&&(lN=new o7),lN}class dc{}class c7 extends dc{constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cN(t,s=>this.processProvider(s)),this.records.set(i7,$p(void 0,this)),r.has("environment")&&this.records.set(dc,$p(void 0,this));const o=this.records.get(aN);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(r7.multi,Mt,He.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Fp(this),i=ns(void 0);try{return t()}finally{Fp(n),ns(i)}}get(t,n=X_,i=He.Default){this.assertNotDestroyed();const r=Fp(this),o=ns(void 0);try{if(!(i&He.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function t0e(e){return"function"==typeof e||"object"==typeof e&&e instanceof Oe}(t)&&Sb(t);a=l&&this.injectableDefInScope(l)?$p(uN(t),tw):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&He.Self?nw():this.parent).get(t,n=i&He.Optional&&n===X_?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Wb]=s[Wb]||[]).unshift(Kt(t)),r)throw s;return function Ame(e,t,n,i){const r=e[Wb];throw t[u9]&&r.unshift(t[u9]),e.message=function Nme(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let r=Kt(t);if(Array.isArray(t))r=t.map(Kt).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Kt(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(Cme,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e[Wb]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{ns(o),Fp(r)}}resolveInjectorInitializers(){const t=Fp(this),n=ns(void 0);try{const i=this.get(rN.multi,Mt,He.Self);for(const r of i)r()}finally{Fp(t),ns(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(Kt(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(t){let n=gf(t=We(t))?t:We(t&&t.provide);const i=function J_e(e){return sN(e)?$p(void 0,e.useValue):$p(d7(e),tw)}(t);if(gf(t)||!0!==t.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=$p(void 0,tw,!0),r.factory=()=>M2(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===tw&&(n.value=X_e,n.value=n.factory()),"object"==typeof n.value&&n.value&&function e0e(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=We(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function uN(e){const t=Sb(e),n=null!==t?t.factory:df(e);if(null!==n)return n;if(e instanceof Oe)throw new ne(204,!1);if(e instanceof Function)return function Q_e(e){const t=e.length;if(t>0)throw K_(t,"?"),new ne(204,!1);const n=function fge(e){const t=e&&(e[xb]||e[b6]);if(t){const n=function hge(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new ne(204,!1)}function d7(e,t,n){let i;if(gf(e)){const r=We(e);return df(r)||uN(r)}if(sN(e))i=()=>We(e.useValue);else if(function u7(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...M2(e.deps||[]));else if(function l7(e){return!(!e||!e.useExisting)}(e))i=()=>he(We(e.useExisting));else{const r=We(e&&(e.useClass||e.provide));if(!function Z_e(e){return!!e.deps}(e))return df(r)||uN(r);i=()=>new r(...M2(e.deps))}return i}function $p(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function n0e(e){return!!e.\u0275providers}function cN(e,t){for(const n of e)Array.isArray(n)?cN(n,t):n0e(n)?cN(n.\u0275providers,t):t(n)}class f7{}class o0e{resolveComponentFactory(t){throw function r0e(e){const t=Error(`No component factory found for ${Kt(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let c0=(()=>{class e{}return e.NULL=new o0e,e})();function s0e(){return Bp(ni(),re())}function Bp(e,t){return new an(Do(e,t))}let an=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=s0e,e})();function a0e(e){return e instanceof an?e.nativeElement:e}class Vp{}let To=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function l0e(){const e=re(),n=Co(ni().index,e);return(Yr(n)?n:e)[11]}(),e})(),u0e=(()=>{class e{}return e.\u0275prov=Ae({token:e,providedIn:"root",factory:()=>null}),e})();class d0{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const c0e=new d0("14.3.0"),dN={};function hN(e){return e.ngOriginalError}class jp{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&hN(t);for(;n&&hN(n);)n=hN(n);return n||null}}function p7(e){return e.ownerDocument.defaultView}function Zl(e){return e instanceof Function?e():e}function m7(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}const _7="ng-template";function b0e(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==m7(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function y7(e){return 4===e.type&&e.value!==_7}function w0e(e,t,n){return t===(4!==e.type||n?e.value:_7)}function E0e(e,t,n){let i=4;const r=e.attrs||[],o=function S0e(e){for(let t=0;t<e.length;t++)if(G6(e[t]))return t;return e.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!w0e(e,l,n)||""===l&&1===t.length){if(qs(i))return!1;s=!0}}else{const u=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!b0e(e.attrs,u,n)){if(qs(i))return!1;s=!0}continue}const d=D0e(8&i?"class":l,r,y7(e),n);if(-1===d){if(qs(i))return!1;s=!0;continue}if(""!==u){let f;f=d>o?"":r[d+1].toLowerCase();const h=8&i?f:null;if(h&&-1!==m7(h,u,0)||2&i&&u!==f){if(qs(i))return!1;s=!0}}}}else{if(!s&&!qs(i)&&!qs(l))return!1;if(s&&qs(l))continue;s=!1,i=l|1&i}}return qs(i)||s}function qs(e){return 0==(1&e)}function D0e(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){const s=t[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function x0e(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function v7(e,t,n=!1){for(let i=0;i<t.length;i++)if(E0e(e,t[i],n))return!0;return!1}function T0e(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function b7(e,t){return e?":not("+t.trim()+")":t}function A0e(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&i){const a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!qs(s)&&(t+=b7(o,r),r=""),i=s,o=o||!qs(i);n++}return""!==r&&(t+=b7(o,r)),t}const Ze={};function oe(e){w7(yt(),re(),br()+e,!1)}function w7(e,t,n,i){if(!i)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&Pb(t,o,n)}else{const o=e.preOrderHooks;null!==o&&Lb(t,o,0,n)}lc(n)}function S7(e,t=null,n=null,i){const r=x7(e,t,n,i);return r.resolveInjectorInitializers(),r}function x7(e,t=null,n=null,i,r=new Set){const o=[n||Mt,q_e(e)];return i=i||("object"==typeof e?void 0:Kt(e)),new c7(o,t||nw(),i||null,r)}let Ji=(()=>{class e{static create(n,i){if(Array.isArray(n))return S7({name:""},i,n,"");{const r=n.name??"";return S7({name:r},n.parent,n.providers,r)}}}return e.THROW_IF_NOT_FOUND=X_,e.NULL=new o7,e.\u0275prov=Ae({token:e,providedIn:"any",factory:()=>he(i7)}),e.__NG_ELEMENT_ID__=-1,e})();function U(e,t=He.Default){const n=re();return null===n?he(e,t):Z6(ni(),n,We(e),t)}function yN(){throw new Error("invalid")}function rw(e,t){return e<<17|t<<2}function Ys(e){return e>>17&32767}function vN(e){return 2|e}function eu(e){return(131068&e)>>2}function bN(e,t){return-131069&e|t<<2}function wN(e){return 1|e}function H7(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const s=e.data[o];m2(r),s.contentQueries(2,t[o],o)}}}function aw(e,t,n,i,r,o,s,a,l,u,c){const d=t.blueprint.slice();return d[0]=r,d[2]=76|i,(null!==c||e&&1024&e[2])&&(d[2]|=1024),k6(d),d[3]=d[15]=e,d[8]=n,d[10]=s||e&&e[10],d[11]=a||e&&e[11],d[12]=l||e&&e[12]||null,d[9]=u||e&&e[9]||null,d[6]=o,d[20]=function Wme(){return Gme++}(),d[21]=c,d[16]=2==t.type?e[16]:d,d}function zp(e,t,n,i,r){let o=e.data[t];if(null===o)o=function NN(e,t,n,i,r){const o=R6(),s=f2(),l=e.data[t]=function cye(e,t,n,i,r,o){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(e,t,n,i,r),function Uge(){return Xe.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function U_(){const e=Xe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ua(o,!0),o}function Gp(e,t,n,i){if(0===n)return-1;const r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function MN(e,t,n){_2(t);try{const i=e.viewQuery;null!==i&&$N(1,i,n);const r=e.template;null!==r&&z7(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&H7(e,t),e.staticViewQueries&&$N(2,e.viewQuery,n);const o=e.components;null!==o&&function aye(e,t){for(let n=0;n<t.length;n++)xye(e,t[n])}(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[2]&=-5,y2()}}function lw(e,t,n,i){const r=t[2];if(128!=(128&r)){_2(t);try{k6(t),function P6(e){return Xe.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&z7(e,t,n,2,i);const s=3==(3&r);if(s){const u=e.preOrderCheckHooks;null!==u&&Pb(t,u,null)}else{const u=e.preOrderHooks;null!==u&&Lb(t,u,0,null),v2(t,0)}if(function Cye(e){for(let t=V2(e);null!==t;t=j2(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const r=n[i],o=r[3];0==(512&r[2])&&d2(o,1),r[2]|=512}}}(t),function Dye(e){for(let t=V2(e);null!==t;t=j2(t))for(let n=10;n<t.length;n++){const i=t[n],r=i[1];Rb(i)&&lw(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&H7(e,t),s){const u=e.contentCheckHooks;null!==u&&Pb(t,u)}else{const u=e.contentHooks;null!==u&&Lb(t,u,1),v2(t,1)}!function oye(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)lc(~r);else{const o=r,s=n[++i],a=n[++i];Hge(s,o),a(2,t[o])}}}finally{lc(-1)}}(e,t);const a=e.components;null!==a&&function sye(e,t){for(let n=0;n<t.length;n++)Sye(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&$N(2,l,i),s){const u=e.viewCheckHooks;null!==u&&Pb(t,u)}else{const u=e.viewHooks;null!==u&&Lb(t,u,2),v2(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,d2(t[3],-1))}finally{y2()}}}function z7(e,t,n,i,r){const o=br(),s=2&i;try{lc(-1),s&&t.length>22&&w7(e,t,22,!1),n(i,r)}finally{lc(o)}}function kN(e,t,n){!O6()||(function gye(e,t,n,i){const r=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||G_(n,t),Qi(i,t);const s=n.initialInputs;for(let a=r;a<o;a++){const l=e.data[a],u=Ws(l);u&&bye(t,n,l);const c=W_(t,e,a,n);Qi(c,t),null!==s&&wye(0,a-r,c,l,0,s),u&&(Co(n.index,t)[8]=c)}}(e,t,n,Do(n,t)),128==(128&n.flags)&&function mye(e,t,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function zge(){return Xe.lFrame.currentDirectiveIndex}();try{lc(o);for(let a=i;a<r;a++){const l=e.data[a],u=t[a];p2(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&J7(l,u)}}finally{lc(-1),p2(s)}}(e,t,n))}function IN(e,t,n=Do){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}}function W7(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ON(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ON(e,t,n,i,r,o,s,a,l,u){const c=22+i,d=c+r,f=function lye(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:Ze);return n}(c,d),h="function"==typeof u?u():u;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function q7(e,t,n,i){const r=iV(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&rV(e).push(i,r.length-1))}function Y7(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function K7(e,t){const i=t.directiveEnd,r=e.data,o=t.attrs,s=[];let a=null,l=null;for(let u=t.directiveStart;u<i;u++){const c=r[u],d=c.inputs,f=null===o||y7(t)?null:Eye(d,o);s.push(f),a=Y7(d,u,a),l=Y7(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}function Ao(e,t,n,i,r,o,s,a){const l=Do(t,n);let c,u=t.inputs;!a&&null!=u&&(c=u[i])?(BN(e,n,c,i,r),kb(t)&&X7(n,t.index)):3&t.type&&(i=function dye(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,t.value||"",i):r,o.setProperty(l,i,r))}function X7(e,t){const n=Co(t,e);16&n[2]||(n[2]|=32)}function RN(e,t,n,i){let r=!1;if(O6()){const o=function _ye(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];v7(n,s.selectors,!1)&&(r||(r=[]),Ub(G_(n,t),e,s.type),Ws(s)?(Z7(e,n),r.unshift(s)):r.push(s))}return r}(e,t,n),s=null===i?null:{"":-1};if(null!==o){r=!0,eV(n,e.data.length,o.length);for(let c=0;c<o.length;c++){const d=o[c];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=Gp(e,t,o.length,null);for(let c=0;c<o.length;c++){const d=o[c];n.mergedAttrs=Bb(n.mergedAttrs,d.hostAttrs),tV(e,n,t,u,d),vye(u,d,s),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const f=d.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!l&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),u++}K7(e,n)}s&&function yye(e,t,n){if(t){const i=e.localNames=[];for(let r=0;r<t.length;r+=2){const o=n[t[r+1]];if(null==o)throw new ne(-301,!1);i.push(t[r],o)}}}(n,i,s)}return n.mergedAttrs=Bb(n.mergedAttrs,n.attrs),r}function Q7(e,t,n,i,r,o){const s=o.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function pye(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(i,r,s)}}function J7(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Z7(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function vye(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Ws(t)&&(n[""]=e)}}function eV(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function tV(e,t,n,i,r){e.data[i]=r;const o=r.factory||(r.factory=df(r.type)),s=new H_(o,Ws(r),U);e.blueprint[i]=s,n[i]=s,Q7(e,t,0,i,Gp(e,n,r.hostVars,Ze),r)}function bye(e,t,n){const i=Do(t,e),r=W7(n),o=e[10],s=uw(e,aw(e,r,null,n.onPush?32:16,i,t,o,o.createRenderer(i,n),null,null,null));e[t.index]=s}function za(e,t,n,i,r,o){const s=Do(e,t);!function FN(e,t,n,i,r,o,s){if(null==o)e.removeAttribute(t,r,n);else{const a=null==s?Je(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}(t[11],s,o,e.value,n,i,r)}function wye(e,t,n,i,r,o){const s=o[t];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const u=s[l++],c=s[l++],d=s[l++];null!==a?i.setInput(n,d,u,c):n[c]=d}}}function Eye(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function nV(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function Sye(e,t){const n=Co(t,e);if(Rb(n)){const i=n[1];48&n[2]?lw(i,n,i.template,n[8]):n[5]>0&&PN(n)}}function PN(e){for(let i=V2(e);null!==i;i=j2(i))for(let r=10;r<i.length;r++){const o=i[r];if(Rb(o))if(512&o[2]){const s=o[1];lw(s,o,s.template,o[8])}else o[5]>0&&PN(o)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=Co(n[i],e);Rb(r)&&r[5]>0&&PN(r)}}function xye(e,t){const n=Co(t,e),i=n[1];(function Tye(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),MN(i,n,n[8])}function uw(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function LN(e){for(;e;){e[2]|=32;const t=o0(e);if(Ege(e)&&!t)return e;e=t}return null}function cw(e,t,n,i=!0){const r=t[10];r.begin&&r.begin();try{lw(e,t,e.template,n)}catch(s){throw i&&sV(t,s),s}finally{r.end&&r.end()}}function $N(e,t,n){m2(0),t(e,n)}function iV(e){return e[7]||(e[7]=[])}function rV(e){return e.cleanup||(e.cleanup=[])}function sV(e,t){const n=e[9],i=n?n.get(jp,null):null;i&&i.handleError(t)}function BN(e,t,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],u=e.data[s];null!==u.setInput?u.setInput(l,r,i,a):l[a]=r}}function dw(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=XA(r,a):2==o&&(i=XA(i,a+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function fw(e,t,n,i,r=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&i.push(qn(o)),Gs(o))for(let a=10;a<o.length;a++){const l=o[a],u=l[1].firstChild;null!==u&&fw(l[1],l,u,i)}const s=n.type;if(8&s)fw(e,t,n.child,i);else if(32&s){const a=B2(n,t);let l;for(;l=a();)i.push(l)}else if(16&s){const a=U9(t,n);if(Array.isArray(a))i.push(...a);else{const l=o0(t[16]);fw(l[1],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class f0{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return fw(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Gs(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(z2(t,i),zb(n,i))}this._attachedToViewContainer=!1}O9(this._lView[1],this._lView)}onDestroy(t){q7(this._lView[1],this._lView,null,t)}markForCheck(){LN(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){cw(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function u_e(e,t){s0(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=t}}class Aye extends f0{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;cw(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class VN extends c0{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Bt(t);return new h0(n,this.ngModule)}}function aV(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class Mye{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){const r=this.injector.get(t,dN,i);return r!==dN||n===dN?r:this.parentInjector.get(t,n,i)}}class h0 extends f7{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function N0e(e){return e.map(A0e).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return aV(this.componentDef.inputs)}get outputs(){return aV(this.componentDef.outputs)}create(t,n,i,r){let o=(r=r||this.ngModule)instanceof dc?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Mye(t,o):t,a=s.get(Vp,null);if(null===a)throw new ne(407,!1);const l=s.get(u0e,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=i?function uye(e,t,n){return e.selectRootElement(t,n===Hs.ShadowDom)}(u,i,this.componentDef.encapsulation):H2(u,c,function Nye(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(c)),f=this.componentDef.onPush?288:272,h=ON(0,null,null,1,0,null,null,null,null,null),p=aw(null,h,null,f,null,null,a,u,l,s,null);let g,m;_2(p);try{const _=function Oye(e,t,n,i,r,o){const s=n[1];n[22]=e;const l=zp(s,22,2,"#host",null),u=l.mergedAttrs=t.hostAttrs;null!==u&&(dw(l,u,!0),null!==e&&($b(r,e,u),null!==l.classes&&X2(r,e,l.classes),null!==l.styles&&z9(r,e,l.styles)));const c=i.createRenderer(e,t),d=aw(n,W7(t),null,t.onPush?32:16,n[22],l,i,c,o||null,null,null);return s.firstCreatePass&&(Ub(G_(l,n),s,t.type),Z7(s,l),eV(l,n.length,1)),uw(n,d),n[22]=d}(d,this.componentDef,p,a,u);if(d)if(i)$b(u,d,["ng-version",c0e.full]);else{const{attrs:y,classes:v}=function M0e(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!qs(r))break;r=o}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);y&&$b(u,d,y),v&&v.length>0&&X2(u,d,v.join(" "))}if(m=c2(h,22),void 0!==n){const y=m.projection=[];for(let v=0;v<this.ngContentSelectors.length;v++){const b=n[v];y.push(null!=b?Array.from(b):null)}}g=function Rye(e,t,n,i){const r=n[1],o=function hye(e,t,n){const i=ni();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),tV(e,i,t,Gp(e,t,1,null),n),K7(e,i));const r=W_(t,e,i.directiveStart,i);Qi(r,t);const o=Do(i,t);return o&&Qi(o,t),r}(r,n,t);if(e[8]=n[8]=o,null!==i)for(const a of i)a(o,t);if(t.contentQueries){const a=ni();t.contentQueries(1,o,a.directiveStart)}const s=ni();return!r.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(lc(s.index),Q7(n[1],s,0,s.directiveStart,s.directiveEnd,t),J7(t,o)),o}(_,this.componentDef,p,[Fye]),MN(h,p,null)}finally{y2()}return new Iye(this.componentType,g,Bp(m,p),p,m)}}class Iye extends class i0e{}{constructor(t,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new Aye(r),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const o=this._rootLView;BN(o[1],o,r,t,n),X7(o,this._tNode.index)}}get injector(){return new Np(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Fye(){const e=ni();Fb(re()[1],e)}function Rt(e){let t=function lV(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let r;if(Ws(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ne(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);const s=e;s.inputs=jN(e.inputs),s.declaredInputs=jN(e.declaredInputs),s.outputs=jN(e.outputs);const a=r.hostBindings;a&&Bye(e,a);const l=r.viewQuery,u=r.contentQueries;if(l&&Lye(e,l),u&&$ye(e,u),KA(e.inputs,r.inputs),KA(e.declaredInputs,r.declaredInputs),KA(e.outputs,r.outputs),Ws(r)&&r.data.animation){const c=e.data;c.animation=(c.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===Rt&&(n=!1)}}t=Object.getPrototypeOf(t)}!function Pye(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Bb(r.hostAttrs,n=Bb(n,r.hostAttrs))}}(i)}function jN(e){return e===bp?{}:e===Mt?[]:e}function Lye(e,t){const n=e.viewQuery;e.viewQuery=n?(i,r)=>{t(i,r),n(i,r)}:t}function $ye(e,t){const n=e.contentQueries;e.contentQueries=n?(i,r,o)=>{t(i,r,o),n(i,r,o)}:t}function Bye(e,t){const n=e.hostBindings;e.hostBindings=n?(i,r)=>{t(i,r),n(i,r)}:t}let hw=null;function mf(){if(!hw){const e=tn.Symbol;if(e&&e.iterator)hw=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(hw=i)}}}return hw}function p0(e){return!!UN(e)&&(Array.isArray(e)||!(e instanceof Map)&&mf()in e)}function UN(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ga(e,t,n){return e[t]=n}function Zi(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Xt(e,t,n,i){const r=re();return Zi(r,xp(),t)&&(yt(),za(wn(),r,e,t,n,i)),Xt}function qp(e,t,n,i){return Zi(e,xp(),n)?t+Je(n)+i:Ze}function Ye(e,t,n,i,r,o,s,a){const l=re(),u=yt(),c=e+22,d=u.firstCreatePass?function qye(e,t,n,i,r,o,s,a,l){const u=t.consts,c=zp(t,e,4,s||null,ac(u,a));RN(t,n,c,ac(u,l)),Fb(t,c);const d=c.tViews=ON(2,c,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,c),d.queries=t.queries.embeddedTView(c)),c}(c,u,l,t,n,i,r,o,s):u.data[c];Ua(d,!1);const f=l[11].createComment("");Xb(u,l,f,d),Qi(f,l),uw(l,l[c]=nV(f,l,f,d)),Ib(d)&&kN(u,l,d),null!=s&&IN(l,d,a)}function _e(e,t,n){const i=re();return Zi(i,xp(),t)&&Ao(yt(),wn(),i,e,t,i[11],n,!1),_e}function HN(e,t,n,i,r){const s=r?"class":"style";BN(e,n,t.inputs[s],s,i)}function j(e,t,n,i){const r=re(),o=yt(),s=22+e,a=r[11],l=r[s]=H2(a,t,function Jge(){return Xe.lFrame.currentNamespace}()),u=o.firstCreatePass?function Kye(e,t,n,i,r,o,s){const a=t.consts,u=zp(t,e,2,r,ac(a,o));return RN(t,n,u,ac(a,s)),null!==u.attrs&&dw(u,u.attrs,!1),null!==u.mergedAttrs&&dw(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,r,0,t,n,i):o.data[s];Ua(u,!0);const c=u.mergedAttrs;null!==c&&$b(a,l,c);const d=u.classes;null!==d&&X2(a,l,d);const f=u.styles;return null!==f&&z9(a,l,f),64!=(64&u.flags)&&Xb(o,r,l,u),0===function Pge(){return Xe.lFrame.elementDepthCount}()&&Qi(l,r),function Lge(){Xe.lFrame.elementDepthCount++}(),Ib(u)&&(kN(o,r,u),function G7(e,t,n){if(o2(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,u,r)),null!==i&&IN(r,u),j}function H(){let e=ni();f2()?h2():(e=e.parent,Ua(e,!1));const t=e;!function $ge(){Xe.lFrame.elementDepthCount--}();const n=yt();return n.firstCreatePass&&(Fb(n,e),o2(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function ime(e){return 0!=(16&e.flags)}(t)&&HN(n,t,re(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function rme(e){return 0!=(32&e.flags)}(t)&&HN(n,t,re(),t.stylesWithoutHost,!1),H}function ze(e,t,n,i){return j(e,t,n,i),H(),ze}function m0(e){return!!e&&"function"==typeof e.then}const WN=function vV(e){return!!e&&"function"==typeof e.subscribe};function st(e,t,n,i){const r=re(),o=yt(),s=ni();return function wV(e,t,n,i,r,o,s,a){const l=Ib(i),c=e.firstCreatePass&&rV(e),d=t[8],f=iV(t);let h=!0;if(3&i.type||a){const m=Do(i,t),_=a?a(m):m,y=f.length,v=a?w=>a(qn(w[i.index])):i.index;let b=null;if(!a&&l&&(b=function Qye(e,t,n,i){const r=e.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=t[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,t,r,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,h=!1;else{o=DV(i,t,d,o,!1);const w=n.listen(_,r,o);f.push(o,w),c&&c.push(r,v,y,y+1)}}else o=DV(i,t,d,o,!1);const p=i.outputs;let g;if(h&&null!==p&&(g=p[r])){const m=g.length;if(m)for(let _=0;_<m;_+=2){const D=t[g[_]][g[_+1]].subscribe(o),E=f.length;f.push(o,D),c&&c.push(r,i.index,E,-(E+1))}}}(o,r,r[11],s,e,t,0,i),st}function EV(e,t,n,i){try{return!1!==n(i)}catch(r){return sV(e,r),!1}}function DV(e,t,n,i,r){return function o(s){if(s===Function)return i;LN(2&e.flags?Co(e.index,t):t);let l=EV(t,0,i,s),u=o.__ngNextListenerFn__;for(;u;)l=EV(t,0,u,s)&&l,u=u.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function Dt(e=1){return function Wge(e){return(Xe.lFrame.contextLView=function qge(e,t){for(;e>0;)t=t[15],e--;return t}(e,Xe.lFrame.contextLView))[8]}(e)}function Jye(e,t){let n=null;const i=function C0e(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===i?v7(e,o,!0):T0e(i,o))return r}else n=r}return n}function Wa(e,t,n){return iu(e,"",t,"",n),Wa}function iu(e,t,n,i,r){const o=re(),s=qp(o,t,n,i);return s!==Ze&&Ao(yt(),wn(),o,e,s,o[11],r,!1),iu}function RV(e,t,n,i,r){const o=e[n+1],s=null===t;let a=i?Ys(o):eu(o),l=!1;for(;0!==a&&(!1===l||s);){const c=e[a+1];t1e(e[a],t)&&(l=!0,e[a+1]=i?wN(c):vN(c)),a=i?Ys(c):eu(c)}l&&(e[n+1]=i?vN(o):wN(o))}function t1e(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Rp(e,t)>=0}const ri={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FV(e){return e.substring(ri.key,ri.keyEnd)}function PV(e,t){const n=ri.textEnd;return n===t?-1:(t=ri.keyEnd=function o1e(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,ri.key=t,n),tg(e,t,n))}function tg(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Mn(e,t){return function Xs(e,t,n,i){const r=re(),o=yt(),s=Xl(2);o.firstUpdatePass&&UV(o,e,s,i),t!==Ze&&Zi(r,s,t)&&zV(o,o.data[br()],r,r[11],e,r[s+1]=function g1e(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=Kt(cc(e)))),e}(t,n),i,s)}(e,t,null,!0),Mn}function yf(e){!function Qs(e,t,n,i){const r=yt(),o=Xl(2);r.firstUpdatePass&&UV(r,null,o,i);const s=re();if(n!==Ze&&Zi(s,o,n)){const a=r.data[br()];if(WV(a,i)&&!jV(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=XA(l,n||"")),HN(r,a,s,n,i)}else!function p1e(e,t,n,i,r,o,s,a){r===Ze&&(r=Mt);let l=0,u=0,c=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;null!==c||null!==d;){const f=l<r.length?r[l+1]:void 0,h=u<o.length?o[u+1]:void 0;let g,p=null;c===d?(l+=2,u+=2,f!==h&&(p=d,g=h)):null===d||null!==c&&c<d?(l+=2,p=c):(u+=2,p=d,g=h),null!==p&&zV(e,t,n,i,p,g,s,a),c=l<r.length?r[l]:null,d=u<o.length?o[u]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function h1e(e,t,n){if(null==n||""===n)return Mt;const i=[],r=cc(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,o)}}(xo,Ya,e,!0)}function Ya(e,t){for(let n=function i1e(e){return function $V(e){ri.key=0,ri.keyEnd=0,ri.value=0,ri.valueEnd=0,ri.textEnd=e.length}(e),PV(e,tg(e,0,ri.textEnd))}(t);n>=0;n=PV(t,n))xo(e,FV(t),!0)}function jV(e,t){return t>=e.expandoStartIndex}function UV(e,t,n,i){const r=e.data;if(null===r[n+1]){const o=r[br()],s=jV(e,n);WV(o,i)&&null===t&&!s&&(t=!1),t=function u1e(e,t,n,i){const r=function g2(e){const t=Xe.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=_0(n=YN(null,e,t,n,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=YN(r,e,t,n,i),null===o){let l=function c1e(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==eu(i))return e[Ys(i)]}(e,t,i);void 0!==l&&Array.isArray(l)&&(l=YN(null,e,t,l[1],i),l=_0(l,t.attrs,i),function d1e(e,t,n,i){e[Ys(n?t.classBindings:t.styleBindings)]=i}(e,t,i,l))}else o=function f1e(e,t,n){let i;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=_0(i,e[o].hostAttrs,n);return _0(i,t.attrs,n)}(e,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(r,o,t,i),function Zye(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=Ys(s),l=eu(s);e[i]=n;let c,u=!1;if(Array.isArray(n)){const d=n;c=d[1],(null===c||Rp(d,c)>0)&&(u=!0)}else c=n;if(r)if(0!==l){const f=Ys(e[a+1]);e[i+1]=rw(f,a),0!==f&&(e[f+1]=bN(e[f+1],i)),e[a+1]=function K0e(e,t){return 131071&e|t<<17}(e[a+1],i)}else e[i+1]=rw(a,0),0!==a&&(e[a+1]=bN(e[a+1],i)),a=i;else e[i+1]=rw(l,0),0===a?a=i:e[l+1]=bN(e[l+1],i),l=i;u&&(e[i+1]=vN(e[i+1])),RV(e,c,i,!0),RV(e,c,i,!1),function e1e(e,t,n,i,r){const o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Rp(o,t)>=0&&(n[i+1]=wN(n[i+1]))}(t,c,e,i,o),s=rw(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,n,s,i)}}function YN(e,t,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],i=_0(i,o.hostAttrs,r),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function _0(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),xo(e,s,!!n||t[++o]))}return void 0===e?null:e}function zV(e,t,n,i,r,o,s,a){if(!(3&t.type))return;const l=e.data,u=l[a+1];gw(function F7(e){return 1==(1&e)}(u)?GV(l,t,n,r,eu(u),s):void 0)||(gw(o)||function R7(e){return 2==(2&e)}(u)&&(o=GV(l,null,n,r,a,s)),function v_e(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:Kr.DashCase;null==r?e.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Kr.Important),e.setStyle(n,i,r,o))}}(i,s,Ob(br(),n),r,o))}function GV(e,t,n,i,r,o){const s=null===t;let a;for(;r>0;){const l=e[r],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let f=n[r+1];f===Ze&&(f=d?Mt:void 0);let h=d?T2(f,i):c===i?f:void 0;if(u&&!gw(h)&&(h=T2(l,i)),gw(h)&&(a=h,s))return a;const p=e[r+1];r=s?Ys(p):eu(p)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=T2(l,i))}return a}function gw(e){return void 0!==e}function WV(e,t){return 0!=(e.flags&(t?16:32))}function K(e,t=""){const n=re(),i=yt(),r=e+22,o=i.firstCreatePass?zp(i,r,1,t,null):i.data[r],s=n[r]=function U2(e,t){return e.createText(t)}(n[11],t);Xb(i,n,s,o),Ua(o,!1)}function pc(e){return Er("",e,""),pc}function Er(e,t,n){const i=re(),r=qp(i,e,t,n);return r!==Ze&&function tu(e,t,n){const i=Ob(t,e);!function k9(e,t,n){e.setValue(t,n)}(e[11],i,n)}(i,br(),r),Er}const rg="en-US";let hj=rg;function JN(e,t,n,i,r){if(e=We(e),Array.isArray(e))for(let o=0;o<e.length;o++)JN(e[o],t,n,i,r);else{const o=yt(),s=re();let a=gf(e)?e:We(e.provide),l=d7(e);const u=ni(),c=1048575&u.providerIndexes,d=u.directiveStart,f=u.providerIndexes>>20;if(gf(e)||!e.multi){const h=new H_(l,r,U),p=eM(a,t,r?c:c+f,d);-1===p?(Ub(G_(u,s),o,a),ZN(o,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{const h=eM(a,t,c+f,d),p=eM(a,t,c,c+f),g=h>=0&&n[h],m=p>=0&&n[p];if(r&&!m||!r&&!g){Ub(G_(u,s),o,a);const _=function kve(e,t,n,i,r){const o=new H_(e,n,U);return o.multi=[],o.index=t,o.componentProviders=0,$j(o,r,i&&!n),o}(r?Mve:Nve,n.length,r,i,l);!r&&m&&(n[p].providerFactory=_),ZN(o,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(_),s.push(_)}else ZN(o,e,h>-1?h:p,$j(n[r?p:h],l,!r&&i));!r&&i&&m&&n[p].componentProviders++}}}function ZN(e,t,n,i){const r=gf(t),o=function K_e(e){return!!e.useClass}(t);if(r||o){const l=(o?We(t.useClass):t).prototype.ngOnDestroy;if(l){const u=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const c=u.indexOf(n);-1===c?u.push(n,[i,l]):u[c+1].push(i,l)}else u.push(n,l)}}}function $j(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function eM(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function Nve(e,t,n,i){return tM(this.multi,[])}function Mve(e,t,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=W_(n,n[1],this.providerFactory.index,i);o=a.slice(0,s),tM(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],tM(r,o);return o}function tM(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function ln(e,t=[]){return n=>{n.providersResolver=(i,r)=>function Ave(e,t,n){const i=yt();if(i.firstCreatePass){const r=Ws(e);JN(n,i.data,i.blueprint,r,!0),JN(t,i.data,i.blueprint,r,!1)}}(i,r?r(e):e,t)}}class bf{}class Bj{}class Vj extends bf{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new VN(this);const i=wo(t);this._bootstrapComponents=Zl(i.bootstrap),this._r3Injector=x7(t,n,[{provide:bf,useValue:this},{provide:c0,useValue:this.componentFactoryResolver}],Kt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class nM extends Bj{constructor(t){super(),this.moduleType=t}create(t){return new Vj(this.moduleType,t)}}class Ove extends bf{constructor(t,n,i){super(),this.componentFactoryResolver=new VN(this),this.instance=null;const r=new c7([...t,{provide:bf,useValue:this},{provide:c0,useValue:this.componentFactoryResolver}],n||nw(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function bw(e,t,n=null){return new Ove(e,t,n).injector}let Rve=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=s7(0,n.type),r=i.length>0?bw([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,r)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Ae({token:e,providedIn:"environment",factory:()=>new e(he(dc))}),e})();function jj(e){e.getStandaloneInjector=t=>t.get(Rve).getOrCreateStandaloneInjector(e)}function S0(e,t){const n=e[t];return n===Ze?void 0:n}function Yj(e,t,n,i,r,o){const s=t+n;return Zi(e,s,r)?Ga(e,s+1,o?i.call(o,r):i(r)):S0(e,s+1)}function Kj(e,t,n,i,r,o,s){const a=t+n;return function _f(e,t,n,i){const r=Zi(e,t,n);return Zi(e,t+1,i)||r}(e,a,r,o)?Ga(e,a+2,s?i.call(s,r,o):i(r,o)):S0(e,a+2)}function og(e,t){const n=yt();let i;const r=e+22;n.firstCreatePass?(i=function Xve(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=df(i.type)),s=ns(U);try{const a=Vb(!1),l=o();return Vb(a),function Yye(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,re(),r,l),l}finally{ns(s)}}function x0(e,t,n,i){const r=e+22,o=re(),s=Sp(o,r);return T0(o,r)?Kj(o,vr(),t,s.transform,n,i,s):s.transform(n,i)}function T0(e,t){return e[1].data[t].pure}function oM(e){return t=>{setTimeout(e,void 0,t)}}const tt=class ebe extends bn{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=oM(o),r&&(r=oM(r)),s&&(s=oM(s)));const a=super.subscribe({next:r,error:o,complete:s});return t instanceof Ii&&t.add(a),a}};function tbe(){return this._results[mf()]()}class sM{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=mf(),i=sM.prototype;i[n]||(i[n]=tbe)}get changes(){return this._changes||(this._changes=new tt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const r=So(t);(this._changesDetected=!function pme(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let In=(()=>{class e{}return e.__NG_ELEMENT_ID__=rbe,e})();const nbe=In,ibe=class extends nbe{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t,n){const i=this._declarationTContainer.tViews,r=aw(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,n||null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(i)),MN(i,r,t),new f0(r)}};function rbe(){return ww(ni(),re())}function ww(e,t){return 4&e.type?new ibe(t,e,Bp(e,t)):null}let Js=(()=>{class e{}return e.__NG_ELEMENT_ID__=obe,e})();function obe(){return nU(ni(),re())}const sbe=Js,eU=class extends sbe{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Bp(this._hostTNode,this._hostLView)}get injector(){return new Np(this._hostTNode,this._hostLView)}get parentInjector(){const t=jb(this._hostTNode,this._hostLView);if(Y6(t)){const n=Ap(t,this._hostLView),i=Tp(t);return new Np(n[1].data[i+8],n)}return new Np(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=tU(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,r),s}createComponent(t,n,i,r,o){const s=t&&!function Y_(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const d=n||{};a=d.index,i=d.injector,r=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?t:new h0(Bt(t)),u=i||this.parentInjector;if(!o&&null==l.ngModule){const f=(s?u:this.parentInjector).get(dc,null);f&&(o=f)}const c=l.create(u,r,void 0,o);return this.insert(c.hostView,a),c}insert(t,n){const i=t._lView,r=i[1];if(function Fge(e){return Gs(e[3])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const d=i[3],f=new eU(d,d[6],d[3]);f.detach(f.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function d_e(e,t,n,i){const r=10+i,o=n.length;i>0&&(n[r-1][4]=t),i<o-10?(t[4]=n[r],o9(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function f_e(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=64}(r,i,s,o);const a=q2(o,s),l=i[11],u=Kb(l,s[7]);return null!==u&&function l_e(e,t,n,i,r,o){i[0]=r,i[6]=t,s0(e,i,n,1,r,o)}(r,s[6],l,i,u,a),t.attachToViewContainerRef(),o9(aM(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=tU(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=z2(this._lContainer,n);i&&(zb(aM(this._lContainer),n),O9(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=z2(this._lContainer,n);return i&&null!=zb(aM(this._lContainer),n)?new f0(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function tU(e){return e[8]}function aM(e){return e[8]||(e[8]=[])}function nU(e,t){let n;const i=t[e.index];if(Gs(i))n=i;else{let r;if(8&e.type)r=qn(i);else{const o=t[11];r=o.createComment("");const s=Do(e,t);hf(o,Kb(o,s),r,function m_e(e,t){return e.nextSibling(t)}(o,s),!1)}t[e.index]=n=nV(i,t,r,e),uw(t,n)}return new eU(n,e,t)}class lM{constructor(t){this.queryList=t,this.matches=null}clone(){return new lM(this.queryList)}setDirty(){this.queryList.setDirty()}}class uM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new uM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==aU(t,n).matches&&this.queries[n].setDirty()}}class iU{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class cM{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new cM(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class dM{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new dM(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(t,n,ube(n,o)),this.matchTNodeWithReadOption(t,n,Hb(n,t,o,!1,!1))}else i===In?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Hb(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===an||r===Js||r===In&&4&n.type)this.addMatch(n.index,-2);else{const o=Hb(n,t,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function ube(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function dbe(e,t,n,i){return-1===n?function cbe(e,t){return 11&e.type?Bp(e,t):4&e.type?ww(e,t):null}(t,e):-2===n?function fbe(e,t,n){return n===an?Bp(t,e):n===In?ww(t,e):n===Js?nU(t,e):void 0}(e,t,i):W_(e,e[1],n,t)}function rU(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const o=e.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const u=s[l];a.push(u<0?null:dbe(t,o[u],s[l+1],n.metadata.read))}r.matches=a}return r.matches}function fM(e,t,n,i){const r=e.queries.getByIndex(n),o=r.matches;if(null!==o){const s=rU(e,t,r,n);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const u=o[a+1],c=t[-l];for(let d=10;d<c.length;d++){const f=c[d];f[17]===f[3]&&fM(f[1],f,u,i)}if(null!==c[9]){const d=c[9];for(let f=0;f<d.length;f++){const h=d[f];fM(h[1],h,u,i)}}}}}return i}function Qt(e){const t=re(),n=yt(),i=$6();m2(i+1);const r=aU(n,i);if(e.dirty&&function Rge(e){return 4==(4&e[2])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const o=r.crossesNgTemplate?fM(n,t,i,[]):rU(n,t,r,i);e.reset(o,a0e),e.notifyOnChanges()}return!0}return!1}function wf(e,t,n){const i=yt();i.firstCreatePass&&(function sU(e,t,n){null===e.queries&&(e.queries=new cM),e.queries.track(new dM(t,n))}(i,new iU(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),function oU(e,t,n){const i=new sM(4==(4&n));q7(e,t,i,i.destroy),null===t[19]&&(t[19]=new uM),t[19].queries.push(new lM(i))}(i,re(),t)}function Jt(){return function hbe(e,t){return e[19].queries[t].queryList}(re(),$6())}function aU(e,t){return e.queries.getByIndex(t)}function Dw(...e){}const Cw=new Oe("Application Initializer");let Sw=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Dw,this.reject=Dw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(m0(o))n.push(o);else if(WN(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(he(Cw,8))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const N0=new Oe("AppId",{providedIn:"root",factory:function xU(){return`${_M()}${_M()}${_M()}`}});function _M(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const TU=new Oe("Platform Initializer"),xw=new Oe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),AU=new Oe("appBootstrapListener"),NU=new Oe("AnimationModuleType");let Rbe=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const ou=new Oe("LocaleId",{providedIn:"root",factory:()=>Ln(ou,He.Optional|He.SkipSelf)||function Fbe(){return typeof $localize<"u"&&$localize.locale||rg}()});class Lbe{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let yM=(()=>{class e{compileModuleSync(n){return new nM(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),o=Zl(wo(n).declarations).reduce((s,a)=>{const l=Bt(a);return l&&s.push(new h0(l)),s},[]);return new Lbe(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Vbe=(()=>Promise.resolve(0))();function vM(e){typeof Zone>"u"?Vbe.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ut{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tt(!1),this.onMicrotaskEmpty=new tt(!1),this.onStable=new tt(!1),this.onError=new tt(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function jbe(){let e=tn.requestAnimationFrame,t=tn.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function zbe(e){const t=()=>{!function Hbe(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(tn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,wM(e),e.isCheckStableRunning=!0,bM(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),wM(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return IU(e),n.invokeTask(r,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),OU(e)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return IU(e),n.invoke(r,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),OU(e)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,wM(e),bM(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ut.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(Ut.isInAngularZone())throw new ne(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,Ube,Dw,Dw);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const Ube={};function bM(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wM(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function IU(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function OU(e){e._nesting--,bM(e)}class Gbe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tt,this.onMicrotaskEmpty=new tt,this.onStable=new tt,this.onError=new tt}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}}const RU=new Oe(""),Tw=new Oe("");let CM,EM=(()=>{class e{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CM||(function Wbe(e){CM=e}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),vM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vM(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return e.\u0275fac=function(n){return new(n||e)(he(Ut),he(DM),he(Tw))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})(),DM=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return CM?.findTestabilityInTree(this,n,i)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),mc=null;const FU=new Oe("AllowMultipleToken"),SM=new Oe("PlatformDestroyListeners");class PU{constructor(t,n){this.name=t,this.token=n}}function $U(e,t,n=[]){const i=`Platform: ${t}`,r=new Oe(i);return(o=[])=>{let s=xM();if(!s||s.injector.get(FU,!1)){const a=[...n,...o,{provide:r,useValue:!0}];e?e(a):function Kbe(e){if(mc&&!mc.get(FU,!1))throw new ne(400,!1);mc=e;const t=e.get(VU);(function LU(e){const t=e.get(TU,null);t&&t.forEach(n=>n())})(e)}(function BU(e=[],t){return Ji.create({name:t,providers:[{provide:aN,useValue:"platform"},{provide:SM,useValue:new Set([()=>mc=null])},...e]})}(a,i))}return function Qbe(e){const t=xM();if(!t)throw new ne(401,!1);return t}()}}function xM(){return mc?.get(VU)??null}let VU=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function UU(e,t){let n;return n="noop"===e?new Gbe:("zone.js"===e?void 0:e)||new Ut(t),n}(i?.ngZone,function jU(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),o=[{provide:Ut,useValue:r}];return r.run(()=>{const s=Ji.create({providers:o,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(jp,null);if(!l)throw new ne(402,!1);return r.runOutsideAngular(()=>{const u=r.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{Aw(this._modules,a),u.unsubscribe()})}),function HU(e,t,n){try{const i=n();return m0(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(l,r,()=>{const u=a.injector.get(Sw);return u.runInitializers(),u.donePromise.then(()=>(function pj(e){bo(e,"Expected localeId to be defined"),"string"==typeof e&&(hj=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ou,rg)||rg),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,i=[]){const r=zU({},i);return function qbe(e,t,n){const i=new nM(n);return Promise.resolve(i)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(n){const i=n.injector.get(lg);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new ne(403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(SM,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(he(Ji))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function zU(e,t){return Array.isArray(t)?t.reduce(zU,e):{...e,...t}}let lg=(()=>{class e{constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new qt(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new qt(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),vM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=function ige(...e){const t=P_(e),n=function Xpe(e,t){return"number"==typeof qA(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?Oi(i[0]):vp(n)(Wn(i,t)):js}(o,s.pipe(function rge(e={}){const{connector:t=(()=>new bn),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s,a,l,u=0,c=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=l=void 0,c=d=!1},p=()=>{const g=s;h(),g?.unsubscribe()};return Tn((g,m)=>{u++,!d&&!c&&f();const _=l=l??t();m.add(()=>{u--,0===u&&!d&&!c&&(a=YA(p,r))}),_.subscribe(m),!s&&u>0&&(s=new F_({next:y=>_.next(y),error:y=>{d=!0,f(),a=YA(h,n,y),_.error(y)},complete:()=>{c=!0,f(),a=YA(h,i),_.complete()}}),Oi(g).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof f7;if(!this._injector.get(Sw).done)throw!r&&function wp(e){const t=Bt(e)||mr(e)||_r(e);return null!==t&&t.standalone}(n),new ne(405,false);let s;s=r?n:this._injector.get(c0).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function Ybe(e){return e.isBoundToModule}(s)?void 0:this._injector.get(bf),u=s.create(Ji.NULL,[],i||s.selector,a),c=u.location.nativeElement,d=u.injector.get(RU,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),Aw(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Aw(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(AU,[]).concat(this._bootstrapListeners).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Aw(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ne(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(he(Ut),he(dc),he(jp))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Aw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let WU=!0,au=(()=>{class e{}return e.__NG_ELEMENT_ID__=ewe,e})();function ewe(e){return function twe(e,t,n){if(kb(e)&&!n){const i=Co(e.index,t);return new f0(i,i)}return 47&e.type?new f0(t[16],t):null}(ni(),re(),16==(16&e))}class QU{constructor(){}supports(t){return p0(t)}create(t){return new awe(t)}}const swe=(e,t)=>t;class awe{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||swe}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<ZU(i,r,o)?n:i,a=ZU(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const u=a-r,c=l-r;if(u!=c){for(let f=0;f<u;f++){const h=f<o.length?o[f]:o[f]=0,p=h+f;c<=p&&p<u&&(o[f]=h+1)}o[s.previousIndex]=c-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!p0(t))throw new ne(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function zye(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[mf()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new lwe(n,i),o,r),t}_verifyReinsertion(t,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const r=null===n?this._itHead:n._next;return t._next=r,t._prev=n,null===r?this._itTail=t:r._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new JU),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new JU),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class lwe{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uwe{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class JU{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new uwe,this.map.set(n,i)),i.add(t)}get(t,n){const r=this.map.get(t);return r?r.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ZU(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class eH{constructor(){}supports(t){return t instanceof Map||UN(t)}create(){return new cwe}}class cwe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||UN(t)))throw new ne(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,n);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new dwe(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class dwe{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tH(){return new kw([new QU])}let kw=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||tH()),deps:[[e,new e0,new Z_]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new ne(901,!1)}}return e.\u0275prov=Ae({token:e,providedIn:"root",factory:tH}),e})();function nH(){return new M0([new eH])}let M0=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||nH()),deps:[[e,new e0,new Z_]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(i)return i;throw new ne(901,!1)}}return e.\u0275prov=Ae({token:e,providedIn:"root",factory:nH}),e})();const pwe=$U(null,"core",[]);let gwe=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(he(lg))},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({}),e})();function lu(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function kM(e,t){const n=Bt(e),i=t.elementInjector||nw();return new h0(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}let Iw=null;function ea(){return Iw}const un=new Oe("DocumentToken");let IM=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:function(){return function vwe(){return he(iH)}()},providedIn:"platform"}),e})();const bwe=new Oe("Location Initialized");let iH=(()=>{class e extends IM{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ea().getBaseHref(this._doc)}onPopState(n){const i=ea().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=ea().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,r){rH()?this._history.pushState(n,i,r):this.location.hash=r}replaceState(n,i,r){rH()?this._history.replaceState(n,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(he(un))},e.\u0275prov=Ae({token:e,factory:function(){return function wwe(){return new iH(he(un))}()},providedIn:"platform"}),e})();function rH(){return!!window.history.pushState}function OM(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function oH(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function uu(e){return e&&"?"!==e[0]?"?"+e:e}let _c=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:function(){return Ln(RM)},providedIn:"root"}),e})();const sH=new Oe("appBaseHref");let RM=(()=>{class e extends _c{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ln(un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return OM(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+uu(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){const s=this.prepareExternalUrl(r+uu(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){const s=this.prepareExternalUrl(r+uu(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(he(IM),he(sH,8))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ewe=(()=>{class e extends _c{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=OM(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+uu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+uu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(he(IM),he(sH,8))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})(),FM=(()=>{class e{constructor(n){this._subject=new tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._baseHref=oH(aH(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+uu(i))}normalize(n){return e.stripTrailingSlash(function Cwe(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,aH(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+uu(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+uu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return e.normalizeQueryParams=uu,e.joinWithSlash=OM,e.stripTrailingSlash=oH,e.\u0275fac=function(n){return new(n||e)(he(_c))},e.\u0275prov=Ae({token:e,factory:function(){return function Dwe(){return new FM(he(_c))}()},providedIn:"root"}),e})();function aH(e){return e.replace(/\/index.html$/,"")}function mH(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}class uEe{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yc=(()=>{class e{constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new uEe(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),vH(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{vH(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(U(Js),U(In),U(kw))},e.\u0275dir=we({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function vH(e,t){e.context.$implicit=t.item}let du=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new dEe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){bH("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){bH("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(U(Js),U(In))},e.\u0275dir=we({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class dEe{constructor(){this.$implicit=null,this.ngIf=null}}function bH(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Kt(t)}'.`)}let EH=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){const[r,o]=n.split("."),s=-1===r.indexOf("-")?void 0:Kr.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(U(an),U(M0),U(To))},e.\u0275dir=we({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),No=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({}),e})();let R0=(()=>{class e{}return e.\u0275prov=Ae({token:e,providedIn:"root",factory:()=>new VEe(he(un),window)}),e})();class VEe{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function jEe(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=SH(this.window.history)||SH(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function SH(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class xH{}class QM extends class pDe extends class ywe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function _we(e){Iw||(Iw=e)}(new QM)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function gDe(){return P0=P0||document.querySelector("base"),P0?P0.getAttribute("href"):null}();return null==n?null:function mDe(e){zw=zw||document.createElement("a"),zw.setAttribute("href",e);const t=zw.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){P0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return mH(document.cookie,t)}}let zw,P0=null;const kH=new Oe("TRANSITION_ID"),yDe=[{provide:Cw,useFactory:function _De(e,t,n){return()=>{n.get(Sw).donePromise.then(()=>{const i=ea(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[kH,un,Ji],multi:!0}];let bDe=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();const Gw=new Oe("EventManagerPlugins");let Ww=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(he(Gw),he(Ut))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();class IH{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const r=ea().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let OH=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})(),L0=(()=>{class e extends OH{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(RH),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(RH))}}return e.\u0275fac=function(n){return new(n||e)(he(un))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();function RH(e){ea().remove(e)}const JM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ZM=/%COMP%/g;function qw(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?qw(e,r,n):(r=r.replace(ZM,e),n.push(r))}return n}function LH(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Yw=(()=>{class e{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ek(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case Hs.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new xDe(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case Hs.ShadowDom:return new TDe(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=qw(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(he(Ww),he(L0),he(N0))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();class ek{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(JM[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(BH(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(BH(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;const o=JM[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const r=JM[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(Kr.DashCase|Kr.Important)?t.style.setProperty(n,i,r&Kr.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Kr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,LH(i)):this.eventManager.addEventListener(t,n,LH(i))}}function BH(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class xDe extends ek{constructor(t,n,i,r){super(t),this.component=i;const o=qw(r+"-"+i.id,i.styles,[]);n.addStyles(o),this.contentAttr=function DDe(e){return"_ngcontent-%COMP%".replace(ZM,e)}(r+"-"+i.id),this.hostAttr=function CDe(e){return"_nghost-%COMP%".replace(ZM,e)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class TDe extends ek{constructor(t,n,i,r){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=qw(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ADe=(()=>{class e extends IH{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return e.\u0275fac=function(n){return new(n||e)(he(un))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();const VH=["alt","control","meta","shift"],NDe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MDe={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let kDe=(()=>{class e extends IH{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,r){const o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ea().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=e._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),VH.forEach(u=>{const c=i.indexOf(u);c>-1&&(i.splice(c,1),s+=u+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=NDe[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),VH.forEach(s=>{s!==r&&(0,MDe[s])(n)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(he(un))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();const UH=[{provide:xw,useValue:"browser"},{provide:TU,useValue:function IDe(){QM.makeCurrent()},multi:!0},{provide:un,useFactory:function RDe(){return function D_e(e){J2=e}(document),document},deps:[]}],FDe=$U(pwe,"browser",UH),HH=new Oe(""),zH=[{provide:Tw,useClass:class vDe{addToWindow(t){tn.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},tn.getAllAngularTestabilities=()=>t.getAllTestabilities(),tn.getAllAngularRootElements=()=>t.getAllRootElements(),tn.frameworkStabilizers||(tn.frameworkStabilizers=[]),tn.frameworkStabilizers.push(i=>{const r=tn.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,i){return null==n?null:t.getTestability(n)??(i?ea().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:RU,useClass:EM,deps:[Ut,DM,Tw]},{provide:EM,useClass:EM,deps:[Ut,DM,Tw]}],GH=[{provide:aN,useValue:"root"},{provide:jp,useFactory:function ODe(){return new jp},deps:[]},{provide:Gw,useClass:ADe,multi:!0,deps:[un,Ut,xw]},{provide:Gw,useClass:kDe,multi:!0,deps:[un]},{provide:Yw,useClass:Yw,deps:[Ww,L0,N0]},{provide:Vp,useExisting:Yw},{provide:OH,useExisting:L0},{provide:L0,useClass:L0,deps:[un]},{provide:Ww,useClass:Ww,deps:[Gw,Ut]},{provide:xH,useClass:bDe,deps:[]},[]];let WH=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:N0,useValue:n.appId},{provide:kH,useExisting:N0},yDe]}}}return e.\u0275fac=function(n){return new(n||e)(he(HH,12))},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({providers:[...GH,...zH],imports:[No,gwe]}),e})(),nk=(()=>{class e{constructor(n){this._doc=n,this._dom=ea()}addTag(n,i=!1){return n?this._getOrCreateElement(n,i):null}addTags(n,i=!1){return n?n.reduce((r,o)=>(o&&r.push(this._getOrCreateElement(o,i)),r),[]):[]}getTag(n){return n&&this._doc.querySelector(`meta[${n}]`)||null}getTags(n){if(!n)return[];const i=this._doc.querySelectorAll(`meta[${n}]`);return i?[].slice.call(i):[]}updateTag(n,i){if(!n)return null;i=i||this._parseSelector(n);const r=this.getTag(i);return r?this._setMetaElementAttributes(n,r):this._getOrCreateElement(n,!0)}removeTag(n){this.removeTagElement(this.getTag(n))}removeTagElement(n){n&&this._dom.remove(n)}_getOrCreateElement(n,i=!1){if(!i){const s=this._parseSelector(n),a=this.getTags(s).filter(l=>this._containsAttributes(n,l))[0];if(void 0!==a)return a}const r=this._dom.createElement("meta");return this._setMetaElementAttributes(n,r),this._doc.getElementsByTagName("head")[0].appendChild(r),r}_setMetaElementAttributes(n,i){return Object.keys(n).forEach(r=>i.setAttribute(this._getMetaKeyMap(r),n[r])),i}_parseSelector(n){const i=n.name?"name":"property";return`${i}="${n[i]}"`}_containsAttributes(n,i){return Object.keys(n).every(r=>i.getAttribute(this._getMetaKeyMap(r))===n[r])}_getMetaKeyMap(n){return LDe[n]||n}}return e.\u0275fac=function(n){return new(n||e)(he(un))},e.\u0275prov=Ae({token:e,factory:function(n){let i=null;return i=n?new n:function PDe(){return new nk(he(un))}(),i},providedIn:"root"}),e})();const LDe={httpEquiv:"http-equiv"};let Kw=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(he(un))},e.\u0275prov=Ae({token:e,factory:function(n){let i=null;return i=n?new n:function $De(){return new Kw(he(un))}(),i},providedIn:"root"}),e})();function Re(...e){return Wn(e,P_(e))}typeof window<"u"&&window;class yi extends bn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const Xw=tf(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:WDe}=Array,{getPrototypeOf:qDe,prototype:YDe,keys:KDe}=Object;function KH(e){if(1===e.length){const t=e[0];if(WDe(t))return{args:t,keys:null};if(function XDe(e){return e&&"object"==typeof e&&qDe(e)===YDe}(t)){const n=KDe(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}const{isArray:QDe}=Array;function rk(e){return qe(t=>function JDe(e,t){return QDe(t)?e(...t):e(t)}(e,t))}function XH(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function Qw(...e){const t=P_(e),n=Eb(e),{args:i,keys:r}=KH(e);if(0===i.length)return Wn([],t);const o=new qt(function ZDe(e,t,n=Gl){return i=>{QH(t,()=>{const{length:r}=e,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)QH(t,()=>{const u=Wn(e[l],t);let c=!1;u.subscribe(en(i,d=>{o[l]=d,c||(c=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,t,r?s=>XH(r,s):Gl));return n?o.pipe(rk(n)):o}function QH(e,t,n){e?Wl(n,e,t):t()}function $0(...e){return function eCe(){return vp(1)}()(Wn(e,P_(e)))}function JH(e){return new qt(t=>{Oi(e()).subscribe(t)})}function B0(e,t){const n=gt(e)?e:()=>e,i=r=>r.error(n());return new qt(t?r=>t.schedule(i,0,r):i)}function ok(){return Tn((e,t)=>{let n=null;e._refCount++;const i=en(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}class ZH extends qt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,e6(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ii;const n=this.getSubject();t.add(this.source.subscribe(en(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ii.EMPTY)}return t}refCount(){return ok()(this)}}function cs(e,t){return Tn((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(en(i,l=>{r?.unsubscribe();let u=0;const c=o++;Oi(e(l,c)).subscribe(r=en(i,d=>i.next(t?t(l,d,c,u++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ri(e){return e<=0?()=>js:Tn((t,n)=>{let i=0;t.subscribe(en(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function vi(e,t){return Tn((n,i)=>{let r=0;n.subscribe(en(i,o=>e.call(t,o,r++)&&i.next(o)))})}function Zw(e){return Tn((t,n)=>{let i=!1;t.subscribe(en(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function ez(e=tCe){return Tn((t,n)=>{let i=!1;t.subscribe(en(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function tCe(){return new Xw}function bc(e,t){const n=arguments.length>=2;return i=>i.pipe(e?vi((r,o)=>e(r,o,i)):Gl,Ri(1),n?Zw(t):ez(()=>new Xw))}function wc(e,t){return gt(t)?ti(e,t,1):ti(e,1)}function bi(e,t,n){const i=gt(e)||t||n?{next:e,error:t,complete:n}:e;return i?Tn((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(en(o,l=>{var u;null===(u=i.next)||void 0===u||u.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var u;a=!1,null===(u=i.error)||void 0===u||u.call(i,l),o.error(l)},()=>{var l,u;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(u=i.finalize)||void 0===u||u.call(i)}))}):Gl}function Ec(e){return Tn((t,n)=>{let o,i=null,r=!1;i=t.subscribe(en(n,void 0,void 0,s=>{o=Oi(e(s,Ec(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function nCe(e,t,n,i,r){return(o,s)=>{let a=n,l=t,u=0;o.subscribe(en(s,c=>{const d=u++;l=a?e(l,c,d):(a=!0,c),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function tz(e,t){return Tn(nCe(e,t,arguments.length>=2,!0))}function sk(e){return e<=0?()=>js:Tn((t,n)=>{let i=[];t.subscribe(en(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function nz(e,t){const n=arguments.length>=2;return i=>i.pipe(e?vi((r,o)=>e(r,o,i)):Gl,sk(1),n?Zw(t):ez(()=>new Xw))}function ak(e){return Tn((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const at="primary",V0=Symbol("RouteTitle");class rCe{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ug(e){return new rCe(e)}function oCe(e,t,n){const i=n.path.split("/");if(i.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function Ka(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!rz(e[r],t[r]))return!1;return!0}function rz(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}return e===t}function oz(e){return Array.prototype.concat.apply([],e)}function sz(e){return e.length>0?e[e.length-1]:null}function Fi(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Dc(e){return WN(e)?e:m0(e)?Wn(Promise.resolve(e)):Re(e)}const lCe={exact:function uz(e,t,n){if(!Cf(e.segments,t.segments)||!eE(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!e.children[i]||!uz(e.children[i],t.children[i],n))return!1;return!0},subset:cz},az={exact:function uCe(e,t){return Ka(e,t)},subset:function cCe(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>rz(e[n],t[n]))},ignored:()=>!0};function lz(e,t,n){return lCe[n.paths](e.root,t.root,n.matrixParams)&&az[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function cz(e,t,n){return dz(e,t,t.segments,n)}function dz(e,t,n,i){if(e.segments.length>n.length){const r=e.segments.slice(0,n.length);return!(!Cf(r,n)||t.hasChildren()||!eE(r,n,i))}if(e.segments.length===n.length){if(!Cf(e.segments,n)||!eE(e.segments,n,i))return!1;for(const r in t.children)if(!e.children[r]||!cz(e.children[r],t.children[r],i))return!1;return!0}{const r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(Cf(e.segments,r)&&eE(e.segments,r,i)&&e.children[at])&&dz(e.children[at],t,o,i)}}function eE(e,t,n){return t.every((i,r)=>az[n](e[r].parameters,i.parameters))}class Df{constructor(t,n,i){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ug(this.queryParams)),this._queryParamMap}toString(){return hCe.serialize(this)}}class ut{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Fi(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tE(this)}}class j0{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ug(this.parameters)),this._parameterMap}toString(){return gz(this)}}function Cf(e,t){return e.length===t.length&&e.every((n,i)=>n.path===t[i].path)}let fz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:function(){return new uk},providedIn:"root"}),e})();class uk{parse(t){const n=new ECe(t);return new Df(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${U0(t.root,!0)}`,i=function mCe(e){const t=Object.keys(e).map(n=>{const i=e[n];return Array.isArray(i)?i.map(r=>`${nE(n)}=${nE(r)}`).join("&"):`${nE(n)}=${nE(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${i}${"string"==typeof t.fragment?`#${function pCe(e){return encodeURI(e)}(t.fragment)}`:""}`}}const hCe=new uk;function tE(e){return e.segments.map(t=>gz(t)).join("/")}function U0(e,t){if(!e.hasChildren())return tE(e);if(t){const n=e.children[at]?U0(e.children[at],!1):"",i=[];return Fi(e.children,(r,o)=>{o!==at&&i.push(`${o}:${U0(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function fCe(e,t){let n=[];return Fi(e.children,(i,r)=>{r===at&&(n=n.concat(t(i,r)))}),Fi(e.children,(i,r)=>{r!==at&&(n=n.concat(t(i,r)))}),n}(e,(i,r)=>r===at?[U0(e.children[at],!1)]:[`${r}:${U0(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[at]?`${tE(e)}/${n[0]}`:`${tE(e)}/(${n.join("//")})`}}function hz(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nE(e){return hz(e).replace(/%3B/gi,";")}function ck(e){return hz(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iE(e){return decodeURIComponent(e)}function pz(e){return iE(e.replace(/\+/g,"%20"))}function gz(e){return`${ck(e.path)}${function gCe(e){return Object.keys(e).map(t=>`;${ck(t)}=${ck(e[t])}`).join("")}(e.parameters)}`}const _Ce=/^[^\/()?;=#]+/;function rE(e){const t=e.match(_Ce);return t?t[0]:""}const yCe=/^[^=?&#]+/,bCe=/^[^&#]+/;class ECe{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ut([],{}):new ut([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[at]=new ut(t,n)),i}parseSegment(){const t=rE(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(t),new j0(iE(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=rE(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=rE(this.remaining);r&&(i=r,this.capture(i))}t[iE(n)]=iE(i)}parseQueryParam(t){const n=function vCe(e){const t=e.match(yCe);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const s=function wCe(e){const t=e.match(bCe);return t?t[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=pz(n),o=pz(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=rE(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ne(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=at);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[at]:new ut([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new ne(4011,!1)}}function dk(e){return e.segments.length>0?new ut([],{[at]:e}):e}function oE(e){const t={};for(const i of Object.keys(e.children)){const o=oE(e.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function DCe(e){if(1===e.numberOfChildren&&e.children[at]){const t=e.children[at];return new ut(e.segments.concat(t.segments),t.children)}return e}(new ut(e.segments,t))}function Sf(e){return e instanceof Df}function xCe(e,t,n,i,r){if(0===n.length)return cg(t.root,t.root,t.root,i,r);const o=function yz(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new _z(!0,0,e);let t=0,n=!1;const i=e.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Fi(o.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new _z(n,t,i)}(n);return o.toRoot()?cg(t.root,t.root,new ut([],{}),i,r):function s(l){const u=function ACe(e,t,n,i){if(e.isAbsolute)return new dg(t.root,!0,0);if(-1===i)return new dg(n,n===t.root,0);return function vz(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ne(4005,!1);r=i.segments.length}return new dg(i,!1,r-o)}(n,i+(H0(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,l),c=u.processChildren?G0(u.segmentGroup,u.index,o.commands):hk(u.segmentGroup,u.index,o.commands);return cg(t.root,u.segmentGroup,c,i,r)}(e.snapshot?._lastPathIndex)}function H0(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function z0(e){return"object"==typeof e&&null!=e&&e.outlets}function cg(e,t,n,i,r){let s,o={};i&&Fi(i,(l,u)=>{o[u]=Array.isArray(l)?l.map(c=>`${c}`):`${l}`}),s=e===t?n:mz(e,t,n);const a=dk(oE(s));return new Df(a,o,r)}function mz(e,t,n){const i={};return Fi(e.children,(r,o)=>{i[o]=r===t?n:mz(r,t,n)}),new ut(e.segments,i)}class _z{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&H0(i[0]))throw new ne(4003,!1);const r=i.find(z0);if(r&&r!==sz(i))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dg{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function hk(e,t,n){if(e||(e=new ut([],{})),0===e.segments.length&&e.hasChildren())return G0(e,t,n);const i=function MCe(e,t,n){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;const s=e.segments[r],a=n[i];if(z0(a))break;const l=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!wz(l,u,s))return o;i+=2}else{if(!wz(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const o=new ut(e.segments.slice(0,i.pathIndex),{});return o.children[at]=new ut(e.segments.slice(i.pathIndex),e.children),G0(o,0,r)}return i.match&&0===r.length?new ut(e.segments,{}):i.match&&!e.hasChildren()?pk(e,t,n):i.match?G0(e,0,r):pk(e,t,n)}function G0(e,t,n){if(0===n.length)return new ut(e.segments,{});{const i=function NCe(e){return z0(e[0])?e[0].outlets:{[at]:e}}(n),r={};return Fi(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=hk(e.children[s],t,o))}),Fi(e.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new ut(e.segments,r)}}function pk(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const o=n[r];if(z0(o)){const l=kCe(o.outlets);return new ut(i,l)}if(0===r&&H0(n[0])){i.push(new j0(e.segments[t].path,bz(n[0]))),r++;continue}const s=z0(o)?o.outlets[at]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&H0(a)?(i.push(new j0(s,bz(a))),r+=2):(i.push(new j0(s,{})),r++)}return new ut(i,{})}function kCe(e){const t={};return Fi(e,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=pk(new ut([],{}),0,n))}),t}function bz(e){const t={};return Fi(e,(n,i)=>t[i]=`${n}`),t}function wz(e,t,n){return e==n.path&&Ka(t,n.parameters)}class fu{constructor(t,n){this.id=t,this.url=n}}class gk extends fu{constructor(t,n,i="imperative",r=null){super(t,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cc extends fu{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sE extends fu{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ez extends fu{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ICe extends fu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OCe extends fu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RCe extends fu{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class FCe extends fu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PCe extends fu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LCe{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $Ce{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class BCe{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VCe{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jCe{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mk{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dz{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Cz{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=_k(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=_k(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=yk(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return yk(t,this._root).map(n=>n.value)}}function _k(e,t){if(e===t.value)return t;for(const n of t.children){const i=_k(e,n);if(i)return i}return null}function yk(e,t){if(e===t.value)return[t];for(const n of t.children){const i=yk(e,n);if(i.length)return i.unshift(t),i}return[]}class hu{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function fg(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class Sz extends Cz{constructor(t,n){super(t),this.snapshot=n,vk(this,t)}toString(){return this.snapshot.toString()}}function xz(e,t){const n=function HCe(e,t){const s=new aE([],{},{},"",{},at,t,null,e.root,-1,{});return new Az("",new hu(s,[]))}(e,t),i=new yi([new j0("",{})]),r=new yi({}),o=new yi({}),s=new yi({}),a=new yi(""),l=new ia(i,r,s,a,o,at,t,n.root);return l.snapshot=n.root,new Sz(new hu(l,[]),n)}class ia{constructor(t,n,i,r,o,s,a,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(qe(u=>u[V0]))??Re(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(qe(t=>ug(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(qe(t=>ug(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tz(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function zCe(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class aE{constructor(t,n,i,r,o,s,a,l,u,c,d,f){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.[V0],this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=c,this._correctedLastPathIndex=f??c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ug(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ug(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Az extends Cz{constructor(t,n){super(n),this.url=t,vk(this,n)}toString(){return Nz(this._root)}}function vk(e,t){t.value._routerState=e,t.children.forEach(n=>vk(e,n))}function Nz(e){const t=e.children.length>0?` { ${e.children.map(Nz).join(", ")} } `:"";return`${e.value}${t}`}function bk(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ka(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Ka(t.params,n.params)||e.params.next(n.params),function sCe(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ka(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Ka(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function wk(e,t){const n=Ka(e.params,t.params)&&function dCe(e,t){return Cf(e,t)&&e.every((n,i)=>Ka(n.parameters,t[i].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||wk(e.parent,t.parent))}function W0(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function WCe(e,t,n){return t.children.map(i=>{for(const r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return W0(e,i,r);return W0(e,i)})}(e,t,n);return new hu(i,r)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>W0(e,a)),s}}const i=function qCe(e){return new ia(new yi(e.url),new yi(e.params),new yi(e.queryParams),new yi(e.fragment),new yi(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(o=>W0(e,o));return new hu(i,r)}}const Ek="ngNavigationCancelingError";function Mz(e,t){const{redirectTo:n,navigationBehaviorOptions:i}=Sf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=kz(!1,0,t);return r.url=n,r.navigationBehaviorOptions=i,r}function kz(e,t,n){const i=new Error("NavigationCancelingError: "+(e||""));return i[Ek]=!0,i.cancellationCode=t,n&&(i.url=n),i}function Iz(e){return Oz(e)&&Sf(e.url)}function Oz(e){return e&&e[Ek]}class YCe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new q0,this.attachRef=null}}let q0=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new YCe,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const lE=!1;let Dk=(()=>{class e{constructor(n,i,r,o,s){this.parentContexts=n,this.location=i,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new tt,this.deactivateEvents=new tt,this.attachEvents=new tt,this.detachEvents=new tt,this.name=r||at,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,lE);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,lE);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,lE);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new ne(4013,lE);this._activatedRoute=n;const r=this.location,s=n._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new KCe(n,a,r.injector);if(i&&function XCe(e){return!!e.resolveComponentFactory}(i)){const u=i.resolveComponentFactory(s);this.activated=r.createComponent(u,r.length,l)}else this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(U(q0),U(Js),function ff(e){return function lme(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(G6(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===t)return n[r+1];r+=2}}}return null}(ni(),e)}("name"),U(au),U(dc))},e.\u0275dir=we({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class KCe{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===ia?this.route:t===q0?this.childContexts:this.parent.get(t,n)}}let Ck=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=An({type:e,selectors:[["ng-component"]],standalone:!0,features:[jj],decls:1,vars:0,template:function(n,i){1&n&&ze(0,"router-outlet")},dependencies:[Dk],encapsulation:2}),e})();function Rz(e,t){return e.providers&&!e._injector&&(e._injector=bw(e.providers,t,`Route: ${e.path}`)),e._injector??t}function xk(e){const t=e.children&&e.children.map(xk),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==at&&(n.component=Ck),n}function ds(e){return e.outlet||at}function Fz(e,t){const n=e.filter(i=>ds(i)===t);return n.push(...e.filter(i=>ds(i)!==t)),n}function Y0(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class tSe{constructor(t,n,i,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),bk(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const r=fg(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Fi(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=fg(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=fg(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const r=fg(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new mk(o.value.snapshot))}),t.children.length&&this.forwardEvent(new VCe(t.value.snapshot))}activateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(bk(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),bk(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=Y0(r.snapshot),l=a?.get(c0)??null;s.attachRef=null,s.route=r,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}}class Pz{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class uE{constructor(t,n){this.component=t,this.route=n}}function nSe(e,t,n){const i=e._root;return K0(i,t?t._root:null,n,[i.value])}function hg(e,t){const n=Symbol(),i=t.get(e,n);return i===n?"function"!=typeof e||function dge(e){return null!==Sb(e)}(e)?t.get(e):e:i}function K0(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=fg(t);return e.children.forEach(s=>{(function rSe(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function oSe(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Cf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Cf(e.url,t.url)||!Ka(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wk(e,t)||!Ka(e.queryParams,t.queryParams);default:return!wk(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Pz(i)):(o.data=s.data,o._resolvedData=s._resolvedData),K0(e,t,o.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new uE(a.outlet.component,s))}else s&&X0(t,a,r),r.canActivateChecks.push(new Pz(i)),K0(e,null,o.component?a?a.children:null:n,i,r)})(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Fi(o,(s,a)=>X0(s,n.getContext(a),r)),r}function X0(e,t,n){const i=fg(e),r=e.value;Fi(i,(o,s)=>{X0(o,r.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new uE(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Q0(e){return"function"==typeof e}function Tk(e){return e instanceof Xw||"EmptyError"===e?.name}const cE=Symbol("INITIAL_VALUE");function pg(){return cs(e=>Qw(e.map(t=>t.pipe(Ri(1),function Jw(...e){const t=P_(e);return Tn((n,i)=>{(t?$0(e,n,t):$0(e,n)).subscribe(i)})}(cE)))).pipe(qe(t=>{for(const n of t)if(!0!==n){if(n===cE)return cE;if(!1===n||n instanceof Df)return n}return!0}),vi(t=>t!==cE),Ri(1)))}function Lz(e){return function gpe(...e){return QB(e)}(bi(t=>{if(Sf(t))throw Mz(0,t)}),qe(t=>!0===t))}const Ak={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $z(e,t,n,i,r){const o=Nk(e,t,n);return o.matched?function ESe(e,t,n,i){const r=t.canMatch;return r&&0!==r.length?Re(r.map(s=>{const a=hg(s,e);return Dc(function dSe(e){return e&&Q0(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(pg(),Lz()):Re(!0)}(i=Rz(t,i),t,n).pipe(qe(s=>!0===s?o:{...Ak})):Re(o)}function Nk(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Ak}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(t.matcher||oCe)(n,e,t);if(!r)return{...Ak};const o={};Fi(r.posParams,(a,l)=>{o[l]=a.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function dE(e,t,n,i,r="corrected"){if(n.length>0&&function SSe(e,t,n){return n.some(i=>fE(e,t,i)&&ds(i)!==at)}(e,n,i)){const s=new ut(t,function CSe(e,t,n,i){const r={};r[at]=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&ds(o)!==at){const s=new ut([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,r[ds(o)]=s}return r}(e,t,i,new ut(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function xSe(e,t,n){return n.some(i=>fE(e,t,i))}(e,n,i)){const s=new ut(e.segments,function DSe(e,t,n,i,r,o){const s={};for(const a of i)if(fE(e,n,a)&&!r[ds(a)]){const l=new ut([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[ds(a)]=l}return{...r,...s}}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new ut(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function fE(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Bz(e,t,n,i){return!!(ds(e)===i||i!==at&&fE(t,n,e))&&("**"===e.path||Nk(t,e,n).matched)}function Vz(e,t,n){return 0===t.length&&!e.children[n]}const hE=!1;class pE{constructor(t){this.segmentGroup=t||null}}class jz{constructor(t){this.urlTree=t}}function J0(e){return B0(new pE(e))}function Uz(e){return B0(new jz(e))}class MSe{constructor(t,n,i,r,o){this.injector=t,this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const t=dE(this.urlTree.root,[],[],this.config).segmentGroup,n=new ut(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,at).pipe(qe(o=>this.createUrlTree(oE(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ec(o=>{if(o instanceof jz)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof pE?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,at).pipe(qe(r=>this.createUrlTree(oE(r),t.queryParams,t.fragment))).pipe(Ec(r=>{throw r instanceof pE?this.noMatchError(r):r}))}noMatchError(t){return new ne(4002,hE)}createUrlTree(t,n,i){const r=dk(t);return new Df(r,n,i)}expandSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe(qe(o=>new ut([],o))):this.expandSegment(t,i,n,i.segments,r,!0)}expandChildren(t,n,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return Wn(r).pipe(wc(o=>{const s=i.children[o],a=Fz(n,o);return this.expandSegmentGroup(t,a,s,o).pipe(qe(l=>({segment:l,outlet:o})))}),tz((o,s)=>(o[s.outlet]=s.segment,o),{}),nz())}expandSegment(t,n,i,r,o,s){return Wn(i).pipe(wc(a=>this.expandSegmentAgainstRoute(t,n,i,a,r,o,s).pipe(Ec(u=>{if(u instanceof pE)return Re(null);throw u}))),bc(a=>!!a),Ec((a,l)=>{if(Tk(a))return Vz(n,r,o)?Re(new ut([],{})):J0(n);throw a}))}expandSegmentAgainstRoute(t,n,i,r,o,s,a){return Bz(r,n,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,n,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s):J0(n):J0(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Uz(o):this.lineralizeSegments(i,o).pipe(ti(s=>{const a=new ut(s,{});return this.expandSegment(t,a,n,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:c}=Nk(n,r,o);if(!a)return J0(n);const d=this.applyRedirectCommands(l,r.redirectTo,c);return r.redirectTo.startsWith("/")?Uz(d):this.lineralizeSegments(r,d).pipe(ti(f=>this.expandSegment(t,n,i,f.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){return"**"===i.path?(t=Rz(i,t),i.loadChildren?(i._loadedRoutes?Re({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe(qe(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new ut(r,{})))):Re(new ut(r,{}))):$z(n,i,r,t).pipe(cs(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=i._injector??t,i,r).pipe(ti(c=>{const d=c.injector??t,f=c.routes,{segmentGroup:h,slicedSegments:p}=dE(n,a,l,f),g=new ut(h.segments,h.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,f,g).pipe(qe(v=>new ut(a,v)));if(0===f.length&&0===p.length)return Re(new ut(a,{}));const m=ds(i)===o;return this.expandSegment(d,g,f,p,m?at:o,!0).pipe(qe(y=>new ut(a.concat(y.segments),y.children)))})):J0(n)))}getChildConfig(t,n,i){return n.children?Re({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Re({routes:n._loadedRoutes,injector:n._loadedInjector}):function wSe(e,t,n,i){const r=t.canLoad;return void 0===r||0===r.length?Re(!0):Re(r.map(s=>{const a=hg(s,e);return Dc(function aSe(e){return e&&Q0(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(pg(),Lz())}(t,n,i).pipe(ti(r=>r?this.configLoader.loadChildren(t,n).pipe(bi(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function ASe(e){return B0(kz(hE,3))}())):Re({routes:[],injector:t})}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Re(i);if(r.numberOfChildren>1||!r.children[at])return B0(new ne(4e3,hE));r=r.children[at]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreateUrlTree(t,n,i,r){const o=this.createSegmentGroup(t,n.root,i,r);return new Df(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return Fi(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=n[a]}else i[o]=r}),i}createSegmentGroup(t,n,i,r){const o=this.createSegments(t,n.segments,i,r);let s={};return Fi(n.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,i,r)}),new ut(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){const r=i[n.path.substring(1)];if(!r)throw new ne(4001,hE);return r}findOrReturn(t,n){let i=0;for(const r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}}class ISe{}class FSe{constructor(t,n,i,r,o,s,a,l){this.injector=t,this.rootComponentType=n,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const t=dE(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,at).pipe(qe(n=>{if(null===n)return null;const i=new aE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new hu(i,n),o=new Az(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const n=t.value,i=Tz(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r)}processChildren(t,n,i){return Wn(Object.keys(i.children)).pipe(wc(r=>{const o=i.children[r],s=Fz(n,r);return this.processSegmentGroup(t,s,o,r)}),tz((r,o)=>r&&o?(r.push(...o),r):null),function iCe(e,t=!1){return Tn((n,i)=>{let r=0;n.subscribe(en(i,o=>{const s=e(o,r++);(s||t)&&i.next(o),!s&&i.complete()}))})}(r=>null!==r),Zw(null),nz(),qe(r=>{if(null===r)return null;const o=Hz(r);return function PSe(e){e.sort((t,n)=>t.value.outlet===at?-1:n.value.outlet===at?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}))}processSegment(t,n,i,r,o){return Wn(n).pipe(wc(s=>this.processSegmentAgainstRoute(s._injector??t,s,i,r,o)),bc(s=>!!s),Ec(s=>{if(Tk(s))return Vz(i,r,o)?Re([]):Re(null);throw s}))}processSegmentAgainstRoute(t,n,i,r,o){if(n.redirectTo||!Bz(n,i,r,o))return Re(null);let s;if("**"===n.path){const a=r.length>0?sz(r).parameters:{},l=Gz(i)+r.length;s=Re({snapshot:new aE(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qz(n),ds(n),n.component??n._loadedComponent??null,n,zz(i),l,Yz(n),l),consumedSegments:[],remainingSegments:[]})}else s=$z(i,n,r,t).pipe(qe(({matched:a,consumedSegments:l,remainingSegments:u,parameters:c})=>{if(!a)return null;const d=Gz(i)+l.length;return{snapshot:new aE(l,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qz(n),ds(n),n.component??n._loadedComponent??null,n,zz(i),d,Yz(n),d),consumedSegments:l,remainingSegments:u}}));return s.pipe(cs(a=>{if(null===a)return Re(null);const{snapshot:l,consumedSegments:u,remainingSegments:c}=a;t=n._injector??t;const d=n._loadedInjector??t,f=function LSe(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:h,slicedSegments:p}=dE(i,u,c,f.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution);if(0===p.length&&h.hasChildren())return this.processChildren(d,f,h).pipe(qe(m=>null===m?null:[new hu(l,m)]));if(0===f.length&&0===p.length)return Re([new hu(l,[])]);const g=ds(n)===o;return this.processSegment(d,f,h,p,g?at:o).pipe(qe(m=>null===m?null:[new hu(l,m)]))}))}}function $Se(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Hz(e){const t=[],n=new Set;for(const i of e){if(!$Se(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):t.push(i)}for(const i of n){const r=Hz(i.children);t.push(new hu(i.value,r))}return t.filter(i=>!n.has(i))}function zz(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Gz(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function qz(e){return e.data||{}}function Yz(e){return e.resolve||{}}function jSe(e,t){return ti(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return Re(n);let o=0;return Wn(r).pipe(wc(s=>function USe(e,t,n,i){const r=e.routeConfig,o=e._resolve;return void 0!==r?.title&&!Kz(r)&&(o[V0]=r.title),function HSe(e,t,n,i){const r=function zSe(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===r.length)return Re({});const o={};return Wn(r).pipe(ti(s=>function GSe(e,t,n,i){const r=Y0(t)??i,o=hg(e,r);return Dc(o.resolve?o.resolve(t,n):r.runInContext(()=>o(t,n)))}(e[s],t,n,i).pipe(bc(),bi(a=>{o[s]=a}))),sk(1),function iz(e){return qe(()=>e)}(o),Ec(s=>Tk(s)?js:B0(s)))}(o,e,t,i).pipe(qe(s=>(e._resolvedData=s,e.data=Tz(e,n).resolve,r&&Kz(r)&&(e.data[V0]=r.title),null)))}(s.route,i,e,t)),bi(()=>o++),sk(1),ti(s=>o===r.length?Re(n):js))})}function Kz(e){return"string"==typeof e.title||null===e.title}function Mk(e){return cs(t=>{const n=e(t);return n?Wn(n).pipe(qe(()=>t)):Re(t)})}let Xz=(()=>{class e{buildTitle(n){let i,r=n.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===at);return i}getResolvedTitleForRoute(n){return n.data[V0]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:function(){return Ln(Qz)},providedIn:"root"}),e})(),Qz=(()=>{class e extends Xz{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}}return e.\u0275fac=function(n){return new(n||e)(he(Kw))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class WSe{}class YSe extends class qSe{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const mE=new Oe("",{providedIn:"root",factory:()=>({})}),kk=new Oe("ROUTES");let Ik=(()=>{class e{constructor(n,i){this.injector=n,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Re(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=Dc(n.loadComponent()).pipe(bi(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),ak(()=>{this.componentLoaders.delete(n)})),r=new ZH(i,()=>new bn).pipe(ok());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Re({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(qe(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,u,c=!1;Array.isArray(a)?u=a:(l=a.create(n).injector,u=oz(l.get(kk,[],He.Self|He.Optional)));return{routes:u.map(xk),injector:l}}),ak(()=>{this.childrenLoaders.delete(i)})),s=new ZH(o,()=>new bn).pipe(ok());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(n){return Dc(n()).pipe(ti(i=>i instanceof Bj||Array.isArray(i)?Re(i):Wn(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(n){return new(n||e)(he(Ji),he(yM))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class XSe{}class QSe{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function JSe(e){throw e}function ZSe(e,t,n){return t.parse("/")}const exe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},txe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Zz(){const e=Ln(fz),t=Ln(q0),n=Ln(FM),i=Ln(Ji),r=Ln(yM),o=Ln(kk,{optional:!0})??[],s=Ln(mE,{optional:!0})??{},a=Ln(Qz),l=Ln(Xz,{optional:!0}),u=Ln(XSe,{optional:!0}),c=Ln(WSe,{optional:!0}),d=new Qn(null,e,t,n,i,r,oz(o));return u&&(d.urlHandlingStrategy=u),c&&(d.routeReuseStrategy=c),d.titleStrategy=l??a,function nxe(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,d),d}let Qn=(()=>{class e{constructor(n,i,r,o,s,a,l){this.rootComponentType=n,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bn,this.errorHandler=JSe,this.malformedUriErrorHandler=ZSe,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Re(void 0),this.urlHandlingStrategy=new QSe,this.routeReuseStrategy=new YSe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(Ik),this.configLoader.onLoadEndListener=f=>this.triggerEvent(new $Ce(f)),this.configLoader.onLoadStartListener=f=>this.triggerEvent(new LCe(f)),this.ngModule=s.get(bf),this.console=s.get(Rbe);const d=s.get(Ut);this.isNgZoneEnabled=d instanceof Ut&&Ut.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function aCe(){return new Df(new ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xz(this.currentUrlTree,this.rootComponentType),this.transitions=new yi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const i=this.events;return n.pipe(vi(r=>0!==r.id),qe(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),cs(r=>{let o=!1,s=!1;return Re(r).pipe(bi(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),cs(a=>{const l=this.browserUrlTree.toString(),u=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return eG(a.source)&&(this.browserUrlTree=a.extractedUrl),Re(a).pipe(cs(d=>{const f=this.transitions.getValue();return i.next(new gk(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions.getValue()?js:Promise.resolve(d)}),function kSe(e,t,n,i){return cs(r=>function NSe(e,t,n,i,r){return new MSe(e,t,n,i,r).apply()}(e,t,n,r.extractedUrl,i).pipe(qe(o=>({...r,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),bi(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},r.urlAfterRedirects=d.urlAfterRedirects}),function VSe(e,t,n,i,r,o){return ti(s=>function RSe(e,t,n,i,r,o,s="emptyOnly",a="legacy"){return new FSe(e,t,n,i,r,s,a,o).recognize().pipe(cs(l=>null===l?function OSe(e){return new qt(t=>t.error(e))}(new ISe):Re(l)))}(e,t,n,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r,o).pipe(qe(a=>({...s,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),bi(d=>{if(r.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(h,d)}this.browserUrlTree=d.urlAfterRedirects}const f=new ICe(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(f)}));if(u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:f,extractedUrl:h,source:p,restoredState:g,extras:m}=a,_=new gk(f,this.serializeUrl(h),p,g);i.next(_);const y=xz(h,this.rootComponentType).snapshot;return Re(r={...a,targetSnapshot:y,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),js}),bi(a=>{const l=new OCe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),qe(a=>r={...a,guards:nSe(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function hSe(e,t){return ti(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Re({...n,guardsResult:!0}):function pSe(e,t,n,i){return Wn(e).pipe(ti(r=>function bSe(e,t,n,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Re(o.map(a=>{const l=Y0(t)??r,u=hg(a,l);return Dc(function cSe(e){return e&&Q0(e.canDeactivate)}(u)?u.canDeactivate(e,t,n,i):l.runInContext(()=>u(e,t,n,i))).pipe(bc())})).pipe(pg()):Re(!0)}(r.component,r.route,n,t,i)),bc(r=>!0!==r,!0))}(s,i,r,e).pipe(ti(a=>a&&function sSe(e){return"boolean"==typeof e}(a)?function gSe(e,t,n,i){return Wn(t).pipe(wc(r=>$0(function _Se(e,t){return null!==e&&t&&t(new BCe(e)),Re(!0)}(r.route.parent,i),function mSe(e,t){return null!==e&&t&&t(new jCe(e)),Re(!0)}(r.route,i),function vSe(e,t,n){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function iSe(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>JH(()=>Re(s.guards.map(l=>{const u=Y0(s.node)??n,c=hg(l,u);return Dc(function uSe(e){return e&&Q0(e.canActivateChild)}(c)?c.canActivateChild(i,e):u.runInContext(()=>c(i,e))).pipe(bc())})).pipe(pg())));return Re(o).pipe(pg())}(e,r.path,n),function ySe(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Re(!0);const r=i.map(o=>JH(()=>{const s=Y0(t)??n,a=hg(o,s);return Dc(function lSe(e){return e&&Q0(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe(bc())}));return Re(r).pipe(pg())}(e,r.route,n))),bc(r=>!0!==r,!0))}(i,o,e,t):Re(a)),qe(a=>({...n,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),bi(a=>{if(r.guardsResult=a.guardsResult,Sf(a.guardsResult))throw Mz(0,a.guardsResult);const l=new RCe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),vi(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),Mk(a=>{if(a.guards.canActivateChecks.length)return Re(a).pipe(bi(l=>{const u=new FCe(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),cs(l=>{let u=!1;return Re(l).pipe(jSe(this.paramsInheritanceStrategy,this.ngModule.injector),bi({next:()=>u=!0,complete:()=>{u||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),bi(l=>{const u=new PCe(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}))}),Mk(a=>{const l=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(bi(d=>{u.component=d}),qe(()=>{})));for(const d of u.children)c.push(...l(d));return c};return Qw(l(a.targetSnapshot.root)).pipe(Zw(),Ri(1))}),Mk(()=>this.afterPreactivation()),qe(a=>{const l=function GCe(e,t,n){const i=W0(e,t._root,n?n._root:void 0);return new Sz(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),bi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>qe(i=>(new tSe(t,i.targetRouterState,i.currentRouterState,n).activate(e),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),bi({next(){o=!0},complete(){o=!0}}),ak(()=>{o||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ec(a=>{if(s=!0,Oz(a)){Iz(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new sE(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(l),Iz(a)){const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eG(r.source)};this.scheduleNavigation(u,"imperative",null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new Ez(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(l);try{r.resolve(this.errorHandler(a))}catch(u){r.reject(u)}}return js}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},o=n.state?.navigationId?n.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const s=this.parseUrl(n.url);this.scheduleNavigation(s,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(xk),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=r||this.routerState.root,c=l?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),xCe(u,this.currentUrlTree,n,d,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=Sf(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function ixe(e){for(let t=0;t<e.length;t++){if(null==e[t])throw new ne(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?{...exe}:!1===i?{...txe}:i,Sf(n))return lz(this.currentUrlTree,n,r);const o=this.parseUrl(n);return lz(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const o=n[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Cc(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((f,h)=>{a=f,l=h});const c=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),d=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:c,targetPageId:d,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,i,r){const o=new sE(n.id,this.serializeUrl(n.extractedUrl),i,r);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return e.\u0275fac=function(n){yN()},e.\u0275prov=Ae({token:e,factory:function(){return Zz()},providedIn:"root"}),e})();function eG(e){return"imperative"!==e}let yE=(()=>{class e{constructor(n,i,r){this.router=n,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new bn,this.subscription=n.events.subscribe(o=>{o instanceof Cc&&this.updateTargetUrlAndHref()})}set preserveFragment(n){this._preserveFragment=lu(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=lu(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=lu(n)}get replaceUrl(){return this._replaceUrl}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:null}ngOnChanges(n){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(n,i,r,o,s){return!!(0!==n||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(n){return new(n||e)(U(Qn),U(ia),U(_c))},e.\u0275dir=we({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,i){1&n&&st("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&Xt("target",i.target)("href",i.href,Xr)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[yr]}),e})();class tG{}let sxe=(()=>{class e{constructor(n,i,r,o,s){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vi(n=>n instanceof Cc),wc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=bw(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Wn(r).pipe(vp())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):Re(null);const o=r.pipe(ti(s=>null===s?Re(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return i.loadComponent&&!i._loadedComponent?Wn([o,this.loader.loadComponent(i)]).pipe(vp()):o})}}return e.\u0275fac=function(n){return new(n||e)(he(Qn),he(yM),he(dc),he(tG),he(Ik))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Rk=new Oe("");let nG=(()=>{class e{constructor(n,i,r={}){this.router=n,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof gk?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Cc&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Dz&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.router.triggerEvent(new Dz(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){yN()},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();function gg(e,t){return{\u0275kind:e,\u0275providers:t}}function Fk(e){return[{provide:kk,multi:!0,useValue:e}]}function rG(){const e=Ln(Ji);return t=>{const n=e.get(lg);if(t!==n.components[0])return;const i=e.get(Qn),r=e.get(oG);1===e.get(Pk)&&i.initialNavigation(),e.get(sG,null,He.Optional)?.setUpPreloading(),e.get(Rk,null,He.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const oG=new Oe("",{factory:()=>new bn}),Pk=new Oe("",{providedIn:"root",factory:()=>1});const sG=new Oe("");function cxe(e){return gg(0,[{provide:sG,useExisting:sxe},{provide:tG,useExisting:e}])}const aG=new Oe("ROUTER_FORROOT_GUARD"),dxe=[FM,{provide:fz,useClass:uk},{provide:Qn,useFactory:Zz},q0,{provide:ia,useFactory:function iG(e){return e.routerState.root},deps:[Qn]},Ik];function fxe(){return new PU("Router",Qn)}let Lk=(()=>{class e{constructor(n){}static forRoot(n,i){return{ngModule:e,providers:[dxe,[],Fk(n),{provide:aG,useFactory:mxe,deps:[[Qn,new Z_,new e0]]},{provide:mE,useValue:i||{}},i?.useHash?{provide:_c,useClass:Ewe}:{provide:_c,useClass:RM},{provide:Rk,useFactory:()=>{const e=Ln(Qn),t=Ln(R0),n=Ln(mE);return n.scrollOffset&&t.setOffset(n.scrollOffset),new nG(e,t,n)}},i?.preloadingStrategy?cxe(i.preloadingStrategy).\u0275providers:[],{provide:PU,multi:!0,useFactory:fxe},i?.initialNavigation?_xe(i):[],[{provide:lG,useFactory:rG},{provide:AU,multi:!0,useExisting:lG}]]}}static forChild(n){return{ngModule:e,providers:[Fk(n)]}}}return e.\u0275fac=function(n){return new(n||e)(he(aG,8))},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[Ck]}),e})();function mxe(e){return"guarded"}function _xe(e){return["disabled"===e.initialNavigation?gg(3,[{provide:Cw,multi:!0,useFactory:()=>{const t=Ln(Qn);return()=>{t.setUpLocationChangeListener()}}},{provide:Pk,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?gg(2,[{provide:Pk,useValue:0},{provide:Cw,multi:!0,deps:[Ji],useFactory:t=>{const n=t.get(bwe,Promise.resolve());let i=!1;return()=>n.then(()=>new Promise(o=>{const s=t.get(Qn),a=t.get(oG);(function r(o){t.get(Qn).events.pipe(vi(a=>a instanceof Cc||a instanceof sE||a instanceof Ez),qe(a=>a instanceof Cc||a instanceof sE&&(0===a.code||1===a.code)&&null),vi(a=>null!==a),Ri(1)).subscribe(()=>{o()})})(()=>{o(!0),i=!0}),s.afterPreactivation=()=>(o(!0),i||a.closed?Re(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const lG=new Oe("");class uG{}const pu="*";function Z0(e,t){return{type:7,name:e,definitions:t,options:{}}}function ey(e,t=null){return{type:4,styles:t,timings:e}}function cG(e,t=null){return{type:2,steps:e,options:t}}function fs(e){return{type:6,styles:e,offset:null}}function ty(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function dG(e){Promise.resolve().then(e)}class ny{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class fG{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,r=0;const o=this.players.length;0==o?dG(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}const bxe=JSON.parse('{"U":["assets/logos/abercrombieandfitch.jpg","assets/logos/adidas.png","assets/logos/Aditya.jpg","assets/logos/arvind.png","assets/logos/asics.png","assets/logos/asos.png","assets/logos/boohoo.jpg","assets/logos/buckle.svg","assets/logos/burberry.jpg","assets/logos/burlington.png","assets/logos/canada-goose.png","assets/logos/capri_holdings.png","assets/logos/esprit.png","assets/logos/fast-retail.png","assets/logos/footlocker.jpg","assets/logos/gap.png","assets/logos/havaianas.png","assets/logos/nike.png","assets/logos/vf.svg","assets/logos/zalando.png"]}'),wxe=JSON.parse('[{"id":0,"name":"All Companies"},{"id":5590,"name":"H&M","url":"https://wikirate.org/H_M","headquarters":"Sweden"},{"id":5505,"name":"Gap inc.","url":"https://wikirate.org/Gap_inc","headquarters":"California (United States)"},{"id":5301,"name":"Inditex","url":"https://wikirate.org/Inditex","headquarters":"Spain"},{"id":9269,"name":"Marks and Spencer Group plc","url":"https://wikirate.org/Marks_and_Spencer_Group_plc","headquarters":"United Kingdom"},{"id":7217,"name":"Adidas AG","url":"https://wikirate.org/Adidas_AG","headquarters":"Germany"},{"id":1829050,"name":"Asos","url":"https://wikirate.org/Asos","headquarters":"United Kingdom"},{"id":9139,"name":"Burberry Group plc","url":"https://wikirate.org/Burberry_Group_plc","headquarters":"United Kingdom"},{"id":8979,"name":"Louis Vuitton Malletier SA (LVMH)","url":"https://wikirate.org/Louis_Vuitton_Malletier_SA_LVMH","headquarters":"France"},{"id":5800,"name":"Nike Inc.","url":"https://wikirate.org/Nike_Inc","headquarters":"Oregon (United States)"},{"id":49386,"name":"Tapestry Inc","url":"https://wikirate.org/Tapestry_Inc","headquarters":"New York (United States)"},{"id":18109,"name":"Puma","url":"https://wikirate.org/Puma","headquarters":"Germany"},{"id":776737,"name":"Tiffany & Co.","url":"https://wikirate.org/Tiffany_Co","headquarters":"New York (United States)"},{"id":56584,"name":"Fast Retailing","url":"https://wikirate.org/Fast_Retailing","headquarters":"Japan"},{"id":61104,"name":"VF","url":"https://wikirate.org/VF","headquarters":"North Carolina (United States)"},{"id":61050,"name":"PVH","url":"https://wikirate.org/PVH","headquarters":"New York (United States)"},{"id":2608717,"name":"Zalando SE","url":"https://wikirate.org/Zalando_SE","headquarters":"Germany"},{"id":866194,"name":"Guess? Inc","url":"https://wikirate.org/Guess_Inc","headquarters":"California (United States)"},{"id":116498,"name":"Under Armour","url":"https://wikirate.org/Under_Armour","headquarters":"Maryland (United States)"},{"id":8362,"name":"Kering","url":"https://wikirate.org/Kering","headquarters":"France"},{"id":61065,"name":"Prada","url":"https://wikirate.org/Prada","headquarters":"Italy"},{"id":56597,"name":"L Brands","url":"https://wikirate.org/L_Brands","headquarters":"Ohio (United States)"},{"id":42714,"name":"Hugo Boss AG","url":"https://wikirate.org/Hugo_Boss_AG","headquarters":"Germany"},{"id":56618,"name":"Nordstrom","url":"https://wikirate.org/Nordstrom","headquarters":"Washington (United States)"},{"id":861862,"name":"Columbia Sportswear","url":"https://wikirate.org/Columbia_Sportswear","headquarters":"Oregon (United States)"},{"id":859389,"name":"Urban Outfitters","url":"https://wikirate.org/Urban_Outfitters","headquarters":"Pennsylvania (United States)"},{"id":2265395,"name":"Ralph Lauren Corporation","url":"https://wikirate.org/Ralph_Lauren_Corporation","headquarters":"New York (United States)"},{"id":858415,"name":"Fossil Group, Inc.","url":"https://wikirate.org/Fossil_Group_Inc","headquarters":"Texas (United States)"},{"id":866417,"name":"Skechers USA Inc","url":"https://wikirate.org/Skechers_USA_Inc","headquarters":"California (United States)"},{"id":862441,"name":"American Eagle Outfitters","url":"https://wikirate.org/American_Eagle_Outfitters","headquarters":"Pennsylvania (United States)"},{"id":60982,"name":"Hanesbrands","url":"https://wikirate.org/Hanesbrands","headquarters":"North Carolina (United States)"},{"id":945115,"name":"Lojas Renner S.A.","url":"https://wikirate.org/Lojas_Renner_S_A","headquarters":"Brazil"},{"id":58500,"name":"Foot Locker Inc.","url":"https://wikirate.org/Foot_Locker_Inc","headquarters":"New York (United States)"},{"id":957395,"name":"TJX","url":"https://wikirate.org/TJX","headquarters":"Massachusetts (United States)"},{"id":776749,"name":"G-III Apparel Group, LTD.","url":"https://wikirate.org/G_III_Apparel_Group_LTD","headquarters":"New York (United States)"},{"id":866117,"name":"Deckers Outdoor Corporation","url":"https://wikirate.org/Deckers_Outdoor_Corporation","headquarters":"California (United States)"},{"id":57653,"name":"Ross Stores","url":"https://wikirate.org/Ross_Stores","headquarters":"California (United States)"},{"id":861719,"name":"Wolverine World Wide","url":"https://wikirate.org/Wolverine_World_Wide","headquarters":"Michigan (United States)"},{"id":865187,"name":"Caleres Inc","url":"https://wikirate.org/Caleres_Inc","headquarters":"Missouri (United States)"},{"id":49209,"name":"Next","url":"https://wikirate.org/Next","headquarters":"United Kingdom"},{"id":866341,"name":"Oxford Industries Inc","url":"https://wikirate.org/Oxford_Industries_Inc","headquarters":"Georgia (United States)"},{"id":2274181,"name":"Genesco Inc.","url":"https://wikirate.org/Genesco_Inc","headquarters":"Tennessee (United States)"},{"id":2632311,"name":"Chico\'s FAS Inc","url":"https://wikirate.org/Chico_s_FAS_Inc","headquarters":"Florida (United States)"},{"id":61176,"name":"Macy\'s","url":"https://wikirate.org/Macy_s","headquarters":"Ohio (United States)"},{"id":792992,"name":"Moncler","url":"https://wikirate.org/Moncler","headquarters":"Italy"},{"id":2241782,"name":"DSW Inc.","url":"https://wikirate.org/DSW_Inc","headquarters":"Ohio (United States)"},{"id":60914,"name":"Abercrombie & Fitch","url":"https://wikirate.org/Abercrombie_Fitch","headquarters":"New York (United States)"},{"id":57485,"name":"Luxottica Group SpA","url":"https://wikirate.org/Luxottica_Group_SpA","headquarters":"Italy"},{"id":2632233,"name":"Ascena Retail Group Inc","url":"https://wikirate.org/Ascena_Retail_Group_Inc","headquarters":"New Jersey (United States)"},{"id":776665,"name":"Dillard\'s, Inc.","url":"https://wikirate.org/Dillard_s_Inc","headquarters":"Arkansas (United States)"},{"id":50638,"name":"Dick\'s Sporting Goods","url":"https://wikirate.org/Dick_s_Sporting_Goods","headquarters":"Pennsylvania (United States)"},{"id":2605005,"name":"Carter\'s Inc","url":"https://wikirate.org/Carter_s_Inc","headquarters":"Georgia (United States)"},{"id":2632164,"name":"Express Inc","url":"https://wikirate.org/Express_Inc","headquarters":"Ohio (United States)"},{"id":2979682,"name":"Vera Bradley Inc.","url":"https://wikirate.org/Vera_Bradley_Inc","headquarters":"Indiana (United States)"},{"id":170564,"name":"Asics Corporation","url":"https://wikirate.org/Asics_Corporation","headquarters":"Japan"},{"id":116138,"name":"Gildan Activewear Inc.","url":"https://wikirate.org/Gildan_Activewear_Inc","headquarters":"Canada"},{"id":2632287,"name":"Burlington Stores Inc","url":"https://wikirate.org/Burlington_Stores_Inc","headquarters":"New Jersey (United States)"},{"id":2980808,"name":"Buckle Inc","url":"https://wikirate.org/Buckle_Inc","headquarters":"Nebraska (United States)"},{"id":1825510,"name":"lululemon athletica","url":"https://wikirate.org/lululemon_athletica","headquarters":"Quebec (Canada)"},{"id":2632400,"name":"Francesca\'s","url":"https://wikirate.org/Francesca_s","headquarters":"Texas (United States)"},{"id":9127,"name":"Esprit Holdings Limited","url":"https://wikirate.org/Esprit_Holdings_Limited","headquarters":"Hong Kong"},{"id":3052157,"name":"Cato Corp","url":"https://wikirate.org/Cato_Corp","headquarters":"North Carolina (United States)"},{"id":48305,"name":"Christian Dior","url":"https://wikirate.org/Christian_Dior","headquarters":"France"},{"id":2931751,"name":"Arvind Limited","url":"https://wikirate.org/Arvind_Limited","headquarters":"India"},{"id":3081310,"name":"Mulberry Group Plc","url":"https://wikirate.org/Mulberry_Group_Plc","headquarters":"United Kingdom"},{"id":3151635,"name":"Ted Baker","url":"https://wikirate.org/Ted_Baker","headquarters":"United Kingdom"},{"id":3152073,"name":"Capri Holdings Ltd (formerly Michael Kors)","url":"https://wikirate.org/Capri_Holdings_Ltd_formerly_Michael_Kors","headquarters":"United Kingdom"},{"id":48284,"name":"Hermes International","url":"https://wikirate.org/Hermes_International","headquarters":"France"},{"id":2608722,"name":"Salvatore Ferragamo SpA","url":"https://wikirate.org/Salvatore_Ferragamo_SpA","headquarters":"Italy"},{"id":56413,"name":"Richemont","url":"https://wikirate.org/Richemont","headquarters":"Switzerland"},{"id":3075761,"name":"Boot Barn Holdings Inc.","url":"https://wikirate.org/Boot_Barn_Holdings_Inc","headquarters":"California (United States)"},{"id":2624117,"name":"Geox SpA","url":"https://wikirate.org/Geox_SpA","headquarters":"Italy"},{"id":3098198,"name":"Hudson\'s Bay Company","url":"https://wikirate.org/Hudson_s_Bay_Company","headquarters":"Ontario, Canada"},{"id":57272,"name":"Swatch Group","url":"https://wikirate.org/Swatch_Group","headquarters":"Switzerland"},{"id":3624592,"name":"JD Sports Fashion plc","url":"https://wikirate.org/JD_Sports_Fashion_plc","headquarters":"United Kingdom"},{"id":44618,"name":"Sports Direct","url":"https://wikirate.org/Sports_Direct","headquarters":"United Kingdom"},{"id":3624482,"name":"Superdry plc","url":"https://wikirate.org/Superdry_plc","headquarters":"United Kingdom"},{"id":2632436,"name":"Children\'s Place Inc","url":"https://wikirate.org/Children_s_Place_Inc","headquarters":"New Jersey (United States)"},{"id":2623713,"name":"YOOX NET-A-PORTER Group SpA","url":"https://wikirate.org/YOOX_NET_A_PORTER_Group_SpA","headquarters":"Italy"},{"id":3624475,"name":"Brunello Cucinelli","url":"https://wikirate.org/Brunello_Cucinelli","headquarters":"Italy"},{"id":1173485,"name":"Li-Ning","url":"https://wikirate.org/Li_Ning","headquarters":"Beijing (China)"},{"id":3624461,"name":"TOD\'S","url":"https://wikirate.org/TOD_S","headquarters":"Italy"},{"id":3624440,"name":"Boohoo.com","url":"https://wikirate.org/Boohoo_com","headquarters":"United Kingdom"},{"id":3624468,"name":"Alpargatas - Havaianas","url":"https://wikirate.org/Alpargatas_Havaianas","headquarters":"Brazil"},{"id":3624718,"name":"Gerry Weber","url":"https://wikirate.org/Gerry_Weber","headquarters":"Germany"},{"id":3624454,"name":"Grendene","url":"https://wikirate.org/Grendene","headquarters":"Brazil"},{"id":48991,"name":"Chow Tai Fook","url":"https://wikirate.org/Chow_Tai_Fook","headquarters":"Hong Kong"},{"id":3624510,"name":"Cia Hering","url":"https://wikirate.org/Cia_Hering","headquarters":"Brazil"},{"id":3624496,"name":"United Arrows","url":"https://wikirate.org/United_Arrows","headquarters":"Japan"},{"id":3624517,"name":"Van de Velde","url":"https://wikirate.org/Van_de_Velde","headquarters":"Belgium"},{"id":2631100,"name":"Vipshop Holdings","url":"https://wikirate.org/Vipshop_Holdings","headquarters":"Guangdong (China)"},{"id":51397,"name":"JC Penney","url":"https://wikirate.org/JC_Penney","headquarters":"Texas (United States)"},{"id":3624433,"name":"Lao Feng Xiang Jewelry","url":"https://wikirate.org/Lao_Feng_Xiang_Jewelry","headquarters":"China"},{"id":3624447,"name":"Steve Madden","url":"https://wikirate.org/Steve_Madden","headquarters":"New York (United States)"},{"id":5294114,"name":"Onward Holdings","url":"https://wikirate.org/Onward_Holdings","headquarters":"Japan"},{"id":3624503,"name":"Metersbonwe","url":"https://wikirate.org/Metersbonwe","headquarters":"Shanghai (China)"},{"id":3624489,"name":"Aditya Birla Fashion & Retail Ltd","url":"https://wikirate.org/Aditya_Birla_Fashion_Retail_Ltd","headquarters":"India"},{"id":3624425,"name":"Semir","url":"https://wikirate.org/Semir","headquarters":"China"},{"id":5294189,"name":"Bosideng International Holdings Limited","url":"https://wikirate.org/Bosideng_International_Holdings_Limited","headquarters":"Shanghai (China)"},{"id":5408890,"name":"Canada Goose","url":"https://wikirate.org/Canada_Goose","headquarters":"Ontario, Canada"},{"id":5424735,"name":"Anta Sports Products","url":"https://wikirate.org/Anta_Sports_Products","headquarters":"Fujian (China)"}]');let mg=(()=>{class e{constructor(){this.companies=wxe,this.exploreMore=new tt(!1)}getCompany(n){return this.companies.find(r=>r.id===n)}getCompanies(){return this.companies.slice().sort((n,i)=>this.compare(n,i))}compare(n,i){return"All Companies"==n.name?-1:"All Companies"==i.name?1:n.name.localeCompare(i.name)}setExploreMore(){this.exploreMore.emit(!0),setTimeout(()=>{this.unsetExploreMore()},3e3)}unsetExploreMore(){this.exploreMore.emit(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();const Exe=["addListener","removeListener"],Dxe=["addEventListener","removeEventListener"],Cxe=["on","off"];function Sr(e,t,n,i){if(gt(n)&&(i=n,n=void 0),i)return Sr(e,t,n).pipe(rk(i));const[r,o]=function Txe(e){return gt(e.addEventListener)&&gt(e.removeEventListener)}(e)?Dxe.map(s=>a=>e[s](t,a,n)):function Sxe(e){return gt(e.addListener)&&gt(e.removeListener)}(e)?Exe.map(hG(e,t)):function xxe(e){return gt(e.on)&&gt(e.off)}(e)?Cxe.map(hG(e,t)):[];if(!r&&WA(e))return ti(s=>Sr(s,t,n))(Oi(e));if(!r)throw new TypeError("Invalid event target");return new qt(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function hG(e,t){return n=>i=>e[n](t,i)}class Axe extends Ii{constructor(t,n){super()}schedule(t,n=0){return this}}const wE={setInterval(e,t,...n){const{delegate:i}=wE;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=wE;return(t?.clearInterval||clearInterval)(e)},delegate:void 0},pG={now:()=>(pG.delegate||Date).now(),delegate:void 0};class iy{constructor(t,n=iy.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}}iy.now=pG.now;const kxe=new class Mxe extends iy{constructor(t,n=iy.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}}(class Nxe extends Axe{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return wE.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&wE.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r,i=!1;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ts(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}});const{isArray:Oxe}=Array;function mG(e){return 1===e.length&&Oxe(e[0])?e[0]:e}function EE(...e){const t=Eb(e),n=mG(e);return n.length?new qt(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)Oi(n[s]).subscribe(en(i,a=>{if(r[s].push(a),r.every(l=>l.length)){const l=r.map(u=>u.shift());i.next(t?t(...l):l),r.some((u,c)=>!u.length&&o[c])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):js}function si(e){return Tn((t,n)=>{Oi(e).subscribe(en(n,()=>n.complete(),yp)),!n.closed&&t.subscribe(n)})}function jk(...e){const t=Eb(e);return Tn((n,i)=>{const r=e.length,o=new Array(r);let s=e.map(()=>!1),a=!1;for(let l=0;l<r;l++)Oi(e[l]).subscribe(en(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(Gl))&&(s=null))},yp));n.subscribe(en(i,l=>{if(a){const u=[l,...o];i.next(t?t(...u):u)}}))})}new qt(yp);let bG=(()=>{class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(U(To),U(an))},e.\u0275dir=we({type:e}),e})(),xf=(()=>{class e extends bG{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Xi(e)))(i||e)}}(),e.\u0275dir=we({type:e,features:[Rt]}),e})();const Xa=new Oe("NgValueAccessor"),Uxe={provide:Xa,useExisting:At(()=>Uk),multi:!0},zxe=new Oe("CompositionEventMode");let Uk=(()=>{class e extends bG{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Hxe(){const e=ea()?ea().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(U(To),U(an),U(zxe,8))},e.\u0275dir=we({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&st("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ln([Uxe]),Rt]}),e})();const er=new Oe("NgValidators"),xc=new Oe("NgAsyncValidators");function kG(e){return null!=e}function IG(e){return m0(e)?Wn(e):e}function OG(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function RG(e,t){return t.map(n=>n(e))}function FG(e){return e.map(t=>function qxe(e){return!e.validate}(t)?t:n=>t.validate(n))}function Hk(e){return null!=e?function PG(e){if(!e)return null;const t=e.filter(kG);return 0==t.length?null:function(n){return OG(RG(n,t))}}(FG(e)):null}function zk(e){return null!=e?function LG(e){if(!e)return null;const t=e.filter(kG);return 0==t.length?null:function(n){return function Vxe(...e){const t=Eb(e),{args:n,keys:i}=KH(e),r=new qt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,u=s;for(let c=0;c<s;c++){let d=!1;Oi(n[c]).subscribe(en(o,f=>{d||(d=!0,u--),a[c]=f},()=>l--,void 0,()=>{(!l||!d)&&(u||o.next(i?XH(i,a):a),o.complete())}))}});return t?r.pipe(rk(t)):r}(RG(n,t).map(IG)).pipe(qe(OG))}}(FG(e)):null}function $G(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Gk(e){return e?Array.isArray(e)?e:[e]:[]}function CE(e,t){return Array.isArray(e)?e.includes(t):e===t}function jG(e,t){const n=Gk(t);return Gk(e).forEach(r=>{CE(n,r)||n.push(r)}),n}function UG(e,t){return Gk(t).filter(n=>!CE(e,n))}class HG{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Hk(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=zk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class xr extends HG{get formDirective(){return null}get path(){return null}}class Tc extends HG{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let _g=(()=>{class e extends class zG{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(U(Tc,2))},e.\u0275dir=we({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&Mn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Rt]}),e})();const ry="VALID",xE="INVALID",yg="PENDING",oy="DISABLED";function WG(e){return Array.isArray(e)?Hk(e):e||null}function qG(e){return Array.isArray(e)?zk(e):e||null}function TE(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function sy(e,t){(function Jk(e,t){const n=function BG(e){return e._rawValidators}(e);null!==t.validator?e.setValidators($G(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const i=function VG(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators($G(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();ME(t._rawValidators,r),ME(t._rawAsyncValidators,r)})(e,t),t.valueAccessor.writeValue(e.value),e.disabled&&t.valueAccessor.setDisabledState?.(!0),function iTe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&QG(e,t)})}(e,t),function oTe(e,t){const n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function rTe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&QG(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function nTe(e,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function ME(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function QG(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function tW(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function nW(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const hTe={provide:Tc,useExisting:At(()=>Tf)},sW=(()=>Promise.resolve())();let Tf=(()=>{class e extends Tc{constructor(n,i,r,o,s){super(),this._changeDetectorRef=s,this.control=new class extends class XG{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=WG(this._rawValidators),this._composedAsyncValidatorFn=qG(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ry}get invalid(){return this.status===xE}get pending(){return this.status==yg}get disabled(){return this.status===oy}get enabled(){return this.status!==oy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=WG(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=qG(t)}addValidators(t){this.setValidators(jG(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(jG(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(UG(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(UG(t,this._rawAsyncValidators))}hasValidator(t){return CE(this._rawValidators,t)}hasAsyncValidator(t){return CE(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=yg,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=oy,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=ry,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ry||this.status===yg)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oy:ry}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=yg,this._hasOwnPendingAsyncValidator=!0;const n=IG(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new tt,this.statusChanges=new tt}_calculateStatus(){return this._allControlsDisabled()?oy:this.errors?xE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yg)?yg:this._anyControlsHaveStatus(xE)?xE:ry}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){TE(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,n,i){super(function Kk(e){return(TE(e)?e.validators:e)||null}(n),function Xk(e,t){return(TE(t)?t.asyncValidators:e)||null}(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),TE(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=nW(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){tW(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){tW(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){nW(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new tt,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function eI(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===Uk?n=o:function lTe(e){return Object.getPrototypeOf(e.constructor)===xf}(o)?i=o:r=o}),r||i||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Zk(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){sW.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const i=n.isDisabled.currentValue,r=0!==i&&lu(i);sW.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function AE(e,t){return[...t.path,e]}(n,this._parent):[n]}}return e.\u0275fac=function(n){return new(n||e)(U(xr,9),U(er,10),U(xc,10),U(Xa,10),U(au,8))},e.\u0275dir=we({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ln([hTe]),Rt,yr]}),e})(),lW=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({}),e})();const CTe={provide:Xa,useExisting:At(()=>Ac),multi:!0};function gW(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Ac=(()=>{class e extends xf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const r=gW(this._getOptionId(n),n);this.setProperty("value",r)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){const i=function STe(e){return e.split(":")[0]}(n);return this._optionMap.has(i)?this._optionMap.get(i):n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Xi(e)))(i||e)}}(),e.\u0275dir=we({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,i){1&n&&st("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ln([CTe]),Rt]}),e})(),vg=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(gW(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(U(an),U(To),U(Ac,9))},e.\u0275dir=we({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const xTe={provide:Xa,useExisting:At(()=>oI),multi:!0};function mW(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let oI=(()=>{class e extends xf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let i;if(this.value=n,Array.isArray(n)){const r=n.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const u=this._getOptionValue(s[a].value);r.push(u)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,n(r)}}_registerOption(n){const i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){const i=function TTe(e){return e.split(":")[0]}(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Xi(e)))(i||e)}}(),e.\u0275dir=we({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,i){1&n&&st("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ln([xTe]),Rt]}),e})(),bg=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(mW(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(mW(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(U(an),U(To),U(oI,9))},e.\u0275dir=we({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),PTe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[lW]}),e})(),xW=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[PTe]}),e})();var $Te={left:"right",right:"left",bottom:"top",top:"bottom"};function IE(e){return e.replace(/left|right|bottom|top/g,function(t){return $Te[t]})}function Qa(e){return e.split("-")[0]}var BTe={start:"end",end:"start"};function TW(e){return e.replace(/start|end/g,function(t){return BTe[t]})}var Tr="top",Mo="bottom",ko="right",Ar="left",OE="auto",wg=[Tr,Mo,ko,Ar],Nf="start",Eg="end",AW="clippingParents",aI="viewport",Dg="popper",NW="reference",lI=wg.reduce(function(e,t){return e.concat([t+"-"+Nf,t+"-"+Eg])},[]),uI=[].concat(wg,[OE]).reduce(function(e,t){return e.concat([t,t+"-"+Nf,t+"-"+Eg])},[]),MW="beforeRead",kW="read",IW="afterRead",OW="beforeMain",RW="main",FW="afterMain",PW="beforeWrite",LW="write",$W="afterWrite",BW=[MW,kW,IW,OW,RW,FW,PW,LW,$W];function Io(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Mf(e){return e instanceof Io(e).Element||e instanceof Element}function hs(e){return e instanceof Io(e).HTMLElement||e instanceof HTMLElement}function cI(e){return!(typeof ShadowRoot>"u")&&(e instanceof Io(e).ShadowRoot||e instanceof ShadowRoot)}function Nc(e){return((Mf(e)?e.ownerDocument:e.document)||window.document).documentElement}var kf=Math.max,RE=Math.min,Cg=Math.round;function dI(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function VW(){return!/^((?!chrome|android).)*safari/i.test(dI())}function Sg(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&hs(e)&&(r=e.offsetWidth>0&&Cg(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Cg(i.height)/e.offsetHeight||1);var a=(Mf(e)?Io(e):window).visualViewport,l=!VW()&&n,u=(i.left+(l&&a?a.offsetLeft:0))/r,c=(i.top+(l&&a?a.offsetTop:0))/o,d=i.width/r,f=i.height/o;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function fI(e){var t=Io(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function hI(e){return Sg(Nc(e)).left+fI(e).scrollLeft}function gu(e){return Io(e).getComputedStyle(e)}function Ja(e){return e?(e.nodeName||"").toLowerCase():null}function FE(e){return"html"===Ja(e)?e:e.assignedSlot||e.parentNode||(cI(e)?e.host:null)||Nc(e)}function pI(e){var t=gu(e);return/auto|scroll|overlay|hidden/.test(t.overflow+t.overflowY+t.overflowX)}function jW(e){return["html","body","#document"].indexOf(Ja(e))>=0?e.ownerDocument.body:hs(e)&&pI(e)?e:jW(FE(e))}function ly(e,t){var n;void 0===t&&(t=[]);var i=jW(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=Io(i),s=r?[o].concat(o.visualViewport||[],pI(i)?i:[]):i,a=t.concat(s);return r?a:a.concat(ly(FE(s)))}function UTe(e){return["table","td","th"].indexOf(Ja(e))>=0}function UW(e){return hs(e)&&"fixed"!==gu(e).position?e.offsetParent:null}function uy(e){for(var t=Io(e),n=UW(e);n&&UTe(n)&&"static"===gu(n).position;)n=UW(n);return n&&("html"===Ja(n)||"body"===Ja(n)&&"static"===gu(n).position)?t:n||function HTe(e){var t=/firefox/i.test(dI());if(/Trident/i.test(dI())&&hs(e)&&"fixed"===gu(e).position)return null;var r=FE(e);for(cI(r)&&(r=r.host);hs(r)&&["html","body"].indexOf(Ja(r))<0;){var o=gu(r);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return r;r=r.parentNode}return null}(e)||t}function HW(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&cI(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function gI(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function zW(e,t,n){return t===aI?gI(function VTe(e,t){var n=Io(e),i=Nc(e),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var u=VW();(u||!u&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+hI(e),y:l}}(e,n)):Mf(t)?function zTe(e,t){var n=Sg(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):gI(function jTe(e){var t,n=Nc(e),i=fI(e),r=null==(t=e.ownerDocument)?void 0:t.body,o=kf(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=kf(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+hI(e),l=-i.scrollTop;return"rtl"===gu(r||n).direction&&(a+=kf(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(Nc(e)))}function xg(e){return e.split("-")[1]}function mI(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function GW(e){var l,t=e.reference,n=e.element,i=e.placement,r=i?Qa(i):null,o=i?xg(i):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2;switch(r){case Tr:l={x:s,y:t.y-n.height};break;case Mo:l={x:s,y:t.y+t.height};break;case ko:l={x:t.x+t.width,y:a};break;case Ar:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var u=r?mI(r):null;if(null!=u){var c="y"===u?"height":"width";switch(o){case Nf:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Eg:l[u]=l[u]+(t[c]/2-n[c]/2)}}return l}function qW(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function YW(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}function Tg(e,t){void 0===t&&(t={});var i=t.placement,r=void 0===i?e.placement:i,o=t.strategy,s=void 0===o?e.strategy:o,a=t.boundary,l=void 0===a?AW:a,u=t.rootBoundary,c=void 0===u?aI:u,d=t.elementContext,f=void 0===d?Dg:d,h=t.altBoundary,p=void 0!==h&&h,g=t.padding,m=void 0===g?0:g,_=qW("number"!=typeof m?m:YW(m,wg)),v=e.rects.popper,b=e.elements[p?f===Dg?NW:Dg:f],w=function WTe(e,t,n,i){var r="clippingParents"===t?function GTe(e){var t=ly(FE(e)),i=["absolute","fixed"].indexOf(gu(e).position)>=0&&hs(e)?uy(e):e;return Mf(i)?t.filter(function(r){return Mf(r)&&HW(r,i)&&"body"!==Ja(r)}):[]}(e):[].concat(t),o=[].concat(r,[n]),a=o.reduce(function(l,u){var c=zW(e,u,i);return l.top=kf(c.top,l.top),l.right=RE(c.right,l.right),l.bottom=RE(c.bottom,l.bottom),l.left=kf(c.left,l.left),l},zW(e,o[0],i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Mf(b)?b:b.contextElement||Nc(e.elements.popper),l,c,s),D=Sg(e.elements.reference),E=GW({reference:D,element:v,strategy:"absolute",placement:r}),C=gI(Object.assign({},v,E)),N=f===Dg?C:D,k={top:w.top-N.top+_.top,bottom:N.bottom-w.bottom+_.bottom,left:w.left-N.left+_.left,right:N.right-w.right+_.right},R=e.modifiersData.offset;if(f===Dg&&R){var F=R[r];Object.keys(k).forEach(function(P){var x=[ko,Mo].indexOf(P)>=0?1:-1,S=[Tr,Mo].indexOf(P)>=0?"y":"x";k[P]+=F[S]*x})}return k}const _I={name:"flip",enabled:!0,phase:"main",fn:function KTe(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,g=n.allowedAutoPlacements,m=t.options.placement,_=Qa(m),v=l||(_!==m&&p?function YTe(e){if(Qa(e)===OE)return[];var t=IE(e);return[TW(e),t,TW(t)]}(m):[IE(m)]),b=[m].concat(v).reduce(function(B,z){return B.concat(Qa(z)===OE?function qTe(e,t){void 0===t&&(t={});var r=t.boundary,o=t.rootBoundary,s=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,u=void 0===l?uI:l,c=xg(t.placement),d=c?a?lI:lI.filter(function(p){return xg(p)===c}):wg,f=d.filter(function(p){return u.indexOf(p)>=0});0===f.length&&(f=d);var h=f.reduce(function(p,g){return p[g]=Tg(e,{placement:g,boundary:r,rootBoundary:o,padding:s})[Qa(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}(t,{placement:z,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:g}):z)},[]),w=t.rects.reference,D=t.rects.popper,E=new Map,C=!0,N=b[0],k=0;k<b.length;k++){var R=b[k],F=Qa(R),P=xg(R)===Nf,x=[Tr,Mo].indexOf(F)>=0,S=x?"width":"height",T=Tg(t,{placement:R,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),I=x?P?ko:Ar:P?Mo:Tr;w[S]>D[S]&&(I=IE(I));var A=IE(I),M=[];if(o&&M.push(T[F]<=0),a&&M.push(T[I]<=0,T[A]<=0),M.every(function(B){return B})){N=R,C=!1;break}E.set(R,M)}if(C)for(var L=function(z){var te=b.find(function(q){var ue=E.get(q);if(ue)return ue.slice(0,z).every(function(W){return W})});if(te)return N=te,"break"},$=p?3:1;$>0&&"break"!==L($);$--);t.placement!==N&&(t.modifiersData[i]._skip=!0,t.placement=N,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function cy(e,t,n){return kf(e,RE(t,n))}function yI(e){var t=Sg(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}const vI={name:"preventOverflow",enabled:!0,phase:"main",fn:function JTe(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,f=n.tether,h=void 0===f||f,p=n.tetherOffset,g=void 0===p?0:p,m=Tg(t,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),_=Qa(t.placement),y=xg(t.placement),v=!y,b=mI(_),w=function XTe(e){return"x"===e?"y":"x"}(b),D=t.modifiersData.popperOffsets,E=t.rects.reference,C=t.rects.popper,N="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,k="number"==typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(D){if(o){var P,x="y"===b?Tr:Ar,S="y"===b?Mo:ko,T="y"===b?"height":"width",I=D[b],A=I+m[x],M=I-m[S],O=h?-C[T]/2:0,L=y===Nf?E[T]:C[T],$=y===Nf?-C[T]:-E[T],V=t.elements.arrow,B=h&&V?yI(V):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},te=z[x],q=z[S],ue=cy(0,E[T],B[T]),W=v?E[T]/2-O-ue-te-k.mainAxis:L-ue-te-k.mainAxis,Z=v?-E[T]/2+O+ue+q+k.mainAxis:$+ue+q+k.mainAxis,ee=t.elements.arrow&&uy(t.elements.arrow),ge=null!=(P=R?.[b])?P:0,je=I+Z-ge,xe=cy(h?RE(A,I+W-ge-(ee?"y"===b?ee.clientTop||0:ee.clientLeft||0:0)):A,I,h?kf(M,je):M);D[b]=xe,F[b]=xe-I}if(a){var ke,sn=D[w],xn="y"===w?"height":"width",Gn=sn+m["x"===b?Tr:Ar],gp=sn-m["x"===b?Mo:ko],gr=-1!==[Tr,Ar].indexOf(_),ja=null!=(ke=R?.[w])?ke:0,hb=gr?Gn:sn-E[xn]-C[xn]-ja+k.altAxis,pb=gr?sn+E[xn]+C[xn]-ja-k.altAxis:gp,gb=h&&gr?function QTe(e,t,n){var i=cy(e,t,n);return i>n?n:i}(hb,sn,pb):cy(h?hb:Gn,sn,h?pb:gp);D[w]=gb,F[w]=gb-sn}t.modifiersData[i]=F}},requiresIfExists:["offset"]},bI={name:"arrow",enabled:!0,phase:"main",fn:function eAe(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Qa(n.placement),l=mI(a),c=[Ar,ko].indexOf(a)>=0?"height":"width";if(o&&s){var d=function(t,n){return qW("number"!=typeof(t="function"==typeof t?t(Object.assign({},n.rects,{placement:n.placement})):t)?t:YW(t,wg))}(r.padding,n),f=yI(o),h="y"===l?Tr:Ar,p="y"===l?Mo:ko,g=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],_=uy(o),y=_?"y"===l?_.clientHeight||0:_.clientWidth||0:0,D=y/2-f[c]/2+(g/2-m/2),E=cy(d[h],D,y-f[c]-d[p]);n.modifiersData[i]=((t={})[l]=E,t.centerOffset=E-D,t)}},effect:function tAe(e){var t=e.state,i=e.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=t.elements.popper.querySelector(r))||!HW(t.elements.popper,r)||(t.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function oAe(e,t,n){void 0===n&&(n=!1);var i=hs(t),r=hs(t)&&function rAe(e){var t=e.getBoundingClientRect(),n=Cg(t.width)/e.offsetWidth||1,i=Cg(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),o=Nc(t),s=Sg(e,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==Ja(t)||pI(o))&&(a=function iAe(e){return e!==Io(e)&&hs(e)?function nAe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}(e):fI(e)}(t)),hs(t)?((l=Sg(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=hI(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function sAe(e){var t=new Map,n=new Set,i=[];function r(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&r(l)}}),i.push(o)}return e.forEach(function(o){t.set(o.name,o)}),e.forEach(function(o){n.has(o.name)||r(o)}),i}function lAe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}var KW={placement:"bottom",modifiers:[],strategy:"absolute"};function XW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function PE(e){void 0===e&&(e={});var n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?KW:r;return function(a,l,u){void 0===u&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},KW,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(_){var y="function"==typeof _?_(c.options):_;g(),c.options=Object.assign({},o,c.options,y),c.scrollParents={reference:Mf(a)?ly(a):a.contextElement?ly(a.contextElement):[],popper:ly(l)};var v=function aAe(e){var t=sAe(e);return BW.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}(function uAe(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}([].concat(i,c.options.modifiers)));return c.orderedModifiers=v.filter(function(b){return b.enabled}),function p(){c.orderedModifiers.forEach(function(m){var y=m.options,b=m.effect;if("function"==typeof b){var w=b({state:c,name:m.name,instance:h,options:void 0===y?{}:y});d.push(w||function(){})}})}(),h.update()},forceUpdate:function(){if(!f){var _=c.elements,y=_.reference,v=_.popper;if(XW(y,v)){c.rects={reference:oAe(y,uy(v),"fixed"===c.options.strategy),popper:yI(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var b=0;b<c.orderedModifiers.length;b++)if(!0!==c.reset){var w=c.orderedModifiers[b],D=w.fn,E=w.options;"function"==typeof D&&(c=D({state:c,options:void 0===E?{}:E,name:w.name,instance:h})||c)}else c.reset=!1,b=-1}}},update:lAe(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){g(),f=!0}};if(!XW(a,l))return h;function g(){d.forEach(function(m){return m()}),d=[]}return h.setOptions(u).then(function(m){!f&&u.onFirstUpdate&&u.onFirstUpdate(m)}),h}}var cAe=PE(),LE={passive:!0};const wI={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function dAe(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,l=Io(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,LE)}),a&&l.addEventListener("resize",n.update,LE),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,LE)}),a&&l.removeEventListener("resize",n.update,LE)}},data:{}},EI={name:"popperOffsets",enabled:!0,phase:"read",fn:function fAe(e){var t=e.state;t.modifiersData[e.name]=GW({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var hAe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function QW(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=s.x,h=void 0===f?0:f,p=s.y,g=void 0===p?0:p,m="function"==typeof c?c({x:h,y:g}):{x:h,y:g};h=m.x,g=m.y;var _=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),v=Ar,b=Tr,w=window;if(u){var D=uy(n),E="clientHeight",C="clientWidth";D===Io(n)&&"static"!==gu(D=Nc(n)).position&&"absolute"===a&&(E="scrollHeight",C="scrollWidth"),(r===Tr||(r===Ar||r===ko)&&o===Eg)&&(b=Mo,g-=(d&&D===w&&w.visualViewport?w.visualViewport.height:D[E])-i.height,g*=l?1:-1),r!==Ar&&(r!==Tr&&r!==Mo||o!==Eg)||(v=ko,h-=(d&&D===w&&w.visualViewport?w.visualViewport.width:D[C])-i.width,h*=l?1:-1)}var P,R=Object.assign({position:a},u&&hAe),F=!0===c?function pAe(e,t){var i=e.y,r=t.devicePixelRatio||1;return{x:Cg(e.x*r)/r||0,y:Cg(i*r)/r||0}}({x:h,y:g},Io(n)):{x:h,y:g};return h=F.x,g=F.y,Object.assign({},R,l?((P={})[b]=y?"0":"",P[v]=_?"0":"",P.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",P):((t={})[b]=y?g+"px":"",t[v]=_?h+"px":"",t.transform="",t))}const DI={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function gAe(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,u={placement:Qa(t.placement),variation:xg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,QW(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,QW(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},CI={name:"applyStyles",enabled:!0,phase:"write",fn:function mAe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},r=t.attributes[n]||{},o=t.elements[n];!hs(o)||!Ja(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(s){var a=r[s];!1===a?o.removeAttribute(s):o.setAttribute(s,!0===a?"":a)}))})},effect:function _Ae(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],o=t.attributes[i]||{},a=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]).reduce(function(l,u){return l[u]="",l},{});!hs(r)||!Ja(r)||(Object.assign(r.style,a),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]};var JW=PE({defaultModifiers:[wI,EI,DI,CI]});const SI={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function bAe(e){var t=e.state,i=e.name,r=e.options.offset,o=void 0===r?[0,0]:r,s=uI.reduce(function(c,d){return c[d]=function vAe(e,t,n){var i=Qa(e),r=[Ar,Tr].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[Ar,ko].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(d,t.rects,o),c},{}),a=s[t.placement],u=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=a.x,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=s}},AAe=["*"],WAe=["dialog"];function TI(e){return"string"==typeof e}function If(e){return null!=e}function Ag(e){return(e||document.body).getBoundingClientRect()}const eq={animation:!0,transitionTimerDelayMs:5},V2e=()=>{},{transitionTimerDelayMs:j2e}=eq,dy=new Map,Nr=(e,t,n,i)=>{let r=i.context||{};const o=dy.get(t);if(o)switch(i.runningTransition){case"continue":return js;case"stop":e.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),dy.delete(t)}const s=n(t,i.animation,r)||V2e;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>s()),Re(void 0).pipe(function $2e(e){return t=>new qt(n=>t.subscribe({next:s=>e.run(()=>n.next(s)),error:s=>e.run(()=>n.error(s)),complete:()=>e.run(()=>n.complete())}))}(e));const a=new bn,l=new bn,u=a.pipe(function Fxe(...e){return t=>$0(t,Re(...e))}(!0));dy.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const c=function B2e(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const d=Sr(t,"transitionend").pipe(si(u),vi(({target:h})=>h===t));(function _G(...e){return 1===(e=mG(e)).length?Oi(e[0]):new qt(function Rxe(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(Oi(e[i]).subscribe(en(t,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}t.next(r)})))}}(e))})(function Bk(e=0,t,n=kxe){let i=-1;return null!=t&&(p6(t)?n=t:i=t),new qt(r=>{let o=function Ixe(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(c+j2e).pipe(si(u)),d,l).pipe(si(u)).subscribe(()=>{dy.delete(t),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let BE=(()=>{class e{constructor(){this.animation=eq.animation}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),sq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),aq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),cq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),dq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({}),e})();var ai=(()=>{return(e=ai||(ai={}))[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",ai;var e})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const hq=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function pq(e){const t=Array.from(e.querySelectorAll(hq)).filter(n=>-1!==n.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Eq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No,xW]}),e})(),RI=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=we({type:e,selectors:[["",8,"navbar"]]}),e})(),Sq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({}),e})();class Pf{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}}let MNe=(()=>{class e{constructor(n,i){this._el=n,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Ri(1)).subscribe(()=>{Nr(this._zone,this._el.nativeElement,(n,i)=>{i&&Ag(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Nr(this._zone,this._el.nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(n){return new(n||e)(U(an),U(Ut))},e.\u0275cmp=An({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,i){2&n&&(yf("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Mn("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(n,i){},encapsulation:2}),e})();class xq{close(t){}dismiss(t){}}class kNe{constructor(t,n,i,r){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new bn,this._dismissed=new bn,this._hidden=new bn,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(si(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(si(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const n=this._beforeDismiss();!function ZW(e){return e&&e.then}(n)?!1!==n&&this._dismiss(t):n.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Re(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),EE(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var gy=(()=>{return(e=gy||(gy={}))[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",gy;var e})();let INe=(()=>{class e{constructor(n,i,r){this._document=n,this._elRef=i,this._zone=r,this._closed$=new bn,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new tt,this.shown=new bn,this.hidden=new bn}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":TI(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Ri(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:n}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=EE(Nr(this._zone,n,()=>n.classList.remove("show"),i),Nr(this._zone,this._dialogEl.nativeElement,()=>{},i));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const n={animation:this.animation,runningTransition:"continue"};EE(Nr(this._zone,this._elRef.nativeElement,(o,s)=>{s&&Ag(o),o.classList.add("show")},n),Nr(this._zone,this._dialogEl.nativeElement,()=>{},n)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{Sr(n,"keydown").pipe(si(this._closed$),vi(r=>r.which===ai.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(gy.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Sr(this._dialogEl.nativeElement,"mousedown").pipe(si(this._closed$),bi(()=>i=!1),cs(()=>Sr(n,"mouseup").pipe(si(this._closed$),Ri(1))),vi(({target:r})=>n===r)).subscribe(()=>{i=!0}),Sr(n,"click").pipe(si(this._closed$)).subscribe(({target:r})=>{n===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(gy.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){const i=n.querySelector("[ngbAutofocus]"),r=pq(n)[0];(i||r||n).focus()}}_restoreFocus(){const n=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&n.contains(i)?i:n,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Nr(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(n){return new(n||e)(U(un),U(an),U(Ut))},e.\u0275cmp=An({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(n,i){if(1&n&&wf(WAe,7),2&n){let r;Qt(r=Jt())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,i){2&n&&(Xt("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),yf("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Mn("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:AAe,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(n,i){1&n&&(function CV(e){const t=re()[16][6];if(!t.projection){const i=t.projection=K_(e?e.length:1,null),r=i.slice();let o=t.child;for(;null!==o;){const s=e?Jye(o,e):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}(),j(0,"div",0,1)(2,"div",2),function SV(e,t=0,n){const i=re(),r=yt(),o=zp(r,22+e,16,null,n||null);null===o.projection&&(o.projection=t),h2(),64!=(64&o.flags)&&function __e(e,t,n){H9(t[11],0,t,n,R9(e,n,t),$9(n.parent||t[6],n,t))}(r,i,o)}(3),H()()),2&n&&yf("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),ONe=(()=>{class e{constructor(n){this._document=n}hide(){const n=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(n>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+n}px`}return r.overflow="hidden",()=>{n>0&&(r.paddingRight=s),r.overflow=o}}}return e.\u0275fac=function(n){return new(n||e)(he(un))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),RNe=(()=>{class e{constructor(n,i,r,o,s,a){this._applicationRef=n,this._injector=i,this._document=r,this._scrollBar=o,this._rendererFactory=s,this._ngZone=a,this._activeWindowCmptHasChanged=new bn,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new tt,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Sr(t,"focusin").pipe(si(n),qe(o=>o.target));Sr(t,"keydown").pipe(si(n),vi(o=>o.which===ai.Tab),jk(r)).subscribe(([o,s])=>{const[a,l]=pq(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&Sr(t,"click").pipe(si(n),jk(r),qe(o=>o[1])).subscribe(o=>o.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}_restoreScrollBar(){const n=this._scrollBarRestoreFn;n&&(this._scrollBarRestoreFn=null,n())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(n,i,r){const o=r.container instanceof HTMLElement?r.container:If(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new xq,l=this._getContentRef(r.injector||n,i,a,r);let u=!1!==r.backdrop?this._attachBackdrop(o):void 0,c=this._attachWindowComponent(o,l.nodes),d=new kNe(c,l,u,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(c),d.hidden.pipe(Ri(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=f=>{d.close(f)},a.dismiss=f=>{d.dismiss(f)},this._applyWindowOptions(c.instance,r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),u&&u.instance&&(this._applyBackdropOptions(u.instance,r),u.changeDetectorRef.detectChanges()),c.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(i=>i.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n){let i=kM(MNe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),n.appendChild(i.location.nativeElement),i}_attachWindowComponent(n,i){let r=kM(INe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),n.appendChild(r.location.nativeElement),r}_applyWindowOptions(n,i){this._windowAttributes.forEach(r=>{If(i[r])&&(n[r]=i[r])})}_applyBackdropOptions(n,i){this._backdropAttributes.forEach(r=>{If(i[r])&&(n[r]=i[r])})}_getContentRef(n,i,r,o){return i?i instanceof In?this._createFromTemplateRef(i,r):TI(i)?this._createFromString(i):this._createFromComponent(n,i,r,o):new Pf([])}_createFromTemplateRef(n,i){const o=n.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(o),new Pf([o.rootNodes],o)}_createFromString(n){const i=this._document.createTextNode(`${n}`);return new Pf([[i]])}_createFromComponent(n,i,r,o){const s=Ji.create({providers:[{provide:xq,useValue:r}],parent:n}),a=kM(i,{environmentInjector:this._applicationRef.injector,elementInjector:s}),l=a.location.nativeElement;return o.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new Pf([[l]],a.hostView,a)}_setAriaHidden(n){const i=n.parentElement;i&&n!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==n&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,i)=>{n?i.setAttribute("aria-hidden",n):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){const i=()=>{const r=this._modalRefs.indexOf(n);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(i,i)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{const i=this._windowCmpts.indexOf(n);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(n){return new(n||e)(he(lg),he(Ji),he(un),he(ONe),he(Vp),he(Ut))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),FNe=(()=>{class e{constructor(n){this._ngbConfig=n,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(he(BE))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Tq=(()=>{class e{constructor(n,i,r){this._injector=n,this._modalStack=i,this._config=r}open(n,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,n,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(n){return new(n||e)(he(Ji),he(RNe),he(FNe))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Aq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({providers:[Tq]}),e})(),Iq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),Vq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),Uq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),Hq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),zq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),Gq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),Wq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),qq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({}),e})();new Oe("live announcer delay",{providedIn:"root",factory:function YNe(){return 100}});let Yq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[No]}),e})(),Kq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({}),e})();const KNe=[sq,aq,cq,dq,Eq,Sq,Aq,Iq,Kq,Vq,Uq,Hq,zq,Gq,Wq,qq,Yq];let XNe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({imports:[KNe,sq,aq,cq,dq,Eq,Sq,Aq,Iq,Kq,Vq,Uq,Hq,zq,Gq,Wq,qq,Yq]}),e})(),QNe=(()=>{class e{constructor(n,i,r){this.apparelService=n,this.modalService=i,this.viewportScroller=r,this.logos=bxe.U,this.selectedLogos=[]}ngOnInit(){this.selectedLogos=[];for(var n=0;n<=5;n++){let i="";do{i=this.logos[this.getRandomInt(20)]}while(this.selectedLogos.includes(i));this.selectedLogos.push(i)}}open(n){this.modalService.open(n)}onExploreMore(){this.apparelService.setExploreMore()}getRandomInt(n){return Math.floor(Math.random()*n)}onClick(n){this.viewportScroller.scrollToAnchor(n)}}return e.\u0275fac=function(n){return new(n||e)(U(mg),U(Tq),U(R0))},e.\u0275cmp=An({type:e,selectors:[["intro"]],decls:32,vars:10,consts:[[1,"intro","wikirate-box"],[1,"wikirate-container"],[1,"row","mt-5","mb-3"],[1,"col-md-8","nopadding"],[1,"showcase-main-title","call-to-action-title"],[1,"highlight-text"],[1,"main-text"],[1,"col-md-4"],[1,"row"],[1,"scroll",3,"click"],[1,"bi","bi-chevron-down"],[1,"ml-2"],[1,"animation","d-none","d-md-block"],[1,"logo-1","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-img",3,"src"],[1,"logo-2","d-block","corporate-logo-xl","bg-white","rounded-circle","shadow-lg","p-3","ms-auto"],[1,"logo-3","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-4","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-5","d-block","corporate-logo-xl","bg-white","rounded-circle","shadow-lg","p-3","ms-auto"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),K(6,"Apparel 100"),H(),ze(7,"br"),K(8," an ESG data and supply chain transparency showcase "),H(),ze(9,"br"),j(10,"div",6)(11,"p"),K(12,"Discover what we do and don't know about the top 100 apparel companies through interactive maps and infographics. "),H(),j(13,"p"),K(14,"WikiRate's biggest data showcase unearths; who the top 100 are, how much we know about their environmental, social and governance performance, and where their suppliers are located."),H()()(),ze(15,"div",7),H(),j(16,"div",8)(17,"a",9),st("click",function(){return i.onClick("market-cap-map")}),ze(18,"i",10),j(19,"span",11),K(20,"Scroll down"),H()()()()(),j(21,"div",12)(22,"div",13),ze(23,"img",14),H(),j(24,"div",15),ze(25,"img",14),H(),j(26,"div",16),ze(27,"img",14),H(),j(28,"div",17),ze(29,"img",14),H(),j(30,"div",18),ze(31,"img",14),H()()),2&n&&(oe(22),_e("@slide-in",void 0),oe(1),Wa("src",i.selectedLogos[0],Xr),oe(1),_e("@slide-in-delay-sm",void 0),oe(1),Wa("src",i.selectedLogos[1],Xr),oe(1),_e("@slide-in-delay-md",void 0),oe(1),Wa("src",i.selectedLogos[2],Xr),oe(1),_e("@slide-in-delay-lg",void 0),oe(1),Wa("src",i.selectedLogos[3],Xr),oe(1),_e("@slide-in-delay-xl",void 0),oe(1),Wa("src",i.selectedLogos[4],Xr))},styles:[".intro[_ngcontent-%COMP%]{min-height:450px;display:flex;align-items:center}h1.showcase-main-title[_ngcontent-%COMP%]{font-style:normal;font-weight:400!important;font-size:2.6rem;line-height:135%;color:#484c9d;max-width:600px}.main-text[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:1.25rem;color:#34343b;line-height:155%;margin-bottom:30px;max-width:600px}.corporate-logo-xl[_ngcontent-%COMP%]{height:5.25rem;width:5.25rem;position:relative}.corporate-logo-sm[_ngcontent-%COMP%]{height:4.25rem;width:4.25rem;position:relative}.logo-1[_ngcontent-%COMP%]{position:absolute;left:85%;right:15%;top:7em}.logo-2[_ngcontent-%COMP%]{position:absolute;left:65%;right:35%;top:17em}.logo-3[_ngcontent-%COMP%]{position:absolute;left:93%;right:7%;top:23em}.logo-4[_ngcontent-%COMP%]{position:absolute;left:80%;right:20%;top:30em}.logo-5[_ngcontent-%COMP%]{position:absolute;left:64%;right:36%;top:39em}a.scroll[_ngcontent-%COMP%]{color:#f7733d;cursor:pointer;text-decoration:inherit}"],data:{animation:[Z0("slide-in",[ty(":enter",[fs({opacity:0,transform:"translateY(50px)"}),ey("600ms 50ms",fs({opacity:1,transform:"translateY(0)"}))])]),Z0("slide-in-delay-sm",[ty(":enter",[fs({opacity:0,transform:"translateY(50px)"}),ey("600ms 150ms",fs({opacity:1,transform:"translateY(0)"}))])]),Z0("slide-in-delay-md",[ty(":enter",[fs({opacity:0,transform:"translateY(50px)"}),ey("600ms 250ms",fs({opacity:1,transform:"translateY(0)"}))])]),Z0("slide-in-delay-lg",[ty(":enter",[fs({opacity:0,transform:"translateY(50px)"}),ey("600ms 350ms",fs({opacity:1,transform:"translateY(0)"}))])]),Z0("slide-in-delay-xl",[ty(":enter",[fs({opacity:0,transform:"translateY(50px)"}),ey("600ms 450ms",fs({opacity:1,transform:"translateY(0)"}))])])]}}),e})();function Xq(e,t,n,i,r,o,s){try{var a=e[o](s),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(i,r)}function li(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function s(l){Xq(o,i,r,s,a,"next",l)}function a(l){Xq(o,i,r,s,a,"throw",l)}s(void 0)})}}var JNe=ht(564),$I=ht.n(JNe);function Jr(e,t,n){return e.fields=t||[],e.fname=n,e}function On(e){return null==e?null:e.fname}function tr(e){return null==e?null:e.fields}function Qq(e){return 1===e.length?ZNe(e[0]):eMe(e)}const ZNe=e=>function(t){return t[e]},eMe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Q(e){throw Error(e)}function el(e){const t=[],n=e.length;let s,a,l,i=null,r=0,o="";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(e+="",s=a=0;a<n;++a)if(l=e[a],"\\"===l)o+=e.substring(s,a++),s=a;else if(l===i)u(),i=null,r=-1;else{if(i)continue;s===r&&'"'===l||s===r&&"'"===l?(s=a+1,i=l):"."!==l||r?"["===l?(a>s&&u(),r=s=a+1):"]"===l&&(r||Q("Access path missing open bracket: "+e),r>0&&u(),r=0,s=a+1):a>s?u():s=a+1}return r&&Q("Access path missing closing bracket: "+e),i&&Q("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function ps(e,t,n){const i=el(e);return e=1===i.length?i[0]:e,Jr((n&&n.get||Qq)(i),[e],t||e)}const my=ps("id"),nr=Jr(e=>e,[],"identity"),kc=Jr(()=>0,[],"zero"),Mg=Jr(()=>1,[],"one"),gs=Jr(()=>!0,[],"true"),Ic=Jr(()=>!1,[],"false");function tMe(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const Jq=0,BI=1,VI=2,Zq=3,eY=4;function jI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tMe,i=e||Jq;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=BI&&n(t||"error","ERROR",arguments),this},warn(){return i>=VI&&n(t||"warn","WARN",arguments),this},info(){return i>=Zq&&n(t||"log","INFO",arguments),this},debug(){return i>=eY&&n(t||"log","DEBUG",arguments),this}}}var J=Array.isArray;function ye(e){return e===Object(e)}const tY=e=>"__proto__"!==e;function kg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const o in r)"signals"===o?i.signals=nMe(i.signals,r.signals):Ig(i,o,r[o],"legend"===o?{layout:1}:"style"===o||null);return i},{})}function Ig(e,t,n,i){if(!tY(t))return;let r,o;if(ye(n)&&!J(n))for(r in o=ye(e[t])?e[t]:e[t]={},n)i&&(!0===i||i[r])?Ig(o,r,n[r]):tY(r)&&(o[r]=n[r]);else e[t]=n}function nMe(e,t){if(null==e)return t;const n={},i=[];function r(o){n[o.name]||(n[o.name]=1,i.push(o))}return t.forEach(r),e.forEach(r),i}function mt(e){return e[e.length-1]}function ir(e){return null==e||""===e?null:+e}const nY=e=>t=>e*Math.exp(t),iY=e=>t=>Math.log(e*t),rY=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),oY=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,qE=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function YE(e,t,n,i){const r=n(e[0]),o=n(mt(e)),s=(o-r)*t;return[i(r-s),i(o-s)]}function sY(e,t){return YE(e,t,ir,nr)}function aY(e,t){var n=Math.sign(e[0]);return YE(e,t,iY(n),nY(n))}function lY(e,t,n){return YE(e,t,qE(n),qE(1/n))}function uY(e,t,n){return YE(e,t,rY(n),oY(n))}function KE(e,t,n,i,r){const o=i(e[0]),s=i(mt(e)),a=null!=t?i(t):(o+s)/2;return[r(a+(o-a)*n),r(a+(s-a)*n)]}function UI(e,t,n){return KE(e,t,n,ir,nr)}function HI(e,t,n){const i=Math.sign(e[0]);return KE(e,t,n,iY(i),nY(i))}function XE(e,t,n,i){return KE(e,t,n,qE(i),qE(1/i))}function zI(e,t,n,i){return KE(e,t,n,rY(i),oY(i))}function cY(e){return 1+~~(new Date(e).getMonth()/3)}function dY(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ve(e){return null!=e?J(e)?e:[e]:[]}function fY(e,t,n){let o,i=e[0],r=e[1];return r<i&&(o=r,r=i,i=o),o=r-i,o>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-o),i+o]}function nt(e){return"function"==typeof e}function GI(e,t,n){n=n||{},t=ve(t)||[];const i=[],r=[],o={},s=n.comparator||rMe;return ve(e).forEach((a,l)=>{null!=a&&(i.push("descending"===t[l]?-1:1),r.push(a=nt(a)?a:ps(a,null,n)),(tr(a)||[]).forEach(u=>o[u]=1))}),0===r.length?null:Jr(s(r,i),Object.keys(o))}const QE=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),rMe=(e,t)=>1===e.length?oMe(e[0],t[0]):sMe(e,t,e.length),oMe=(e,t)=>function(n,i){return QE(e(n),e(i))*t},sMe=(e,t,n)=>(t.push(0),function(i,r){let o,s=0,a=-1;for(;0===s&&++a<n;)o=e[a],s=QE(o(i),o(r));return s*t[a]});function rr(e){return nt(e)?e:()=>e}function WI(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function it(e){for(let t,n,i=1,r=arguments.length;i<r;++i)for(n in t=arguments[i],t)e[n]=t[n];return e}function tl(e,t){let i,r,o,s,n=0;if(e&&(i=e.length))if(null==t){for(r=e[n];n<i&&(null==r||r!=r);r=e[++n]);for(o=s=r;n<i;++n)r=e[n],null!=r&&(r<o&&(o=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(null==r||r!=r);r=t(e[++n]));for(o=s=r;n<i;++n)r=t(e[n]),null!=r&&(r<o&&(o=r),r>s&&(s=r))}return[o,s]}function hY(e,t){const n=e.length;let r,o,s,a,l,i=-1;if(null==t){for(;++i<n;)if(o=e[i],null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=e[i],null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}else{for(;++i<n;)if(o=t(e[i],i,e),null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=t(e[i],i,e),null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}return[a,l]}const aMe=Object.prototype.hasOwnProperty;function Ce(e,t){return aMe.call(e,t)}const JE={};function Og(e){let n,t={};function i(o){return Ce(t,o)&&t[o]!==JE}const r={size:0,empty:0,object:t,has:i,get:o=>i(o)?t[o]:void 0,set(o,s){return i(o)||(++r.size,t[o]===JE&&--r.empty),t[o]=s,this},delete(o){return i(o)&&(--r.size,++r.empty,t[o]=JE),this},clear(){r.size=r.empty=0,r.object=t={}},test(o){return arguments.length?(n=o,r):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==JE&&(!n||!n(l))&&(o[a]=l,++s)}r.size=s,r.empty=0,r.object=t=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function pY(e,t,n,i,r,o){if(!n&&0!==n)return o;const s=+n;let u,a=e[0],l=mt(e);l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?i:c<=s?r:o}function pe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),it(i,n)}function Rg(e,t,n,i){let s,r=t[0],o=t[t.length-1];return r>o&&(s=r,r=o,o=s),i=void 0===i||i,((n=void 0===n||n)?r<=e:r<e)&&(i?e<=o:e<o)}function Oc(e){return"boolean"==typeof e}function Rc(e){return"[object Date]"===Object.prototype.toString.call(e)}function gY(e){return e&&nt(e[Symbol.iterator])}function Ct(e){return"number"==typeof e}function mY(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function be(e){return"string"==typeof e}function qI(e,t,n){e&&(e=t?ve(e).map(a=>a.replace(/\\(.)/g,"$1")):ve(e));const i=e&&e.length,r=n&&n.get||Qq,o=a=>r(t?[a]:el(a));let s;if(i)if(1===i){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<i;)u+="|"+a[c](l);return u}}else s=function(){return""};return Jr(s,e,"key")}function _Y(e,t){const n=e[0],i=mt(e),r=+t;return r?1===r?i:n+r*(i-n):n}function yY(e){let t,n,i;e=+e||1e4;const r=()=>{t={},n={},i=0},o=(s,a)=>(++i>e&&(n=t,t={},i=1),t[s]=a);return r(),{clear:r,has:s=>Ce(t,s)||Ce(n,s),get:s=>Ce(t,s)?t[s]:Ce(n,s)?o(s,n[s]):void 0,set:(s,a)=>Ce(t,s)?t[s]=a:o(s,a)}}function vY(e,t,n,i){const r=t.length,o=n.length;if(!o)return t;if(!r)return n;const s=i||new t.constructor(r+o);let a=0,l=0,u=0;for(;a<r&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<r;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function _y(e,t){let n="";for(;--t>=0;)n+=e;return n}function bY(e,t,n,i){const r=n||" ",o=e+"",s=t-o.length;return s<=0?o:"left"===i?_y(r,s)+o:"center"===i?_y(r,~~(s/2))+o+_y(r,Math.ceil(s/2)):o+_y(r,s)}function yy(e){return e&&mt(e)-e[0]||0}function fe(e){return J(e)?"["+e.map(fe)+"]":ye(e)||be(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function YI(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}const uMe=e=>Ct(e)||Rc(e)?e:Date.parse(e);function KI(e,t){return t=t||uMe,null==e||""===e?null:t(e)}function XI(e){return null==e||""===e?null:e+""}function oa(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function wY(e,t,n,i){const r=i??"\u2026",o=e+"",s=o.length,a=Math.max(0,t-r.length);return s<=t?o:"left"===n?r+o.slice(s-a):"center"===n?o.slice(0,Math.ceil(a/2))+r+o.slice(s-~~(a/2)):o.slice(0,a)+r}function Fc(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const o=t(e[r]);o&&n(o,r,e)}}else e.forEach(n)}var EY={},QI={};function DY(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function CY(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Zr(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function hMe(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(d,f){var _,h=[],p=d.length,g=0,m=0,y=p<=0,v=!1;function b(){if(y)return QI;if(v)return v=!1,EY;var D,C,E=g;if(34===d.charCodeAt(E)){for(;g++<p&&34!==d.charCodeAt(g)||34===d.charCodeAt(++g););return(D=g)>=p?y=!0:10===(C=d.charCodeAt(g++))?v=!0:13===C&&(v=!0,10===d.charCodeAt(g)&&++g),d.slice(E+1,D-1).replace(/""/g,'"')}for(;g<p;){if(10===(C=d.charCodeAt(D=g++)))v=!0;else if(13===C)v=!0,10===d.charCodeAt(g)&&++g;else if(C!==n)continue;return d.slice(E,D)}return y=!0,d.slice(E,p)}for(10===d.charCodeAt(p-1)&&--p,13===d.charCodeAt(p-1)&&--p;(_=b())!==QI;){for(var w=[];_!==EY&&_!==QI;)w.push(_),_=b();f&&null==(w=f(w,m++))||h.push(w)}return h}function o(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function u(d){return d.map(c).join(e)}function c(d){return null==d?"":d instanceof Date?function fMe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function dMe(e){return e<0?"-"+Zr(-e,6):e>9999?"+"+Zr(e,6):Zr(e,4)}(e.getUTCFullYear())+"-"+Zr(e.getUTCMonth()+1,2)+"-"+Zr(e.getUTCDate(),2)+(r?"T"+Zr(t,2)+":"+Zr(n,2)+":"+Zr(i,2)+"."+Zr(r,3)+"Z":i?"T"+Zr(t,2)+":"+Zr(n,2)+":"+Zr(i,2)+"Z":n||t?"T"+Zr(t,2)+":"+Zr(n,2)+"Z":"")}(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:function i(d,f){var h,p,g=r(d,function(m,_){if(h)return h(m,_-1);p=m,h=f?function cMe(e,t){var n=DY(e);return function(i,r){return t(n(i),r,e)}}(m,f):DY(m)});return g.columns=p||[],g},parseRows:r,format:function s(d,f){return null==f&&(f=CY(d)),[f.map(c).join(e)].concat(o(d,f)).join("\n")},formatBody:function a(d,f){return null==f&&(f=CY(d)),o(d,f).join("\n")},formatRows:function l(d){return d.map(u).join("\n")},formatRow:u,formatValue:c}}function gMe(e){return e}function _Me(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(n){return SY(e,n)})}:SY(e,t)}function SY(e,t){var n=t.id,i=t.bbox,r=t.properties??{},o=xY(e,t);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function xY(e,t){var n=function mMe(e){if(null==e)return gMe;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*i+o,d[1]=(n+=a[1])*r+s;u<c;)d[u]=a[u],++u;return d}}(e.transform),i=e.arcs;function r(c,d){d.length&&d.pop();for(var f=i[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&function pMe(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}(d,p)}function o(c){return n(c)}function s(c){for(var d=[],f=0,h=c.length;f<h;++f)r(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=s(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}return function u(c){var f,d=c.type;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=o(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(o);break;case"LineString":f=s(c.arcs);break;case"MultiLineString":f=c.arcs.map(s);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}(t)}function yMe(e,t){var n={},i={},r={},o=[],s=-1;function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),o.push(f)}}return t.forEach(function(u,c){var f,d=e.arcs[u<0?~u:u];d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++s],t[s]=u,t[c]=f)}),t.forEach(function(u){var h,p,c=function a(u){var f,c=e.arcs[u<0?~u:u],d=c[0];return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}(u),d=c[0],f=c[1];if(h=r[d])if(delete r[h.end],h.push(u),h.end=f,p=i[f]){delete i[p.start];var g=p===h?h:h.concat(p);i[g.start=h.start]=r[g.end=p.end]=g}else i[h.start]=r[h.end]=h;else if(h=i[f])if(delete i[h.start],h.unshift(u),h.start=d,p=r[d]){delete r[p.end];var m=p===h?h:p.concat(h);i[m.start=p.start]=r[m.end=h.end]=m}else i[h.start]=r[h.end]=h;else i[(h=[u]).start=d]=r[h.end=f]=h}),l(r,i),l(i,r),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function vMe(e){return xY(e,bMe.apply(this,arguments))}function bMe(e,t,n){var i,r,o;if(arguments.length>1)i=wMe(0,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:yMe(e,i)}}function wMe(e,t,n){var o,i=[],r=[];function s(d){var f=d<0?~d:d;(r[f]||(r[f]=[])).push({i:d,g:o})}function a(d){d.forEach(s)}function l(d){d.forEach(a)}return function c(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":!function u(d){d.forEach(l)}(d.arcs)}}(t),r.forEach(null==n?function(d){i.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}const EMe=Math.sqrt(50),DMe=Math.sqrt(10),CMe=Math.sqrt(2);function ZE(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=EMe?10:o>=DMe?5:o>=CMe?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,r)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?ZE(e,t,2*n):[a,l,u]}function eO(e,t,n){if(!((n=+n)>0))return[];if((e=+e)==(t=+t))return[e];const i=t<e,[r,o,s]=i?ZE(t,e,n):ZE(e,t,n);if(!(o>=r))return[];const a=o-r+1,l=new Array(a);if(i)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(r+u)/-s;else for(let u=0;u<a;++u)l[u]=(r+u)*s;return l}function tO(e,t,n){return ZE(e=+e,t=+t,n=+n)[2]}function Pc(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?tO(t,e,n):tO(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}var MY,SMe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lf(e){if(!(t=SMe.exec(e)))throw new Error("invalid format: "+e);var t;return new nO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function nO(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function eD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Fg(e){return(e=eD(Math.abs(e)))?e[1]:NaN}function TY(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Fg(t)/3)))-Fg(Math.abs(e)))}function AY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fg(t)-Fg(e))+1}function NY(e){return Math.max(0,-Fg(Math.abs(e)))}function kY(e,t){var n=eD(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Lf.prototype=nO.prototype,nO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const IY={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function xMe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kY(100*e,t),r:kY,s:function MMe(e,t){var n=eD(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(MY=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+eD(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OY(e){return e}var tD,nD,iO,RY=Array.prototype.map,FY=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function PY(e){var t=void 0===e.grouping||void 0===e.thousands?OY:function TMe(e,t){return function(n,i){for(var r=n.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}(RY.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?OY:function AMe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}(RY.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",a=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function u(d){var f=(d=Lf(d)).fill,h=d.align,p=d.sign,g=d.symbol,m=d.zero,_=d.width,y=d.comma,v=d.precision,b=d.trim,w=d.type;"n"===w?(y=!0,w="g"):IY[w]||(void 0===v&&(v=12),b=!0,w="g"),(m||"0"===f&&"="===h)&&(m=!0,f="0",h="=");var D="$"===g?n:"#"===g&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E="$"===g?i:/[%p]/.test(w)?s:"",C=IY[w],N=/[defgprs%]/.test(w);function k(R){var x,S,T,F=D,P=E;if("c"===w)P=C(R)+P,R="";else{var I=(R=+R)<0||1/R<0;if(R=isNaN(R)?l:C(Math.abs(R),v),b&&(R=function NMe(e){e:for(var r,t=e.length,n=1,i=-1;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":0===i&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(r+1):e}(R)),I&&0==+R&&"+"!==p&&(I=!1),F=(I?"("===p?p:a:"-"===p||"("===p?"":p)+F,P=("s"===w?FY[8+MY/3]:"")+P+(I&&"("===p?")":""),N)for(x=-1,S=R.length;++x<S;)if(48>(T=R.charCodeAt(x))||T>57){P=(46===T?r+R.slice(x+1):R.slice(x))+P,R=R.slice(0,x);break}}y&&!m&&(R=t(R,1/0));var A=F.length+R.length+P.length,M=A<_?new Array(_-A+1).join(f):"";switch(y&&m&&(R=t(M+R,M.length?_-P.length:1/0),M=""),h){case"<":R=F+R+P+M;break;case"=":R=F+M+R+P;break;case"^":R=M.slice(0,A=M.length>>1)+F+R+P+M.slice(A);break;default:R=M+F+R+P}return o(R)}return v=void 0===v?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return d+""},k}return{format:u,formatPrefix:function c(d,f){var h=u(((d=Lf(d)).type="f",d)),p=3*Math.max(-8,Math.min(8,Math.floor(Fg(f)/3))),g=Math.pow(10,-p),m=FY[8+p/3];return function(_){return h(g*_)+m}}}}!function kMe(e){tD=PY(e),nD=tD.format,iO=tD.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const rO=new Date,oO=new Date;function ui(e,t,n,i){function r(o){return e(o=0===arguments.length?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),r.round=o=>{const s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=(o,s)=>(t(o=new Date(+o),null==s?1:Math.floor(s)),o),r.range=(o,s,a)=>{const l=[];if(o=r.ceil(o),a=null==a?1:Math.floor(a),!(o<s&&a>0))return l;let u;do{l.push(u=new Date(+o)),t(o,a),e(o)}while(u<o&&o<s);return l},r.filter=o=>ui(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(r.count=(o,s)=>(rO.setTime(+o),oO.setTime(+s),e(rO),e(oO),Math.floor(n(rO,oO))),r.every=o=>(o=Math.floor(o),isFinite(o)&&o>0?o>1?r.filter(i?s=>i(s)%o==0:s=>r.count(0,s)%o==0):r:null)),r}const _u=1e3,ms=6e4,yu=60*ms,vu=24*yu,sO=7*vu,LY=30*vu,aO=365*vu,bu=ui(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ms)/vu,e=>e.getDate()-1),Lc=ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vu,e=>e.getUTCDate()-1),$Y=ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vu,e=>Math.floor(e/vu));function $f(e){return ui(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+7*n)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ms)/sO)}const Pg=$f(0),iD=$f(1),Lg=($f(2),$f(3),$f(4));function Bf(e){return ui(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+7*n)},(t,n)=>(n-t)/sO)}$f(5),$f(6);const $g=Bf(0),rD=Bf(1),Bg=(Bf(2),Bf(3),Bf(4)),nl=(Bf(5),Bf(6),ui(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));nl.every=e=>isFinite(e=Math.floor(e))&&e>0?ui(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;const il=ui(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());il.every=e=>isFinite(e=Math.floor(e))&&e>0?ui(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;const by=ui(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth()),wy=ui(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth()),oD=ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_u-e.getMinutes()*ms)},(e,t)=>{e.setTime(+e+t*yu)},(e,t)=>(t-e)/yu,e=>e.getHours()),sD=ui(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yu)},(e,t)=>(t-e)/yu,e=>e.getUTCHours()),aD=ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_u)},(e,t)=>{e.setTime(+e+t*ms)},(e,t)=>(t-e)/ms,e=>e.getMinutes()),lD=ui(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ms)},(e,t)=>(t-e)/ms,e=>e.getUTCMinutes()),wu=ui(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_u)},(e,t)=>(t-e)/_u,e=>e.getUTCSeconds()),Vg=ui(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);function Eu(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function VMe(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jg(e){let t,n,i;function r(a,l,u=0,c=a.length){if(u<c){if(0!==t(l,l))return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}return 2!==e.length?(t=Eu,n=(a,l)=>Eu(e(a),l),i=(a,l)=>e(a)-l):(t=e===Eu||e===VMe?e:jMe,n=e,i=e),{left:r,center:function s(a,l,u=0,c=a.length){const d=r(a,l,u,c-1);return d>u&&i(a[d-1],l)>-i(a[d],l)?d-1:d},right:function o(a,l,u=0,c=a.length){if(u<c){if(0!==t(l,l))return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}}}function jMe(){return 0}Vg.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?ui(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Vg:null);const Pi="year",eo="quarter",or="month",ci="week",to="date",sr="day",rl="dayofyear",Oo="hours",Ro="minutes",_s="seconds",sa="milliseconds",lO=[Pi,eo,or,ci,to,sr,rl,Oo,Ro,_s,sa],uO=lO.reduce((e,t,n)=>(e[t]=1+n,e),{});function cO(e){const t=ve(e).slice(),n={};return t.length||Q("Missing time unit."),t.forEach(r=>{Ce(uO,r)?n[r]=1:Q(`Invalid time unit: ${r}.`)}),(n[ci]||n[sr]?1:0)+(n[eo]||n[or]||n[to]?1:0)+(n[rl]?1:0)>1&&Q(`Incompatible time units: ${e}`),t.sort((r,o)=>uO[r]-uO[o]),t}const UMe={[Pi]:"%Y ",[eo]:"Q%q ",[or]:"%b ",[to]:"%d ",[ci]:"W%U ",[sr]:"%a ",[rl]:"%j ",[Oo]:"%H:00",[Ro]:"00:%M",[_s]:":%S",[sa]:".%L",[`${Pi}-${or}`]:"%Y-%m ",[`${Pi}-${or}-${to}`]:"%Y-%m-%d ",[`${Oo}-${Ro}`]:"%H:%M"};function BY(e,t){const n=it({},UMe,t),i=cO(e),r=i.length;let a,l,o="",s=0;for(s=0;s<r;)for(a=i.length;a>s;--a)if(l=i.slice(s,a).join("-"),null!=n[l]){o+=n[l],s=a;break}return o.trim()}const Vf=new Date;function dO(e){return Vf.setFullYear(e),Vf.setMonth(0),Vf.setDate(1),Vf.setHours(0,0,0,0),Vf}function VY(e){return UY(new Date(e))}function jY(e){return fO(new Date(e))}function UY(e){return bu.count(dO(e.getFullYear())-1,e)}function fO(e){return Pg.count(dO(e.getFullYear())-1,e)}function hO(e){return dO(e).getDay()}function HMe(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,i,r,o,s);return a.setFullYear(e),a}return new Date(e,t,n,i,r,o,s)}function HY(e){return GY(new Date(e))}function zY(e){return pO(new Date(e))}function GY(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Lc.count(t-1,e)}function pO(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return $g.count(t-1,e)}function gO(e){return Vf.setTime(Date.UTC(e,0,1)),Vf.getUTCDay()}function zMe(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,i,r,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,i,r,o,s))}function WY(e,t,n,i,r){const o=t||1,s=mt(e),a=(_,y,v)=>function GMe(e,t,n,i){const r=n<=1?e:i?(o,s)=>i+n*Math.floor((e(o,s)-i)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(r(o,s),s):r}(n[v=v||_],i[v],_===s&&o,y),l=new Date,u=oa(e),c=u[Pi]?a(Pi):rr(2012),d=u[or]?a(or):u[eo]?a(eo):kc,f=u[ci]&&u[sr]?a(sr,1,ci+sr):u[ci]?a(ci,1):u[sr]?a(sr,1):u[to]?a(to,1):u[rl]?a(rl,1):Mg,h=u[Oo]?a(Oo):kc,p=u[Ro]?a(Ro):kc,g=u[_s]?a(_s):kc,m=u[sa]?a(sa):kc;return function(_){l.setTime(+_);const y=c(l);return r(y,d(l),f(l,y),h(l),p(l),g(l),m(l))}}function Ug(e,t,n){return t+7*e-(n+6)%7}const WMe={[Pi]:e=>e.getFullYear(),[eo]:e=>Math.floor(e.getMonth()/3),[or]:e=>e.getMonth(),[to]:e=>e.getDate(),[Oo]:e=>e.getHours(),[Ro]:e=>e.getMinutes(),[_s]:e=>e.getSeconds(),[sa]:e=>e.getMilliseconds(),[rl]:e=>UY(e),[ci]:e=>fO(e),[ci+sr]:(e,t)=>Ug(fO(e),e.getDay(),hO(t)),[sr]:(e,t)=>Ug(1,e.getDay(),hO(t))},qMe={[eo]:e=>3*e,[ci]:(e,t)=>Ug(e,0,hO(t))};function qY(e,t){return WY(e,t||1,WMe,qMe,HMe)}const YMe={[Pi]:e=>e.getUTCFullYear(),[eo]:e=>Math.floor(e.getUTCMonth()/3),[or]:e=>e.getUTCMonth(),[to]:e=>e.getUTCDate(),[Oo]:e=>e.getUTCHours(),[Ro]:e=>e.getUTCMinutes(),[_s]:e=>e.getUTCSeconds(),[sa]:e=>e.getUTCMilliseconds(),[rl]:e=>GY(e),[ci]:e=>pO(e),[sr]:(e,t)=>Ug(1,e.getUTCDay(),gO(t)),[ci+sr]:(e,t)=>Ug(pO(e),e.getUTCDay(),gO(t))},KMe={[eo]:e=>3*e,[ci]:(e,t)=>Ug(e,0,gO(t))};function YY(e,t){return WY(e,t||1,YMe,KMe,zMe)}const XMe={[Pi]:nl,[eo]:by.every(3),[or]:by,[ci]:Pg,[to]:bu,[sr]:bu,[rl]:bu,[Oo]:oD,[Ro]:aD,[_s]:wu,[sa]:Vg},QMe={[Pi]:il,[eo]:wy.every(3),[or]:wy,[ci]:$g,[to]:Lc,[sr]:Lc,[rl]:Lc,[Oo]:sD,[Ro]:lD,[_s]:wu,[sa]:Vg};function Hg(e){return XMe[e]}function zg(e){return QMe[e]}function KY(e,t,n){return e?e.offset(t,n):void 0}function XY(e,t,n){return KY(Hg(e),t,n)}function QY(e,t,n){return KY(zg(e),t,n)}function JY(e,t,n,i){return e?e.range(t,n,i):void 0}function ZY(e,t,n,i){return JY(Hg(e),t,n,i)}function eK(e,t,n,i){return JY(zg(e),t,n,i)}const Dy=6e4,Cy=60*Dy,uD=24*Cy,tK=30*uD,mO=365*uD,nK=[Pi,or,to,Oo,Ro,_s,sa],Sy=nK.slice(0,-1),xy=Sy.slice(0,-1),Ty=xy.slice(0,-1),ZMe=Ty.slice(0,-1),iK=[Pi,or],rK=[Pi],Ay=[[Sy,1,1e3],[Sy,5,5e3],[Sy,15,15e3],[Sy,30,3e4],[xy,1,Dy],[xy,5,5*Dy],[xy,15,15*Dy],[xy,30,30*Dy],[Ty,1,Cy],[Ty,3,3*Cy],[Ty,6,6*Cy],[Ty,12,12*Cy],[ZMe,1,uD],[[Pi,ci],1,6048e5],[iK,1,tK],[iK,3,3*tK],[rK,1,mO]];function oK(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(yy(t))/n;let o,s,r=jg(a=>a[2]).right(Ay,i);return r===Ay.length?(o=rK,s=Pc(t[0]/mO,t[1]/mO,n)):r?(r=Ay[i/Ay[r-1][2]<Ay[r][2]/i?r-1:r],o=r[0],s=r[1]):(o=nK,s=Math.max(Pc(t[0],t[1],n),1)),{units:o,step:s}}function _O(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yO(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ny(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sK(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=My(r),c=ky(r),d=My(o),f=ky(o),h=My(s),p=ky(s),g=My(a),m=ky(a),_=My(l),y=ky(l),v={a:function I(W){return s[W.getDay()]},A:function A(W){return o[W.getDay()]},b:function M(W){return l[W.getMonth()]},B:function O(W){return a[W.getMonth()]},c:null,d:fK,e:fK,f:Dke,g:Oke,G:Fke,H:bke,I:wke,j:Eke,L:hK,m:Cke,M:Ske,p:function L(W){return r[+(W.getHours()>=12)]},q:function $(W){return 1+~~(W.getMonth()/3)},Q:vK,s:bK,S:xke,u:Tke,U:Ake,V:Nke,w:Mke,W:kke,x:null,X:null,y:Ike,Y:Rke,Z:Pke,"%":yK},b={a:function V(W){return s[W.getUTCDay()]},A:function B(W){return o[W.getUTCDay()]},b:function z(W){return l[W.getUTCMonth()]},B:function te(W){return a[W.getUTCMonth()]},c:null,d:gK,e:gK,f:Vke,g:Xke,G:Jke,H:Lke,I:$ke,j:Bke,L:mK,m:jke,M:Uke,p:function q(W){return r[+(W.getUTCHours()>=12)]},q:function ue(W){return 1+~~(W.getUTCMonth()/3)},Q:vK,s:bK,S:Hke,u:zke,U:Gke,V:Wke,w:qke,W:Yke,x:null,X:null,y:Kke,Y:Qke,Z:Zke,"%":yK},w={a:function k(W,Z,ee){var G=h.exec(Z.slice(ee));return G?(W.w=p.get(G[0].toLowerCase()),ee+G[0].length):-1},A:function R(W,Z,ee){var G=d.exec(Z.slice(ee));return G?(W.w=f.get(G[0].toLowerCase()),ee+G[0].length):-1},b:function F(W,Z,ee){var G=_.exec(Z.slice(ee));return G?(W.m=y.get(G[0].toLowerCase()),ee+G[0].length):-1},B:function P(W,Z,ee){var G=g.exec(Z.slice(ee));return G?(W.m=m.get(G[0].toLowerCase()),ee+G[0].length):-1},c:function x(W,Z,ee){return C(W,t,Z,ee)},d:cK,e:cK,f:mke,g:uK,G:lK,H:dK,I:dK,j:fke,L:gke,m:dke,M:hke,p:function N(W,Z,ee){var G=u.exec(Z.slice(ee));return G?(W.p=c.get(G[0].toLowerCase()),ee+G[0].length):-1},q:cke,Q:yke,s:vke,S:pke,u:oke,U:ske,V:ake,w:rke,W:lke,x:function S(W,Z,ee){return C(W,n,Z,ee)},X:function T(W,Z,ee){return C(W,i,Z,ee)},y:uK,Y:lK,Z:uke,"%":_ke};function D(W,Z){return function(ee){var xe,ke,wt,G=[],ge=-1,Se=0,je=W.length;for(ee instanceof Date||(ee=new Date(+ee));++ge<je;)37===W.charCodeAt(ge)&&(G.push(W.slice(Se,ge)),null!=(ke=aK[xe=W.charAt(++ge)])?xe=W.charAt(++ge):ke="e"===xe?" ":"0",(wt=Z[xe])&&(xe=wt(ee,ke)),G.push(xe),Se=ge+1);return G.push(W.slice(Se,ge)),G.join("")}}function E(W,Z){return function(ee){var Se,je,G=Ny(1900,void 0,1);if(C(G,W,ee+="",0)!=ee.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(1e3*G.s+("L"in G?G.L:0));if(Z&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+12*G.p),void 0===G.m&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(je=(Se=yO(Ny(G.y,0,1))).getUTCDay(),Se=je>4||0===je?rD.ceil(Se):rD(Se),Se=Lc.offset(Se,7*(G.V-1)),G.y=Se.getUTCFullYear(),G.m=Se.getUTCMonth(),G.d=Se.getUTCDate()+(G.w+6)%7):(je=(Se=_O(Ny(G.y,0,1))).getDay(),Se=je>4||0===je?iD.ceil(Se):iD(Se),Se=bu.offset(Se,7*(G.V-1)),G.y=Se.getFullYear(),G.m=Se.getMonth(),G.d=Se.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),je="Z"in G?yO(Ny(G.y,0,1)).getUTCDay():_O(Ny(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+7*G.W-(je+5)%7:G.w+7*G.U-(je+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,yO(G)):_O(G)}}function C(W,Z,ee,G){for(var xe,ke,ge=0,Se=Z.length,je=ee.length;ge<Se;){if(G>=je)return-1;if(37===(xe=Z.charCodeAt(ge++))){if(xe=Z.charAt(ge++),!(ke=w[xe in aK?Z.charAt(ge++):xe])||(G=ke(W,ee,G))<0)return-1}else if(xe!=ee.charCodeAt(G++))return-1}return G}return v.x=D(n,v),v.X=D(i,v),v.c=D(t,v),b.x=D(n,b),b.X=D(i,b),b.c=D(t,b),{format:function(W){var Z=D(W+="",v);return Z.toString=function(){return W},Z},parse:function(W){var Z=E(W+="",!1);return Z.toString=function(){return W},Z},utcFormat:function(W){var Z=D(W+="",b);return Z.toString=function(){return W},Z},utcParse:function(W){var Z=E(W+="",!0);return Z.toString=function(){return W},Z}}}var Gg,vO,wK,bO,EK,aK={"-":"",_:" ",0:"0"},wi=/^\s*\d+/,tke=/^%/,nke=/[\\^$*+?|[\]().{}]/g;function St(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function ike(e){return e.replace(nke,"\\$&")}function My(e){return new RegExp("^(?:"+e.map(ike).join("|")+")","i")}function ky(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rke(e,t,n){var i=wi.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function oke(e,t,n){var i=wi.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function ske(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function ake(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function lke(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function lK(e,t,n){var i=wi.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function uK(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function uke(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function cke(e,t,n){var i=wi.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function dke(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function cK(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function fke(e,t,n){var i=wi.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function dK(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function hke(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function pke(e,t,n){var i=wi.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function gke(e,t,n){var i=wi.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function mke(e,t,n){var i=wi.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function _ke(e,t,n){var i=tke.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function yke(e,t,n){var i=wi.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function vke(e,t,n){var i=wi.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function fK(e,t){return St(e.getDate(),t,2)}function bke(e,t){return St(e.getHours(),t,2)}function wke(e,t){return St(e.getHours()%12||12,t,2)}function Eke(e,t){return St(1+bu.count(nl(e),e),t,3)}function hK(e,t){return St(e.getMilliseconds(),t,3)}function Dke(e,t){return hK(e,t)+"000"}function Cke(e,t){return St(e.getMonth()+1,t,2)}function Ske(e,t){return St(e.getMinutes(),t,2)}function xke(e,t){return St(e.getSeconds(),t,2)}function Tke(e){var t=e.getDay();return 0===t?7:t}function Ake(e,t){return St(Pg.count(nl(e)-1,e),t,2)}function pK(e){var t=e.getDay();return t>=4||0===t?Lg(e):Lg.ceil(e)}function Nke(e,t){return e=pK(e),St(Lg.count(nl(e),e)+(4===nl(e).getDay()),t,2)}function Mke(e){return e.getDay()}function kke(e,t){return St(iD.count(nl(e)-1,e),t,2)}function Ike(e,t){return St(e.getFullYear()%100,t,2)}function Oke(e,t){return St((e=pK(e)).getFullYear()%100,t,2)}function Rke(e,t){return St(e.getFullYear()%1e4,t,4)}function Fke(e,t){var n=e.getDay();return St((e=n>=4||0===n?Lg(e):Lg.ceil(e)).getFullYear()%1e4,t,4)}function Pke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+St(t/60|0,"0",2)+St(t%60,"0",2)}function gK(e,t){return St(e.getUTCDate(),t,2)}function Lke(e,t){return St(e.getUTCHours(),t,2)}function $ke(e,t){return St(e.getUTCHours()%12||12,t,2)}function Bke(e,t){return St(1+Lc.count(il(e),e),t,3)}function mK(e,t){return St(e.getUTCMilliseconds(),t,3)}function Vke(e,t){return mK(e,t)+"000"}function jke(e,t){return St(e.getUTCMonth()+1,t,2)}function Uke(e,t){return St(e.getUTCMinutes(),t,2)}function Hke(e,t){return St(e.getUTCSeconds(),t,2)}function zke(e){var t=e.getUTCDay();return 0===t?7:t}function Gke(e,t){return St($g.count(il(e)-1,e),t,2)}function _K(e){var t=e.getUTCDay();return t>=4||0===t?Bg(e):Bg.ceil(e)}function Wke(e,t){return e=_K(e),St(Bg.count(il(e),e)+(4===il(e).getUTCDay()),t,2)}function qke(e){return e.getUTCDay()}function Yke(e,t){return St(rD.count(il(e)-1,e),t,2)}function Kke(e,t){return St(e.getUTCFullYear()%100,t,2)}function Xke(e,t){return St((e=_K(e)).getUTCFullYear()%100,t,2)}function Qke(e,t){return St(e.getUTCFullYear()%1e4,t,4)}function Jke(e,t){var n=e.getUTCDay();return St((e=n>=4||0===n?Bg(e):Bg.ceil(e)).getUTCFullYear()%1e4,t,4)}function Zke(){return"+0000"}function yK(){return"%"}function vK(e){return+e}function bK(e){return Math.floor(+e/1e3)}function Iy(e){const t={};return n=>t[n]||(t[n]=e(n))}function DK(e){const t=Iy(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Lf(i||",");if(null==r.precision){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1}return function tIe(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let o=function nIe(e,t){let i,n=e.lastIndexOf("e");if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}(i,r);const s=o<i.length?i.slice(o):"";for(;--o>r;)if("0"!==i[o]){++o;break}return i.slice(0,o)+s}}(t(r),t(".1f")(1)[1])}return t(r)},formatSpan(i,r,o,s){s=Lf(s??",f");const a=Pc(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let u;if(null==s.precision)switch(s.type){case"s":return isNaN(u=TY(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":isNaN(u=AY(a,l))||(s.precision=u-("e"===s.type));break;case"f":case"%":isNaN(u=NY(a))||(s.precision=u-2*("%"===s.type))}return t(s)}}}let wO,EO;function CK(){return wO=DK({format:nD,formatPrefix:iO})}function SK(e){return DK(PY(e))}function cD(e){return arguments.length?wO=SK(e):wO}function xK(e,t,n){ye(n=n||{})||Q(`Invalid time multi-format specifier: ${n}`);const i=t(_s),r=t(Ro),o=t(Oo),s=t(to),a=t(ci),l=t(or),u=t(eo),c=t(Pi),d=e(n[sa]||".%L"),f=e(n[_s]||":%S"),h=e(n[Ro]||"%I:%M"),p=e(n[Oo]||"%I %p"),g=e(n[to]||n[sr]||"%a %d"),m=e(n[ci]||"%b %d"),_=e(n[or]||"%B"),y=e(n[eo]||"%B"),v=e(n[Pi]||"%Y");return b=>(i(b)<b?d:r(b)<b?f:o(b)<b?h:s(b)<b?p:l(b)<b?a(b)<b?g:m:c(b)<b?u(b)<b?_:y:v)(b)}function TK(e){const t=Iy(e.format),n=Iy(e.utcFormat);return{timeFormat:i=>be(i)?t(i):xK(t,Hg,i),utcFormat:i=>be(i)?n(i):xK(n,zg,i),timeParse:Iy(e.parse),utcParse:Iy(e.utcParse)}}function AK(){return EO=TK({format:vO,parse:wK,utcFormat:bO,utcParse:EK})}function NK(e){return TK(sK(e))}function Oy(e){return arguments.length?EO=NK(e):EO}!function eIe(e){Gg=sK(e),vO=Gg.format,wK=Gg.parse,bO=Gg.utcFormat,EK=Gg.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),CK(),AK();const DO=(e,t)=>it({},e,t);function MK(e,t){const n=e?SK(e):cD(),i=t?NK(t):Oy();return DO(n,i)}function CO(e,t){const n=arguments.length;return n&&2!==n&&Q("defaultLocale expects either zero or two arguments."),n?DO(cD(e),Oy(t)):DO(cD(),Oy())}function iIe(){return CK(),AK(),CO()}const rIe=/^(data:|([A-Za-z]+:)?\/\/)/,oIe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,sIe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,kK="file://";function lIe(e,t){return SO.apply(this,arguments)}function SO(){return(SO=li(function*(e,t){const n=yield this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)})).apply(this,arguments)}function uIe(e,t){return xO.apply(this,arguments)}function xO(){return(xO=li(function*(e,t){t=it({},this.options,t);const n=this.fileAccess,i={href:null};let r,o,s;const a=oIe.test(e.replace(sIe,""));(null==e||"string"!=typeof e||!a)&&Q("Sanitize failure, invalid URI: "+fe(e));const l=rIe.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(r=e.startsWith(kK))||"file"===t.mode||"http"!==t.mode&&!l&&n,r?e=e.slice(kK.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i})).apply(this,arguments)}function cIe(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,o)=>{r?i(r):n(o)})}):dIe}function dIe(){return TO.apply(this,arguments)}function TO(){return(TO=li(function*(){Q("No file system access.")})).apply(this,arguments)}function fIe(e){return e?function(){var t=li(function*(n,i){const r=it({},this.options.http,i),o=i&&i.response,s=yield e(n,r);return s.ok?nt(s[o])?s[o]():s.text():Q(s.status+""+s.statusText)});return function(n,i){return t.apply(this,arguments)}}():hIe}function hIe(){return AO.apply(this,arguments)}function AO(){return(AO=li(function*(){Q("No HTTP fetch method available.")})).apply(this,arguments)}const pIe=e=>null!=e&&e==e,IK=e=>!(Number.isNaN(+e)||e instanceof Date),NO={boolean:YI,integer:ir,number:ir,date:KI,string:XI,unknown:nr},dD=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>IK(e)&&Number.isInteger(+e),IK,e=>!Number.isNaN(Date.parse(e))],yIe=["boolean","integer","number","date"];function OK(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=dD.length,r=dD.map((o,s)=>s+1);for(let a,l,o=0,s=0;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<i;++a)if(r[a]&&pIe(l)&&!dD[a](l)&&(r[a]=0,++s,s===dD.length))return"string";return yIe[r.reduce((o,s)=>0===o?s:o,0)-1]}function RK(e,t){return t.reduce((n,i)=>(n[i]=OK(e,i),n),{})}function FK(e){const t=function(n,i){const r={delimiter:e};return MO(n,i?it(i,r):r)};return t.responseType="text",t}function MO(e,t){return t.header&&(e=t.header.map(fe).join(t.delimiter)+"\n"+e),hMe(t.delimiter).parse(e+"")}function kO(e,t){const n=t&&t.property?ps(t.property):nr;return ye(e)&&!function vIe(e){return!("function"!=typeof Buffer||!nt(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function bIe(e,t){return!J(e)&&gY(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t):n(JSON.parse(e))}MO.responseType="text",kO.responseType="json";const wIe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function PK(e,t){let n,i,r,o;return e=kO(e,t),t&&t.feature?(n=_Me,r=t.feature):t&&t.mesh?(n=vMe,r=t.mesh,o=wIe[t.filter]):Q("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,o):Q("Invalid TopoJSON object: "+r),i&&i.features||[i]}PK.responseType="json";const fD={dsv:MO,csv:FK(","),tsv:FK("\t"),json:kO,topojson:PK};function IO(e,t){return arguments.length>1?(fD[e]=t,this):Ce(fD,e)?fD[e]:null}function LK(e){const t=IO(e);return t&&t.responseType||"text"}function $K(e,t,n,i){const r=IO((t=t||{}).type||"json");return r||Q("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function EIe(e,t,n,i){if(!e.length)return;const r=Oy();n=n||r.timeParse,i=i||r.utcParse;let s,a,l,u,c,d,o=e.columns||Object.keys(e[0]);"auto"===t&&(t=RK(e,o)),o=Object.keys(t);const f=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],("'"===m[0]&&"'"===m[m.length-1]||'"'===m[0]&&'"'===m[m.length-1])&&(m=m.slice(1,-1)),("utc"===g[0]?i:n)(m);if(!NO[p])throw Error("Illegal format pattern: "+h+":"+p);return NO[p]});for(l=0,c=e.length,d=o.length;l<c;++l)for(s=e[l],u=0;u<d;++u)a=o[u],s[a]=f[u](s[a])}(e,t.parse,n,i),Ce(e,"columns")&&delete e.columns,e}const hD=function aIe(e,t){return n=>({options:n||{},sanitize:uIe,load:lIe,fileAccess:!!t,file:cIe(t),http:fIe(e)})}(typeof fetch<"u"&&fetch,null);function pD(e){const t=e||nr,n=[],i={};return n.add=r=>{const o=t(r);return i[o]||(i[o]=1,n.push(r)),n},n.remove=r=>{const o=t(r);if(i[o]){i[o]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}function gD(e,t){return OO.apply(this,arguments)}function OO(){return(OO=li(function*(e,t){try{yield t(e)}catch(n){e.error(n)}})).apply(this,arguments)}const BK=Symbol("vega_id");let DIe=1;function mD(e){return!(!e||!Fe(e))}function Fe(e){return e[BK]}function VK(e,t){return e[BK]=t,e}function It(e){const t=e===Object(e)?e:{data:e};return Fe(t)?t:VK(t,DIe++)}function RO(e){return _D(e,It({}))}function _D(e,t){for(const n in e)t[n]=e[n];return t}function jK(e,t){return VK(t,Fe(e))}function jf(e,t){return e?t?(n,i)=>e(n,i)||Fe(t(n))-Fe(t(i)):(n,i)=>e(n,i)||Fe(n)-Fe(i):null}function UK(e){return e&&e.constructor===Uf}function Uf(){const e=[],t=[],n=[],i=[],r=[];let o=null,s=!1;return{constructor:Uf,insert(a){const l=ve(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=nt(a)?i:t,u=ve(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:rr(u)};return nt(a)?(c.filter=a,r.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return nt(a)?r.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,g,m;for(d=0,f=l.length;d<f;++d)u[Fe(l[d])]=1;for(d=0,f=t.length;d<f;++d)g=t[d],u[Fe(g)]=-1;for(d=0,f=i.length;d<f;++d)p=i[d],l.forEach(y=>{p(y)&&(u[Fe(y)]=-1)});for(d=0,f=e.length;d<f;++d)g=e[d],m=Fe(g),u[m]?u[m]=1:a.add.push(It(e[d]));for(d=0,f=l.length;d<f;++d)g=l[d],u[Fe(g)]<0&&a.rem.push(g);function _(y,v,b){b?y[v]=b(y):a.encode=v,s||(c[Fe(y)]=y)}for(d=0,f=n.length;d<f;++d)h=n[d],g=h.tuple,p=h.field,m=u[Fe(g)],m>0&&(_(g,p,h.value),a.modifies(p));for(d=0,f=r.length;d<f;++d)h=r[d],p=h.filter,l.forEach(y=>{p(y)&&u[Fe(y)]>0&&_(y,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||i.length?l.filter(y=>u[Fe(y)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||null==o&&(t.length||i.length))&&a.clean(!0),a}}}const yD="_:mod:_";function vD(){Object.defineProperty(this,yD,{writable:!0,value:{}})}vD.prototype={set(e,t,n,i){const r=this,o=r[e],s=r[yD];return null!=t&&t>=0?(o[t]!==n||i)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||i)&&(r[e]=n,s[e]=J(n)?1+n.length:-1),r},modified(e,t){const n=this[yD];if(!arguments.length){for(const i in n)if(n[i])return!0;return!1}if(J(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[yD]={},this}};let CIe=0;const xIe=new vD;function Zt(e,t,n,i){this.id=++CIe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function HK(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Zt.prototype={targets(){return this._targets||(this._targets=pD(my))},set(e){return this.value!==e?(this.value=e,1):0},skip:HK(1),modified:HK(2),parameters(e,t,n){t=!1!==t;const i=this._argval=this._argval||new vD,r=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(d,f,h)=>{h instanceof Zt?(h!==this&&(t&&h.targets().add(this),o.push(h)),r.push({op:h,name:d,index:f})):i.set(d,f,h)};for(s in e)if(a=e[s],"pulse"===s)ve(a).forEach(d=>{d instanceof Zt?d!==this&&(d.targets().add(this),o.push(d)):Q("Pulse parameters must be operator instances.")}),this.source=a;else if(J(a))for(i.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),o},marshall(e){const t=this._argval||xIe,n=this._argops;let i,r,o,s;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],o=i.op,s=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,s);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let kIe=0;function bD(e,t,n){this.id=++kIe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function $c(e,t,n){return new bD(e,t,n)}function FO(){return(FO=li(function*(e,t){const n=this;let r,i=0;try{r=yield n.loader().load(e,{context:"dataflow",response:LK(t&&t.type)});try{r=n.parse(r,t)}catch(o){i=-2,n.warn("Data ingestion failed",e,o)}}catch(o){i=-1,n.warn("Loading failed",e,o)}return{data:r,status:i}})).apply(this,arguments)}function PO(){return(PO=li(function*(e,t,n){const i=this,r=i._pending||LIe(i);r.requests+=1;const o=yield i.request(t,n);return i.pulse(e,i.changeset().remove(gs).insert(o.data||[])),r.done(),o})).apply(this,arguments)}function LIe(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}bD.prototype={_filter:gs,_apply:nr,targets(){return this._targets||(this._targets=pD(my))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=$c(e);return this.targets().add(t),t},apply(e){const t=$c(null,e);return this.targets().add(t),t},merge(){const e=$c();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=$c();return this.targets().add($c(null,null,WI(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add($c(null,null,()=>n=!0)),t.targets().add($c(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=gs,this._targets=null}};const $Ie={skip:!0};function VIe(e,t,n,i,r,o){const s=it({},o,$Ie);let a,l;nt(n)||(n=rr(n)),void 0===i?a=u=>e.touch(n(u)):nt(i)?(l=new Zt(null,i,r,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;UK(d)?e.pulse(c,d,o):e.update(c,d,s)}):a=u=>e.update(n(u),i,s),t.apply(a)}function jIe(e,t,n,i,r,o){if(void 0===i)t.targets().add(n);else{const s=o||{},a=new Zt(null,function UIe(e,t){return t=nt(t)?t:rr(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}(n,i),r,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}const wD={};function Vc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function LO(e,t){const n=[];return Fc(e,t,i=>n.push(i)),n}function YK(e,t){const n={};return e.visit(t,i=>{n[Fe(i)]=1}),i=>n[Fe(i)]?null:i}function ED(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}function $O(e,t,n,i){const r=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=r.fields||(r.fields={});for(const l in s.fields)a[l]=1}s.changed(r.ADD)&&(o|=r.ADD),s.changed(r.REM)&&(o|=r.REM),s.changed(r.MOD)&&(o|=r.MOD)}this.changes=o}function BO(){return(BO=li(function*(e,t,n){const i=this,r=[];if(i._pulse)return KK(i);if(i._pending&&(yield i._pending),t&&(yield gD(i,t)),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new Vc(i,o,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=pD(my);let a,l,u,s=0;try{for(;i._heap.size()>0;)a=i._heap.pop(),a.rank===a.qrank?(l=a.run(i._getPulse(a,e)),l.then?l=yield l:l.async&&(r.push(l.async),l=wD),l!==wD&&a._targets&&a._targets.forEach(c=>i._enqueue(c)),++s):i._enqueue(a,!0)}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${s} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((d,f)=>f.priority-d.priority);i._postrun=[];for(let d=0;d<c.length;++d)yield gD(i,c[d].callback)}return n&&(yield gD(i,n)),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(d=>{try{d(i)}catch(f){i.error(f)}})})),i})).apply(this,arguments)}function VO(){return(VO=li(function*(e,t,n){for(;this._running;)yield this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running})).apply(this,arguments)}function KK(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Vc.prototype={StopPropagation:wD,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new Vc(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Vc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(64&t)&&(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,YK(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return J(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?J(e)?e.some(i=>n[i]):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=ED(n.addF,t)),2&e&&(n.remF=ED(n.remF,t)),4&e&&(n.modF=ED(n.modF,t)),16&e&&(n.srcF=ED(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=LO(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=LO(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=LO(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(16&e)return Fc(n.source,n.srcF,i),n;1&e&&Fc(n.add,n.addF,i),2&e&&Fc(n.rem,n.remF,i),4&e&&Fc(n.mod,n.modF,i);const r=n.source;if(8&e&&r){const o=n.add.length+n.mod.length;o===r.length||Fc(r,o?YK(n,5):n.srcF,i)}return n}},pe($O,Vc,{fork(e){const t=new Vc(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?J(e)?e.some(i=>n[i]):n[e]:0},filter(){Q("MultiPulse does not support filtering.")},materialize(){Q("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let o=0;if(e&n.SOURCE)for(;o<r;++o)i[o].visit(e,t);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(e,t);return n}});const jO={skip:!1,force:!1};function XK(e,t,n,i){let r,o;const s=e[n];for(;n>t&&(o=n-1>>1,r=e[o],i(s,r)<0);)e[n]=r,n=o;return e[n]=s}function qg(){this.logger(jI()),this.logLevel(BI),this._clock=0,this._rank=0,this._locale=CO();try{this._loader=hD()}catch{}this._touched=pD(my),this._input={},this._pulse=null,this._heap=function nOe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),XK(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,function iOe(e,t,n){const i=t,r=e.length,o=e[t];let a,s=1+(t<<1);for(;s<r;)a=s+1,a<r&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,XK(e,i,t,n)}(t,0,e)):i=n,i}}}((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Fy(e){return function(){return this._log[e].apply(this,arguments)}}function Y(e,t){Zt.call(this,e,null,t)}qg.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Fy("error"),warn:Fy("warn"),info:Fy("info"),debug:Fy("debug"),logLevel:Fy("level"),cleanThreshold:1e4,add:function NIe(e,t,n,i){let o,r=1;return e instanceof Zt?o=e:e&&e.prototype instanceof Zt?o=new e:nt(e)?o=new Zt(null,e):(r=0,o=new Zt(e,t)),this.rank(o),r&&(i=n,n=t),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o},connect:function MIe(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank)return void this.rerank(e)},rank:function HIe(e){e.rank=++this._rank},rerank:function zIe(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&Q("Cycle detected in dataflow graph.")},pulse:function tOe(e,t,n){this.touch(e,n||jO);const i=new Vc(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this},touch:function ZIe(e,t){const n=t||jO;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function eOe(e,t,n){const i=n||jO;return(e.set(t)||i.force)&&this.touch(e,i),this},changeset:Uf,ingest:function RIe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function OIe(e,t){const n=this.locale();return $K(e,t,n.timeParse,n.utcParse)},preload:function PIe(e,t,n){return PO.apply(this,arguments)},request:function FIe(e,t){return FO.apply(this,arguments)},events:function IIe(e,t,n,i){const r=this,o=$c(n,i),s=function(u){u.dataflow=r;try{o.receive(u)}catch(c){r.error(c)}finally{r.run()}};let a;a="string"==typeof e&&typeof document<"u"?document.querySelectorAll(e):ve(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o},on:function BIe(e,t,n,i,r){return(e instanceof Zt?jIe:VIe)(this,e,t,n,i,r),this},evaluate:function WIe(e,t,n){return BO.apply(this,arguments)},run:function YIe(e,t,n){return this._pulse?KK(this):(this.evaluate(e,t,n),this)},runAsync:function qIe(e,t,n){return VO.apply(this,arguments)},runAfter:function KIe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}},_enqueue:function XIe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function QIe(e,t){const n=e.source,i=this._clock;return n&&J(n)?new $O(this,i,n.map(r=>r.pulse),t):this._input[e.id]||function JIe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==wD&&(e.source=t.source),e)}(this._pulse,n&&n.pulse)}},pe(Y,Zt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Yg={};function QK(e){const t=JK(e);return t&&t.Definition||null}function JK(e){return e=e&&e.toLowerCase(),Ce(Yg,e)?Yg[e]:null}function Hf(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function UO(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function DD(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function eX(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=void 0===r?DD:function ZK(e=Eu){if(e===Eu)return DD;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||0===i?i:(0===e(n,n))-(0===e(t,t))}}(r);i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1);eX(e,t,Math.max(n,Math.floor(t-u*d/l+f)),Math.min(i,Math.floor(t+(l-u)*d/l+f)),r)}const o=e[t];let s=n,a=i;for(Py(e,n,t),r(e[i],o)>0&&Py(e,n,i);s<a;){for(Py(e,s,a),++s,--a;r(e[s],o)<0;)++s;for(;r(e[a],o)>0;)--a}0===r(e[n],o)?Py(e,n,a):(++a,Py(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function Py(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function tX(e){return null===e?NaN:+e}function HO(e,t,n){if(e=Float64Array.from(function*rOe(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i=+i)>=i&&(yield i)}}(e,n)),(i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return UO(e);if(t>=1)return Hf(e);var i,r=(i-1)*t,o=Math.floor(r),s=Hf(eX(e,o).subarray(0,o+1));return s+(UO(e.subarray(o+1))-s)*(r-o)}}function nX(e,t,n=tX){if((i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(r-o)}}function iX(e,t){return HO(e,.5,t)}function*rX(e,t){if(null==t)for(let n of e)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),null!=i&&""!==i&&(i=+i)>=i&&(yield i)}}function zO(e,t,n){const i=Float64Array.from(rX(e,n));return i.sort(Eu),t.map(r=>nX(i,r))}function GO(e,t){return zO(e,[.25,.5,.75],t)}function WO(e,t){const n=e.length,i=function sOe(e,t){const n=function oOe(e,t){let i,n=0,r=0,o=0;if(void 0===t)for(let s of e)null!=s&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r));else{let s=-1;for(let a of e)null!=(a=t(a,++s,e))&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r))}if(n>1)return o/(n-1)}(e,t);return n&&Math.sqrt(n)}(e,t),r=GO(e,t);return 1.06*(Math.min(i,(r[2]-r[0])/1.34)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function oX(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a,l,u,c,d,f,o=e.extent[0],s=e.extent[1];const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/i)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=r.length;d<f;++d)c=a/r[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const g=Math.pow(n,-(c>=0?0:1+~~(-c/i))-1);return(e.nice||void 0===e.nice)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var ys=Math.random;function aOe(e){ys=e}function sX(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(rX(e,i)),o=r.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=r[~~(ys()*o)];c[u]=a/o}return c.sort(Eu),[HO(c,n/2),HO(c,1-n/2)]}function aX(e,t,n,i){i=i||(f=>f);const r=e.length,o=new Float64Array(r);let d,s=0,a=1,l=i(e[0]),u=l,c=l+t;for(;a<r;++a){if(d=i(e[a]),d>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?function lOe(e,t){const n=e.length;let o,s,i=0,r=1;for(;e[i]===e[r];)++r;for(;r<n;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<t){for(s=r+(i+o-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=o}return e}(o,t+t/4):o}function uOe(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function cOe(e,t){let n,i,r;null==t&&(t=e,e=0);const o={min(s){return arguments.length?(n=s||0,r=i-n,o):n},max(s){return arguments.length?(i=s||0,r=i-n,o):i},sample:()=>n+Math.floor(r*ys()),pdf:s=>s===Math.floor(s)&&s>=n&&s<i?1/r:0,cdf(s){const a=Math.floor(s);return a<n?0:a>=i?1:(a-n+1)/r},icdf:s=>s>=0&&s<=1?n-1+Math.floor(s*r):NaN};return o.min(e).max(t)}const lX=Math.sqrt(2*Math.PI),dOe=Math.SQRT2;let Ly=NaN;function CD(e,t){e=e||0,t=t??1;let r,o,n=0,i=0;if(Ly==Ly)n=Ly,Ly=NaN;else{do{n=2*ys()-1,i=2*ys()-1,r=n*n+i*i}while(0===r||r>1);o=Math.sqrt(-2*Math.log(r)/r),n*=o,Ly=i*o}return e+n*t}function qO(e,t,n){const i=(e-(t||0))/(n=n??1);return Math.exp(-.5*i*i)/(n*lX)}function SD(e,t,n){const i=(e-(t=t||0))/(n=n??1),r=Math.abs(i);let o;if(r>37)o=0;else{const s=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,o=s*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,o/=a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,o=s/a/2.506628274631)}return i>0?1-o:o}function xD(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*dOe*function fOe(e){let n,t=-Math.log((1-e)*(1+e));return t<6.25?(t-=3.125,n=-364441206401782e-35,n=n*t-16850591381820166e-35,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=n*t-1333171662854621e-31,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=n*t-4054566272975207e-29,n=n*t-8151934197605472e-29,n=26335093153082323e-28+n*t,n=n*t-12975133253453532e-27,n=n*t-5415412054294628e-26,n=1.0512122733215323e-9+n*t,n=n*t-4.112633980346984e-9,n=n*t-2.9070369957882005e-8,n=4.2347877827932404e-7+n*t,n=n*t-13654692000834679e-22,n=n*t-13882523362786469e-21,n=.00018673420803405714+n*t,n=n*t-.000740702534166267,n=n*t-.006033670871430149,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=2.2137376921775787e-9,n=9.075656193888539e-8+n*t,n=n*t-2.7517406297064545e-7,n=1.8239629214389228e-8+n*t,n=15027403968909828e-22+n*t,n=n*t-4013867526981546e-21,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=n*t-47318229009055734e-21,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=n*t-.0003550375203628475,n=.0009532893797373805+n*t,n=n*t-.0016882755560235047,n=.002491442096107851+n*t,n=n*t-.003751208507569241,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=n*t-2.555641816996525e-10,n=1.5076572693500548e-9+n*t,n=n*t-3.789465440126737e-9,n=7.61570120807834e-9+n*t,n=n*t-1.496002662714924e-8,n=2.914795345090108e-8+n*t,n=n*t-6.771199775845234e-8,n=2.2900482228026655e-7+n*t,n=n*t-9.9298272942317e-7,n=4526062597223154e-21+n*t,n=n*t-1968177810553167e-20,n=7599527703001776e-20+n*t,n=n*t-.00021503011930044477,n=n*t-.00013871931833623122,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}(2*e-1)}function YO(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>CD(n,i),pdf:o=>qO(o,n,i),cdf:o=>SD(o,n,i),icdf:o=>xD(o,n,i)};return r.mean(e).stdev(t)}function KO(e,t){const n=YO();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(t)):e},bandwidth(o){return arguments.length?(!(t=o)&&e&&(t=WO(e)),r):t},sample:()=>e[~~(ys()*i)]+t*n.sample(),pdf(o){let s=0,a=0;for(;a<i;++a)s+=n.pdf((o-e[a])/t);return s/t/i},cdf(o){let s=0,a=0;for(;a<i;++a)s+=n.cdf((o-e[a])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function XO(e,t){return e=e||0,t=t??1,Math.exp(e+CD()*t)}function QO(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*lX*e)}function JO(e,t,n){return SD(Math.log(e),t,n)}function ZO(e,t,n){return Math.exp(xD(e,t,n))}function uX(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>XO(n,i),pdf:o=>QO(o,n,i),cdf:o=>JO(o,n,i),icdf:o=>ZO(o,n,i)};return r.mean(e).stdev(t)}function cX(e,t){let i,n=0;const o={weights(s){return arguments.length?(i=function r(s){const a=[];let u,l=0;for(u=0;u<n;++u)l+=a[u]=null==s[u]?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=ys();let a=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function eR(e,t){return null==t&&(t=e??1,e=0),e+(t-e)*ys()}function tR(e,t,n){return null==n&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function nR(e,t,n){return null==n&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function iR(e,t,n){return null==n&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function dX(e,t){let n,i;const r={min(o){return arguments.length?(n=o||0,r):n},max(o){return arguments.length?(i=o??1,r):i},sample:()=>eR(n,i),pdf:o=>tR(o,n,i),cdf:o=>nR(o,n,i),icdf:o=>iR(o,n,i)};return null==t&&(t=e??1,e=0),r.min(e).max(t)}function rR(e,t,n){let i=0,r=0;for(const o of e){const s=n(o);null==t(o)||null==s||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function $y(e,t,n,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-o*e,o]}function TD(e,t,n,i){e=e.filter(h=>{let p=t(h),g=n(h);return null!=p&&(p=+p)>=p&&null!=g&&(g=+g)>=g}),i&&e.sort((h,p)=>t(h)-t(p));const r=e.length,o=new Float64Array(r),s=new Float64Array(r);let c,d,f,a=0,l=0,u=0;for(f of e)o[a]=c=+t(f),s[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<r;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function By(e,t,n,i){let o,s,r=-1;for(const a of e)o=t(a),s=n(a),null!=o&&(o=+o)>=o&&null!=s&&(s=+s)>=s&&i(o,s,++r)}function Kg(e,t,n,i,r){let o=0,s=0;return By(e,t,n,(a,l)=>{const u=l-r(a),c=l-i;o+=u*u,s+=c*c}),1-o/s}function oR(e,t,n){let i=0,r=0,o=0,s=0,a=0;By(e,t,n,(c,d)=>{++a,i+=(c-i)/a,r+=(d-r)/a,o+=(c*d-o)/a,s+=(c*c-s)/a});const l=$y(i,r,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Kg(e,t,n,r,u)}}function fX(e,t,n){let i=0,r=0,o=0,s=0,a=0;By(e,t,n,(c,d)=>{++a,c=Math.log(c),i+=(c-i)/a,r+=(d-r)/a,o+=(c*d-o)/a,s+=(c*c-s)/a});const l=$y(i,r,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Kg(e,t,n,r,u)}}function hX(e,t,n){const[i,r,o,s]=TD(e,t,n);let f,h,p,a=0,l=0,u=0,c=0,d=0;By(e,t,n,(y,v)=>{f=i[d++],h=Math.log(v),p=f*v,a+=(v*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[g,m]=$y(l/s,a/s,u/s,c/s),_=y=>Math.exp(g+m*(y-o));return{coef:[Math.exp(g-m*o),m],predict:_,rSquared:Kg(e,t,n,s,_)}}function pX(e,t,n){let i=0,r=0,o=0,s=0,a=0,l=0;By(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,i+=(h-i)/l,r+=(p-r)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(f-a)/l});const u=$y(i,r,o,s),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Kg(e,t,n,a,c)}}function sR(e,t,n){const[i,r,o,s]=TD(e,t,n),a=i.length;let h,p,g,m,l=0,u=0,c=0,d=0,f=0;for(h=0;h<a;)p=i[h],g=r[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,d+=(p*g-d)/h,f+=(m*g-f)/h;const _=c-l*l,y=l*_-u*u,v=(f*l-d*u)/y,b=(d*_-f*u)/y,w=-v*l,D=E=>v*(E-=o)*E+b*E+w+s;return{coef:[w-b*o+v*o*o+s,b-2*v*o,v],predict:D,rSquared:Kg(e,t,n,s,D)}}function gX(e,t,n,i){if(0===i)return rR(e,t,n);if(1===i)return oR(e,t,n);if(2===i)return sR(e,t,n);const[r,o,s,a]=TD(e,t,n),l=r.length,u=[],c=[],d=i+1;let f,h,p,g,m;for(f=0;f<d;++f){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],f)*o[p];for(u.push(g),m=new Float64Array(d),h=0;h<d;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],f+h);m[h]=g}c.push(m)}c.push(u);const _=function pOe(e){const t=e.length-1,n=[];let i,r,o,s,a;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(o=i;o<t+1;++o)a=e[o][i],e[o][i]=e[o][s],e[o][s]=a;for(r=i+1;r<t;++r)for(o=t;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(a=0,o=r+1;o<t;++o)a+=e[o][r]*n[o];n[r]=(e[t][r]-a)/e[r][r]}return n}(c),y=v=>{let b=a+_[0]+_[1]*(v-=s)+_[2]*v*v;for(f=3;f<d;++f)b+=_[f]*Math.pow(v,f);return b};return{coef:hOe(d,_,-s,a),predict:y,rSquared:Kg(e,t,n,a,y)}}function hOe(e,t,n,i){const r=Array(e);let o,s,a,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,r[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,r[o-s]+=a*Math.pow(n,s)*l;return r[0]+=i,r}function yX(e,t,n,i){const[r,o,s,a]=TD(e,t,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=2;){const p=[0,u-1];for(let m=0;m<l;++m){const _=r[m],y=p[0],v=p[1];let w=0,D=0,E=0,C=0,N=0;const k=1/Math.abs(r[_-r[y]>r[v]-_?y:v]-_||1);for(let P=y;P<=v;++P){const x=r[P],S=o[P],T=gOe(Math.abs(_-x)*k)*f[P],I=x*T;w+=T,D+=I,E+=S*T,C+=S*I,N+=x*I}const[R,F]=$y(D/w,E/w,C/w,N/w);c[m]=R+F*_,d[m]=Math.abs(o[m]-c[m]),mOe(r,m+1,p)}if(2===h)break;const g=iX(d);if(Math.abs(g)<1e-12)break;for(let _,y,m=0;m<l;++m)_=d[m]/(6*g),f[m]=_>=1?1e-12:(y=1-_*_)*y}return function _Oe(e,t,n,i){const r=e.length,o=[];let u,s=0,a=0,l=[];for(;s<r;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=i,l=[u,t[s]],o.push(l));return l[1]+=i,o}(r,c,s,a)}function gOe(e){return(e=1-e*e*e)*e*e}function mOe(e,t,n){const i=e[t];let r=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>r&&e[o]-i<=i-e[r];)n[0]=++r,n[1]=o,++o}const yOe=.5*Math.PI/180;function AD(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/i,u=[r(o)],c=[];if(n===i){for(let g=1;g<i;++g)u.push(r(o+g/n*a));return u.push(r(s)),u}c.push(r(s));for(let g=n;--g>0;)c.push(r(o+g/n*a));let d=u[0],f=c[c.length-1];const h=1/a,p=function vOe(e,t){let n=e,i=e;const r=t.length;for(let o=0;o<r;++o){const s=t[o][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}(d[1],c);for(;f;){const g=r((d[0]+f[0])/2);g[0]-d[0]>=l&&bOe(d,g,f,h,p)>yOe?c.push(g):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function bOe(e,t,n,i,r){const o=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-s)}function Fo(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}function aR(e){return e&&e.length?1===e.length?e[0]:function EOe(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}(e):function(){return""}}function vX(e,t,n){return n||e+(t?"_"+t:"")}const lR=()=>{},DOe={init:lR,add:lR,rem:lR,idx:0},Vy={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},jy=Object.keys(Vy).filter(e=>"__count__"!==e);function bX(e,t,n){return Vy[e](n,t)}function wX(e,t){return e.idx-t.idx}function xOe(){this.valid=0,this.missing=0,this._ops.forEach(e=>null==e.aggregate_param?e.init(this):e.init(this,e.aggregate_param))}function TOe(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t))):++this.missing}function AOe(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t))):--this.missing}function NOe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function EX(e,t){const n=t||nr,i=function SOe(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{!i.req||i.req.forEach(r=>{t[r]||n(t[r]=Vy[r]())})};return e.forEach(n),Object.values(t).sort(wX)}(e),r=e.slice().sort(wX);function o(s){this._ops=i,this._out=r,this.cell=s,this.init()}return o.prototype.init=xOe,o.prototype.add=TOe,o.prototype.rem=AOe,o.prototype.set=NOe,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function uR(e){this._key=e?ps(e):Fe,this.reset()}[...jy,"__count__"].forEach(e=>{Vy[e]=function COe(e,t){return(n,i)=>it({name:e,aggregate_param:i,out:n||e},DOe,t)}(e,Vy[e])});const Li=uR.prototype;function jc(e){Y.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function cR(e){Y.call(this,null,e)}function DX(e,t,n){const i=e;let r=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[i(l)]=++a,size:()=>r.length,data:(l,u)=>(a&&(r=r.filter(c=>!s[i(c)]),s={},a=0),u&&l&&r.sort(l),o.length&&(r=l?vY(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function dR(e){Y.call(this,[],e)}function CX(e){Zt.call(this,null,kOe,e)}function kOe(e){return this.value&&!e.modified()?this.value:GI(e.fields,e.orders)}function fR(e){Y.call(this,null,e)}function hR(e){Y.call(this,null,e)}Li.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Li.add=function(e){this._add.push(e)},Li.rem=function(e){this._rem.push(e)},Li.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,o=Array(i-r),s={};let a,l,u;for(a=0;a<r;++a)s[n(t[a])]=1;for(a=0,l=0;a<i;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o},Li.distinct=function(e){const t=this.values(),n={};let o,i=t.length,r=0;for(;--i>=0;)o=e(t[i])+"",Ce(n,o)||(n[o]=1,++r);return r},Li.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=hY(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Li.argmin=function(e){return this.extent(e)[0]||{}},Li.argmax=function(e){return this.extent(e)[1]||{}},Li.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},Li.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},Li.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=GO(this.values(),e),this._get=e),this._q},Li.q1=function(e){return this.quartile(e)[0]},Li.q2=function(e){return this.quartile(e)[1]},Li.q3=function(e){return this.quartile(e)[2]},Li.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=sX(this.values(),1e3,.05,e),this._get=e),this._ci},Li.ci0=function(e){return this.ci(e)[0]},Li.ci1=function(e){return this.ci(e)[1]},jc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:jy},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},pe(jc,Y,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function o(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<r;++u)i[u][d=c[n[u]]]=d}o(e._prev),o(t),function s(a,l,u){const c=n[u],d=i[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<r?s(h,l,u):t[h]||e.cell(h,l)}}("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(y){const v=ve(tr(y)),b=v.length;let D,w=0;for(;w<b;++w)i[D=v[w]]||(i[D]=1,t.push(D))}this._dims=ve(e.groupby),this._dnames=this._dims.map(y=>{const v=On(y);return r(y),n.push(v),v}),this.cellkey=e.key?e.key:aR(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let d,f,h,p,g,m,_;for(u!==s.length&&Q("Unmatched number of fields and aggregate ops."),_=0;_<u;++_)d=o[_],f=s[_],h=a[_]||null,null==d&&"count"!==f&&Q("Null aggregate field specified."),g=On(d),m=vX(f,g,l[_]),n.push(m),"count"!==f?(p=c[g],p||(r(d),p=c[g]=[],p.field=d,this._measures.push(p)),"count"!==f&&(this._countOnly=!1),p.push(bX(f,h,m))):this._counts.push(m);return this._measures=this._measures.map(y=>EX(y,y.field)),Object.create(null)},cellkey:aR(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let o=0;o<r;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new uR),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,o={};for(let s=0;s<r;++s)o[n[s]]=i[s](e);return t?jK(t.tuple,o):It(o)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,d;if(i)for(u in i)l=i[u],(!r||l.num)&&s.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(0===l.num&&r?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}}),cR.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},pe(cR,Y,{transform(e,t){const n=!1!==e.interval,i=this._bins(e),r=i.start,o=i.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return u=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(tr(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=i(c);c[a]=d,c[l]=null==d?null:r+o*(1+(d-r)/o)}:c=>c[a]=i(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=oX(e),i=n.step;let s,a,r=n.start,o=r+Math.ceil((n.stop-r)/i)*i;null!=(s=e.anchor)&&(a=s-(r+i*Math.floor((s-r)/i)),r+=a,o+=a);const l=function(u){let c=ir(t(u));return null==c?null:c<r?-1/0:c>o?1/0:(c=Math.max(r,Math.min(c,o-i)),r+i*Math.floor(1e-14+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Jr(l,tr(t),e.name||"bin_"+On(t))}}),dR.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},pe(dR,Y,{transform(e,t){const n=t.fork(t.ALL),i=DX(Fe,this.value,n.materialize(n.ADD).add),r=e.sort,o=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(jf(r),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),pe(CX,Zt),fR.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},pe(fR,Y,{transform(e,t){const n=d=>f=>{for(var p,h=function IOe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(a(f),e.case,o)||[],g=0,m=h.length;g<m;++g)s.test(p=h[g])||d(p)},i=this._parameterCheck(e,t),r=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>r[d]=1+(r[d]||0)),c=n(d=>r[d]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=i[a],u=n[a]||0,!l&&u?(i[a]=l=It({}),l[r]=a,l[o]=u,s.add.push(l)):0===u?(l&&s.rem.push(l),n[a]=null,i[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}}),hR.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},pe(hR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=function OOe(e,t,n,i){for(var l,u,r=[],o={},s=e.length,a=0;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],i(o)&&(r.push(It(o)),(o={})[t]=u);return r}(a,r,o,e.filter||gs)):n.mod=a,n.source=this.value,n.modifies(i)}});const SX={kde:KO,mixture:cX,normal:YO,lognormal:uX,uniform:dX},xX="function";function TX(e,t){const n=e[xX];Ce(SX,n)||Q("Unknown distribution function: "+n);const i=SX[n]();for(const r in e)"field"===r?i.data((e.from||t()).map(e[r])):"distributions"===r?i[r](e[r].map(o=>TX(o,t))):typeof i[r]===xX&&i[r](e[r]);return i}function pR(e){Y.call(this,null,e)}const AX=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function NX(e,t){return e?e.map((n,i)=>t[i]||On(n)):null}function gR(e,t,n){const i=[],r=d=>d(l);let o,s,a,l,u,c;if(null==t)i.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(r),c=o[u],c||(o[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}function mR(e){Y.call(this,null,e)}function kX(e){Zt.call(this,null,BOe,e),this.modified(!0)}function BOe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Jr(n=>t(n,e),tr(t),On(t))}function _R(e){Y.call(this,[void 0,void 0],e)}function yR(e,t){Zt.call(this,e),this.parent=t,this.count=0}function ND(e){Y.call(this,{},e),this._keys=Og();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}function IX(e){Zt.call(this,null,VOe,e)}function VOe(e){return this.value&&!e.modified()?this.value:J(e.name)?ve(e.name).map(t=>ps(t)):ps(e.name,e.as)}function vR(e){Y.call(this,Og(),e)}function bR(e){Y.call(this,[],e)}function wR(e){Y.call(this,[],e)}function ER(e){Y.call(this,null,e)}function OX(e){Y.call(this,[],e)}pR.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:AX.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:AX},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},pe(pR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=TX(e.distribution,function LOe(e){return()=>e.materialize(e.SOURCE).source}(t)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";"pdf"!==s&&"cdf"!==s&&Q("Invalid density method: "+s),!e.extent&&!i.data&&Q("Missing density extent parameter."),s=i[s];const a=e.as||["value","density"],u=AD(s,e.extent||tl(i.data()),r,o).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],It(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),mR.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},pe(mR,Y,{transform(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,i=gR(t.source,e.groupby,nr),r=e.smooth||!1,o=e.field,s=e.step||((e,t)=>yy(tl(e,t))/30)(n,o),a=jf((p,g)=>o(p)-o(g)),l=e.as||"bin",u=i.length;let h,c=1/0,d=-1/0,f=0;for(;f<u;++f){const p=i[f].sort(a);h=-1;for(const g of aX(p,s,r,o))g<c&&(c=g),g>d&&(d=g),p[++h][l]=g}return this.value={start:c,stop:d,step:s},t.reflow(!0).modifies(l)}}),pe(kX,Zt),_R.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},pe(_R,Y,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let o=n[0],s=n[1];if((r||null==o)&&(o=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,a=>{const l=ir(i(a));null!=l&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=On(i);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}}),pe(yR,Zt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),pe(ND,Y,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let s,a,o=Ce(r,e)&&r[e];return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=i||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new yR(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&null!=t[r];++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Fe(l),c=o.get(u);void 0!==c&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);o.set(Fe(l),u),a(u).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=Fe(l),c=o.get(u),d=i(l);c===d?a(d).mod(l):(o.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(Fe(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=Fe(l),c=o.get(u),d=i(l);c!==d&&(o.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),pe(IX,Zt),vR.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},pe(vR,Y,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),o=r.add,s=r.rem,a=r.mod,l=e.expr;let u=!0;function c(d){const f=Fe(d),h=l(d,e),p=i.get(f);h&&p?(i.delete(f),o.push(d)):h||p?u&&h&&!p&&a.push(d):(i.set(f,1),s.push(d))}return t.visit(t.REM,d=>{const f=Fe(d);i.has(f)?i.delete(f):s.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):i.set(Fe(d),1)}),t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}}),bR.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},pe(bR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=NX(i,e.as||[]),o=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=i.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let d,f,h,c=0;for(;c<u;++c){for(f=RO(a),d=0;d<s;++d)f[r[d]]=null==(h=l[d][c])?null:h;o&&(f[o]=c),n.add.push(f)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(r)}}),wR.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},pe(wR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(On),o=e.as||["key","value"],s=o[0],a=o[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let d,c=0;c<l;++c)d=RO(u),d[s]=r[c],d[a]=i[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}}),ER.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},pe(ER,Y,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),o=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,s=>s[i]=n(s,e))}}),pe(OX,Y,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let s,a,l,r=this.value,o=e.size-r.length;if(o>0){for(s=[];--o>=0;)s.push(l=It(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=r.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,r=r.slice(-o);return n.source=this.value=r,n}});const MD={value:"value",median:iX,mean:function wOe(e,t){let n=0,i=0;if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n},min:UO,max:Hf},jOe=[];function DR(e){Y.call(this,[],e)}function CR(e){jc.call(this,e)}function SR(e){Y.call(this,null,e)}function RX(e){Zt.call(this,null,GOe,e)}function GOe(e){return this.value&&!e.modified()?this.value:qI(e.fields,e.flat)}function FX(e){Y.call(this,[],e),this._pending=null}function xR(e,t,n){n.forEach(It);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function TR(e){Y.call(this,{},e)}function PX(e){Zt.call(this,null,qOe,e)}function qOe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let o,s,i=1/0,r=-1/0;for(o=0;o<n;++o)s=t[o],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function LX(e){Zt.call(this,null,YOe,e)}function YOe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function $X(e){Y.call(this,null,e)}function AR(e){jc.call(this,e)}function BX(e){ND.call(this,e)}function NR(e){Y.call(this,null,e)}function VX(e){Y.call(this,null,e)}function MR(e){Y.call(this,null,e)}function jX(e){Y.call(this,null,e)}function kR(e){Y.call(this,[],e),this.count=0}function IR(e){Y.call(this,null,e)}function UX(e){Y.call(this,null,e),this.modified(!0)}function OR(e){Y.call(this,null,e)}DR.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},pe(DR,Y,{transform(e,t){var f,h,p,g,m,_,y,v,b,w,n=t.fork(t.ALL),i=function UOe(e){var n,t=e.method||MD.value;if(null!=MD[t])return t===MD.value?(n=void 0!==e.value?e.value:0,()=>n):MD[t];Q("Unrecognized imputation method: "+t)}(e),r=function HOe(e){const t=e.field;return n=>n?t(n):NaN}(e),o=On(e.field),s=On(e.key),a=(e.groupby||[]).map(On),l=function zOe(e,t,n,i){var u,c,d,f,h,p,g,m,r=_=>_(m),o=[],s=i?i.slice():[],a={},l={};for(s.forEach((_,y)=>a[_]=y+1),f=0,g=e.length;f<g;++f)p=n(m=e[f]),h=a[p]||(a[p]=s.push(p)),(d=l[c=(u=t?t.map(r):jOe)+""])||(d=l[c]=[],o.push(d),d.values=u),d[h-1]=m;return o.domain=s,o}(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length;for(m=0,v=l.length;m<v;++m)for(p=(f=l[m]).values,h=NaN,y=0;y<d;++y)if(null==f[y]){for(g=l.domain[y],w={_impute:!0},_=0,b=p.length;_<b;++_)w[a[_]]=p[_];w[s]=g,w[o]=Number.isNaN(h)?h=i(f,r):h,u.push(It(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}}),CR.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:jy},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},pe(CR,jc,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(r=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{it(o,r[n.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),SR.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},pe(SR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=gR(i,e.groupby,e.field),o=(e.groupby||[]).map(On),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;"pdf"!==a&&"cdf"!==a&&Q("Invalid density method: "+a),"shared"===e.resolve&&(c||(c=tl(i,e.field)),d=f=e.steps||f),r.forEach(h=>{const p=KO(h,s)[a],g=e.counts?h.length:1;AD(p,c||tl(h),d,f).forEach(_=>{const y={};for(let v=0;v<o.length;++v)y[o[v]]=h.dims[v];y[l[0]]=_[0],y[l[1]]=_[1]*g,u.push(It(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),pe(RX,Zt),pe(FX,Y,{transform(e,t){const n=t.dataflow;return this._pending?xR(this,t,this._pending):function WOe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?xR(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=ve(r.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(i=>xR(this,t,ve(i.data)))}}),TR.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},pe(TR,Y,{transform(e,t){const n=e.fields,i=e.index,r=e.values,o=e.default??null,s=e.modified(),a=n.length;let d,f,h,l=s?t.SOURCE:t.ADD,u=t,c=e.as;return r?(f=r.length,a>1&&!c&&Q('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&Q('The "as" parameter has too few output field names.'),c=c||r.map(On),d=function(p){for(var _,y,g=0,m=0;g<a;++g)if(null==(y=i.get(n[g](p))))for(_=0;_<f;++_,++m)p[c[m]]=o;else for(_=0;_<f;++_,++m)p[c[m]]=r[_](y)}):(c||Q("Missing output field names."),d=function(p){for(var m,g=0;g<a;++g)m=i.get(n[g](p)),p[c[g]]=m??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}}),pe(PX,Zt),pe(LX,Zt),pe($X,Y,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),AR.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:jy,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},pe(AR,jc,{_transform:jc.prototype.transform,transform(e,t){return this._transform(function KOe(e,t){const n=e.field,i=e.value,r=("count"===e.op?"__count__":e.op)||"sum",o=tr(n).concat(tr(i)),s=function QOe(e,t,n){const i={},r=[];return n.visit(n.SOURCE,o=>{const s=e(o);i[s]||(i[s]=1,r.push(s))}),r.sort(QE),t?r.slice(0,t):r}(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(a=>function XOe(e,t,n,i){return Jr(r=>t(r)===e?n(r):NaN,i,e+"")}(a,n,i,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}(e,t),t)}}),pe(BX,ND,{transform(e,t){const n=e.subflow,i=e.field,r=o=>this.subflow(Fe(o),n,t,o);return(e.modified("field")||i&&t.modified(tr(i)))&&Q("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{const s=r(o);i(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=r(o);i(o).forEach(a=>s.add(It(a)))}),t.visit(t.REM,o=>{const s=r(o);i(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>r(o).mod(o)),t.visit(t.ADD,o=>r(o).add(o)),t.visit(t.REM,o=>r(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}}),NR.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},pe(NR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=NX(e.fields,e.as||[]),o=i?(a,l)=>function JOe(e,t,n,i){for(let r=0,o=n.length;r<o;++r)t[i[r]]=n[r](e);return t}(a,l,i,r):_D;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=Fe(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,It({}));s[Fe(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Fe(a)]))}),n}}),pe(VX,Y,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),MR.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},pe(MR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const o=gR(t.materialize(t.SOURCE).source,e.groupby,e.field),s=(e.groupby||[]).map(On),a=[],l=e.step||.01,u=e.probs||Fo(l/2,1-1e-14,l),c=u.length;return o.forEach(d=>{const f=zO(d,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=d.dims[g];p[i[0]]=u[h],p[i[1]]=f[h],a.push(It(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),pe(jX,Y,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const o=Fe(r);n.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,r=>{const o=RO(r);i[Fe(r)]=o,n.add.push(o)}),t.visit(t.MOD,r=>{const o=i[Fe(r)];for(const s in r)o[s]=r[s],n.modifies(s);n.mod.push(o)})),n}}),kR.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},pe(kR,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((c,d)=>(c[Fe(d)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let d,f;s.length<r?s.push(c):(f=~~((a+1)*ys()),f<s.length&&f>=l&&(d=s[f],o[Fe(d)]&&n.rem.push(d),s[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Fe(c);o[d]&&(o[d]=-1,n.rem.push(c)),--a}),s=s.filter(c=>-1!==o[Fe(c)])),(t.rem.length||i)&&s.length<r&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[Fe(c)]||u(c)}),l=-1),i&&s.length>r){const c=s.length-r;for(let d=0;d<c;++d)o[Fe(s[d])]=-1,n.rem.push(s[d]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Fe(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[Fe(c)])),this.count=a,this.value=n.source=s,n}}),IR.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},pe(IR,Y,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Fo(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,It(o)}),n.add=t.add.concat(this.value),n}}),pe(UX,Y,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const HX=["unit0","unit1"];function zX(e){Y.call(this,Og(),e)}function GX(e){Y.call(this,null,e)}OR.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:lO,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:HX}]},pe(OR,Y,{transform(e,t){const n=e.field,i=!1!==e.interval,r="utc"===e.timezone,o=this._floor(e,t),s=(r?zg:Hg)(o.unit).offset,a=e.as||HX,l=a[0],u=a[1],c=o.step;let d=o.start||1/0,f=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(tr(n)))&&(h=(t=t.reflow(!0)).SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const g=n(p);let m,_;null==g?(p[l]=null,i&&(p[u]=null)):(p[l]=m=_=o(g),i&&(p[u]=_=s(m,c)),m<d&&(d=m),_>f&&(f=_))}),o.start=d,o.stop=f,t.modifies(i?a:l)},_floor(e,t){const n="utc"===e.timezone,{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:oK({extent:e.extent||tl(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=cO(i),s=this.value||{},a=(n?YY:qY)(o,r);return a.unit=mt(o),a.units=o,a.step=r,a.start=s.start,a.stop=s.stop,this.value=a}}),pe(zX,Y,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,o=a=>r.set(i(a),a);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>r.delete(i(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}}),pe(GX,Y,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(jf(e.sort)):t.source).map(e.field))}});const Uy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=Uy.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||Q("ntile num must be greater than zero.");const n=Uy.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||Q("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return null!=i?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=function tRe(e,t,n){for(let i=t.length;n<i;++n)if(null!=e(t[n]))return n;return-1}(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}},nRe=Object.keys(Uy);function WX(e){const t=ve(e.ops),n=ve(e.fields),i=ve(e.params),r=ve(e.aggregate_params),o=ve(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],d=[];let f=!0;function h(p){ve(tr(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],_=i[g],y=r[g]||null,v=On(m),b=vX(p,v,o[g]);if(h(m),s.push(b),Ce(Uy,p))a.push(function eRe(e,t,n,i){const r=Uy[e](t,n);return{init:r.init||kc,update:function(o,s){s[i]=r.next(o)}}}(p,m,_,b));else{if(null==m&&"count"!==p&&Q("Null aggregate field specified."),"count"===p)return void c.push(b);f=!1;let w=u[v];w||(w=u[v]=[],w.field=m,d.push(w)),w.push(bX(p,y,b))}}),(c.length||d.length)&&(this.cell=function iRe(e,t,n){e=e.map(l=>EX(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,o=i.agg=Array(r),s=0;s<r;++s)o[s]=new e[s](i);if(i.store)var a=i.data=new uR;return i.add=function(l){if(i.num+=1,!n){a&&a.add(l);for(let u=0;u<r;++u)o[u].add(o[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){a&&a.rem(l);for(let u=0;u<r;++u)o[u].rem(o[u].get(l),l)}},i.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<r;++l)o[l].init()},i}(d,c,f)),this.inputs=Object.keys(l)}const qX=WX.prototype;function RR(e){Y.call(this,{},e),this._mlen=0,this._mods=[]}function rRe(e,t,n,i){const r=i.sort,o=r&&!i.ignorePeers,s=i.frame||[null,0],a=e.data(n),l=a.length,u=o?jg(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||rr(-1)};t.init();for(let d=0;d<l;++d)oRe(c,s,d,l),o&&sRe(c,u),t.update(c,a[d])}function oRe(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function sRe(e,t){const n=e.i0,i=e.i1-1,r=e.compare,o=e.data,s=o.length-1;n>0&&!r(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),i<s&&!r(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}function kD(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ID(e){this._context=e}function Uc(){}function YX(e){this._context=e}function KX(e){this._context=e}function XX(e,t){this._basis=new ID(e),this._beta=t}qX.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},qX.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,o=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<o;++s)i[s].update(e,t)},RR.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:nRe.concat(jy)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},pe(RR,Y,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=jf(e.sort),r=aR(e.groupby),o=a=>this.group(r(a));let s=this.state;(!s||n)&&(s=this.state=new WX(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)rRe(this._mods[a],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=DX(Fe),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),ID.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kD(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},YX.prototype={areaStart:Uc,areaEnd:Uc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:kD(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},KX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:kD(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},XX.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var l,i=e[0],r=t[0],o=e[n]-i,s=t[n]-r,a=-1;++a<=n;)this._basis.point(this._beta*e[a]+(1-this._beta)*(i+(l=a/n)*o),this._beta*t[a]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const cRe=function e(t){function n(i){return 1===t?new ID(i):new XX(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function OD(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function FR(e,t){this._context=e,this._k=(1-t)/6}FR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:OD(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:OD(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dRe=function e(t){function n(i){return new FR(i,t)}return n.tension=function(i){return e(+i)},n}(0);function PR(e,t){this._context=e,this._k=(1-t)/6}PR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:OD(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fRe=function e(t){function n(i){return new PR(i,t)}return n.tension=function(i){return e(+i)},n}(0);function LR(e,t){this._context=e,this._k=(1-t)/6}LR.prototype={areaStart:Uc,areaEnd:Uc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:OD(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hRe=function e(t){function n(i){return new LR(i,t)}return n.tension=function(i){return e(+i)},n}(0),QX=Math.abs,ar=Math.atan2,Cu=Math.cos,pRe=Math.max,Xg=Math.min,no=Math.sin,cn=Math.sqrt,lr=1e-12,Hc=Math.PI,RD=Hc/2,Hy=2*Hc;function gRe(e){return e>1?0:e<-1?Hc:Math.acos(e)}function JX(e){return e>=1?RD:e<=-1?-RD:Math.asin(e)}function $R(e,t,n){var i=e._x1,r=e._y1,o=e._x2,s=e._y2;if(e._l01_a>lr){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>lr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,o,s,e._x2,e._y2)}function ZX(e,t){this._context=e,this._alpha=t}ZX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:$R(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mRe=function e(t){function n(i){return t?new ZX(i,t):new FR(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function eQ(e,t){this._context=e,this._alpha=t}eQ.prototype={areaStart:Uc,areaEnd:Uc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$R(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _Re=function e(t){function n(i){return t?new eQ(i,t):new LR(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function tQ(e,t){this._context=e,this._alpha=t}tQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$R(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yRe=function e(t){function n(i){return t?new tQ(i,t):new PR(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function nQ(e){this._context=e}function BR(e){return new nQ(e)}function iQ(e){this._context=e}function rQ(e){return e<0?-1:1}function oQ(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(rQ(o)+rQ(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function sQ(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function VR(e,t,n){var i=e._x0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,e._y0+a*t,o-a,s-a*n,o,s)}function FD(e){this._context=e}function aQ(e){this._context=new lQ(e)}function lQ(e){this._context=e}function uQ(e){this._context=e}function cQ(e){var t,i,n=e.length-1,r=new Array(n),o=new Array(n),s=new Array(n);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)o[t]-=i=r[t]/o[t-1],s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function PD(e,t){this._context=e,this._t=t}function Ft(e){return function(){return e}}nQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},iQ.prototype={areaStart:Uc,areaEnd:Uc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},FD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:VR(this,this._t0,sQ(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,VR(this,sQ(this,n=oQ(this,e,t)),n);break;default:VR(this,this._t0,n=oQ(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(aQ.prototype=Object.create(FD.prototype)).point=function(e,t){FD.prototype.point.call(this,t,e)},lQ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},uQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=cQ(e),r=cQ(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},PD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const jR=Math.PI,UR=2*jR,zf=1e-6,xRe=UR-zf;function dQ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class LD{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?dQ:function TRe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return dQ;const n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,(o=+o)<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-t,u=r-n,c=s-t,d=a-n,f=c*c+d*d;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(f>zf)if(Math.abs(d*l-u*c)>zf&&o){let h=i-s,p=r-a,g=l*l+u*u,m=h*h+p*p,_=Math.sqrt(g),y=Math.sqrt(f),v=o*Math.tan((jR-Math.acos((g+f-m)/(2*_*y)))/2),b=v/y,w=v/_;Math.abs(b-1)>zf&&this._append`L${t+b*c},${n+b*d}`,this._append`A${o},${o},0,0,${+(d*h>c*p)},${this._x1=t+w*l},${this._y1=n+w*u}`}else this._append`L${this._x1=t},${this._y1=n}`}arc(t,n,i,r,o,s){if(t=+t,n=+n,s=!!s,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),u=t+a,c=n+l,d=1^s,f=s?r-o:o-r;null===this._x1?this._append`M${u},${c}`:(Math.abs(this._x1-u)>zf||Math.abs(this._y1-c)>zf)&&this._append`L${u},${c}`,i&&(f<0&&(f=f%UR+UR),f>xRe?this._append`A${i},${i},0,1,${d},${t-a},${n-l}A${i},${i},0,1,${d},${this._x1=u},${this._y1=c}`:f>zf&&this._append`A${i},${i},0,${+(f>=jR)},${d},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function $D(){return new LD}function BD(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new LD(t)}function ARe(e){return e.innerRadius}function NRe(e){return e.outerRadius}function MRe(e){return e.startAngle}function kRe(e){return e.endAngle}function IRe(e){return e&&e.padAngle}function ORe(e,t,n,i,r,o,s,a){var l=n-e,u=i-t,c=s-r,d=a-o,f=d*l-c*u;if(!(f*f<lr))return[e+(f=(c*(t-o)-d*(e-r))/f)*l,t+f*u]}function VD(e,t,n,i,r,o,s){var a=e-n,l=t-i,u=(s?o:-o)/cn(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,g=i+d,m=(f+p)/2,_=(h+g)/2,y=p-f,v=g-h,b=y*y+v*v,w=r-o,D=f*g-p*h,E=(v<0?-1:1)*cn(pRe(0,w*w*b-D*D)),C=(D*v-y*E)/b,N=(-D*y-v*E)/b,k=(D*v+y*E)/b,R=(-D*y+v*E)/b,F=C-m,P=N-_,x=k-m,S=R-_;return F*F+P*P>x*x+S*S&&(C=k,N=R),{cx:C,cy:N,x01:-c,y01:-d,x11:C*(r/w-1),y11:N*(r/w-1)}}function fQ(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function hQ(e){return e[0]}function pQ(e){return e[1]}function gQ(e,t){var n=Ft(!0),i=null,r=BR,o=null,s=BD(a);function a(l){var u,d,h,c=(l=fQ(l)).length,f=!1;for(null==i&&(o=r(h=s())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(d,u,l),+t(d,u,l));if(h)return o=null,h+""||null}return e="function"==typeof e?e:void 0===e?hQ:Ft(e),t="function"==typeof t?t:void 0===t?pQ:Ft(t),a.x=function(l){return arguments.length?(e="function"==typeof l?l:Ft(+l),a):e},a.y=function(l){return arguments.length?(t="function"==typeof l?l:Ft(+l),a):t},a.defined=function(l){return arguments.length?(n="function"==typeof l?l:Ft(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,null!=i&&(o=r(i)),a):r},a.context=function(l){return arguments.length?(null==l?i=o=null:o=r(i=l),a):i},a}function mQ(e,t,n){var i=null,r=Ft(!0),o=null,s=BR,a=null,l=BD(u);function u(d){var f,h,p,m,y,g=(d=fQ(d)).length,_=!1,v=new Array(g),b=new Array(g);for(null==o&&(a=s(y=l())),f=0;f<=g;++f){if(!(f<g&&r(m=d[f],f,d))===_)if(_=!_)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(v[p],b[p]);a.lineEnd(),a.areaEnd()}_&&(v[f]=+e(m,f,d),b[f]=+t(m,f,d),a.point(i?+i(m,f,d):v[f],n?+n(m,f,d):b[f]))}if(y)return a=null,y+""||null}function c(){return gQ().defined(r).curve(s).context(o)}return e="function"==typeof e?e:void 0===e?hQ:Ft(+e),t="function"==typeof t?t:Ft(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?pQ:Ft(+n),u.x=function(d){return arguments.length?(e="function"==typeof d?d:Ft(+d),i=null,u):e},u.x0=function(d){return arguments.length?(e="function"==typeof d?d:Ft(+d),u):e},u.x1=function(d){return arguments.length?(i=null==d?null:"function"==typeof d?d:Ft(+d),u):i},u.y=function(d){return arguments.length?(t="function"==typeof d?d:Ft(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t="function"==typeof d?d:Ft(+d),u):t},u.y1=function(d){return arguments.length?(n=null==d?null:"function"==typeof d?d:Ft(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(i).y(t)},u.defined=function(d){return arguments.length?(r="function"==typeof d?d:Ft(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,null!=o&&(a=s(o)),u):s},u.context=function(d){return arguments.length?(null==d?o=a=null:a=s(o=d),u):o},u}$D.prototype=LD.prototype,cn(3);const HR={draw(e,t){const n=cn(t/Hc);e.moveTo(n,0),e.arc(0,0,n,0,Hy)}};cn(1/3),no(Hc/10),no(7*Hc/10);function zc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}no(Hy/10),Cu(Hy/10),cn(3),cn(3),cn(3),cn(12);const vQ=jg(Eu),jD=vQ.right,nFe=vQ.left,zy=(jg(tX),jD);function Qg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Gy(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Gc(){}var Jg=1/.7,Zg="\\s*([+-]?\\d+)\\s*",Wy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iFe=/^#([0-9a-f]{3,8})$/,rFe=new RegExp(`^rgb\\(${Zg},${Zg},${Zg}\\)$`),oFe=new RegExp(`^rgb\\(${sl},${sl},${sl}\\)$`),sFe=new RegExp(`^rgba\\(${Zg},${Zg},${Zg},${Wy}\\)$`),aFe=new RegExp(`^rgba\\(${sl},${sl},${sl},${Wy}\\)$`),lFe=new RegExp(`^hsl\\(${Wy},${sl},${sl}\\)$`),uFe=new RegExp(`^hsla\\(${Wy},${sl},${sl},${Wy}\\)$`),bQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wQ(){return this.rgb().formatHex()}function EQ(){return this.rgb().formatRgb()}function qy(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iFe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?DQ(t):3===n?new Ei(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?UD(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?UD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=rFe.exec(e))?new Ei(t[1],t[2],t[3],1):(t=oFe.exec(e))?new Ei(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=sFe.exec(e))?UD(t[1],t[2],t[3],t[4]):(t=aFe.exec(e))?UD(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=lFe.exec(e))?xQ(t[1],t[2]/100,t[3]/100,1):(t=uFe.exec(e))?xQ(t[1],t[2]/100,t[3]/100,t[4]):bQ.hasOwnProperty(e)?DQ(bQ[e]):"transparent"===e?new Ei(NaN,NaN,NaN,0):null}function DQ(e){return new Ei(e>>16&255,e>>8&255,255&e,1)}function UD(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ei(e,t,n,i)}function WR(e){return e instanceof Gc||(e=qy(e)),e?new Ei((e=e.rgb()).r,e.g,e.b,e.opacity):new Ei}function Wc(e,t,n,i){return 1===arguments.length?WR(e):new Ei(e,t,n,i??1)}function Ei(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function CQ(){return`#${qf(this.r)}${qf(this.g)}${qf(this.b)}`}function SQ(){const e=HD(this.opacity);return`${1===e?"rgb(":"rgba("}${Wf(this.r)}, ${Wf(this.g)}, ${Wf(this.b)}${1===e?")":`, ${e})`}`}function HD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qf(e){return((e=Wf(e))<16?"0":"")+e.toString(16)}function xQ(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new aa(e,t,n,i)}function TQ(e){if(e instanceof aa)return new aa(e.h,e.s,e.l,e.opacity);if(e instanceof Gc||(e=qy(e)),!e)return new aa;if(e instanceof aa)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new aa(s,a,l,e.opacity)}function zD(e,t,n,i){return 1===arguments.length?TQ(e):new aa(e,t,n,i??1)}function aa(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function AQ(e){return(e=(e||0)%360)<0?e+360:e}function GD(e){return Math.max(0,Math.min(1,e||0))}function qR(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function NQ(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}function MQ(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1];return NQ((n-i/t)*t,i>0?e[i-1]:2*r-o,r,o,i<t-1?e[i+2]:2*o-r)}}function kQ(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t);return NQ((n-i/t)*t,e[(i+t-1)%t],e[i%t],e[(i+1)%t],e[(i+2)%t])}}Qg(Gc,qy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wQ,formatHex:wQ,formatHex8:function cFe(){return this.rgb().formatHex8()},formatHsl:function dFe(){return TQ(this).formatHsl()},formatRgb:EQ,toString:EQ}),Qg(Ei,Wc,Gy(Gc,{brighter(e){return e=null==e?Jg:Math.pow(Jg,e),new Ei(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Ei(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ei(Wf(this.r),Wf(this.g),Wf(this.b),HD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CQ,formatHex:CQ,formatHex8:function fFe(){return`#${qf(this.r)}${qf(this.g)}${qf(this.b)}${qf(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:SQ,toString:SQ})),Qg(aa,zD,Gy(Gc,{brighter(e){return e=null==e?Jg:Math.pow(Jg,e),new aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ei(qR(e>=240?e-240:e+120,r,i),qR(e,r,i),qR(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new aa(AQ(this.h),GD(this.s),GD(this.l),HD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=HD(this.opacity);return`${1===e?"hsl(":"hsla("}${AQ(this.h)}, ${100*GD(this.s)}%, ${100*GD(this.l)}%${1===e?")":`, ${e})`}`}}));const WD=e=>()=>e;function IQ(e,t){return function(n){return e+n*t}}function qD(e,t){var n=t-e;return n?IQ(e,n>180||n<-180?n-360*Math.round(n/360):n):WD(isNaN(e)?t:e)}function Di(e,t){var n=t-e;return n?IQ(e,n):WD(isNaN(e)?t:e)}const YR=function e(t){var n=function pFe(e){return 1==(e=+e)?Di:function(t,n){return n-t?function hFe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):WD(isNaN(t)?n:t)}}(t);function i(r,o){var s=n((r=Wc(r)).r,(o=Wc(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),u=Di(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function OQ(e){return function(t){var s,a,n=t.length,i=new Array(n),r=new Array(n),o=new Array(n);for(s=0;s<n;++s)a=Wc(t[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=e(i),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var gFe=OQ(MQ),mFe=OQ(kQ);function KR(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function RQ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _Fe(e,t){return(RQ(t)?KR:FQ)(e,t)}function FQ(e,t){var s,n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n);for(s=0;s<i;++s)r[s]=qc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function PQ(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function la(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function LQ(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=qc(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var XR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QR=new RegExp(XR.source,"g");function $Q(e,t){var i,r,o,n=XR.lastIndex=QR.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(i=XR.exec(e))&&(r=QR.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:la(i,r)})),n=QR.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function vFe(e){return function(t){return e(t)+""}}(l[0].x):function yFe(e){return function(){return e}}(t):(t=l.length,function(u){for(var d,c=0;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function qc(e,t){var i,n=typeof t;return null==t||"boolean"===n?WD(t):("number"===n?la:"string"===n?(i=qy(t))?(t=i,YR):$Q:t instanceof qy?YR:t instanceof Date?PQ:RQ(t)?KR:Array.isArray(t)?FQ:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?LQ:la)(e,t)}function Yy(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function JR(e){return+e}var BQ=[0,1];function io(e){return e}function ZR(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function bFe(e){return function(){return e}}(isNaN(t)?NaN:.5)}function EFe(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=ZR(r,i),o=n(s,o)):(i=ZR(i,r),o=n(o,s)),function(a){return o(i(a))}}function DFe(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=ZR(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=zy(e,a,1,i)-1;return o[l](r[l](a))}}function Ky(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function YD(){var i,r,o,a,l,u,e=BQ,t=BQ,n=qc,s=io;function c(){var f=Math.min(e.length,t.length);return s!==io&&(s=function wFe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}(e[0],e[f-1])),a=f>2?DFe:EFe,l=u=null,d}function d(f){return null==f||isNaN(f=+f)?o:(l||(l=a(e.map(i),t,n)))(i(s(f)))}return d.invert=function(f){return s(r((u||(u=a(t,e.map(i),la)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,JR),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=Yy,c()},d.clamp=function(f){return arguments.length?(s=!!f||io,c()):s!==io},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return i=f,r=h,c()}}function VQ(){return YD()(io,io)}function al(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Yc(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function jQ(e,t,n,i){var o,r=Pc(e,t,n);switch((i=Lf(i??",f")).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null==i.precision&&!isNaN(o=TY(r,s))&&(i.precision=o),iO(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(o=AY(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(o=NY(r))&&(i.precision=o-2*("%"===i.type))}return nD(i)}function Yf(e){var t=e.domain;return e.ticks=function(n){var i=t();return eO(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return jQ(r[0],r[r.length-1],n??10,i)},e.nice=function(n){null==n&&(n=10);var l,u,i=t(),r=0,o=i.length-1,s=i[r],a=i[o],c=10;for(a<s&&(u=s,s=a,a=u,u=r,r=o,o=u);c-- >0;){if((u=tO(s,a,n))===l)return i[r]=s,i[o]=a,t(i);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else{if(!(u<0))break;s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u}l=u}return e},e}function zQ(e,t){var s,n=0,i=(e=e.slice()).length-1,r=e[n],o=e[i];return o<r&&(s=n,n=i,i=s,s=r,r=o,o=s),e[n]=t.floor(r),e[i]=t.ceil(o),e}function GQ(e){return Math.log(e)}function WQ(e){return Math.exp(e)}function CFe(e){return-Math.log(-e)}function SFe(e){return-Math.exp(-e)}function xFe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qQ(e){return(t,n)=>-e(-t,n)}function eF(e){const t=e(GQ,WQ),n=t.domain;let r,o,i=10;function s(){return r=function AFe(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),o=function TFe(e){return 10===e?xFe:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=qQ(r),o=qQ(o),e(CFe,SFe)):e(GQ,WQ),t}return t.base=function(a){return arguments.length?(i=+a,s()):i},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let p,g,f=r(u),h=r(c);const m=null==a?10:+a;let _=[];if(!(i%1)&&h-f<m){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<i;++p)if(g=f<0?p/o(-f):p*o(f),!(g<u)){if(g>c)break;_.push(g)}}else for(;f<=h;++f)for(p=i-1;p>=1;--p)if(g=f>0?p/o(-f):p*o(f),!(g<u)){if(g>c)break;_.push(g)}2*_.length<m&&(_=eO(u,c,m))}else _=eO(f,h,Math.min(h-f,m)).map(o);return d?_.reverse():_},t.tickFormat=(a,l)=>{if(null==a&&(a=10),null==l&&(l=10===i?"s":","),"function"!=typeof l&&(!(i%1)&&null==(l=Lf(l)).precision&&(l.trim=!0),l=nD(l)),a===1/0)return l;const u=Math.max(1,i*a/t.ticks().length);return c=>{let d=c/o(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},t.nice=()=>n(zQ(n(),{floor:a=>o(Math.floor(r(a))),ceil:a=>o(Math.ceil(r(a)))})),t}function KQ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function NFe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MFe(e){return e<0?-e*e:e*e}function tF(e){var t=e(io,io),n=1;function i(){return 1===n?e(io,io):.5===n?e(NFe,MFe):e(KQ(n),KQ(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Yf(t)}function nF(){var e=tF(YD());return e.copy=function(){return Ky(e,nF()).exponent(e.exponent())},al.apply(e,arguments),e}function XQ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function QQ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function iF(e){var t=1,n=e(XQ(t),QQ(t));return n.constant=function(i){return arguments.length?e(XQ(t=+i),QQ(t)):t},Yf(n)}function ZQ(e,t,n,i,r,o){const s=[[wu,1,_u],[wu,5,5e3],[wu,15,15e3],[wu,30,3e4],[o,1,ms],[o,5,5*ms],[o,15,15*ms],[o,30,30*ms],[r,1,yu],[r,3,3*yu],[r,6,6*yu],[r,12,12*yu],[i,1,vu],[i,2,2*vu],[n,1,sO],[t,1,LY],[t,3,3*LY],[e,1,aO]];function l(u,c,d){const f=Math.abs(c-u)/d,h=jg(([,,m])=>m).right(s,f);if(h===s.length)return e.every(Pc(u/aO,c/aO,d));if(0===h)return Vg.every(Math.max(Pc(u,c,d),1));const[p,g]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return p.every(g)}return[function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&"function"==typeof d.range?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p},l]}const[IFe,OFe]=ZQ(il,wy,$g,$Y,sD,lD),[RFe,FFe]=ZQ(nl,by,Pg,bu,oD,aD);function PFe(e){return new Date(e)}function LFe(e){return e instanceof Date?+e:+new Date(+e)}function rF(e,t,n,i,r,o,s,a,l,u){var c=VQ(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),_=u("%a %d"),y=u("%b %d"),v=u("%B"),b=u("%Y");function w(D){return(l(D)<D?h:a(D)<D?p:s(D)<D?g:o(D)<D?m:i(D)<D?r(D)<D?_:y:n(D)<D?v:b)(D)}return c.invert=function(D){return new Date(d(D))},c.domain=function(D){return arguments.length?f(Array.from(D,LFe)):f().map(PFe)},c.ticks=function(D){var E=f();return e(E[0],E[E.length-1],D??10)},c.tickFormat=function(D,E){return null==E?w:u(E)},c.nice=function(D){var E=f();return(!D||"function"!=typeof D.range)&&(D=t(E[0],E[E.length-1],D??10)),D?f(zQ(E,D)):c},c.copy=function(){return Ky(c,rF(e,t,n,i,r,o,s,a,l,u))},c}function KD(){var n,i,r,o,l,e=0,t=1,s=io,a=!1;function u(d){return null==d||isNaN(d=+d)?l:s(0===r?.5:(d=(o(d)-n)*r,a?Math.max(0,Math.min(1,d)):d))}function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,s=d(h,p),u):[s(0),s(1)]}}return u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(s=d,u):s},u.range=c(qc),u.rangeRound=c(Yy),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),i=d(t),r=n===i?0:1/(i-n),u}}function Kc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function oF(){var e=Yf(KD()(io));return e.copy=function(){return Kc(e,oF())},Yc.apply(e,arguments)}function sF(){var e=tF(KD());return e.copy=function(){return Kc(e,sF()).exponent(e.exponent())},Yc.apply(e,arguments)}function aF(e,t){void 0===t&&(t=e,e=qc);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(s){var a=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[a](s-a)}}function XD(){var r,o,s,a,l,c,f,e=0,t=.5,n=1,i=1,u=io,d=!1;function h(g){return isNaN(g=+g)?f:(g=.5+((g=+c(g))-o)*(i*g<i*o?a:l),u(d?Math.max(0,Math.min(1,g)):g))}function p(g){return function(m){var _,y,v;return arguments.length?([_,y,v]=m,u=aF(g,[_,y,v]),h):[u(0),u(.5),u(1)]}}return h.domain=function(g){return arguments.length?([e,t,n]=g,r=c(e=+e),o=c(t=+t),s=c(n=+n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(u=g,h):u},h.range=p(qc),h.rangeRound=p(Yy),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return c=g,r=g(e),o=g(t),s=g(n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h}}function lF(){var e=tF(XD());return e.copy=function(){return Kc(e,lF()).exponent(e.exponent())},Yc.apply(e,arguments)}class lJ extends Map{constructor(t,n=dJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(uF(this,t))}has(t){return super.has(uF(this,t))}set(t,n){return super.set(uJ(this,t),n)}delete(t){return super.delete(cJ(this,t))}}class QD extends Set{constructor(t,n=dJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const i of t)this.add(i)}has(t){return super.has(uF(this,t))}add(t){return super.add(uJ(this,t))}delete(t){return super.delete(cJ(this,t))}}function uF({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function uJ({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function cJ({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function dJ(e){return null!==e&&"object"==typeof e?e.valueOf():e}const cF=Symbol("implicit");function dF(){var e=new lJ,t=[],n=[],i=cF;function r(o){let s=e.get(o);if(void 0===s){if(i!==cF)return i;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new lJ;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return dF(t,n).unknown(i)},al.apply(r,arguments),r}function UFe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function HFe(e,t){var n=qD(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}var JD,fJ=180/Math.PI,fF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hJ(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*fJ,skewX:Math.atan(l)*fJ,scaleX:s,scaleY:a}}function pJ(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),function o(u,c,d,f,h,p){if(u!==d||c!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:la(u,d)},{i:g-2,x:la(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}(u.translateX,u.translateY,c.translateX,c.translateY,d,f),function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:la(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}(u.rotate,c.rotate,d,f),function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:la(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}(u.skewX,c.skewX,d,f),function l(u,c,d,f,h,p){if(u!==d||c!==f){var g=h.push(r(h)+"scale(",null,",",null,")");p.push({i:g-4,x:la(u,d)},{i:g-2,x:la(c,f)})}else(1!==d||1!==f)&&h.push(r(h)+"scale("+d+","+f+")")}(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m,p=-1,g=f.length;++p<g;)d[(m=f[p]).i]=m.x(h);return d.join("")}}}var WFe=pJ(function zFe(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fF:hJ(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),qFe=pJ(function GFe(e){return null!=e&&(JD||(JD=document.createElementNS("http://www.w3.org/2000/svg","g")),JD.setAttribute("transform",e),e=JD.transform.baseVal.consolidate())?hJ((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):fF},", ",")",")");function gJ(e){return((e=Math.exp(e))+1/e)/2}const QFe=function e(t,n,i){function r(o,s){var m,_,a=o[0],l=o[1],u=o[2],f=s[2],h=s[0]-a,p=s[1]-l,g=h*h+p*p;if(g<1e-12)_=Math.log(f/u)/t,m=function(E){return[a+E*h,l+E*p,u*Math.exp(t*E*_)]};else{var y=Math.sqrt(g),v=(f*f-u*u+i*g)/(2*u*n*y),b=(f*f-u*u-i*g)/(2*f*n*y),w=Math.log(Math.sqrt(v*v+1)-v),D=Math.log(Math.sqrt(b*b+1)-b);_=(D-w)/t,m=function(E){var C=E*_,N=gJ(w),k=u/(n*y)*(N*function XFe(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*C+w)-function KFe(e){return((e=Math.exp(e))-1/e)/2}(w));return[a+k*h,l+k*p,u*N/gJ(t*C+w)]}}return m.duration=1e3*_*t/Math.SQRT2,m}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s;return e(s,a,a*a)},r}(Math.SQRT2,2,4);function mJ(e){return function(t,n){var i=e((t=zD(t)).h,(n=zD(n)).h),r=Di(t.s,n.s),o=Di(t.l,n.l),s=Di(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=o(a),t.opacity=s(a),t+""}}}const JFe=mJ(qD);var ZFe=mJ(Di);const _J=Math.PI/180,yJ=180/Math.PI,EJ=4/29,em=6/29,DJ=3*em*em;function CJ(e){if(e instanceof ua)return new ua(e.l,e.a,e.b,e.opacity);if(e instanceof ll)return xJ(e);e instanceof Ei||(e=WR(e));var o,s,t=mF(e.r),n=mF(e.g),i=mF(e.b),r=hF((.2225045*t+.7168786*n+.0606169*i)/1);return t===n&&n===i?o=s=r:(o=hF((.4360747*t+.3850649*n+.1430804*i)/.96422),s=hF((.0139322*t+.0971045*n+.7141733*i)/.82521)),new ua(116*r-16,500*(o-r),200*(r-s),e.opacity)}function eC(e,t,n,i){return 1===arguments.length?CJ(e):new ua(e,t,n,i??1)}function ua(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function hF(e){return e>.008856451679035631?Math.pow(e,1/3):e/DJ+EJ}function pF(e){return e>em?e*e*e:DJ*(e-EJ)}function gF(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function mF(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function SJ(e){if(e instanceof ll)return new ll(e.h,e.c,e.l,e.opacity);if(e instanceof ua||(e=CJ(e)),0===e.a&&0===e.b)return new ll(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*yJ;return new ll(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function tC(e,t,n,i){return 1===arguments.length?SJ(e):new ll(e,t,n,i??1)}function ll(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function xJ(e){if(isNaN(e.h))return new ua(e.l,0,0,e.opacity);var t=e.h*_J;return new ua(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function tPe(e,t){var n=Di((e=eC(e)).l,(t=eC(t)).l),i=Di(e.a,t.a),r=Di(e.b,t.b),o=Di(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=o(s),e+""}}function TJ(e){return function(t,n){var i=e((t=tC(t)).h,(n=tC(n)).h),r=Di(t.c,n.c),o=Di(t.l,n.l),s=Di(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=o(a),t.opacity=s(a),t+""}}}Qg(ua,eC,Gy(Gc,{brighter(e){return new ua(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new ua(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Ei(gF(3.1338561*(t=.96422*pF(t))-1.6168667*(e=1*pF(e))-.4906146*(n=.82521*pF(n))),gF(-.9787684*t+1.9161415*e+.033454*n),gF(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Qg(ll,tC,Gy(Gc,{brighter(e){return new ll(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new ll(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return xJ(this).rgb()}}));const nPe=TJ(qD);var iPe=TJ(Di),_F=1.78277,yF=-.29227,nC=-.90649,Xy=1.97294,NJ=Xy*nC,MJ=Xy*_F,kJ=_F*yF- -.14861*nC;function rPe(e){if(e instanceof Kf)return new Kf(e.h,e.s,e.l,e.opacity);e instanceof Ei||(e=WR(e));var n=e.g/255,i=e.b/255,r=(kJ*i+NJ*(e.r/255)-MJ*n)/(kJ+NJ-MJ),o=i-r,s=(Xy*(n-r)-yF*o)/nC,a=Math.sqrt(s*s+o*o)/(Xy*r*(1-r)),l=a?Math.atan2(s,o)*yJ-120:NaN;return new Kf(l<0?l+360:l,a,r,e.opacity)}function vF(e,t,n,i){return 1===arguments.length?rPe(e):new Kf(e,t,n,i??1)}function Kf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function IJ(e){return function t(n){function i(r,o){var s=e((r=vF(r)).h,(o=vF(o)).h),a=Di(r.s,o.s),l=Di(r.l,o.l),u=Di(r.opacity,o.opacity);return function(c){return r.h=s(c),r.s=a(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return n=+n,i.gamma=t,i}(1)}Qg(Kf,vF,Gy(Gc,{brighter(e){return e=null==e?Jg:Math.pow(Jg,e),new Kf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Kf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*_J,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Ei(255*(t+n*(-.14861*i+_F*r)),255*(t+n*(yF*i+nC*r)),255*(t+n*(Xy*i)),this.opacity)}}));const oPe=IJ(qD);var sPe=IJ(Di);function aPe(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}function ul(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}const lPe=ul("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),uPe=ul("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),cPe=ul("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),dPe=ul("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),fPe=ul("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),hPe=ul("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),pPe=ul("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),gPe=ul("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),mPe=ul("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),_Pe=ul("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function bF(e,t,n){const i=e-t+2*n;return e?i>0?i:1:0}const tm="linear",Su="log",Jy="sqrt",iC="symlog",Xf="time",Qf="utc",cl="sequential",nm="diverging",im="quantile",rC="quantize",oC="threshold",wF="ordinal",EF="point",DF="bin-ordinal",di="continuous",Zy="discrete",e1="discretizing",ws="interpolating",CF="temporal";function SF(){const e=dF().unknown(void 0),t=e.domain,n=e.range;let r,o,i=[0,1],s=!1,a=0,l=0,u=.5;function c(){const d=t().length,f=i[1]<i[0],h=i[1-f],p=bF(d,a,l);let g=i[f-0];r=(h-g)/(p||1),s&&(r=Math.floor(r)),g+=(h-g-r*(d-a))*u,o=r*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Fo(d).map(_=>g+r*_);return n(f?m.reverse():m)}return delete e.unknown,e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],c()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(s=!!d,c()):s},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(null==d[0]||null==d[1])return;const f=i[1]<i[0],h=f?n().reverse():n(),p=h.length-1;let _,y,v,g=+d[0],m=+d[1];return g!=g||m!=m||(m<g&&(v=g,g=m,m=v),m<h[0]||g>i[1-f])?void 0:(_=Math.max(0,jD(h,g)-1),y=g===m?_:jD(h,m)-1,g-h[_]>o+1e-10&&++_,f&&(v=_,_=p-y,y=p-v),_>y?void 0:t().slice(_,y+1))},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return SF().domain(t()).range(i).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function RJ(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return RJ(t())},e}var EPe=Array.prototype.map;function DPe(e){return EPe.call(e,ir)}const CPe=Array.prototype.slice,sC=new Map,PJ=Symbol("vega_scale");function LJ(e){return e[PJ]=!0,e}function xPe(e,t,n){const i=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?function vPe(e){return function(t){let r,n=t[0],i=t[1];return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}(o):o.invertExtent?function bPe(e){return function(t){const n=e.range();let s,a,l,u,i=t[0],r=t[1],o=-1;for(r<i&&(a=i,i=r,r=a),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(o<0&&(o=l),s=l);if(!(o<0))return i=e.invertExtent(n[o]),r=e.invertExtent(n[s]),[void 0===i[0]?i[1]:i[0],void 0===r[1]?r[0]:r[1]]}}(o):void 0),o.type=e,LJ(o)};return i.metadata=oa(ve(n)),i}function xt(e,t,n){return arguments.length>1?(sC.set(e,xPe(e,t,n)),this):$J(e)?sC.get(e):void 0}function $J(e){return sC.has(e)}function Jf(e,t){const n=sC.get(e);return n&&n.metadata[t]}function xF(e){return Jf(e,di)}function rm(e){return Jf(e,Zy)}function TF(e){return Jf(e,e1)}function BJ(e){return Jf(e,Su)}function VJ(e){return Jf(e,ws)}function jJ(e){return Jf(e,im)}xt("identity",function HQ(e){var t;function n(i){return null==i||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,JR),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return HQ(e).unknown(t)},e=arguments.length?Array.from(e,JR):[0,1],Yf(n)}),xt(tm,function UQ(){var e=VQ();return e.copy=function(){return Ky(e,UQ())},al.apply(e,arguments),Yf(e)},di),xt(Su,function YQ(){const e=eF(YD()).domain([1,10]);return e.copy=()=>Ky(e,YQ()).base(e.base()),al.apply(e,arguments),e},[di,Su]),xt("pow",nF,di),xt(Jy,function kFe(){return nF.apply(null,arguments).exponent(.5)},di),xt(iC,function JQ(){var e=iF(YD());return e.copy=function(){return Ky(e,JQ()).constant(e.constant())},al.apply(e,arguments)},di),xt(Xf,function $Fe(){return al.apply(rF(RFe,FFe,nl,by,Pg,bu,oD,aD,wu,vO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[di,CF]),xt(Qf,function BFe(){return al.apply(rF(IFe,OFe,il,wy,$g,Lc,sD,lD,wu,bO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[di,CF]),xt(cl,oF,[di,ws]),xt(`${cl}-${tm}`,oF,[di,ws]),xt(`${cl}-log`,function eJ(){var e=eF(KD()).domain([1,10]);return e.copy=function(){return Kc(e,eJ()).base(e.base())},Yc.apply(e,arguments)},[di,ws,Su]),xt(`${cl}-pow`,sF,[di,ws]),xt(`${cl}-sqrt`,function VFe(){return sF.apply(null,arguments).exponent(.5)},[di,ws]),xt(`${cl}-${iC}`,function tJ(){var e=iF(KD());return e.copy=function(){return Kc(e,tJ()).constant(e.constant())},Yc.apply(e,arguments)},[di,ws]),xt(`${nm}-${tm}`,function nJ(){var e=Yf(XD()(io));return e.copy=function(){return Kc(e,nJ())},Yc.apply(e,arguments)},[di,ws]),xt(`${nm}-log`,function iJ(){var e=eF(XD()).domain([.1,1,10]);return e.copy=function(){return Kc(e,iJ()).base(e.base())},Yc.apply(e,arguments)},[di,ws,Su]),xt(`${nm}-pow`,lF,[di,ws]),xt(`${nm}-sqrt`,function jFe(){return lF.apply(null,arguments).exponent(.5)},[di,ws]),xt(`${nm}-${iC}`,function rJ(){var e=iF(XD());return e.copy=function(){return Kc(e,rJ()).constant(e.constant())},Yc.apply(e,arguments)},[di,ws]),xt(im,function oJ(){var i,e=[],t=[],n=[];function r(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=nX(e,s/a);return o}function o(s){return null==s||isNaN(s=+s)?i:t[zy(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)null!=a&&!isNaN(a=+a)&&e.push(a);return e.sort(Eu),r()},o.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return oJ().domain(e).range(t).unknown(i)},al.apply(o,arguments)},[e1,im]),xt(rC,function sJ(){var o,e=0,t=1,n=1,i=[.5],r=[0,1];function s(l){return null!=l&&l<=l?r[zy(i,l,0,n)]:o}function a(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,a()):r.slice()},s.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return sJ().domain([e,t]).range(r).unknown(o)},al.apply(Yf(s),arguments)},e1),xt(oC,function aJ(){var n,e=[.5],t=[0,1],i=1;function r(o){return null!=o&&o<=o?t[zy(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return aJ().domain(e).range(t).unknown(n)},al.apply(r,arguments)},e1),xt(DF,function FJ(){let e=[],t=[];function n(i){return null==i||i!=i?void 0:t[(zy(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=DPe(i),n):e.slice()},n.range=function(i){return arguments.length?(t=CPe.call(i),n):t.slice()},n.tickFormat=function(i,r){return jQ(e[0],mt(e),i??10,r)},n.copy=function(){return FJ().domain(n.domain()).range(n.range())},n},[Zy,e1]),xt(wF,dF,Zy),xt("band",SF,Zy),xt(EF,function wPe(){return RJ(SF().paddingInner(1))},Zy);const APe=["clamp","base","constant","exponent"];function UJ(e,t){const n=t[0],i=mt(t)-n;return function(r){return e(n+r*i)}}function aC(e,t,n){return aF(AF(t||"rgb",n),e)}function HJ(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function zJ(e,t,n){const i=n-t;let r,o,s;return i&&Number.isFinite(i)?(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),s=xt(o)().domain([t,n]).range([0,1]),APe.forEach(a=>e[a]?s[a](e[a]()):0),s):rr(.5)}function AF(e,t){const n=Vs[function NPe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function GJ(e){if(J(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}function WJ(e,t){for(const n in e)NF(n,t(e[n]))}const qJ={};function NF(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(qJ[e]=t,this):qJ[e]}WJ({accent:lPe,category10:uPe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:cPe,observable10:dPe,paired:fPe,pastel1:hPe,pastel2:pPe,set1:gPe,set2:mPe,set3:_Pe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"},GJ),WJ({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>aC(GJ(e)));const lC="symbol",RPe=e=>J(e)?e.map(t=>String(t)):String(e),FPe=(e,t)=>e[1]-t[1],PPe=(e,t)=>t[1]-e[1];function MF(e,t,n){let i;return Ct(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(yy(e.domain())/n||1)+1))),ye(t)&&(i=t.step,t=t.interval),be(t)&&(t=e.type===Xf?Hg(t):e.type==Qf?zg(t):Q("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function YJ(e,t,n){let i=e.range(),r=i[0],o=mt(i),s=FPe;if(r>o&&(i=o,o=r,r=i,s=PPe),r=Math.floor(r),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>r<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],mt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function kF(e,t){return e.bins?YJ(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function KJ(e,t,n,i,r,o){const s=t.type;let a=RPe;if(s===Xf||r===Xf)a=e.timeFormat(i);else if(s===Qf||r===Qf)a=e.utcFormat(i);else if(BJ(s)){const l=e.formatFloat(i);if(o||t.bins)a=l;else{const u=XJ(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(a=e.format(i));return a}function XJ(e,t,n){const i=kF(e,t),r=e.base(),o=Math.log(r),s=Math.max(1,r*t/i.length),a=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/o));return u*r<r-.5&&(u*=r),u<=s};return n?i.filter(a):a}const IF={[im]:"quantiles",[rC]:"thresholds",[oC]:"domain"},QJ={[im]:"quantiles",[rC]:"domain"};function JJ(e,t){return e.bins?function BPe(e){const t=e.slice(0,-1);return t.max=mt(e),t}(e.bins):e.type===Su?XJ(e,t,!0):IF[e.type]?function $Pe(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[IF[e.type]]()):kF(e,t)}function ZJ(e,t,n,i,r,o,s){const a=QJ[t.type]&&o!==Xf&&o!==Qf?function LPe(e,t,n){const i=t[QJ[t.type]](),r=i.length;let s,o=r>1?i[1]-i[0]:i[0];for(s=1;s<r;++s)o=Math.min(o,i[s]-i[s-1]);return e.formatSpan(0,o,30,n)}(e,t,r):KJ(e,t,n,r,o,s);return i===lC&&(e=>IF[e.type]||e.bins)(t)?jPe(a):"discrete"===i?UPe(a):HPe(a)}const jPe=e=>(t,n,i)=>{const r=eZ(i[n+1],eZ(i.max,1/0)),o=tZ(t,e),s=tZ(r,e);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},eZ=(e,t)=>e??t,UPe=e=>(t,n)=>n?e(t):null,HPe=e=>t=>e(t),tZ=(e,t)=>Number.isFinite(e)?t(e):null;function nZ(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=function GPe(e,t,n,i){const r=i||t.type;return be(n)&&function TPe(e){return Jf(e,CF)}(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||r!==Xf?n||r!==Qf?ZJ(e,t,5,null,n,i,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(e,t,n.format,n.formatType);if(TF(t.type)){const o=JJ(t).slice(1).map(r),s=o.length;return`${s} boundar${1===s?"y":"ies"}: ${o.join(", ")}`}if(rm(t.type)){const o=t.domain(),s=o.length;return`${s} value${1===s?"":"s"}: ${s>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ")}`}{const o=t.domain();return`values from ${r(o[0])} to ${r(mt(o))}`}}let iZ=0;function OF(e){return e&&e.gradient}function rZ(e,t,n){const i=e.gradient;let r=e.id,o="radial"===i?"p_":"";return r||(r=e.id="gradient_"+iZ++,"radial"===i?(e.x1=dl(e.x1,.5),e.y1=dl(e.y1,.5),e.r1=dl(e.r1,0),e.x2=dl(e.x2,.5),e.y2=dl(e.y2,.5),e.r2=dl(e.r2,.5),o="p_"):(e.x1=dl(e.x1,0),e.y1=dl(e.y1,0),e.x2=dl(e.x2,1),e.y2=dl(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function dl(e,t){return e??t}function oZ(e,t){var i,n=[];return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i}}}const sZ={basis:{curve:function aRe(e){return new ID(e)}},"basis-closed":{curve:function lRe(e){return new YX(e)}},"basis-open":{curve:function uRe(e){return new KX(e)}},bundle:{curve:cRe,tension:"beta",value:.85},cardinal:{curve:dRe,tension:"tension",value:0},"cardinal-open":{curve:fRe,tension:"tension",value:0},"cardinal-closed":{curve:hRe,tension:"tension",value:0},"catmull-rom":{curve:mRe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:_Re,tension:"alpha",value:.5},"catmull-rom-open":{curve:yRe,tension:"alpha",value:.5},linear:{curve:BR},"linear-closed":{curve:function vRe(e){return new iQ(e)}},monotone:{horizontal:function wRe(e){return new aQ(e)},vertical:function bRe(e){return new FD(e)}},natural:{curve:function ERe(e){return new uQ(e)}},step:{curve:function DRe(e){return new PD(e,.5)}},"step-after":{curve:function SRe(e){return new PD(e,1)}},"step-before":{curve:function CRe(e){return new PD(e,0)}}};function RF(e,t,n){var i=Ce(sZ,e)&&sZ[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&null!=n&&(r=r[i.tension](n))),r}const qPe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},YPe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,KPe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,XPe=/^((\s+,?\s*)|(,\s*))/,QPe=/^[01]/;function om(e){const t=[];return(e.match(YPe)||[]).forEach(i=>{let r=i[0];const o=r.toLowerCase(),s=qPe[o],a=function JPe(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let o=0;o<t;++o){const s="a"!==e||3!==o&&4!==o?KPe:QPe,a=n.slice(r).match(s);if(null===a)throw Error("Invalid SVG path, incorrect parameter type");r+=a[0].length,i.push(+a[0]);const l=n.slice(r).match(XPe);null!==l&&(r+=l[0].length)}return i}(o,s,i.slice(1).trim()),l=a.length;if(l<s||l&&l%s!=0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...a.slice(0,s)]),l!==s){"m"===o&&(r="M"===r?"L":"l");for(let u=s;u<l;u+=s)t.push([r,...a.slice(u,u+s)])}}),t}const Xc=Math.PI/180,Zf=Math.PI/2,fl=2*Math.PI,sm=Math.sqrt(3)/2;var FF={},PF={},aZ=[].join;function tLe(e){const t=aZ.call(e);if(PF[t])return PF[t];var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,d=-l*a,f=l*s,h=u*a,p=Math.cos(r),g=Math.sin(r),m=Math.cos(o),_=Math.sin(o),y=.5*(o-r),v=Math.sin(.5*y),b=8/3*v*v/Math.sin(y),w=n+p-b*g,D=i+g+b*p,E=n+m,C=i+_,N=E+b*_,k=C-b*m;return PF[t]=[c*w+d*D,f*w+h*D,c*N+d*k,f*N+h*k,c*E+d*C,f*E+h*C]}const Es=["l",0,0,0,0,0,0,0];function nLe(e,t,n){const i=Es[0]=e[0];if("a"===i||"A"===i)Es[1]=t*e[1],Es[2]=n*e[2],Es[3]=e[3],Es[4]=e[4],Es[5]=e[5],Es[6]=t*e[6],Es[7]=n*e[7];else if("h"===i||"H"===i)Es[1]=t*e[1];else if("v"===i||"V"===i)Es[1]=n*e[1];else for(var r=1,o=e.length;r<o;++r)Es[r]=(r%2==1?t:n)*e[r];return Es}function t1(e,t,n,i,r,o){var s,f,h,p,g,a=null,l=0,u=0,c=0,d=0,m=0,_=0;null==n&&(n=0),null==i&&(i=0),null==r&&(r=1),null==o&&(o=r),e.beginPath&&e.beginPath();for(var y=0,v=t.length;y<v;++y){switch(s=t[y],(1!==r||1!==o)&&(s=nLe(s,r,o)),s[0]){case"l":e.lineTo((l+=s[1])+n,(u+=s[2])+i);break;case"L":e.lineTo((l=s[1])+n,(u=s[2])+i);break;case"h":e.lineTo((l+=s[1])+n,u+i);break;case"H":e.lineTo((l=s[1])+n,u+i);break;case"v":e.lineTo(l+n,(u+=s[1])+i);break;case"V":e.lineTo(l+n,(u=s[1])+i);break;case"m":m=l+=s[1],_=u+=s[2],e.moveTo(l+n,u+i);break;case"M":m=l=s[1],_=u=s[2],e.moveTo(l+n,u+i);break;case"c":e.bezierCurveTo(l+s[1]+n,u+s[2]+i,(c=l+s[3])+n,(d=u+s[4])+i,(f=l+s[5])+n,(h=u+s[6])+i),l=f,u=h;break;case"C":e.bezierCurveTo(s[1]+n,s[2]+i,(c=s[3])+n,(d=s[4])+i,(l=s[5])+n,(u=s[6])+i);break;case"s":e.bezierCurveTo((c=2*l-c)+n,(d=2*u-d)+i,l+s[1]+n,u+s[2]+i,(f=l+s[3])+n,(h=u+s[4])+i),c=l+s[1],d=u+s[2],l=f,u=h;break;case"S":e.bezierCurveTo((c=2*l-c)+n,(d=2*u-d)+i,s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,u=h,c=s[1],d=s[2];break;case"q":e.quadraticCurveTo((c=l+s[1])+n,(d=u+s[2])+i,(f=l+s[3])+n,(h=u+s[4])+i),l=f,u=h;break;case"Q":e.quadraticCurveTo(s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,u=h,c=s[1],d=s[2];break;case"t":f=l+s[1],h=u+s[2],null===a[0].match(/[QqTt]/)?(c=l,d=u):"t"===a[0]?(c=2*l-p,d=2*u-g):"q"===a[0]&&(c=2*l-c,d=2*u-d),p=c,g=d,e.quadraticCurveTo(c+n,d+i,f+n,h+i),c=(l=f)+s[1],d=(u=h)+s[2];break;case"T":e.quadraticCurveTo((c=2*l-c)+n,(d=2*u-d)+i,(f=s[1])+n,(h=s[2])+i),l=f,u=h;break;case"a":lZ(e,l+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+i]),l+=s[6],u+=s[7];break;case"A":lZ(e,l+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=_,e.closePath()}a=s}}function lZ(e,t,n,i){const r=function eLe(e,t,n,i,r,o,s,a,l){const u=aZ.call(arguments);if(FF[u])return FF[u];const c=s*Xc,d=Math.sin(c),f=Math.cos(c),h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let g=h*h/((n=Math.abs(n))*n)+p*p/((i=Math.abs(i))*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);const m=f/n,_=d/n,y=-d/i,v=f/i,b=m*a+_*l,w=y*a+v*l,D=m*e+_*t,E=y*e+v*t;let N=1/((D-b)*(D-b)+(E-w)*(E-w))-.25;N<0&&(N=0);let k=Math.sqrt(N);o==r&&(k=-k);const R=.5*(b+D)-k*(E-w),F=.5*(w+E)+k*(D-b),P=Math.atan2(w-F,b-R);let S=Math.atan2(E-F,D-R)-P;S<0&&1===o?S+=fl:S>0&&0===o&&(S-=fl);const T=Math.ceil(Math.abs(S/(Zf+.001))),I=[];for(let A=0;A<T;++A)I[A]=[R,F,P+A*S/T,P+(A+1)*S/T,n,i,d,f];return FF[u]=I}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let o=0;o<r.length;++o){const s=tLe(r[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const uZ=.5773502691896257,cZ={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,fl)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,o=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-n),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=sm*n,r=i-n*uZ,o=n/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=sm*n,r=i-n*uZ;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sm*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sm*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sm*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sm*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function dZ(e){return Ce(cZ,e)?cZ[e]:function iLe(e){if(!Ce(LF,e)){const t=om(e);LF[e]={draw:function(n,i){t1(n,t,0,0,Math.sqrt(i)/2)}}}return LF[e]}(e)}var LF={};const Qc=.448084975506;function rLe(e){return e.x}function oLe(e){return e.y}function sLe(e){return e.width}function aLe(e){return e.height}function xu(e){return"function"==typeof e?e:()=>+e}function cC(e,t,n){return Math.max(t,Math.min(e,n))}function fZ(){var e=rLe,t=oLe,n=sLe,i=aLe,r=xu(0),o=r,s=r,a=r,l=null;function u(c,d,f){var h,p=d??+e.call(this,c),g=f??+t.call(this,c),m=+n.call(this,c),_=+i.call(this,c),y=Math.min(m,_)/2,v=cC(+r.call(this,c),0,y),b=cC(+o.call(this,c),0,y),w=cC(+s.call(this,c),0,y),D=cC(+a.call(this,c),0,y);if(l||(l=h=$D()),v<=0&&b<=0&&w<=0&&D<=0)l.rect(p,g,m,_);else{var E=p+m,C=g+_;l.moveTo(p+v,g),l.lineTo(E-b,g),l.bezierCurveTo(E-Qc*b,g,E,g+Qc*b,E,g+b),l.lineTo(E,C-D),l.bezierCurveTo(E,C-Qc*D,E-Qc*D,C,E-D,C),l.lineTo(p+w,C),l.bezierCurveTo(p+Qc*w,C,p,C-Qc*w,p,C-w),l.lineTo(p,g+v),l.bezierCurveTo(p,g+Qc*v,p+Qc*v,g,p+v,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=xu(c),u):e},u.y=function(c){return arguments.length?(t=xu(c),u):t},u.width=function(c){return arguments.length?(n=xu(c),u):n},u.height=function(c){return arguments.length?(i=xu(c),u):i},u.cornerRadius=function(c,d,f,h){return arguments.length?(r=xu(c),o=null!=d?xu(d):r,a=null!=f?xu(f):r,s=null!=h?xu(h):o,u):r},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function hZ(){var e,t,n,i,o,s,a,l,r=null;function u(d,f,h){const p=h/2;if(o){var g=a-f,m=d-s;if(g||m){var _=Math.hypot(g,m),y=(g/=_)*l,v=(m/=_)*l,b=Math.atan2(m,g);r.moveTo(s-y,a-v),r.lineTo(d-g*p,f-m*p),r.arc(d,f,p,b-Math.PI,b),r.lineTo(s+y,a+v),r.arc(s,a,l,b,b+Math.PI)}else r.arc(d,f,p,0,fl);r.closePath()}else o=1;s=d,a=f,l=p}function c(d){var f,p,m,h=d.length,g=!1;for(null==r&&(r=m=$D()),f=0;f<=h;++f)!(f<h&&i(p=d[f],f,d))===g&&(g=!g)&&(o=0),g&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(m)return r=null,m+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(i=d,c):i},c.context=function(d){return arguments.length?(r=d??null,c):r},c}function n1(e,t){return e??t}const i1=e=>e.x||0,r1=e=>e.y||0,dC=e=>!1!==e.defined,SLe=function RRe(){var e=ARe,t=NRe,n=Ft(0),i=null,r=MRe,o=kRe,s=IRe,a=null,l=BD(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=r.apply(this,arguments)-RD,g=o.apply(this,arguments)-RD,m=QX(g-p),_=g>p;if(a||(a=c=l()),h<f&&(d=h,h=f,f=d),h>lr)if(m>Hy-lr)a.moveTo(h*Cu(p),h*no(p)),a.arc(0,0,h,p,g,!_),f>lr&&(a.moveTo(f*Cu(g),f*no(g)),a.arc(0,0,f,g,p,_));else{var P,x,y=p,v=g,b=p,w=g,D=m,E=m,C=s.apply(this,arguments)/2,N=C>lr&&(i?+i.apply(this,arguments):cn(f*f+h*h)),k=Xg(QX(h-f)/2,+n.apply(this,arguments)),R=k,F=k;if(N>lr){var S=JX(N/f*no(C)),T=JX(N/h*no(C));(D-=2*S)>lr?(b+=S*=_?1:-1,w-=S):(D=0,b=w=(p+g)/2),(E-=2*T)>lr?(y+=T*=_?1:-1,v-=T):(E=0,y=v=(p+g)/2)}var I=h*Cu(y),A=h*no(y),M=f*Cu(w),O=f*no(w);if(k>lr){var z,L=h*Cu(v),$=h*no(v),V=f*Cu(b),B=f*no(b);if(m<Hc)if(z=ORe(I,A,V,B,L,$,M,O)){var te=I-z[0],q=A-z[1],ue=L-z[0],W=$-z[1],Z=1/no(gRe((te*ue+q*W)/(cn(te*te+q*q)*cn(ue*ue+W*W)))/2),ee=cn(z[0]*z[0]+z[1]*z[1]);R=Xg(k,(f-ee)/(Z-1)),F=Xg(k,(h-ee)/(Z+1))}else R=F=0}E>lr?F>lr?(P=VD(V,B,I,A,h,F,_),x=VD(L,$,M,O,h,F,_),a.moveTo(P.cx+P.x01,P.cy+P.y01),F<k?a.arc(P.cx,P.cy,F,ar(P.y01,P.x01),ar(x.y01,x.x01),!_):(a.arc(P.cx,P.cy,F,ar(P.y01,P.x01),ar(P.y11,P.x11),!_),a.arc(0,0,h,ar(P.cy+P.y11,P.cx+P.x11),ar(x.cy+x.y11,x.cx+x.x11),!_),a.arc(x.cx,x.cy,F,ar(x.y11,x.x11),ar(x.y01,x.x01),!_))):(a.moveTo(I,A),a.arc(0,0,h,y,v,!_)):a.moveTo(I,A),f>lr&&D>lr?R>lr?(P=VD(M,O,L,$,f,-R,_),x=VD(I,A,V,B,f,-R,_),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<k?a.arc(P.cx,P.cy,R,ar(P.y01,P.x01),ar(x.y01,x.x01),!_):(a.arc(P.cx,P.cy,R,ar(P.y01,P.x01),ar(P.y11,P.x11),!_),a.arc(0,0,f,ar(P.cy+P.y11,P.cx+P.x11),ar(x.cy+x.y11,x.cx+x.x11),_),a.arc(x.cx,x.cy,R,ar(x.y11,x.x11),ar(x.y01,x.x01),!_))):a.arc(0,0,f,w,b,_):a.lineTo(M,O)}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Hc/2;return[Cu(d)*c,no(d)*c]},u.innerRadius=function(c){return arguments.length?(e="function"==typeof c?c:Ft(+c),u):e},u.outerRadius=function(c){return arguments.length?(t="function"==typeof c?c:Ft(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n="function"==typeof c?c:Ft(+c),u):n},u.padRadius=function(c){return arguments.length?(i=null==c?null:"function"==typeof c?c:Ft(+c),u):i},u.startAngle=function(c){return arguments.length?(r="function"==typeof c?c:Ft(+c),u):r},u.endAngle=function(c){return arguments.length?(o="function"==typeof c?c:Ft(+c),u):o},u.padAngle=function(c){return arguments.length?(s="function"==typeof c?c:Ft(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),xLe=mQ().x(i1).y1(r1).y0(e=>(e.y||0)+(e.height||0)).defined(dC),TLe=mQ().y(r1).x1(i1).x0(e=>(e.x||0)+(e.width||0)).defined(dC),ALe=gQ().x(i1).y(r1).defined(dC),NLe=fZ().x(i1).y(r1).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>n1(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>n1(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>n1(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>n1(e.cornerRadiusBottomLeft,e.cornerRadius)||0),MLe=function eFe(e,t){let n=null,i=BD(r);function r(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return e="function"==typeof e?e:Ft(e||HR),t="function"==typeof t?t:Ft(void 0===t?64:+t),r.type=function(o){return arguments.length?(e="function"==typeof o?o:Ft(o),r):e},r.size=function(o){return arguments.length?(t="function"==typeof o?o:Ft(+o),r):t},r.context=function(o){return arguments.length?(n=o??null,r):n},r}().type(e=>dZ(e.shape||"circle")).size(e=>n1(e.size,64)),kLe=hZ().x(i1).y(r1).defined(dC).size(e=>e.size||1);function $F(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function am(e,t,n,i){return NLe.context(e)(t,n,i)}var pZ=1;function gZ(){pZ=1}function BF(e,t,n){var i=t.clip,r=e._defs,o=t.clip_id||(t.clip_id="clip"+pZ++),s=r.clipping[o]||(r.clipping[o]={id:o});return nt(i)?s.path=i(null):$F(n)?s.path=am(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Jn(e){this.clear(),e&&this.union(e)}function fC(e){this.mark=e,this.bounds=this.bounds||new Jn}function hC(e){fC.call(this,e),this.items=this.items||[]}Jn.prototype={clone(){return new Jn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*i-l*r+u,l*i+a*r+c,a*i-l*s+u,l*i+a*s+c,a*o-l*r+u,l*o+a*r+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},pe(hC,fC);class mZ{constructor(t){this._pending=0,this._loader=t||hD()}pending(){return this._pending}sanitizeURL(t){const n=this;return _Z(n),n._loader.sanitize(t,{context:"href"}).then(i=>(o1(n),i)).catch(()=>(o1(n),null))}loadImage(t){const n=this,i=typeof Image<"u"?Image:null;return _Z(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const o=r.href;if(!o||!i)throw{url:o};const s=new i,a=Ce(r,"crossOrigin")?r.crossOrigin:"anonymous";return null!=a&&(s.crossOrigin=a),s.onload=()=>o1(n),s.onerror=()=>o1(n),s.src=o,s}).catch(r=>(o1(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{!function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}(!1)})}}function _Z(e){e._pending+=1}function o1(e){e._pending-=1}function Tu(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const i=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(i+(n?function $Le(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,i):0))}return e}const BLe=fl-1e-8;let pC,gC,mC,eh,VF,_C,jF,UF;const Jc=(e,t)=>pC.add(e,t),yC=(e,t)=>Jc(gC=e,mC=t),yZ=e=>Jc(e,pC.y1),vZ=e=>Jc(pC.x1,e),th=(e,t)=>VF*e+jF*t,nh=(e,t)=>_C*e+UF*t,HF=(e,t)=>Jc(th(e,t),nh(e,t)),zF=(e,t)=>yC(th(e,t),nh(e,t));function s1(e,t){return pC=e,t?(eh=t*Xc,VF=UF=Math.cos(eh),_C=Math.sin(eh),jF=-_C):(VF=UF=1,eh=_C=jF=0),VLe}const VLe={beginPath(){},closePath(){},moveTo:zF,lineTo:zF,rect(e,t,n,i){eh?(HF(e+n,t),HF(e+n,t+i),HF(e,t+i),zF(e,t)):(Jc(e+n,t+i),yC(e,t))},quadraticCurveTo(e,t,n,i){const r=th(e,t),o=nh(e,t),s=th(n,i),a=nh(n,i);bZ(gC,r,s,yZ),bZ(mC,o,a,vZ),yC(s,a)},bezierCurveTo(e,t,n,i,r,o){const s=th(e,t),a=nh(e,t),l=th(n,i),u=nh(n,i),c=th(r,o),d=nh(r,o);wZ(gC,s,l,c,yZ),wZ(mC,a,u,d,vZ),yC(c,d)},arc(e,t,n,i,r,o){if(i+=eh,r+=eh,gC=n*Math.cos(r)+e,mC=n*Math.sin(r)+t,Math.abs(r-i)>BLe)Jc(e-n,t-n),Jc(e+n,t+n);else{const s=u=>Jc(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(i),s(r),r!==i)if((i%=fl)<0&&(i+=fl),(r%=fl)<0&&(r+=fl),r<i&&(o=!o,a=i,i=r,r=a),o)for(r-=fl,a=i-i%Zf,l=0;l<4&&a>r;++l,a-=Zf)s(a);else for(a=i-i%Zf+Zf,l=0;l<4&&a<r;++l,a+=Zf)s(a)}}};function bZ(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function wZ(e,t,n,i,r){const o=i-e+3*t-3*n,s=e+n-2*t,a=e-t;let c,l=0,u=0;Math.abs(o)>1e-14?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&r(EZ(l,e,t,n,i)),0<u&&u<1&&r(EZ(u,e,t,n,i))}function EZ(e,t,n,i,r){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*i+a*e*r}var Zc=(Zc=zc(1,1))?Zc.getContext("2d"):null;const GF=new Jn;function WF(e){return function(t,n){if(!Zc)return!0;e(Zc,t),GF.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:s}=GF;for(let a=r;a<=s;++a)for(let l=i;l<=o;++l)if(Zc.isPointInPath(l,a))return!0;return!1}}function qF(e,t){return t.contains(e.x||0,e.y||0)}function DZ(e,t){const n=e.x||0,i=e.y||0;return t.intersects(GF.set(n,i,n+(e.width||0),i+(e.height||0)))}function CZ(e,t){const n=e.x||0,i=e.y||0;return lm(t,n,i,null!=e.x2?e.x2:n,null!=e.y2?e.y2:i)}function lm(e,t,n,i,r){const{x1:o,y1:s,x2:a,y2:l}=e,u=i-t,c=r-n;let h,p,g,m,d=0,f=1;for(m=0;m<4;++m){if(0===m&&(h=-u,p=-(o-t)),1===m&&(h=u,p=a-t),2===m&&(h=-c,p=-(s-n)),3===m&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>f)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<f&&(f=g)}}return!0}function um(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ca(e,t){return e??t}function SZ(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function xZ(e,t,n){return OF(n)?function jLe(e,t,n){const i=n.width(),r=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+ca(t.x1,.5)*i,n.y1+ca(t.y1,.5)*r,Math.max(i,r)*ca(t.r1,0),n.x1+ca(t.x2,.5)*i,n.y1+ca(t.y2,.5)*r,Math.max(i,r)*ca(t.r2,.5));else{const s=ca(t.x1,0),a=ca(t.y1,0),l=ca(t.x2,1),u=ca(t.y2,0);if(s!==l&&a!==u&&i!==r){const c=zc(Math.ceil(i),Math.ceil(r)),d=c.getContext("2d");return d.scale(i,r),d.fillStyle=SZ(d.createLinearGradient(s,a,l,u),t.stops),d.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}o=e.createLinearGradient(n.x1+s*i,n.y1+a*r,n.x1+l*i,n.y1+u*r)}return SZ(o,t.stops)}(e,n,t.bounds):n}function vC(e,t,n){return(n*=t.fillOpacity??1)>0&&(e.globalAlpha=n,e.fillStyle=xZ(e,t,t.fill),!0)}var ULe=[];function cm(e,t,n){var i=null!=(i=t.strokeWidth)?i:1;return!(i<=0)&&(n*=t.strokeOpacity??1)>0&&(e.globalAlpha=n,e.strokeStyle=xZ(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||ULe),e.lineDashOffset=t.strokeDashOffset||0),!0)}function HLe(e,t){return e.zindex-t.zindex||e.index-t.index}function YF(e){if(!e.zdirty)return e.zitems;var i,r,o,t=e.items,n=[];for(r=0,o=t.length;r<o;++r)(i=t[r]).index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(HLe)}function da(e,t){var i,r,n=e.items;if(!n||!n.length)return;const o=YF(e);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=o}for(i=0,r=n.length;i<r;++i)t(n[i])}function bC(e,t){var i,r,n=e.items;if(!n||!n.length)return null;const o=YF(e);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===o)for(r=(n=e.items).length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i;return null}function KF(e){return function(t,n,i){da(n,r=>{(!i||i.intersects(r.bounds))&&TZ(e,t,r,r)})}}function zLe(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&TZ(e,t,n.items[0],n.items)}}function TZ(e,t,n,i){var r=n.opacity??1;0!==r&&(e(t,i)||(um(t,n),n.fill&&vC(t,n,r)&&t.fill(),n.stroke&&cm(t,n,r)&&t.stroke()))}function wC(e){return e=e||gs,function(t,n,i,r,o,s){return i*=t.pixelRatio,r*=t.pixelRatio,bC(n,a=>{const l=a.bounds;if((!l||l.contains(o,s))&&l&&e(t,a,i,r,o,s))return a})}}function a1(e,t){return function(n,i,r,o){var c,s=Array.isArray(i)?i[0]:i,a=t??s.fill,l=s.stroke&&n.isPointInStroke;return l&&(c=s.strokeCap,n.lineWidth=s.strokeWidth??1,n.lineCap=c??"butt"),!e(n,i)&&(a&&n.isPointInPath(r,o)||l&&n.isPointInStroke(r,o))}}function XF(e){return wC(a1(e))}function ih(e,t){return"translate("+e+","+t+")"}function QF(e){return"rotate("+e+")"}function AZ(e){return ih(e.x||0,e.y||0)}function JF(e,t,n){function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=Xc),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:function i(s,a){s("transform",function WLe(e){return ih(e.x||0,e.y||0)+(e.angle?" "+QF(e.angle):"")}(a)),s("d",t(null,a))},bound:function r(s,a){return t(s1(s,a.angle),a),Tu(s,a).translate(a.x||0,a.y||0)},draw:KF(o),pick:XF(o),isect:n||WF(o)}}var YLe=JF("arc",function ILe(e,t){return SLe.context(e)(t)});function ZF(e,t,n){function o(l,u){l.beginPath(),t(l,u)}const s=a1(o);return{type:e,tag:"path",nested:!0,attr:function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))},bound:function r(l,u){var c=u.items;return 0===c.length?l:(t(s1(l),c),Tu(l,c[0]))},draw:zLe(o),pick:function a(l,u,c,d,f,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(f,h)?null:s(l,p,c*=l.pixelRatio,d*=l.pixelRatio)?p[0]:null},isect:qF,tip:n}}var JLe=ZF("area",function OLe(e,t){const n=t[0];return("horizontal"===n.orient?TLe:xLe).curve(RF(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function KLe(e,t){for(var s,a,n="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",r=e.length,o=1/0;--r>=0;)!1!==e[r].defined&&(a=Math.abs(e[r][i]-n))<o&&(o=a,s=e[r]);return s});function NZ(e,t){e.beginPath(),$F(t)?am(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function MZ(e){const t=ca(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function kZ(e,t){const n=MZ(t);e("d",am(null,t,n,n))}function l1(e,t,n,i){const r=MZ(t);e.beginPath(),am(e,t,(n||0)+r,(i||0)+r)}const o3e=a1(l1),s3e=a1(l1,!1),a3e=a1(l1,!0);var d3e={type:"group",tag:"g",nested:!1,attr:function e3e(e,t){e("transform",AZ(t))},bound:function r3e(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Tu(e,t),e.translate(t.x||0,t.y||0)},draw:function l3e(e,t,n,i){da(t,r=>{const o=r.x||0,s=r.y||0,a=r.strokeForeground,l=r.opacity??1;(r.stroke||r.fill)&&l&&(l1(e,r,o,s),um(e,r),r.fill&&vC(e,r,l)&&e.fill(),r.stroke&&!a&&cm(e,r,l)&&e.stroke()),e.save(),e.translate(o,s),r.clip&&NZ(e,r),n&&n.translate(-o,-s),da(r,u=>{("group"===u.marktype||null==i||i.includes(u.marktype))&&this.draw(e,u,n,i)}),n&&n.translate(o,s),e.restore(),a&&r.stroke&&l&&(l1(e,r,o,s),um(e,r),cm(e,r,l)&&e.stroke())})},pick:function u3e(e,t,n,i,r,o){if(t.bounds&&!t.bounds.contains(r,o)||!t.items)return null;const s=n*e.pixelRatio,a=i*e.pixelRatio;return bC(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(r,o))return;c=l.x||0,d=l.y||0;const g=l.clip;if(g&&(r<c||r>c+(l.width||0)||o<d||o>d+(l.height||0)))return;if(e.save(),e.translate(c,d),c=r-c,d=o-d,g&&$F(l)&&!a3e(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,_=!1!==t.interactive;return _&&m&&l.stroke&&s3e(e,l,s,a)?(e.restore(),l):(u=bC(l,y=>function c3e(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(y,c,d)?this.pick(y,n,i,c,d):null),!u&&_&&(l.fill||!m&&l.stroke)&&o3e(e,l,s,a)&&(u=l),e.restore(),u||null)})},isect:DZ,content:function i3e(e,t,n){e("clip-path",t.clip?BF(n,t,t):null)},background:function t3e(e,t){e("class","background"),e("aria-hidden",!0),kZ(e,t)},foreground:function n3e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?kZ(e,t):e("d","")}},u1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function eP(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function tP(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function nP(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function EC(e,t){return"center"===e?t/2:"right"===e?t:0}function DC(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var g3e={type:"image",tag:"image",nested:!1,attr:function f3e(e,t,n){const i=eP(t,n),r=tP(t,i),o=nP(t,i),s=(t.x||0)-EC(t.align,r),a=(t.y||0)-DC(t.baseline,o);e("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",u1["xmlns:xlink"],"xlink:href"),e("transform",ih(s,a)),e("width",r),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function h3e(e,t){const n=t.image,i=tP(t,n),r=nP(t,n),o=(t.x||0)-EC(t.align,i),s=(t.y||0)-DC(t.baseline,r);return e.set(o,s,o+i,s+r)},draw:function p3e(e,t,n){da(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=eP(i,this);let o=tP(i,r),s=nP(i,r);if(0===o||0===s)return;let u,c,d,f,a=(i.x||0)-EC(i.align,o),l=(i.y||0)-DC(i.baseline,s);!1!==i.aspect&&(c=r.width/r.height,d=i.width/i.height,c==c&&d==d&&c!==d&&(d<c?(f=o/c,l+=(s-f)/2,s=f):(f=s*c,a+=(o-f)/2,o=f))),(r.complete||r.toDataURL)&&(um(e,i),e.globalAlpha=null!=(u=i.opacity)?u:1,e.imageSmoothingEnabled=!1!==i.smooth,e.drawImage(r,a,l,o,s))})},pick:wC(),isect:gs,get:eP,xOffset:EC,yOffset:DC},m3e=ZF("line",function RLe(e,t){const n=t[0];return ALe.curve(RF(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function XLe(e,t){for(var r,o,n=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(r=e[i].x-t[0])*r+(o=e[i].y-t[1])*o<n)return e[i];return null});function CC(e,t){var n=t.path;if(null==n)return!0;var i=t.x||0,r=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Xc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=om(n)).path=n),a&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(a),t1(e,l,0,0,o,s),e.rotate(-a),e.translate(-i,-r)):t1(e,l,i,r,o,s)}var v3e={type:"path",tag:"path",nested:!1,attr:function _3e(e,t){(1!==(t.scaleX||1)||1!==(t.scaleY||1))&&e("vector-effect","non-scaling-stroke"),e("transform",function qLe(e){return ih(e.x||0,e.y||0)+(e.angle?" "+QF(e.angle):"")+(e.scaleX||e.scaleY?" "+function GLe(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function y3e(e,t){return CC(s1(e,t.angle),t)?e.set(0,0,0,0):Tu(e,t,!0)},draw:KF(CC),pick:XF(CC),isect:WF(CC)};function IZ(e,t){e.beginPath(),am(e,t)}var E3e={type:"rect",tag:"path",nested:!1,attr:function b3e(e,t){e("d",am(null,t))},bound:function w3e(e,t){var n,i;return Tu(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)},draw:KF(IZ),pick:XF(IZ),isect:DZ};function OZ(e,t,n){var i,r,o,s;return!(!t.stroke||!cm(e,t,n)||(i=t.x||0,r=t.y||0,o=null!=t.x2?t.x2:i,s=null!=t.y2?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,s),0))}var T3e={type:"rule",tag:"line",nested:!1,attr:function D3e(e,t){e("transform",AZ(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function C3e(e,t){var n,i;return Tu(e.set(n=t.x||0,i=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i),t)},draw:function S3e(e,t,n){da(t,i=>{if(!n||n.intersects(i.bounds)){var r=i.opacity??1;r&&OZ(e,i,r)&&(um(e,i),e.stroke())}})},pick:wC(function x3e(e,t,n,i){return!!e.isPointInStroke&&OZ(e,t,1)&&e.isPointInStroke(n,i)}),isect:CZ},A3e=JF("shape",function FLe(e,t){return(t.mark.shape||t.shape).context(e)(t)}),N3e=JF("symbol",function PLe(e,t){return MLe.context(e)(t)},qF);const RZ=yY();var Po={height:hl,measureWidth:iP,estimateWidth:SC,width:SC,canvas:FZ};function FZ(e){Po.width=e&&Zc?iP:SC}function SC(e,t){return PZ(td(e,t),hl(e))}function PZ(e,t){return~~(.8*e.length*t)}function iP(e,t){return hl(e)<=0||!(t=td(e,t))?0:LZ(t,xC(e))}function LZ(e,t){const n=`(${t}) ${e}`;let i=RZ.get(n);return void 0===i&&(Zc.font=t,i=Zc.measureText(e).width,RZ.set(n,i)),i}function hl(e){return null!=e.fontSize?+e.fontSize||0:11}function ed(e){return null!=e.lineHeight?e.lineHeight:hl(e)+2}function c1(e){return function M3e(e){return J(e)?e.length>1?e:e[0]:e}(e.lineBreak&&e.text&&!J(e.text)?e.text.split(e.lineBreak):e.text)}function rP(e){const t=c1(e);return(J(t)?t.length-1:0)*ed(e)}function td(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function I3e(e,t){var n=+e.limit,i=function k3e(e){if(Po.width===iP){const t=xC(e);return n=>LZ(n,t)}if(Po.width===SC){const t=hl(e);return n=>PZ(n,t)}return t=>Po.width(e,t)}(e);if(i(t)<n)return t;var l,r=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,a=t.length;if(n-=i(r),o){for(;s<a;)i(t.slice(l=s+a>>>1))>n?s=l+1:a=l;return r+t.slice(s)}for(;s<a;)i(t.slice(0,l=1+(s+a>>>1)))<n?s=l:a=l-1;return t.slice(0,s)+r}(e,n):n}function d1(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function xC(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+hl(e)+"px "+d1(e,t)}function oP(e){var t=e.baseline,n=hl(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*ed(e):"line-bottom"===t?.29*n-.5*ed(e):0)}FZ(!0);const O3e={left:"start",center:"middle",right:"end"},f1=new Jn;function TC(e){var r,t=e.x||0,n=e.y||0,i=e.radius||0;return i&&(r=(e.theta||0)-Zf,t+=i*Math.cos(r),n+=i*Math.sin(r)),f1.x1=t,f1.y1=n,f1}function sP(e,t,n){var d,i=Po.height(t),r=t.align,o=TC(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+oP(t)-Math.round(.8*i),c=c1(t);if(J(c)?(i+=ed(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,Po.width(t,h)),0)):d=Po.width(t,c),"center"===r?l-=d/2:"right"===r&&(l-=d),e.set(l+=s,u+=a,l+d,u+i),t.angle&&!n)e.rotate(t.angle*Xc,s,a);else if(2===n)return e.rotatedPoints(t.angle*Xc,s,a);return e}var $3e={type:"text",tag:"text",nested:!1,attr:function R3e(e,t){var l,n=t.dx||0,i=(t.dy||0)+oP(t),r=TC(t),o=r.x1,s=r.y1,a=t.angle||0;e("text-anchor",O3e[t.align]||"start"),a?(l=ih(o,s)+" "+QF(a),(n||i)&&(l+=" "+ih(n,i))):l=ih(o+n,s+i),e("transform",l)},bound:sP,draw:function F3e(e,t,n){da(t,i=>{var o,s,a,l,u,c,d,r=i.opacity??1;if(!(n&&!n.intersects(i.bounds)||0===r||i.fontSize<=0||null==i.text||0===i.text.length)){if(e.font=xC(i),e.textAlign=i.align||"left",s=(o=TC(i)).x1,a=o.y1,i.angle&&(e.save(),e.translate(s,a),e.rotate(i.angle*Xc),s=a=0),s+=i.dx||0,a+=(i.dy||0)+oP(i),c=c1(i),um(e,i),J(c))for(u=ed(i),l=0;l<c.length;++l)d=td(i,c[l]),i.fill&&vC(e,i,r)&&e.fillText(d,s,a),i.stroke&&cm(e,i,r)&&e.strokeText(d,s,a),a+=u;else d=td(i,c),i.fill&&vC(e,i,r)&&e.fillText(d,s,a),i.stroke&&cm(e,i,r)&&e.strokeText(d,s,a);i.angle&&e.restore()}})},pick:wC(function P3e(e,t,n,i,r,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=TC(t),a=s.x1,l=s.y1,u=sP(f1,t,1),c=-t.angle*Xc,d=Math.cos(c),f=Math.sin(c);return u.contains(d*r-f*o+(a-d*a+f*l),f*r+d*o+(l-f*a-d*l))}),isect:function L3e(e,t){const n=sP(f1,e,2);return lm(t,n[0],n[1],n[2],n[3])||lm(t,n[0],n[1],n[4],n[5])||lm(t,n[4],n[5],n[6],n[7])||lm(t,n[2],n[3],n[6],n[7])}},B3e=ZF("trail",function LLe(e,t){return kLe.context(e)(t)},function QLe(e,t){for(var i,r,n=e.length;--n>=0;)if(!1!==e[n].defined&&(i=e[n].x-t[0])*i+(r=e[n].y-t[1])*r<(i=e[n].size||1)*i)return e[n];return null}),Lo={arc:YLe,area:JLe,group:d3e,image:g3e,line:m3e,path:v3e,rect:E3e,rule:T3e,shape:A3e,symbol:N3e,text:$3e,trail:B3e};function aP(e,t,n){var i=Lo[e.mark.marktype];return i.nested&&(e=e.mark),(t||i.bound)(e.bounds||(e.bounds=new Jn),e,n)}var $Z={mark:null};function BZ(e,t,n){var a,l,u,c,i=Lo[e.marktype],r=i.bound,o=e.items,s=o&&o.length;if(i.nested)return s?u=o[0]:($Z.mark=e,u=$Z),c=aP(u,r,n),t&&t.union(c)||c;if(t=t||e.bounds&&e.bounds.clear()||new Jn,s)for(a=0,l=o.length;a<l;++a)t.union(aP(o[a],r,n));return e.bounds=t}const V3e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function VZ(e,t){return JSON.stringify(e,V3e,t)}function jZ(e){return UZ("string"==typeof e?JSON.parse(e):e)}function UZ(e){var i,r,o,t=e.marktype,n=e.items;if(n)for(r=0,o=n.length;r<o;++r)n[r][i=t?"mark":"group"]=e,n[r].zindex&&(n[r][i].zdirty=!0),"group"===(t||i)&&UZ(n[r]);return t&&BZ(e),e}class HZ{constructor(t){arguments.length?this.root=jZ(t):(this.root=zZ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new hC(this.root)])}toJSON(t){return VZ(this.root,t||0)}mark(t,n,i){const r=zZ(t,n=n||this.root.items[0]);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function zZ(e,t){const n={bounds:new Jn,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function nd(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function lP(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function fi(e,t,n,i){var o,r=e.childNodes[t];return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=nd(e.ownerDocument,n,i),e.insertBefore(r,o)),r}function Ds(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function GZ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function AC(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}class uP{constructor(t,n){this._active=null,this._handlers={},this._loader=t||hD(),this._tooltip=n||U3e}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const o=new MouseEvent(t.type,t),s=nd(null,"a");for(const a in r)s.setAttribute(a,r[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,i){n&&null!=n.tooltip&&(n=function j3e(e,t,n,i){var o,s,r=e&&e.mark;if(r&&(o=Lo[r.marktype]).tip){for((s=AC(t,n))[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(r.items,s)}return e}(n,t,this.canvas(),this._origin),this._tooltip.call(this._obj,this,t,n,i&&n&&n.tooltip||null))}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+r[0]+i.left,u=o.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}}function U3e(e,t,n,i){e.element().setAttribute("title",i||"")}class h1{constructor(t){this._el=null,this._bgcolor=null,this._loader=new mZ(t)}initialize(t,n,i,r,o){return this._el=t,this.resize(n,i,r,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const o=i._call;i._ready=i._loader.ready().then(s=>{s&&o(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const WZ="dragenter",NC="dragleave",qZ="dragover",cP="pointerdown",MC="pointermove",kC="pointerout",YZ="pointerover",dP="mousedown",KZ="mousemove",IC="mouseout",XZ="mouseover",OC="click",QZ="mousewheel",RC="touchstart",FC="touchmove",PC="touchend",X3e=["keydown","keypress","keyup",WZ,NC,qZ,cP,"pointerup",MC,kC,YZ,dP,"mouseup",KZ,IC,XZ,OC,"dblclick","wheel",QZ,RC,FC,PC],fP=MC,p1=IC,hP=OC;class g1 extends uP{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=X3e,this.pointermove=ZZ([MC,KZ],[YZ,XZ],[kC,IC]),this.dragover=ZZ([qZ],[WZ],[NC]),this.pointerout=eee([kC,IC]),this.dragleave=eee([NC])}initialize(t,n,i){return this._canvas=t&&lP(t,"canvas"),[OC,dP,cP,MC,kC,NC].forEach(r=>JZ(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(QZ,t)}pointerdown(t){this._down=this._active,this.fire(cP,t)}mousedown(t){this._down=this._active,this.fire(dP,t)}click(t){this._down===this._active&&(this.fire(OC,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(RC,t,!0)}touchmove(t){this.fire(FC,t,!0)}touchend(t){this.fire(PC,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===hP&&r&&r.href?this.handleHref(n,r,r.href):(t===fP||t===p1)&&this.handleTooltip(n,r,t!==p1),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(JZ(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],o=this._handlerIndex(r,t,n);return o>=0&&r.splice(o,1),this}pickEvent(t){const n=AC(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,o){const s=this.context();return Lo[t.marktype].pick.call(this,s,t,n,i,r,o)}}function JZ(e,t){(e=>e===RC||e===FC||e===PC?[RC,FC,PC]:[e])(t).forEach(n=>function J3e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}(e,n))}function m1(e,t,n){t.forEach(i=>e.fire(i,n))}function ZZ(e,t,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r||((!r||!r.exit)&&m1(this,n,i),this._active=o,m1(this,t,i)),m1(this,e,i)}}function eee(e){return function(t){m1(this,e,t),this._active=null}}class LC extends h1{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Jn,this._tempb=new Jn}initialize(t,n,i,r,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:zc(1,1),t&&this._canvas&&(Ds(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,o)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)!function e$e(e,t,n,i,r,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&null!=e.parentNode,a=e.getContext("2d"),l=s?function Z3e(){return typeof window<"u"&&window.devicePixelRatio||1}():r;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1]),e}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||Q("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,o=this._width,s=this._height,a=this._dirty,l=t$e(r,o,s);i.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):function n$e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(i,l.intersect(a),r);return this.clear(-r[0],-r[1],o,s),this.draw(i,t,u,n),i.restore(),a.clear(),this}draw(t,n,i,r){if("group"!==n.marktype&&null!=r&&!r.includes(n.marktype))return;const o=Lo[n.marktype];n.clip&&function ZLe(e,t){var n=t.clip;e.save(),nt(n)?(e.beginPath(),n(e),e.clip()):NZ(e,t.group)}(t,n),o.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const o=this._options,s=this.context();"pdf"!==o.type&&!o.externalContext&&s.clearRect(t,n,i,r),null!=this._bgcolor&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const t$e=(e,t,n)=>(new Jn).set(0,0,t,n).translate(-e[0],-e[1]);class tee extends uP{constructor(t,n){super(t,n);const i=this;i._hrefHandler=pP(i,(r,o)=>{o&&o.href&&i.handleHref(r,o,o.href)}),i._tooltipHandler=pP(i,(r,o)=>{i.handleTooltip(r,o,r.type!==p1)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(hP,this._hrefHandler),r.removeEventListener(fP,this._tooltipHandler),r.removeEventListener(p1,this._tooltipHandler)),this._svg=r=t&&lP(t,"svg"),r&&(r.addEventListener(hP,this._hrefHandler),r.addEventListener(fP,this._tooltipHandler),r.addEventListener(p1,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:pP(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],o=this._handlerIndex(r,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(i,r[o].listener),r.splice(o,1)),this}}const pP=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},nee="aria-hidden",gP="aria-label",mP="role",_P="aria-roledescription",iee="graphics-object",yP="graphics-symbol",ree=(e,t,n)=>({[mP]:e,[_P]:t,[gP]:n||void 0}),i$e=oa(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),oee={axis:{desc:"axis",caption:function s$e(e){const t=e.datum,n=e.orient,i=t.title?cee(e):null,r=e.context,o=r.scales[t.scale].value,s=r.dataflow.locale(),a=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(i?` titled '${i}'`:"")+` for a ${rm(a)?"discrete":a} scale with ${nZ(s,o,e)}`}},legend:{desc:"legend",caption:function a$e(e){const t=e.datum,n=t.title?cee(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,o=Object.keys(r),s=e.context,a=s.scales[r[o[0]]].value,l=s.dataflow.locale();return function u$e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(i)+(n?` titled '${n}'`:"")+` for ${function l$e(e){return e=e.map(t=>t+("fill"===t||"stroke"===t?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+mt(e)}(o)} with ${nZ(l,a,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${uee(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${uee(e)}'`}},see={ariaRole:mP,ariaRoleDescription:_P,description:gP};function aee(e,t){const n=!1===t.aria;if(e(nee,n||void 0),n||null==t.description)for(const i in see)e(see[i],void 0);else{const i=t.mark.marktype;e(gP,t.description),e(mP,t.ariaRole||("group"===i?iee:yP)),e(_P,t.ariaRoleDescription||`${i} mark`)}}function lee(e){return!1===e.aria?{[nee]:!0}:i$e[e.role]?null:oee[e.role]?function o$e(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return ree(t.role||yP,t.desc,n.description||i(n))}catch{return null}}(e,oee[e.role]):function r$e(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some(i=>null!=i.description&&!1!==i.aria);return ree(n?iee:yP,`${t} mark container`,e.description)}(e)}function uee(e){return ve(e.text).join(" ")}function cee(e){try{return ve(mt(e.items).items[0].text).join(" ")}catch{return null}}const dee=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function vP(){let e="",t="",n="";const i=[],r=()=>t=n="",s=(l,u)=>(null!=u&&(t+=` ${l}="${(e=>dee(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))(u)}"`),a),a={open(l){(l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)})(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)s(h,f[h]);return a},close(){const l=i.pop();return e+=t?t+(n?`>${n}</${l}>`:"/>"):`</${l}>`,r(),a},attr:s,text:l=>(n+=dee(l),a),toString:()=>e};return a}const fee=e=>hee(vP(),e)+"";function hee(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)3===i.nodeType?e.text(i.nodeValue):hee(e,i)}return e.close()}const $C={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},BC={blend:"mix-blend-mode"},pee={fill:"none","stroke-miterlimit":10},gee="http://www.w3.org/2000/xmlns/",hi=u1.xmlns;class bP extends h1{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,o){return this._defs={},this._clearDefs(),t&&(this._svg=fi(t,0,"svg",hi),this._svg.setAttributeNS(gee,"xmlns",hi),this._svg.setAttributeNS(gee,"xmlns:xlink",u1["xmlns:xlink"]),this._svg.setAttribute("version",u1.version),this._svg.setAttribute("class","marks"),Ds(t,1),this._root=fi(this._svg,0,"g",hi),id(this._root,pee),Ds(this._svg,1)),this.background(this._bgcolor),super.initialize(t,n,i,r,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(id(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=fi(t,0,"rect",hi),id(i,{width:this._width,height:this._height,fill:n}));const r=fee(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Ds(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(i=t[a],r=i.mark,r.marktype!==o&&(o=r.marktype,s=Lo[o]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,mee(i,n),r.items.forEach(c=>{c.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):i._svg&&(u=i._svg.parentNode,u&&u.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(i._svg&&i._svg.ownerSVGElement?this._update(s,i._svg,i):(this._dirtyAll=!1,mee(i,n)),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Lo[s],l=!1===n.interactive?"none":null,u="g"===a.tag,c=_ee(n,t,i,"g",o);if("group"!==s&&null!=r&&!r.includes(s))return Ds(c,0),n._svg;c.setAttribute("class",GZ(n));const d=lee(n);for(const g in d)Mr(c,g,d[g]);u||Mr(c,"pointer-events",l),Mr(c,"clip-path",n.clip?BF(this,n,n.group):null);let f=null,h=0;const p=g=>{const m=this.isDirty(g),_=_ee(g,c,f,a.tag,o);m&&(this._update(a,_,g),u&&function h$e(e,t,n,i){t=t.lastChild.previousSibling;let r,o=0;da(n,s=>{r=e.mark(t,s,r,i),++o}),Ds(t,1+o)}(this,_,g,r)),f=_,++h};return a.nested?n.items.length&&p(n.items[0]):da(n,p),Ds(c,h),c}_update(t,n,i){Au=n,ur=n.__values__,aee(y1,i),t.attr(y1,i,this);const r=g$e[t.type];r&&r.call(this,t,n,i),Au&&this.style(Au,i)}style(t,n){if(null!=n){for(const i in $C){let r="font"===i?d1(n):n[i];if(r===ur[i])continue;const o=$C[i];null==r?t.removeAttribute(o):(OF(r)&&(r=rZ(r,this._defs.gradient,yee())),t.setAttribute(o,r+"")),ur[i]=r}for(const i in BC)VC(t,BC[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const o in n.gradient)i||(n.el=i=fi(t,1,"defs",hi)),r=d$e(i,n.gradient[o],r);for(const o in n.clipping)i||(n.el=i=fi(t,1,"defs",hi)),r=f$e(i,n.clipping[o],r);i&&(0===r?(t.removeChild(i),n.el=null):Ds(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function mee(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function d$e(e,t,n){let i,r,o;if("radial"===t.gradient){let s=fi(e,n++,"pattern",hi);id(s,{id:"p_"+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=fi(s,0,"rect",hi),id(s,{width:1,height:1,fill:`url(${yee()}#${t.id})`}),id(e=fi(e,n++,"radialGradient",hi),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else id(e=fi(e,n++,"linearGradient",hi),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)o=fi(e,i,"stop",hi),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return Ds(e,i),n}function f$e(e,t,n){let i;return(e=fi(e,n,"clipPath",hi)).setAttribute("id",t.id),t.path?(i=fi(e,0,"path",hi),i.setAttribute("d",t.path)):(i=fi(e,0,"rect",hi),id(i,{x:0,y:0,width:t.width,height:t.height})),Ds(e,1),n+1}function _ee(e,t,n,i,r){let s,o=e._svg;if(!o&&(s=t.ownerDocument,o=nd(s,i,hi),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===i))){const a=nd(s,"path",hi);o.appendChild(a),a.__data__=e;const l=nd(s,"g",hi);o.appendChild(l),l.__data__=e;const u=nd(s,"path",hi);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==r||function p$e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}let Au=null,ur=null;const g$e={group(e,t,n){const i=Au=t.childNodes[2];ur=i.__values__,e.foreground(y1,n,this),ur=t.__values__,Au=t.childNodes[1],e.content(y1,n,this);const r=Au=t.childNodes[0];e.background(y1,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==ur.events&&(Mr(i,"pointer-events",o),Mr(r,"pointer-events",o),ur.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Mr(i,"display",null),this.style(r,n),Mr(r,"stroke",null),s&&(n.fill=null),ur=i.__values__,this.style(i,n),s&&(n.fill=s),Au=null}else Mr(i,"display","none")},image(e,t,n){!1===n.smooth?(VC(t,"image-rendering","optimizeSpeed"),VC(t,"image-rendering","pixelated")):VC(t,"image-rendering",null)},text(e,t,n){const i=c1(n);let r,o,s,a;J(i)?(o=i.map(l=>td(n,l)),r=o.join("\n"),r!==ur.text&&(Ds(t,0),s=t.ownerDocument,a=ed(n),o.forEach((l,u)=>{const c=nd(s,"tspan",hi);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ur.text=r)):(o=td(n,i),o!==ur.text&&(t.textContent=o,ur.text=o)),Mr(t,"font-family",d1(n)),Mr(t,"font-size",hl(n)+"px"),Mr(t,"font-style",n.fontStyle),Mr(t,"font-variant",n.fontVariant),Mr(t,"font-weight",n.fontWeight)}};function y1(e,t,n){t!==ur[e]&&(n?function m$e(e,t,n,i){null!=n?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}(Au,e,t,n):Mr(Au,e,t),ur[e]=t)}function VC(e,t,n){n!==ur[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),ur[t]=n)}function id(e,t){for(const n in t)Mr(e,n,t[n])}function Mr(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function yee(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class vee extends h1{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=vP();n.open("svg",it({},u1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&"transparent"!==i&&"none"!==i&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",pee,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=Lo[n.marktype],r=i.tag,o=[aee,i.attr];t.open("g",{class:GZ(n),"clip-path":n.clip?BF(this,n,n.group):null},lee(n),{"pointer-events":"g"!==r&&!1===n.interactive?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(r,this.attr(n,a,o,"g"!==r?r:null)),"text"===r){const u=c1(a);if(J(u)){const c={x:0,dy:ed(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?c:null).text(td(a,u[d])).close()}else t.text(td(a,u))}else if("g"===r){const u=a.strokeForeground,c=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,i.background,"bgrect")).close(),t.open("g",this.attr(n,a,i.content)),da(a,f=>this.mark(t,f)),t.close(),u&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,i.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):da(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(i)?i.forEach(a=>a(s,n,this)):i(s,n,this),r&&function _$e(e,t,n,i,r){let o;if(null==t||("bgrect"===i&&!1===n.interactive&&(e["pointer-events"]="none"),"bgfore"===i&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill)))return e;"image"===i&&!1===t.smooth&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),"text"===i&&(e["font-family"]=d1(t),e["font-size"]=hl(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in $C){let a=t[s];const l=$C[s];"transparent"===a&&("fill"===l||"stroke"===l)||null!=a&&(OF(a)&&(a=rZ(a,r.gradient,"")),e[l]=a)}for(const s in BC){const a=t[s];null!=a&&(o=o||[],o.push(`${BC[s]}: ${a};`))}o&&(e.style=o.join(" "))}(o,n,t,r,this._defs),o}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;"radial"===s.gradient?(t.open("pattern",{id:"p_"+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in i){const s=i[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}const fa={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function y$e(e){fa.svgMarkTypes=e.svgMarkTypes??["text"],fa.svgOnTop=e.svgOnTop??!0,fa.debug=e.debug??!1}class wP extends h1{constructor(t){super(t),this._svgRenderer=new bP(t),this._canvasRenderer=new LC(t)}initialize(t,n,i,r,o){this._root_el=fi(t,0,"div");const s=fi(this._root_el,0,"div"),a=fi(this._root_el,1,"div");return this._root_el.style.position="relative",fa.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=fa.svgOnTop?a:s,this._canvasEl=fa.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,o),this._svgRenderer.initialize(this._svgEl,n,i,r,o),super.initialize(t,n,i,r,o)}dirty(t){return fa.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!fa.svgMarkTypes.includes(o));this._svgRenderer.render(t,fa.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return fa.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class bee extends g1{constructor(t,n){super(t,n)}initialize(t,n,i){const r=fi(fi(t,0,"div"),fa.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const rd={Canvas:"canvas",PNG:"png",SVG:"svg",Hybrid:"hybrid",None:"none"},rh={};function jC(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(rh[e]=t,this):rh[e]}function xee(e,t,n){const i=[],r=(new Jn).union(t),o=e.marktype;return o?Tee(e,r,n,i):"group"===o?Aee(e,r,n,i):Q("Intersect scene must be mark node or group item.")}function Tee(e,t,n,i){if(function v$e(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const r=e.items,o=e.marktype,s=r.length;let a=0;if("group"===o)for(;a<s;++a)Aee(r[a],t,n,i);else for(const l=Lo[o].isect;a<s;++a){const u=r[a];Nee(u,t,l)&&i.push(u)}}return i}function Aee(e,t,n,i){n&&n(e.mark)&&Nee(e,t,Lo.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)Tee(r[l],t,n,i);t.translate(s,a)}return i}function Nee(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}rh.canvas=rh.png={renderer:LC,headless:LC,handler:g1},rh.svg={renderer:bP,headless:vee,handler:tee},rh.hybrid={renderer:wP,headless:wP,handler:bee},rh.none={};const EP=new Jn;function Mee(e){const t=e.clip;if(nt(t))t(s1(EP.clear()));else{if(!t)return;EP.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(EP)}function DP(e,t,n){return e===t||("path"===n?kee(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ct(e)&&Ct(t)?Math.abs(e-t)<=1e-9:e&&t&&(ye(e)||ye(t))?function w$e(e,t){var r,o,n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(!DP(e[r=n[o]],t[r],r))return!1;return typeof e==typeof t}(e,t):e==t)}function kee(e,t){return DP(om(e),om(t))}function E$e(){gZ(),function WPe(){iZ=0}()}const dm="top",ha="left",pa="right",od="bottom",CP="start",SP="middle",kr="end",UC="group",xP="axis",TP="title",AP="legend",Iee="row-header",Oee="row-footer",Fee="column-header",Pee="column-footer",Lee="column-title",NP="none",HC="all",MP="each",kP="flush",sd="column",ad="row";function jee(e){Y.call(this,null,e)}function zC(e,t,n){return t(e.bounds.clear(),e,n)}pe(jee,Y,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,o=Lo[r],s=o.bound;let l,a=i.bounds;if(o.nested)i.items.length&&n.dirty(i.items[0]),a=zC(i,s),i.items.forEach(u=>{u.bounds.clear().union(a)});else if(r===UC||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),i.items.forEach(u=>a.union(zC(u,s))),i.role){case xP:case AP:case TP:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(zC(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(zC(u,s))}),l&&(a.clear(),i.items.forEach(u=>a.union(u.bounds)));return Mee(i),t.modifies("bounds")}});const Uee=":vega_identifier:";function IP(e){Y.call(this,0,e)}function Hee(e){Y.call(this,null,e)}function zee(e){Y.call(this,null,e)}IP.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},pe(IP,Y,{transform(e,t){const n=function R$e(e){return e._signals[Uee]||(e._signals[Uee]=e.add(0))}(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,o=>o[i]=o[i]||++r),n.set(this.value=r),t}}),pe(Hee,Y,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function F$e(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===UC?hC:fC;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const Gee={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>r&&Wee(n.bounds,i.bounds,t)?i.opacity=0:(n=i,1))}},Wee=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),qee=(e,t)=>{for(var o,n=1,i=e.length,r=e[0].bounds;n<i;r=o,++n)if(Wee(r,o=e[n].bounds,t))return!0},P$e=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Yee=e=>(e.forEach(t=>t.opacity=1),e),Kee=(e,t)=>e.reflow(t.modified()).modifies("opacity");function Xee(e){Y.call(this,null,e)}pe(zee,Y,{transform(e,t){const n=Gee[e.method]||Gee.parity,i=e.separation||0;let o,s,r=t.materialize(t.SOURCE).source;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(Yee(r),t=Kee(t,e)),t;if(r=r.filter(P$e),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=Yee(r),t=Kee(t,e),o.length>=3&&qee(o,i)){do{o=n(o,i)}while(o.length>=3&&qee(o,i));o.length<3&&!mt(r).opacity&&(o.length>1&&(mt(o).opacity=0),mt(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=((e,t,n)=>{var i=e.range(),r=new Jn;return t===dm||t===od?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),o=>r.encloses(o.bounds)})(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}}),pe(Xee,Y,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const cr=new Jn;function fm(e,t,n){return e[t]===n?0:(e[t]=n,1)}function $$e(e){var t=e.items[0].orient;return t===ha||t===pa}function V$e(e,t,n,i){var b,w,r=t.items[0],o=r.datum,s=null!=r.translate?r.translate:.5,a=r.orient,l=function B$e(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(o),u=r.range,c=r.offset,d=r.position,f=r.minExtent,h=r.maxExtent,p=o.title&&r.items[l[2]].items[0],g=r.titlePadding,m=r.bounds,_=p&&rP(p),y=0,v=0;switch(cr.clear().union(m),m.clear(),(b=l[0])>-1&&m.union(r.items[b].bounds),(b=l[1])>-1&&m.union(r.items[b].bounds),a){case dm:y=d||0,v=-c,w=Math.max(f,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),p&&GC(e,p,w,g,_,0,-1,m);break;case ha:y=-c,v=d||0,w=Math.max(f,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),p&&GC(e,p,w,g,_,1,-1,m);break;case pa:y=n+c,v=d||0,w=Math.max(f,Math.min(h,m.x2)),m.add(0,0).add(w,u),p&&GC(e,p,w,g,_,1,1,m);break;case od:y=d||0,v=i+c,w=Math.max(f,Math.min(h,m.y2)),m.add(0,0).add(u,w),p&&GC(e,p,w,g,0,0,1,m);break;default:y=r.x,v=r.y}return Tu(m.translate(y,v),r),fm(r,"x",y+s)|fm(r,"y",v+s)&&(r.bounds=cr,e.dirty(r),r.bounds=m,e.dirty(r)),r.mark.bounds.clear().union(m)}function GC(e,t,n,i,r,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+r+i);let c=0,d=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const Qee=(e,t)=>Math.floor(Math.min(e,t)),Jee=(e,t)=>Math.ceil(Math.max(e,t));function U$e(e){return(new Jn).set(0,0,e.width||0,e.height||0)}function H$e(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function gn(e,t,n){return(ye(e)?e[t]:e)??(void 0!==n?n:0)}function Zee(e){return e<0?Math.ceil(-e):0}function ete(e,t,n){var D,E,C,N,k,R,F,P,x,S,T,i=!n.nodirty,r=n.bounds===kP?U$e:H$e,o=cr.set(0,0,0,0),s=gn(n.align,sd),a=gn(n.align,ad),l=gn(n.padding,sd),u=gn(n.padding,ad),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),g=0,m=Array(f),_=Array(d),y=0,v=Array(f),b=Array(f),w=Array(f);for(E=0;E<c;++E)p[E]=0;for(E=0;E<d;++E)_[E]=0;for(E=0;E<f;++E)k=w[E]=r(R=t[E]),R.x=R.x||0,v[E]=0,R.y=R.y||0,b[E]=0,C=E%c,N=~~(E/c),g=Math.max(g,F=Math.ceil(k.x2)),y=Math.max(y,P=Math.ceil(k.y2)),p[C]=Math.max(p[C],F),_[N]=Math.max(_[N],P),h[E]=l+Zee(k.x1),m[E]=u+Zee(k.y1),i&&e.dirty(t[E]);for(E=0;E<f;++E)E%c==0&&(h[E]=0),E<c&&(m[E]=0);if(s===MP)for(C=1;C<c;++C){for(T=0,E=C;E<f;E+=c)T<h[E]&&(T=h[E]);for(E=C;E<f;E+=c)h[E]=T+p[C-1]}else if(s===HC){for(T=0,E=0;E<f;++E)E%c&&T<h[E]&&(T=h[E]);for(E=0;E<f;++E)E%c&&(h[E]=T+g)}else for(s=!1,C=1;C<c;++C)for(E=C;E<f;E+=c)h[E]+=p[C-1];if(a===MP)for(N=1;N<d;++N){for(T=0,D=(E=N*c)+c;E<D;++E)T<m[E]&&(T=m[E]);for(E=N*c;E<D;++E)m[E]=T+_[N-1]}else if(a===HC){for(T=0,E=c;E<f;++E)T<m[E]&&(T=m[E]);for(E=c;E<f;++E)m[E]=T+y}else for(a=!1,N=1;N<d;++N)for(D=(E=N*c)+c;E<D;++E)m[E]+=_[N-1];for(x=0,E=0;E<f;++E)v[E]+=(x=h[E]+(E%c?x:0))-t[E].x;for(C=0;C<c;++C)for(S=0,E=C;E<f;E+=c)b[E]+=(S+=m[E])-t[E].y;if(s&&gn(n.center,sd)&&d>1)for(E=0;E<f;++E)(x=(k=s===HC?g:p[E%c])-w[E].x2-t[E].x-v[E])>0&&(v[E]+=x/2);if(a&&gn(n.center,ad)&&1!==c)for(E=0;E<f;++E)(S=(k=a===HC?y:_[~~(E/c)])-w[E].y2-t[E].y-b[E])>0&&(b[E]+=S/2);for(E=0;E<f;++E)o.union(w[E].translate(v[E],b[E]));switch(x=gn(n.anchor,"x"),S=gn(n.anchor,"y"),gn(n.anchor,sd)){case kr:x-=o.width();break;case SP:x-=o.width()/2}switch(gn(n.anchor,ad)){case kr:S-=o.height();break;case SP:S-=o.height()/2}for(x=Math.round(x),S=Math.round(S),o.clear(),E=0;E<f;++E)t[E].mark.bounds.clear();for(E=0;E<f;++E)(R=t[E]).x+=v[E]+=x,R.y+=b[E]+=S,o.union(R.mark.bounds.union(R.bounds.translate(v[E],b[E]))),i&&e.dirty(R);return o}function G$e(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function W$e(e,t){return e.bounds[t]}function WC(e,t,n,i,r,o,s,a,l,u,c,d,f,h){var _,y,v,b,w,D,E,C,N,p=n.length,g=0,m=0;if(!p)return g;for(_=c;_<p;_+=d)n[_]&&(g=s(g,l(n[_],u)));if(!t.length)return g;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),g+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(_=c,y=0,b=t.length;y<b;++y,_+=d){for(w=(D=t[y]).mark.bounds,v=_;v>=0&&null==(E=n[v]);v-=f);a?(C=null==h?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),N=g):(C=g,N=null==h?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),w.union(D.bounds.translate(C-(D.x||0),N-(D.y||0))),D.x=C,D.y=N,e.dirty(D),m=s(m,w[u])}return m}function tte(e,t,n,i,r,o){if(t){e.dirty(t);var s=n,a=n;i?s=Math.round(r.x1+o*r.width()):a=Math.round(r.y1+o*r.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function K$e(e,t,n,i,r,o,s){const a=function q$e(e,t){const n=e[t]||{};return(i,r)=>null!=n[i]?n[i]:null!=e[i]?e[i]:r}(n,t),l=function Y$e(e,t){let n=-1/0;return e.forEach(i=>{null!=i.offset&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}(e,a("offset",0)),u=a("anchor",CP),c=u===kr?1:u===SP?.5:0,d={align:MP,bounds:a("bounds",kP),columns:"vertical"===a("direction")?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case ha:d.anchor={x:Math.floor(i.x1)-l,column:kr,y:c*(s||i.height()+2*i.y1),row:u};break;case pa:d.anchor={x:Math.ceil(i.x2)+l,y:c*(s||i.height()+2*i.y1),row:u};break;case dm:d.anchor={y:Math.floor(r.y1)-l,row:kr,x:c*(o||r.width()+2*r.x1),column:u};break;case od:d.anchor={y:Math.ceil(r.y2)+l,x:c*(o||r.width()+2*r.x1),column:u};break;case"top-left":d.anchor={x:l,y:l};break;case"top-right":d.anchor={x:o-l,y:l,column:kr};break;case"bottom-left":d.anchor={x:l,y:s-l,row:kr};break;case"bottom-right":d.anchor={x:o-l,y:s-l,column:kr,row:kr}}return d}function X$e(e,t){var l,u,n=t.items[0],i=n.datum,r=n.orient,o=n.bounds,s=n.x,a=n.y;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),function J$e(e,t,n){var i=t.padding,r=i-n.x,o=i-n.y;if(t.datum.title){var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=i-s.x,c=i-s.y;switch(s.orient){case ha:r+=Math.ceil(s.bounds.width())+l;break;case pa:case od:break;default:o+=s.bounds.height()+l}switch((r||o)&&v1(e,n,r,o),s.orient){case ha:c+=hm(t,n,s,a,1,1);break;case pa:u+=hm(t,n,s,kr,0,0)+l,c+=hm(t,n,s,a,1,1);break;case od:u+=hm(t,n,s,a,0,0),c+=hm(t,n,s,kr,-1,0,1)+l;break;default:u+=hm(t,n,s,a,0,0)}(u||c)&&v1(e,s,u,c),(u=Math.round(s.bounds.x1-i))<0&&(v1(e,n,-u,0),v1(e,s,-u,0))}else(r||o)&&v1(e,n,r,o)}(e,n,n.items[0].items[0]),o=function Q$e(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),"symbol"===i.type&&function Z$e(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}(n.items[0].items[0].items[0].items),r!==NP&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Tu(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function hm(e,t,n,i,r,o,s){const l=n.datum.vgrad,c=("symbol"===e.datum.type||!o&&l||s?t:t.items[0]).bounds[r?"y2":"x2"]-e.padding,d=l&&o?c:0,f=l&&o?0:c,h=r<=0?0:rP(n);return Math.round(i===CP?d:i===kr?f-h:.5*(c-h))}function v1(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function nte(e){Y.call(this,null,e)}function ite(e,t){let n=0;if(void 0===t)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function rte(e){Y.call(this,null,e)}function ote(e){Y.call(this,null,e)}function r5e(){return It({})}function ste(e){Y.call(this,null,e)}function ate(e){Y.call(this,[],e)}pe(nte,Y,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&function z$e(e,t,n){var c,d,f,h,p,g,m,i=function j$e(e){var r,o,t=e.items,n=t.length,i=0;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(o=(r=t[i]).items,r.marktype===UC)switch(r.role){case xP:case AP:case TP:break;case Iee:s.rowheaders.push(...o);break;case Oee:s.rowfooters.push(...o);break;case Fee:s.colheaders.push(...o);break;case Pee:s.colfooters.push(...o);break;case"row-title":s.rowtitle=o[0];break;case Lee:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}(t),r=i.marks,o=n.bounds===kP?G$e:W$e,s=n.offset,a=n.columns||r.length,l=a<=0?1:Math.ceil(r.length/a),u=l*a;const _=ete(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(g=gn(n.headerBand,ad,null),c=WC(e,i.rowheaders,r,0,l,-gn(s,"rowHeader"),Qee,0,o,"x1",0,a,1,g)),i.colheaders&&(g=gn(n.headerBand,sd,null),d=WC(e,i.colheaders,r,0,a,-gn(s,"columnHeader"),Qee,1,o,"y1",0,1,a,g)),i.rowfooters&&(g=gn(n.footerBand,ad,null),f=WC(e,i.rowfooters,r,0,l,gn(s,"rowFooter"),Jee,0,o,"x2",a-1,a,1,g)),i.colfooters&&(g=gn(n.footerBand,sd,null),h=WC(e,i.colfooters,r,0,a,gn(s,"columnFooter"),Jee,1,o,"y2",u-a,1,a,g)),i.rowtitle&&(p=gn(n.titleAnchor,ad),m=gn(s,"rowTitle"),m=p===kr?f+m:c-m,g=gn(n.titleBand,ad,.5),tte(e,i.rowtitle,m,0,_,g)),i.coltitle&&(p=gn(n.titleAnchor,sd),m=gn(s,"columnTitle"),m=p===kr?h+m:d-m,g=gn(n.titleBand,sd,.5),tte(e,i.coltitle,m,1,_,g))}(n,i,e.layout),function n5e(e,t,n){var c,d,f,p,g,i=t.items,r=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=(new Jn).set(0,0,r,o),a=s.clone(),l=s.clone(),u=[];for(p=0,g=i.length;p<g;++p)switch(d=i[p],d.role){case xP:($$e(d)?a:l).union(V$e(e,d,r,o));break;case TP:c=d;break;case AP:u.push(X$e(e,d));break;case"frame":case"scope":case Iee:case Oee:case"row-title":case Fee:case Pee:case Lee:a.union(d.bounds),l.union(d.bounds);break;default:s.union(d.bounds)}if(u.length){const m={};u.forEach(_=>{(f=_.orient||pa)!==NP&&(m[f]||(m[f]=[])).push(_)});for(const _ in m){const y=m[_];ete(e,y,K$e(y,_,n.legends,a,l,r,o))}u.forEach(_=>{const y=_.bounds;if(y.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=y,e.dirty(_)),!n.autosize||"fit"!==n.autosize.type&&"fit-x"!==n.autosize.type&&"fit-y"!==n.autosize.type)s.union(y);else switch(_.orient){case ha:case pa:s.add(y.x1,0).add(y.x2,0);break;case dm:case od:s.add(0,y.y1).add(0,y.y2)}})}s.union(a).union(l),c&&s.union(function e5e(e,t,n,i,r){var v,o=t.items[0],a=o.orient,l=o.anchor,u=o.offset,c=o.padding,d=o.items[0].items[0],f=o.items[1]&&o.items[1].items[0],h=a===ha||a===pa?i:n,p=0,g=0,m=0,_=0,y=0;if(o.frame!==UC?a===ha?(p=r.y2,h=r.y1):a===pa?(p=r.y1,h=r.y2):(p=r.x1,h=r.x2):a===ha&&(p=i,h=0),v=l===CP?p:l===kr?h:(p+h)/2,f&&f.text){switch(a){case dm:case od:y=d.bounds.height()+c;break;case ha:_=d.bounds.width()+c;break;case pa:_=-d.bounds.width()-c}cr.clear().union(f.bounds),cr.translate(_-(f.x||0),y-(f.y||0)),fm(f,"x",_)|fm(f,"y",y)&&(e.dirty(f),f.bounds.clear().union(cr),f.mark.bounds.clear().union(cr),e.dirty(f)),cr.clear().union(f.bounds)}else cr.clear();switch(cr.union(d.bounds),a){case dm:g=v,m=r.y1-cr.height()-u;break;case ha:g=r.x1-cr.width()-u,m=v;break;case pa:g=r.x2+cr.width()+u,m=v;break;case od:g=v,m=r.y2+u;break;default:g=o.x,m=o.y}return fm(o,"x",g)|fm(o,"y",m)&&(cr.translate(g,m),e.dirty(o),o.bounds.clear().union(cr),t.bounds.clear().union(cr),e.dirty(o)),o.bounds}(e,c,r,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),function i5e(e,t,n,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if("padding"===r.contains){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===NP?(u=0,d=0,l=s,c=a):"fit"===o?(l=Math.max(0,s-u-f),c=Math.max(0,a-d-h)):"fit-x"===o?(l=Math.max(0,s-u-f),a=c+d+h):"fit-y"===o?(s=l+u+f,c=Math.max(0,a-d-h)):"pad"===o&&(s=l+u+f,a=c+d+h),e._resizeView(s,a,l,c,[u,d],r.resize)}(e,t,s,n)}(n,i,e)}),function t5e(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?t.reflow():t}}),pe(rte,Y,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.scale,a=MF(o,e.count??(e.values?e.values.length:10),e.minstep),l=e.format||KJ(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?YJ(o,e.values,a):kF(o,a);return r&&(i.rem=r),r=u.map((c,d)=>It({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&r.length&&r.push(It({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}}),pe(ote,Y,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||r5e,o=e.key||Fe,s=this.value;return J(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(o))&&Q("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=function o5e(e){const t=Og().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,i.add.push(u)):i.mod.push(u):(u=r(a),s.set(l,u),i.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,i.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}}),pe(ste,Y,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,o=t.encode;if(J(o)){if(!n.changed()&&!o.every(d=>r[d]))return t.StopPropagation;o=o[0],n.encode=null}var s="enter"===o,a=r.update||Ic,l=r.enter||Ic,u=r.exit||Ic,c=(o&&!s?r[o]:a)||Ic;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==Ic&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Ic&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),s||c!==Ic){const d=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(d,f=>{const h=l(f,e)||i;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||i)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),pe(ate,Y,{transform(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var f,h,p,g,m,n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.type||lC,s=e.scale,a=+e.limit,l=MF(s,e.count??5,e.minstep),c=e.format||ZJ(n,s,l,o,e.formatSpecifier,e.formatType,!!e.values||o===lC),d=e.values||JJ(s,l);return r&&(i.rem=r),o===lC?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,a-1),m=!0):r=d,nt(p=e.size)?(!e.values&&0===s(r[0])&&(r=r.slice(1)),g=r.reduce((_,y)=>Math.max(_,p(y,e)),0)):p=rr(g=p||8),r=r.map((_,y)=>It({index:y,label:c(_,y,r),value:_,offset:g,size:p(_,e)})),m&&r.push(It({index:r.length,label:`\u2026${d.length-r.length} entries`,value:m=d[r.length],offset:g,size:p(m,e)}))):"gradient"===o?(f=s.domain(),h=zJ(s,f[0],mt(f)),d.length<3&&!e.values&&f[0]!==mt(f)&&(d=[f[0],mt(f)]),r=d.map((_,y)=>It({index:y,label:c(_,y,d),value:_,perc:h(_)}))):(p=d.length-1,h=function zPe(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+mt(t),o=r-i;if(e.type===oC){const s=n?o/n:.1;i-=s,r+=s,o=r-i}return s=>(s-i)/o}(s),r=d.map((_,y)=>It({index:y,label:c(_,y,d),value:_,perc:y?h(_):0,perc2:y===p?1:h(d[y+1])}))),i.source=r,i.add=r,this.value=r,i}});const s5e=e=>e.source.x,a5e=e=>e.source.y,l5e=e=>e.target.x,u5e=e=>e.target.y;function OP(e){Y.call(this,{},e)}OP.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},pe(OP,Y,{transform(e,t){var n=e.sourceX||s5e,i=e.sourceY||a5e,r=e.targetX||l5e,o=e.targetY||u5e,s=e.as||"path",l=e.shape||"line",u=dte.get(l+"-"+(e.orient||"vertical"))||dte.get(l);return u||Q("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),i(c),r(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const lte=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,ute=(e,t,n,i)=>{var r=n-e,o=i-t,s=Math.hypot(r,o)/2;return"M"+e+","+t+"A"+s+","+s+" "+180*Math.atan2(o,r)/Math.PI+" 0 1 "+n+","+i},cte=(e,t,n,i)=>{const r=n-e,o=i-t,s=.2*(r+o),a=.2*(o-r);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(i-s)+" "+n+","+i},dte=Og({line:lte,"line-radial":(e,t,n,i)=>lte(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),arc:ute,"arc-radial":(e,t,n,i)=>ute(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),curve:cte,"curve-radial":(e,t,n,i)=>cte(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),"orthogonal-horizontal":(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,"orthogonal-vertical":(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,"orthogonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n);return"M"+t*r+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*s+","+t*a+"L"+i*s+","+i*a},"diagonal-horizontal":(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},"diagonal-vertical":(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},"diagonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*o+"C"+l*r+","+l*o+" "+l*s+","+l*a+" "+i*s+","+i*a}});function RP(e){Y.call(this,null,e)}function fte(e){return xF(e)&&e!==cl}RP.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},pe(RP,Y,{transform(e,t){var p,g,m,n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],s=e.startAngle||0,a=null!=e.endAngle?e.endAngle:2*Math.PI,l=t.source,u=l.map(e.field||Mg),c=u.length,d=s,f=(a-s)/ite(u),h=Fo(c);for(e.sort&&h.sort((_,y)=>u[_]-u[y]),p=0;p<c;++p)m=u[h[p]],(g=l[h[p]])[i]=d,g[r]=d+=m*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const p5e=oa(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function hte(e){Y.call(this,null,e),this.modified(!0)}function pte(e,t,n){return BJ(e)&&Math.abs(t.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0))!==t.length&&n.warn("Log scale domain includes zero: "+fe(t)),t}function gte(e,t,n){return nt(e)&&(t||n)?UJ(e,FP(t||[0,1],n)):e}function FP(e,t){return t?e.slice().reverse():e}function mte(e){Y.call(this,null,e)}pe(hte,Y,{transform(e,t){var n=t.dataflow,i=this.value,r=function g5e(e){var i,t=e.type,n="";return t===cl?cl+"-"+tm:(function m5e(e){const t=e.type;return xF(t)&&t!==Xf&&t!==Qf&&(e.scheme||e.range&&e.range.length&&e.range.every(be))}(e)&&(n=2===(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?cl+"-":3===i?nm+"-":""),(n+t||tm).toLowerCase())}(e);for(r in(!i||r!==i.type)&&(this.value=i=xt(r)()),e)if(!p5e[r]){if("padding"===r&&fte(i.type))continue;nt(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return function w5e(e,t,n){var i=e.type,r=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function E5e(e,t,n){return"band"!==e&&e!==EF&&Q("Only band and point scales support rangeStep."),[0,t.rangeStep*bF(n,e===EF?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0,(null!=t.paddingOuter?t.paddingOuter:t.padding)||0)]}(i,t,n);else if(t.scheme&&nt(o=function D5e(e,t,n){var o,i=t.schemeExtent;return J(t.scheme)?o=aC(t.scheme,t.interpolate,t.interpolateGamma):(o=NF(t.scheme.toLowerCase()))||Q(`Unrecognized scheme name: ${t.scheme}`),n=e===oC?n+1:e===DF?n-1:e===im||e===rC?+t.schemeCount||5:n,VJ(e)?gte(o,i,t.reverse):nt(o)?HJ(gte(o,i),n):e===wF?o:o.slice(0,n)}(i,t,n))){if(e.interpolator)return e.interpolator(o);Q(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&VJ(i))return e.interpolator(aC(FP(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(AF(t.interpolate,t.interpolateGamma)):nt(e.round)?e.round(r):nt(e.rangeRound)&&e.interpolate(r?Yy:qc),o&&e.range(FP(o,t.reverse))}(i,e,function b5e(e,t,n){let i=t.bins;if(i&&!J(i)){const r=e.domain(),o=r[0],s=mt(r),a=i.step;let l=i.start??o,u=i.stop??s;a||Q("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),i=Fo(l,u+a/2,a)}return i?e.bins=i:e.bins&&delete e.bins,e.type===DF&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}(i,e,function _5e(e,t,n){const i=function y5e(e,t,n){return t?(e.domain(pte(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(i>-1)return i;var a,l,r=t.domain,o=e.type,s=t.zero||void 0===t.zero&&function h5e(e){const t=e.type;return!e.bins&&(t===tm||"pow"===t||t===Jy)}(e);if(!r)return 0;if((s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),null!=t.domainMin&&(r[0]=t.domainMin),null!=t.domainMax&&(r[a]=t.domainMax),null!=t.domainMid)){const u=(l=t.domainMid)>r[a]?a+1:l<r[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return fte(o)&&t.padding&&r[0]!==mt(r)&&(r=function v5e(e,t,n,i,r,o){var s=Math.abs(mt(n)-n[0]),a=s/(s-2*i),l=e===Su?HI(t,null,a):e===Jy?XE(t,null,a,.5):"pow"===e?XE(t,null,a,r||1):e===iC?zI(t,null,a,o||1):UI(t,null,a);return(t=t.slice())[0]=l[0],t[t.length-1]=l[1],t}(o,r,t.range,t.padding,t.exponent,t.constant)),e.domain(pte(o,r,n)),o===wF&&e.unknown(t.domainImplicit?cF:void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&MF(e,t.nice)||null),r.length}(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),pe(mte,Y,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(jf(e.sort)),this.modified(n),t}});const bte=["y0","y1"];function PP(e){Y.call(this,null,e)}function C5e(e,t,n,i,r){for(var l,o=(t-e.sum)/2,s=e.length,a=0;a<s;++a)(l=e[a])[i]=o,l[r]=o+=Math.abs(n(l))}function S5e(e,t,n,i,r){for(var c,o=1/e.sum,s=0,a=e.length,l=0,u=0;l<a;++l)(c=e[l])[i]=s,c[r]=s=o*(u+=Math.abs(n(c)))}function x5e(e,t,n,i,r){for(var u,c,o=0,s=0,a=e.length,l=0;l<a;++l)(u=+n(c=e[l]))<0?(c[i]=s,c[r]=s+=u):(c[i]=o,c[r]=o+=u)}PP.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:bte}]},pe(PP,Y,{transform(e,t){var l,u,c,d,n=e.as||bte,i=n[0],r=n[1],o=jf(e.sort),s=e.field||Mg,a="center"===e.offset?C5e:"normalize"===e.offset?S5e:x5e;for(l=function T5e(e,t,n,i){var s,a,l,u,c,d,f,h,p,r=[],o=g=>g(c);if(null==t)r.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],(f=s[d=t.map(o)])||(s[d]=f=[],r.push(f)),f.push(c);for(d=0,p=0,u=r.length;d<u;++d){for(a=0,h=0,l=(f=r[d]).length;a<l;++a)h+=Math.abs(i(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return r.max=p,r}(t.source,e.groupby,o,s),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,s,i,r);return t.reflow(e.modified()).modifies(n)}});const b1=e=>e;function qC(e,t){e&&Ete.hasOwnProperty(e.type)&&Ete[e.type](e,t)}var wte={Feature:function(e,t){qC(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)qC(n[i].geometry,t)}},Ete={Sphere:function(e,t){t.sphere()},Point:function(e,t){t.point((e=e.coordinates)[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)t.point((e=n[i])[0],e[1],e[2])},LineString:function(e,t){LP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)LP(n[i],t,0)},Polygon:function(e,t){Dte(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Dte(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)qC(n[i],t)}};function LP(e,t,n){var o,i=-1,r=e.length-n;for(t.lineStart();++i<r;)t.point((o=e[i])[0],o[1],o[2]);t.lineEnd()}function Dte(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)LP(e[n],t,1);t.polygonEnd()}function Nu(e,t){e&&wte.hasOwnProperty(e.type)?wte[e.type](e,t):qC(e,t)}class $i{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[i++]=a),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let i,r,o,n=this._n,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,o=r-(s-i),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(r=2*o,i=s+r,r==i-s&&(s=i))}return s}}var Le=1e-6,YC=1e-12,ct=Math.PI,Rn=ct/2,KC=ct/4,Ir=2*ct,jn=180/ct,lt=ct/180,_t=Math.abs,pm=Math.atan,Cs=Math.atan2,Be=Math.cos,XC=Math.ceil,Cte=Math.exp,$P=(Math,Math.hypot),QC=Math.log,BP=Math.pow,Ie=Math.sin,Ss=Math.sign||function(e){return e>0?1:e<0?-1:0},Or=Math.sqrt,VP=Math.tan;function Ste(e){return e>1?0:e<-1?ct:Math.acos(e)}function ro(e){return e>1?Rn:e<-1?-Rn:Math.asin(e)}function Bi(){}var xte,Tte,HP,zP,jP=new $i,UP=new $i,ld={point:Bi,lineStart:Bi,lineEnd:Bi,polygonStart:function(){ld.lineStart=A5e,ld.lineEnd=M5e},polygonEnd:function(){ld.lineStart=ld.lineEnd=ld.point=Bi,jP.add(_t(UP)),UP=new $i},result:function(){var e=jP/2;return jP=new $i,e}};function A5e(){ld.point=N5e}function N5e(e,t){ld.point=Ate,xte=HP=e,Tte=zP=t}function Ate(e,t){UP.add(zP*e-HP*t),HP=e,zP=t}function M5e(){Ate(xte,Tte)}const Nte=ld;var gm=1/0,JC=gm,w1=-gm,ZC=w1,k5e={point:function I5e(e,t){e<gm&&(gm=e),e>w1&&(w1=e),t<JC&&(JC=t),t>ZC&&(ZC=t)},lineStart:Bi,lineEnd:Bi,polygonStart:Bi,polygonEnd:Bi,result:function(){var e=[[gm,JC],[w1,ZC]];return w1=ZC=-(JC=gm=1/0),e}};const eS=k5e;var Mte,kte,pl,gl,GP=0,WP=0,E1=0,tS=0,nS=0,mm=0,qP=0,YP=0,D1=0,ga={point:oh,lineStart:Ite,lineEnd:Ote,polygonStart:function(){ga.lineStart=F5e,ga.lineEnd=P5e},polygonEnd:function(){ga.point=oh,ga.lineStart=Ite,ga.lineEnd=Ote},result:function(){var e=D1?[qP/D1,YP/D1]:mm?[tS/mm,nS/mm]:E1?[GP/E1,WP/E1]:[NaN,NaN];return GP=WP=E1=tS=nS=mm=qP=YP=D1=0,e}};function oh(e,t){GP+=e,WP+=t,++E1}function Ite(){ga.point=O5e}function O5e(e,t){ga.point=R5e,oh(pl=e,gl=t)}function R5e(e,t){var n=e-pl,i=t-gl,r=Or(n*n+i*i);tS+=r*(pl+e)/2,nS+=r*(gl+t)/2,mm+=r,oh(pl=e,gl=t)}function Ote(){ga.point=oh}function F5e(){ga.point=L5e}function P5e(){Rte(Mte,kte)}function L5e(e,t){ga.point=Rte,oh(Mte=pl=e,kte=gl=t)}function Rte(e,t){var n=e-pl,i=t-gl,r=Or(n*n+i*i);tS+=r*(pl+e)/2,nS+=r*(gl+t)/2,mm+=r,qP+=(r=gl*e-pl*t)*(pl+e),YP+=r*(gl+t),D1+=3*r,oh(pl=e,gl=t)}const Fte=ga;function Pte(e){this._context=e}Pte.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ir)}},result:Bi};var XP,Lte,$te,C1,S1,KP=new $i,iS={point:Bi,lineStart:function(){iS.point=$5e},lineEnd:function(){XP&&Bte(Lte,$te),iS.point=Bi},polygonStart:function(){XP=!0},polygonEnd:function(){XP=null},result:function(){var e=+KP;return KP=new $i,e}};function $5e(e,t){iS.point=Bte,Lte=C1=e,$te=S1=t}function Bte(e,t){KP.add(Or((C1-=e)*C1+(S1-=t)*S1)),C1=e,S1=t}const Vte=iS;let jte,rS,Ute,Hte;class zte{constructor(t){this._append=null==t?Gte:function B5e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Gte;if(t!==jte){const n=10**t;jte=t,rS=function(r){let o=1;this._+=r[0];for(const s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return rS}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:this._append`M${t},${n}`,this._point=1;break;case 1:this._append`L${t},${n}`;break;default:if(this._append`M${t},${n}`,this._radius!==Ute||this._append!==rS){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Ute=i,rS=this._append,Hte=this._,this._=r}this._+=Hte}}result(){const t=this._;return this._="",t.length?t:null}}function Gte(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Wte(e,t){let r,o,n=3,i=4.5;function s(a){return a&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),Nu(a,r(o))),o.result()}return s.area=function(a){return Nu(a,r(Nte)),Nte.result()},s.measure=function(a){return Nu(a,r(Vte)),Vte.result()},s.bounds=function(a){return Nu(a,r(eS)),eS.result()},s.centroid=function(a){return Nu(a,r(Fte)),Fte.result()},s.projection=function(a){return arguments.length?(r=null==a?(e=null,b1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=null==a?(t=null,new zte(n)):new Pte(t=a),"function"!=typeof i&&o.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i="function"==typeof a?a:(o.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return n;if(null==a)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return null===t&&(o=new zte(n)),s},s.projection(e).digits(n).context(t)}function qte(){var t,e=[];return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Bi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function oS(e,t){return _t(e[0]-t[0])<Le&&_t(e[1]-t[1])<Le}function sS(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Yte(e,t,n,i,r){var a,l,o=[],s=[];if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,y,m=p[0],_=p[g];if(oS(m,_)){if(!m[2]&&!_[2]){for(r.lineStart(),a=0;a<g;++a)r.point((m=p[a])[0],m[1]);return void r.lineEnd()}_[0]+=2*Le}o.push(y=new sS(m,p,null,!0)),s.push(y.o=new sS(m,null,y,!1)),o.push(y=new sS(_,p,null,!1)),s.push(y.o=new sS(_,null,y,!0))}}),o.length){for(s.sort(t),Kte(o),Kte(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var c,d,u=o[0];;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)r.point((d=c[a])[0],d[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(h)for(a=(c=f.p.z).length-1;a>=0;--a)r.point((d=c[a])[0],d[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,h=!h}while(!f.v);r.lineEnd()}}}function Kte(e){if(t=e.length){for(var t,r,n=0,i=e[0];++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function aS(e){return[Cs(e[1],e[0]),ro(e[2])]}function sh(e){var t=e[0],n=e[1],i=Be(n);return[i*Be(t),i*Ie(t),Ie(n)]}function lS(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _m(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function QP(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function uS(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cS(e){var t=Or(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function JP(e){return _t(e[0])<=ct?e[0]:Ss(e[0])*((_t(e[0])+ct)%Ir-ct)}function Xte(e){return Array.from(function*j5e(e){for(const t of e)yield*t}(e))}function Qte(e,t,n,i){return function(r){var u,c,d,o=t(r),s=qte(),a=t(s),l=!1,f={point:h,lineStart:g,lineEnd:m,polygonStart:function(){f.point=_,f.lineStart=y,f.lineEnd=v,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=g,f.lineEnd=m,c=Xte(c);var b=function V5e(e,t){var n=JP(t),i=t[1],r=Ie(i),o=[Ie(n),-Be(n),0],s=0,a=0,l=new $i;1===r?i=Rn+Le:-1===r&&(i=-Rn-Le);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=JP(h),g=h[1]/2+KC,m=Ie(g),_=Be(g),y=0;y<f;++y,p=b,m=D,_=E,h=v){var v=d[y],b=JP(v),w=v[1]/2+KC,D=Ie(w),E=Be(w),C=b-p,N=C>=0?1:-1,k=N*C,R=k>ct,F=m*D;if(l.add(Cs(F*N*Ie(k),_*E+F*Be(k))),s+=R?C+N*Ir:C,R^p>=n^b>=n){var P=_m(sh(h),sh(v));cS(P);var x=_m(o,P);cS(x);var S=(R^C>=0?-1:1)*ro(x[2]);(i>S||i===S&&(P[0]||P[1]))&&(a+=R^C>=0?1:-1)}}return(s<-Le||s<Le&&l<-YC)^1&a}(u,i);c.length?(l||(r.polygonStart(),l=!0),Yte(c,H5e,b,n,r)):b&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(b,w){e(b,w)&&r.point(b,w)}function p(b,w){o.point(b,w)}function g(){f.point=p,o.lineStart()}function m(){f.point=h,o.lineEnd()}function _(b,w){d.push([b,w]),a.point(b,w)}function y(){a.lineStart(),d=[]}function v(){_(d[0][0],d[0][1]),a.lineEnd();var D,C,N,k,b=a.clean(),w=s.result(),E=w.length;if(d.pop(),u.push(d),d=null,E){if(1&b){if((C=(N=w[0]).length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),D=0;D<C;++D)r.point((k=N[D])[0],k[1]);r.lineEnd()}return}E>1&&2&b&&w.push(w.pop().concat(w.shift())),c.push(w.filter(U5e))}}return f}}function U5e(e){return e.length>1}function H5e(e,t){return((e=e.x)[0]<0?e[1]-Rn-Le:Rn-e[1])-((t=t.x)[0]<0?t[1]-Rn-Le:Rn-t[1])}const Jte=Qte(function(){return!0},function z5e(e){var r,t=NaN,n=NaN,i=NaN;return{lineStart:function(){e.lineStart(),r=1},point:function(o,s){var a=o>0?ct:-ct,l=_t(o-t);_t(l-ct)<Le?(e.point(t,n=(n+s)/2>0?Rn:-Rn),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),r=0):i!==a&&l>=ct&&(_t(t-i)<Le&&(t-=i*Le),_t(o-a)<Le&&(o-=a*Le),n=function G5e(e,t,n,i){var r,o,s=Ie(e-n);return _t(s)>Le?pm((Ie(t)*(o=Be(i))*Ie(n)-Ie(i)*(r=Be(t))*Ie(e))/(r*o*s)):(t+i)/2}(t,n,o,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=o,n=s),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}},function W5e(e,t,n,i){var r;if(null==e)i.point(-ct,r=n*Rn),i.point(0,r),i.point(ct,r),i.point(ct,0),i.point(ct,-r),i.point(0,-r),i.point(-ct,-r),i.point(-ct,0),i.point(-ct,r);else if(_t(e[0]-t[0])>Le){var o=e[0]<t[0]?ct:-ct;i.point(-o,r=n*o/2),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-ct,-Rn]);function ene(e,t){(t=sh(t))[0]-=e,cS(t);var n=Ste(-t[1]);return((-t[2]<0?-n:n)+Ir-Le)%Ir}function q5e(e){var t=Be(e),n=2*lt,i=t>0,r=_t(t)>Le;function s(c,d){return Be(c)*Be(d)>t}function l(c,d,f){var g=[1,0,0],m=_m(sh(c),sh(d)),_=lS(m,m),y=m[0],v=_-y*y;if(!v)return!f&&c;var b=t*_/v,w=-t*y/v,D=_m(g,m),E=uS(g,b);QP(E,uS(m,w));var N=D,k=lS(E,N),R=lS(N,N),F=k*k-R*(lS(E,E)-1);if(!(F<0)){var P=Or(F),x=uS(N,(-k-P)/R);if(QP(x,E),x=aS(x),!f)return x;var M,S=c[0],T=d[0],I=c[1],A=d[1];T<S&&(M=S,S=T,T=M);var O=T-S,L=_t(O-ct)<Le;if(!L&&A<I&&(M=I,I=A,A=M),L||O<Le?L?I+A>0^x[1]<(_t(x[0]-S)<Le?I:A):I<=x[1]&&x[1]<=A:O>ct^(S<=x[0]&&x[0]<=T)){var V=uS(N,(-k+P)/R);return QP(V,E),[x,aS(V)]}}}function u(c,d){var f=i?e:ct-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return Qte(s,function a(c){var d,f,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,_){var v,y=[m,_],b=s(m,_),w=i?b?0:u(m,_):b?u(m+(m<0?ct:-ct),_):0;if(!d&&(p=h=b)&&c.lineStart(),b!==h&&(!(v=l(d,y))||oS(d,v)||oS(y,v))&&(y[2]=1),b!==h)g=0,b?(c.lineStart(),v=l(y,d),c.point(v[0],v[1])):(v=l(d,y),c.point(v[0],v[1],2),c.lineEnd()),d=v;else if(r&&d&&i^b){var D;!(w&f)&&(D=l(y,d,!0))&&(g=0,i?(c.lineStart(),c.point(D[0][0],D[0][1]),c.point(D[1][0],D[1][1]),c.lineEnd()):(c.point(D[1][0],D[1][1]),c.lineEnd(),c.lineStart(),c.point(D[0][0],D[0][1],3)))}b&&(!d||!oS(d,y))&&c.point(y[0],y[1]),d=y,h=b,f=w},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return g|(p&&h)<<1}}},function o(c,d,f,h){!function Zte(e,t,n,i,r,o){if(n){var s=Be(t),a=Ie(t),l=i*n;null==r?(r=t+i*Ir,o=t-l/2):(r=ene(s,r),o=ene(s,o),(i>0?r<o:r>o)&&(r+=i*Ir));for(var u,c=r;i>0?c>o:c<o;c-=l)u=aS([s,-a*Be(c),-a*Ie(c)]),e.point(u[0],u[1])}}(h,e,n,f,c,d)},i?[0,-e]:[-ct,e-ct])}var x1=1e9,dS=-x1;function tne(e,t,n,i){function r(u,c){return e<=u&&u<=n&&t<=c&&c<=i}function o(u,c,d,f){var h=0,p=0;if(null==u||(h=s(u,d))!==(p=s(c,d))||l(u,c)<0^d>0)do{f.point(0===h||3===h?e:n,h>1?i:t)}while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function s(u,c){return _t(u[0]-e)<Le?c>0?0:3:_t(u[0]-n)<Le?c>0?2:1:_t(u[1]-t)<Le?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=s(u,1),f=s(c,1);return d!==f?d-f:0===d?c[1]-u[1]:1===d?u[0]-c[0]:2===d?u[1]-c[1]:c[0]-u[0]}return function(u){var f,h,p,g,m,_,y,v,b,w,D,c=u,d=qte(),E={point:C,lineStart:function F(){E.point=x,h&&h.push(p=[]),w=!0,b=!1,y=v=NaN},lineEnd:function P(){f&&(x(g,m),_&&b&&d.rejoin(),f.push(d.result())),E.point=C,b&&c.lineEnd()},polygonStart:function k(){c=d,f=[],h=[],D=!0},polygonEnd:function R(){var S=function N(){for(var S=0,T=0,I=h.length;T<I;++T)for(var $,V,A=h[T],M=1,O=A.length,L=A[0],B=L[0],z=L[1];M<O;++M)$=B,V=z,B=(L=A[M])[0],z=L[1],V<=i?z>i&&(B-$)*(i-V)>(z-V)*(e-$)&&++S:z<=i&&(B-$)*(i-V)<(z-V)*(e-$)&&--S;return S}(),T=D&&S,I=(f=Xte(f)).length;(T||I)&&(u.polygonStart(),T&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),I&&Yte(f,a,S,o,u),u.polygonEnd()),c=u,f=h=p=null}};function C(S,T){r(S,T)&&c.point(S,T)}function x(S,T){var I=r(S,T);if(h&&p.push([S,T]),w)g=S,m=T,_=I,w=!1,I&&(c.lineStart(),c.point(S,T));else if(I&&b)c.point(S,T);else{var A=[y=Math.max(dS,Math.min(x1,y)),v=Math.max(dS,Math.min(x1,v))],M=[S=Math.max(dS,Math.min(x1,S)),T=Math.max(dS,Math.min(x1,T))];!function Y5e(e,t,n,i,r,o){var p,s=e[0],a=e[1],c=0,d=1,f=t[0]-s,h=t[1]-a;if(p=n-s,f||!(p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=r-s,f||!(p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=i-a,h||!(p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=o-a,h||!(p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=s+c*f,e[1]=a+c*h),d<1&&(t[0]=s+d*f,t[1]=a+d*h),!0}}}}}(A,M,e,t,n,i)?I&&(c.lineStart(),c.point(S,T),D=!1):(b||(c.lineStart(),c.point(A[0],A[1])),c.point(M[0],M[1]),I||c.lineEnd(),D=!1)}y=S,v=T,b=I}return E}}function ZP(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return(i=t.invert(i,r))&&e.invert(i[0],i[1])}),n}function eL(e,t){return _t(e)>ct&&(e-=Math.round(e/Ir)*Ir),[e,t]}function nne(e,t,n){return(e%=Ir)?t||n?ZP(rne(e),one(t,n)):rne(e):t||n?one(t,n):eL}function ine(e){return function(t,n){return _t(t+=e)>ct&&(t-=Math.round(t/Ir)*Ir),[t,n]}}function rne(e){var t=ine(e);return t.invert=ine(-e),t}function one(e,t){var n=Be(e),i=Ie(e),r=Be(t),o=Ie(t);function s(a,l){var u=Be(l),c=Be(a)*u,d=Ie(a)*u,f=Ie(l),h=f*n+c*i;return[Cs(d*r-h*o,c*n-f*i),ro(h*r+d*o)]}return s.invert=function(a,l){var u=Be(l),c=Be(a)*u,d=Ie(a)*u,f=Ie(l),h=f*r-d*o;return[Cs(d*r+f*o,c*n+h*i),ro(h*n-c*i)]},s}function T1(e){return function(t){var n=new tL;for(var i in e)n[i]=e[i];return n.stream=t,n}}function tL(){}function nL(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),Nu(n,e.stream(eS)),t(eS.result()),null!=i&&e.clipExtent(i),e}function fS(e,t,n){return nL(e,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function iL(e,t,n){return fS(e,[[0,0],t],n)}function rL(e,t,n){return nL(e,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),s=(r-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];e.scale(150*o).translate([s,a])},n)}function oL(e,t,n){return nL(e,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),s=-o*i[0][0],a=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,a])},n)}eL.invert=eL,tL.prototype={constructor:tL,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var X5e=Be(30*lt);function ane(e,t){return+t?function J5e(e,t){function n(i,r,o,s,a,l,u,c,d,f,h,p,g,m){var _=u-i,y=c-r,v=_*_+y*y;if(v>4*t&&g--){var b=s+f,w=a+h,D=l+p,E=Or(b*b+w*w+D*D),C=ro(D/=E),N=_t(_t(D)-1)<Le||_t(o-d)<Le?(o+d)/2:Cs(w,b),k=e(N,C),R=k[0],F=k[1],P=R-i,x=F-r,S=y*P-_*x;(S*S/v>t||_t((_*P+y*x)/v-.5)>.3||s*f+a*h+l*p<X5e)&&(n(i,r,o,s,a,l,R,F,N,b/=E,w/=E,D,g,m),m.point(R,F),n(R,F,N,b,w,D,u,c,d,f,h,p,g,m))}}return function(i){var r,o,s,a,l,u,c,d,f,h,p,g,m={point:_,lineStart:y,lineEnd:b,polygonStart:function(){i.polygonStart(),m.lineStart=w},polygonEnd:function(){i.polygonEnd(),m.lineStart=y}};function _(C,N){C=e(C,N),i.point(C[0],C[1])}function y(){d=NaN,m.point=v,i.lineStart()}function v(C,N){var k=sh([C,N]),R=e(C,N);n(d,f,c,h,p,g,d=R[0],f=R[1],c=C,h=k[0],p=k[1],g=k[2],16,i),i.point(d,f)}function b(){m.point=_,i.lineEnd()}function w(){y(),m.point=D,m.lineEnd=E}function D(C,N){v(r=C,N),o=d,s=f,a=h,l=p,u=g,m.point=v}function E(){n(d,f,c,h,p,g,o,s,r,a,l,u,16,i),m.lineEnd=b,b()}return m}}(e,t):function Q5e(e){return T1({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var Z5e=T1({point:function(e,t){this.stream.point(e*lt,t*lt)}});function lne(e,t,n,i,r,o){if(!o)return function t8e(e,t,n,i,r){function o(s,a){return[t+e*(s*=i),n-e*(a*=r)]}return o.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*r]},o}(e,t,n,i,r);var s=Be(o),a=Ie(o),l=s*e,u=a*e,c=s/e,d=a/e,f=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return[l*(g*=i)-u*(m*=r)+t,n-u*g-l*m]}return p.invert=function(g,m){return[i*(c*g-d*m+f),r*(h-d*g-c*m)]},p}function ml(e){return une(function(){return e})()}function une(e){var t,c,_,y,v,D,E,C,N,k,n=150,i=480,r=250,o=0,s=0,a=0,l=0,u=0,d=0,f=1,h=1,p=null,g=Jte,m=null,b=b1,w=.5;function R(S){return C(S[0]*lt,S[1]*lt)}function F(S){return(S=C.invert(S[0],S[1]))&&[S[0]*jn,S[1]*jn]}function P(){var S=lne(n,0,0,f,h,d).apply(null,t(o,s)),T=lne(n,i-S[0],r-S[1],f,h,d);return c=nne(a,l,u),E=ZP(t,T),C=ZP(c,E),D=ane(E,w),x()}function x(){return N=k=null,R}return R.stream=function(S){return N&&k===S?N:N=Z5e(function e8e(e){return T1({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}(c)(g(D(b(k=S)))))},R.preclip=function(S){return arguments.length?(g=S,p=void 0,x()):g},R.postclip=function(S){return arguments.length?(b=S,m=_=y=v=null,x()):b},R.clipAngle=function(S){return arguments.length?(g=+S?q5e(p=S*lt):(p=null,Jte),x()):p*jn},R.clipExtent=function(S){return arguments.length?(b=null==S?(m=_=y=v=null,b1):tne(m=+S[0][0],_=+S[0][1],y=+S[1][0],v=+S[1][1]),x()):null==m?null:[[m,_],[y,v]]},R.scale=function(S){return arguments.length?(n=+S,P()):n},R.translate=function(S){return arguments.length?(i=+S[0],r=+S[1],P()):[i,r]},R.center=function(S){return arguments.length?(o=S[0]%360*lt,s=S[1]%360*lt,P()):[o*jn,s*jn]},R.rotate=function(S){return arguments.length?(a=S[0]%360*lt,l=S[1]%360*lt,u=S.length>2?S[2]%360*lt:0,P()):[a*jn,l*jn,u*jn]},R.angle=function(S){return arguments.length?(d=S%360*lt,P()):d*jn},R.reflectX=function(S){return arguments.length?(f=S?-1:1,P()):f<0},R.reflectY=function(S){return arguments.length?(h=S?-1:1,P()):h<0},R.precision=function(S){return arguments.length?(D=ane(E,w=S*S),x()):Or(w)},R.fitExtent=function(S,T){return fS(R,S,T)},R.fitSize=function(S,T){return iL(R,S,T)},R.fitWidth=function(S,T){return rL(R,S,T)},R.fitHeight=function(S,T){return oL(R,S,T)},function(){return t=e.apply(this,arguments),R.invert=t.invert&&F,P()}}function sL(e){var t=0,n=ct/3,i=une(e),r=i(t,n);return r.parallels=function(o){return arguments.length?i(t=o[0]*lt,n=o[1]*lt):[t*jn,n*jn]},r}function i8e(e,t){var n=Ie(e),i=(n+Ie(t))/2;if(_t(i)<Le)return function n8e(e){var t=Be(e);function n(i,r){return[i*t,Ie(r)/t]}return n.invert=function(i,r){return[i/t,ro(r*t)]},n}(e);var r=1+n*(2*i-n),o=Or(r)/i;function s(a,l){var u=Or(r-2*i*Ie(l))/i;return[u*Ie(a*=i),o-u*Be(a)]}return s.invert=function(a,l){var u=o-l,c=Cs(a,_t(u))*Ss(u);return u*i<0&&(c-=ct*Ss(a)*Ss(u)),[c/i,ro((r-(a*a+u*u)*i*i)/(2*i))]},s}function hS(){return sL(i8e).scale(155.424).center([0,33.6442])}function cne(){return hS().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dne(e){return function(t,n){var i=Be(t),r=Be(n),o=e(i*r);return o===1/0?[2,0]:[o*r*Ie(t),o*Ie(n)]}}function A1(e){return function(t,n){var i=Or(t*t+n*n),r=e(i),o=Ie(r),s=Be(r);return[Cs(t*o,i*s),ro(i&&n*o/i)]}}var fne=dne(function(e){return Or(2/(1+e))});fne.invert=A1(function(e){return 2*ro(e/2)});var hne=dne(function(e){return(e=Ste(e))&&e/Ie(e)});function pS(e,t){return[e,QC(VP((Rn+t)/2))]}function pne(e){var a,l,u,t=ml(e),n=t.center,i=t.scale,r=t.translate,o=t.clipExtent,s=null;function c(){var d=ct*i(),f=t(function K5e(e){function t(n){return(n=e(n[0]*lt,n[1]*lt))[0]*=jn,n[1]*=jn,n}return e=nne(e[0]*lt,e[1]*lt,e.length>2?e[2]*lt:0),t.invert=function(n){return(n=e.invert(n[0]*lt,n[1]*lt))[0]*=jn,n[1]*=jn,n},t}(t.rotate()).invert([0,0]));return o(null==s?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===pS?[[Math.max(f[0]-d,s),a],[Math.min(f[0]+d,l),u]]:[[s,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return t.scale=function(d){return arguments.length?(i(d),c()):i()},t.translate=function(d){return arguments.length?(r(d),c()):r()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(null==d?s=a=l=u=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):null==s?null:[[s,a],[l,u]]},c()}function gS(e){return VP((Rn+e)/2)}function u8e(e,t){var n=Be(e),i=e===t?Ie(e):QC(n/Be(t))/QC(gS(t)/gS(e)),r=n*BP(gS(e),i)/i;if(!i)return pS;function o(s,a){r>0?a<-Rn+Le&&(a=-Rn+Le):a>Rn-Le&&(a=Rn-Le);var l=r/BP(gS(a),i);return[l*Ie(i*s),r-l*Be(i*s)]}return o.invert=function(s,a){var l=r-a,u=Ss(i)*Or(s*s+l*l),c=Cs(s,_t(l))*Ss(l);return l*i<0&&(c-=ct*Ss(s)*Ss(l)),[c/i,2*pm(BP(r/u,1/i))-Rn]},o}function mS(e,t){return[e,t]}function f8e(e,t){var n=Be(e),i=e===t?Ie(e):(n-Be(t))/(t-e),r=n/i+e;if(_t(i)<Le)return mS;function o(s,a){var l=r-a,u=i*s;return[l*Ie(u),r-l*Be(u)]}return o.invert=function(s,a){var l=r-a,u=Cs(s,_t(l))*Ss(l);return l*i<0&&(u-=ct*Ss(s)*Ss(l)),[u/i,r-Ss(i)*Or(s*s+l*l)]},o}hne.invert=A1(function(e){return e}),pS.invert=function(e,t){return[e,2*pm(Cte(t))-Rn]},mS.invert=mS;var N1=1.340264,M1=-.081106,k1=893e-6,I1=.003796,_S=Or(3)/2;function gne(e,t){var n=ro(_S*Ie(t)),i=n*n,r=i*i*i;return[e*Be(n)/(_S*(N1+3*M1*i+r*(7*k1+9*I1*i))),n*(N1+M1*i+r*(k1+I1*i))]}function mne(e,t){var n=Be(t),i=Be(e)*n;return[n*Ie(e)/i,Ie(t)/i]}function _ne(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function yne(e,t){return[Be(t)*Ie(e),Ie(t)]}function vne(e,t){var n=Be(t),i=1+Be(e)*n;return[n*Ie(e)/i,Ie(t)/i]}function bne(e,t){return[QC(VP((Rn+t)/2)),-e]}gne.invert=function(e,t){for(var s,n=t,i=n*n,r=i*i*i,o=0;o<12&&(r=(i=(n-=s=(n*(N1+M1*i+r*(k1+I1*i))-t)/(N1+3*M1*i+r*(7*k1+9*I1*i)))*n)*i*i,!(_t(s)<YC));++o);return[_S*e*(N1+3*M1*i+r*(7*k1+9*I1*i))/Be(n),ro(Ie(n)/_S)]},mne.invert=A1(pm),_ne.invert=function(e,t){var r,n=t,i=25;do{var o=n*n,s=o*o;n-=r=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-t)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(_t(r)>Le&&--i>0);return[e/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},yne.invert=A1(ro),vne.invert=A1(function(e){return 2*pm(e)}),bne.invert=function(e,t){return[-t,2*pm(Cte(e))-Rn]};var E8e=Math.abs,aL=(Math,Math,Math,Math.cos),yS=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),ud=(Math,Math.PI),lL=ud/2,Ene=(Math,vS(2));function Dne(e){return e>1?lL:e<-1?-lL:Math.asin(e)}function vS(e){return e>0?Math.sqrt(e):0}function C8e(e,t){var r,n=e*yS(t),i=30;do{t-=r=(t+yS(t)-n)/(1+aL(t))}while(E8e(r)>1e-6&&--i>0);return t/2}vS(ud);var x8e=function S8e(e,t,n){function i(r,o){return[e*r*aL(o=C8e(n,o)),t*yS(o)]}return i.invert=function(r,o){return o=Dne(o/t),[r/(e*aL(o)),Dne((2*o+yS(2*o))/n)]},i}(Ene/lL,Ene,ud);const A8e=Wte(),uL=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function N8e(e,t){return function n(){const i=t();return i.type=e,i.path=Wte().projection(i),i.copy=i.copy||function(){const r=n();return uL.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},LJ(i)}}function cL(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(bS[e]=N8e(e,t),this):bS[e]||null}function Cne(e){return e&&e.path||A8e}const bS={albers:cne,albersusa:function o8e(){var e,t,i,o,a,l,n=cne(),r=hS().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=hS().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,i.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}function d(){return e=t=null,c}return c.invert=function(f){var h=n.scale(),p=n.translate(),g=(f[0]-p[0])/h,m=(f[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=function r8e(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([n.stream(t=f),r.stream(f),s.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),r.precision(f),s.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),r.scale(.35*f),s.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],g=+f[1];return i=n.translate(f).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),o=r.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+Le,g+.12*h+Le],[p-.214*h-Le,g+.234*h-Le]]).stream(u),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+Le,g+.166*h+Le],[p-.115*h-Le,g+.234*h-Le]]).stream(u),d()},c.fitExtent=function(f,h){return fS(c,f,h)},c.fitSize=function(f,h){return iL(c,f,h)},c.fitWidth=function(f,h){return rL(c,f,h)},c.fitHeight=function(f,h){return oL(c,f,h)},c.scale(1070)},azimuthalequalarea:function s8e(){return ml(fne).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function a8e(){return ml(hne).scale(79.4188).clipAngle(179.999)},conicconformal:function c8e(){return sL(u8e).scale(109.5).parallels([30,30])},conicequalarea:hS,conicequidistant:function h8e(){return sL(f8e).scale(131.154).center([0,13.9389])},equalEarth:function g8e(){return ml(gne).scale(177.158)},equirectangular:function d8e(){return ml(mS).scale(152.63)},gnomonic:function m8e(){return ml(mne).scale(144.049).clipAngle(60)},identity:function _8e(){var s,a,u,c,d,m,_,e=1,t=0,n=0,i=1,r=1,o=0,l=null,f=1,h=1,p=T1({point:function(b,w){var D=v([b,w]);this.stream.point(D[0],D[1])}}),g=b1;function y(){return f=e*i,h=e*r,m=_=null,v}function v(b){var w=b[0]*f,D=b[1]*h;if(o){var E=D*s-w*a;w=w*s+D*a,D=E}return[w+t,D+n]}return v.invert=function(b){var w=b[0]-t,D=b[1]-n;if(o){var E=D*s+w*a;w=w*s-D*a,D=E}return[w/f,D/h]},v.stream=function(b){return m&&_===b?m:m=p(g(_=b))},v.postclip=function(b){return arguments.length?(g=b,l=u=c=d=null,y()):g},v.clipExtent=function(b){return arguments.length?(g=null==b?(l=u=c=d=null,b1):tne(l=+b[0][0],u=+b[0][1],c=+b[1][0],d=+b[1][1]),y()):null==l?null:[[l,u],[c,d]]},v.scale=function(b){return arguments.length?(e=+b,y()):e},v.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},v.angle=function(b){return arguments.length?(a=Ie(o=b%360*lt),s=Be(o),y()):o*jn},v.reflectX=function(b){return arguments.length?(i=b?-1:1,y()):i<0},v.reflectY=function(b){return arguments.length?(r=b?-1:1,y()):r<0},v.fitExtent=function(b,w){return fS(v,b,w)},v.fitSize=function(b,w){return iL(v,b,w)},v.fitWidth=function(b,w){return rL(v,b,w)},v.fitHeight=function(b,w){return oL(v,b,w)},v},mercator:function l8e(){return pne(pS).scale(961/Ir)},mollweide:function T8e(){return ml(x8e).scale(169.529)},naturalEarth1:function y8e(){return ml(_ne).scale(175.295)},orthographic:function v8e(){return ml(yne).scale(249.5).clipAngle(90+Le)},stereographic:function b8e(){return ml(vne).scale(250).clipAngle(142)},transversemercator:function w8e(){var e=pne(bne),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):[(i=t())[1],-i[0]]},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):[(i=n())[0],i[1],i[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in bS)cL(e,bS[e]);function Sne(e,t,n){var i=Fo(e,t-Le,n).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function xne(e,t,n){var i=Fo(e,t-Le,n).concat(t);return function(r){return i.map(function(o){return[o,r]})}}function M8e(){}const Mu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ane(){var e=1,t=1,n=a;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],d=[];return function o(l,u,c){var h,p,m,_,y,d=[],f=[];for(h=p=-1,Mu[(m=l[0]>=u)<<1].forEach(v);++h<e-1;)Mu[m|(m=l[h+1]>=u)<<1].forEach(v);for(Mu[m<<0].forEach(v);++p<t-1;){for(h=-1,Mu[(m=l[p*e+e]>=u)<<1|(_=l[p*e]>=u)<<2].forEach(v);++h<e-1;)y=_,Mu[m|(m=l[p*e+e+h+1]>=u)<<1|(_=l[p*e+h+1]>=u)<<2|y<<3].forEach(v);Mu[m|_<<3].forEach(v)}for(h=-1,Mu[(_=l[p*e]>=u)<<2].forEach(v);++h<e-1;)y=_,Mu[(_=l[p*e+h+1]>=u)<<2|y<<3].forEach(v);function v(b){var N,k,w=[b[0][0]+h,b[0][1]+p],D=[b[1][0]+h,b[1][1]+p],E=s(w),C=s(D);(N=f[E])?(k=d[C])?(delete f[N.end],delete d[k.start],N===k?(N.ring.push(D),c(N.ring)):d[N.start]=f[k.end]={start:N.start,end:k.end,ring:N.ring.concat(k.ring)}):(delete f[N.end],N.ring.push(D),f[N.end=C]=N):(N=d[C])?(k=f[E])?(delete d[N.start],delete f[k.end],N===k?(N.ring.push(D),c(N.ring)):d[k.start]=f[N.end]={start:k.start,end:N.end,ring:k.ring.concat(N.ring)}):(delete d[N.start],N.ring.unshift(w),d[N.start=E]=N):d[E]=f[C]={start:E,end:C,ring:[w,D]}}Mu[_<<3].forEach(v)}(l,u,f=>{n(f,l,u),function k8e(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var g,h=0,p=c.length;h<p;++h)if(-1!==I8e((g=c[h])[0],f))return void g.push(f)}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l){return 2*l[0]+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var m,f=d[0],h=d[1],p=0|f,g=0|h,_=u[g*e+p];f>0&&f<e&&p===f&&(d[0]=f+(c-(m=u[g*e+p-1]))/(_-m)-.5),h>0&&h<t&&g===h&&(d[1]=h+(c-(m=u[(g-1)*e+p]))/(_-m)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||Q("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(n=l?a:M8e,i):n===a},i}function I8e(e,t){for(var r,n=-1,i=t.length;++n<i;)if(r=O8e(e,t[n]))return r;return 0}function O8e(e,t){for(var n=t[0],i=t[1],r=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if(R8e(l,d,t))return 0;c>i!=h>i&&n<(f-u)*(i-c)/(h-c)+u&&(r=-r)}return r}function R8e(e,t,n){var i;return function F8e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function P8e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[i=+(e[0]===t[0])],n[i],t[i])}function Nne(e,t,n){return function(i){var r=tl(i),o=n?Math.min(r[0],0):r[0],s=r[1],a=s-o,l=t?Pc(o,s,e):a/(e+1);return Fo(o+l,s,l)}}function dL(e){Y.call(this,null,e)}function Mne(e,t,n,i,r){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-o)*t+i,d[1]=(d[1]-s)*n+r}return function(d){return d.coordinates.forEach(l),d}}function kne(e,t,n){const i=e>=0?e:WO(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function fL(e){return nt(e)?e:rr(+e)}function Ine(){var e=l=>l[0],t=l=>l[1],n=Mg,i=[-1,-1],r=960,o=500,s=2;function a(l,u){const c=kne(i[0],l,e)>>s,d=kne(i[1],l,t)>>s,f=c?c+2:0,h=d?d+2:0,p=2*f+(r>>s),g=2*h+(o>>s),m=new Float32Array(p*g),_=new Float32Array(p*g);let y=m;l.forEach(b=>{const w=f+(+e(b)>>s),D=h+(+t(b)>>s);w>=0&&w<p&&D>=0&&D<g&&(m[w+D*p]+=+n(b))}),c>0&&d>0?(ym(p,g,m,_,c),vm(p,g,_,m,d),ym(p,g,m,_,c),vm(p,g,_,m,d),ym(p,g,m,_,c),vm(p,g,_,m,d)):c>0?(ym(p,g,m,_,c),ym(p,g,_,m,c),ym(p,g,m,_,c),y=_):d>0&&(vm(p,g,m,_,d),vm(p,g,_,m,d),vm(p,g,m,_,d),y=_);const v=u?Math.pow(2,-2*s):1/ite(y);for(let b=0,w=p*g;b<w;++b)y[b]*=v;return{values:y,scale:1<<s,width:p,height:g,x1:f,y1:h,x2:f+(r>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=fL(l),a):e},a.y=function(l){return arguments.length?(t=fL(l),a):t},a.weight=function(l){return arguments.length?(n=fL(l),a):n},a.size=function(l){if(!arguments.length)return[r,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||Q("invalid size"),r=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||Q("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(1===(l=ve(l)).length&&(l=[+l[0],+l[0]]),2!==l.length&&Q("invalid bandwidth"),i=l,a):i},a}function ym(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<t;++s)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=n[a+s*e]),a>=r&&(a>=o&&(l-=n[a-o+s*e]),i[a-r+s*e]=l/Math.min(a+1,e-1+o-a,o))}function vm(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<e;++s)for(let a=0,l=0;a<t+r;++a)a<t&&(l+=n[s+a*e]),a>=r&&(a>=o&&(l-=n[s+(a-o)*e]),i[s+(a-r)*e]=l/Math.min(a+1,t-1+o-a,o))}function hL(e){Y.call(this,null,e)}dL.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},pe(dL,Y,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||nr,o=Ane().smooth(!1!==e.smooth),s=e.thresholds||function L8e(e,t,n){const i=Nne(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?i:i(e.map(r=>Hf(t(r).values)))}(i,r,e),a=null===e.as?null:e.as||"contour",l=[];return i.forEach(u=>{const c=r(u),d=o.size([c.width,c.height])(c.values,J(s)?s:s(c.values));(function $8e(e,t,n,i){let r=i.scale||t.scale,o=i.translate||t.translate;if(nt(r)&&(r=r(n,i)),nt(o)&&(o=o(n,i)),(1===r||null==r)&&!o)return;const s=(Ct(r)?r:r[0])||1,a=(Ct(r)?r:r[1])||1;e.forEach(Mne(t,s,a,o&&o[0]||0,o&&o[1]||0))})(d,c,u,e),d.forEach(f=>{l.push(_D(u,It(null!=a?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),hL.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const B8e=["x","y","weight","size","cellSize","bandwidth"];function One(e,t){return B8e.forEach(n=>null!=t[n]?e[n](t[n]):0),e}function pL(e){Y.call(this,null,e)}pe(hL,Y,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=function V8e(e,t){var r,o,s,a,l,u,n=[],i=c=>c(a);if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(u=r[l=t.map(i)])||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(On),s=One(Ine(),e),a=e.as||"grid";return l=r.map(c=>It(function u(c,d){for(let f=0;f<o.length;++f)c[o[f]]=d[f];return c}({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),pL.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},pe(pL,Y,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var a,l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=Ane().smooth(!1!==e.smooth),r=e.values,o=e.thresholds||Nne(e.count||10,e.nice,!!r),s=e.size;return r||(r=t.materialize(t.SOURCE).source,l=Mne(a=One(Ine(),e)(r,!0),a.scale||1,a.scale||1,0,0),s=[a.width,a.height],r=a.values),o=J(o)?o:o(r),r=i.size(s)(r,o),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(It),n}});const gL="Feature",mL="FeatureCollection";function _L(e){Y.call(this,null,e)}function yL(e){Y.call(this,null,e)}function vL(e){Y.call(this,null,e)}function bL(e){Y.call(this,null,e)}function wL(e){Y.call(this,[],e),this.generator=function Tne(){var e,t,n,i,r,o,s,a,f,h,p,g,l=10,u=l,c=90,d=360,m=2.5;function _(){return{type:"MultiLineString",coordinates:y()}}function y(){return Fo(XC(i/c)*c,n,c).map(p).concat(Fo(XC(a/d)*d,s,d).map(g)).concat(Fo(XC(t/l)*l,e,l).filter(function(v){return _t(v%c)>Le}).map(f)).concat(Fo(XC(o/u)*u,r,u).filter(function(v){return _t(v%d)>Le}).map(h))}return _.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},_.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},_.extent=function(v){return arguments.length?_.extentMajor(v).extentMinor(v):_.extentMinor()},_.extentMajor=function(v){return arguments.length?(a=+v[0][1],s=+v[1][1],(i=+v[0][0])>(n=+v[1][0])&&(v=i,i=n,n=v),a>s&&(v=a,a=s,s=v),_.precision(m)):[[i,a],[n,s]]},_.extentMinor=function(v){return arguments.length?(o=+v[0][1],r=+v[1][1],(t=+v[0][0])>(e=+v[1][0])&&(v=t,t=e,e=v),o>r&&(v=o,o=r,r=v),_.precision(m)):[[t,o],[e,r]]},_.step=function(v){return arguments.length?_.stepMajor(v).stepMinor(v):_.stepMinor()},_.stepMajor=function(v){return arguments.length?(c=+v[0],d=+v[1],_):[c,d]},_.stepMinor=function(v){return arguments.length?(l=+v[0],u=+v[1],_):[l,u]},_.precision=function(v){return arguments.length?(m=+v,f=Sne(o,r,90),h=xne(t,e,m),p=Sne(a,s,90),g=xne(i,n,m),_):m},_.extentMajor([[-180,-90+Le],[180,90-Le]]).extentMinor([[-180,-80-Le],[180,80+Le]])}()}function EL(e){Y.call(this,null,e)}function Rne(e){if(!nt(e))return!1;const t=oa(tr(e));return t.$x||t.$y||t.$value||t.$max}function Fne(e){Y.call(this,null,e),this.modified(!0)}function Pne(e,t,n){nt(e[t])&&e[t](n)}function Lne(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,d,f,h,p,g,m,_,y,o=e._root,s={data:i},a=e._x0,l=e._y0,u=e._x1,c=e._y1;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(d=(a+u)/2))?a=d:u=d,(m=n>=(f=(l+c)/2))?l=f:c=f,r=o,!(o=o[_=m<<1|g]))return r[_]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,r?r[_]=s:e._root=s,e;do{r=r?r[_]=new Array(4):e._root=new Array(4),(g=t>=(d=(a+u)/2))?a=d:u=d,(m=n>=(f=(l+c)/2))?l=f:c=f}while((_=m<<1|g)==(y=(p>=f)<<1|h>=d));return r[y]=o,r[_]=s,e}function Rr(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function c4e(e){return e[0]}function f4e(e){return e[1]}function DL(e,t,n){var i=new CL(t??c4e,n??f4e,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function CL(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function $ne(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}_L.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},pe(_L,Y,{transform(e,t){var u,n=this._features,i=this._points,r=e.fields,o=r&&r[0],s=r&&r[1],a=e.geojson||!r&&nr,l=t.ADD;u=e.modified()||t.changed(t.REM)||t.modified(tr(a))||o&&t.modified(tr(o))||s&&t.modified(tr(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var d=o(c),f=s(c);null!=d&&null!=f&&(d=+d)===d&&(f=+f)===f&&i.push([d,f])}),n=n.concat({type:gL,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:mL,features:n}}}),yL.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},pe(yL,Y,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||nr,o=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=Cne(e.projection),n.materialize().reflow()):s=r===nr||t.modified(r.fields)?n.ADD_MOD:n.ADD;const a=function U8e(e,t){const n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(i,e.pointRadius);return n.visit(s,l=>l[o]=i(r(l))),i.pointRadius(a),n.modifies(o)}}),vL.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},pe(vL,Y,{transform(e,t){var l,n=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1];function u(c){const d=n([i(c),r(c)]);d?(c[s]=d[0],c[a]=d[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}}),bL.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},pe(bL,Y,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",o=n.ADD;return(!i||e.modified())&&(this.value=i=function H8e(e,t,n){const i=null==n?r=>e(t(r)):r=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(o),s};return i.context=r=>(e.context(r),i),i}(Cne(e.projection),e.field||ps("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[r]=i),n.modifies(r)}}),wL.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},pe(wL,Y,{transform(e,t){var r,n=this.value,i=this.generator;if(!n.length||e.modified())for(const o in e)nt(i[o])&&i[o](e[o]);return r=i(),n.length?t.mod.push(jK(n[0],r)):t.add.push(It(r)),n[0]=r,t}}),EL.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},pe(EL,Y,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i="shared"===e.resolve,r=e.field||nr,o=function G8e(e,t){let n;return nt(e)?(n=i=>e(i,t),n.dep=Rne(e)):e?n=rr(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}(e.opacity,e),s=function z8e(e,t){let n;return nt(e)?(n=i=>Wc(e(i,t)),n.dep=Rne(e)):n=rr(Wc(e||"#888")),n}(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Hf(n.map(u=>Hf(r(u).values))):0};return n.forEach(u=>{const c=r(u),d=it({},u,l);i||(d.$max=Hf(c.values||[])),u[a]=function W8e(e,t,n,i){const r=e.width,s=e.x1||0,a=e.y1||0,l=e.x2||r,u=e.y2||e.height,c=e.values,d=c?m=>c[m]:kc,f=zc(l-s,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),g=p.data;for(let m=a,_=0;m<u;++m){t.$y=m-a;for(let y=s,v=m*r;y<l;++y,_+=4){t.$x=y-s,t.$value=d(y+v);const b=n(t);g[_+0]=b.r,g[_+1]=b.g,g[_+2]=b.b,g[_+3]=~~(255*i(t))}}return h.putImageData(p,0,0),f}(c,d,s.dep?s:rr(s(d)),o.dep?o:rr(o(d)))}),t.reflow(!0).modifies(a)}}),pe(Fne,Y,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function Y8e(e){const t=cL((e||"mercator").toLowerCase());return t||Q("Unrecognized projection type: "+e),t()}(e.type),uL.forEach(i=>{null!=e[i]&&Pne(n,i,e[i])})):uL.forEach(i=>{e.modified(i)&&Pne(n,i,e[i])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function q8e(e,t){const n=function K8e(e){return 1===(e=ve(e)).length?e[0]:{type:mL,features:e.reduce((t,n)=>t.concat(function X8e(e){return e.type===mL?e.features:ve(e).filter(t=>null!=t).map(t=>t.type===gL?t:{type:gL,geometry:t})}(n)),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});var Fr=DL.prototype=CL.prototype;function Pr(e){return function(){return e}}function cd(e){return 1e-6*(e()-.5)}function p4e(e){return e.x+e.vx}function g4e(e){return e.y+e.vy}Fr.copy=function(){var n,i,e=new CL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root;if(!t)return e;if(!t.length)return e._root=$ne(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=$ne(i));return e},Fr.add=function J8e(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Lne(this.cover(t,n),t,n,e)},Fr.addAll=function Z8e(e){var t,n,r,o,i=e.length,s=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=r,a[n]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>d&&(d=o));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<i;++n)Lne(this,s[n],a[n],e[n]);return this},Fr.cover=function e4e(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var l,u,s=r-n||1,a=this._root;n>e||e>=r||i>t||t>=o;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Fr.data=function t4e(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},Fr.extent=function n4e(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Fr.find=function i4e(e,t,n){var i,s,a,l,u,p,g,r=this._x0,o=this._y0,c=this._x1,d=this._y1,f=[],h=this._root;for(h&&f.push(new Rr(h,r,o,c,d)),null==n?n=1/0:(r=e-n,o=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>d||(l=p.x1)<r||(u=p.y1)<o))if(h.length){var m=(s+l)/2,_=(a+u)/2;f.push(new Rr(h[3],m,_,l,u),new Rr(h[2],s,_,m,u),new Rr(h[1],m,a,l,_),new Rr(h[0],s,a,m,_)),(g=(t>=_)<<1|e>=m)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=p)}else{var y=e-+this._x.call(null,h.data),v=t-+this._y.call(null,h.data),b=y*y+v*v;if(b<n){var w=Math.sqrt(n=b);r=e-w,o=t-w,c=e+w,d=t+w,i=h.data}}return i},Fr.remove=function r4e(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,i,r,o,c,d,f,h,p,g,m,_,n=this._root,s=this._x0,a=this._y0,l=this._x1,u=this._y1;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(s+l)/2))?s=f:l=f,(g=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(i=t,_=m)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=o,this)},Fr.removeAll=function o4e(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Fr.root=function s4e(){return this._root},Fr.size=function a4e(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},Fr.visit=function l4e(e){var n,r,o,s,a,l,t=[],i=this._root;for(i&&t.push(new Rr(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&i.length){var u=(o+a)/2,c=(s+l)/2;(r=i[3])&&t.push(new Rr(r,u,c,a,l)),(r=i[2])&&t.push(new Rr(r,o,c,u,l)),(r=i[1])&&t.push(new Rr(r,u,s,a,c)),(r=i[0])&&t.push(new Rr(r,o,s,u,c))}return this},Fr.visitAfter=function u4e(e){var i,t=[],n=[];for(this._root&&t.push(new Rr(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(s+l)/2,d=(a+u)/2;(o=r[0])&&t.push(new Rr(o,s,a,c,d)),(o=r[1])&&t.push(new Rr(o,c,a,l,d)),(o=r[2])&&t.push(new Rr(o,s,d,c,u)),(o=r[3])&&t.push(new Rr(o,c,d,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this},Fr.x=function d4e(e){return arguments.length?(this._x=e,this):this._x},Fr.y=function h4e(e){return arguments.length?(this._y=e,this):this._y};var _4e={value:()=>{}};function Bne(){for(var i,e=0,t=arguments.length,n={};e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new wS(n)}function wS(e){this._=e}function y4e(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}function v4e(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function Vne(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=_4e,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}wS.prototype=Bne.prototype={constructor:wS,on:function(e,t){var r,n=this._,i=y4e(e+"",n),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=Vne(n[r],e.name,t);else if(null==t)for(r in n)n[r]=Vne(n[r],e.name,null);return this}for(;++o<s;)if((r=(e=i[o]).type)&&(r=v4e(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wS(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,o,n=new Array(r),i=0;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(o=this._[e]).length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};const b4e=Bne;var ES,P1,bm=0,R1=0,F1=0,DS=0,ah=0,CS=0,L1="object"==typeof performance&&performance.now?performance:Date,Une="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function SL(){return ah||(Une(w4e),ah=L1.now()+CS)}function w4e(){ah=0}function SS(){this._call=this._time=this._next=null}function Hne(e,t,n){var i=new SS;return i.restart(e,t,n),i}function zne(){ah=(DS=L1.now())+CS,bm=R1=0;try{!function E4e(){SL(),++bm;for(var t,e=ES;e;)(t=ah-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bm}()}finally{bm=0,function C4e(){for(var e,n,t=ES,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ES=n);P1=e,xL(i)}(),ah=0}}function D4e(){var e=L1.now(),t=e-DS;t>1e3&&(CS-=t,DS=e)}function xL(e){bm||(R1&&(R1=clearTimeout(R1)),e-ah>24?(e<1/0&&(R1=setTimeout(zne,e-L1.now()-CS)),F1&&(F1=clearInterval(F1))):(F1||(DS=L1.now(),F1=setInterval(D4e,1e3)),bm=1,Une(zne)))}function A4e(e){return e.x}function N4e(e){return e.y}SS.prototype=Hne.prototype={constructor:SS,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?SL():+n)+(null==t?0:+t),!this._next&&P1!==this&&(P1?P1._next=this:ES=this,P1=this),this._call=e,this._time=n,xL()},stop:function(){this._call&&(this._call=null,this._time=1/0,xL())}};var k4e=Math.PI*(3-Math.sqrt(5));function R4e(e){return e.index}function Wne(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const qne={center:function Q8e(e,t){var n,i=1;function r(){var o,a,s=n.length,l=0,u=0;for(o=0;o<s;++o)l+=(a=n[o]).x,u+=a.y;for(l=(l/s-e)*i,u=(u/s-t)*i,o=0;o<s;++o)(a=n[o]).x-=l,a.y-=u}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(i=+o,r):i},r},collide:function m4e(e){var t,n,i,r=1,o=1;function s(){for(var u,d,f,h,p,g,m,c=t.length,_=0;_<o;++_)for(d=DL(t,p4e,g4e).visitAfter(a),u=0;u<c;++u)m=(g=n[(f=t[u]).index])*g,h=f.x+f.vx,p=f.y+f.vy,d.visit(y);function y(v,b,w,D,E){var C=v.data,N=v.r,k=g+N;if(!C)return b>h+k||D<h-k||w>p+k||E<p-k;if(C.index>f.index){var R=h-C.x-C.vx,F=p-C.y-C.vy,P=R*R+F*F;P<k*k&&(0===R&&(P+=(R=cd(i))*R),0===F&&(P+=(F=cd(i))*F),P=(k-(P=Math.sqrt(P)))/P*r,f.vx+=(R*=P)*(k=(N*=N)/(m+N)),f.vy+=(F*=P)*k,C.vx-=R*(k=1-k),C.vy-=F*k)}}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,d,c=t.length;for(n=new Array(c),u=0;u<c;++u)n[(d=t[u]).index]=+e(d,u,t)}}return"function"!=typeof e&&(e=Pr(null==e?1:+e)),s.initialize=function(u,c){t=u,i=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(r=+u,s):r},s.radius=function(u){return arguments.length?(e="function"==typeof u?u:Pr(+u),l(),s):e},s},nbody:function O4e(){var e,t,n,i,o,r=Pr(-30),s=1,a=1/0,l=.81;function u(h){var p,g=e.length,m=DL(e,A4e,N4e).visitAfter(d);for(i=h,p=0;p<g;++p)t=e[p],m.visit(f)}function c(){if(e){var h,g,p=e.length;for(o=new Array(p),h=0;h<p;++h)o[(g=e[h]).index]=+r(g,h,e)}}function d(h){var g,m,y,v,b,p=0,_=0;if(h.length){for(y=v=b=0;b<4;++b)(g=h[b])&&(m=Math.abs(g.value))&&(p+=g.value,_+=m,y+=m*g.x,v+=m*g.y);h.x=y/_,h.y=v/_}else{(g=h).x=g.data.x,g.y=g.data.y;do{p+=o[g.data.index]}while(g=g.next)}h.value=p}function f(h,p,g,m){if(!h.value)return!0;var _=h.x-t.x,y=h.y-t.y,v=m-p,b=_*_+y*y;if(v*v/l<b)return b<a&&(0===_&&(b+=(_=cd(n))*_),0===y&&(b+=(y=cd(n))*y),b<s&&(b=Math.sqrt(s*b)),t.vx+=_*h.value*i/b,t.vy+=y*h.value*i/b),!0;if(!(h.length||b>=a)){(h.data!==t||h.next)&&(0===_&&(b+=(_=cd(n))*_),0===y&&(b+=(y=cd(n))*y),b<s&&(b=Math.sqrt(s*b)));do{h.data!==t&&(t.vx+=_*(v=o[h.data.index]*i/b),t.vy+=y*v)}while(h=h.next)}}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(r="function"==typeof h?h:Pr(+h),c(),u):r},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u},link:function F4e(e){var i,o,s,a,l,u,t=R4e,n=function d(m){return 1/Math.min(a[m.source.index],a[m.target.index])},r=Pr(30),c=1;function f(m){for(var _=0,y=e.length;_<c;++_)for(var b,w,D,E,C,N,k,v=0;v<y;++v)E=(D=(b=e[v]).target).x+D.vx-(w=b.source).x-w.vx||cd(u),C=D.y+D.vy-w.y-w.vy||cd(u),C*=N=((N=Math.sqrt(E*E+C*C))-o[v])/N*m*i[v],D.vx-=(E*=N)*(k=l[v]),D.vy-=C*k,w.vx+=E*(k=1-k),w.vy+=C*k}function h(){if(s){var m,b,_=s.length,y=e.length,v=new Map(s.map((w,D)=>[t(w,D,s),w]));for(m=0,a=new Array(_);m<y;++m)(b=e[m]).index=m,"object"!=typeof b.source&&(b.source=Wne(v,b.source)),"object"!=typeof b.target&&(b.target=Wne(v,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(m=0,l=new Array(y);m<y;++m)l[m]=a[(b=e[m]).source.index]/(a[b.source.index]+a[b.target.index]);i=new Array(y),p(),o=new Array(y),g()}}function p(){if(s)for(var m=0,_=e.length;m<_;++m)i[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,_=e.length;m<_;++m)o[m]=+r(e[m],m,e)}return null==e&&(e=[]),f.initialize=function(m,_){s=m,u=_,h()},f.links=function(m){return arguments.length?(e=m,h(),f):e},f.id=function(m){return arguments.length?(t=m,f):t},f.iterations=function(m){return arguments.length?(c=+m,f):c},f.strength=function(m){return arguments.length?(n="function"==typeof m?m:Pr(+m),p(),f):n},f.distance=function(m){return arguments.length?(r="function"==typeof m?m:Pr(+m),g(),f):r},f},x:function P4e(e){var n,i,r,t=Pr(.1);function o(a){for(var c,l=0,u=n.length;l<u;++l)(c=n[l]).vx+=(r[l]-c.x)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=Pr(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:Pr(+a),s(),o):t},o.x=function(a){return arguments.length?(e="function"==typeof a?a:Pr(+a),s(),o):e},o},y:function L4e(e){var n,i,r,t=Pr(.1);function o(a){for(var c,l=0,u=n.length;l<u;++l)(c=n[l]).vy+=(r[l]-c.y)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=Pr(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:Pr(+a),s(),o):t},o.y=function(a){return arguments.length?(e="function"==typeof a?a:Pr(+a),s(),o):e},o}},$1="forces",TL=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],$4e=["static","iterations"],Yne=["x","y","vx","vy"];function AL(e){Y.call(this,null,e)}function Kne(e,t,n,i){var o,s,a,l,r=ve(t.forces);for(o=0,s=TL.length;o<s;++o)(a=TL[o])!==$1&&t.modified(a)&&e[a](t[a]);for(o=0,s=r.length;o<s;++o)l=$1+o,(a=n||t.modified($1,o)?U4e(r[o]):i&&j4e(r[o],i)?e.force(l):null)&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force($1+o,null);return e.numForces=r.length,e}function j4e(e,t){var n,i;for(n in e)if(nt(i=e[n])&&t.modified(tr(i)))return 1;return 0}function U4e(e){var t,n;for(n in Ce(qne,e.force)||Q("Unrecognized force: "+e.force),t=qne[e.force](),e)nt(t[n])&&H4e(t[n],e[n],e);return t}function H4e(e,t,n){e(nt(t)?i=>t(i,n):t)}function z4e(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function NL(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=aBe)):void 0===t&&(t=sBe);for(var i,o,s,a,l,n=new wm(e),r=[n];i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,a=l-1;a>=0;--a)r.push(o=s[a]=new wm(s[a])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Xne)}function sBe(e){return e.children}function aBe(e){return Array.isArray(e)?e[1]:null}function lBe(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function Xne(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function wm(e){this.data=e,this.depth=this.height=0,this.parent=null}function xS(e){return null==e?null:Qne(e)}function Qne(e){if("function"!=typeof e)throw new Error;return e}function lh(){return 0}function Em(e){return function(){return e}}function pBe(e,t){var n,i;if(ML(t,e))return[t];for(n=0;n<e.length;++n)if(TS(t,e[n])&&ML(B1(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(TS(B1(e[n],e[i]),t)&&TS(B1(e[n],t),e[i])&&TS(B1(e[i],t),e[n])&&ML(tie(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function TS(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function eie(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function ML(e,t){for(var n=0;n<t.length;++n)if(!eie(e,t[n]))return!1;return!0}function gBe(e){switch(e.length){case 1:return function mBe(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return B1(e[0],e[1]);case 3:return tie(e[0],e[1],e[2])}}function B1(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-i,c=a-r,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(i+s+u/d*c)/2,r:(d+r+a)/2}}function tie(e,t,n){var i=e.x,r=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=i-s,h=i-u,p=r-a,g=r-c,m=l-o,_=d-o,y=i*i+r*r-o*o,v=y-s*s-a*a+l*l,b=y-u*u-c*c+d*d,w=h*p-f*g,D=(p*b-g*v)/(2*w)-i,E=(g*m-p*_)/w,C=(h*v-f*b)/(2*w)-r,N=(f*_-h*m)/w,k=E*E+N*N-1,R=2*(o+D*E+C*N),F=D*D+C*C-o*o,P=-(Math.abs(k)>1e-6?(R+Math.sqrt(R*R-4*k*F))/(2*k):F/R);return{x:i+D+E*P,y:r+C+N*P,r:P}}function nie(e,t,n){var r,o,a,l,i=e.x-t.x,s=e.y-t.y,u=i*i+s*s;u?(o=t.r+n.r,l=e.r+n.r,(o*=o)>(l*=l)?(r=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-r*r)),n.x=e.x-r*i-a*s,n.y=e.y-r*s+a*i):(r=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x+r*i-a*s,n.y=t.y+r*s+a*i)):(n.x=t.x+n.r,n.y=t.y)}function iie(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function rie(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function AS(e){this._=e,this.next=null,this.previous=null}function oie(e,t){if(!(o=(e=function fBe(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var n,i,r,o,s,a,l,u,c,d,f;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(n.x=-(i=e[1]).r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;nie(i,n,r=e[2]),n=new AS(n),i=new AS(i),r=new AS(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<o;++l){nie(n._,i._,r=e[l]),r=new AS(r),u=i.next,c=n.previous,d=i._.r,f=n._.r;do{if(d<=f){if(iie(u._,r._)){n.next=i=u,i.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(iie(c._,r._)){(n=c).next=i,i.previous=n,--l;continue e}f+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=rie(n);(r=r.next)!==i;)(a=rie(r))<s&&(n=r,s=a);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=function Zne(e,t){for(var o,s,n=0,i=(e=function hBe(e,t){let i,r,n=e.length;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}(Array.from(e),t)).length,r=[];n<i;)o=e[n],s&&eie(s,o)?++n:(s=gBe(r=pBe(r,o)),n=0);return s}(n,t),l=0;l<o;++l)(n=e[l]).x-=r.x,n.y-=r.y;return r.r}function _Be(e){return Math.sqrt(e.value)}function sie(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function kL(e,t,n){return function(i){if(r=i.children){var r,o,l,s=r.length,a=e(i)*t||0;if(a)for(o=0;o<s;++o)r[o].r+=a;if(l=oie(r,n),a)for(o=0;o<s;++o)r[o].r-=a;i.r=l+a}}}function aie(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function lie(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function V1(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,u=e.value&&(i-t)/e.value;++a<l;)(s=o[a]).y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*u}AL.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Yne}]},pe(AL,Y,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(TL),o=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&Kne(n,e,0,t)):(this.value=n=function V4e(e,t){const n=function I4e(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=Hne(d),u=b4e("tick","end"),c=function T4e(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}();function d(){f(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function f(g){var m,y,_=e.length;void 0===g&&(g=1);for(var v=0;v<g;++v)for(n+=(o-n)*r,a.forEach(function(b){b(n)}),m=0;m<_;++m)null==(y=e[m]).fx?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),null==y.fy?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return t}function h(){for(var _,g=0,m=e.length;g<m;++g){if((_=e[g]).index=g,null!=_.fx&&(_.x=_.fx),null!=_.fy&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var y=10*Math.sqrt(.5+g),v=g*k4e;_.x=y*Math.cos(v),_.y=y*Math.sin(v)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return null==e&&(e=[]),h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(i=+g,t):i},alphaDecay:function(g){return arguments.length?(r=+g,t):+r},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(null==m?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,_){var b,w,D,E,C,y=0,v=e.length;for(null==_?_=1/0:_*=_,y=0;y<v;++y)(D=(b=g-(E=e[y]).x)*b+(w=m-E.y)*w)<_&&(C=E,_=D);return C},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}(e),i=n.stop,r=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,r()),n.stop=()=>(o=!0,i()),Kne(n,t,!0).on("end",()=>o=!0)}(t.source,e),n.on("tick",function B4e(e,t){return()=>e.touch(t).run()}(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified($4e)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let c,a=this._argops,l=0,u=a.length;l<u;++l)if(c=a[l],c.name===$1&&"link"===c.op._argval.force)for(var s,i=c.op._argops,r=0,o=i.length;r<o;++r)if("links"===i[r].name&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(Yne)}}),wm.prototype=NL.prototype={constructor:wm,count:function G4e(){return this.eachAfter(z4e)},each:function W4e(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this},eachAfter:function Y4e(e,t){for(var o,s,a,n=this,i=[n],r=[],l=-1;n=i.pop();)if(r.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)i.push(o[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this},eachBefore:function q4e(e,t){for(var r,o,n=this,i=[n],s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this},find:function K4e(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i},sum:function X4e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})},sort:function Q4e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function J4e(e){for(var t=this,n=function Z4e(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}(t,e),i=[t];t!==n;)i.push(t=t.parent);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i},ancestors:function eBe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function tBe(){return Array.from(this)},leaves:function nBe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function iBe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function oBe(){return NL(this).eachBefore(lBe)},[Symbol.iterator]:function*rBe(){var t,i,r,o,e=this,n=[e];do{for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r])}while(n.length)}};var bBe={depth:-1},uie={},IL={};function wBe(e){return e.id}function EBe(e){return e.parentId}function cie(){var n,e=wBe,t=EBe;function i(r){var l,u,c,d,f,h,p,g,o=Array.from(r),s=e,a=t,m=new Map;if(null!=n){const _=o.map((b,w)=>function DBe(e){let t=(e=`${e}`).length;return OL(e,t-1)&&!OL(e,t-2)&&(e=e.slice(0,-1)),"/"===e[0]?e:`/${e}`}(n(b,w,r))),y=_.map(die),v=new Set(_).add("");for(const b of y)v.has(b)||(v.add(b),_.push(b),y.push(die(b)),o.push(IL));s=(b,w)=>_[w],a=(b,w)=>y[w]}for(c=0,l=o.length;c<l;++c)h=o[c]=new wm(u=o[c]),null!=(p=s(u,c,r))&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?uie:h)),null!=(p=a(u,c,r))&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(p=(h=o[c]).parent){if(!(f=m.get(p)))throw new Error("missing: "+p);if(f===uie)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(null!=n){for(;d.data===IL&&1===d.children.length;)d=d.children[0],--l;for(let _=o.length-1;_>=0&&(h=o[_]).data===IL;--_)h.data=null}if(d.parent=bBe,d.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(Xne),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(e=xS(r),i):e},i.parentId=function(r){return arguments.length?(t=xS(r),i):t},i.path=function(r){return arguments.length?(n=xS(r),i):n},i}function die(e){let t=e.length;if(t<2)return"";for(;--t>1&&!OL(e,t););return e.slice(0,t)}function OL(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if(0==(1&n))return!0}return!1}function CBe(e,t){return e.parent===t.parent?1:2}function RL(e){var t=e.children;return t?t[0]:e.t}function FL(e){var t=e.children;return t?t[t.length-1]:e.t}function SBe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function TBe(e,t,n){return e.a.parent===t.parent?e.a:n}function NS(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function MBe(e,t){return e.parent===t.parent?1:2}function IBe(e,t){return e+t.x}function RBe(e,t){return Math.max(e,t.y)}function MS(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,u=e.value&&(r-n)/e.value;++a<l;)(s=o[a]).x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*u}NS.prototype=Object.create(wm.prototype);var fie=(1+Math.sqrt(5))/2;function hie(e,t,n,i,r,o){for(var l,u,h,p,m,_,y,v,b,w,D,s=[],a=t.children,c=0,d=0,f=a.length,g=t.value;c<f;){h=r-n,p=o-i;do{m=a[d++].value}while(!m&&d<f);for(_=y=m,D=m*m*(w=Math.max(p/h,h/p)/(g*e)),b=Math.max(y/D,D/_);d<f;++d){if(m+=u=a[d].value,u<_&&(_=u),u>y&&(y=u),D=m*m*w,(v=Math.max(y/D,D/_))>b){m-=u;break}b=v}s.push(l={value:m,dice:h<p,children:a.slice(c,d)}),l.dice?V1(l,n,i,r,g?i+=p*m/g:o):MS(l,n,i,g?n+=h*m/g:r,o),g-=m,c=d}return s}const pie=function e(t){function n(i,r,o,s,a){hie(t,i,r,o,s,a)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(fie),VBe=function e(t){function n(i,r,o,s,a){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,d,h,f=-1,p=l.length,g=i.value;++f<p;){for(c=(u=l[f]).children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?V1(u,r,o,s,g?o+=(a-o)*u.value/g:a):MS(u,r,o,g?r+=(s-r)*u.value/g:s,a),g-=u.value}else i._squarify=l=hie(t,i,r,o,s,a),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(fie);function PL(e,t,n){const i={};return e.each(r=>{const o=r.data;n(o)&&(i[t(o)]=r)}),e.lookup=i,e}function LL(e){Y.call(this,null,e)}LL.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const UBe=e=>e.values;function HBe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,o){if(o>=e.length)return r;const s=r.length,a=e[o++],l={},u={};let d,f,h,c=-1;for(;++c<s;)d=a(f=r[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],o);return u}function i(r,o){if(++o>e.length)return r;const s=[];for(const a in r)s.push({key:a,values:i(r[a],o)});return s}return t}function ku(e){Y.call(this,null,e)}pe(LL,Y,{transform(e,t){t.source||Q("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(s=>{s.children&&mD(s.data)&&r.rem.push(s.data)}),this.value=o=NL({values:ve(e.keys).reduce((s,a)=>(s.key(a),s),HBe()).entries(r.source)},UBe),n&&o.each(s=>{s.children&&(s=It(s.data),r.add.push(s),r.source.push(s))}),PL(o,Fe,Fe)),r.source.root=o,r}});const zBe=(e,t)=>e.parent===t.parent?1:2;pe(ku,Y,{transform(e,t){(!t.source||!t.source.root)&&Q(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(jf(e.sort,s=>s.data)),function GBe(e,t,n){for(let i,r=0,o=t.length;r<o;++r)i=t[r],i in n&&e[i](n[i])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?zBe:Mg);try{this.value=n(r)}catch(s){Q(s)}return r.each(s=>function WBe(e,t,n){const i=e.data,r=t.length-1;for(let o=0;o<r;++o)i[n[o]]=e[t[o]];i[n[r]]=e.children?e.children.length:0}(s,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const $L=["x","y","r","depth","children"];function BL(e){ku.call(this,e)}BL.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$L.length,default:$L}]},pe(BL,ku,{layout:function yBe(){var e=null,t=1,n=1,i=lh;function r(o){const s=function dBe(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}();return o.x=t/2,o.y=n/2,e?o.eachBefore(sie(e)).eachAfter(kL(i,.5,s)).eachBefore(aie(1)):o.eachBefore(sie(_Be)).eachAfter(kL(lh,1,s)).eachAfter(kL(i,o.r/Math.min(t,n),s)).eachBefore(aie(Math.min(t,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=xS(o),r):e},r.size=function(o){return arguments.length?(t=+o[0],n=+o[1],r):[t,n]},r.padding=function(o){return arguments.length?(i="function"==typeof o?o:Em(+o),r):i},r},params:["radius","size","padding"],fields:$L});const VL=["x0","y0","x1","y1","depth","children"];function jL(e){ku.call(this,e)}function UL(e){Y.call(this,null,e)}jL.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VL.length,default:VL}]},pe(jL,ku,{layout:function vBe(){var e=1,t=1,n=0,i=!1;function r(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(function o(s,a){return function(l){l.children&&V1(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}(t,a)),i&&s.eachBefore(lie),s}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r},params:["size","round","padding"],fields:VL}),UL.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},pe(UL,Y,{transform(e,t){t.source||Q("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),o=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(n=r.source.length?PL(cie().id(e.key).parentId(e.parentKey)(r.source),e.key,gs):PL(cie()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const gie={tidy:function NBe(){var e=CBe,t=1,n=1,i=null;function r(u){var c=function ABe(e){for(var n,r,o,s,a,t=new NS(e,0),i=[t];n=i.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)i.push(r=n.children[s]=new NS(o[s],s)),r.parent=n;return(t.parent=new NS(null,0)).children=[t],t}(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),i)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(y){y.x<d.x&&(d=y),y.x>f.x&&(f=y),y.depth>h.depth&&(h=y)});var p=d===f?1:e(d,f)/2,g=p-d.x,m=t/(f.x+p+g),_=n/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+g)*m,y.y=y.depth*_})}return u}function o(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){!function xBe(e){for(var o,t=0,n=0,i=e.children,r=i.length;--r>=0;)(o=i[r]).z+=t,o.m+=t,t+=o.s+(n+=o.c)}(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=function a(u,c,d){if(c){for(var b,f=u,h=u,p=c,g=f.parent.children[0],m=f.m,_=h.m,y=p.m,v=g.m;p=FL(p),f=RL(f),p&&f;)g=RL(g),(h=FL(h)).a=u,(b=p.z+y-f.z-m+e(p._,f._))>0&&(SBe(TBe(p,u,d),u,b),m+=b,_+=b),y+=p.m,m+=f.m,v+=g.m,_+=h.m;p&&!FL(h)&&(h.t=p,h.m+=y-_),f&&!RL(g)&&(g.t=f,g.m+=m-v,d=u)}return d}(u,f,u.parent.A||d[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function l(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r},cluster:function LBe(){var e=MBe,t=1,n=1,i=!1;function r(o){var s,a=0;o.eachAfter(function(f){var h=f.children;h?(f.x=function kBe(e){return e.reduce(IBe,0)/e.length}(h),f.y=function OBe(e){return 1+e.reduce(RBe,0)}(h)):(f.x=s?a+=e(f,s):0,f.y=0,s=f)});var l=function FBe(e){for(var t;t=e.children;)e=t[0];return e}(o),u=function PBe(e){for(var t;t=e.children;)e=t[t.length-1];return e}(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(i?function(f){f.x=(f.x-o.x)*t,f.y=(o.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(o.y?f.y/o.y:1))*n})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,t=+o[0],n=+o[1],r):i?null:[t,n]},r.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],n=+o[1],r):i?[t,n]:null},r}},HL=["x","y","depth","children"];function zL(e){ku.call(this,e)}function GL(e){Y.call(this,[],e)}zL.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:HL.length,default:HL}]},pe(zL,ku,{layout(e){const t=e||"tidy";if(Ce(gie,t))return gie[t]();Q("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:HL}),GL.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},pe(GL,Y,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),o={};return i||Q("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>o[Fe(s)]=1),i.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[Fe(a)]&&o[Fe(l)]&&r.add.push(It({source:l,target:a}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Fe(s)]=1),n.forEach(s=>{(o[Fe(s.source)]||o[Fe(s.target)])&&r.mod.push(s)})),r}});const mie={binary:function $Be(e,t,n,i,r){var s,l,o=e.children,a=o.length,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;!function c(d,f,h,p,g,m,_){if(d>=f-1){var y=o[d];return y.x0=p,y.y0=g,y.x1=m,void(y.y1=_)}for(var v=u[d],b=h/2+v,w=d+1,D=f-1;w<D;){var E=w+D>>>1;u[E]<b?w=E+1:D=E}b-u[w-1]<u[w]-b&&d+1<w&&--w;var C=u[w]-v,N=h-C;if(m-p>_-g){var k=h?(p*N+m*C)/h:m;c(d,w,C,p,g,k,_),c(w,f,N,k,g,m,_)}else{var R=h?(g*N+_*C)/h:_;c(d,w,C,p,g,m,R),c(w,f,N,p,R,m,_)}}(0,a,e.value,t,n,i,r)},dice:V1,slice:MS,slicedice:function BBe(e,t,n,i,r){(1&e.depth?MS:V1)(e,t,n,i,r)},squarify:pie,resquarify:VBe},WL=["x0","y0","x1","y1","depth","children"];function qL(e){ku.call(this,e)}qL.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:WL.length,default:WL}]},pe(qL,ku,{layout(){const e=function jBe(){var e=pie,t=!1,n=1,i=1,r=[0],o=lh,s=lh,a=lh,l=lh,u=lh;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=i,f.eachBefore(d),r=[0],t&&f.eachBefore(lie),f}function d(f){var h=r[f.depth],p=f.x0+h,g=f.y0+h,m=f.x1-h,_=f.y1-h;m<p&&(p=m=(p+m)/2),_<g&&(g=_=(g+_)/2),f.x0=p,f.y0=g,f.x1=m,f.y1=_,f.children&&(h=r[f.depth+1]=o(f)/2,p+=u(f)-h,g+=s(f)-h,(m-=a(f)-h)<p&&(p=m=(p+m)/2),(_-=l(f)-h)<g&&(g=_=(g+_)/2),e(f,p,g,m,_))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],i=+f[1],c):[n,i]},c.tile=function(f){return arguments.length?(e=Qne(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(o="function"==typeof f?f:Em(+f),c):o},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(s="function"==typeof f?f:Em(+f),c):s},c.paddingRight=function(f){return arguments.length?(a="function"==typeof f?f:Em(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l="function"==typeof f?f:Em(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u="function"==typeof f?f:Em(+f),c):u},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ce(mie,t)?e.tile(mie[t]):Q("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:WL});const YL=4278190080;function KL(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function kS(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;"group"===i?t.forEach(r=>{r.items.forEach(o=>kS(e,o.items,n))}):Lo[i].draw(e,{items:n?t.map(KBe):t})}function KBe(e){const t=_D(e,{});return t.stroke&&0!==t.strokeOpacity||t.fill&&0!==t.fillOpacity?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const dd=new Uint32Array(33),ma=new Uint32Array(33);ma[0]=0,dd[0]=~ma[0];for(let e=1;e<=32;++e)ma[e]=ma[e-1]<<1|1,dd[e]=~ma[e];function IS(e,t,n,i,r,o){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>o}function fd(e,t,n,i,r,o,s,a){const l=r*o/(2*i),u=e(t-l),c=e(t+l),d=e(n-(o/=2)),f=e(n+o);return s.outOfBounds(u,d,c,f)||s.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}const e6e=[-1,-1,1,1],t6e=[-1,1,-1,1],i6e=["right","center","left"],r6e=["bottom","middle","top"];function _ie(e,t,n,i,r,o,s,a,l,u,c,d){return!(r.outOfBounds(e,n,t,i)||(d&&o||r).getRange(e,n,t,i))}const s6e={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},a6e={naive:function JBe(e,t,n,i){const r=e.width,o=e.height;return function(s){const a=s.datum.datum.items[i].items,l=a.length,u=s.datum.fontSize,c=Po.width(s.datum,s.datum.text);let f,h,p,g,m,_,y,d=0;for(let v=0;v<l;++v)f=a[v].x,p=a[v].y,h=void 0===a[v].x2?f:a[v].x2,g=void 0===a[v].y2?p:a[v].y2,m=(f+h)/2,_=(p+g)/2,y=Math.abs(h-f+g-p),y>=d&&(d=y,s.x=m,s.y=_);return m=c/2,_=u/2,f=s.x-m,h=s.x+m,p=s.y-_,g=s.y+_,s.align="center",f<0&&h<=r?s.align="left":0<=f&&r<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}},"reduced-search":function ZBe(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,d,f,h){const p=e.invert(u),g=e.invert(c);let y,m=d,_=o;if(!IS(p,g,f,h,r,o)&&!fd(e,p,g,h,f,m,s,a)&&!fd(e,p,g,h,f,h,s,null)){for(;_-m>=1;)y=(m+_)/2,fd(e,p,g,h,f,y,s,a)?_=y:m=y;if(m>d)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[i].items,d=c.length,f=u.datum.fontSize,h=Po.width(u.datum,u.datum.text);let y,v,b,w,D,E,C,N,k,R,F,P,x,S,T,I,A,p=n?f:0,g=!1,m=!1,_=0;for(let M=0;M<d;++M){for(y=c[M].x,b=c[M].y,v=void 0===c[M].x2?y:c[M].x2,w=void 0===c[M].y2?b:c[M].y2,y>v&&(A=y,y=v,v=A),b>w&&(A=b,b=w,w=A),k=e(y),F=e(v),R=~~((k+F)/2),P=e(b),S=e(w),x=~~((P+S)/2),C=R;C>=k;--C)for(N=x;N>=P;--N)I=l(C,N,p,h,f),I&&([u.x,u.y,p,g]=I);for(C=R;C<=F;++C)for(N=x;N<=S;++N)I=l(C,N,p,h,f),I&&([u.x,u.y,p,g]=I);!g&&!n&&(T=Math.abs(v-y+w-b),D=(y+v)/2,E=(b+w)/2,T>=_&&!IS(D,E,h,f,r,o)&&!fd(e,D,E,f,h,f,s,null)&&(_=T,u.x=D,u.y=E,m=!0))}return!(!g&&!m||(D=h/2,E=f/2,s.setRange(e(u.x-D),e(u.y-E),e(u.x+D),e(u.y+E)),u.align="center",u.baseline="middle",0))}},floodfill:function n6e(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[i].items,d=c.length,f=u.datum.fontSize,h=Po.width(u.datum,u.datum.text),p=[];let v,b,w,D,E,C,N,k,R,F,P,x,g=n?f:0,m=!1,_=!1,y=0;for(let S=0;S<d;++S){for(v=c[S].x,w=c[S].y,b=void 0===c[S].x2?v:c[S].x2,D=void 0===c[S].y2?w:c[S].y2,p.push([e((v+b)/2),e((w+D)/2)]);p.length;)if([N,k]=p.pop(),!(s.get(N,k)||a.get(N,k)||l.get(N,k))){l.set(N,k);for(let T=0;T<4;++T)E=N+e6e[T],C=k+t6e[T],l.outOfBounds(E,C,E,C)||p.push([E,C]);if(E=e.invert(N),C=e.invert(k),R=g,F=o,!IS(E,C,h,f,r,o)&&!fd(e,E,C,f,h,R,s,a)&&!fd(e,E,C,f,h,f,s,null)){for(;F-R>=1;)P=(R+F)/2,fd(e,E,C,f,h,P,s,a)?F=P:R=P;R>g&&(u.x=E,u.y=C,g=R,m=!0)}}!m&&!n&&(x=Math.abs(b-v+D-w),E=(v+b)/2,C=(w+D)/2,x>=y&&!IS(E,C,h,f,r,o)&&!fd(e,E,C,f,h,f,s,null)&&(y=x,u.x=E,u.y=C,_=!0))}return!(!m&&!_||(E=h/2,C=f/2,s.setRange(e(u.x-E),e(u.y-C),e(u.x+E),e(u.y+C)),u.align="center",u.baseline="middle",0))}}};function l6e(e,t,n,i,r,o,s,a,l,u,c){if(!e.length)return e;const d=Math.max(i.length,r.length),f=function u6e(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}(i,d),h=function c6e(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=s6e[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}(r,d),p=function d6e(e){return e&&e.mark&&e.mark.marktype}(e[0].datum),g="group"===p&&e[0].datum.items[l].marktype,m="area"===g,_=function f6e(e,t,n,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?"line"===e||"area"===e?o=>r(o.datum):"line"===t?o=>{const s=o.datum.items[i].items;return r(s.length?s["start"===n?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}(p,g,a,l),y=null===u||u===1/0,v=m&&"naive"===c;let b=-1,w=-1;const D=e.map(k=>{const R=y?Po.width(k,k.text):void 0;return b=Math.max(b,R),w=Math.max(w,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(k),textWidth:R}});u=null===u||u===1/0?Math.max(b,w)+Math.max(...i):u;const E=function QBe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),o=~~((t+2*n+i)/i),s=a=>~~((a+n)/i);return s.invert=a=>a*i-n,s.bitmap=()=>function XBe(e,t){const n=new Uint32Array(~~((e*t+32)/32));function i(o,s){n[o]|=s}function r(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>5]&1<<(31&a)},set:(o,s)=>{const a=s*e+o;i(a>>>5,1<<(31&a))},clear:(o,s)=>{const a=s*e+o;r(a>>>5,~(1<<(31&a)))},getRange:(o,s,a,l)=>{let c,d,f,h,u=l;for(;u>=s;--u)if(c=u*e+o,d=u*e+a,f=c>>>5,h=d>>>5,f===h){if(n[f]&dd[31&c]&ma[1+(31&d)])return!0}else{if(n[f]&dd[31&c]||n[h]&ma[1+(31&d)])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,d,f,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,d=u>>>5,f=c>>>5,d===f)i(d,dd[31&u]&ma[1+(31&c)]);else for(i(d,dd[31&u]),i(f,ma[1+(31&c)]),h=d+1;h<f;++h)i(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,d,f,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,d=u>>>5,f=c>>>5,d===f)r(d,ma[31&u]|dd[1+(31&c)]);else for(r(d,ma[31&u]),r(f,dd[1+(31&c)]),h=d+1;h<f;++h)r(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}(r,o),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}(t[0],t[1],u);let C;if(!v){n&&D.sort((F,P)=>n(F.datum,P.datum));let k=!1;for(let F=0;F<h.length&&!k;++F)k=5===h[F]||f[F]<0;const R=(p&&s||m)&&e.map(F=>F.datum);C=o.length||R?function YBe(e,t,n,i,r){const o=e.width,s=e.height,a=i||r,l=zc(o,s).getContext("2d"),u=zc(o,s).getContext("2d"),c=a&&zc(o,s).getContext("2d");n.forEach(C=>kS(l,C,!1)),kS(u,t,!1),a&&kS(c,t,!0);const d=KL(l,o,s),f=KL(u,o,s),h=a&&KL(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,_,y,v,b,w,D,E;for(_=0;_<s;++_)for(m=0;m<o;++m)b=_*o+m,w=d[b]&YL,E=f[b]&YL,D=a&&h[b]&YL,(w||D||E)&&(y=e(m),v=e(_),!r&&(w||E)&&p.set(y,v),a&&(w||D)&&g.set(y,v));return[p,g]}(E,R||[],o,k,m):function qBe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}(E,s&&D)}const N=m?a6e[c](E,C,s,l):function o6e(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1],l=i.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>r||c[3]>o)return!1;let h,p,g,m,_,y,v,b,w,D,E,C,N,k,R,f=u.textWidth??0;for(let F=0;F<l;++F){if(h=(3&n[F])-1,p=(n[F]>>>2&3)-1,g=0===h&&0===p||i[F]<0,m=h&&p?Math.SQRT1_2:1,_=i[F]<0?-1:1,y=c[1+h]+i[F]*h*m,E=c[4+p]+_*d*p/2+i[F]*p*m,b=E-d/2,w=E+d/2,C=e(y),k=e(b),R=e(w),!f){if(!_ie(C,C,k,R,s,a,0,0,0,0,0,g))continue;f=Po.width(u.datum,u.datum.text)}if(D=y+_*f*h/2,y=D-f/2,v=D+f/2,C=e(y),N=e(v),_ie(C,N,k,R,s,a,0,0,0,0,0,g))return u.x=h?h*_<0?v:y:D,u.y=p?p*_<0?w:b:E,u.align=i6e[h*_+1],u.baseline=r6e[p*_+1],s.setRange(C,k,N,R),!0}return!1}}(E,C,h,f);return D.forEach(k=>k.opacity=+N(k)),D}const n3=["x","y","opacity","align","baseline"],yie=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function r3(e){Y.call(this,null,e)}function vie(e,t){var r,o,s,a,l,u,n=[],i=function(c){return c(a)};if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(u=r[l=t.map(i)])||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function o3(e){Y.call(this,null,e)}r3.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:yie},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:n3.length,default:n3}]},pe(r3,Y,{transform(e,t){const i=e.modified();if(!(i||t.changed(t.ADD_REM)||function n(o){const s=e[o];return nt(s)&&t.modified(s.fields)}("sort")))return;(!e.size||2!==e.size.length)&&Q("Size parameter should be specified as a [width, height] array.");const r=e.as||n3;return l6e(t.materialize(t.SOURCE).source||[],e.size,e.sort,ve(e.offset??1),ve(e.anchor||yie),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[r[0]]=o.x,s[r[1]]=o.y,s[r[2]]=o.opacity,s[r[3]]=o.align,s[r[4]]=o.baseline}),t.reflow(i).modifies(r)}}),o3.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},pe(o3,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=vie(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(On),s=o.length,a=e.as||[On(e.x),On(e.y)],l=[];r.forEach(u=>{yX(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<s;++f)d[o[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push(It(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const s3={constant:rR,linear:oR,log:fX,exp:hX,pow:pX,quad:sR,poly:gX};function a3(e){Y.call(this,null,e)}a3.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(s3)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},pe(a3,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=vie(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(On),s=e.method||"linear",a=e.order??3,l=((e,t)=>"poly"===e?t:"quad"===e?2:1)(s,a),u=e.as||[On(e.x),On(e.y)],c=s3[s],d=[];let f=e.extent;Ce(s3,s)||Q("Invalid regression method: "+s),null!=f&&"log"===s&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach(h=>{if(h.length<=l)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const g=c(h,e.x,e.y,a);if(e.params)return void d.push(It({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));const m=f||tl(h,e.x),_=y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1],d.push(It(v))};"linear"===s||"constant"===s?m.forEach(y=>_([y,g.predict(y)])):AD(g.predict,m,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const pi=134217729;function U1(e,t,n,i,r){let o,s,a,l,u=t[0],c=i[0],d=0,f=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=i[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++d]):(s=c+o,a=o-(s-c),c=i[++f]),o=s,0!==a&&(r[h++]=a);d<e&&f<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++d]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=i[++f]),o=s,0!==a&&(r[h++]=a);for(;d<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++d],o=s,0!==a&&(r[h++]=a);for(;f<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=i[++f],o=s,0!==a&&(r[h++]=a);return(0!==o||0===h)&&(r[h++]=o),h}function se(e){return new Float64Array(e)}const Dm=se(4),bie=se(8),wie=se(12),Eie=se(16),$r=se(4);function OS(e,t,n,i,r,o){const s=(t-o)*(n-r),a=(e-r)*(i-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=33306690738754716e-32*u?l:-function v6e(e,t,n,i,r,o,s){let a,l,u,c,d,f,h,p,g,m,_,y,v,b,w,D,E,C;const N=e-r,k=n-r,R=t-o,F=i-o;b=N*F,f=pi*N,h=f-(f-N),p=N-h,f=pi*F,g=f-(f-F),m=F-g,w=p*m-(b-h*g-p*g-h*m),D=R*k,f=pi*R,h=f-(f-R),p=R-h,f=pi*k,g=f-(f-k),m=k-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,Dm[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,Dm[1]=v-(_+d)+(d-D),C=y+_,d=C-y,Dm[2]=y-(C-d)+(_-d),Dm[3]=C;let P=function g6e(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,Dm),x=22204460492503146e-32*s;if(P>=x||-P>=x||(d=e-N,a=e-(N+d)+(d-r),d=n-k,u=n-(k+d)+(d-r),d=t-R,l=t-(R+d)+(d-o),d=i-F,c=i-(F+d)+(d-o),0===a&&0===l&&0===u&&0===c)||(x=11093356479670487e-47*s+33306690738754706e-32*Math.abs(P),P+=N*c+F*a-(R*u+k*l),P>=x||-P>=x))return P;b=a*F,f=pi*a,h=f-(f-a),p=a-h,f=pi*F,g=f-(f-F),m=F-g,w=p*m-(b-h*g-p*g-h*m),D=l*k,f=pi*l,h=f-(f-l),p=l-h,f=pi*k,g=f-(f-k),m=k-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,$r[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,$r[1]=v-(_+d)+(d-D),C=y+_,d=C-y,$r[2]=y-(C-d)+(_-d),$r[3]=C;const S=U1(4,Dm,4,$r,bie);b=N*c,f=pi*N,h=f-(f-N),p=N-h,f=pi*c,g=f-(f-c),m=c-g,w=p*m-(b-h*g-p*g-h*m),D=R*u,f=pi*R,h=f-(f-R),p=R-h,f=pi*u,g=f-(f-u),m=u-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,$r[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,$r[1]=v-(_+d)+(d-D),C=y+_,d=C-y,$r[2]=y-(C-d)+(_-d),$r[3]=C;const T=U1(S,bie,4,$r,wie);b=a*c,f=pi*a,h=f-(f-a),p=a-h,f=pi*c,g=f-(f-c),m=c-g,w=p*m-(b-h*g-p*g-h*m),D=l*u,f=pi*l,h=f-(f-l),p=l-h,f=pi*u,g=f-(f-u),m=u-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,$r[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,$r[1]=v-(_+d)+(d-D),C=y+_,d=C-y,$r[2]=y-(C-d)+(_-d),$r[3]=C;const I=U1(T,wie,4,$r,Eie);return Eie[I-1]}(e,t,n,i,r,o,u)}se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(8),se(8),se(8),se(4),se(8),se(8),se(8),se(12),se(192),se(192),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(8),se(8),se(8),se(8),se(8),se(8),se(8),se(8),se(8),se(4),se(4),se(4),se(8),se(16),se(16),se(16),se(32),se(32),se(48),se(64),se(1152),se(1152),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(4),se(24),se(24),se(24),se(24),se(24),se(24),se(24),se(24),se(24),se(24),se(1152),se(1152),se(1152),se(1152),se(1152),se(2304),se(2304),se(3456),se(5760),se(8),se(8),se(8),se(16),se(24),se(48),se(48),se(96),se(192),se(384),se(384),se(384),se(768),se(96),se(96),se(96),se(1152);const Hie=Math.pow(2,-52),HS=new Uint32Array(512);class zS{static from(t,n=B6e,i=V6e){const r=t.length,o=new Float64Array(2*r);for(let s=0;s<r;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=i(a)}return new zS(o)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let N=0;N<s;N++){const k=t[2*N],R=t[2*N+1];k<a&&(a=k),R<l&&(l=R),k>u&&(u=k),R>c&&(c=R),this._ids[N]=N}const d=(a+u)/2,f=(l+c)/2;let h,p,g;for(let N=0,k=1/0;N<s;N++){const R=O3(d,f,t[2*N],t[2*N+1]);R<k&&(h=N,k=R)}const m=t[2*h],_=t[2*h+1];for(let N=0,k=1/0;N<s;N++){if(N===h)continue;const R=O3(m,_,t[2*N],t[2*N+1]);R<k&&R>0&&(p=N,k=R)}let y=t[2*p],v=t[2*p+1],b=1/0;for(let N=0;N<s;N++){if(N===h||N===p)continue;const k=L6e(m,_,y,v,t[2*N],t[2*N+1]);k<b&&(g=N,b=k)}let w=t[2*g],D=t[2*g+1];if(b===1/0){for(let R=0;R<s;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];km(this._ids,this._dists,0,s-1);const N=new Uint32Array(s);let k=0;for(let R=0,F=-1/0;R<s;R++){const P=this._ids[R],x=this._dists[P];x>F&&(N[k++]=P,F=x)}return this.hull=N.subarray(0,k),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(OS(m,_,y,v,w,D)<0){const N=p,k=y,R=v;p=g,y=w,v=D,g=N,w=k,D=R}const E=function $6e(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,u=o-t,c=s*s+a*a,d=l*l+u*u,f=.5/(s*u-a*l);return{x:e+(u*c-a*d)*f,y:t+(s*d-l*c)*f}}(m,_,y,v,w,D);this._cx=E.x,this._cy=E.y;for(let N=0;N<s;N++)this._dists[N]=O3(t[2*N],t[2*N+1],E.x,E.y);km(this._ids,this._dists,0,s-1),this._hullStart=h;let C=3;i[h]=n[g]=p,i[p]=n[h]=g,i[g]=n[p]=h,r[h]=0,r[p]=1,r[g]=2,o.fill(-1),o[this._hashKey(m,_)]=h,o[this._hashKey(y,v)]=p,o[this._hashKey(w,D)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let k,R,N=0;N<this._ids.length;N++){const F=this._ids[N],P=t[2*F],x=t[2*F+1];if(N>0&&Math.abs(P-k)<=Hie&&Math.abs(x-R)<=Hie||(k=P,R=x,F===h||F===p||F===g))continue;let S=0;for(let O=0,L=this._hashKey(P,x);O<this._hashSize&&(S=o[(L+O)%this._hashSize],-1===S||S===i[S]);O++);S=n[S];let I,T=S;for(;I=i[T],OS(P,x,t[2*T],t[2*T+1],t[2*I],t[2*I+1])>=0;)if(T=I,T===S){T=-1;break}if(-1===T)continue;let A=this._addTriangle(T,F,i[T],-1,-1,r[T]);r[F]=this._legalize(A+2),r[T]=A,C++;let M=i[T];for(;I=i[M],OS(P,x,t[2*M],t[2*M+1],t[2*I],t[2*I+1])<0;)A=this._addTriangle(M,F,I,r[F],-1,r[M]),r[F]=this._legalize(A+2),i[M]=M,C--,M=I;if(T===S)for(;I=n[T],OS(P,x,t[2*I],t[2*I+1],t[2*T],t[2*T+1])<0;)A=this._addTriangle(I,F,T,-1,r[T],r[I]),this._legalize(A+2),r[I]=A,i[T]=T,C--,T=I;this._hullStart=n[F]=T,i[T]=n[M]=F,i[F]=M,o[this._hashKey(P,x)]=F,o[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(C);for(let N=0,k=this._hullStart;N<C;N++)this.hull[N]=k,k=i[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function F6e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,s=0;for(;;){const a=i[t],l=t-t%3;if(s=l+(t+2)%3,-1===a){if(0===o)break;t=HS[--o];continue}const u=a-a%3,d=u+(a+2)%3,f=n[s],h=n[t],p=n[l+(t+1)%3],g=n[d];if(P6e(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){n[t]=g,n[a]=f;const _=i[d];if(-1===_){let v=this._hullStart;do{if(this._hullTri[v]===d){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,_),this._link(a,i[s]),this._link(s,d);const y=u+(a+1)%3;o<HS.length&&(HS[o++]=y)}else{if(0===o)break;t=HS[--o]}}return s}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function O3(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function P6e(e,t,n,i,r,o,s,a){const l=e-s,u=t-a,c=n-s,d=i-a,f=r-s,h=o-a,g=c*c+d*d,m=f*f+h*h;return l*(d*m-g*h)-u*(c*m-g*f)+(l*l+u*u)*(c*h-d*f)<0}function L6e(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,u=o-t,c=s*s+a*a,d=l*l+u*u,f=.5/(s*u-a*l),h=(u*c-a*d)*f,p=(s*d-l*c)*f;return h*h+p*p}function km(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],s=t[o];let a=r-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let o=n+1,s=i;W1(e,n+i>>1,o),t[e[n]]>t[e[i]]&&W1(e,n,i),t[e[o]]>t[e[i]]&&W1(e,o,i),t[e[n]]>t[e[o]]&&W1(e,n,o);const a=e[o],l=t[a];for(;;){do{o++}while(t[e[o]]<l);do{s--}while(t[e[s]]>l);if(s<o)break;W1(e,o,s)}e[n+1]=e[s],e[s]=a,i-o+1>=s-n?(km(e,t,o,i),km(e,t,n,s-1)):(km(e,t,n,s-1),km(e,t,o,i))}}function W1(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function B6e(e){return e[0]}function V6e(e){return e[1]}class _h{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){const r=(t=+t)+(i=+i),o=n=+n;if(i<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class R3{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class j6e{constructor(t,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let y,v,g=0,m=0,_=i.length;g<_;g+=3,m+=2){const b=2*i[g],w=2*i[g+1],D=2*i[g+2],E=t[b],C=t[b+1],R=t[D],F=t[D+1],P=t[w]-E,x=t[w+1]-C,S=R-E,T=F-C,I=2*(P*T-x*S);if(Math.abs(I)<1e-9){if(void 0===o){o=s=0;for(const M of n)o+=t[2*M],s+=t[2*M+1];o/=n.length,s/=n.length}const A=1e9*Math.sign((o-E)*T-(s-C)*S);y=(E+R)/2-A*T,v=(C+F)/2+A*S}else{const A=1/I,M=P*P+x*x,O=S*S+T*T;y=E+(T*M-x*O)*A,v=C+(P*O-S*M)*A}a[m]=y,a[m+1]=v}let u,d,h,l=n[n.length-1],c=4*l,f=t[2*l],p=t[2*l+1];r.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,d=f,h=p,c=4*l,f=t[2*l],p=t[2*l+1],r[u+2]=r[c]=h-p,r[u+3]=r[c+1]=f-d}render(t){const n=null==t?t=new _h:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,d=i.length;c<d;++c){const f=i[c];if(f<c)continue;const h=2*Math.floor(c/3),p=2*Math.floor(f/3);this._renderSegment(s[h],s[h+1],s[p],s[p+1],t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const d=2*Math.floor(r[u]/3),f=s[d],h=s[d+1],p=4*l,g=this._project(f,h,a[p+2],a[p+3]);g&&this._renderSegment(f,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new _h:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=null==n?n=new _h:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new R3;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,o){let s;const a=this._regioncode(t,n),l=this._regioncode(i,r);0===a&&0===l?(o.moveTo(t,n),o.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,i){return(n=+n)==n&&(i=+i)==i&&this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r)e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[o]===r[a]&&n[o+1]===r[a+1]&&n[(o+2)%s]===r[(a+l-2)%l]&&n[(o+3)%s]===r[(a+l-1)%l]){yield i;break e}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,s=i[t];if(-1===s)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[2*u],n[2*u+1]),l=l%3==2?l-2:l+1,o[l]!==t)break;l=r[l]}while(l!==s&&-1!==l);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:i}=this,r=4*t;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let o,s,u,d,r=null,a=n[i-2],l=n[i-1],c=this._regioncode(a,l),f=0;for(let h=0;h<i;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),0===u&&0===c)d=f,f=0,r?r.push(a,l):r=[a,l];else{let p,g,m,_,y;if(0===u){if(null===(p=this._clipSegment(o,s,a,l,u,c)))continue;[g,m,_,y]=p}else{if(null===(p=this._clipSegment(a,l,o,s,c,u)))continue;[_,y,g,m]=p,d=f,f=this._edgecode(g,m),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(g,m):r=[g,m]}d=f,f=this._edgecode(_,y),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(_,y):r=[_,y]}if(r)d=f,f=this._edgecode(r[0],r[1]),d&&f&&this._edge(t,d,f,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,o,s){const a=o<s;for(a&&([t,n,i,r,o,s]=[i,r,t,n,s,o]);;){if(0===o&&0===s)return a?[i,r,t,n]:[t,n,i,r];if(o&s)return null;let l,u,c=o||s;8&c?(l=t+(i-t)*(this.ymax-n)/(r-n),u=this.ymax):4&c?(l=t+(i-t)*(this.ymin-n)/(r-n),u=this.ymin):2&c?(u=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(u=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),o?o=this._regioncode(t=l,n=u):s=this._regioncode(i=l,r=u)}}_clipInfinite(t,n,i,r,o,s){let l,a=Array.from(n);if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let d,u=0,c=a.length,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,o){for(;n!==i;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin}(r[o]!==s||r[o+1]!==a)&&this.contains(t,s,a)&&(r.splice(o,0,s,a),o+=2)}return o}_project(t,n,i,r){let s,a,l,o=1/0;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<o&&(l=this.ymin,a=t+(o=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<o&&(l=this.ymax,a=t+(o=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<o&&(a=this.xmax,l=n+(o=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<o&&(a=this.xmin,l=n+(o=s)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}}const U6e=2*Math.PI,Im=Math.pow;function H6e(e){return e[0]}function z6e(e){return e[1]}function W6e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class F3{static from(t,n=H6e,i=z6e,r){return new F3("length"in t?function q6e(e,t,n,i){const r=e.length,o=new Float64Array(2*r);for(let s=0;s<r;++s){const a=e[s];o[2*s]=t.call(i,a,s,e),o[2*s+1]=n.call(i,a,s,e)}return o}(t,n,i,r):Float64Array.from(function*Y6e(e,t,n,i){let r=0;for(const o of e)yield t.call(i,o,r,e),yield n.call(i,o,r,e),++r}(t,n,i,r)))}constructor(t){this._delaunator=new zS(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function G6e(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],o=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=W6e(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new zS(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=o[l%3==2?l-2:l+1];(-1===i[l]||-1===s[c])&&(s[c]=l)}for(let l=0,u=r.length;l<u;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,2===r.length&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new j6e(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:s,collinear:a}=this;if(a){const d=a.indexOf(t);return d>0&&(yield a[d-1]),void(d<a.length-1&&(yield a[d+1]))}const l=n[t];if(-1===l)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3==2?u-2:u+1,s[u]!==t)return;if(u=o[u],-1===u){const d=i[(r[t]+1)%i.length];return void(d!==c&&(yield d))}}while(u!==l)}find(t,n,i=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=i;let o;for(;(o=this._step(i,t,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(t,n,i){const{inedges:r,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,d=Im(n-u[2*t],2)+Im(i-u[2*t+1],2);const f=r[t];let h=f;do{let p=l[h];const g=Im(n-u[2*p],2)+Im(i-u[2*p+1],2);if(g<d&&(d=g,c=p),h=h%3==2?h-2:h+1,l[h]!==t)break;if(h=a[h],-1===h){if(h=o[(s[t]+1)%o.length],h!==p&&Im(n-u[2*h],2)+Im(i-u[2*h+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=null==t?t=new _h:void 0,{points:i,halfedges:r,triangles:o}=this;for(let s=0,a=r.length;s<a;++s){const l=r[s];if(l<s)continue;const u=2*o[s],c=2*o[l];t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0===n&&(!t||"function"!=typeof t.moveTo)&&(n=t,t=null),n=null==n?2:+n;const i=null==t?t=new _h:void 0,{points:r}=this;for(let o=0,s=r.length;o<s;o+=2){const a=r[o],l=r[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,U6e)}return i&&i.value()}renderHull(t){const n=null==t?t=new _h:void 0,{hull:i,points:r}=this,o=2*i[0],s=i.length;t.moveTo(r[o],r[o+1]);for(let a=1;a<s;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new R3;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=null==n?n=new _h:void 0,{points:r,triangles:o}=this,s=2*o[t*=3],a=2*o[t+1],l=2*o[t+2];return n.moveTo(r[s],r[s+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new R3;return this.renderTriangle(t,n),n.value()}}function P3(e){Y.call(this,null,e)}P3.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const K6e=[-1e5,-1e5,1e5,1e5];function X6e(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Q6e(e){return 2===e.length&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}pe(P3,Y,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:K6e;const o=this.value=F3.from(i,e.x,e.y).voronoi(r);for(let s=0,a=i.length;s<a;++s){const l=o.cellPolygon(s);i[s][n]=l&&!Q6e(l)?X6e(l):null}return t.reflow(e.modified()).modifies(n)}});var L3=Math.PI/180;function Z6e(e,t,n,i){if(!t.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,2048/o,2048/o);var c,d,f,h,p,s=0,a=0,l=0,u=n.length;for(--i;++i<u;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=r.measureText(t.text+"m").width*o,f=t.size<<1,t.rotate){var g=Math.sin(t.rotate*L3),m=Math.cos(t.rotate*L3),_=c*m,y=c*g,v=f*m,b=f*g;c=Math.max(Math.abs(_+b),Math.abs(_-b))+31>>5<<5,f=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else c=c+31>>5<<5;if(f>l&&(l=f),s+c>=2048&&(s=0,a+=l,l=0),a+f>=2048)break;r.translate((s+(c>>1))/o,(a+(f>>1))/o),t.rotate&&r.rotate(t.rotate*L3),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=f,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=r.getImageData(0,0,2048/o,2048/o).data,D=[];--i>=0;)if((t=n[i]).hasText){for(d=(c=t.width)>>5,f=t.y1-t.y0,h=0;h<f*d;h++)D[h]=0;if(null==(s=t.xoff))return;a=t.yoff;var E=0,C=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var k=w[2048*(a+p)+(s+h)<<2]?1<<31-h%32:0;D[d*p+(h>>5)]|=k,E|=k}E?C=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+C,t.sprite=D.slice(0,(t.y1-t.y0)*d)}}}function e9e(e,t,n){for(var c,i=e.sprite,r=e.width>>5,o=e.x-(r<<4),s=127&o,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*(n>>=5)+(o>>5),d=0;d<l;d++){c=0;for(var f=0;f<=r;f++)if((c<<a|(f<r?(c=i[d*r+f])>>>s:0))&t[u+f])return!0;u+=n}return!1}function t9e(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function n9e(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Gie(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function yh(e){return"function"==typeof e?e:function(){return e}}var o9e={archimedean:Gie,rectangular:function i9e(e){var n=4*e[0]/e[1],i=0,r=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:i+=n;break;case 1:r+=4;break;case 2:i-=n;break;default:r-=4}return[i,r]}}};const Wie=["x","y","font","fontSize","fontStyle","fontWeight","angle"],s9e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function $3(e){Y.call(this,function J6e(){var t,n,i,r,o,s,a,e=[256,256],l=Gie,u=[],c=Math.random,d={};function h(p,g,m){for(var E,C,N,_=g.x,y=g.y,v=Math.hypot(e[0],e[1]),b=l(e),w=c()<.5?1:-1,D=-w;(E=b(D+=w))&&(C=~~E[0],N=~~E[1],!(Math.min(Math.abs(C),Math.abs(N))>=v));)if(g.x=_+C,g.y=y+N,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!e9e(g,p,e[0]))&&(!m||n9e(g,m))){for(var A,k=g.sprite,R=g.width>>5,F=e[0]>>5,P=g.x-(R<<4),x=127&P,S=32-x,T=g.y1-g.y0,I=(g.y+g.y0)*F+(P>>5),M=0;M<T;M++){A=0;for(var O=0;O<=R;O++)p[I+O]|=A<<S|(O<R?(A=k[M*R+O])>>>x:0);I+=F}return g.sprite=null,!0}return!1}return d.layout=function(){for(var p=function f(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=2048/g,p.height=2048/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}(zc()),g=function r9e(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),m=null,_=u.length,y=-1,v=[],b=u.map(D=>({text:t(D),font:n(D),style:r(D),weight:o(D),rotate:s(D),size:~~(i(D)+1e-14),padding:a(D),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:D})).sort((D,E)=>E.size-D.size);++y<_;){var w=b[y];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,Z6e(p,w,b,y),w.hasText&&h(g,w,m)&&(v.push(w),m?t9e(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return v},d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=yh(p),d):n},d.fontStyle=function(p){return arguments.length?(r=yh(p),d):r},d.fontWeight=function(p){return arguments.length?(o=yh(p),d):o},d.rotate=function(p){return arguments.length?(s=yh(p),d):s},d.text=function(p){return arguments.length?(t=yh(p),d):t},d.spiral=function(p){return arguments.length?(l=o9e[p]||p,d):l},d.fontSize=function(p){return arguments.length?(i=yh(p),d):i},d.padding=function(p){return arguments.length?(a=yh(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}(),e)}$3.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Wie}]},pe($3,Y,{transform(e,t){e.size&&(!e.size[0]||!e.size[1])&&Q("Wordcloud size dimensions must be non-zero.");const i=e.modified();if(!(i||t.changed(t.ADD_REM)||s9e.some(function n(p){const g=e[p];return nt(g)&&t.modified(g.fields)})))return;const r=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Wie;let l,a=e.fontSize||14;if(nt(a)?l=e.fontSizeRange:a=rr(a),l){const p=a,g=xt("sqrt")().domain(tl(r,p)).range(l);a=m=>g(p(m))}r.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ys).layout(),c=o.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let g,m,p=0;p<h;++p)g=u[p],m=g.datum,m[s[0]]=g.x+d,m[s[1]]=g.y+f,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(i).modifies(s)}});const l9e=e=>new Uint8Array(e),u9e=e=>new Uint16Array(e),Y1=e=>new Uint32Array(e);function WS(e,t,n){const i=(t<257?l9e:t<65537?u9e:Y1)(e);return n&&i.set(n),i}function qie(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const s=this,a=s.bisect(s.range,r.value),l=r.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)o[l[f]]|=i;for(f=c;f<d;++f)o[l[f]]|=i;return s}}}function Yie(){let e=Y1(0),t=[],n=0;return{insert:function i(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=Y1(d);let p,g,m,h=Array(d);for(m=0;m<d;++m)h[m]=a(l[m]),f[m]=m;if(h=function f9e(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],o=e[i];return r<o?-1:r>o?1:0}),function a9e(e,t){return Array.from(t,n=>e[n])}(e,t)}(h,f),c)p=t,g=e,t=Array(c+d),e=Y1(c+d),function h9e(e,t,n,i,r,o,s,a,l){let d,u=0,c=0;for(d=0;u<i&&c<s;++d)t[u]<r[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=r[c],l[d]=o[c++]+e);for(;u<i;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<s;++c,++d)a[d]=r[c],l[d]=o[c]+e}(u,p,g,c,h,f,d,t,e);else{if(u>0)for(m=0;m<d;++m)f[m]+=u;t=h,e=f}return n=c+d,{index:f,value:h}},remove:function r(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a},bisect:function s(a,l){let u;return l?u=l.length:(l=t,u=n),[nFe(l,a[0],0,u),jD(l,a[1],0,u)]},reindex:function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]},index:()=>e,size:()=>n}}function B3(e){Y.call(this,function c9e(){let e=8,t=[],n=Y1(0),i=WS(0,e),r=WS(0,e);return{data:()=>t,seen:()=>n=function d9e(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length),add(o){for(let u,s=0,a=t.length,l=o.length;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,d,f;for(d=0;!s[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],s[d]?u[d]=-1:(u[d]=f,i[f]=i[d],r[f]=r[d],l[f]=c,c._index=f++),i[d]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){i[o]|=s},clear(o,s){i[o]&=~s},resize(o,s){(o>i.length||s>e)&&(e=Math.max(s,e),i=WS(o,e,i),r=WS(o,e))}}}(),e),this._indices=null,this._dims=null}function V3(e){Y.call(this,null,e)}B3.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},pe(B3,Y,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some(i=>t.modified(i.fields))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},o=this._dims=[],s=i.length;let l,u,a=0;for(;a<s;++a)l=n[a].fname,u=r[l]||(r[l]=Yie()),o.push(qie(u,a,i[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=r.length,p={};let g,m,_,y,v,b,w,D,E;if(u.set(l),t.rem.length&&(v=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},y=t.mod,w=0,D=y.length;w<D;++w)b[y[w]._index]=1;for(w=0;w<h;++w)E=i[w],(!s[w]||e.modified("fields",w)||t.modified(E.fields))&&(_=E.fname,(g=p[_])||(o[_]=m=Yie(),p[_]=g=m.insert(E,t.source,0)),s[w]=qie(m,w,r[w]).onAdd(g,l));for(w=0,D=a.data().length;w<D;++w)v[w]||(u[w]!==l[w]?d.push(w):b[w]&&l[w]!==c&&f.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=r.size()+i.length,d=o.length;let h,p,g,f=r.size();r.resize(c,d),r.add(i);const m=r.curr(),_=r.prev(),y=r.all();for(h=0;h<d;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],i,f)),o[h].onAdd(g,m);for(;f<c;++f)_[f]=y,m[f]!==y&&u.push(f)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),o=i.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,r[u]!==o&&n.push(u)},remove(e,t,n){const i=this._indices,r=this.value,o=r.curr(),s=r.prev(),a=r.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in i)i[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(t,n);for(const s in i)i[s].reindex(o)})},update(e,t,n){const i=this._dims,r=e.query,o=t.stamp,s=i.length;let l,u,a=0;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(1===a)a=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)!e.modified("query",u)||(a|=i[u].one,this.incrementAll(i[u],r[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,i){const r=this.value,o=r.seen(),s=r.curr(),a=r.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],g=e.one;let m,_,y;if(d<h)for(m=d,_=Math.min(h,f);m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;else if(d>h)for(m=h,_=Math.min(d,p);m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;if(f>p)for(m=Math.max(d,p),_=f;m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;else if(f<p)for(m=Math.max(h,f),_=p;m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;e.range=t.slice()},incrementOne(e,t,n,i){const o=this.value.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,g,m;if(u<d)for(p=u,g=Math.min(d,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(u>d)for(p=d,g=Math.min(u,f);p<g;++p)m=s[p],o[m]^=h,i.push(m);if(c>f)for(p=Math.max(u,f),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<f)for(p=Math.max(d,c),g=f;p<g;++p)m=s[p],o[m]^=h,i.push(m);e.range=t.slice()}}),V3.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},pe(V3,Y,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(0==(r&n))return t.StopPropagation;const o=t.fork(t.ALL),s=i.data(),a=i.curr(),l=i.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),r&r-1?(o.filter(o.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const d=a[c]&n;return!d||d^d^l[c]&n?null:s[c]})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===r?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const vh="Literal",Kie="CallExpression";function va(e){this.type=e}var wl,Ne,X,dr,Vt;va.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=function C9e(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case Kie:return[e.callee].concat(e.arguments);case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];default:return[]}}(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1},(wl={})[1]="Boolean",wl[2]="<end>",wl[3]="Identifier",wl[4]="Keyword",wl[5]="Null",wl[6]="Numeric",wl[7]="Punctuator",wl[8]="String",wl[9]="RegularExpression";var Xie="Identifier",Ci="Unexpected token %0",j3="Invalid regular expression",U3="Invalid regular expression: missing /",Qie="Octal literals are not allowed in strict mode.",Vi="ILLEGAL",Q1="Disabled.",U9e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),H9e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function KS(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ou(e){return e>=48&&e<=57}function H3(e){return"0123456789abcdefABCDEF".includes(e)}function J1(e){return"01234567".includes(e)}function z9e(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Z1(e){return 10===e||13===e||8232===e||8233===e}function ev(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&U9e.test(String.fromCharCode(e))}function XS(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&H9e.test(String.fromCharCode(e))}const G9e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Jie(){for(;X<dr;){const e=Ne.charCodeAt(X);if(!z9e(e)&&!Z1(e))break;++X}}function z3(e){var t,n,i,r=0;for(n="u"===e?4:2,t=0;t<n;++t)X<dr&&H3(Ne[X])?(i=Ne[X++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):Tt({},Ci,Vi);return String.fromCharCode(r)}function W9e(){var e,t;for(t=0,"}"===(e=Ne[X])&&Tt({},Ci,Vi);X<dr&&H3(e=Ne[X++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Tt({},Ci,Vi),t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}function Zie(){var e,t;for(e=Ne.charCodeAt(X++),t=String.fromCharCode(e),92===e&&(117!==Ne.charCodeAt(X)&&Tt({},Ci,Vi),++X,(!(e=z3("u"))||"\\"===e||!ev(e.charCodeAt(0)))&&Tt({},Ci,Vi),t=e);X<dr&&XS(e=Ne.charCodeAt(X));)++X,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Ne.charCodeAt(X)&&Tt({},Ci,Vi),++X,(!(e=z3("u"))||"\\"===e||!XS(e.charCodeAt(0)))&&Tt({},Ci,Vi),t+=e);return t}function G3(){var n,r,o,s,e=X,t=Ne.charCodeAt(X),i=Ne[X];switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++X,{type:7,value:String.fromCharCode(t),start:e,end:X};default:if(61===(n=Ne.charCodeAt(X+1)))switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return X+=2,{type:7,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:X};case 33:case 61:return 61===Ne.charCodeAt(X+=2)&&++X,{type:7,value:Ne.slice(e,X),start:e,end:X}}}return">>>="===(s=Ne.substr(X,4))?{type:7,value:s,start:e,end:X+=4}:">>>"===(o=s.substr(0,3))||"<<="===o||">>="===o?{type:7,value:o,start:e,end:X+=3}:i===(r=o.substr(0,2))[1]&&"+-<>&|".includes(i)||"=>"===r?{type:7,value:r,start:e,end:X+=2}:("//"===r&&Tt({},Ci,Vi),"<>=!+-*%&|^/".includes(i)?{type:7,value:i,start:e,end:++X}:void Tt({},Ci,Vi))}function ere(){var e,t,n;if(KS(Ou((n=Ne[X]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=X,e="","."!==n){if(e=Ne[X++],n=Ne[X],"0"===e){if("x"===n||"X"===n)return++X,function K9e(e){let t="";for(;X<dr&&H3(Ne[X]);)t+=Ne[X++];return 0===t.length&&Tt({},Ci,Vi),ev(Ne.charCodeAt(X))&&Tt({},Ci,Vi),{type:6,value:parseInt("0x"+t,16),start:e,end:X}}(t);if(J1(n))return function X9e(e){let t="0"+Ne[X++];for(;X<dr&&J1(Ne[X]);)t+=Ne[X++];return(ev(Ne.charCodeAt(X))||Ou(Ne.charCodeAt(X)))&&Tt({},Ci,Vi),{type:6,value:parseInt(t,8),octal:!0,start:e,end:X}}(t);n&&Ou(n.charCodeAt(0))&&Tt({},Ci,Vi)}for(;Ou(Ne.charCodeAt(X));)e+=Ne[X++];n=Ne[X]}if("."===n){for(e+=Ne[X++];Ou(Ne.charCodeAt(X));)e+=Ne[X++];n=Ne[X]}if("e"===n||"E"===n)if(e+=Ne[X++],("+"===(n=Ne[X])||"-"===n)&&(e+=Ne[X++]),Ou(Ne.charCodeAt(X)))for(;Ou(Ne.charCodeAt(X));)e+=Ne[X++];else Tt({},Ci,Vi);return ev(Ne.charCodeAt(X))&&Tt({},Ci,Vi),{type:6,value:parseFloat(e),start:t,end:X}}function tre(){if(Jie(),X>=dr)return{type:2,start:X,end:X};const e=Ne.charCodeAt(X);return ev(e)?function Y9e(){var e,t;return e=X,t=92===Ne.charCodeAt(X)?Zie():function q9e(){var e,t;for(e=X++;X<dr;){if(92===(t=Ne.charCodeAt(X)))return X=e,Zie();if(!XS(t))break;++X}return Ne.slice(e,X)}(),{type:1===t.length?3:G9e.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:X}}():40===e||41===e||59===e?G3():39===e||34===e?function Q9e(){var t,n,i,r,e="",o=!1;for(KS("'"===(t=Ne[X])||'"'===t,"String literal must starts with a quote"),n=X,++X;X<dr;){if((i=Ne[X++])===t){t="";break}if("\\"===i)if((i=Ne[X++])&&Z1(i.charCodeAt(0)))"\r"===i&&"\n"===Ne[X]&&++X;else switch(i){case"u":case"x":"{"===Ne[X]?(++X,e+=W9e()):e+=z3(i);break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:J1(i)?(0!==(r="01234567".indexOf(i))&&(o=!0),X<dr&&J1(Ne[X])&&(o=!0,r=8*r+"01234567".indexOf(Ne[X++]),"0123".includes(i)&&X<dr&&J1(Ne[X])&&(r=8*r+"01234567".indexOf(Ne[X++]))),e+=String.fromCharCode(r)):e+=i}else{if(Z1(i.charCodeAt(0)))break;e+=i}}return""!==t&&Tt({},Ci,Vi),{type:8,value:e,octal:o,start:n,end:X}}():46===e?Ou(Ne.charCodeAt(X+1))?ere():G3():Ou(e)?ere():G3()}function lo(){const e=Vt;return X=e.end,Vt=tre(),X=e.end,e}function nre(){const e=X;Vt=tre(),X=e}function ire(e,t,n){const i=new va("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return i.operator=e,i.left=t,i.right=n,i}function r7e(e,t){const n=new va("CallExpression");return n.callee=e,n.arguments=t,n}function W3(e){const t=new va(Xie);return t.name=e,t}function tv(e){const t=new va("Literal");return t.value=e.value,t.raw=Ne.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function rre(e,t,n){const i=new va("MemberExpression");return i.computed="["===e,i.object=t,i.property=n,i.computed||(n.member=!0),i}function ore(e,t,n){const i=new va("Property");return i.key=t,i.value=n,i.kind=e,i}function Tt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(o,s)=>(KS(s<i.length,"Message reference must be in range"),i[s]));throw(n=new Error(r)).index=X,n.description=r,n}function QS(e){2===e.type&&Tt(e,"Unexpected end of input"),6===e.type&&Tt(e,"Unexpected number"),8===e.type&&Tt(e,"Unexpected string"),3===e.type&&Tt(e,"Unexpected identifier"),4===e.type&&Tt(e,"Unexpected reserved word"),Tt(e,Ci,e.value)}function fr(e){const t=lo();(7!==t.type||t.value!==e)&&QS(t)}function dn(e){return 7===Vt.type&&Vt.value===e}function q3(e){return 4===Vt.type&&Vt.value===e}function sre(){X=Vt.start;const e=lo();return 8===e.type||6===e.type?(e.octal&&Tt(e,Qie),tv(e)):W3(e.value)}function u7e(){var e,t,n;return X=Vt.start,3===(e=Vt).type?(n=sre(),fr(":"),ore("init",n,Eh())):2!==e.type&&7!==e.type?(t=sre(),fr(":"),ore("init",t,Eh())):void QS(e)}const f7e={if:1};function h7e(){var e,t,n;if(dn("("))return function d7e(){fr("(");const e=Y3();return fr(")"),e}();if(dn("["))return function l7e(){const e=[];for(X=Vt.start,fr("[");!dn("]");)dn(",")?(lo(),e.push(null)):(e.push(Eh()),dn("]")||fr(","));return lo(),function i7e(e){const t=new va("ArrayExpression");return t.elements=e,t}(e)}();if(dn("{"))return function c7e(){var t,i,e=[],r={},o=String;for(X=Vt.start,fr("{");!dn("}");)i="$"+((t=u7e()).key.type===Xie?t.key.name:o(t.key.value)),Object.prototype.hasOwnProperty.call(r,i)?Tt({},"Duplicate data property in object literal not allowed in strict mode"):r[i]=!0,e.push(t),dn("}")||fr(",");return fr("}"),function s7e(e){const t=new va("ObjectExpression");return t.properties=e,t}(e)}();if(X=Vt.start,3===(e=Vt.type)||f7e[Vt.value])n=W3(lo().value);else if(8===e||6===e)Vt.octal&&Tt(Vt,Qie),n=tv(lo());else{if(4===e)throw new Error(Q1);1===e?((t=lo()).value="true"===t.value,n=tv(t)):5===e?((t=lo()).value=null,n=tv(t)):dn("/")||dn("/=")?(n=tv(function t7e(){var e,t,n,i;return Vt=null,Jie(),e=X,t=function Z9e(){var e,t,n,i;for(KS("/"===(e=Ne[X]),"Regular expression literal must start with a slash"),t=Ne[X++],n=!1,i=!1;X<dr;)if(t+=e=Ne[X++],"\\"===e)Z1((e=Ne[X++]).charCodeAt(0))&&Tt({},U3),t+=e;else if(Z1(e.charCodeAt(0)))Tt({},U3);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||Tt({},U3),{value:t.substr(1,t.length-2),literal:t}}(),n=function e7e(){var e,t,n;for(t="",n="";X<dr&&XS((e=Ne[X]).charCodeAt(0));)++X,"\\"===e&&X<dr?Tt({},Ci,Vi):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Tt({},j3,n),{value:n,literal:t}}(),i=function J9e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Tt({},j3)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Tt({},j3)}try{return new RegExp(e,t)}catch{return null}}(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:X}}()),nre()):QS(lo())}return n}function p7e(){const e=[];if(fr("("),!dn(")"))for(;X<dr&&(e.push(Eh()),!dn(")"));)fr(",");return fr(")"),e}function _7e(){fr("[");const e=Y3();return fr("]"),e}function are(){const e=function y7e(){var e;for(e=h7e();;)if(dn("."))e=rre(".",e,(fr("."),function g7e(){X=Vt.start;const e=lo();return function n7e(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||QS(e),W3(e.value)}()));else if(dn("("))e=r7e(e,p7e());else{if(!dn("["))break;e=rre("[",e,_7e())}return e}();if(7===Vt.type&&(dn("++")||dn("--")))throw new Error(Q1);return e}function JS(){var e,t;if(7!==Vt.type&&4!==Vt.type)t=are();else{if(dn("++")||dn("--"))throw new Error(Q1);if(dn("+")||dn("-")||dn("~")||dn("!"))e=lo(),t=JS(),t=function a7e(e,t){const n=new va("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(q3("delete")||q3("void")||q3("typeof"))throw new Error(Q1);t=are()}}return t}function lre(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Eh(){var e,t;return e=function v7e(){var e,t,n,i,r,o,s,a,l,u;if(e=Vt,l=JS(),0===(r=lre(i=Vt)))return l;for(i.prec=r,lo(),t=[e,Vt],o=[l,i,s=JS()];(r=lre(Vt))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=ire(a,l,s),o.push(n);(i=lo()).prec=r,o.push(i),t.push(Vt),n=JS(),o.push(n)}for(n=o[u=o.length-1],t.pop();u>1;)t.pop(),n=ire(o[u-1].value,o[u-2],n),u-=2;return n}(),dn("?")&&(lo(),t=Eh(),fr(":"),e=function o7e(e,t,n){const i=new va("ConditionalExpression");return i.test=e,i.consequent=t,i.alternate=n,i}(e,t,Eh())),e}function Y3(){const e=Eh();if(dn(","))throw new Error(Q1);return e}function K3(e){X=0,dr=(Ne=e).length,Vt=null,nre();const t=Y3();if(2!==Vt.type)throw new Error("Unexpect token after expression.");return t}var ure={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function cre(e){function n(s,a,l){return u=>function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",0===l.lastIndexOf("new ",0)&&(c="("+c+")")),c+"."+s+(u<0?"":0===u?"()":"("+a.slice(1).map(e).join(",")+")")}(s,u,a,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&Q("Missing arguments to clamp function."),s.length>3&&Q("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&Q("Missing arguments to if function."),s.length>3&&Q("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function dre(e){const t=(e=e||{}).allowed?oa(e.allowed):{},n=e.forbidden?oa(e.forbidden):{},i=e.constants||ure,r=(e.functions||cre)(d),o=e.globalvar,s=e.fieldvar,a=nt(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function d(p){if(be(p))return p;const g=f[p.type];return null==g&&Q("Unsupported type: "+p.type),g(p)}const f={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:Ce(n,g)?Q("Illegal identifier: "+g):Ce(i,g)?i[g]:Ce(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=d(p.object);g&&(c+=1);const _=d(p.property);return m===s&&(u[function b7e(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(_)]=1),g&&(c-=1),m+(g?"."+_:"["+_+"]")},CallExpression:p=>{"Identifier"!==p.callee.type&&Q("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,_=Ce(r,g)&&r[g];return _||Q("Unrecognized function: "+g),nt(_)?_(m):_+"("+m.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const g=d(p.key);return c-=1,g+":"+d(p.value)}};function h(p){const g={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=r,h.constants=i,h}var fre,hre,X3,Q3,J3,ZS=new $i,ex=new $i,El={point:Bi,lineStart:Bi,lineEnd:Bi,polygonStart:function(){ZS=new $i,El.lineStart=w7e,El.lineEnd=E7e},polygonEnd:function(){var e=+ZS;ex.add(e<0?Ir+e:e),this.lineStart=this.lineEnd=this.point=Bi},sphere:function(){ex.add(Ir)}};function w7e(){El.point=D7e}function E7e(){pre(fre,hre)}function D7e(e,t){El.point=pre,fre=e,hre=t,X3=e*=lt,Q3=Be(t=(t*=lt)/2+KC),J3=Ie(t)}function pre(e,t){var n=(e*=lt)-X3,i=n>=0?1:-1,r=i*n,o=Be(t=(t*=lt)/2+KC),s=Ie(t),a=J3*s,l=Q3*o+a*Be(r),u=a*i*Ie(r);ZS.add(Cs(u,l)),X3=e,Q3=o,J3=s}var Dn,uo,Fn,zo,Dh,gre,mre,Om,nv,vd,Ru,Fu={point:Z3,lineStart:yre,lineEnd:vre,polygonStart:function(){Fu.point=bre,Fu.lineStart=S7e,Fu.lineEnd=x7e,nv=new $i,El.polygonStart()},polygonEnd:function(){El.polygonEnd(),Fu.point=Z3,Fu.lineStart=yre,Fu.lineEnd=vre,ZS<0?(Dn=-(Fn=180),uo=-(zo=90)):nv>Le?zo=90:nv<-Le&&(uo=-90),Ru[0]=Dn,Ru[1]=Fn},sphere:function(){Dn=-(Fn=180),uo=-(zo=90)}};function Z3(e,t){vd.push(Ru=[Dn=e,Fn=e]),t<uo&&(uo=t),t>zo&&(zo=t)}function _re(e,t){var n=sh([e*lt,t*lt]);if(Om){var i=_m(Om,n),o=_m([i[1],-i[0],0],i);cS(o),o=aS(o);var u,s=e-Dh,a=s>0?1:-1,l=o[0]*jn*a,c=_t(s)>180;c^(a*Dh<l&&l<a*e)?(u=o[1]*jn)>zo&&(zo=u):c^(a*Dh<(l=(l+360)%360-180)&&l<a*e)?(u=-o[1]*jn)<uo&&(uo=u):(t<uo&&(uo=t),t>zo&&(zo=t)),c?e<Dh?Go(Dn,e)>Go(Dn,Fn)&&(Fn=e):Go(e,Fn)>Go(Dn,Fn)&&(Dn=e):Fn>=Dn?(e<Dn&&(Dn=e),e>Fn&&(Fn=e)):e>Dh?Go(Dn,e)>Go(Dn,Fn)&&(Fn=e):Go(e,Fn)>Go(Dn,Fn)&&(Dn=e)}else vd.push(Ru=[Dn=e,Fn=e]);t<uo&&(uo=t),t>zo&&(zo=t),Om=n,Dh=e}function yre(){Fu.point=_re}function vre(){Ru[0]=Dn,Ru[1]=Fn,Fu.point=Z3,Om=null}function bre(e,t){if(Om){var n=e-Dh;nv.add(_t(n)>180?n+(n>0?360:-360):n)}else gre=e,mre=t;El.point(e,t),_re(e,t)}function S7e(){El.lineStart()}function x7e(){bre(gre,mre),El.lineEnd(),_t(nv)>Le&&(Dn=-(Fn=180)),Ru[0]=Dn,Ru[1]=Fn,Om=null}function Go(e,t){return(t-=e)<0?t+360:t}function T7e(e,t){return e[0]-t[0]}function wre(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var iv,tx,nx,ix,rx,ox,sx,ax,e$,t$,n$,Ere,Dre,jr,Ur,Hr,ba={sphere:Bi,point:i$,lineStart:Cre,lineEnd:Sre,polygonStart:function(){ba.lineStart=k7e,ba.lineEnd=I7e},polygonEnd:function(){ba.lineStart=Cre,ba.lineEnd=Sre}};function i$(e,t){e*=lt;var n=Be(t*=lt);rv(n*Be(e),n*Ie(e),Ie(t))}function rv(e,t,n){++iv,nx+=(e-nx)/iv,ix+=(t-ix)/iv,rx+=(n-rx)/iv}function Cre(){ba.point=N7e}function N7e(e,t){e*=lt;var n=Be(t*=lt);jr=n*Be(e),Ur=n*Ie(e),Hr=Ie(t),ba.point=M7e,rv(jr,Ur,Hr)}function M7e(e,t){e*=lt;var n=Be(t*=lt),i=n*Be(e),r=n*Ie(e),o=Ie(t),s=Cs(Or((s=Ur*o-Hr*r)*s+(s=Hr*i-jr*o)*s+(s=jr*r-Ur*i)*s),jr*i+Ur*r+Hr*o);tx+=s,ox+=s*(jr+(jr=i)),sx+=s*(Ur+(Ur=r)),ax+=s*(Hr+(Hr=o)),rv(jr,Ur,Hr)}function Sre(){ba.point=i$}function k7e(){ba.point=O7e}function I7e(){xre(Ere,Dre),ba.point=i$}function O7e(e,t){Ere=e,Dre=t,e*=lt,t*=lt,ba.point=xre;var n=Be(t);jr=n*Be(e),Ur=n*Ie(e),Hr=Ie(t),rv(jr,Ur,Hr)}function xre(e,t){e*=lt;var n=Be(t*=lt),i=n*Be(e),r=n*Ie(e),o=Ie(t),s=Ur*o-Hr*r,a=Hr*i-jr*o,l=jr*r-Ur*i,u=$P(s,a,l),c=ro(u),d=u&&-c/u;e$.add(d*s),t$.add(d*a),n$.add(d*l),tx+=c,ox+=c*(jr+(jr=i)),sx+=c*(Ur+(Ur=r)),ax+=c*(Hr+(Hr=o)),rv(jr,Ur,Hr)}function L7e(e){return e instanceof QD?e:new QD(e)}const Tre=Symbol("vega_selection_getter");function Are(e){return(!e.getter||!e.getter[Tre])&&(e.getter=ps(e.field),e.getter[Tre]=!0),e.getter}const r$="intersect",Dl="_vgsid_",ov=ps(Dl),lx="index:unit";function kre(e,t){for(var s,a,n=t.fields,i=t.values,r=n.length,o=0;o<r;++o)if(Rc(s=Are(a=n[o])(e))&&(s=ir(s)),Rc(i[o])&&(i[o]=ir(i[o])),J(i[o])&&Rc(i[o][0])&&(i[o]=i[o].map(ir)),"E"===a.type){if(J(i[o])?i[o].indexOf(s)<0:s!==i[o])return!1}else if("R"===a.type){if(!Rg(s,i[o]))return!1}else if("R-RE"===a.type){if(!Rg(s,i[o],!0,!1))return!1}else if("R-E"===a.type){if(!Rg(s,i[o],!1,!1))return!1}else if("R-LE"===a.type&&!Rg(s,i[o],!1,!0))return!1;return!0}const Ire=jg(ov),q7e=Ire.left,Y7e=Ire.right;var o$={[`${Dl}_union`]:function F7e(...e){const t=new QD;for(const n of e)for(const i of n)t.add(i);return t},[`${Dl}_intersect`]:function P7e(e,...t){e=new QD(e),t=t.map(L7e);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e},E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ir(t[0]),i=ir(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=ir(t[0]),i=ir(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};function s$(e,t,n,i){t[0].type!==vh&&Q("First argument to selection functions must be a string literal.");const r=t[0].value,s="unit",a="@"+s,l=":"+r;(t.length>=2&&mt(t).value)===r$&&!Ce(i,a)&&(i[a]=n.getData(r).indataRef(n,s)),Ce(i,l)||(i[l]=n.getData(r).tuplesRef())}function Ore(e){const t=this.context.data[e];return t?t.values.value:[]}const sv=e=>function(t,n){const i=this.context.dataflow.locale();return null===t?"null":i[e](n)(t)},iVe=sv("format"),Rre=sv("timeFormat"),rVe=sv("utcFormat"),oVe=sv("timeParse"),sVe=sv("utcParse"),ux=new Date(2e3,0,1);function cx(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(ux.setYear(2e3),ux.setMonth(e),ux.setDate(t),Rre.call(this,ux,n)):""}function l$(e,t,n,i){t[0].type!==vh&&Q("First argument to data functions must be a string literal.");const r=t[0].value,o=":"+r;if(!Ce(o,i))try{i[o]=n.getData(r).tuplesRef()}catch{}}function zr(e,t,n,i){if(t[0].type===vh)Pre(n,i,t[0].value);else for(e in n.scales)Pre(n,i,e)}function Pre(e,t,n){const i="%"+n;if(!Ce(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Cl(e,t){if(nt(e))return e;if(be(e)){const n=t.scales[e];return n&&function SPe(e){return e&&!0===e[PJ]}(n.value)?n.value:void 0}}function u$(e,t){return function(n,i,r){if(n){const o=Cl(n,(r||this).context);return o&&o.path[e](i)}return t(i)}}const gVe=u$("area",function C7e(e){return ex=new $i,Nu(e,El),2*ex}),mVe=u$("bounds",function A7e(e){var t,n,i,r,o,s,a;if(zo=Fn=-(Dn=uo=1/0),vd=[],Nu(e,Fu),n=vd.length){for(vd.sort(T7e),t=1,o=[i=vd[0]];t<n;++t)wre(i,(r=vd[t])[0])||wre(i,r[1])?(Go(i[0],r[1])>Go(i[0],i[1])&&(i[1]=r[1]),Go(r[0],i[1])>Go(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,t=0,i=o[n=o.length-1];t<=n;i=r,++t)(a=Go(i[1],(r=o[t])[0]))>s&&(s=a,Dn=r[0],Fn=i[1])}return vd=Ru=null,Dn===1/0||uo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Dn,uo],[Fn,zo]]}),_Ve=u$("centroid",function R7e(e){iv=tx=nx=ix=rx=ox=sx=ax=0,e$=new $i,t$=new $i,n$=new $i,Nu(e,ba);var t=+e$,n=+t$,i=+n$,r=$P(t,n,i);return r<YC&&(t=ox,n=sx,i=ax,tx<Le&&(t=nx,n=ix,i=rx),(r=$P(t,n,i))<YC)?[NaN,NaN]:[Cs(n,t)*jn,ro(i/r)*jn]});function c$(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function d$(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function f$(e){const t=Wc(e);return.2126*d$(t.r)+.7152*d$(t.g)+.0722*d$(t.b)}function Lre(e,t){return e===t||e!=e&&t!=t||(J(e)?!(!J(t)||e.length!==t.length)&&function SVe(e,t){for(let n=0,i=e.length;n<i;++n)if(!Lre(e[n],t[n]))return!1;return!0}(e,t):!(!ye(e)||!ye(t))&&$re(e,t))}function $re(e,t){for(const n in e)if(!Lre(e[n],t[n]))return!1;return!0}function Bre(e){return t=>$re(e,t)}const Vre={};function h$(e){return J(e)||ArrayBuffer.isView(e)?e:null}function p$(e){return h$(e)||(be(e)?e:null)}const jre=e=>e.data;function Ure(e,t){const n=Ore.call(t,e);return n.root&&n.root.lookup||{}}const Hre=()=>typeof window<"u"&&window||null;function zre(e,t,n){if(!e)return[];const[i,r]=e,o=(new Jn).set(i[0],i[1],r[0],r[1]);return xee(n||this.context.dataflow.scenegraph().root,o,function QVe(e){let t=null;if(e){const n=ve(e.marktype),i=ve(e.markname);t=r=>(!n.length||n.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return t}(t))}const av={random:()=>ys(),cumulativeNormal:SD,cumulativeLogNormal:JO,cumulativeUniform:nR,densityNormal:qO,densityLogNormal:QO,densityUniform:tR,quantileNormal:xD,quantileLogNormal:ZO,quantileUniform:iR,sampleNormal:CD,sampleLogNormal:XO,sampleUniform:eR,isArray:J,isBoolean:Oc,isDate:Rc,isDefined:e=>void 0!==e,isNumber:Ct,isObject:ye,isRegExp:mY,isString:be,isTuple:mD,isValid:e=>null!=e&&e==e,toBoolean:YI,toDate:e=>KI(e),toNumber:ir,toString:XI,indexof:function kVe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return p$(e).indexOf(...n)},join:function MVe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return h$(e).join(...n)},lastindexof:function IVe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return p$(e).lastIndexOf(...n)},replace:function RVe(e,t,n){return nt(n)&&Q("Function argument passed to replace."),String(e).replace(t,n)},reverse:function FVe(e){return h$(e).slice().reverse()},slice:function OVe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return p$(e).slice(...n)},flush:pY,lerp:_Y,merge:function CVe(){const e=[].slice.call(arguments);return e.unshift({}),it(...e)},pad:bY,peek:mt,pluck:function NVe(e,t){const n=Vre[t]||(Vre[t]=ps(t));return J(e)?e.map(n):n(e)},span:yy,inrange:Rg,truncate:wY,rgb:Wc,lab:eC,hcl:tC,hsl:zD,luminance:f$,contrast:function DVe(e,t){const n=f$(e),i=f$(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},sequence:Fo,format:iVe,utcFormat:rVe,utcParse:sVe,utcOffset:QY,utcSequence:eK,timeFormat:Rre,timeParse:oVe,timeOffset:XY,timeSequence:ZY,timeUnitSpecifier:BY,monthFormat:function aVe(e){return cx.call(this,e,1,"%B")},monthAbbrevFormat:function lVe(e){return cx.call(this,e,1,"%b")},dayFormat:function uVe(e){return cx.call(this,0,2+e,"%A")},dayAbbrevFormat:function cVe(e){return cx.call(this,0,2+e,"%a")},quarter:cY,utcquarter:dY,week:jY,utcweek:zY,dayofyear:VY,utcdayofyear:HY,warn:function bVe(){return c$(this.context.dataflow,"warn",arguments)},info:function wVe(){return c$(this.context.dataflow,"info",arguments)},debug:function EVe(){return c$(this.context.dataflow,"debug",arguments)},extent:e=>tl(e),inScope:function vVe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:zre,clampRange:fY,pinchDistance:function TVe(e){const t=e.touches;return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)},pinchAngle:function AVe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function YVe(){const e=Hre();return e?e.screen:{}},containerSize:function XVe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function KVe(){const e=Hre();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function PVe(e,t,n){return bF(e||0,t||0,n||0)},setdata:function tVe(e,t){const n=this.context.dataflow;return n.pulse(this.context.data[e].input,n.changeset().remove(gs).insert(t)),1},pathShape:function GVe(e){let t=null;return function(n){return n?t1(n,t=t||om(e)):e}},panLinear:sY,panLog:aY,panPow:lY,panSymlog:uY,zoomLinear:UI,zoomLog:HI,zoomPow:XE,zoomSymlog:zI,encode:function nVe(e,t,n){if(e){const i=this.context.dataflow;i.pulse(e.mark.source,i.changeset().encode(e,t))}return void 0!==n?n:e},modify:function xVe(e,t,n,i,r,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let d,f,c=a.changes;if(!1===s._trigger||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(d=!0===n?gs:J(n)||mD(n)?n:Bre(n),c.remove(d)),t&&c.insert(t),i&&(d=Bre(i),l.value.some(d)?c.remove(d):c.insert(i)),r)for(f in o)c.modify(r,f,o[f]);return 1},lassoAppend:function JVe(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const r=(e=ve(e))[e.length-1];return void 0===r||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e},lassoPath:function ZVe(e){return ve(e).reduce((t,n,i)=>{let[r,o]=n;return t+(0==i?`M ${r},${o} `:i===e.length-1?" Z":`L ${r},${o} `)},"")},intersectLasso:function eje(e,t,n){const{x:i,y:r,mark:o}=n,s=(new Jn).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(i,r),zre([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>function tje(e,t,n){let i=0;for(let r=0,o=n.length-1;r<n.length;o=r++){const[s,a]=n[o],[l,u]=n[r];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&i++}return 1&i}(l.x,l.y,t))}},nje=["view","item","group","xy","x","y"],g$={},Wre={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${fe("$"+e)}]`,functions:function rje(e){const t=cre(e);nje.forEach(n=>t[n]="event.vega."+n);for(const n in av)t[n]="this."+n;return it(t,function pVe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=zr,n._range=zr,n._scale=zr;const i=r=>"_["+(r.type===vh?fe("%"+r.value):fe("%")+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}(e,av,g$)),t},constants:ure,visitors:g$},m$=dre(Wre);function Un(e,t,n){return 1===arguments.length?av[e]:(av[e]=t,n&&(g$[e]=n),m$&&(m$.functions[e]="this."+e),this)}function Sl(e,t){const n={};let i;try{i=K3(e=be(e)?e:fe(e)+"")}catch{Q("Expression parse error: "+e)}i.visit(o=>{if(o.type!==Kie)return;const s=o.callee.name,a=Wre.visitors[s];a&&a(s,o.arguments,t,n)});const r=m$(i);return r.globals.forEach(o=>{const s="$"+o;!Ce(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:it({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}Un("bandwidth",function LVe(e,t){const n=Cl(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},zr),Un("copy",function $Ve(e,t){const n=Cl(e,(t||this).context);return n?n.copy():void 0},zr),Un("domain",function BVe(e,t){const n=Cl(e,(t||this).context);return n?n.domain():[]},zr),Un("range",function jVe(e,t){const n=Cl(e,(t||this).context);return n&&n.range?n.range():[]},zr),Un("invert",function VVe(e,t,n){const i=Cl(e,(n||this).context);return i?J(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0},zr),Un("scale",function UVe(e,t,n){const i=Cl(e,(n||this).context);return i?i(t):void 0},zr),Un("gradient",function HVe(e,t,n,i,r){e=Cl(e,(r||this).context);const o=oZ(t,n);let s=e.domain(),a=s[0],l=mt(s),u=nr;return l-a?u=zJ(e,a,l):e=(e.interpolator?xt("sequential")().interpolator(e.interpolator()):xt("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+i||15),a!==s[0]&&s.unshift(a),l!==mt(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o},zr),Un("geoArea",gVe,zr),Un("geoBounds",mVe,zr),Un("geoCentroid",_Ve,zr),Un("geoShape",function zVe(e,t,n){const i=Cl(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}},zr),Un("geoScale",function yVe(e,t){const n=Cl(e,(t||this).context);return n&&n.scale()},zr),Un("indata",function eVe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count},function hVe(e,t,n,i){t[0].type!==vh&&Q("First argument to indata must be a string literal."),t[1].type!==vh&&Q("Second argument to indata must be a string literal.");const r=t[0].value,o=t[1].value,s="@"+o;Ce(s,i)||(i[s]=n.getData(r).indataRef(n,o))}),Un("data",Ore,l$),Un("treePath",function WVe(e,t,n){const i=Ure(e,this),r=i[t],o=i[n];return r&&o?r.path(o).map(jre):void 0},l$),Un("treeAncestors",function qVe(e,t){const n=Ure(e,this)[t];return n?n.ancestors().map(jre):void 0},l$),Un("vlSelectionTest",function W7e(e,t,n){for(var u,c,d,f,h,i=this.context.data[e],r=i?i.values.value:[],o=i?i[lx]&&i[lx].value:void 0,s=n===r$,a=r.length,l=0;l<a;++l)if(u=r[l],o&&s){if(-1===(d=(c=c||{})[f=u.unit]||0))continue;if(h=kre(t,u),c[f]=h?-1:++d,h&&1===o.size)return!0;if(!h&&d===o.get(f).count)return!1}else if(s^(h=kre(t,u)))return h;return a&&s},s$),Un("vlSelectionIdTest",function K7e(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[lx]&&i[lx].value:void 0,s=n===r$,a=ov(t),l=q7e(r,a);if(l===r.length||ov(r[l])!==a)return!1;if(o&&s){if(1===o.size)return!0;if(Y7e(r,a)-l<o.size)return!1}return!0},s$),Un("vlSelectionResolve",function Q7e(e,t,n,i){for(var u,c,d,f,h,p,g,m,_,w,D,r=this.context.data[e],o=r?r.values.value:[],s={},a={},l={},v=o.length,b=0;b<v;++b)if(f=(u=o[b]).unit,d=u.values,(c=u.fields)&&d){for(w=0,D=c.length;w<D;++w)m=(g=s[(h=c[w]).field]||(s[h.field]={}))[f]||(g[f]=[]),l[h.field]=_=h.type.charAt(0),g[f]=(0,o$[`${_}_union`])(m,ve(d[w]));n&&(m=a[f]||(a[f]=[])).push(ve(d).reduce((E,C,N)=>(E[c[N].field]=C,E),{}))}else h=Dl,p=ov(u),(m=(g=s[h]||(s[h]={}))[f]||(g[f]=[])).push(p),n&&(m=a[f]||(a[f]=[])).push({[Dl]:p});return t=t||"union",s[Dl]?s[Dl]=o$[`${Dl}_${t}`](...Object.values(s[Dl])):Object.keys(s).forEach(E=>{s[E]=Object.keys(s[E]).map(C=>s[E][C]).reduce((C,N)=>void 0===C?N:o$[`${l[E]}_${t}`](C,N))}),o=Object.keys(a),n&&o.length&&(s[i?"vlPoint":"vlMulti"]="union"===t?{or:o.reduce((C,N)=>(C.push(...a[N]),C),[])}:{and:o.map(C=>({or:a[C]}))}),s},s$),Un("vlSelectionTuples",function X7e(e,t){return e.map(n=>it(t.fields?{values:t.fields.map(i=>Are(i)(n.datum))}:{[Dl]:ov(n.datum)},t))});const sje=oa(["rule"]),qre=oa(["group","image","rect"]);function _$(e){return(e+"").toLowerCase()}function lv(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}var dje={operator:(e,t)=>lv(e,["_"],t.code),parameter:(e,t)=>lv(e,["datum","_"],t.code),event:(e,t)=>lv(e,["event"],t.code),handler:(e,t)=>lv(e,["_","event"],`var datum=event.item&&event.item.datum;return ${t.code};`),encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const s="o["+fe(o)+"]";r+=`$=${i[o].code};if(${s}!==$)${s}=$,m=1;`}return r+=function aje(e,t){let n="";return sje[t]||(e.x2&&(e.x?(qre[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(qre[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(i,n),r+="return m;",lv(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(fe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=Function("a","b","var u, v; return "+e.map((o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),function cje(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}\n  : (u > v || v == null) && u != null ? ${i}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n  : v !== v && u === u ? ${i} : `}(l,u,-a,a)}).join("")+"0;");return n?r.bind(n):r}}};function Yre(e,t,n){if(!e||!ye(e))return e;for(let o,i=0,r=Kre.length;i<r;++i)if(o=Kre[i],Ce(e,o.key))return o.parse(e,t,n);return e}var Kre=[{key:"$ref",parse:function gje(e,t){return t.get(e.$ref)||Q("Operator not defined: "+e.$ref)}},{key:"$key",parse:function _je(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=qI(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function mje(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Jr(t.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function yje(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ps(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function bje(e,t){const n=e.$encode,i={};for(const r in n){const o=n[r];i[r]=Jr(t.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}},{key:"$compare",parse:function vje(e,t){const n="c:"+e.$compare+"_"+e.$order,i=ve(e.$compare).map(r=>r&&r.$tupleid?Fe:r);return t.fn[n]||(t.fn[n]=GI(i,e.$order,t.expr.codegen))}},{key:"$context",parse:function wje(e,t){return t}},{key:"$subflow",parse:function Eje(e,t){const n=e.$subflow;return function(i,r,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}},{key:"$tupleid",parse:function Dje(){return Fe}}];const xje={skip:!0};function Xre(e,t,n,i){return new Qre(e,t,n,i)}function Qre(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||dje,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Jre(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Zre(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}Qre.prototype=Jre.prototype={fork(){const e=new Jre(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),function uje(e){return"collect"===_$(e)}(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[_$(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function oje(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()},parseOperator:function fje(e){const t=this;!function lje(e){return"operator"===_$(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function hje(e){const t=this;if(e.params){const n=t.get(e.id);n||Q("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function pje(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=J(r)?r.map(o=>Yre(o,n,t)):Yre(r,n,t)}return t},parseStream:function Cje(e){var r,t=this,n=null!=e.filter?t.eventExpression(e.filter):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,n):e.merge&&(i=(r=e.merge.map(o=>t.get(o)))[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>t.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&Q("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)},parseUpdate:function Sje(e){var r,t=this,n=ye(n=e.source)?n.$ref:n,i=t.get(n),o=e.update,s=void 0;i||Q("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,r,o,s)},getState:function Tje(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(i[o]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(r[o]=s.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n},setState:function Aje(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{n.update(t.signals[o],r[o],xje)}),Object.keys(i||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(gs).insert(i[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}};const y$="default";function v$(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function dx(e,t){var n=e._runtime.data;return Ce(n,t)||Q("Unrecognized data set: "+t),n[t]}function fx(e,t){UK(t)||Q("Second argument to changes must be a changeset.");const n=dx(this,e);return n.modified=!0,this.pulse(n.input,t)}function eoe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function toe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function hx(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}const jje={trap:!1};function ioe(e,t,n,i){e._eventListeners.push({type:n,sources:ve(t),handler:i})}function px(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return!(!1===i||ye(i)&&!i[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function roe(e){return e.item}function ooe(e){return e.item.mark.source}function soe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Wo(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return null!=n&&(i.textContent=n),i}function Xje(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=WI(i.debounce,r.update))),(null==i.input&&i.element?Qje:Zje)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Qje(e,t,n,i){const r=n.event||"input",o=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,o),ioe(i,t,r,o),e.set=s=>{t.value=s,t.dispatchEvent(function Jje(e){return typeof Event<"u"?new Event(e):{type:e}}(r))}}function Zje(e,t,n,i){const r=i.signal(n.signal),o=Wo("div",{class:"vega-bind"}),s="radio"===n.input?o:o.appendChild(Wo("label"));s.appendChild(Wo("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let a=eUe;switch(n.input){case"checkbox":a=tUe;break;case"select":a=nUe;break;case"radio":a=iUe;break;case"range":a=rUe}a(e,s,n,r)}function eUe(e,t,n,i){const r=Wo("input");for(const o in n)"signal"!==o&&"element"!==o&&r.setAttribute("input"===o?"type":o,n[o]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function tUe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const o=Wo("input",r);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function nUe(e,t,n,i){const r=Wo("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};gx(s,i)&&(l.selected=!0),r.appendChild(Wo("option",l,(o[a]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(gx(n.options[a],s))return void(r.selectedIndex=a)}}function iUe(e,t,n,i){const r=Wo("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};gx(s,i)&&(l.checked=!0);const u=Wo("input",l);u.addEventListener("change",()=>e.update(s));const c=Wo("label",{},(o[a]||s)+"");return c.prepend(u),r.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)gx(a[u].value,s)&&(a[u].checked=!0)}}function rUe(e,t,n,i){i=void 0!==i?i:(+n.max+ +n.min)/2;const r=null!=n.max?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,r,+i)||0,s=n.step||Pc(o,r,100),a=Wo("input",{type:"range",name:n.signal,min:o,max:r,step:s});a.value=i;const l=Wo("span",{},+i);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function gx(e,t){return e===t||e+""==t+""}function aoe(e,t,n,i,r,o){return(t=t||new i(e.loader())).initialize(n,eoe(e),toe(e),hx(e),r,o).background(e.background())}function b$(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function w$(e,t,n){if("string"==typeof t){if(!(typeof document<"u"))return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const uv=e=>+e||0;function loe(e){return ye(e)?{top:uv(e.top),bottom:uv(e.bottom),left:uv(e.left),right:uv(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(uv(e))}function E$(e,t,n,i){return D$.apply(this,arguments)}function D$(){return(D$=li(function*(e,t,n,i){const r=jC(t),o=r&&r.headless;return o||Q("Unrecognized renderer type: "+t),yield e.runAsync(),aoe(e,null,null,o,n,i).renderAsync(e._scenegraph.root)})).apply(this,arguments)}function C$(){return(C$=li(function*(e,t){e!==rd.Canvas&&e!==rd.SVG&&e!==rd.PNG&&Q("Unrecognized image type: "+e);const n=yield E$(this,e,t);return e===rd.SVG?uUe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})).apply(this,arguments)}function uUe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function S$(){return(S$=li(function*(e,t){return(yield E$(this,rd.Canvas,e,t)).canvas()})).apply(this,arguments)}function x$(){return(x$=li(function*(e){return(yield E$(this,rd.SVG,e)).svg()})).apply(this,arguments)}var T$="padding",doe={skip:!0};function foe(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===T$?i.left+i.right:0)}function hoe(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===T$?i.top+i.bottom:0)}function _Ue(e,t){return t.modified&&J(t.input.value)&&!e.startsWith("_:vega:_")}function yUe(e,t){return!("parent"===e||t instanceof Yg.proxy)}function wUe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",function EUe(e){return null==e?"":J(e)?poe(e):ye(e)&&!Rc(e)?function DUe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(J(n)?poe(n):goe(n))}).join("\n")}(e):e+""}(i))}function poe(e){return"["+e.map(goe).join(", ")+"]"}function goe(e){return J(e)?"[\u2026]":ye(e)&&!Rc(e)?"{\u2026}":e}function moe(e,t){const n=this;if(t=t||{},qg.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const o=it({},e.locale,t.locale);n.locale(MK(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||rd.Canvas,n._scenegraph=new HZ;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||wUe,n._redraw=!0,n._handler=(new g1).scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function Uje(e){const t=it({defaults:{}},e),n=(i,r)=>{r.forEach(o=>{J(i[o])&&(i[o]=oa(i[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=function fUe(e,t,n){return Xre(e,Yg,av,n).parse(t)}(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:it({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=foe(n,n._width),n._viewHeight=hoe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function pUe(e){var t=e._signals,n=t.width,i=t.height,r=t[T$];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=foe(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=hoe(e,a.size),o()},{size:i});const s=e.add(null,o,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}(n),function kje(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}(n),function Ije(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:y$,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,o=r?be(r)?r:r.user:y$,s=i.item&&i.item.cursor||null;return r&&o===r.user&&s==r.item?r:{user:o,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return be(i)||(r=i.item,i=i.user),v$(e,i&&i!==y$?i:r||i),r},{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function mx(e,t){return Ce(e._signals,t)?e._signals[t]:Q("Unrecognized signal name: "+fe(t))}function _oe(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function yoe(e,t,n,i){let r=_oe(n,i);return r||(r=b$(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function voe(e,t,n){const i=_oe(t,n);return i&&t._targets.remove(i),e}pe(moe,qg,{evaluate(e,t,n){var i=this;return li(function*(){if(yield qg.prototype.evaluate.call(i,e,t),i._redraw||i._resize)try{i._renderer&&(i._resize&&(i._resize=0,function Pje(e){var t=hx(e),n=eoe(e),i=toe(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(o){e.error(o)}})}(i)),yield i._renderer.renderAsync(i._scenegraph.root)),i._redraw=!1}catch(r){i.error(r)}return n&&gD(i,n),i})()},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&Zre(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=mx(this,e);return 1===arguments.length?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",loe(e)):loe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(jC(e)||Q("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(qg.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(mx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function gUe(e,t,n,i,r,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal("width",n,doe),s._resizeWidth.skip(!0)),s.height()!==i&&(a=1,s.signal("height",i,doe),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)},addEventListener(e,t,n){let i=t;return n&&!1===n.trap||(i=b$(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var r,o,n=this._handler.handlers(e),i=n.length;--i>=0;)if(r=n[i].handler,e===(o=n[i].type)&&(t===r||t===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return yoe(this,e,mx(this,e),t)},removeSignalListener(e,t){return voe(this,mx(this,e),t)},addDataListener(e,t){return yoe(this,e,dx(this,e).values,t)},removeDataListener(e,t){return voe(this,dx(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=v$(this,null);this._globalCursor=!!e,t&&v$(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function bUe(e,t){this._timers.push(function Nje(e,t,n){var i=new SS,r=t;return null==t?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(o,s,a){s=+s,a=null==a?SL():+a,i._restart(function l(u){u+=r,i._restart(l,r+=s,a),o(u)},s,a)},i.restart(e,t,n),i)}(function n(i){e({timestamp:Date.now(),elapsed:i})},t))},events:function zje(e,t,n){var s,i=this,r=new bD(n),o=function(u,c){i.runAsync(null,()=>{"view"===e&&function Hje(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return!1!==i&&!0!==r&&(!0===i||!1===r||(i?i[t]:r?!r[t]:e.preventDefault()))}(i,t)&&u.preventDefault(),r.receive(function Lje(e,t,n){var o,a,i=e._renderer,r=i&&i.canvas();return r&&(a=hx(e),(o=AC(t.changedTouches?t.changedTouches[0]:t,r))[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function $je(e,t,n){const i=t?"group"===t.mark.marktype?t:t.mark.group:null;function r(s){var l,a=i;if(s)for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;be(s)&&(s=r(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:rr(e),item:rr(t||{}),group:r,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}(e,n,o),t}(i,u,c))})};if("timer"===e)px(i,"timer",t)&&i.timer(o,t);else if("view"===e)px(i,"view",t)&&i.addEventListener(t,o,jje);else if("window"===e?px(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&px(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),s){for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);ioe(i,s,t,o)}else i.warn("Can not resolve event source: "+e);return r},finalize:function Wje(){var r,o,s,e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(o=(s=i[r]).sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)this._handler.off(n[r].type,n[r].handler);return this},hover:function Gje(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","pointerover",roe),ooe,soe(e)),this.on(this.events("view","pointerout",roe),ooe,soe(t)),this},data:function Oje(e,t){return arguments.length<2?dx(this,e).values.value:fx.call(this,e,Uf().remove(gs).insert(t))},change:fx,insert:function Rje(e,t){return fx.call(this,e,Uf().insert(t))},remove:function Fje(e,t){return fx.call(this,e,Uf().remove(t))},scale:function hUe(e){var t=this._runtime.scales;return Ce(t,e)||Q("Unrecognized scale or projection: "+e),t[e].value},initialize:function sUe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,o=jC(i);e=n._el=e?w$(n,e,!0):null,function Mje(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Zre(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+i);const s=o.handler||g1,a=e?o.renderer:o.headless;return n._renderer=a?aoe(n,n._renderer,e,a):null,n._handler=function oUe(e,t,n,i){const r=new i(e.loader(),b$(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,hx(e),e);return t&&t.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}(n,n._handler,e,s),n._redraw=!0,e&&"none"!==r&&(t=t?n._elBind=w$(n,t,!0):e.appendChild(Wo("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&"container"!==r&&(l.element=w$(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Xje(n,l.element||t,l)})),n},toImageURL:function lUe(e,t){return C$.apply(this,arguments)},toCanvas:function cUe(e,t){return S$.apply(this,arguments)},toSVG:function dUe(e){return x$.apply(this,arguments)},getState:function mUe(e){return this._runtime.getState(e||{data:_Ue,signals:yUe,recurse:!0})},setState:function vUe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this},_watchPixelRatio:function CUe(){if("canvas"===this.renderer()&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}});const NUe=/[[\]{}]/,MUe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Doe,Coe;function bd(e,t,n){return Doe=t||"view",Coe=n||MUe,Soe(e.trim()).map(A$)}function cv(e,t,n,i,r){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;r&&r.indexOf(a)>=0?--s:i&&i.indexOf(a)>=0&&++s}return t}function Soe(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=cv(e,r,",","[{","]}"),t.push(e.substring(i,r).trim()),i=++r;if(0===t.length)throw"Empty event selector: "+e;return t}function A$(e){return"["===e[0]?function IUe(e){const t=e.length;let i,n=1;if(n=cv(e,n,"]","[","]"),n===t)throw"Empty between selector: "+e;if(i=Soe(e.substring(1,n)),2!==i.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(n+1).trim())[0])throw"Expected '>' after between selector: "+e;i=i.map(A$);const r=A$(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}(e):function OUe(e){const t={source:Doe},n=[];let l,u,i=[0,0],r=0,o=0,s=e.length,a=0;if("}"===e[s-1]){if(a=e.lastIndexOf("{"),!(a>=0))throw"Unmatched right brace: "+e;try{i=function RUe(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!=i)throw e;return i})}(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}s=(e=e.slice(0,a).trim()).length,a=0}if(!s)throw e;if("@"===e[0]&&(r=++a),l=cv(e,a,":"),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=cv(e,a,"["),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=cv(e,a,"]"),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&"["!==e[++a])throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||NUe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):function kUe(e){return Coe[e]}(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=u&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}(e)}function FUe(e){return ye(e)?e:{type:e||"pad"}}const dv=e=>+e||0;function LUe(e){return ye(e)?e.signal?e:{top:dv(e.top),bottom:dv(e.bottom),left:dv(e.left),right:dv(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(dv(e))}const Si=e=>ye(e)&&!J(e)?it({},e):{value:e};function xoe(e,t,n,i){return null!=n?(ye(n)&&!J(n)||J(n)&&n.length&&ye(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function ji(e,t,n){for(const i in t)xoe(e,i,t[i]);for(const i in n)xoe(e,i,n[i],"update")}function Rm(e,t,n){for(const i in t)n&&Ce(n,i)||(e[i]=it(e[i]||{},t[i]));return e}function Fm(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const N$="mark",M$="frame",k$="scope",Toe="legend-label";function I$(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Aoe=e=>be(e)?fe(e):e.signal?`(${e.signal})`:Noe(e);function vx(e){if(null!=e.gradient)return function tHe(e){const t=[e.start,e.stop,e.count].map(n=>null==n?null:fe(n));for(;t.length&&null==mt(t);)t.pop();return t.unshift(Aoe(e.gradient)),`gradient(${t.join(",")})`}(e);let t=e.signal?`(${e.signal})`:e.color?function eHe(e){return e.c?bx("hcl",e.h,e.c,e.l):e.h||e.s?bx("hsl",e.h,e.s,e.l):e.l||e.a?bx("lab",e.l,e.a,e.b):e.r||e.g||e.b?bx("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?Noe(e.field):void 0!==e.value?fe(e.value):void 0;return null!=e.scale&&(t=function nHe(e,t){const n=Aoe(e.scale);return null!=e.range?t=`lerp(_range(${n}), ${+e.range})`:(void 0!==t&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(1==+e.band?"":"*"+wx(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),null==t&&(t="0")),t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t=`pow(${t},${wx(e.exponent)})`),null!=e.mult&&(t+=`*${wx(e.mult)}`),null!=e.offset&&(t+=`+${wx(e.offset)}`),e.round&&(t=`round(${t})`),t}const bx=(e,t,n,i)=>`(${e}(${[t,n,i].map(vx).join(",")})+'')`;function wx(e){return ye(e)?"("+vx(e)+")":e}function Noe(e){return Moe(ye(e)?e:{datum:e})}function Moe(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):Q("Invalid field reference: "+fe(e));return e.signal||(i=be(i)?el(i).map(fe).join("]["):Moe(i)),t+"["+i+"]"}function koe(e,t,n,i,r,o){const s={};(o=o||{}).encoders={$encode:s},e=function ZUe(e,t,n,i,r){const o={},s={};let a,l,u,c;for(l in l="lineBreak","text"===t&&null!=r[l]&&!Fm(l,e)&&I$(o,l,r[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===M$?r.group:n===N$?it({},r.mark,r[t]):null,c)u=Fm(l,e)||("fill"===l||"stroke"===l)&&(Fm("fill",e)||Fm("stroke",e)),u||I$(o,l,c[l]);for(l in ve(i).forEach(d=>{const f=r.style&&r.style[d];for(const h in f)Fm(h,e)||I$(o,h,f[h])}),e=it({},e),o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=it(s,e.enter),a&&(e.update=it(a,e.update)),e}(e,t,n,i,r.config);for(const a in e)s[a]=rHe(e[a],t,o,r);return o}function rHe(e,t,n,i){const r={},o={};for(const s in e)null!=e[s]&&(r[s]=sHe(oHe(e[s]),i,n,o));return{$expr:{marktype:t,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function oHe(e){return J(e)?function iHe(e){let t="";return e.forEach(n=>{const i=vx(n);t+=n.test?`(${n.test})?${i}:`:i}),":"===mt(t)&&(t+="null"),t}(e):vx(e)}function sHe(e,t,n,i){const r=Sl(e,t);return r.$fields.forEach(o=>i[o]=1),it(n,r.$params),r.$expr}const lHe=["value","update","init","react","bind"];function Ioe(e,t){Q(e+' for "outer" push: '+fe(t))}function Ooe(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||Ioe("No prior signal definition",n),lHe.forEach(i=>{void 0!==e[i]&&Ioe("Invalid property ",i)});else{const i=t.addSignal(n,e.value);!1===e.react&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function O$(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Ex(e,t,n,i){return new O$(e,t,n,i)}function Dx(e,t){return Ex("operator",e,t)}function Pe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function fv(e,t){return t?{$field:e,$name:t}:{$field:e}}const R$=fv("key");function Roe(e,t){return{$compare:e,$order:t}}function Cx(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const F$="scope",P$="view";function gi(e){return e&&e.signal}function Sx(e){if(gi(e))return!0;if(ye(e))for(const t in e)if(Sx(e[t]))return!0;return!1}function wa(e,t){return e??t}function Ch(e){return e&&e.signal||e}function hv(e,t){return(e.merge?gHe:e.stream?mHe:e.type?_He:Q("Invalid stream specification: "+fe(e)))(e,t)}function gHe(e,t){const i=L$({merge:e.merge.map(r=>hv(r,t))},e,t);return t.addStream(i).id}function mHe(e,t){const i=L$({stream:hv(e.stream,t)},e,t);return t.addStream(i).id}function _He(e,t){let n;"timer"===e.type?(n=t.event("timer",e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function pHe(e){return e===F$?P$:e||P$}(e.source),e.type);const i=L$({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function L$(e,t,n){let i=t.between;return i&&(2!==i.length&&Q('Stream "between" parameter must have 2 entries: '+fe(t)),e.between=[hv(i[0],n),hv(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(function yHe(e,t,n){const i="event.item";return i+(e&&"*"!==e?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===F$&&i.push("inScope(event.item)"),i.length&&(e.filter=Sl("("+i.join(")&&(")+")",n).$expr),null!=(i=t.throttle)&&(e.throttle=+i),null!=(i=t.debounce)&&(e.debounce=+i),t.consume&&(e.consume=!0),e}const vHe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function EHe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}const Ht=e=>(t,n,i)=>Ex(e,n,t||void 0,i),Poe=Ht("aggregate"),CHe=Ht("axisticks"),Loe=Ht("bound"),Ea=Ht("collect"),$oe=Ht("compare"),SHe=Ht("datajoin"),Boe=Ht("encode"),xHe=Ht("expression"),THe=Ht("facet"),AHe=Ht("field"),NHe=Ht("key"),MHe=Ht("legendentries"),kHe=Ht("load"),IHe=Ht("mark"),OHe=Ht("multiextent"),RHe=Ht("multivalues"),FHe=Ht("overlap"),PHe=Ht("params"),Voe=Ht("prefacet"),LHe=Ht("projection"),$He=Ht("proxy"),BHe=Ht("relay"),joe=Ht("render"),VHe=Ht("scale"),Sh=Ht("sieve"),jHe=Ht("sortitems"),Uoe=Ht("viewlayout"),UHe=Ht("values");let HHe=0;const Hoe={min:"min",max:"max",count:"sum"};function GHe(e,t){const n=t.getScale(e.name).params;let i;for(i in n.domain=zoe(e.domain,e,t),null!=e.range&&(n.range=Woe(e,t,n)),null!=e.interpolate&&function tze(e,t){t.interpolate=xs(e.type||e),null!=e.gamma&&(t.interpolateGamma=xs(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=function eze(e,t){return e.signal?t.signalRef(e.signal):ye(e)?{interval:xs(e.interval),step:xs(e.step)}:xs(e)}(e.nice,t)),null!=e.bins&&(n.bins=function ZHe(e,t){return e.signal||J(e)?xx(e,t):t.objectProperty(e)}(e.bins,t)),e)Ce(n,i)||"name"===i||(n[i]=xs(e[i],t))}function xs(e,t){return ye(e)?e.signal?t.signalRef(e.signal):Q("Unsupported object: "+fe(e)):e}function xx(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>xs(n,t))}function Tx(e){Q("Can not find data set: "+fe(e))}function zoe(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(J(e)?WHe:e.fields?YHe:qHe)(e,t,n);(null!=t.domainMin||null!=t.domainMax)&&Q("No scale domain defined for domainMin/domainMax to override.")}function WHe(e,t,n){return e.map(i=>xs(i,n))}function qHe(e,t,n){const i=n.getData(e.data);return i||Tx(e.data),rm(t.type)?i.valuesRef(n,e.field,Goe(e.sort,!1)):jJ(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function YHe(e,t,n){const i=e.data,r=e.fields.reduce((o,s)=>(s=be(s)?{data:i,field:s}:J(s)||s.signal?function KHe(e,t){const n="_:vega:_"+HHe++,i=Ea({});if(J(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+fe(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Sh({})]),{data:n,field:"data"}}(s,n):s,o.push(s),o),[]);return(rm(t.type)?XHe:jJ(t.type)?QHe:JHe)(e,n,r)}function XHe(e,t,n){const i=Goe(e.sort,!0);let r,o;const s=n.map(u=>{const c=t.getData(u.data);return c||Tx(u.data),c.countsRef(t,u.field,i)}),a={groupby:R$,pulse:s};i&&(r=i.op||"count",o=i.field?Cx(r,i.field):"count",a.ops=[Hoe[r]],a.fields=[t.fieldRef(o)],a.as=[o]),r=t.add(Poe(a));const l=t.add(Ea({pulse:Pe(r)}));return o=t.add(UHe({field:R$,sort:t.sortRef(i),pulse:Pe(l)})),Pe(o)}function Goe(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!Hoe[e.op]&&Q("Multiple domain scales can not be sorted using "+e.op):Q("No field provided for sort aggregate op: "+e.op):ye(e)?e.field="key":e={field:"key"}),e}function QHe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||Tx(r.data),o.domainRef(t,r.field)});return Pe(t.add(RHe({values:i})))}function JHe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||Tx(r.data),o.extentRef(t,r.field)});return Pe(t.add(OHe({extents:i})))}function Woe(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(be(r)){if(i&&Ce(i,r))return Woe(e=it({},e,{range:i[r]}),t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=rm(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Q("Unrecognized scale range value: "+fe(r))}else{if(r.scheme)return n.scheme=J(r.scheme)?xx(r.scheme,t):xs(r.scheme,t),r.extent&&(n.schemeExtent=xx(r.extent,t)),void(r.count&&(n.schemeCount=xs(r.count,t)));if(r.step)return void(n.rangeStep=xs(r.step,t));if(rm(e.type)&&!J(r))return zoe(r,e,t);J(r)||Q("Unsupported range type: "+fe(r))}return r.map(o=>(J(o)?xx:xs)(o,t))}function $$(e,t,n){return J(e)?e.map(i=>$$(i,t,n)):ye(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:Q("Unsupported parameter object: "+fe(e)):e}const Da="top",wd="bottom",V$="label",Ts="value",pv="guide-label",j$="guide-title",Ax="gradient",U$="discrete",z$=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],gv={name:1,style:1,interactive:1},bt={value:0},As={value:1},Nx="group",G$="rule",xh="text";function mv(e){return e.type=Nx,e.interactive=e.interactive||!1,e}function co(e,t){const n=(i,r)=>wa(e[i],wa(t[i],r));return n.isVertical=i=>"vertical"===wa(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>wa(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>wa(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>wa(e.columns,wa(t.columns,+n.isVertical(!0))),n}function Xoe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Mx(e,t,n){return`item.anchor === 'start' ? ${e} : item.anchor === 'end' ? ${t} : ${n}`}const W$=Mx(fe("left"),fe("right"),fe("center"));function Qoe(e,t){return t?e?ye(e)?Object.assign({},e,{offset:Qoe(e.offset,t)}):{value:e,offset:t}:t:e}function qo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Rm(e.encode,t,gv)):e.interactive=!1,e}function pze(e,t,n,i){const r=co(e,n),o=r.isVertical(),s=r.gradientThickness(),a=r.gradientLength();let l,u,c,d,f;o?(u=[0,1],c=[0,0],d=s,f=a):(u=[0,0],c=[1,0],d=a,f=s);const h={enter:l={opacity:bt,x:bt,y:bt,width:Si(d),height:Si(f)},update:it({},l,{opacity:As,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:bt}};return ji(h,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),qo({type:"rect",role:"legend-gradient",encode:h},i)}function gze(e,t,n,i,r){const o=co(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,d,f,h="";s?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:bt,fill:{scale:t,field:Ts}};p[u]={signal:h+"datum.perc",mult:l},p[c]=bt,p[d]={signal:h+"datum.perc2",mult:l},p[f]=Si(a);const g={enter:p,update:it({},p,{opacity:As}),exit:{opacity:bt}};return ji(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),qo({type:"rect",role:"legend-band",key:Ts,from:r,encode:g},i)}const _ze=`datum.perc<=0?"${wd}":datum.perc>=1?"top":"middle"`;function Joe(e,t,n,i){const r=co(e,t),o=r.isVertical(),s=Si(r.gradientThickness()),a=r.gradientLength();let u,c,d,f,l=r("labelOverlap"),h="";const p={enter:u={opacity:bt},update:c={opacity:As,text:{field:V$}},exit:{opacity:bt}};return ji(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:wa(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:_ze},d="y",f="x",h="1-"):(u.align=c.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum.perc",mult:a},u[f]=c[f]=s,s.offset=wa(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum.index"}:void 0,qo({type:xh,role:Toe,style:pv,key:Ts,from:i,encode:p,overlap:l},n)}function yze(e,t,n,i,r){const o=co(e,t),s=n.entries,a=!(!s||!s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},f=`(${r}) ? datum.offset : datum.size`,h=u?Si(u):{field:"size"},p="datum.index",g=`max(1, ${r})`;let m,_,y,v,b;h.mult=.5,m={enter:_={opacity:bt,x:{signal:f,mult:.5,offset:c},y:h},update:y={opacity:As,x:_.x,y:_.y},exit:{opacity:bt}};let w=null,D=null;e.fill||(w=t.symbolBaseFillColor,D=t.symbolBaseStrokeColor),ji(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",D),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),z$.forEach(k=>{e[k]&&(y[k]=_[k]={scale:e[k],field:Ts})});const E=qo({type:"symbol",role:"legend-symbol",key:Ts,from:d,clip:!!u||void 0,encode:m},n.symbols),C=Si(c);C.offset=o("labelOffset"),m={enter:_={opacity:bt,x:{signal:f,offset:C},y:h},update:y={opacity:As,text:{field:V$},x:_.x,y:_.y},exit:{opacity:bt}},ji(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const N=qo({type:xh,role:Toe,style:pv,key:Ts,from:d,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:bt,height:u?Si(u):bt,opacity:bt},exit:{opacity:bt},update:y={opacity:As,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,y.row.signal=`${p}%${v}`,y.column.signal=`floor(${p} / ${v})`,b={field:["row",p]}):(y.row.signal=`floor(${p} / ${g})`,y.column.signal=`${p} % ${g}`,b={field:p}),y.column.signal=`(${r})?${y.column.signal}:${p}`,mv({role:k$,from:i={facet:{data:i,name:"value",groupby:"index"}},encode:Rm(m,s,gv),marks:[E,N],name:l,interactive:a,sort:b})}const q$='item.orient === "left"',Y$='item.orient === "right"',kx=`(${q$} || ${Y$})`,bze=`datum.vgrad && ${kx}`,wze=Mx('"top"','"bottom"','"middle"'),Dze=`datum.vgrad && ${Y$} ? (${Mx('"right"','"left"','"center"')}) : (${kx} && !(datum.vgrad && ${q$})) ? "left" : ${W$}`,Cze=`item._anchor || (${kx} ? "middle" : "start")`,Sze=`${bze} ? (${q$} ? -90 : 90) : 0`,xze=`${kx} ? (datum.vgrad ? (${Y$} ? "bottom" : "top") : ${wze}) : "top"`;function Aze(e,t){let n;return ye(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Zoe(e.path)+")":e.sphere&&(n="geoShape("+Zoe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Zoe(e){return ye(e)&&e.signal?e.signal:fe(e)}function ese(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Nx?k$:t||N$}function Nze(e){return{marktype:e.type,name:e.name||void 0,role:e.role||ese(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Mze(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function K$(e,t){const n=QK(e.type);n||Q("Unrecognized transform type: "+fe(e.type));const i=Ex(n.type.toLowerCase(),null,tse(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function tse(e,t,n){const i={},r=e.params.length;for(let o=0;o<r;++o){const s=e.params[o];i[s.name]=kze(s,t,n)}return i}function kze(e,t,n){const i=e.type,r=t[e.name];return"index"===i?function Ize(e,t,n){return be(t.from)||Q('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==r?"param"===i?function Oze(e,t,n){const i=t[e.name];return e.array?(J(i)||Q("Expected an array of sub-parameters. Instead: "+fe(i)),i.map(r=>ise(e,r,n))):ise(e,i,n)}(e,t,n):"projection"===i?n.projectionRef(t[e.name]):e.array&&!gi(r)?r.map(o=>nse(e,o,n)):nse(e,r,n):void(e.required&&Q("Missing required "+fe(t.type)+" parameter: "+fe(e.name)))}function nse(e,t,n){const i=e.type;if(gi(t))return rse(i)?Q("Expression references can not be signals."):X$(i)?n.fieldRef(t):ose(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||X$(i);return r&&Rze(t)?n.exprRef(t.expr,t.as):r&&Fze(t)?fv(t.field,t.as):rse(i)?Sl(t,n):Pze(i)?Pe(n.getData(t).values):X$(i)?fv(t):ose(i)?n.compareRef(t):t}}function ise(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const a in r.key)if(r.key[a]!==t[a]){r=null;break}if(r)break}r||Q("Unsupported parameter: "+fe(t));const o=it(tse(r,t,n),r.key);return Pe(n.add(PHe(o)))}const Rze=e=>e&&e.expr,Fze=e=>e&&e.field,Pze=e=>"data"===e,rse=e=>"expr"===e,X$=e=>"field"===e,ose=e=>"compare"===e;function Ix(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Pe(t.getData(e.data).output)}function Th(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}function sse(e){return be(e)?e:null}function ase(e,t,n){const i=Cx(n.op,n.field);let r;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function _v(e,t,n,i,r,o,s){const a=t[n]||(t[n]={}),l=function fHe(e){return ye(e)?("descending"===e.order?"-":"+")+Cx(e.op,e.field):""}(o);let c,d,u=sse(r);if(null!=u&&(e=t.scope,u+=l?"|"+l:"",c=a[u]),!c){const f=o?{field:R$,pulse:t.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:Pe(t.output)};l&&(f.sort=e.sortRef(o)),d=e.add(Ex(i,void 0,f)),s&&(t.index[r]=d),c=Pe(d),null!=u&&(a[u]=c)}return c}function lse(e,t,n){const i=e.remove,r=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(Dx()),c=Sl("if("+e.trigger+',modify("'+n+'",'+[r,i,o,s,a].map(d=>d??"null").join(",")+"),0)",t);l.update=c.$expr,l.params=c.$params}function Ox(e,t){const n=ese(e),i=e.type===Nx,r=e.from&&e.from.facet,o=e.overlap;let a,l,u,c,d,f,h,s=e.layout||n===k$||n===M$;const p=n===N$||s||r,g=function Lze(e,t,n){let i,r,o,s,a;return e?(i=e.facet)&&(t||Q("Only group marks can be faceted."),null!=i.field?s=a=Ix(i,n):(e.data?a=Pe(n.getData(e.data).aggregate):(o=K$(it({type:"aggregate",groupby:ve(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=Ix(i,n),s=a=Pe(n.add(o))),r=n.keyRef(i.groupby,!0))):s=Pe(n.add(Ea(null,[{}]))),s||(s=Ix(e,n)),{key:r,pulse:s,parent:a}}(e.from,i,t);l=t.add(SHe({key:g.key||(e.key?fv(e.key):void 0),pulse:g.pulse,clean:!i}));const m=Pe(l);l=u=t.add(Ea({pulse:m})),l=t.add(IHe({markdef:Nze(e),interactive:Mze(e.interactive,t),clip:Aze(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Pe(l)}));const _=Pe(l);l=c=t.add(Boe(koe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(D=>{const E=K$(D,t),C=E.metadata;(C.generates||C.changes)&&Q("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),E.params.pulse=Pe(l),t.add(l=E)}),e.sort&&(l=t.add(jHe({sort:t.compareRef(e.sort),pulse:Pe(l)})));const y=Pe(l);(r||s)&&(s=t.add(Uoe({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:y})),f=Pe(s));const v=t.add(Loe({mark:_,pulse:f||y}));h=Pe(v),i&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(y,f||h,m),r?function $ze(e,t,n){const i=e.from.facet,r=i.name,o=Ix(i,t);let s;i.name||Q("Facet must have a name: "+fe(i)),i.data||Q("Facet must reference a data set: "+fe(i)),i.field?s=t.add(Voe({field:t.fieldRef(i.field),pulse:o})):i.groupby?s=t.add(THe({key:t.keyRef(i.groupby),group:Pe(t.proxy(n.parent)),pulse:o})):Q("Facet must specify groupby or field: "+fe(i));const a=t.fork(),l=a.add(Ea()),u=a.add(Sh({pulse:Pe(l)}));a.addData(r,new Th(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,t,g):p?function Bze(e,t,n){const i=t.add(Voe({pulse:n.pulse})),r=t.fork();r.add(Sh()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(v))),o&&(h=function Vze(e,t,n){const i=e.method,r=e.bound,o=e.separation,s={separation:gi(o)?n.signalRef(o.signal):o,method:gi(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const a=r.tolerance;s.boundTolerance=gi(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Pe(n.add(FHe(s)))}(o,h,t));const b=t.add(joe({pulse:h})),w=t.add(Sh({pulse:Pe(b)},void 0,t.parent()));null!=e.name&&(d=e.name,t.addData(d,new Th(t,u,b,w)),e.on&&e.on.forEach(D=>{(D.insert||D.remove||D.toggle)&&Q("Marks only support modify triggers."),lse(D,t,d)}))}function zze(e,t,n){const i={enter:{},update:{}};return ji(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function use(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Xoe(e,n[0].encode)}function Xze(e,t){const n={enter:{},update:{}};return ji(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:W$},angle:{signal:'item.orient==="left"?-90:item.orient==="right"?90:0'},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Rm(n,t,gv)}function Ah(e){const t=Ea({},e);return t.metadata={source:!0},t}function cse(e,t){return kHe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}Th.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let o=t[0],s=null,a=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Pe(t[a-1]),e.add(t[a]),"aggregate"===t[a].type&&(s=t[a]);return new Th(e,o,r,i,s)},Th.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),o=sse(t);let s,a,l;return null!=o&&(e=i.scope,s=r[o]),s?n&&n.field&&ase(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Pe(i.output)},n&&n.field&&ase(e,l,n),a=e.add(Poe(l)),s=e.add(Ea({pulse:Pe(a)})),s={agg:a,ref:Pe(s)},null!=o&&(r[o]=s)),s.ref},tuplesRef(){return Pe(this.values)},extentRef(e,t){return _v(e,this,"extent","extent",t,!1)},domainRef(e,t){return _v(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return _v(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return _v(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return _v(e,this,"indata","tupleindex",t,!0,!0)}};const dse=e=>e===wd||e===Da,Rx=(e,t,n)=>gi(e)?rGe(e.signal,t,n):"left"===e||e===Da?t:n,xi=(e,t,n)=>gi(e)?nGe(e.signal,t,n):dse(e)?t:n,Ca=(e,t,n)=>gi(e)?iGe(e.signal,t,n):dse(e)?n:t,fse=(e,t,n)=>gi(e)?oGe(e.signal,t,n):e===Da?{value:t}:{value:n},nGe=(e,t,n)=>hse(`${e} === 'top' || ${e} === '${wd}'`,t,n),iGe=(e,t,n)=>hse(`${e} !== 'top' && ${e} !== '${wd}'`,t,n),rGe=(e,t,n)=>Q$(`${e} === 'left' || ${e} === 'top'`,t,n),oGe=(e,t,n)=>Q$(`${e} === 'top'`,t,n),hse=(e,t,n)=>(t=null!=t?Si(t):t,n=null!=n?Si(n):n,pse(t)&&pse(n)?{signal:`${e} ? (${t=t?t.signal||fe(t.value):null}) : (${n=n?n.signal||fe(n.value):null})`}:[it({test:e},t)].concat(n||[])),pse=e=>null==e||1===Object.keys(e).length,Q$=(e,t,n)=>({signal:`${e} ? (${Bm(t)}) : (${Bm(n)})`}),aGe=(e,t,n,i,r)=>({signal:(null!=i?`${e} === 'left' ? (${Bm(i)}) : `:"")+(null!=n?`${e} === '${wd}' ? (${Bm(n)}) : `:"")+(null!=r?`${e} === 'right' ? (${Bm(r)}) : `:"")+(null!=t?`${e} === 'top' ? (${Bm(t)}) : `:"")+"(null)"}),Bm=e=>gi(e)?e.signal:null==e?null:fe(e),Vm=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function jm(e,t,n,i){let r;if(t&&Ce(t,e))return t[e];if(Ce(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[j$][r]}if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[pv][r]}return null}function gse(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function mse(e,t){return{scale:e.scale,range:t}}function J$(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function pGe(e,t,n,i,r,o){const s=co(e,t),a=e.orient,l=e.scale,u=Rx(a,-1,1),c=Ch(s("labelFlush")),d=Ch(s("labelFlushOffset")),f=s("labelAlign"),h=s("labelBaseline");let g,p=0===c||!!c;const m=Si(r);m.mult=u,m.offset=Si(s("labelPadding")||0),m.offset.mult=u;const _={scale:l,field:Ts,band:.5,offset:Qoe(o.offset,s("labelOffset"))},y=xi(a,p?J$(l,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>gi(e)?((e,t,n)=>Q$(`${e} === 'right'`,t,n))(e.signal,t,n):"right"===e?{value:t}:{value:n})(a,"left","right")),v=xi(a,fse(a,"bottom","top"),p?J$(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=J$(l,c,`-(${d})`,d,0);p=p&&d;const w={opacity:bt,x:xi(a,_,m),y:Ca(a,_,m)},D={enter:w,update:g={opacity:As,text:{field:V$},x:w.x,y:w.y,align:y,baseline:v},exit:{opacity:bt,x:w.x,y:w.y}};ji(D,{dx:!f&&p?xi(a,b):null,dy:!h&&p?Ca(a,b):null}),ji(D,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:f,baseline:h});const E=s("labelBound");let C=s("labelOverlap");return C=C||E?{separation:s("labelSeparation"),method:C,order:"datum.index",bound:E?{scale:l,orient:a,tolerance:E}:null}:void 0,g.align!==y&&(g.align=Vm(g.align,y)),g.baseline!==v&&(g.baseline=Vm(g.baseline,v)),qo({type:xh,role:"axis-label",style:pv,key:Ts,from:i,encode:D,overlap:C},n)}function _Ge(e,t){const n=function uGe(e,t){var a,l,u,n=t.config,i=n.style,r=n.axis,o="band"===t.scaleType(e.scale)&&n.axisBand,s=e.orient;if(gi(s)){const d=gse([n.axisX,n.axisY]),f=gse([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);for(u of(a={},d))a[u]=xi(s,jm(u,n.axisX,r,i),jm(u,n.axisY,r,i));for(u of(l={},f))l[u]=aGe(s.signal,jm(u,n.axisTop,r,i),jm(u,n.axisBottom,r,i),jm(u,n.axisLeft,r,i),jm(u,n.axisRight,r,i))}else a=s===Da||s===wd?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?it({},r,a,l,o):r}(e,t),i=e.encode||{},r=i.axis||{},o=r.name||void 0,s=r.interactive,a=r.style,l=co(e,n),u=function hze(e){const t=e("tickBand");let i,r,n=e("tickOffset");return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},ye(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):"extent"===t?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=e.title},d=Pe(t.add(Ea({},[c]))),f=Pe(t.add(CHe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(function dGe(e,t,n,i,r){const o=co(e,t),s=e.orient,a=e.gridScale,l=Rx(s,1,-1),u=function fGe(e,t){if(1!==t)if(ye(e)){let n=e=it({},e);for(;null!=n.mult;){if(!ye(n.mult))return n.mult=gi(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n=n.mult=it({},n.mult)}n.mult=t}else e=gi(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);return e}(e.offset,l);let c,d,f;const h={enter:c={opacity:bt},update:f={opacity:As},exit:d={opacity:bt}};ji(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Ts,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},g=xi(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},_=a?{scale:a,range:1,mult:l,offset:u}:it(g,{mult:l,offset:u});return c.x=f.x=xi(s,p,m),c.y=f.y=Ca(s,p,m),c.x2=f.x2=Ca(s,_),c.y2=f.y2=xi(s,_),d.x=xi(s,p),d.y=Ca(s,p),qo({type:G$,role:"axis-grid",key:Ts,from:i,encode:h},n)}(e,n,i.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(function hGe(e,t,n,i,r,o){const s=co(e,t),a=e.orient,l=Rx(a,-1,1);let u,c,d;const f={enter:u={opacity:bt},update:d={opacity:As},exit:c={opacity:bt}};ji(f,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Si(r);h.mult=l;const p={scale:e.scale,field:Ts,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return d.y=u.y=xi(a,bt,p),d.y2=u.y2=xi(a,h),c.x=xi(a,p),d.x=u.x=Ca(a,bt,p),d.x2=u.x2=Ca(a,h),c.y=Ca(a,p),qo({type:G$,role:"axis-tick",key:Ts,from:i,encode:f},n)}(e,n,i.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(pGe(e,n,i.labels,f,p,u))),c.domain&&h.push(function cGe(e,t,n,i){const r=co(e,t),o=e.orient;let s,a;const l={enter:s={opacity:bt},update:a={opacity:As},exit:{opacity:bt}};ji(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=mse(e,0),c=mse(e,1);return s.x=a.x=xi(o,u,bt),s.x2=a.x2=xi(o,c),s.y=a.y=Ca(o,u,bt),s.y2=a.y2=Ca(o,c),qo({type:G$,role:"axis-domain",from:i,encode:l},n)}(e,n,i.domain,d)),c.title&&h.push(function gGe(e,t,n,i){const r=co(e,t),o=e.orient,s=Rx(o,-1,1);let a,l;const u={enter:a={opacity:bt,anchor:Si(r("titleAnchor",null)),align:{signal:W$}},update:l=it({},a,{opacity:As,text:Si(e.title)}),exit:{opacity:bt}},c={signal:`lerp(range("${e.scale}"), ${Mx(0,1,.5)})`};return l.x=xi(o,c),l.y=Ca(o,c),a.angle=xi(o,bt,((e,t)=>gi(e)?{signal:`(${e.signal}) * 90`}:{value:90*e})(s)),a.baseline=xi(o,fse(o,wd,Da),{value:wd}),l.angle=a.angle,l.baseline=a.baseline,ji(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),function mGe(e,t,n,i){const r=(a,l)=>null!=a?(n.update[l]=Vm(Si(a),n.update[l]),!1):!Fm(l,i),o=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===o?Si(s):xi(t,Si(s),Si(o))}(r,o,u,n),u.update.align=Vm(u.update.align,a.align),u.update.angle=Vm(u.update.angle,a.angle),u.update.baseline=Vm(u.update.baseline,a.baseline),qo({type:xh,role:"axis-title",style:j$,from:i,encode:u},n)}(e,n,i.title,d)),Ox(mv({role:"axis",from:d,encode:Rm(yGe(l,e),r,gv),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function yGe(e,t){const n={enter:{},update:{}};return ji(n,{orient:e("orient"),offset:e("offset")||0,position:wa(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function _se(e,t,n){const i=ve(e.signals),r=ve(e.scales);return n||i.forEach(o=>Ooe(o,t)),ve(e.projections).forEach(o=>function nze(e,t){const n=t.config.projection||{},i={};for(const r in e)"name"!==r&&(i[r]=$$(e[r],r,t));for(const r in n)null==i[r]&&(i[r]=$$(n[r],r,t));t.addProjection(e.name,i)}(o,t)),r.forEach(o=>function zHe(e,t){const n=e.type||"linear";$J(n)||Q("Unrecognized scale type: "+fe(n)),t.addScale(e.name,{type:n,domain:void 0})}(o,t)),ve(e.data).forEach(o=>function Zze(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(K$(i,t))}),e.on&&e.on.forEach(i=>{lse(i,t,e.name)}),t.addDataPipeline(e.name,function eGe(e,t,n){const i=[];let a,l,u,c,d,r=null,o=!1,s=!1;for(e.values?gi(e.values)||Sx(e.format)?(i.push(cse(t,e)),i.push(r=Ah())):i.push(r=Ah({$ingest:e.values,$format:e.format})):e.url?Sx(e.url)||Sx(e.format)?(i.push(cse(t,e)),i.push(r=Ah())):i.push(r=Ah({$request:e.url,$format:e.format})):e.source&&(r=a=ve(e.source).map(f=>Pe(t.getData(f).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!r&&!d.source&&i.push(r=Ah()),i.push(c),d.generates&&(s=!0),d.modifies&&!s&&(o=!0),d.source?r=c:d.changes&&(r=null);return a&&(u=a.length-1,i[0]=BHe({derive:o,pulse:u?a:a[0]}),(o||u)&&i.splice(1,0,Ah())),r||i.push(Ah()),i.push(Sh({})),i}(e,t,n))}(o,t)),r.forEach(o=>GHe(o,t)),(n||i).forEach(o=>function DHe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?Q("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Sl(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>function bHe(e,t,n){const i=e.encode,r={target:n};let o=e.events,s=e.update,a=[];o||Q("Signal update missing events specification."),be(o)&&(o=bd(o,t.isSubscope()?F$:P$)),o=ve(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[EHe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),null!=i&&(s&&Q("Signal encode and update are mutually exclusive."),s="encode(item(),"+fe(i)+")"),r.update=be(s)?Sl(s,t):null!=s.expr?Sl(s.expr,t):null!=s.value?s.value:null!=s.signal?{$expr:vHe,$params:{$value:t.signalRef(s.signal)}}:Q("Invalid signal update specification."),e.force&&(r.options={force:!0}),a.forEach(l=>t.addUpdate(it(function wHe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):hv(e,t)}}(l,t),r)))}(r,t,n.id))}(o,t)),ve(e.axes).forEach(o=>_Ge(o,t)),ve(e.marks).forEach(o=>Ox(o,t)),ve(e.legends).forEach(o=>function jze(e,t){const n=t.config.legend,i=e.encode||{},r=co(e,n),o=i.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let d,f,h,c=0;z$.forEach(v=>e[v]?(u[v]=e[v],c=c||e[v]):0),c||Q("Missing valid scale for legend.");const p=function Uze(e,t){let n=e.type||"symbol";return!e.type&&1===function Hze(e){return z$.reduce((t,n)=>t+(e[n]?1:0),0)}(e)&&(e.fill||e.stroke)&&(n=xF(t)?Ax:TF(t)?U$:"symbol"),n!==Ax?n:TF(t)?U$:Ax}(e,t.scaleType(c)),g={title:null!=e.title,scales:u,type:p,vgrad:"symbol"!==p&&r.isVertical()},m=Pe(t.add(Ea(null,[g]))),y=Pe(t.add(MHe(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===Ax?(h=[pze(e,c,n,i.gradient),Joe(e,n,i.labels,y)],f.count=f.count||t.signalRef(`max(2,2*floor((${Ch(r.gradientLength())})/100))`)):p===U$?h=[gze(e,c,n,i.gradient,y),Joe(e,n,i.labels,y)]:(d=function vze(e,t){const n=co(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),h=[yze(e,n,i,y,Ch(d.columns))],f.size=function Gze(e,t,n){const i=Ch(use("size",e,n)),r=Ch(use("strokeWidth",e,n)),o=Ch(function Wze(e,t,n){return Xoe("fontSize",e)||function fze(e,t,n){const i=t.config.style[n];return i&&i[e]}("fontSize",t,n)}(n[1].encode,t,pv));return Sl(`max(ceil(sqrt(${i})+${r}),${o})`,t)}(e,t,h[0].marks)),h=[mv({role:"legend-entry",from:m,encode:{enter:{x:{value:0},y:{value:0}}},marks:h,layout:d,interactive:a})],g.title&&h.push(function Tze(e,t,n,i){const r=co(e,t),o={enter:{opacity:bt},update:{opacity:As,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:bt}};return ji(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:Cze},angle:{signal:Sze},align:{signal:Dze},baseline:{signal:xze},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),qo({type:xh,role:"legend-title",style:j$,from:i,encode:o},n)}(e,n,i.title,m)),Ox(mv({role:"legend",from:m,encode:Rm(zze(r,e,n),o,gv),marks:h,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:a,style:l}),t)}(o,t)),e.title&&function Yze(e,t){const n=co(e=be(e)?{text:e}:e,t.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,s=r.interactive,a=r.style,l=[],c=Pe(t.add(Ea(null,[{}])));return l.push(function Qze(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ji(s,{text:e.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),qo({type:xh,role:"title-text",style:"group-title",from:i,encode:s},n)}(e,n,function Kze(e){const t=e.encode;return t&&t.title||it({name:e.name,interactive:e.interactive,style:e.style},t)}(e),c)),e.subtitle&&l.push(function Jze(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ji(s,{text:e.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),qo({type:xh,role:"title-subtitle",style:"group-subtitle",from:i,encode:s},n)}(e,n,i.subtitle,c)),Ox(mv({role:"title",from:c,encode:Xze(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}(e.title,t),t.parseLambdas(),t}function yv(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function yse(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function vse(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function Z$(e){return(J(e)?EGe:DGe)(e)}function EGe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(ye(r)?r.signal||Z$(r):fe(r))}return n+"]"}function DGe(e){let i,r,t="{",n=0;for(i in e)r=e[i],t+=(++n>1?",":"")+fe(i)+":"+(ye(r)?r.signal||Z$(r):fe(r));return t+"}"}function SGe(e,t,n){return ye(e)||Q("Input Vega specification must be an object."),function bGe(e,t){const n=t.config,i=Pe(t.root=t.add(Dx())),r=function wGe(e,t){const n=s=>wa(e[s],t[s]),i=[yv("background",n("background")),yv("autosize",FUe(n("autosize"))),yv("padding",LUe(n("padding"))),yv("width",n("width")||0),yv("height",n("height")||0)],r=i.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return ve(e.signals).forEach(s=>{Ce(r,s.name)?s=it(r[s.name],s):i.push(s),o[s.name]=s}),ve(t.signals).forEach(s=>{!Ce(o,s.name)&&!Ce(r,s.name)&&i.push(s)}),i}(e,n);r.forEach(u=>Ooe(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ea()),s=t.add(Boe(koe((e=>Rm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),Nx,M$,e.style,t,{pulse:Pe(o)}))),a=t.add(Uoe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Pe(s)}));t.operators.pop(),t.pushState(Pe(s),Pe(a),null),_se(e,t,r),t.operators.push(a);let l=t.add(Loe({mark:i,pulse:Pe(a)}));return l=t.add(joe({pulse:Pe(l)})),l=t.add(Sh({pulse:Pe(l)})),t.addData("root",new Th(t,o,o,l)),t}(e,new yse(t=kg(function CGe(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}yse.prototype=vse.prototype={parse(e){return _se(e,this)},fork(){return new vse(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof O$?Pe(e):e;return this.add($He({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,o){let s,a;i&&(s=i.data||(i.data={}),a=s[r]||(s[r]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Pe(this.add(Sh({pulse:e})))),this._parent.push(t),this._lookup.push(n?Pe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return mt(this._parent)},encode(){return mt(this._encode)},lookup(){return mt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(be(e))return fv(e,t);e.signal||Q("Unsupported field reference: "+fe(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Pe(this.add(AHe(r)))}return i},compareRef(e){let t=!1;const n=o=>gi(o)?(t=!0,this.signalRef(o.signal)):function hHe(e){return e&&e.expr}(o)?(t=!0,this.exprRef(o.expr)):o,i=ve(e.field).map(n),r=ve(e.order).map(n);return t?Pe(this.add($oe({fields:i,orders:r}))):Roe(i,r)},keyRef(e,t){let n=!1;const r=this.signals;return e=ve(e).map(o=>gi(o)?(n=!0,Pe(r[o.signal])):o),n?Pe(this.add(NHe({fields:e,flat:t}))):function uHe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef(e){if(!e)return e;const t=Cx(e.op,e.field),n=e.order||"ascending";return n.signal?Pe(this.add($oe({fields:t,orders:this.signalRef(n.signal)}))):Roe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Ce(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Q("Duplicate signal name: "+fe(e));const n=t instanceof O$?t:this.add(Dx(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Q("Unrecognized signal name: "+fe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Pe(this.signals[e]):(Ce(this.lambdas,e)||(this.lambdas[e]=this.add(Dx(null))),Pe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Sl(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&ye(e)?this.signalRef(e.signal||Z$(e)):e},exprRef(e,t){const n={expr:Sl(e,this)};return t&&(n.expr.$name=t),Pe(this.add(xHe(n)))},addBinding(e,t){this.bindings||Q("Nested signals do not support binding: "+fe(e)),this.bindings.push(it({signal:e},t))},addScaleProj(e,t){Ce(this.scales,e)&&Q("Duplicate scale or projection name: "+fe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,VHe(t))},addProjection(e,t){this.addScaleProj(e,LHe(t))},getScale(e){return this.scales[e]||Q("Unrecognized scale name: "+fe(e)),this.scales[e]},scaleRef(e){return Pe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ce(this.data,e)&&Q("Duplicate data set name: "+fe(e)),this.data[e]=t},getData(e){return this.data[e]||Q("Undefined data set name: "+fe(e)),this.data[e]},addDataPipeline(e,t){return Ce(this.data,e)&&Q("Duplicate data set name: "+fe(e)),this.addData(e,Th.fromEntries(this,t))}};var xGe="5.30.0";it(Yg,Kd,ic,mp,rc,_p,Xd,ki,R_,Qd,yo,zl);var AGe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},NGe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},MGe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const kGe=Array.prototype.slice,Nh=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,kGe.call(t,1))};var OGe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,i,r,o,s)=>new Date(e,t||0,n??1,i||0,r||0,o||0,s||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Nh("join",arguments)},indexof:function(){return Nh("indexOf",arguments)},lastindexof:function(){return Nh("lastIndexOf",arguments)},slice:function(){return Nh("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Nh("substring",arguments,String)},split:function(){return Nh("split",arguments,String)},replace:function(){return Nh("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const RGe=["view","item","group","xy","x","y"],e5=new Set([Function,eval,setTimeout,setInterval]);"function"==typeof setImmediate&&e5.add(setImmediate);const FGe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:AGe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),!e5.has(i[r]))return i[r];console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`)},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),"if"===i?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||OGe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>NGe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>MGe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,e5.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function vv(e,t,n,i,r,o){const s=a=>FGe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=o,RGe.forEach(a=>s.fn[a]=function(){return r.vega[a](...arguments)}),s(e)}var PGe={operator(e,t){const n=t.ast,i=e.functions;return r=>vv(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,o)=>vv(n,i,o,r)},event(e,t){const n=t.ast,i=e.functions;return r=>vv(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,o)=>vv(n,i,r,o.item&&o.item.datum,o)},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o="group"===n||"image"===n||"rect"===n;return(s,a)=>{const l=s.datum;let c,u=0;for(const d in i)c=vv(i[d].ast,r,a,l,void 0,s),s[d]!==c&&(s[d]=c,u=1);return"rule"!==n&&function TGe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(s,i,o),u}}};function t5(e){return le(e,"or")}function n5(e){return le(e,"and")}function i5(e){return le(e,"not")}function Fx(e,t){if(i5(e))Fx(e.not,t);else if(n5(e))for(const n of e.and)Fx(n,t);else if(t5(e))for(const n of e.or)Fx(n,t);else t(e)}function Um(e,t){return i5(e)?{not:Um(e.not,t)}:n5(e)?{and:e.and.map(n=>Um(n,t))}:t5(e)?{or:e.or.map(n=>Um(n,t))}:t(e)}const Ke=structuredClone;function bse(e){throw new Error(e)}function Hm(e,t){const n={};for(const i of t)Ce(e,i)&&(n[i]=e[i]);return n}function fo(e,t){const n={...e};for(const i of t)delete n[i];return n}function pt(e){if(Ct(e))return e;const t=be(e)?e:Gt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return n}function r5(e){return!1===e||null===e}function ft(e,t){return e.includes(t)}function zm(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function o5(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function wse(e,...t){for(const n of t)$Ge(e,n??{});return e}function $Ge(e,t){for(const n of ie(t))Ig(e,n,t[n],!0)}function xl(e,t){const n=[],i={};let r;for(const o of e)r=t(o),!(r in i)&&(i[r]=1,n.push(o));return n}function BGe(e,t){const n=ie(e),i=ie(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Ese(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function s5(e,t){for(const n of e)if(t.has(n))return!0;return!1}function a5(e){const t=new Set;for(const n of e){const r=el(n).map((s,a)=>0===a?s:`[${s}]`),o=r.map((s,a)=>r.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function l5(e,t){return void 0===e||void 0===t||s5(a5(e),a5(t))}function zt(e){return 0===ie(e).length}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Gt(e)).join(",")})`};const ie=Object.keys,Ui=Object.values,Ed=Object.entries;function bv(e){return!0===e||!1===e}function yn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function wv(e,t){return i5(e)?`!(${wv(e.not,t)})`:n5(e)?`(${e.and.map(n=>wv(n,t)).join(") && (")})`:t5(e)?`(${e.or.map(n=>wv(n,t)).join(") || (")})`:t(e)}function Px(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&Px(e[n],t)&&delete e[n],zt(e)}function Ev(e){return e.charAt(0).toUpperCase()+e.substr(1)}function u5(e,t="datum"){const n=el(e),i=[];for(let r=1;r<=n.length;r++){const o=`[${n.slice(0,r).map(fe).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function Dse(e,t="datum"){return`${t}[${fe(el(e).join("."))}]`}function VGe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ns(e){return`${el(e).map(VGe).join("\\.")}`}function Mh(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Gm(e){return`${el(e).join(".")}`}function Wm(e){return e?el(e).length:0}function Hn(...e){return e.find(t=>void 0!==t)}let Cse=42;function Sse(e){const t=++Cse;return e?String(e)+t:t}function jGe(){Cse=42}function xse(e){return Tse(e)?e:`__${e}`}function Tse(e){return e.startsWith("__")}function Dv(e){if(void 0!==e)return(e%360+360)%360}function Lx(e){return!!Ct(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const Ase=Object.getPrototypeOf(structuredClone({}));function Yo(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;0!=i--;)if(!Yo(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Yo(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;0!=i--;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Ase.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Ase.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;0!=i--;){const o=r[i];if(!Yo(e[o],t[o]))return!1}return!0}return e!=e&&t!=t}function Gt(e){const t=[];return function n(i){if(i&&i.toJSON&&"function"==typeof i.toJSON&&(i=i.toJSON()),void 0===i)return;if("number"==typeof i)return isFinite(i)?""+i:"null";if("object"!=typeof i)return JSON.stringify(i);let r,o;if(Array.isArray(i)){for(o="[",r=0;r<i.length;r++)r&&(o+=","),o+=n(i[r])||"null";return o+"]"}if(null===i)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,a=Object.keys(i).sort();for(o="",r=0;r<a.length;r++){const l=a[r],u=n(i[l]);!u||(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function le(e,t){return ye(e)&&Ce(e,t)&&void 0!==e[t]}const Pu="row",Lu="column",$x="facet",vn="x",Ti="y",Sa="x2",Tl="y2",Dd="xOffset",qm="yOffset",xa="radius",$u="radius2",Ms="theta",Bu="theta2",Ta="latitude",Aa="longitude",Na="latitude2",ks="longitude2",ho="color",Al="fill",Nl="stroke",po="shape",Vu="size",kh="angle",ju="opacity",Cd="fillOpacity",Sd="strokeOpacity",xd="strokeWidth",Td="strokeDash",Cv="text",Ym="order",Sv="detail",Bx="key",Ih="tooltip",Vx="href",jx="url",Ux="description",Nse={theta:1,theta2:1,radius:1,radius2:1};function Mse(e){return Ce(Nse,e)}const c5={longitude:1,longitude2:1,latitude:1,latitude2:1};function kse(e){switch(e){case Ta:return"y";case Na:return"y2";case Aa:return"x";case ks:return"x2"}}function Ise(e){return Ce(c5,e)}const HGe=ie(c5),d5={x:1,y:1,x2:1,y2:1,...Nse,...c5,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Km(e){return e===ho||e===Al||e===Nl}const Ose={row:1,column:1,facet:1},Is=ie(Ose),f5={...d5,...Ose},zGe=ie(f5),{order:T1t,detail:A1t,tooltip:N1t,...Rse}=f5,{row:M1t,column:k1t,facet:I1t,...Fse}=Rse;function GGe(e){return Ce(Fse,e)}function Pse(e){return Ce(f5,e)}ie(Rse),ie(Fse);const WGe=[Sa,Tl,Na,ks,Bu,$u];function Lse(e){return Oh(e)!==e}function Oh(e){switch(e){case Sa:return vn;case Tl:return Ti;case Na:return Ta;case ks:return Aa;case Bu:return Ms;case $u:return xa}return e}function Ad(e){if(Mse(e))switch(e){case Ms:return"startAngle";case Bu:return"endAngle";case xa:return"outerRadius";case $u:return"innerRadius"}return e}function Ml(e){switch(e){case vn:return Sa;case Ti:return Tl;case Ta:return Na;case Aa:return ks;case Ms:return Bu;case xa:return $u}}function go(e){switch(e){case vn:case Sa:return"width";case Ti:case Tl:return"height"}}function $se(e){switch(e){case vn:return"xOffset";case Ti:return"yOffset";case Sa:return"x2Offset";case Tl:return"y2Offset";case Ms:return"thetaOffset";case xa:return"radiusOffset";case Bu:return"theta2Offset";case $u:return"radius2Offset"}}function h5(e){switch(e){case vn:return"xOffset";case Ti:return"yOffset"}}function qGe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const YGe=ie(d5),{x:F1t,y:P1t,x2:L1t,y2:$1t,xOffset:B1t,yOffset:V1t,latitude:j1t,longitude:U1t,latitude2:H1t,longitude2:z1t,theta:G1t,theta2:W1t,radius:q1t,radius2:Y1t,...p5}=d5,KGe=ie(p5),g5={x:1,y:1},Uu=ie(g5);function zn(e){return Ce(g5,e)}const m5={theta:1,radius:1},XGe=ie(m5);function Hx(e){return"width"===e?vn:Ti}const _5={xOffset:1,yOffset:1};function xv(e){return Ce(_5,e)}ie(_5);const{text:X1t,tooltip:Q1t,href:J1t,url:Z1t,description:evt,detail:tvt,key:nvt,order:ivt,...Bse}=p5,QGe=ie(Bse),Vse={...g5,...m5,..._5,...Bse},y5=ie(Vse);function kl(e){return Ce(Vse,e)}const jse={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:rvt,...tWe}=jse;function v5(e){switch(e){case vn:case Ti:case Ms:case xa:case Dd:case qm:case Vu:case kh:case xd:case ju:case Cd:case Sd:case Sa:case Tl:case Bu:case $u:return;case $x:case Pu:case Lu:case po:case Td:case Cv:case Ih:case Vx:case jx:case Ux:return"discrete";case ho:case Al:case Nl:return"flexible";case Ta:case Aa:case Na:case ks:case Sv:case Bx:case Ym:return}}const iWe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},rWe={count:1,min:1,max:1};function Hu(e){return le(e,"argmin")}function Nd(e){return le(e,"argmax")}function b5(e){return be(e)&&Ce(iWe,e)}const oWe=new Set(["count","valid","missing","distinct"]);function zx(e){return be(e)&&oWe.has(e)}const aWe=new Set(["count","sum","distinct","valid","missing"]),lWe=new Set(["mean","average","median","q1","q3","min","max"]);function Use(e){return Oc(e)&&(e=cT(e,void 0)),"bin"+ie(e).map(t=>Gx(e[t])?yn(`_${t}_${Ed(e[t])}`):yn(`_${t}_${e[t]}`)).join("")}function on(e){return!0===e||Rh(e)&&!e.binned}function Hi(e){return"binned"===e||Rh(e)&&!0===e.binned}function Rh(e){return ye(e)}function Gx(e){return le(e,"param")}function Hse(e){switch(e){case Pu:case Lu:case Vu:case ho:case Al:case Nl:case xd:case ju:case Cd:case Sd:case po:return 6;case Td:return 4;default:return 10}}function Tv(e){return le(e,"expr")}function zi(e,{level:t}={level:0}){const n=ie(e||{}),i={};for(const r of n)i[r]=0===t?Ko(e[r]):zi(e[r],{level:t-1});return i}function zse(e){const{anchor:t,frame:n,offset:i,orient:r,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...g}=e,_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...void 0!==o?{angle:o}:{},...void 0!==s?{limit:s}:{}},y={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}};return{titleMarkConfig:{...g,...a?{fill:a}:{}},subtitleMarkConfig:Hm(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:_,subtitle:y}}function Md(e){return be(e)||J(e)&&be(e[0])}function Me(e){return le(e,"signal")}function Fh(e){return le(e,"step")}function zu(e){return!J(e)&&le(e,"field")&&le(e,"data")}const dWe=ie({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),fWe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},w5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Gse(e){const t=J(e.condition)?e.condition.map(Wse):Wse(e.condition);return{...Ko(e),condition:t}}function Ko(e){if(Tv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Wse(e){if(Tv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function fn(e){if(Tv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Me(e)?e:void 0!==e?{value:e}:void 0}function hWe(e){return Me(e)?e.signal:fe(e)}function qse(e){return Me(e)?e.signal:fe(e.value)}function Ma(e){return Me(e)?e.signal:null==e?null:fe(e)}function pWe(e,t,n){for(const i of n){const r=Il(i,t.markDef,t.config);void 0!==r&&(e[i]=fn(r))}return e}function Yse(e){return[].concat(e.type,e.style??[])}function Wt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&le(t,r)?t[r]:void 0!==t[e]?t[e]:!o||r&&r!==e?Il(e,t,n,i):void 0}function Il(e,t,n,{vgChannel:i}={}){const r=E5(e,t,n.style);return Hn(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function E5(e,t,n){return Kse(e,Yse(t),n)}function Kse(e,t,n){let i;t=ve(t);for(const r of t){const o=n[r];le(o,e)&&(i=o[e])}return i}function Xse(e,t){return ve(e).reduce((n,i)=>(n.field.push(me(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function Qse(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(Yo(r,i))return;n.push(i)}),n}function Jse(e,t){return Yo(e,t)||!t?e:e?[...ve(e),...ve(t)].join(", "):t}function Zse(e,t){const n=e.value,i=t.value;if(null==n||null===i)return{explicit:e.explicit,value:null};if((Md(n)||Me(n))&&(Md(i)||Me(i)))return{explicit:e.explicit,value:Jse(n,i)};if(Md(n)||Me(n))return{explicit:e.explicit,value:n};if(Md(i)||Me(i))return{explicit:e.explicit,value:i};if(!(Md(n)||Me(n)||Md(i)||Me(i)))return{explicit:e.explicit,value:Qse(n,i)};throw new Error("It should never reach here")}function D5(e){return`Invalid specification ${Gt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function eae(e){return("width"==e?"Width":"Height")+' "container" only works for single views and layered views.'}function tae(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function nae(e){return e?`Dropping "fit-${e}" because spec has discrete ${go(e)}.`:'Dropping "fit" because spec has discrete size.'}function C5(e){return`Unknown field for ${e}. Cannot calculate view size.`}function iae(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function mWe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function rae(e){return`Selection not supported for ${e} yet.`}function oae(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function sae(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function MWe(e){return`Ignoring an invalid transform: ${Gt(e)}.`}function aae(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function RWe(e){return`${e}Offset dropped because ${e} is continuous`}function lae(e){return`Invalid field type "${e}".`}function uae(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function S5(e,t){return`Dropping ${Gt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function Wx(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function VWe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function jWe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function UWe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function x5(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function KWe(e){return`Using unaggregated domain with raw field has no effect (${Gt(e)}).`}function XWe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function QWe(e){return`Unaggregated domain is currently unsupported for log scale (${Gt(e)}).`}function cae(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function dae(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const fae="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function qx(e,t){return`Invalid ${e}: ${Gt(t)}.`}function hae(e){return`1D error band does not support ${e}.`}function pae(e){return`Channel ${e} is required for "binned" bin.`}const gae=jI(VI);let Ol=gae;function ce(...e){Ol.warn(...e)}function Ph(e){if(e&&ye(e))for(const t of A5)if(le(e,t))return!0;return!1}const _ae=["january","february","march","april","may","june","july","august","september","october","november","december"],wqe=_ae.map(e=>e.substr(0,3)),yae=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Eqe=yae.map(e=>e.substr(0,3));function T5(e,t){const n=[];if(t&&void 0!==e.day&&ie(e).length>1&&(ce(function dqe(e){return`Dropping day from datetime ${Gt(e)} as day cannot be combined with other units.`}(e)),delete(e=Ke(e)).day),n.push(void 0!==e.year?e.year:2012),void 0!==e.month){const i=t?function Cqe(e){if(Lx(e)&&(e=+e),Ct(e))return e-1;{const t=e.toLowerCase(),n=_ae.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=wqe.indexOf(i);if(-1!==r)return r;throw new Error(qx("month",e))}}(e.month):e.month;n.push(i)}else if(void 0!==e.quarter){const i=t?function Dqe(e){if(Lx(e)&&(e=+e),Ct(e))return e>4&&ce(qx("quarter",e)),e-1;throw new Error(qx("quarter",e))}(e.quarter):e.quarter;n.push(Ct(i)?3*i:`${i}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const i=t?function Sqe(e){if(Lx(e)&&(e=+e),Ct(e))return e%7;{const t=e.toLowerCase(),n=yae.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=Eqe.indexOf(i);if(-1!==r)return r;throw new Error(qx("day",e))}}(e.day):e.day;n.push(Ct(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Lh(e){const n=T5(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}const vae={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},A5=ie(vae);function $h(e){return ye(e)?e.binned:bae(e)}function bae(e){return e&&e.startsWith("binned")}function N5(e){return e.startsWith("utc")}const Mqe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Yx(e){return A5.filter(t=>Eae(e,t))}function wae(e){const t=Yx(e);return t[t.length-1]}function Eae(e,t){const n=e.indexOf(t);return!(n<0||n>0&&"seconds"===t&&"i"===e.charAt(n-1)||e.length>n+3&&"day"===t&&"o"===e.charAt(n+3)||n>0&&"year"===t&&"f"===e.charAt(n-1))}function Dae(e){if(e)return`timeUnitSpecifier(${Gt(Yx(e))}, ${Gt(Mqe)})`}function Ai(e){if(!e)return;let t;return be(e)?t=bae(e)?{unit:e.substring(6),binned:!0}:{unit:e}:ye(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),N5(t.unit)&&(t.utc=!0,t.unit=function Nqe(e){return e.substring(3)}(t.unit)),t}function Cae(e,t=(n=>n)){const n=Ai(e),i=wae(n.unit);if(i&&"day"!==i){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=Sae(i,n.step);return`${t(Lh({...r,[s]:+r[s]+o}))} - ${t(Lh(r))}`}}const Rqe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Sae(e,t=1){if(function Fqe(e){return Ce(Rqe,e)}(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:3*t};case"week":return{part:"date",step:7*t}}}function M5(e){return!!e?.field&&void 0!==e.equal}function k5(e){return!!e?.field&&void 0!==e.lt}function I5(e){return!!e?.field&&void 0!==e.lte}function O5(e){return!!e?.field&&void 0!==e.gt}function R5(e){return!!e?.field&&void 0!==e.gte}function F5(e){if(e?.field){if(J(e.range)&&2===e.range.length)return!0;if(Me(e.range))return!0}return!1}function P5(e){return!!e?.field&&(J(e.oneOf)||J(e.in))}function xae(e){return P5(e)||M5(e)||F5(e)||k5(e)||O5(e)||I5(e)||R5(e)}function Rl(e,t){return dT(e,{timeUnit:t,wrapTime:!0})}function Tae(e,t=!0){const{field:n}=e,i=Ai(e.timeUnit),{unit:r,binned:o}=i||{},s=me(e,{expr:"datum"}),a=r?`time(${o?s:function kqe(e,t,{end:n}={end:!1}){const i=u5(t),r=N5(e)?"utc":"";function o(l){return"quarter"===l?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const a={};for(const l of A5)Eae(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),function xqe(e){const n=T5(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}(a)}(r,n)})`:s;if(M5(e))return`${a}===${Rl(e.equal,r)}`;if(k5(e))return`${a}<${Rl(e.lt,r)}`;if(O5(e))return`${a}>${Rl(e.gt,r)}`;if(I5(e))return`${a}<=${Rl(e.lte,r)}`;if(R5(e))return`${a}>=${Rl(e.gte,r)}`;if(P5(e))return`indexof([${function $qe(e,t){return e.map(n=>Rl(n,t))}(e.oneOf,r).join(",")}], ${a}) !== -1`;if(function Lqe(e){return!!e?.field&&void 0!==e.valid}(e))return Kx(a,e.valid);if(F5(e)){const{range:l}=zi(e),u=Me(l)?{signal:`${l.signal}[0]`}:l[0],c=Me(l)?{signal:`${l.signal}[1]`}:l[1];if(null!==u&&null!==c&&t)return"inrange("+a+", ["+Rl(u,r)+", "+Rl(c,r)+"])";const d=[];return null!==u&&d.push(`${a} >= ${Rl(u,r)}`),null!==c&&d.push(`${a} <= ${Rl(c,r)}`),d.length>0?d.join(" && "):"true"}throw new Error(`Invalid field predicate: ${Gt(e)}`)}function Kx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Bqe(e){return xae(e)&&e.timeUnit?{...e,timeUnit:Ai(e.timeUnit)}:e}const Bh={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Vqe(e){return"quantitative"===e||"temporal"===e}function Aae(e){return"ordinal"===e||"nominal"===e}const Vh=Bh.quantitative,L5=Bh.ordinal,Xm=Bh.temporal,$5=Bh.nominal,Qm=Bh.geojson;ie(Bh);const Xx={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Uqe(e,t){const n=Xx[e],i=Xx[t];return n===i||"ordinal-position"===n&&"time"===i||"ordinal-position"===i&&"time"===n}ie(Xx);const Hqe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Nae(e){return Hqe[e]}const Mae=new Set(["linear","log","pow","sqrt","symlog"]),kae=new Set([...Mae,"time","utc"]);function Iae(e){return Mae.has(e)}const Oae=new Set(["quantile","quantize","threshold"]),zqe=new Set([...kae,...Oae,"sequential","identity"]),Gqe=new Set(["ordinal","bin-ordinal","point","band"]);function Ni(e){return Gqe.has(e)}function ka(e){return zqe.has(e)}function Fl(e){return kae.has(e)}function Jm(e){return Oae.has(e)}function Rae(e){return le(e,"param")}const Fae={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:xvt,domain:Tvt,range:Avt,rangeMax:Nvt,rangeMin:Mvt,scheme:kvt,...Xqe}=(ie(Fae),Fae),Qqe=ie(Xqe);function B5(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Fl(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return Fl(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Fl(e);case"nice":return Fl(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return ka(e)&&!ft(["log","time","utc","threshold","quantile"],e)}}function Pae(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Km(e)?void 0:function qWe(e){return`Cannot use the scale property "${e}" with non-color channel.`}(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const hr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Lae=hr.arc,Qx=hr.area,Jx=hr.bar,tYe=hr.image,Zx=hr.line,eT=hr.point,nYe=hr.rect,tT=hr.rule,$ae=hr.text,V5=hr.tick,iYe=hr.trail,j5=hr.circle,U5=hr.square,Bae=hr.geoshape;function Id(e){return["line","area","trail"].includes(e)}function Nv(e){return["rect","bar","image","arc","tick"].includes(e)}const Vae=new Set(ie(hr));function Ia(e){return le(e,"type")}const sYe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],jae=ie({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),H5=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],aYe={area:["line","point"],bar:H5,rect:H5,line:["point"],tick:["bandSize","thickness",...H5]},Uae=ie({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function jh(e){return le(e,"band")}const uYe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},z5={binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},cYe={...z5,binSpacing:1},dYe={...z5,thickness:1};function Hae(e,{isPath:t}){return void 0===e||"break-paths-show-path-domains"===e?t?"break-paths-show-domains":"filter":null===e?"show":e}function G5({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!ka(i)||r)return"always-valid";const o=Hae(Wt("invalid",e,t),{isPath:Id(e.type)});return void 0!==t.scale?.invalid?.[n]?"show":o}function zae({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,o=`peek(${i})`,s=t.domainHasZero();return"definitely"===s?{scale:e,value:0}:"maybe"===s?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${"zeroOrMin"===n?r:o})`}:{signal:`scale('${e}', ${"zeroOrMin"===n?r:o})`}}function Gae({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:o}){const s=n?.get("type"),a=Fa(t),u=G5({scaleChannel:e,markDef:r,config:o,scaleType:s,isCountAggregate:zx(a?.aggregate)});if(a&&"show"===u){const c=o.scale.invalid?.[e]??"zero-or-min";return{test:Kx(me(a,{expr:"datum"}),!1),...pYe(c,n,i)}}}function pYe(e,t,n){if(function eYe(e){return ye(e)&&"value"in e}(e)){const{value:i}=e;return Me(i)?{signal:i.signal}:{value:i}}return zae({scale:t,scaleName:n,mode:"zeroOrMin"})}function W5(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:o,config:s}=e,a=Oh(t),l=q5(e),u=Gae({scaleChannel:a,channelDef:n,scale:r,scaleName:o,markDef:i,config:s});return void 0!==u?[u,l]:l}function Uh(e,t,n,i){const r={};if(t&&(r.scale=t),Pl(e)){const{datum:o}=e;Ph(o)?r.signal=Lh(o):Me(o)?r.signal=o.signal:Tv(o)?r.signal=o.expr:r.value=o}else r.field=me(e,n);if(i){const{offset:o,band:s}=i;o&&(r.offset=o),s&&(r.band=s)}return r}function nT({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:o="end",bandPosition:s=.5}){const a=!Me(s)&&0<s&&s<1?"datum":void 0,l=me(t,{expr:a,suffix:r}),u=void 0!==n?me(n,{expr:a}):me(t,{suffix:o,expr:a}),c={};if(0===s||1===s)c.scale=e,c.field=0===s?l:u;else{const d=Me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${d})`}return i&&(c.offset=i),c}function q5({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Qe(t)){const d=s?.get("type");if(Gr(t)){c??(c=Od({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:f,timeUnit:h,type:p}=t;if(on(f)||c&&h&&p===Xm)return a?.impute?Uh(t,o,{binSuffix:"mid"},{offset:l}):c&&!Ni(d)?nT({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Uh(t,o,Fv(t,e)?{binSuffix:"range"}:{},{offset:l});if(Hi(f)){if(de(n))return nT({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});ce(pae(e===vn?Sa:Tl))}}return Uh(t,o,Ni(d)?{binSuffix:"range"}:{},{offset:l,band:"band"===d?c??t.bandPosition??.5:void 0})}if(Ra(t)){const f=l?{offset:l}:{};return{...Mv(e,t.value),...f}}}return nt(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function Mv(e,t){return ft(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:ft(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:fn(t)}function Hh(e){return e&&"number"!==e&&"time"!==e}function Wae(e,t,n){return`${e}(${t}${n?`, ${Gt(n)}`:""})`}function Y5({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o}){if(Hh(n))return Oa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:o});const s=qae(e,i,r),a=Zm(e);if(void 0===t&&void 0===n&&o.customFormatTypes){if("quantitative"===a){if(r&&o.normalizedNumberFormatType)return Oa({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return Oa({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if("temporal"===a&&o.timeFormatType&&de(e)&&void 0===e.timeUnit)return Oa({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(i_(e)){const l=function vYe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:o}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:`${o?"utc":"time"}Format(${e}, '${n=be(n)?n:r}')`:function Iqe(e,t,n){if(!e)return;const i=Dae(e);return`${n||N5(e)?"utc":"time"}Format(${t}, ${i})`}(t,e,o)}({field:s,timeUnit:de(e)?Ai(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:zh(e)&&"utc"===e.scale?.type});return l?{signal:l}:void 0}return t=K5({type:a,specifiedFormat:t,config:o,normalizeStack:r}),de(e)&&on(e.bin)?{signal:kv(s,me(e,{expr:i,binSuffix:"end"}),t,n,o)}:t||"quantitative"===Zm(e)?{signal:`${Xae(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function qae(e,t,n){return de(e)?n?`${me(e,{expr:t,suffix:"end"})}-${me(e,{expr:t,suffix:"start"})}`:me(e,{expr:t}):function gYe(e){const{datum:t}=e;return Ph(t)?Lh(t):`${Gt(t)}`}(e)}function Oa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o,field:s}){return s??(s=qae(e,i,r)),"datum.value"!==s&&de(e)&&on(e.bin)?{signal:kv(s,me(e,{expr:i,binSuffix:"end"}),t,n,o)}:{signal:Wae(n,s,t)}}function Yae(e,t,n,i,r,o){if(!(be(i)&&Hh(i)||void 0===n&&void 0===i&&r.customFormatTypes&&"quantitative"===Zm(e)&&(r.normalizedNumberFormatType&&e_(e)&&"normalize"===e.stack||r.numberFormatType))){if(e_(e)&&"normalize"===e.stack&&r.normalizedNumberFormat)return K5({type:"quantitative",config:r,normalizeStack:!0});if(i_(e)){const s=de(e)?Ai(e.timeUnit)?.unit:void 0;return void 0===s&&r.customFormatTypes&&r.timeFormatType?void 0:function yYe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:Dae(t)}:i?void 0:n.timeFormat)}({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:o})}return K5({type:t,specifiedFormat:n,config:r})}}function Kae(e,t,n){return e&&(Me(e)||"number"===e||"time"===e)?e:i_(t)&&"time"!==n&&"utc"!==n?de(t)&&Ai(t?.timeUnit)?.utc?"utc":"time":void 0}function K5({type:e,specifiedFormat:t,config:n,normalizeStack:i}){return be(t)?t:e===Vh?i?n.normalizedNumberFormat:n.numberFormat:void 0}function Xae(e,t){return`format(${e}, "${t||""}")`}function Qae(e,t,n,i){return Hh(n)?Wae(n,e,t):Xae(e,(be(t)?t:void 0)??i.numberFormat)}function kv(e,t,n,i,r){if(void 0===n&&void 0===i&&r.customFormatTypes&&r.numberFormatType)return kv(e,t,r.numberFormat,r.numberFormatType,r);const o=Qae(e,n,i,r),s=Qae(t,n,i,r);return`${Kx(e,!1)} ? "null" : ${o} + " \u2013 " + ${s}`}const iT="min",bYe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Jae(e){return Ce(bYe,e)}function Gu(e){return e&&("count"===e.op||le(e,"field"))}function Zae(e){return e&&J(e)}function Iv(e){return le(e,"row")||le(e,"column")}function X5(e){return le(e,"header")}function rT(e){return le(e,"facet")}function ele(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function Q5(e){return le(e,"sort")}function Od({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Qe(e)&&void 0!==e.bandPosition)return e.bandPosition;if(de(e)){const{timeUnit:r,bin:o}=e;if(r&&!t)return Il("timeUnitBandPosition",n,i);if(on(o))return.5}}function tle({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:o,useVlSizeChannel:s}){const a=go(e),l=Wt(s?"size":a,i,r,{vgChannel:a});if(void 0!==l)return l;if(de(t)){const{timeUnit:u,bin:c}=t;if(u&&!n)return{band:Il("timeUnitBandSize",i,r)};if(on(c)&&!Ni(o))return{band:1}}return Nv(i.type)?o?Ni(o)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize:void 0}function nle(e,t,n,i){return!!(on(e.bin)||e.timeUnit&&Gr(e)&&"temporal"===e.type)&&void 0!==Od({fieldDef:e,fieldDef2:t,markDef:n,config:i})}function ile(e){return le(e,"sort")&&!le(e,"field")}function Ov(e){return le(e,"condition")}function oT(e){const t=e?.condition;return!!t&&!J(t)&&de(t)}function Rv(e){const t=e?.condition;return!!t&&!J(t)&&Qe(t)}function de(e){return le(e,"field")||"count"===e?.aggregate}function Zm(e){return e?.type}function Pl(e){return le(e,"datum")}function Rd(e){return Gr(e)&&!aT(e)||sT(e)}function rle(e){return Gr(e)&&"quantitative"===e.type&&!e.bin||sT(e)}function sT(e){return Pl(e)&&Ct(e.datum)}function Qe(e){return de(e)||Pl(e)}function Gr(e){return e&&(le(e,"field")||"count"===e.aggregate)&&le(e,"type")}function Ra(e){return le(e,"value")}function zh(e){return le(e,"scale")||le(e,"sort")}function e_(e){return le(e,"axis")||le(e,"stack")||le(e,"impute")}function ole(e){return le(e,"legend")}function sle(e){return le(e,"format")||le(e,"formatType")}function SYe(e){return fo(e,["legend","axis","header","scale"])}function me(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,o="";if(function AYe(e){return"count"===e.aggregate}(e))n=xse("count");else{let s;if(!t.nofn)if(function xYe(e){return le(e,"op")}(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;on(a)?(s=Use(a),r=(t.binSuffix??"")+(t.suffix??"")):l?Nd(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Hu(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!$h(u)&&(s=function Oqe(e){const{utc:t,...n}=Ai(e);return n.unit?(t?"utc":"")+ie(n).map(i=>yn(`${"unit"===i?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+ie(n).map(i=>yn(`_${i}_${n[i]}`)).join("")}(u),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Gm(n):t.expr?Dse(n,t.expr)+o:Ns(n)+o}function aT(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return de(e)&&!!e.bin;case"temporal":return!1}throw new Error(lae(e.type))}const ale=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function MYe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Nd(t))return`${r} for argmax(${t.argmax})`;if(Hu(t))return`${r} for argmin(${t.argmin})`;const o=i&&!$h(i)?Ai(i):void 0,s=t||o?.unit||o?.maxbins&&"timeunit"||on(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}(e);default:return function NYe(e,t){const{field:n,bin:i,timeUnit:r,aggregate:o}=e;if("count"===o)return t.countTitle;if(on(i))return`${n} (binned)`;if(r&&!$h(r)){const s=Ai(r)?.unit;if(s)return`${n} (${Yx(s).join("-")})`}else if(o)return Nd(o)?`${n} for max ${o.argmax}`:Hu(o)?`${n} for min ${o.argmin}`:`${Ev(o)} of ${n}`;return n}(e,t)}};let lle=ale;function ule(e){lle=e}function t_(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=J5(e)?.title;if(!de(e))return r??e.title;const o=e,s=i?Z5(o,t):void 0;return n?Hn(r,o.title,s):r??o.title??s}function J5(e){return e_(e)&&e.axis?e.axis:ole(e)&&e.legend?e.legend:X5(e)&&e.header?e.header:void 0}function Z5(e,t){return lle(e,t)}function lT(e){if(sle(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=J5(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function Fa(e){return de(e)?e:oT(e)?e.condition:void 0}function mi(e){return Qe(e)?e:Rv(e)?e.condition:void 0}function cle(e,t,n,i={}){return be(e)||Ct(e)||Oc(e)?(ce(function FWe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Gt(n)}}.`}(t,be(e)?"string":Ct(e)?"number":"boolean",e)),{value:e}):Qe(e)?uT(e,t,n,i):Rv(e)?{...e,condition:uT(e.condition,t,n,i)}:e}function uT(e,t,n,i){if(sle(e)){const{format:r,formatType:o,...s}=e;if(Hh(o)&&!n.customFormatTypes)return ce(aae(t)),uT(s,t,n,i)}else{const r=e_(e)?"axis":ole(e)?"legend":X5(e)?"header":null;if(r&&e[r]){const{format:o,formatType:s,...a}=e[r];if(Hh(s)&&!n.customFormatTypes)return ce(aae(t)),uT({...e,[r]:a},t,n,i)}}return de(e)?e8(e,t,i):function OYe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ct(n)?"quantitative":be(n)?"nominal":Ph(n)?"temporal":void 0,{...e,type:t}}(e)}function e8(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:s}=e,a={...e};if(!n&&i&&!b5(i)&&!Nd(i)&&!Hu(i)&&(ce(function LWe(e){return`Invalid aggregation operator "${e}".`}(i)),delete a.aggregate),r&&(a.timeUnit=Ai(r)),s&&(a.field=`${s}`),on(o)&&(a.bin=cT(o,t)),Hi(o)&&!zn(t)&&ce(function gqe(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),Gr(a)){const{type:l}=a,u=function jqe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Vh:return"quantitative";case"t":case Xm:return"temporal";case"o":case L5:return"ordinal";case"n":case $5:return"nominal";case Qm:return"geojson"}}(l);l!==u&&(a.type=u),"quantitative"!==l&&zx(i)&&(ce(function PWe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(l,i)),a.type="quantitative")}else if(!Lse(t)){const l=function IYe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Q5(e)&&J(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Nd(n)&&!Hu(n))return"quantitative";if(zh(e)&&e.scale?.type)switch(Xx[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(a,t);a.type=l}if(Gr(a)){const{compatible:l,warning:u}=function RYe(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Pu:case Lu:case $x:return aT(e)?n_:{compatible:!1,warning:jWe(t)};case vn:case Ti:case Dd:case qm:case ho:case Al:case Nl:case Cv:case Sv:case Bx:case Ih:case Vx:case jx:case kh:case Ms:case xa:case Ux:return n_;case Aa:case ks:case Ta:case Na:return n!==Vh?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:n_;case ju:case Cd:case Sd:case xd:case Vu:case Bu:case $u:case Sa:case Tl:return"nominal"!==n||e.sort?n_:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case po:case Td:return aT(e)||function TYe(e){return zh(e)&&Jm(e.scale?.type)}(e)?n_:{compatible:!1,warning:UWe(t)};case Ym:return"nominal"!==e.type||"sort"in e?n_:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(a,t)||{};!1===l&&ce(u)}if(Q5(a)&&be(a.sort)){const{sort:l}=a;if(Jae(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if("-"===l.charAt(0)&&Jae(u))return{...a,sort:{encoding:u,order:"descending"}}}if(X5(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function cT(e,t){return Oc(e)?{maxbins:Hse(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:Hse(t)}}const n_={compatible:!0};function i_(e){const{formatType:t}=lT(e);return"time"===t||!t&&function FYe(e){return e&&("temporal"===e.type||de(e)&&!!e.timeUnit)}(e)}function dT(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const o=t&&Ai(t)?.unit;let a,s=o||"temporal"===n;return Tv(e)?a=e.expr:Me(e)?a=e.signal:Ph(e)?(s=!0,a=Lh(e)):(be(e)||Ct(e))&&s&&(a=`datetime(${Gt(e)})`,function Aqe(e){return Ce(vae,e)}(o)&&(Ct(e)&&e<1e4||be(e)&&isNaN(Date.parse(e)))&&(a=Lh({[o]:e}))),a?i&&s?`time(${a})`:a:r?void 0:Gt(e)}function dle(e,t){const{type:n}=e;return t.map(i=>{const o=dT(i,{timeUnit:de(e)&&!$h(e.timeUnit)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==o?{signal:o}:i})}function Fv(e,t){return on(e.bin)?kl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const fle={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Pv(e){return e?.condition}const hle=["domain","grid","labels","ticks","title"],PYe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},ple={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},gle={...ple,style:1,labelExpr:1,encoding:1};function mle(e){return Ce(gle,e)}ie(gle);const _le=ie({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Wu(e){return le(e,"mark")}class fT{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return!!Wu(t)&&function fYe(e){return Ia(e)?e.type:e}(t.mark)===this.name}}function Gh(e,t){const n=e&&e[t];return!!n&&(J(n)?zm(n,i=>!!i.field):de(n)||oT(n))}function yle(e,t){const n=e&&e[t];return!!n&&(J(n)?zm(n,i=>!!i.field):de(n)||Pl(n)||Rv(n))}function vle(e,t){if(zn(t)){const n=e[t];if((de(n)||Pl(n))&&(Aae(n.type)||de(n)&&n.timeUnit))return yle(e,h5(t))}return!1}function ble(e){return zm(zGe,t=>{if(Gh(e,t)){const n=e[t];if(J(n))return zm(n,i=>!!i.aggregate);{const i=Fa(n);return i&&!!i.aggregate}}return!1})}function wle(e,t){const n=[],i=[],r=[],o=[],s={};return t8(e,(a,l)=>{if(de(a)){const{field:u,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const g=J5(a)?.title;let m=me(a,{forAs:!0});const _={...g?[]:{title:t_(a,t,{allowDisabling:!0})},...h,field:m};if(c){let y;if(Nd(c)?(y="argmax",m=me({op:"argmax",field:c.argmax},{forAs:!0}),_.field=`${m}.${u}`):Hu(c)?(y="argmin",m=me({op:"argmin",field:c.argmin},{forAs:!0}),_.field=`${m}.${u}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(y=c),y){const v={op:y,as:m};u&&(v.field=u),o.push(v)}}else if(n.push(m),Gr(a)&&on(d))i.push({bin:d,field:u,as:m}),n.push(me(a,{binSuffix:"end"})),Fv(a,l)&&n.push(me(a,{binSuffix:"range"})),zn(l)&&(s[`${l}2`]={field:`${m}_end`}),_.bin="binned",Lse(l)||(_.type=Vh);else if(f&&!$h(f)){r.push({timeUnit:f,field:u,as:m});const y=Gr(a)&&a.type!==Xm&&"time";y&&(l===Cv||l===Ih?_.formatType=y:function JGe(e){return Ce(p5,e)}(l)?_.legend={formatType:y,..._.legend}:zn(l)&&(_.axis={formatType:y,..._.axis}))}s[l]=_}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:n,encoding:s}}function LYe(e,t,n){const i=function eWe(e,t){return function nWe(e){switch(e){case ho:case Al:case Nl:case Ux:case Sv:case Bx:case Ih:case Vx:case Ym:case ju:case Cd:case Sd:case xd:case $x:case Pu:case Lu:return jse;case vn:case Ti:case Dd:case qm:case Ta:case Aa:return tWe;case Sa:case Tl:case Na:case ks:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Vu:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Td:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case po:return{point:"always",geoshape:"always"};case Cv:return{text:"always"};case kh:return{point:"always",square:"always",text:"always"};case jx:return{image:"always"};case Ms:case xa:return{text:"always",arc:"always"};case Bu:case $u:return{arc:"always"}}}(e)[t]}(t,n);if(!i)return!1;if("binned"===i){const r=e[t===Sa?vn:Ti];return!!(de(r)&&de(e[t])&&Hi(r.bin))}return!0}function hT(e,t){const n={};for(const i of ie(e)){const r=cle(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function t8(e,t,n){if(e)for(const i of ie(e)){const r=e[i];if(J(r))for(const o of r)t.call(n,o,i);else t.call(n,r,i)}}function Ele(e,t){return ie(t).reduce((n,i)=>{switch(i){case vn:case Ti:case Vx:case Ux:case jx:case Sa:case Tl:case Dd:case qm:case Ms:case Bu:case xa:case $u:case Ta:case Aa:case Na:case ks:case Cv:case po:case kh:case Ih:return n;case Ym:if("line"===e||"trail"===e)return n;case Sv:case Bx:{const r=t[i];if(J(r)||de(r))for(const o of ve(r))o.aggregate||n.push(me(o,{}));return n}case Vu:if("trail"===e)return n;case ho:case Al:case Nl:case ju:case Cd:case Sd:case Td:case xd:{const r=Fa(t[i]);return r&&!r.aggregate&&n.push(me(r,{})),n}}},[])}function n8(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=i?` of ${i8(t)}`:"";return{field:s+t.field,type:t.type,title:Me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=function BYe(e){const t=[];for(const n of ie(e))if(Gh(e,n)){const r=ve(e[n]);for(const o of r)de(o)?t.push(o):oT(o)&&t.push(o.condition)}return t}(n).map(SYe);return{tooltip:[...r,...xl(o,pt)]}}function i8(e){const{title:t,field:n}=e;return Hn(t,n)}function r8(e,t,n,i,r){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c,extraEncoding:d={}})=>{const f=i8(n);return Dle(e,a,r,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...void 0!==f?{title:f}:{},...void 0!==o?{scale:o}:{},...void 0!==s?{axis:s}:{}},...be(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...i,...d}})}}function Dle(e,t,n,i){const{clip:r,color:o,opacity:s}=e,a=e.type;return e[t]||void 0===e[t]&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Ia(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(t)}`,...Oc(e[t])?{}:e[t]}}]:[]}function Cle(e,t,n){const{encoding:i}=e,r="vertical"===t?"y":"x",s=i[`${r}2`],a=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:pT(i[r],n),continuousAxisChannelDef2:pT(s,n),continuousAxisChannelDefError:pT(a,n),continuousAxisChannelDefError2:pT(l,n),continuousAxis:r}}function pT(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&ce(function pqe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),i}return e}function Sle(e,t){const{mark:n,encoding:i}=e,{x:r,y:o}=i;if(Ia(n)&&n.orient)return n.orient;if(Rd(r)){if(Rd(o)){const s=de(r)&&r.aggregate,a=de(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return i_(o)&&!i_(r)?"horizontal":"vertical"}return"horizontal"}if(Rd(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const gT="boxplot",HYe=new fT(gT,Tle);function xle(e){return Ct(e)?"tukey":e}function Tle(e,{config:t}){e={...e,encoding:hT(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:o,...s}=e,a=Ia(n)?n:{type:n};r&&ce(rae("boxplot"));const l=a.extent??t.boxplot.extent,u=Wt("size",a,t),c=a.invalid,d=xle(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:_,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:D}=function zYe(e,t,n){const i=Sle(e,gT),{continuousAxisChannelDef:r,continuousAxis:o}=Cle(e,i,gT),s=r.field,a=Gm(s),l=xle(t),u=[...Ale(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:("min-max"===l?"lower_whisker_":"min_")+a},{op:"max",field:s,as:("min-max"===l?"upper_whisker_":"max_")+a}],c="min-max"===l||"tukey"===l?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=function jYe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(J(t)){for(const o of t)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return J(r)&&1===r.length&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}(f),{bins:g,timeUnits:m,aggregate:_,groupby:y,encoding:v}=wle(p,n),b="vertical"===i?"horizontal":"vertical",w=i;return{bins:g,timeUnits:m,transform:[...g,...m,{aggregate:[..._,...u],groupby:y},...c],groupby:y,aggregate:_,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:h}}(e,l,t),E=Gm(g.field),{color:C,size:N,...k}=v,R=wt=>r8(a,m,g,wt,t.boxplot),F=R(k),P=R(v),x=(ye(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",S=R({...k,...N?{size:N}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...C||{value:x}}}}),T=n8([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],g,v),I={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},A="min-max"===d?T:n8([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,v),M=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:A}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:A}),...F({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:A}),...F({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:A})],O=[..."tukey"!==d?M:[],...P({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),...S({partName:"median",mark:{type:"tick",invalid:c,...ye(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:T})];if("min-max"===d)return{...s,transform:(s.transform??[]).concat(p),layer:O};const L=`datum["lower_box_${g.field}"]`,$=`datum["upper_box_${g.field}"]`,V=`(${$} - ${L})`,B=`${L} - ${l} * ${V}`,z=`${$} + ${l} * ${V}`,te=`datum["${g.field}"]`,q={joinaggregate:Ale(g.field),groupby:_},ue={transform:[{filter:`(${B} <= ${te}) && (${te} <= ${z})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${E}`},{op:"max",field:g.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${E}`},...y],groupby:_}],layer:M},{tooltip:W,...Z}=k,{scale:ee,axis:G}=g,ge=i8(g),Se=fo(G,["title"]),je=Dle(a,"outliers",t.boxplot,{transform:[{filter:`(${te} < ${B}) || (${te} > ${z})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...void 0!==ge?{title:ge}:{},...void 0!==ee?{scale:ee}:{},...zt(Se)?{}:{axis:Se}},...Z,...C?{color:C}:{},...D?{tooltip:D}:{}}})[0];let xe;const ke=[...f,...h,q];return je?xe={transform:ke,layer:[je,ue]}:(xe=ue,xe.transform.unshift(...ke)),{...s,layer:[xe,{transform:p,layer:O}]}}function Ale(e){const t=Gm(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}const o8="errorbar",WYe=new fT(o8,Nle);function Nle(e,{config:t}){e={...e,encoding:hT(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=Mle(e,o8,t);delete o.size;const c=r8(a,r,i,o,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:s,aria:!1,...void 0!==d?{thickness:d}:{},...void 0!==f?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==d?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Mle(e,t,n){const{mark:i,encoding:r,params:o,projection:s,...a}=e,l=Ia(i)?i:{type:i};o&&ce(rae(t));const{orient:u,inputType:c}=function qYe(e,t){const{encoding:n}=e;if(function YYe(e){return(Qe(e.x)||Qe(e.y))&&!Qe(e.x2)&&!Qe(e.y2)&&!Qe(e.xError)&&!Qe(e.xError2)&&!Qe(e.yError)&&!Qe(e.yError2)}(n))return{orient:Sle(e,t),inputType:"raw"};const i=function KYe(e){return Qe(e.x2)||Qe(e.y2)}(n),r=function XYe(e){return Qe(e.xError)||Qe(e.xError2)||Qe(e.yError)||Qe(e.yError2)}(n),o=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Qe(a)&&Qe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Qe(a)){if(Rd(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(Qe(l)){if(Rd(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const a=n.xError,u=n.yError,c=n.yError2;if(Qe(n.xError2)&&!Qe(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qe(c)&&!Qe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Qe(a)&&Qe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qe(a)){if(Rd(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(Qe(u)){if(Rd(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=Cle(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:_,tooltipSummary:y,tooltipTitleWithFieldName:v}=function QYe(e,t,n,i,r,o,s,a){let l=[],u=[];const c=t.field;let d,f=!1;if("raw"===o){const h=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":a.errorbar.center,p=e.extent?e.extent:"mean"===h?"stderr":"iqr";if("median"===h!=("iqr"===p)&&ce(function hqe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(h,p,s)),"stderr"===p||"stdev"===p)l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:Ev(h)},{fieldPrefix:"upper_",titlePrefix:kle(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:kle(h,p,"-")}],f=!0;else{let g,m,_;"ci"===p?(g="mean",m="ci0",_="ci1"):(g="median",m="q1",_="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:_,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:t_({field:c,aggregate:_,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:t_({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:t_({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ce(function fqe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}(e.center,e.extent)),"aggregated-upper-lower"===o?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],u.push(r?{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}:{calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Mh(Mh(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}(l,d,f,h,p,c,t,n),{[g]:b,["x"===g?"x2":"y2"]:w,["x"===g?"xError":"yError"]:D,["x"===g?"xError2":"yError2"]:E,...C}=r,{bins:N,timeUnits:k,aggregate:R,groupby:F,encoding:P}=wle(C,n),x=[...R,...m],S="raw"!==c?[]:F,T=n8(y,d,P,v);return{transform:[...a.transform??[],...N,...k,...0===x.length?[]:[{aggregate:x,groupby:S}],..._],groupby:S,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:P,ticksOrient:"vertical"===u?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:T}}function kle(e,t,n){return`${Ev(e)} ${n} ${t}`}const s8="errorband",ZYe=new fT(s8,Ile);function Ile(e,{config:t}){e={...e,encoding:hT(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=Mle(e,s8,t),u=s,c=r8(u,r,i,o,t.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?ce(hae("interpolate")):u.tension&&ce(hae("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const a8={};function l8(e,t,n){const i=new fT(e,t);a8[e]={normalizer:i,parts:n}}l8(gT,Tle,["box","median","outliers","rule","ticks"]),l8(o8,Nle,["ticks","rule"]),l8(s8,Ile,["band","borders"]);const tKe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Ole={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Rle={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},nKe=ie(Ole),iKe=ie(Rle),Fle=ie({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Ple=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Lle={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Pa=(ie(Lle),"_vgsid_"),oKe={point:{on:"click",fields:[Pa],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function u8(e){return"legend"===e||!!e?.legend}function c8(e){return u8(e)&&ye(e)}function d8(e){return!!e?.select}function $le(e){const t=[];for(const n of e||[]){if(d8(n))continue;const{expr:i,bind:r,...o}=n;if(r&&i){const s={...o,bind:r,init:i};t.push(s)}else{const s={...o,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function f8(e){return le(e,"concat")}function mT(e){return le(e,"vconcat")}function h8(e){return le(e,"hconcat")}function Ble({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Ll(e){return le(e,"step")}function Vle(e){return le(e,"view")||le(e,"width")||le(e,"height")}const aKe=ie({align:1,bounds:1,center:1,columns:1,spacing:1});function p8(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function g8(e,t){const n=_T(e,t);return Ll(n)?n.step:Ule}function _T(e,t){return Hn(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Ule=20,cKe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Ule},mark:{color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},arc:{},area:{},bar:cYe,circle:{},geoshape:{},image:{},line:{},point:{},rect:z5,rule:{color:"black"},square:{},text:{color:"black"},tick:dYe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:oKe,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},qu=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Hle={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},zle={blue:qu[0],orange:qu[1],red:qu[2],teal:qu[3],green:qu[4],yellow:qu[5],purple:qu[6],pink:qu[7],brown:qu[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Gle(e){const t=ie(e||{}),n={};for(const i of t){const r=e[i];n[i]=Pv(r)?Gse(r):Ko(r)}return n}const gKe=[...Uae,..._le,...Fle,"background","padding","legend","lineBreak","scale","style","title","view"];function Wle(e={}){const{color:t,font:n,fontSize:i,selection:r,...o}=e,s=kg({},Ke(cKe),n?function hKe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function dKe(e={}){return{signals:[{name:"color",value:ye(e)?{...zle,...e}:zle}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},i?function fKe(e){return{signals:[{name:"fontSize",value:ye(e)?{...Hle,...e}:Hle}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(i):{},o||{});r&&Ig(s,"selection",r,!0);const a=fo(s,gKe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Ko(s[l]));for(const l of Uae)s[l]&&(a[l]=zi(s[l]));for(const l of _le)s[l]&&(a[l]=Gle(s[l]));for(const l of Fle)s[l]&&(a[l]=zi(s[l]));if(s.legend&&(a.legend=zi(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=zi(l,{level:1});a.scale={...zi(u),...ie(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=function pKe(e){const t=ie(e),n={};for(const i of t)n[i]=Gle(e[i]);return n}(s.style)),s.title&&(a.title=zi(s.title)),s.view&&(a.view=zi(s.view)),a}const mKe=new Set(["view",...Vae]),_Ke=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],yKe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...aYe};function wKe(e,t,n,i){"view"===t&&(n="cell");const o={...i?e[t][i]:e[t],...e.style[n??t]};zt(o)||(e.style[n??t]=o),i||delete e[t]}function yT(e){return le(e,"layer")}class m8{map(t,n){return rT(t)?this.mapFacet(t,n):function EKe(e){return le(e,"repeat")}(t)?this.mapRepeat(t,n):h8(t)?this.mapHConcat(t,n):mT(t)?this.mapVConcat(t,n):f8(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(yT(t))return this.mapLayer(t,n);if(Wu(t))return this.mapUnit(t,n);throw new Error(D5(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const CKe={zero:1,center:1,normalize:1},xKe=new Set([Lae,Jx,Qx,tT,eT,j5,U5,Zx,$ae,V5]),TKe=new Set([Jx,Qx,Lae]);function r_(e){return de(e)&&"quantitative"===Zm(e)&&!e.bin}function qle(e,t,{orient:n,type:i}){const r="x"===t?"y":"radius",o="x"===t&&["bar","area"].includes(i),s=e[t],a=e[r];if(de(s)&&de(a))if(r_(s)&&r_(a)){if(s.stack)return t;if(a.stack)return r;const l=de(s)&&!!s.aggregate;if(l!==(de(a)&&!!a.aggregate))return l?t:r;if(o){if("vertical"===n)return r;if("horizontal"===n)return t}}else{if(r_(s))return t;if(r_(a))return r}else{if(r_(s))return o&&"vertical"===n?void 0:t;if(r_(a))return o&&"horizontal"===n?void 0:r}}function Yle(e,t){const n=Ia(e)?e:{type:e},i=n.type;if(!xKe.has(i))return null;const r=qle(t,"x",n)||qle(t,"theta",n);if(!r)return null;const o=t[r],s=de(o)?me(o,{}):void 0,a=function AKe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(r),l=[],u=new Set;if(t[a]){const g=t[a],m=de(g)?me(g,{}):void 0;m&&m!==s&&(l.push(a),u.add(m))}const c="x"===a?"xOffset":"yOffset",d=t[c],f=de(d)?me(d,{}):void 0;f&&f!==s&&(l.push(c),u.add(f));const h=KGe.reduce((g,m)=>{if("tooltip"!==m&&Gh(t,m)){const _=t[m];for(const y of ve(_)){const v=Fa(y);if(v.aggregate)continue;const b=me(v,{});(!b||!u.has(b))&&g.push({channel:m,fieldDef:v})}}return g},[]);let p;return void 0!==o.stack?p=Oc(o.stack)?o.stack?"zero":null:o.stack:TKe.has(i)&&(p="zero"),!p||!function SKe(e){return Ce(CKe,e)}(p)||ble(t)&&0===h.length?null:(o?.scale?.type&&"linear"!==o?.scale?.type&&o?.stack&&ce(function uqe(e){return`Stack is applied to a non-linear scale (${e}).`}(o.scale.type)),Qe(t[Ml(r)])?(void 0!==o.stack&&ce(function lqe(e){return`Cannot stack "${e}" if there is already "${e}2".`}(r)),null):(de(o)&&o.aggregate&&!aWe.has(o.aggregate)&&ce(function cqe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:r,impute:null!==o.impute&&Id(i),stackBy:h,offset:p}))}function Kle(e,t,n){const i=zi(e),r=Wt("orient",i,n);if(i.orient=function IKe(e,t,n){switch(e){case eT:case j5:case U5:case $ae:case nYe:case tYe:return}const{x:i,y:r,x2:o,y2:s}=t;switch(e){case Jx:if(de(i)&&(Hi(i.bin)||de(r)&&r.aggregate&&!i.aggregate))return"vertical";if(de(r)&&(Hi(r.bin)||de(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(de(i)&&i.type===Vh&&!on(i.bin)||sT(i))&&de(r)&&Hi(r.bin)?"horizontal":"vertical";if(!s)return(de(r)&&r.type===Vh&&!on(r.bin)||sT(r))&&de(i)&&Hi(i.bin)?"vertical":"horizontal"}case tT:if(o&&(!de(i)||!Hi(i.bin))&&s&&(!de(r)||!Hi(r.bin)))return;case Qx:if(s)return de(r)&&Hi(r.bin)?"horizontal":"vertical";if(o)return de(i)&&Hi(i.bin)?"vertical":"horizontal";if(e===tT){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case Zx:case V5:{const a=rle(i),l=rle(r);if(n)return n;if(a&&!l)return"tick"!==e?"horizontal":"vertical";if(!a&&l)return"tick"!==e?"vertical":"horizontal";if(a&&l)return"vertical";{const u=Gr(i)&&i.type===Xm,c=Gr(r)&&r.type===Xm;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}(i.type,t,r),void 0!==r&&r!==i.orient&&ce(function WWe(e,t){return`Specified orient "${e}" overridden with "${t}".`}(i.orient,r)),"bar"===i.type&&i.orient){const l=Wt("cornerRadiusEnd",i,n);if(void 0!==l){const u="horizontal"===i.orient&&t.x2||"vertical"===i.orient&&t.y2?["cornerRadius"]:uYe[i.orient];for(const c of u)i[c]=l;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}const o=Wt("opacity",i,n),s=Wt("fillOpacity",i,n);return void 0===o&&void 0===s&&(i.opacity=function MKe(e,t){if(ft([eT,V5,j5,U5],e)&&!ble(t))return.7}(i.type,t)),void 0===Wt("cursor",i,n)&&(i.cursor=function NKe(e,t,n){return t.href||e.href||Wt("href",e,n)?"pointer":e.cursor}(i,t,n)),i}function OKe(e){const{point:t,line:n,...i}=e;return ie(i).length>1?i:i.type}function RKe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:fo(e[t],["point","line"])});return e}function _8(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?ye(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?ye(t.point)?t.point:{}:void 0}function Xle(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class FKe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Wu(t)){const{mark:i,encoding:r}=t,o=Ia(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!_8(o,n[o.type],r);case"area":return!!_8(o,n[o.type],r)||!!Xle(o,n[o.type])}}return!1}run(t,n,i){const{config:r}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,d=hT(u,r),f=Ia(a)?a:{type:a},h=_8(f,r[f.type],d),p="area"===f.type&&Xle(f,r[f.type]),g=[{name:l,...o?{params:o}:{},mark:OKe({..."area"===f.type&&void 0===f.opacity&&void 0===f.fillOpacity?{opacity:.7}:{},...f}),encoding:fo(d,["shape"])}],m=Yle(Kle(f,d,r),d);let _=d;if(m){const{fieldChannel:y,offset:v}=m;_={...d,[y]:{...d[y],...v?{stack:v}:{}}}}return _=fo(_,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...Hm(f,["clip","interpolate","tension","tooltip"]),...p},encoding:_}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Hm(f,["clip","tooltip"]),...h},encoding:_}),i({...c,layer:g},{...n,config:RKe(r)})}}function PKe(e,t){return t?Iv(e)?eue(e,t):Qle(e,t):e}function y8(e,t){return t?eue(e,t):e}function v8(e,t,n){const i=t[e];return function DYe(e){return!be(e)&&le(e,"repeat")}(i)?i.repeat in n?{...t,[e]:n[i.repeat]}:void ce(function xWe(e){return`Unknown repeated value "${e}".`}(i.repeat)):t}function Qle(e,t){if(void 0!==(e=v8("field",e,t))){if(null===e)return null;if(Q5(e)&&Gu(e.sort)){const n=v8("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Jle(e,t){if(de(e))return Qle(e,t);{const n=v8("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Zle(e,t){if(!Qe(e)){if(Rv(e)){const n=Jle(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}{const n=Jle(e,t);if(n)return n;if(Ov(e))return{condition:e.condition}}}function eue(e,t){const n={};for(const i in e)if(le(e,i)){const r=e[i];if(J(r))n[i]=r.map(o=>Zle(o,t)).filter(o=>o);else{const o=Zle(r,t);void 0!==o&&(n[i]=o)}}return n}class LKe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Wu(t)){const{encoding:n,mark:i}=t;if("line"===i||Ia(i)&&"line"===i.type)for(const r of WGe){const s=n[Oh(r)];if(n[r]&&(de(s)&&!Hi(s.bin)||Pl(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:o}=t;return ce(function GWe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!r.x2,!!r.y2)),i({...t,mark:ye(o)?{...o,type:"rule"}:"rule"},n)}}function tue({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...ie(e),...ie(t)]);for(const o of r){const s=t[o],a=e[o];if(Qe(s)){const l={...a,...s};i[o]=l}else Rv(s)?i[o]={...s,condition:{...a,...s.condition}}:s||null===s?i[o]=s:(n||Ra(a)||Me(a)||Qe(a)||J(a))&&(i[o]=a)}}else i=t;return!i||zt(i)?void 0:i}function nue(e){const{parentProjection:t,projection:n}=e;return t&&n&&ce(function IWe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Gt(t)} is overridden by a child projection ${Gt(n)}.`}({parentProjection:t,projection:n})),n??t}function b8(e){return le(e,"filter")}function iue(e){return le(e,"lookup")}function UKe(e){return le(e,"pivot")}function HKe(e){return le(e,"density")}function zKe(e){return le(e,"quantile")}function GKe(e){return le(e,"regression")}function WKe(e){return le(e,"loess")}function qKe(e){return le(e,"sample")}function YKe(e){return le(e,"window")}function KKe(e){return le(e,"joinaggregate")}function XKe(e){return le(e,"flatten")}function QKe(e){return le(e,"calculate")}function rue(e){return le(e,"bin")}function JKe(e){return le(e,"impute")}function ZKe(e){return le(e,"timeUnit")}function eXe(e){return le(e,"aggregate")}function tXe(e){return le(e,"stack")}function nXe(e){return le(e,"fold")}function iXe(e){return le(e,"extent")&&!le(e,"density")&&!le(e,"regression")}function oue(e,t){const{transform:n,...i}=e;return n?{...i,transform:n.map(o=>{if(b8(o))return{filter:w8(o,t)};if(rue(o)&&Rh(o.bin))return{...o,bin:aue(o.bin)};if(iue(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o})}:e}function sue(e,t){const n=Ke(e);if(de(n)&&Rh(n.bin)&&(n.bin=aue(n.bin)),zh(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(Ov(n))if(J(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:o,test:s,...a}=i;return o?i:{...a,test:w8(i,t)}});else{const{selection:i,param:r,test:o,...s}=sue(n.condition,t);n.condition=r?n.condition:{...s,test:w8(n.condition,t)}}return n}function aue(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function w8(e,t){const n=i=>Um(i,r=>{var o;const a={param:r,empty:t.emptySelections[r]??!0};return(o=t.selectionPredicates)[r]??(o[r]=[]),t.selectionPredicates[r].push(a),a});return e.selection?n(e.selection):Um(e.test||e.filter,i=>i.selection?n(i.selection):i)}class E8 extends m8{map(t,n){const i=n.selections??[];if(t.params&&!Wu(t)){const r=[];for(const o of t.params)d8(o)?i.push(o):r.push(o);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),o=[];for(const s of i)if(s.views&&s.views.length)for(const a of s.views)(be(a)&&(a===t.name||r.includes(a))||J(a)&&a.map(l=>r.indexOf(l)).every((l,u,c)=>-1!==l&&(0===u||l>c[u-1])))&&o.push(s);else o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=E8.prototype[e];E8.prototype[e]=function(n,i){return t.call(this,n,sXe(n,i))}}function sXe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function lue(e,t){void 0===t&&(t=Wle(e.config));const n=function cXe(e,t={}){const n={config:t};return uXe.map(aXe.map(lXe.map(e,n),n),n)}(e,t),{width:i,height:r}=e,o=function dXe(e,t,n){let{width:i,height:r}=t;const o=Wu(e)||yT(e),s={};o?"container"==i&&"container"==r?(s.type="fit",s.contains="padding"):"container"==i?(s.type="fit-x",s.contains="padding"):"container"==r&&(s.type="fit-y",s.contains="padding"):("container"==i&&(ce(eae("width")),i=void 0),"container"==r&&(ce(eae("height")),r=void 0));const a={type:"pad",...s,...n?uue(n.autosize):{},...uue(e.autosize)};if("fit"===a.type&&!o&&(ce('Autosize "fit" only works for single views and layered views.'),a.type="pad"),"container"==i&&!("fit"==a.type||"fit-x"==a.type)&&ce(tae("width")),"container"==r&&!("fit"==a.type||"fit-y"==a.type)&&ce(tae("height")),!Yo(a,{type:"pad"}))return a}(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const aXe=new class $Ke extends m8{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[HYe,WYe,ZYe,new FKe,new LKe]}map(t,n){if(Wu(t)){const i=Gh(t.encoding,Pu),r=Gh(t.encoding,Lu),o=Gh(t.encoding,$x);if(i||r||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,o=y8(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return function DKe(e){return!J(e.repeat)&&le(e.repeat,"layer")}(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...o}=t,{row:s,column:a,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:r}},n):{...o,layer:l.map(d=>{const f={...u,layer:d},h=`${(r.name?`${r.name}_`:"")+c}child__layer_${yn(d)}`,p=this.mapLayerOrUnit(r,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:o,...s}=t;!J(i)&&t.columns&&(t=fo(t,["columns"]),ce(oae("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!J(i)&&i.row||[l?l.row:null],d=!J(i)&&i.column||[l?l.column:null],f=J(i)&&i||[l?l.repeat:null];for(const p of f)for(const g of c)for(const m of d){const _={repeat:p,row:g,column:m,layer:l.layer},y=(r.name?`${r.name}_`:"")+u+"child__"+(J(i)?`${yn(p)}`:(i.row?`row_${yn(g)}`:"")+(i.column?`column_${yn(m)}`:"")),v=this.map(r,{...n,repeater:_,repeaterPrefix:y});v.name=y,a.push(fo(v,["data"]))}const h=J(i)?t.columns:i.column?i.column.length:1;return{data:r.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:i}=t;return Iv(i)&&t.columns&&(t=fo(t,["columns"]),ce(oae("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=nue({parentProjection:s,projection:r}),u=tue({parentEncoding:o,encoding:y8(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:i,column:r,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:i,column:r,facet:o},n),_=y8(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:_,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:o}=t;if(i||r){o&&ce(function HWe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}([...i?[Pu]:[],...r?[Lu]:[]]));const s={},a={};for(const l of[Pu,Lu]){const u=t[l];if(u){const{align:c,center:d,spacing:f,columns:h,...p}=u;s[l]=p;for(const g of["align","center","spacing"])void 0!==u[g]&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}{const{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:PKe(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:o,projection:s,...a}=t,l={...r,parentEncoding:tue({parentEncoding:n,encoding:o,layer:!0}),parentProjection:nue({parentProjection:i,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}},lXe=new class oXe extends m8{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=oue(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if((t=oue(t,n)).encoding){const i={};for(const[r,o]of Ed(t.encoding))i[r]=sue(o,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:Ed(i).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;"single"===c.type?(c.type="point",c.toggle=!1):"multi"===c.type&&(c.type="point"),n.emptySelections[o]="none"!==u;for(const d of Ui(n.selectionPredicates[o]??{}))d.empty="none"!==u;return{name:o,value:a,select:c,bind:l}})}:t}},uXe=new E8;function uue(e){return be(e)?{type:e}:e??{}}const pXe=["background","padding"];function cue(e,t){const n={};for(const i of pXe)e&&void 0!==e[i]&&(n[i]=Ko(e[i]));return t&&(n.params=e.params),n}class Yu{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Yu(Ke(this.explicit),Ke(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Hn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){void 0!==n&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){void 0!==n[t]?this.set(t,n[t],!0):void 0!==i[t]&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){void 0!==n[t]&&this.set(t,n[t],!0)}copyAll(t){for(const n of ie(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function $l(e){return{explicit:!0,value:e}}function Xo(e){return{explicit:!1,value:e}}function due(e){return(t,n,i,r)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:vT(t,n,i,r)}}function vT(e,t,n,i){return e.explicit&&t.explicit&&ce(function tqe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gt(n)} and ${Gt(i)}). Using ${Gt(n)}.`}(n,i,e.value,t.value)),e}function Fd(e,t,n,i,r=vT){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Yo(e.value,t.value)?e:r(e,t,n,i)}class gXe extends Yu{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function o_(e){return le(e,"url")}function Lv(e){return le(e,"values")}function fue(e){return le(e,"name")&&!o_(e)&&!Lv(e)&&!Pd(e)}function Pd(e){return e&&(hue(e)||pue(e)||D8(e))}function hue(e){return le(e,"sequence")}function pue(e){return le(e,"sphere")}function D8(e){return le(e,"graticule")}var Cn=(()=>{return(e=Cn||(Cn={}))[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid",Cn;var e})();function gue({invalid:e,isPath:t}){switch(Hae(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function mue(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Ns(r.field),r}function Wh(e,t=!0,n=nr){if(J(e)){const i=e.map(r=>Wh(r,t,n));return t?`[${i.join(", ")}]`:i}return Ph(e)?n(t?Lh(e):function Tqe(e){const t=T5(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(Gt(e)):e}function _Xe(e,t){for(const n of Ui(e.component.selection??{})){const i=n.name;let r=`${i}${Ld}, ${"global"===n.resolve?"true":`{unit: ${Yh(e)}}`}`;for(const o of xT)!o.defined(n)||(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(r=o.modifyExpr(e,n,r)));t.push({name:i+YXe,on:[{events:{signal:n.name+Ld},update:`modify(${fe(n.name+qh)}, ${r})`}]})}return C8(t)}function yXe(e,t){if(e.component.selection&&ie(e.component.selection).length){const n=fe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:bd("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return C8(t)}function _ue(e,t){for(const n of Ui(e.component.selection??{}))for(const i of xT)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function C8(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class jt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){this._children.includes(t)?ce("Attempt to add the same child twice."):void 0!==n?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class mo extends jt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${Sse()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function S8(e){return void 0!==e.as}function yue(e){return`${e}_end`}class Bl extends jt{clone(){return new Bl(null,Ke(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if($h(l)){if(Sn(n)){const{mark:c,markDef:d,config:f}=n,h=Od({fieldDef:o,markDef:d,config:f});(Nv(c)||h)&&(u={timeUnit:Ai(l),field:a})}}else u={as:me(o,{forAs:!0}),field:a,timeUnit:l};if(Sn(n)){const{mark:c,markDef:d,config:f}=n,h=Od({fieldDef:o,markDef:d,config:f});Nv(c)&&zn(s)&&.5!==h&&(u.rectBandPosition=h)}u&&(r[pt(u)]=u)}return r},{});return zt(i)?null:new Bl(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},s={...r,timeUnit:Ai(i)};return new Bl(t,{[pt(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Ed(this.timeUnits)){const o=S8(r)?r.as:`${r.field}_end`;t.has(o)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(Ui(this.timeUnits).map(t=>S8(t)?t.as:yue(t.field)))}dependentFields(){return new Set(Ui(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${pt(this.timeUnits)}`}assemble(){const t=[];for(const n of Ui(this.timeUnits)){const{rectBandPosition:i}=n,r=Ai(n.timeUnit);if(S8(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=r,c=[s,`${s}_end`];t.push({field:Ns(o),type:"timeunit",...a?{units:Yx(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...bue(c,i,r))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=vue({timeUnit:r,field:s}),l=yue(s);t.push({type:"formula",expr:a,as:l}),t.push(...bue([s,l],i,r))}}return t}}const bT="offsetted_rect_start",wT="offsetted_rect_end";function vue({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,o=wae(i),{part:s,step:a}=Sae(o,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function bue([e,t],n,i){if(void 0!==n&&.5!==n){const r=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:wue([vue({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${bT}`},{type:"formula",expr:wue([r,o],n+.5),as:`${e}_${wT}`}]}return[]}function wue([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const $v="_tuple_fields";class DXe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const CXe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new DXe),o={},s={},a=new Set,l=(p,g)=>{const m="visual"===g?p.channel:p.field;let _=yn(`${i}_${m}`);for(let y=1;a.has(_);y++)_=yn(`${i}_${m}_${y}`);return a.add(_),{[g]:_}},u=t.type,c=e.config.selection[u],d=void 0!==n.value?ve(n.value):null;let{fields:f,encodings:h}=ye(n.select)?n.select:{};if(!f&&!h&&d)for(const p of d)if(ye(p))for(const g of ie(p))GGe(g)?(h||(h=[])).push(g):"interval"===u?(ce('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),h=c.encodings):(f??(f=[])).push(g);!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){ce(mWe(p,g.aggregate));continue}if(!m){ce(iae(p));continue}if(g.timeUnit&&!$h(g.timeUnit)){m=e.vgField(p);const _={timeUnit:g.timeUnit,as:m,field:g.field};s[pt(_)]=_}if(!o[m]){const y={field:m,channel:p,type:"interval"===u&&kl(p)&&ka(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",index:r.items.length};y.signals={...l(y,"data"),...l(y,"visual")},r.items.push(o[m]=y),r.hasField[m]=o[m],r.hasSelectionId=r.hasSelectionId||m===Pa,Ise(p)?(y.geoChannel=p,y.channel=kse(p),r.hasChannel[y.channel]=o[m]):r.hasChannel[p]=o[m]}}else ce(iae(p))}for(const p of f??[]){if(r.hasField[p])continue;const g={type:"E",field:p,index:r.items.length};g.signals={...l(g,"data")},r.items.push(g),r.hasField[p]=g,r.hasSelectionId=r.hasSelectionId||p===Pa}d&&(t.init=d.map(p=>r.items.map(g=>ye(p)?void 0!==p[g.geoChannel||g.channel]?p[g.geoChannel||g.channel]:p[g.field]:p))),zt(s)||(r.timeUnit=new Bl(null,s))},signals:(e,t,n)=>{const i=t.name+$v;return n.filter(o=>o.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(mue)})}},Ku={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!kl(r))continue;const o=e.getScaleComponent(r),s=o?o.get("type"):void 0;"sequential"==s&&ce("Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc"),o&&ka(s)?(o.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)):ce("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>0===n.filter(a=>a.name===s.signals.data).length);if(!e.parent||Eue(e)||0===i.length)return n;const r=n.find(s=>s.name===t.name);let o=r.update;if(o.includes(Wue))r.update=`{${i.map(s=>`${fe(Ns(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const a=`${fe(Ns(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}r.update=o}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Eue(e))for(const i of t.scales){const r=n.find(o=>o.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function x8(e,t){return`domain(${fe(e.scaleName(t))})`}function Eue(e){return e.parent&&m_(e.parent)&&!e.parent.parent}const s_="_brush",Due="_scale_trigger",Bv="geo_interval_init_tick",xXe={defined:e=>"interval"===e.type,parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...ye(n.select)?n.select:{}};r.fields=[Pa],r.encodings||(r.encodings=n.value?ie(n.value):[Aa,Ta]),n.select={type:"interval",...r}}if(t.translate&&!Ku.defined(t)){const r=`!event.item || event.item.mark.name !== ${fe(t.name+s_)}`;for(const o of t.events){if(!o.between){ce(`${o} is not an ordered event stream for interval selections.`);continue}const s=ve((i=o.between[0]).filter??(i.filter=[]));s.includes(r)||s.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+Ld,o=Ui(t.project.hasChannel).filter(a=>a.channel===vn||a.channel===Ti),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(function TXe(e,t,n,i){const r=!e.hasProjection,o=n.channel,s=n.signals.visual,a=fe(r?e.scaleName(o):e.projectionName()),l=f=>`scale(${a}, ${f})`,u=e.getSizeSignalRef(o===vn?"width":"height").signal,c=`${o}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(r){const f=n.signals.data,h=Ku.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=i?{init:Wh(i,!0,l)}:{value:[]};return d.push({events:{signal:t.name+Due},update:ka(g)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:s,...m,on:d},{name:f,...i?{init:Wh(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}{const f=o===vn?0:1,h=t.name+"_init";return[{name:s,...i?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]},on:d}]}}(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=fe(e.projectionName()),l=e.projectionName()+"_center",{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=c?s&&s[c.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":g("width")}, ${f?f+"[1]":g("height")}]]`;s&&(n.unshift({name:i+"_init",init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(D=>D.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const v=`vlSelectionTuples(intersect(${m}, {markname: ${fe(e.getName("marks"))}}, unit.mark), {unit: ${Yh(e)}})`,b=o.map(w=>w.signals.visual);return n.concat({name:r,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...s?[{signal:Bv}]:[]],update:v}]})}{if(!Ku.defined(t)){const u=i+Due,c=o.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,g=fe(e.scaleName(f)),_=ka(e.getScaleComponent(f).get("type"))?"+":"";return`(!isArray(${h}) || (${_}invert(${g}, ${p})[0] === ${_}${h}[0] && ${_}invert(${g}, ${p})[1] === ${_}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Yh(e)}, fields: ${i+$v}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Wh(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Sn(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===Bv).length||n.unshift({name:Bv,value:null,on:[{events:"timer{1}",update:`${Bv} === null ? {} : ${Bv}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:o}=t.project.hasChannel,s=r?.signals.visual,a=o?.signals.visual,l=`data(${fe(t.name+qh)})`;if(Ku.defined(t)||!r&&!o)return n;const u={x:void 0!==r?{signal:`${s}[0]`}:{value:0},y:void 0!==o?{signal:`${a}[0]`}:{value:0},x2:void 0!==r?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${a}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const m of ie(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${Yh(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=ie(h).reduce((m,_)=>(m[_]=[{test:[void 0!==r&&`${s}[0] !== ${s}[1]`,void 0!==o&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[_]},{value:null}],m),{}),g=f??(t.translate?"move":null);return[{name:`${i+s_}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:i+s_,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}},AXe={defined:e=>"point"===e.type,signals:(e,t,n)=>{const i=t.name,r=i+$v,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Ui(e.component.selection??{}).reduce((d,f)=>"interval"===f.type?d.concat(f.name+s_):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(a?` && ${a}`:"");let u=`unit: ${Yh(e)}, `;u+=t.project.hasSelectionId?`${Pa}: ${s}[${fe(Pa)}]`:`fields: ${r}, values: [${o.items.map(f=>e.fieldDef(f.channel)?.bin?`[${s}[${fe(e.vgField(f.channel,{}))}], ${s}[${fe(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${fe(f.field)}]`).join(", ")}]`;const c=t.events;return n.concat([{name:i+Ld,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function a_({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const o=Ov(t)&&t.condition;let s=[];o&&(s=ve(o).map(u=>{const c=r(u);if(function EYe(e){return le(e,"param")}(u)){const{param:d,empty:f}=u;return{test:Xue(e,{param:d,empty:f}),...c}}return{test:TT(e,u.test),...c}})),void 0!==i&&s.push(i);const a=r(t);return void 0!==a&&s.push(a),s.length>1||1===s.length&&Boolean(s[0].test)?{[n]:s}:1===s.length?{[n]:s[0]}:{}}function T8(e,t="text"){return a_({model:e,channelDef:e.encoding[t],vgChannel:t,mainRefFn:i=>ET(i,e.config),invalidValueRef:void 0})}function ET(e,t,n="datum"){if(e){if(Ra(e))return fn(e.value);if(Qe(e)){const{format:i,formatType:r}=lT(e);return Y5({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function Sue(e,t={}){const{encoding:n,markDef:i,config:r,stack:o}=e,s=n.tooltip;if(J(s))return{tooltip:Tue({tooltip:s},o,r,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return a_({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=ET(u,r,a);if(c)return c;if(null===u)return;let d=Wt("tooltip",i,r);return!0===d&&(d={content:"encoding"}),be(d)?{value:d}:ye(d)?Me(d)?d:"encoding"===d.content?Tue(n,o,r,t):{signal:a}:void 0},invalidValueRef:void 0})}}function xue(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},o=new Set,s=i?"datum.datum":"datum",a=[];function l(c,d){const f=Oh(d),h=Gr(c)?c:{...c,type:e[f].type},g=ve(h.title||Z5(h,r)).join(", ").replaceAll(/"/g,'\\"');let m;if(zn(d)){const _="x"===d?"x2":"y2",y=Fa(e[_]);if(Hi(h.bin)&&y){const v=me(h,{expr:s}),b=me(y,{expr:s}),{format:w,formatType:D}=lT(h);m=kv(v,b,w,D,r),o.add(_)}}if((zn(d)||d===Ms||d===xa)&&t&&t.fieldChannel===d&&"normalize"===t.offset){const{format:_,formatType:y}=lT(h);m=Y5({fieldOrDatumDef:h,format:_,formatType:y,expr:s,config:r,normalizeStack:!0}).signal}m??(m=ET(h,r,s).signal),a.push({channel:d,key:g,value:m})}t8(e,(c,d)=>{de(c)?l(c,d):oT(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:f}of a)!o.has(c)&&!u[d]&&(u[d]=f);return u}function Tue(e,t,n,{reactiveGeom:i}={}){const r=xue(e,t,n,{reactiveGeom:i}),o=Ed(r).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function NXe(e){const{markDef:t,config:n}=e,i=Wt("aria",t,n);return!1===i?{}:{...i?{aria:i}:{},...MXe(e),...kXe(e)}}function MXe(e){const{mark:t,markDef:n,config:i}=e;if(!1===i.aria)return{};const r=Wt("ariaRoleDescription",n,i);return null!=r?{ariaRoleDescription:{value:r}}:Ce(fWe,t)?{}:{ariaRoleDescription:{value:t}}}function kXe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,o=t.description;if(o)return a_({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>ET(l,e.config),invalidValueRef:void 0});const s=Wt("description",n,i);if(null!=s)return{description:fn(s)};if(!1===i.aria)return{};const a=xue(t,r,i);return zt(a)?void 0:{description:{signal:Ed(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Wi(e,t,n={}){const{markDef:i,encoding:r,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=r[e];void 0===a&&(l??(l=Wt(e,i,o,{vgChannel:s,ignoreVgConfig:!Ov(u)})),void 0!==l&&(a=fn(l)));const c={markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=Gae({...c,scaleChannel:e,channelDef:u});return a_({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:d,mainRefFn:h=>q5({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function Aue(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:o}=n,s=t.filled??Wt("filled",n,r),a=ft(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Wt(!0===s?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[!0===s&&"color"]??a,u=Wt(!1===s?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[!1===s&&"color"],c=s?"fill":"stroke",d={...l?{fill:fn(l)}:{},...u?{stroke:fn(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&ce(uae("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...Wi("color",e,{vgChannel:c,defaultValue:s?l:u}),...Wi("fill",e,{defaultValue:i.fill?l:void 0}),...Wi("stroke",e,{defaultValue:i.stroke?u:void 0})}}function IXe(e){const{encoding:t,mark:n}=e,i=t.order;return!Id(n)&&Ra(i)?a_({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>fn(r.value),invalidValueRef:void 0}):{}}function l_({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const o=`${e}Offset`,s=t[o],a=n[o];if(("xOffset"===o||"yOffset"===o)&&a)return{offsetType:"encoding",offset:q5({channel:o,channelDef:a,markDef:t,config:i?.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:fn(s),bandPosition:r})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Wr(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:o,config:s,stack:a}=t,l=r[e],u=r[Ml(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=l_({channel:e,markDef:o,encoding:r,model:t,bandPosition:.5}),p=A8({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),g=!l&&zn(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:function OXe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:o,markDef:s}=e;if(Qe(n)&&r&&t===r.fieldChannel){if(de(n)){let a=n.bandPosition;if(void 0===a&&"text"===s.type&&("radius"===t||"theta"===t)&&(a=.5),void 0!==a)return nT({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Uh(n,i,{suffix:"end"},{offset:o})}return W5(e)}({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:"encoding"===h?0:void 0});return g?{[i||e]:g}:void 0}function A8({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:o,config:s}=e;return()=>{const a=Oh(n),l=Ad(n),u=Wt(n,o,s,{vgChannel:l});if(void 0!==u)return Mv(n,u);switch(t){case"zeroOrMin":return Nue({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return Nue({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[go(n)],mult:.5}}}}function Nue({mainChannel:e,config:t,...n}){const i=zae(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if("zeroOrMin"===r)return{value:0};const{widthSignal:o,heightSignal:s}=r.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return"zeroOrMin"===r?{value:0}:{signal:"2*PI"};case"x":return"zeroOrMin"===r?{value:0}:{field:{group:"width"}};case"y":return"zeroOrMin"===r?{field:{group:"height"}}:{value:0}}}const RXe={left:"x",center:"xc",right:"x2"},FXe={top:"y",middle:"yc",bottom:"y2"};function Mue(e,t,n,i="middle"){if("radius"===e||"theta"===e)return Ad(e);const r="x"===e?"align":"baseline",o=Wt(r,t,n);let s;return Me(o)?(ce(function zWe(e){return`The ${e} for range marks cannot be an expression`}(r)),s=void 0):s=o,"x"===e?RXe[s||("top"===i?"left":"center")]:FXe[s||i]}function DT(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?kue(e,t,{defaultPos:n,defaultPos2:i}):Wr(e,t,{defaultPos:n})}function kue(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:o}=t,s=Ml(e),a=go(e),l=function PXe(e,t,n){const{encoding:i,mark:r,markDef:o,stack:s,config:a}=e,l=Oh(n),u=go(n),c=Ad(n),d=i[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=l_(n in i||n in o?{channel:n,markDef:o,encoding:i,model:e}:{channel:l,markDef:o,encoding:i,model:e});if(!d&&("x2"===n||"y2"===n)&&(i.latitude||i.longitude)){const m=go(n),_=e.markDef[m];return null!=_?{[m]:{value:_}}:{[c]:{field:e.getName(n)}}}const g=function LXe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Qe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Uh(t,o,{suffix:"start"},{offset:l}):W5({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:i,config:r,offset:l,defaultRef:u})}({channel:n,channelDef:d,channel2Def:i[n],markDef:o,config:a,scaleName:f,scale:h,stack:s,offset:p,defaultRef:void 0});return void 0!==g?{[c]:g}:CT(n,o)||CT(n,{[n]:E5(n,o,a.style),[u]:E5(u,o,a.style)})||CT(n,a[r])||CT(n,a.mark)||{[c]:A8({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}(t,i,s);return{...Wr(e,t,{defaultPos:n,vgChannel:l[a]?Mue(e,r,o):Ad(e)}),...l}}function CT(e,t){const n=go(e),i=Ad(e);if(void 0!==t[i])return{[i]:Mv(e,t[i])};if(void 0!==t[e])return{[i]:Mv(e,t[e])};if(t[n]){const r=t[n];if(!jh(r))return{[n]:Mv(e,r)};ce(function $We(e){return`Position range does not support relative band size for ${e}.`}(n))}}function Xu(e,t){const{config:n,encoding:i,markDef:r}=e,o=r.type,s=Ml(t),a=go(t),l=i[t],u=i[s],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=r.orient,h=i[a]??i.size??Wt("size",r,n,{vgChannel:a}),p=$se(t),g="bar"===o&&("x"===t?"vertical"===f:"horizontal"===f)||"tick"===o&&("y"===t?"vertical"===f:"horizontal"===f);return!de(l)||!(on(l.bin)||Hi(l.bin)||l.timeUnit&&!u)||h&&!jh(h)||i[p]||Ni(d)?(Qe(l)&&Ni(d)||g)&&!u?function BXe(e,t,n){const{markDef:i,encoding:r,config:o,stack:s}=n,a=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=go(t),d=Ml(t),f=$se(t),h=n.scaleName(f),p=n.getScaleComponent(h5(t)),g="tick"===i.type||"horizontal"===a&&"y"===t||"vertical"===a&&"x"===t;let m;(r.size||i.size)&&(g?m=Wi("size",n,{vgChannel:c,defaultRef:fn(i.size)}):ce(function JWe(e){return`Cannot apply size to non-oriented mark "${e}".`}(i.type)));const _=!!m,y=tle({channel:t,fieldDef:e,markDef:i,config:o,scaleType:(u||p)?.get("type"),useVlSizeChannel:g});m=m||{[c]:$Xe(c,h||l,p||u,o,y,!!e,i.type)};const b=Mue(t,i,o,"band"===(u||p)?.get("type")&&jh(y)&&!_?"top":"middle"),w="xc"===b||"yc"===b,{offset:D,offsetType:E}=l_({channel:t,markDef:i,encoding:r,model:n,bandPosition:w?.5:0}),C=W5({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:u,stack:s,offset:D,defaultRef:A8({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?"encoding"===E?0:.5:Me(y)?{signal:`(1-${y})/2`}:jh(y)?(1-y.band)/2:0});if(c)return{[b]:C,...m};{const N=Ad(d),k=m[c],R=D?{...k,offset:D}:k;return{[b]:C,[N]:J(C)?[C[0],{...C[1],offset:R}]:{...C,offset:R}}}}(l,t,e):kue(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function VXe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:o,encoding:s}=i,a=i.getScaleComponent(n),l=i.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=tle({channel:n,fieldDef:e,markDef:o,config:r,scaleType:u}),h=i.component.axes[n]?.[0]?.get("translate")??.5,p=zn(n)?Wt("binSpacing",o,r)??0:0,g=Ml(n),m=Ad(n),_=Ad(g),y=Il("minBandSize",o,r),{offset:v}=l_({channel:n,markDef:o,encoding:s,model:i,bandPosition:0}),{offset:b}=l_({channel:g,markDef:o,encoding:s,model:i,bandPosition:0}),w=function mYe({scaleName:e,fieldDef:t}){const n=me(t,{expr:"datum"});return`abs(scale("${e}", ${me(t,{expr:"datum",suffix:"end"})}) - scale("${e}", ${n}))`}({fieldDef:e,scaleName:l}),D=Iue(n,p,c,h,v,y,w),E=Iue(g,p,c,h,b??v,y,w),C=Me(d)?{signal:`(1-${d.signal})/2`}:jh(d)?(1-d.band)/2:.5,N=Od({fieldDef:e,fieldDef2:t,markDef:o,config:r});if(on(e.bin)||e.timeUnit){const k=e.timeUnit&&.5!==N;return{[_]:Oue({fieldDef:e,scaleName:l,bandPosition:C,offset:E,useRectOffsetField:k}),[m]:Oue({fieldDef:e,scaleName:l,bandPosition:Me(C)?{signal:`1-${C.signal}`}:1-C,offset:D,useRectOffsetField:k})}}if(Hi(e.bin)){const k=Uh(e,l,{},{offset:E});if(de(t))return{[_]:k,[m]:Uh(t,l,{},{offset:D})};if(Rh(e.bin)&&e.bin.step)return{[_]:k,[m]:{signal:`scale("${l}", ${me(e,{expr:"datum"})} + ${e.bin.step})`,offset:D}}}ce(pae(g))}({fieldDef:l,fieldDef2:u,channel:t,model:e})}function $Xe(e,t,n,i,r,o,s){if(jh(r)){if(!n)return{mult:r.band,field:{group:e}};{const l=n.get("type");if("band"===l){let u=`bandwidth('${t}')`;1!==r.band&&(u=`${r.band} * ${u}`);const c=Il("minBandSize",{type:s},i);return{signal:c?`max(${Ma(c)}, ${u})`:u}}1!==r.band&&(ce(function YWe(e){return`Cannot use the relative band size with ${e} scale.`}(l)),r=void 0)}}else{if(Me(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Fh(l)&&Ct(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:d}=i.scale,f=Hn(l,"tick"===s?d:"bar"===s?u:c);if(Me(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Ct(f))return{signal:`${1-f} * ${e}`}}return{value:g8(i.view,e)-2}}function Iue(e,t,n,i,r,o,s){if(Mse(e))return 0;const a="x"===e||"y2"===e,l=a?-t/2:t/2;if(Me(n)||Me(r)||Me(i)||o){const u=Ma(n),c=Ma(r),d=Ma(i),f=Ma(o),p=o?`(${s} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${s})) : ${l})`:l;return{signal:(d?`${d} + `:"")+(u?`(${u} ? -1 : 1) * `:"")+(c?`(${c} + ${p})`:p)}}return r=r||0,i+(n?-r-l:+r+l)}function Oue({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return nT({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:bT,endSuffix:wT}:{}})}const jXe=new Set(["aria","width","height"]);function Os(e,t){const{fill:n,stroke:i}="include"===t.color?Aue(e):{};return{...UXe(e.markDef,t),...Rue("fill",n),...Rue("stroke",i),...Wi("opacity",e),...Wi("fillOpacity",e),...Wi("strokeOpacity",e),...Wi("strokeWidth",e),...Wi("strokeDash",e),...IXe(e),...Sue(e),...T8(e,"href"),...NXe(e)}}function Rue(e,t){return t?{[e]:t}:{}}function UXe(e,t){return dWe.reduce((n,i)=>(!jXe.has(i)&&le(e,i)&&"ignore"!==t[i]&&(n[i]=fn(e[i])),n),{})}function N8(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,o)=>{let s;if(!kl(o)||!(s=e.getScaleType(o)))return;const a=zx(r.aggregate);if(function hYe(e){return"break-paths-filter-domains"===e||"break-paths-show-domains"===e}(G5({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a}))){const u=e.vgField(o,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});u&&i.add(u)}}),i.size>0)return{defined:{signal:[...i].map(o=>Kx(o,!0)).join(" && ")}}}function Fue(e,t){if(void 0!==t)return{[e]:fn(t)}}const M8="voronoi",Pue={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(M8)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,o=e.mark;if(Id(o))return ce(function _We(e){return`The "nearest" transform is not supported for ${e} marks.`}(o)),n;const s={name:e.getName(M8),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Sue(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?a=c:d.includes(M8)&&(l=!0)}),l||n.splice(a+1,0,s),n}},Lue={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!u8(e.bind),parse:(e,t,n)=>que(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,o=t.bind,s=t.init&&t.init[0],a=Pue.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{const c=yn(`${i}_${l.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...s?{init:Wh(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${fe(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(u=>u.name===i+Ld),s=i+$v,a=r.items.map(u=>yn(`${i}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},ST="_toggle",$ue={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+ST,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ld,i=t.name+ST;return`${i} ? null : ${n}, `+("global"===t.resolve?`${i} ? null : true, `:`${i} ? null : {unit: ${Yh(e)}}, `)+`${i} ? ${n} : null`}},HXe={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=be(t.clear)?bd(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Lue.defined(t))for(const i of t.project.items){const r=n.findIndex(o=>o.name===yn(`${t.name}_${i.field}`));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,o){-1!==r&&n[r].on&&n[r].on.push({events:t.clear,update:o})}if("interval"===t.type)for(const r of t.project.items){const o=n.findIndex(s=>s.name===r.signals.visual);i(o,"[0, 0]"),-1===o&&i(n.findIndex(a=>a.name===r.signals.data),"null")}else{let r=n.findIndex(o=>o.name===t.name+Ld);i(r,"null"),$ue.defined(t)&&(r=n.findIndex(o=>o.name===t.name+ST),i(r,"false"))}return n}},Bue={defined:e=>{const t="global"===e.resolve&&e.bind&&u8(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Pa;return t&&!n&&ce("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{const i=Ke(n);if(i.select=be(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},que(t,i),ye(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ve(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const r=c8(t.bind)?t.bind.legend:"click",o=be(r)?bd(r,"view"):ve(r);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=c8(t.bind)&&t.bind.legend,o=s=>a=>{const l=Ke(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${yn(s.field)}_legend`,l=`${i}_${a}`;if(0===n.filter(c=>c.name===l).length){const c=r.merge.map(o(`${a}_symbols`)).concat(r.merge.map(o(`${a}_labels`))).concat(r.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(f=>f.name===i+Ld),s=i+$v,a=r.items.filter(f=>f.hasLegend).map(f=>yn(`${i}_${yn(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(f=>f.name===i+ST),d=c8(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}},Vue="_translate_anchor",jue="_translate_delta",WXe={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Ku.defined(t),o=i+Vue,{x:s,y:a}=t.project.hasChannel;let l=bd(t.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+s_,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==s?`, extent_x: ${r?x8(e,vn):`slice(${s.signals.visual})`}`:"")+(void 0!==a?`, extent_y: ${r?x8(e,Ti):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+jue,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==s&&Uue(e,t,s,"width",n),void 0!==a&&Uue(e,t,a,"height",n),n}};function Uue(e,t,n,i,r){const o=t.name,s=o+Vue,a=o+jue,l=n.channel,u=Ku.defined(t),c=r.find(w=>w.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(i).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=`${s}.extent_${l}`,b=`${u&&f?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${u?l===vn?p?"":"-":p?"-":"":""}${a}.${l} / ${u?`${d}`:`span(${m})`}${u?"pow"===h?`, ${f.get("exponent")??1}`:"symlog"===h?`, ${f.get("constant")??1}`:"":""})`;c.on.push({events:{signal:a},update:u?b:`clampRange(${b}, 0, ${d})`})}const Hue="_zoom_anchor",zue="_zoom_delta",qXe={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Ku.defined(t),o=i+zue,{x:s,y:a}=t.project.hasChannel,l=fe(e.scaleName(vn)),u=fe(e.scaleName(Ti));let c=bd(t.zoom,"scope");return r||(c=c.map(d=>(d.markname=i+s_,d))),n.push({name:i+Hue,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&Gue(e,t,s,"width",n),void 0!==a&&Gue(e,t,a,"height",n),n}};function Gue(e,t,n,i,r){const o=t.name,s=n.channel,a=Ku.defined(t),l=r.find(y=>y.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(i).signal,c=e.getScaleComponent(s),d=c&&c.get("type"),f=a?x8(e,s):l.name,h=o+zue,_=`${a&&c?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear"}(${f}, ${o}${Hue}.${s}, ${h}${a?"pow"===d?`, ${c.get("exponent")??1}`:"symlog"===d?`, ${c.get("constant")??1}`:"":""})`;l.on.push({events:{signal:h},update:a?_:`clampRange(${_}, 0, ${u})`})}const qh="_store",Ld="_tuple",YXe="_modify",Wue="vlSelectionResolve",xT=[AXe,xXe,CXe,$ue,Lue,Ku,Bue,HXe,WXe,qXe,Pue];function Yh(e,{escape:t}={escape:!0}){let n=t?fe(e.name):e.name;const i=function KXe(e){let t=e.parent;for(;t&&!Qo(t);)t=t.parent;return t}(e);if(i){const{facet:r}=i;for(const o of Is)r[o]&&(n+=` + '__facet_${o}_' + (facet[${fe(i.vgField(o))}])`)}return n}function k8(e){return Ui(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function que(e,t){(be(t.select)||!t.select.on)&&delete e.events,(be(t.select)||!t.select.clear)&&delete e.clear,(be(t.select)||!t.select.toggle)&&delete e.toggle}function I8(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...I8(e.object)),t.push(...I8(e.property))),t)}function Yue(e){return"MemberExpression"===e.object.type?Yue(e.object):"datum"===e.object.name}function Kue(e){const t=K3(e),n=new Set;return t.visit(i=>{"MemberExpression"===i.type&&Yue(i)&&n.add(I8(i).slice(1).join("."))}),n}class u_ extends jt{clone(){return new u_(null,this.model,Ke(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=TT(this.model,this.filter,this),this._dependentFields=Kue(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Xue(e,t,n,i="datum"){const r=be(t)?t:t.param,o=yn(r),s=fe(o+qh);let a;try{a=e.getSelectionComponent(o,r)}catch{return`!!${o}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const c=`${a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${s}, ${i}${"global"===a.resolve?")":`, ${fe(a.resolve)})`}`,d=`length(data(${s}))`;return!1===t.empty?`${d} && ${c}`:`!${d} || ${c}`}function Que(e,t,n){const i=yn(t),r=n.encoding;let s,o=n.field;try{s=e.getSelectionComponent(i,t)}catch{return i}if(r||o){if(r&&!o){const a=s.project.items.filter(l=>l.channel===r);!a.length||a.length>1?(o=s.project.items[0].field,ce((a.length?"Multiple ":"No ")+`matching ${fe(r)} encoding found for selection ${fe(n.param)}. Using "field": ${fe(o)}.`)):o=a[0].field}}else o=s.project.items[0].field,s.project.items.length>1&&ce(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${fe(o)}.`);return`${s.name}[${fe(Ns(o))}]`}function TT(e,t,n){return wv(t,i=>be(i)?i:function Pqe(e){return le(e,"param")}(i)?Xue(e,i,n):Tae(i))}function O8(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function Vv(e,t,n,i={header:!1}){const{disable:r,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!r){for(const d in c){const f=d,h=PYe[f],p=c[f];if(h&&h!==t&&"both"!==h)delete c[f];else if(Pv(p)){const{condition:g,...m}=p,_=ve(g),y=fle[f];if(y){const{vgProp:v,part:b}=y;O8(c,b,v,[..._.map(D=>{const{test:E,...C}=D;return{test:TT(null,E),...C}}),m]),delete c[f]}else if(null===y){const v={signal:_.map(b=>{const{test:w,...D}=b;return`${TT(null,w)} ? ${qse(D)} : `}).join("")+qse(m)};c[f]=v}}else if(Me(p)){const g=fle[f];if(g){const{vgProp:m,part:_}=g;O8(c,_,m,p),delete c[f]}}ft(["labelAlign","labelBaseline"],f)&&null===c[f]&&delete c[f]}if("grid"===t){if(!c.grid)return;if(c.encode){const{grid:d}=c.encode;c.encode={...d?{grid:d}:{}},zt(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Hn(u,0)}}{if(!i.header&&e.mainExtracted)return;if(void 0!==a){let f=a;c.encode?.labels?.update&&Me(c.encode.labels.update.text)&&(f=Mh(a,"datum.label",c.encode.labels.update.text.signal)),O8(c,"labels","text",{signal:f})}if(null===c.labelAlign&&delete c.labelAlign,c.encode){for(const f of hle)e.hasAxisPart(f)||delete c.encode[f];zt(c.encode)&&delete c.encode}const d=function JXe(e,t){if(e)return J(e)&&!Md(e)?e.map(n=>Z5(n,t)).join(", "):e}(l,n);return{scale:s,orient:o,grid:!1,...d?{title:d}:{},...c,...!1===n.aria?{aria:!1}:{},zindex:Hn(u,0)}}}}function Jue(e){const{axes:t}=e.component,n=[];for(const i of Uu)if(t[i])for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const o="x"===i?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}return n}function Zue(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if("axisOrient"===r){const o="x"===n?"bottom":"left",s=t["x"===n?"axisBottom":"axisLeft"]||{},a=t["x"===n?"axisTop":"axisRight"]||{},l=new Set([...ie(s),...ie(a)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${o}" ? ${Ma(s[c])} : ${Ma(a[c])}`};return u}return t[r]})])}function tQe(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=ve(r);for(const o of r)n.push(t.style[o])}}return Object.assign.apply(null,n)}function R8(e,t,n,i={}){const r=Kse(e,n,t);if(void 0!==r)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==i[o]?.[e])return{configFrom:o,configValue:i[o][e]};return{}}const ece={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function nQe(e,t){return!Ni(e)&&de(t)&&!on(t?.bin)&&!Hi(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function iQe(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||nce(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||tce(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function oQe(e,t){if("x"===t&&ft(["quantitative","temporal"],e))return!0}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function sQe(e,t,n,i){if(n&&!ye(i)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy"}(t.type,n,de(t)&&!!t.timeUnit,de(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const o="x"===e?"width":"y"===e?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function lQe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Ni(t)&&"log"!==t){if(de(e)){if(on(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ft(["month","hours","day","quarter"],Ai(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:function uQe({format:e,fieldOrDatumDef:t}){if("d"===e)return 1;if(de(t)){const{timeUnit:n}=t;if(n){const i=Cae(n);if(i)return{signal:i}}}},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const i=ice(t,n);if(void 0!==i)return i;const r=t.typedFieldDef(n),s=t.fieldDef("x"===n?"x2":"y2");return Qse(r?[ele(r)]:[],de(s)?[ele(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function cQe(e,t){const n=e.values;return J(n)?dle(t,n):Me(n)?n:void 0}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function dQe(e,t){return"rect"===e&&aT(t)?1:0}(n,t)};function F8(e){return`(((${e.signal} % 360) + 360) % 360)`}function tce(e,t,n,i){if(void 0!==e){if("x"===n){if(Me(e)){const r=F8(e);return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${Me(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}return 45<e&&e<135||225<e&&e<315?"middle":Me(t)?{signal:`${t.signal} ${e<=45||315<=e?"===":"!=="} "top" ? "bottom" : "top"`}:(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(Me(e)){const r=F8(e);return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${Me(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}return e<=45||315<=e||135<=e&&e<=225?i?"middle":null:Me(t)?{signal:`${t.signal} ${45<=e&&e<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function nce(e,t,n){if(void 0===e)return;const i="x"===n,r=i?0:90,o=i?"bottom":"left";if(Me(e)){const s=F8(e);return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${Me(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}return(e+r)%180==0?i?null:"center":Me(t)?{signal:`${t.signal} ${r<e&&e<180+r?"===":"!=="} "${o}" ? "left" : "right"`}:(r<e&&e<180+r)==(t===o)?"left":"right"}function ice(e,t){const n="x"===t?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),o=i?i.title:void 0,s=r?r.title:void 0;return o&&s?Jse(o,s):o||s||(void 0!==o?o:void 0!==s?s:void 0)}class c_ extends jt{clone(){return new c_(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Kue(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(zh(i)&&Zae(i.sort)){const{field:o,timeUnit:s}=i,a=i.sort,l=a.map((u,c)=>`${Tae({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new c_(t,{calculate:l,as:d_(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${pt(this.transform)}`}}function d_(e,t,n){return me(e,{prefix:t,suffix:"sort_index",...n})}function AT(e,t){return ft(["top","bottom"],t)?"column":ft(["left","right"],t)||"row"===e?"row":"column"}function f_(e,t,n,i){return Hn((t||{})[e],("row"===i?n.headerRow:"column"===i?n.headerColumn:n.headerFacet)[e],n.header[e])}function NT(e,t,n,i){const r={};for(const o of e){const s=f_(o,t||{},n,i);void 0!==s&&(r[o]=s)}return r}const P8=["row","column"],L8=["header","footer"];function fQe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=NT(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=AT(t,a),u=Dv(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...oce(u,l),...rce(l,u,o),...sce(i,r,t,nKe,Ole)}}}function rce(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=nce(t,"row"===e?"left":"top","row"===e?"y":"x");return i?{align:i}:{}}function oce(e,t){const n=tce(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function hQe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of L8)if(n[r])for(const o of n[r]){const s=gQe(e,t,r,n,o);null!=s&&i.push(s)}return i}function pQe(e,t){const{sort:n}=e;return Gu(n)?{field:me(n,{expr:"datum"}),order:n.order??"ascending"}:J(n)?{field:d_(e,t,{expr:"datum"}),order:"ascending"}:{field:me(e,{expr:"datum"}),order:n??"ascending"}}function $8(e,t,n){const{format:i,formatType:r,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=NT(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=Y5({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=AT(t,a);return{text:{signal:l?Mh(Mh(l,"datum.label",u),"datum.value",me(e,{expr:"parent"})):u},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...oce(o,c),...rce(c,o,s),...sce(n,e,t,iKe,Rle)}}function gQe(e,t,n,i,r){if(r){let o=null;const{facetFieldDef:s}=i,a=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:d}=NT(["labelOrient"],s.header,a,t);("row"===t&&!ft(["top","bottom"],d)||"column"===t&&!ft(["left","right"],d))&&(o=$8(s,t,a))}const l=Qo(e)&&!Iv(e.facet),u=r.axes,c=u?.length>0;if(o||c){const d="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:pQe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const mQe={column:{start:0,end:1},row:{start:1,end:0}};function _Qe(e,t){return mQe[t][e]}function sce(e,t,n,i,r){const o={};for(const s of i){if(!r[s])continue;const a=f_(s,t?.header,e,n);void 0!==a&&(o[r[s]]=a)}return o}function B8(e){return[...MT(e,"width"),...MT(e,"height"),...MT(e,"childWidth"),...MT(e,"childHeight")]}function MT(e,t){const n="width"===t?"x":"y",i=e.component.layoutSize.get(t);if(!i||"merged"===i)return[];const r=e.getSizeSignalRef(t).signal;if("step"===i){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Ni(s)&&Fh(a)){const l=e.scaleName(n);return Qo(e.parent)&&"independent"===e.parent.component.resolve.scale[n]?[ace(l,a)]:[ace(l,a),{name:r,update:lce(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==i){const o=r.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",l=`isFinite(${s}) ? ${s} : ${p8(e.config.view,o?"width":"height")}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}return[{name:r,value:i}]}function ace(e,t){const n=`${e}_step`;return Me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function lce(e,t,n){const i=t.get("type"),r=t.get("padding"),o=Hn(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s="band"===i?void 0!==s?s:r:1,`bandspace(${n}, ${Ma(s)}, ${Ma(o)}) * ${e}_step`}function uce(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function cce(e,t){return ie(e).reduce((n,i)=>({...n,...a_({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>fn(r.value),invalidValueRef:void 0})}),{})}function dce(e,t){if(Qo(t))return"theta"===e?"independent":"shared";if(m_(t))return"shared";if(t4(t))return zn(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function V8(e,t){const n=e.scale[t],i=zn(t)?"axis":"legend";return"independent"===n?("shared"===e[i][t]&&ce(function iqe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[i][t]||"shared"}const vQe={...Lle,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},fce=ie(vQe);class bQe extends Yu{}const hce={symbols:function wQe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:o}){if("symbol"!==o)return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&"trail"!==u;let d={...pWe({},n,sYe),...Aue(n,{filled:c})};const f=r.get("symbolOpacity")??l.legend.symbolOpacity,h=r.get("symbolFillColor")??l.legend.symbolFillColor,p=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=void 0===f?pce(a.opacity)??s.opacity:void 0;if(d.fill)if("fill"===i||c&&i===ho)delete d.fill;else if(le(d.fill,"field"))h?delete d.fill:(d.fill=fn(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=fn(g??1));else if(J(d.fill)){const m=j8(a.fill??a.color)??s.fill??(c&&s.color);m&&(d.fill=fn(m))}if(d.stroke)if("stroke"===i||!c&&i===ho)delete d.stroke;else if(le(d.stroke,"field")||p)delete d.stroke;else if(J(d.stroke)){const m=Hn(j8(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(d.stroke={value:m})}if(i!==ju){const m=de(t)&&mce(0,r,t);m?d.opacity=[{test:m,...fn(g??1)},fn(l.legend.unselectedOpacity)]:g&&(d.opacity=fn(g))}return d={...d,...e},zt(d)?void 0:d},gradient:function EQe(e,{model:t,legendType:n,legendCmpt:i}){if("gradient"!==n)return;const{config:r,markDef:o,encoding:s}=t;let a={};const u=void 0===(i.get("gradientOpacity")??r.legend.gradientOpacity)?pce(s.opacity)||o.opacity:void 0;return u&&(a.opacity=fn(u)),a={...a,...e},zt(a)?void 0:a},labels:function DQe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const o=n.legend(i)||{},s=n.config,a=de(t)?mce(0,r,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let d;Hh(c)?d=Oa({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):void 0===u&&void 0===c&&s.customFormatTypes&&("quantitative"===t.type&&s.numberFormatType?d=Oa({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):"temporal"===t.type&&s.timeFormatType&&de(t)&&void 0===t.timeUnit&&(d=Oa({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return zt(f)?void 0:f},entries:function CQe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function pce(e){return gce(e,(t,n)=>Math.max(t,n.value))}function j8(e){return gce(e,(t,n)=>Hn(t,n.value))}function gce(e,t){return function CYe(e){const t=e?.condition;return!!t&&(J(t)||Ra(t))}(e)?ve(e.condition).reduce(t,e.value):Ra(e)?e.value:void 0}function mce(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=fe(n.field);return i.map(o=>`(!length(data(${fe(yn(o)+qh)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const _ce={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return Yae(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Kae(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function kQe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Fl(r))return"horizontal"===n?"top"===i||"bottom"===i?yce(t,"width",s,o):s:yce(t,"height",l,a)}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function IQe(e){if(ft(["quantile","threshold","log","symlog"],e))return"greedy"}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??function xQe(e,t,n,i){if("shape"!==t){const r=j8(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>t_(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Km(n)&&Fl(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function SQe(e,t){const n=e.values;return J(n)?dle(t,n):Me(n)?n:void 0}(t,e)};function yce(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function vce(e){const t=Sn(e)?function OQe(e){const{encoding:t}=e,n={};for(const i of[ho,...Ple]){const r=mi(t[i]);!r||!e.getScaleComponent(i)||i===po&&de(r)&&r.type===Qm||(n[i]=PQe(e,i))}return n}(e):function LQe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){vce(i);for(const r of ie(i.component.legends))n.legend[r]=V8(e.component.resolve,r),"shared"===n.legend[r]&&(t[r]=bce(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of ie(t))for(const r of e.children)!r.component.legends[i]||"shared"===n.legend[i]&&delete r.component.legends[i];return t}(e);return e.component.legends=t,t}function FQe(e,t,n,i){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===i?.title)return!0}return e===(n||{})[t]}function PQe(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:o}=e,s=o.legend,a=new bQe({},function RQe(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function GXe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of Ui(e.component.selection??{})){const o=r.project.hasField[i]??r.project.hasChannel[t];if(o&&Bue.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),o.hasLegend=!0}}}(e,t,a);const l=void 0!==n?!n:s.disable;if(a.set("disable",l,void 0!==n),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=mi(r[t]),d=de(c)?Ai(c.timeUnit)?.unit:void 0,f=n.orient||o.legend.orient||"right",h=function TQe(e){const{legend:t}=e;return Hn(t.type,function AQe({channel:e,timeUnit:t,scaleType:n}){if(Km(e)){if(ft(["quarter","month","day"],t))return"symbol";if(Fl(n))return"gradient"}return"symbol"}(e))}({legend:n,channel:t,timeUnit:d,scaleType:u}),p=function NQe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??function MQe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}({legend:n,legendType:h,orient:f,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:f,legendType:h,direction:p};for(const b of fce){if("gradient"===h&&b.startsWith("symbol")||"symbol"===h&&b.startsWith("gradient"))continue;const w=b in _ce?_ce[b](g):n[b];if(void 0!==w){const D=FQe(w,b,n,e.fieldDef(t));(D||void 0===o.legend[b])&&a.set(b,w,D)}}const m=n?.encoding??{},_=a.get("selections"),y={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const b of["labels","legend","title","symbols","gradient","entries"]){const w=cce(m[b]??{},e),D=b in hce?hce[b](w,v):w;void 0!==D&&!zt(D)&&(y[b]={..._?.length&&de(c)?{name:`${yn(c.field)}_legend_${b}`}:{},..._?.length?{interactive:!!_}:{},update:D})}return zt(y)||a.set("encode",y,!!n?.encoding),a}function bce(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const o of fce){const s=Fd(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(a,l)=>{switch(o){case"symbolType":return $Qe(a,l);case"title":return Zse(a,l);case"type":return r=!0,Xo("symbol")}return vT(a,l,o,"legend")});e.setWithExplicit(o,s)}return r&&(e.implicit?.encode?.gradient&&Px(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Px(e.explicit,["encode","gradient"])),e}function $Qe(e,t){return"circle"===t.value?t:e}function wce(e){const t=e.component.legends,n={};for(const r of ie(t)){const s=Gt(e.getScaleComponent(r).get("domains"));if(n[s])for(const a of n[s])bce(a,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return Ui(n).flat().map(r=>function VQe(e,t){const{disable:n,labelExpr:i,selections:r,...o}=e.combine();if(!n){if(!1===t.aria&&null==o.aria&&(o.aria=!1),o.encode?.symbols){const s=o.encode.symbols.update;s.fill&&"transparent"!==s.fill.value&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(const a of Ple)o[a]&&delete s[a]}if(o.title||delete o.title,void 0!==i){let s=i;o.encode?.labels?.update&&Me(o.encode.labels.update.text)&&(s=Mh(i,"datum.label",o.encode.labels.update.text.signal)),function BQe(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}(o,"labels","text",{signal:s})}return o}}(r,e.config)).filter(r=>void 0!==r)}function Ece(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=Me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return ft(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const HQe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Dce extends Yu{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Cce(e){e.component.projection=Sn(e)?function zQe(e){if(e.hasProjection){const t=zi(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?function GQe(e){const t=[],{encoding:n}=e;for(const i of[[Aa,Ta],[ks,Na]])(mi(n[i[0]])||mi(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(po)&&e.typedFieldDef(po).type===Qm&&t.push({signal:e.getName(`geojson_${t.length}`)}),0===t.length&&t.push(e.requestDataName(Cn.Main)),t}(e):void 0,o=new Dce(e.projectionName(!0),{...zi(e.config.projection),...t},i,r);return o.get("type")||o.set("type","equalEarth",!1),o}}(e):function qQe(e){if(0===e.children.length)return;let t;for(const i of e.children)Cce(i);const n=o5(e.children,i=>{const r=i.component.projection;if(r){if(t){const o=function WQe(e,t){const n=o5(HQe,r=>!!(!Ce(e.explicit,r)&&!Ce(t.explicit,r)||Ce(e.explicit,r)&&Ce(t.explicit,r)&&Yo(e.get(r),t.get(r))));if(Yo(e.size,t.size)){if(n)return e;if(Yo(e.explicit,{}))return t;if(Yo(t.explicit,{}))return e}return null}(t,r);return o&&(t=o),!!o}return t=r,!0}return!0});if(t&&n){const i=e.projectionName(!0),r=new Dce(i,t.specifiedProjection,t.size,Ke(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),i),s.merged=!0)}return r}}(e)}function YQe(e,t,n,i){if(Fv(t,n)){const r=Sn(e)?e.axis(n)??e.legend(n)??{}:{},o=me(t,{expr:"datum"}),s=me(t,{expr:"datum",binSuffix:"end"});return{formulaAs:me(t,{binSuffix:"range",forAs:!0}),formula:kv(o,s,r.format,r.formatType,i)}}return{}}function Sce(e,t){return`${Use(e)}_${t}`}function U8(e,t,n){const r=Sce(cT(n,void 0)??{},t);return e.getName(`${r}_bins`)}function xce(e,t,n){let i,r;i=function XQe(e){return"as"in e}(e)?be(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[me(e,{forAs:!0}),me(e,{binSuffix:"end",forAs:!0})];const o={...cT(t,void 0)},s=Sce(o,e.field),{signal:a,extentSignal:l}=function KQe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,s);if(Gx(o.extent)){const c=o.extent;r=Que(n,c.param,c),delete o.extent}return{key:s,binComponent:{bin:o,field:e.field,as:[i],...a?{signal:a}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}}}}class Vl extends jt{clone(){return new Vl(null,Ke(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,s)=>{if(Gr(o)&&on(o.bin)){const{key:a,binComponent:l}=xce(o,o.bin,n);r[a]={...l,...r[a],...YQe(n,o,s,n.config)}}return r},{});return zt(i)?null:new Vl(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:o}=xce(n,n.bin,i);return new Vl(t,{[r]:o})}merge(t,n){for(const i of ie(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=xl([...this.bins[i].as,...t.bins[i].as],pt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Ui(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ui(this.bins).map(t=>t.field))}hash(){return`Bin ${pt(this.bins)}`}assemble(){return Ui(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:Ns(t.field),as:i,signal:t.signal,...Gx(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:Ns(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:me({field:i[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class La extends jt{clone(){return new La(null,new Set(this.dimensions),Ke(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},o=new Set;return i&&(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if("count"===l)r["*"]??(r["*"]={}),r["*"].count=new Set([me(s,{forAs:!0})]);else{if(Hu(l)||Nd(l)){const c=Hu(l)?"argmin":"argmax",d=l[c];r[d]??(r[d]={}),r[d][c]=new Set([me({op:c,field:d},{forAs:!0})])}else r[u]??(r[u]={}),r[u][l]=new Set([me(s,{forAs:!0})]);kl(a)&&"unaggregated"===n.scaleDomain(a)&&(r[u]??(r[u]={}),r[u].min=new Set([me({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([me({field:u,aggregate:"max"},{forAs:!0})]))}else!function QQe(e,t,n,i){const r=Sn(i)?i.encoding[Ml(t)]:void 0;if(Gr(n)&&Sn(i)&&nle(n,r,i.markDef,i.config)){e.add(me(n,{})),e.add(me(n,{suffix:"end"}));const{mark:o,markDef:s,config:a}=i,l=Od({fieldDef:n,markDef:s,config:a});Nv(o)&&.5!==l&&zn(t)&&(e.add(me(n,{suffix:bT})),e.add(me(n,{suffix:wT}))),n.bin&&Fv(n,t)&&e.add(me(n,{binSuffix:"range"}))}else if(Ise(t)){const o=kse(t);e.add(i.getName(o))}else e.add(me(n));return zh(n)&&function Kqe(e){return ye(e)&&"field"in e}(n.scale?.range)&&e.add(n.scale.range.field),e}(o,a,s,n)}),o.size+ie(r).length!==0)?new La(t,o,r):null}static makeFromTransform(t,n){var i;const r=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&("count"===a?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||me(s,{forAs:!0})])):(o[l]??(o[l]={}),(i=o[l])[a]??(i[a]=new Set),o[l][a].add(u||me(s,{forAs:!0}))))}for(const s of n.groupby??[])r.add(s);return r.size+ie(o).length===0?null:new La(t,r,o)}merge(t){return Ese(this.dimensions,t.dimensions)?(function JQe(e,t){for(const n of ie(t)){const i=t[n];for(const r of ie(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}(this.measures,t.measures),!0):(function bqe(...e){Ol.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ie(this.measures)])}producedFields(){const t=new Set;for(const n of ie(this.measures))for(const i of ie(this.measures[n])){const r=this.measures[n][i];0===r.size?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${pt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const o of ie(this.measures))for(const s of ie(this.measures[o]))for(const a of this.measures[o][s])i.push(a),t.push(s),n.push("*"===o?null:Ns(o));return{type:"aggregate",groupby:[...this.dimensions].map(Ns),ops:t,fields:n,as:i}}}class h_ extends jt{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const o of Is){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[me(s),...on(a)?[me(s,{binSuffix:"end"})]:[]],...Gu(l)?{sortField:l}:J(l)?{sortIndexField:d_(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Is)this[n]&&(t+=` ${n.charAt(0)}:${pt(this[n])}`);return t}get fields(){const t=[];for(const n of Is)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Is)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Uu){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if(Ni(r)&&Fh(o)){const a=Z8(IT(this.childModel,n));a?t[n]=a:ce(C5(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];r&&i&&i[r]&&(n?(o.push(`distinct_${i[r]}`),s.push("max")):(o.push(i[r]),s.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=iT,field:d}=l;o.push(d),s.push(c),a.push(me(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],o={};for(const l of P8){for(const u of L8){const c=(i[l]&&i[l][u])??[];for(const d of c)if(d.axes?.length>0){o[l]=!0;break}}if(o[l]){const u=`length(data("${this.facet.name}"))`;r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:"row"===l?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u}}]})}}const{row:s,column:a}=o;return(s||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:o,facet:s}=this;if(r&&o&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Lu,Pu])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,i));if(s){const a=this.assembleFacetHeaderData(i);a&&t.push(...a)}return t}}function Tce(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function eJe(e){const t={};return Fx(e.filter,n=>{if(xae(n)){let i=null;M5(n)?i=Ko(n.equal):I5(n)?i=Ko(n.lte):k5(n)?i=Ko(n.lt):O5(n)?i=Ko(n.gt):R5(n)?i=Ko(n.gte):F5(n)?i=n.range[0]:P5(n)&&(i=(n.oneOf??n.in)[0]),i&&(Ph(i)?t[n.field]="date":Ct(i)?t[n.field]="number":be(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}class pr extends jt{clone(){return new pr(null,Ke(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${pt(this._parse)}`}static makeExplicit(t,n,i){let r={};const o=n.data;return!Pd(o)&&o?.format?.parse&&(r=o.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const a of ie(i)){const l=r.getWithExplicit(a);void 0!==l.value&&(l.explicit||l.value===i[a]||"derived"===l.value||"flatten"===i[a]?delete i[a]:ce(sae(a,i[a],l.value)))}for(const a of ie(n)){const l=r.get(a);void 0!==l&&(l===n[a]?delete n[a]:ce(sae(a,n[a],l)))}const o=new Yu(n,i);r.copyAll(o);const s={};for(const a of ie(o.combine())){const l=o.get(a);null!==l&&(s[a]=l)}return 0===ie(s).length||r.parseNothing?null:new pr(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ie(this._parse)){const i=this._parse[n];1===Wm(n)&&(t[n]=i)}return t}producedFields(){return new Set(ie(this._parse))}dependentFields(){return new Set(ie(this._parse))}assembleTransforms(t=!1){return ie(this._parse).filter(n=>!t||Wm(n)>1).map(n=>{const i=function ZQe(e,t){const n=u5(e);return"number"===t?`toNumber(${n})`:"boolean"===t?`toBoolean(${n})`:"string"===t?`toString(${n})`:"date"===t?`toDate(${n})`:"flatten"===t?n:t.startsWith("date:")?`timeParse(${n},'${Tce(t.slice(5,t.length))}')`:t.startsWith("utc:")?`utcParse(${n},'${Tce(t.slice(4,t.length))}')`:(ce(function AWe(e){return`Unrecognized parse "${e}".`}(t)),null)}(n,this._parse[n]);return i?{type:"formula",expr:i,as:Gm(n)}:null}).filter(n=>null!==n)}}class $d extends jt{clone(){return new $d(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Pa])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Pa}}}class jv extends jt{clone(){return new jv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${pt(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class Uv extends jt{clone(){return new Uv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${pt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Kh extends jt{constructor(t){let n;if(super(null),t??(t={name:"source"}),Pd(t)||(n=t.format?{...fo(t.format,["parse"])}:{}),Lv(t))this._data={values:t.values};else if(o_(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];ft(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else pue(t)?this._data={values:[{type:"Sphere"}]}:(fue(t)||Pd(t))&&(this._data={});this._generator=Pd(t),t.name&&(this._name=t.name),n&&!zt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Hv,Ace=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};function H8(e){return e instanceof Kh||e instanceof jv||e instanceof Uv}class z8{constructor(){Hv.set(this,void 0),Ace(this,Hv,!1,"f")}setModified(){Ace(this,Hv,!0,"f")}get modifiedFlag(){return function(e,t,n,i){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}(this,Hv)}}Hv=new WeakMap;class Xh extends z8{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class G8 extends z8{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class rJe extends G8{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)void 0===i[n[r]]?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of ie(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class oJe extends G8{constructor(t){super(),this.requiresSelectionId=t&&k8(t)}run(t){t instanceof $d&&(this.requiresSelectionId&&(H8(t.parent)||t.parent instanceof La||t.parent instanceof pr)||(this.setModified(),t.remove()))}}class sJe extends z8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Bl&&(i=t.producedFields(),s5(i,n)&&(this.setModified(),t.removeFormulas(n),0===t.producedFields.length&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class aJe extends G8{constructor(){super()}run(t){t instanceof mo&&!t.isRequired()&&(this.setModified(),t.remove())}}class lJe extends Xh{run(t){if(!(H8(t)||t.numChildren()>1))for(const n of t.children)if(n instanceof pr)if(t instanceof pr)this.setModified(),t.merge(n);else{if(l5(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}class uJe extends Xh{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof pr);if(t.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const s of i){const a=s.parse;for(const l of ie(a))l in r?r[l]!==a[l]&&o.add(l):r[l]=a[l]}for(const s of o)delete r[s];if(!zt(r)){this.setModified();const s=new pr(t,r);for(const a of n){if(a instanceof pr)for(const l of ie(r))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof pr&&0===ie(a.parse).length&&a.remove()}}}}}class cJe extends Xh{run(t){t instanceof mo||t.numChildren()>0||t instanceof h_||t instanceof Kh||(this.setModified(),t.remove())}}class dJe extends Xh{run(t){const n=t.children.filter(r=>r instanceof Bl),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class fJe extends Xh{run(t){const n=t.children.filter(r=>r instanceof La),i={};for(const r of n){const o=pt(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of ie(i)){const o=i[r];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class hJe extends Xh{constructor(t){super(),this.model=t}run(t){const n=!(H8(t)||t instanceof u_||t instanceof pr||t instanceof $d),i=[],r=[];for(const o of t.children)o instanceof Vl&&(n&&!l5(t.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Vl?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class pJe extends Xh{run(t){const n=[...t.children];if(!zm(n,s=>s instanceof mo)||t.numChildren()<=1)return;const r=[];let o;for(const s of n)if(s instanceof mo){let a=s;for(;1===a.numChildren();){const[l]=a.children;if(!(l instanceof mo))break;a=l}r.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=o}}}class Qh extends jt{clone(){return new Qh(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??me(t)}hash(){return`JoinAggregateTransform ${pt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),t.push(void 0===o.field?null:o.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...void 0!==r?{groupby:r}:{}}}}class p_ extends jt{clone(){return new p_(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:o}=n,{marks:s,scales:a}=i;if("include-invalid-values"===s&&"include-invalid-values"===a)return null;const l=n.reduceFieldDef((u,c,d)=>{const f=kl(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,g=G5({scaleChannel:d,markDef:o,config:r,scaleType:h,isCountAggregate:zx(p)});"show"!==g&&"always-valid"!==g&&(u[c.field]=c)}return u},{});return ie(l).length?new p_(t,l):null}dependentFields(){return new Set(ie(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${pt(this.filter)}`}assemble(){const t=ie(this.filter).reduce((n,i)=>{const r=this.filter[i],o=me(r,{expr:"datum"});return null!==r&&("temporal"===r.type?n.push(`(isDate(${o}) || (${W8(o)}))`):"quantitative"===r.type&&n.push(W8(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function W8(e){return`isValid(${e}) && isFinite(+${e})`}class Qu extends jt{clone(){return new Qu(null,Ke(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:o,offset:s="zero"}=n,a=[],l=[];if(void 0!==n.sort)for(const d of n.sort)a.push(d.field),l.push(Hn(d.order,"ascending"));const u={field:a,order:l};let c;return c=function mJe(e){return J(e)&&e.every(t=>be(t))&&e.length>1}(o)?o:be(o)?[o,`${o}_end`]:[`${n.stack}_start`,`${n.stack}_end`],new Qu(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=i,u=o.map(h=>Fa(r[h])).filter(h=>!!h),c=function gJe(e){return e.stack.stackBy.reduce((t,n)=>{const r=me(n.fieldDef);return r&&t.push(r),t},[])}(n),d=n.encoding.order;let f;if(J(d)||de(d))f=Xse(d);else{const h=ile(d)?d.sort:"y"===s?"descending":"ascending";f=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new Qu(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${pt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[me(r,{binSuffix:"mid"})]:[me(r,{}),me(r,{binSuffix:"end"})]:[me(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:d=.5,bin:f}=c;if(f){const h=me(c,{expr:"datum"}),p=me(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${W8(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:me(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...o,...n],key:me(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:u,offset:a}),t}}class g_ extends jt{clone(){return new g_(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??me(t)}hash(){return`WindowTransform ${pt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const d of this.transform.window)n.push(d.op),i.push(this.getDefaultName(d)),r.push(void 0===d.param?null:d.param),t.push(void 0===d.field?null:d.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every(d=>b5(d)))return{type:"joinaggregate",as:i,ops:n,fields:t,...void 0!==s?{groupby:s}:{}};const a=[],l=[];if(void 0!==this.transform.sort)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const c=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:{field:a,order:l},...void 0!==c?{ignorePeers:c}:{},...void 0!==s?{groupby:s}:{},...void 0!==o?{frame:o}:{}}}}function q8(e){if(e instanceof h_)if(1!==e.numChildren()||e.children[0]instanceof mo){const t=e.model.component.data.main;Nce(t);const n=function _Je(e){return function t(n){if(!(n instanceof h_)){const i=n.clone();if(i instanceof mo){const r=Y8+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof La||i instanceof Qu||i instanceof g_||i instanceof Qh)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}}(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else{const t=e.children[0];(t instanceof La||t instanceof Qu||t instanceof g_||t instanceof Qh)&&t.addDimensions(e.fields),t.swapWithParent(),q8(e)}else e.children.map(q8)}function Nce(e){if(e instanceof mo&&e.type===Cn.Main&&1===e.numChildren()){const t=e.children[0];t instanceof h_||(t.swapWithParent(),Nce(e))}}const Y8="scale_";function K8(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!K8(t.children))return!1}return!0}function $a(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function Mce(e,t,n){let i=e.sources,r=!1;return r=$a(new aJe,i)||r,r=$a(new oJe(t),i)||r,i=i.filter(o=>o.numChildren()>0),r=$a(new cJe,i)||r,i=i.filter(o=>o.numChildren()>0),n||(r=$a(new lJe,i)||r,r=$a(new hJe(t),i)||r,r=$a(new sJe,i)||r,r=$a(new uJe,i)||r,r=$a(new fJe,i)||r,r=$a(new dJe,i)||r,r=$a(new rJe,i)||r,r=$a(new pJe,i)||r),e.sources=i,r}class Mi{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Mi(()=>t(n))}}function kce(e){Sn(e)?function vJe(e){const t=e.component.scales;for(const n of ie(t)){const i=EJe(e,n);if(t[n].setWithExplicit("domains",i),CJe(e,n),e.component.data.isFaceted){let o=e;for(;!Qo(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[n])for(const a of i.value)zu(a)&&(a.data=Y8+a.data.replace(Y8,""))}}}(e):function bJe(e){for(const n of e.children)kce(n);const t=e.component.scales;for(const n of ie(t)){let i,r=null;for(const o of e.children){const s=o.component.scales[n];if(s){i=void 0===i?s.getWithExplicit("domains"):Fd(i,s.getWithExplicit("domains"),"domains","scale",J8);const a=s.get("selectionExtent");r&&a&&r.param!==a.param&&ce("The same selection must be used to override scale domains in a layered view."),r=a}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}(e)}function EJe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=function wJe(e,t,n,i){if("unaggregated"===e){const{valid:r,reason:o}=Ice(t,n);if(!r)return void ce(o)}else if(void 0===e&&i.useUnaggregatedDomain){const{valid:r}=Ice(t,n);if(r)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),"x"===t&&mi(i.x2)?mi(i.x)?Fd(Bd(n,r,e,"x"),Bd(n,r,e,"x2"),"domain","scale",J8):Bd(n,r,e,"x2"):"y"===t&&mi(i.y2)?mi(i.y)?Fd(Bd(n,r,e,"y"),Bd(n,r,e,"y2"),"domain","scale",J8):Bd(n,r,e,"y2"):Bd(n,r,e,t)}function X8(e,t,n){const i=Ai(n)?.unit;return"temporal"===t||i?function DJe(e,t,n){return e.map(i=>({signal:`{data: ${dT(i,{timeUnit:n,type:t})}}`}))}(e,t,i):[e]}function Bd(e,t,n,i){const{encoding:r,markDef:o,mark:s,config:a,stack:l}=n,u=mi(r[i]),{type:c}=u,d=u.timeUnit,f=function mXe(e){const{marks:t,scales:n}=gue(e);return t===n?Cn.Main:"include-invalid-values"===n?Cn.PreFilterInvalid:Cn.PostFilterInvalid}({invalid:Il("invalid",o,a),isPath:Id(s)});if(function Yqe(e){return le(e,"unionWith")}(t)){const g=Bd(e,void 0,n,i);return $l([...X8(t.unionWith,c,d),...g.value])}if(Me(t))return $l([t]);if(t&&"unaggregated"!==t&&!Rae(t))return $l(X8(t,c,d));if(l&&i===l.fieldChannel){if("normalize"===l.offset)return Xo([[0,1]]);const g=n.requestDataName(f);return Xo([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}])}const h=kl(i)&&de(u)?function SJe(e,t,n){if(!Ni(n))return;const i=e.fieldDef(t),r=i.sort;if(Zae(r))return{op:"min",field:d_(i,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Gu(r))return Q8(r,o&&!s.has(r.field));if(function wYe(e){return le(e,"encoding")}(r)){const{encoding:a,order:l}=r,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=o&&!s.has(d);if(Hu(c)||Nd(c))return Q8({field:me(u),order:l},f);if(b5(c)||!c)return Q8({op:c,field:d,order:l},f)}else{if("descending"===r)return{op:"min",field:e.vgField(t),order:"descending"};if(ft(["ascending",void 0],r))return!0}}(n,i,e):void 0;if(Pl(u))return Xo(X8([u.datum],c,d));const p=u;if("unaggregated"===t){const{field:g}=u;return Xo([{data:n.requestDataName(f),field:me({field:g,aggregate:"min"})},{data:n.requestDataName(f),field:me({field:g,aggregate:"max"})}])}if(on(p.bin)){if(Ni(e))return Xo("bin-ordinal"===e?[]:[{data:bv(h)?n.requestDataName(f):n.requestDataName(Cn.Raw),field:n.vgField(i,Fv(p,i)?{binSuffix:"range"}:{}),sort:!0!==h&&ye(h)?h:{field:n.vgField(i,{}),op:"min"}}]);{const{bin:g}=p;if(on(g)){const m=U8(n,p.field,g);return Xo([new Mi(()=>{const _=n.getSignalName(m);return`[${_}.start, ${_}.stop]`})])}return Xo([{data:n.requestDataName(f),field:n.vgField(i,{})}])}}if(p.timeUnit&&ft(["time","utc"],e)){const g=r[Ml(i)];if(nle(p,g,o,a)){const m=n.requestDataName(f),_=Od({fieldDef:p,fieldDef2:g,markDef:o,config:a}),y=Nv(s)&&.5!==_&&zn(i);return Xo([{data:m,field:n.vgField(i,y?{suffix:bT}:{})},{data:m,field:n.vgField(i,{suffix:y?wT:"end"})}])}}return Xo(h?[{data:bv(h)?n.requestDataName(f):n.requestDataName(Cn.Raw),field:n.vgField(i),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(i)}])}function Q8(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":iT),...i?{field:Ns(i)}:{},...r?{order:r}:{}}}function CJe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,o=Rae(i)?i:void 0,s=Rh(r)&&Gx(r.extent)?r.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function Ice(e,t){const{aggregate:n,type:i}=e;return n?be(n)&&!lWe.has(n)?{valid:!1,reason:XWe(n)}:"quantitative"===i&&"log"===t?{valid:!1,reason:QWe(e)}:{valid:!0}:{valid:!1,reason:KWe(e)}}function J8(e,t,n,i){return e.explicit&&t.explicit&&ce(function nqe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gt(n)} and ${Gt(i)}). Using the union of the two domains.`}(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Z8(e){if(zu(e)&&be(e.field))return e.field;if(function uWe(e){return!J(e)&&le(e,"fields")&&!le(e,"data")}(e)){let t;for(const n of e.fields)if(zu(n)&&be(n.field))if(t){if(t!==n.field)return ce("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return ce("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function cWe(e){return!J(e)&&le(e,"fields")&&le(e,"data")}(e)){ce("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return be(t)?t:void 0}}function IT(e,t){return function xJe(e){const t=xl(e.map(s=>{if(zu(s)){const{sort:a,...l}=s;return l}return s}),pt),n=xl(e.map(s=>{if(zu(s)){const a=s.sort;return void 0!==a&&!bv(a)&&("op"in a&&"count"===a.op&&delete a.field,"ascending"===a.order&&delete a.order),a}}).filter(s=>void 0!==s),pt);if(0===t.length)return;if(1===t.length){const s=e[0];if(zu(s)&&n.length>0){let a=n[0];if(n.length>1){ce(fae);const l=n.filter(u=>ye(u)&&"op"in u&&"min"!==u.op);a=!n.every(u=>ye(u)&&"op"in u)||1!==l.length||l[0]}else ye(a)&&"field"in a&&s.field===a.field&&(a=!a.order||{order:a.order});return{...s,sort:a}}return s}const i=xl(n.map(s=>bv(s)||!("op"in s)||be(s.op)&&Ce(rWe,s.op)?s:(ce(function rqe(e){return`Dropping sort property ${Gt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(s)),!0)),pt);let r;1===i.length?r=i[0]:i.length>1&&(ce(fae),r=!0);const o=xl(e.map(s=>zu(s)?s.data:null),s=>s);return 1===o.length&&null!==o[0]?{data:o[0],fields:t.map(a=>a.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}(e.component.scales[t].get("domains").map(r=>(zu(r)&&(r.data=e.lookupDataSource(r.data)),r)))}function Oce(e){return m_(e)||t4(e)?e.children.reduce((t,n)=>t.concat(Oce(n)),Rce(e)):Rce(e)}function Rce(e){return ie(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...d}=r,f=function TJe(e,t,n,i){if(zn(n)){if(Fh(e))return{step:{signal:`${t}_step`}}}else if(ye(e)&&zu(e))return{...e,data:i.lookupDataSource(e.data)};return e}(r.range,o,n,e),h=IT(e,n),p=a?function EXe(e,t,n,i){const r=Que(e,t.param,t);return{signal:ka(n.get("type"))&&J(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}(e,a,i,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...void 0!==c?{reverse:c}:{},...d}),t},[])}class Fce extends Yu{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(ft(["log","time","utc"],t))return"definitely-not";const n=this.get("zero");if(!0===n||void 0===n&&ft(["linear","sqrt","pow"],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,o=!1,s=!1;for(const a of i){if(J(a)){const l=a[0],u=a[a.length-1];if(Ct(l)&&Ct(u)){if(l<=0&&u>=0){r=!0;continue}o=!0;continue}}s=!0}if(r)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const AJe=["range","scheme"];function Pce(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,o=go(t),s=e.getName(o);if(ye(i)&&i.binned&&void 0!==i.step)return new Mi(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(on(i)){const a=U8(e,r,i);return new Mi(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function MJe(e,t){const n=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(const d of AJe)if(void 0!==n[d]){const f=B5(o,d),h=Pae(e,d);if(f)if(h)ce(h);else switch(d){case"range":{const p=n.range;if(J(p)){if(zn(e))return $l(p.map(g=>{if("width"===g||"height"===g){const m=t.getName(g),_=t.getSignalName.bind(t);return Mi.fromName(_,m)}return g}))}else if(ye(p))return $l({data:t.requestDataName(Cn.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return $l(p)}case"scheme":return $l(kJe(n[d]))}else ce(cae(o,d,e))}const s=e===vn||"xOffset"===e?"width":"height",a=i[s];if(Ll(a))if(zn(e))if(Ni(o)){const d=$ce(a,t,e);if(d)return $l({step:d})}else ce(dae(s));else if(xv(e)&&"band"===t.getScaleComponent(e===Dd?"x":"y").get("type")){const p=Bce(a,o);if(p)return $l(p)}const{rangeMin:l,rangeMax:u}=n,c=function IJe(e,t){const{size:n,config:i,mark:r,encoding:o}=t,{type:s}=mi(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case vn:case Ti:if(ft(["point","band"],l)){const d=Vce(e,n,i.view);if(Ll(d))return{step:$ce(d,t,e)}}return Lce(e,t,l);case Dd:case qm:return function OJe(e,t,n){const i=e===Dd?"x":"y",r=t.getScaleComponent(i);if(!r)return Lce(i,t,n,{center:!0});const o=r.get("type"),s=t.scaleName(i),{markDef:a,config:l}=t;if("band"===o){const u=Vce(i,t.size,t.config.view);if(Ll(u)){const c=Bce(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}{const u=t.encoding[i];if(de(u)&&u.timeUnit){const c=Cae(u.timeUnit,p=>`scale('${s}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=Od({fieldDef:u,markDef:a,config:l})-.5,h=0!==f?` + ${f}`:"";return d?[{signal:`${Me(d)?`${d.signal}/2`+h:`${d/2+f}`} * (${c})`},{signal:`${Me(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`} * (${c})`}]:[0,{signal:c}]}return bse(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}(e,t,l);case Vu:{const d=function PJe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Wx("size",e))}(r,i),f=function LJe(e,t,n,i){const r={x:Pce(n,"x"),y:Pce(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==i.scale.maxBandSize)return i.scale.maxBandSize;const o=Uce(t,r,i.view);return Ct(o)?o-1:new Mi(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=Uce(t,r,i.view);return Ct(o)?Math.pow(.95*o,2):new Mi(()=>`pow(0.95 * ${o.signal}, 2)`)}}throw new Error(Wx("size",e))}(r,n,t,i);return Jm(l)?function FJe(e,t,n){const i=()=>{const r=Ma(t),o=Ma(e),s=`(${r} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${r} + ${s}, ${s})`};return Me(t)?new Mi(i):{signal:i()}}(d,f,function RJe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&J(n)?n.length+1:(ce(function mqe(e){return`Domain for ${e} is required for threshold scale.`}(i)),3)}}(l,i,u,e)):[d,f]}case Ms:return[0,2*Math.PI];case kh:return[0,360];case xa:return[0,new Mi(()=>`min(${t.getSignalName(Qo(t.parent)?"child_width":"width")},${t.getSignalName(Qo(t.parent)?"child_height":"height")})/2`)];case xd:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Td:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case po:return"symbol";case ho:case Al:case Nl:return"ordinal"===l?"nominal"===s?"category":"ordinal":void 0!==c?"diverging":"rect"===r||"geoshape"===r?"heatmap":"ramp";case ju:case Cd:case Sd:return[i.scale.minOpacity,i.scale.maxOpacity]}}(e,t);return(void 0!==l||void 0!==u)&&B5(o,"rangeMin")&&J(c)&&2===c.length?$l([l??c[0],u??c[1]]):Xo(c)}function kJe(e){return function qqe(e){return!be(e)&&le(e,"name")}(e)?{scheme:e.name,...fo(e,["name"])}:{scheme:e}}function Lce(e,t,n,{center:i}={}){const r=go(e),o=t.getName(r),s=t.getSignalName.bind(t);return e===Ti&&ka(n)?i?[Mi.fromName(a=>`${s(a)}/2`,o),Mi.fromName(a=>`-${s(a)}/2`,o)]:[Mi.fromName(s,o),0]:i?[Mi.fromName(a=>`-${s(a)}/2`,o),Mi.fromName(a=>`${s(a)}/2`,o)]:[0,Mi.fromName(s,o)]}function $ce(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),o=h5(n),s=i[o];if("offset"===Ble({step:e,offsetIsDiscrete:Qe(s)&&Aae(s.type)})&&yle(i,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;"band"===l.get("type")&&(c=`bandspace(${c}, ${l.get("paddingInner")??l.get("padding")??0}, ${l.get("paddingOuter")??l.get("padding")??0})`);const d=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${c} / (1-${hWe(d)})`}}return e.step}function Bce(e,t){if("offset"===Ble({step:e,offsetIsDiscrete:Ni(t)}))return{step:e.step}}function Vce(e,t,n){const i=e===vn?"width":"height";return t[i]||_T(n,i)}function Uce(e,t,n){const i=Ll(e.width)?e.width.step:g8(n,"width"),r=Ll(e.height)?e.height.step:g8(n,"height");return t.x||t.y?new Mi(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function Hce(e,t){Sn(e)?function $Je(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:s}=e;for(const a of ie(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),d=mi(r[a]),f=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=B5(h,t),_=Pae(a,t);if(void 0!==f&&(m?_&&ce(_):ce(cae(h,t,a))),m&&void 0===_)if(void 0!==f){const y=d.timeUnit,v=d.type;switch(t){case"domainMax":case"domainMin":Ph(l[t])||"temporal"===v||y?u.set(t,{signal:dT(l[t],{type:v,timeUnit:y})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const y=le(zce,t)?zce[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:vle(r,a),hasSecondaryRangeChannel:!!r[Ml(a)]}):i.scale[t];void 0!==y&&u.set(t,y,!1)}}}(e,t):Wce(e,t)}const zce={bins:({model:e,fieldOrDatumDef:t})=>de(t)?function BJe(e,t){const n=t.bin;if(on(n)){const i=U8(e,t.field,n);return new Mi(()=>e.getSignalName(i))}if(Hi(n)&&Rh(n)&&void 0!==n.step)return{step:n.step}}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function VJe(e,t){if(ft([ho,Al,Nl],e)&&"nominal"!==t)return"hcl"}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>function jJe(e,t,n,i,r,o){if(!(Fa(o)?.bin||J(n)||null!=r||null!=i||ft(["time","utc"],e)))return!!zn(t)||void 0}(e,t,n,i,r,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>function UJe(e,t,n,i,r,o){if(zn(e)){if(Fl(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:s,orient:a}=r;if("bar"===s&&(!de(i)||!i.bin&&!i.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if("point"===t)return n.pointPadding}}(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:o})=>function HJe(e,t,n,i,r,o=!1){if(void 0===e){if(zn(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=r;return o?c:Hn(s,"bar"===n?a:"tick"===n?u:l)}if(xv(t)&&"band"===i)return r.offsetBandPaddingInner}}(e,t,n.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>function zJe(e,t,n,i,r,o=!1){if(void 0===e)if(zn(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=r;if(o)return a;if("band"===n)return Hn(s,Me(i)?{signal:`${i.signal}/2`}:i/2)}else if(xv(t)){if("point"===n)return.5;if("band"===n)return r.offsetBandPaddingOuter}}(e,t,n,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>function GJe(e,t,n,i){return"x"===n&&void 0!==i.xReverse?ka(e)&&"descending"===t?Me(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:!(!ka(e)||"descending"!==t)||void 0}(t,de(e)?e.sort:void 0,n,i.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:o,hasSecondaryRangeChannel:s})=>function WJe(e,t,n,i,r,o,s){if(n&&"unaggregated"!==n&&ka(r)){if(J(n)){const l=n[0],u=n[n.length-1];if(Ct(l)&&l<=0&&Ct(u)&&u>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!Jm(r))return!0;if((!de(t)||!t.bin)&&ft([...Uu,...XGe],e)){const{orient:l,type:u}=i;return(!ft(["bar","area","line","trail"],u)||!("horizontal"===l&&"y"===e||"vertical"===l&&"x"===e))&&(!(!ft(["bar","area"],u)||s)||o?.zero)}return!1}(e,t,n,i,r,o.scale,s)};function Gce(e){Sn(e)?function NJe(e){const t=e.component.scales;for(const n of y5){const i=t[n];if(!i)continue;const r=MJe(n,e);i.setWithExplicit("range",r)}}(e):Wce(e,"range")}function Wce(e,t){const n=e.component.scales;for(const i of e.children)"range"===t?Gce(i):Hce(i,t);for(const i of ie(n)){let r;for(const o of e.children){const s=o.component.scales[i];s&&(r=Fd(r,s.getWithExplicit(t),t,"scale",due((l,u)=>"range"===t&&l.step&&u.step?l.step-u.step:0)))}n[i].setWithExplicit(t,r)}}function qJe(e,t,n,i,r=!1){const o=function YJe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":if(Km(e)||"discrete"===v5(e))return"shape"===e&&"ordinal"===t.type&&ce(x5(e,"ordinal")),"ordinal";if(zn(e)||xv(e)){if(ft(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if("arc"===n.type&&e in m5)return"band";return jh(n[go(e)])||e_(t)&&t.axis?.tickBand?"band":"point";case"temporal":return Km(e)?"time":"discrete"===v5(e)?(ce(x5(e,"temporal")),"ordinal"):de(t)&&t.timeUnit&&Ai(t.timeUnit).utc?"utc":"time";case"quantitative":return Km(e)?de(t)&&on(t.bin)?"bin-ordinal":"linear":"discrete"===v5(e)?(ce(x5(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(lae(t.type))}(t,n,i,r),{type:s}=e;return kl(t)?void 0!==s?function Zqe(e,t,n=!1){if(!kl(e))return!1;switch(e){case vn:case Ti:case Dd:case qm:case Ms:case xa:return!(!Fl(t)&&"band"!==t)||"point"===t&&!n;case Vu:case xd:case ju:case Cd:case Sd:case kh:return Fl(t)||Jm(t)||ft(["band","point","ordinal"],t);case ho:case Al:case Nl:return"band"!==t;case Td:case po:return"ordinal"===t||Jm(t)}}(t,s)?de(n)&&!function Jqe(e,t){return ft([L5,$5],t)?void 0===e||Ni(e):t===Xm?ft(["time","utc",void 0],e):t!==Vh||Iae(e)||Jm(e)||void 0===e}(s,n.type)?(ce(function eqe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(s,o)),o):s:(ce(function ZWe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,s,o)),o):o:null}function qce(e){e.component.scales=Sn(e)?function XJe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const o of y5){const s=mi(t[o]);if(s&&n===Bae&&o===po&&s.type===Qm)continue;let a=s&&s.scale;if(s&&null!==a&&!1!==a){a??(a={});const u=qJe(a,o,s,i,vle(t,o));r[o]=new Fce(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return r}(e):function JJe(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const o of e.children){qce(o);for(const s of ie(o.component.scales))if((t=r.scale)[s]??(t[s]=dce(s,e)),"shared"===r.scale[s]){const a=i[s],l=o.component.scales[s].getWithExplicit("type");a?Uqe(a.value,l.value)?i[s]=Fd(a,l,"type","scale",QJe):(r.scale[s]="independent",delete i[s]):i[s]=l}}for(const o of ie(i)){const s=e.scaleName(o,!0);n[o]=new Fce(s,i[o]);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}(e)}const QJe=due((e,t)=>Nae(e)-Nae(t));class e4{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return void 0!==this.nameMap[t]}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Sn(e){return"unit"===e?.type}function Qo(e){return"facet"===e?.type}function t4(e){return"concat"===e?.type}function m_(e){return"layer"===e?.type}class n4{constructor(t,n,i,r,o,s,a){this.type=n,this.parent=i,this.config=o,this.correctDataNames=l=>(l.from?.data&&(l.from.data=this.lookupDataSource(l.from.data)),l.from?.facet?.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l),this.parent=i,this.config=o,this.view=zi(a),this.name=t.name??r,this.title=Md(t.title)?{text:t.title}:t.title?zi(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new e4,this.projectionNameMap=i?i.projectionNameMap:new e4,this.signalNameMap=i?i.signalNameMap:new e4,this.data=t.data,this.description=t.description,this.transforms=function rXe(e){return e.map(t=>b8(t)?{filter:Um(t.filter,Bqe)}:t)}(t.transform??[]),this.layout="layer"===n||"unit"===n?{}:function lKe(e,t,n){const i=n[t],r={},{spacing:o,columns:s}=i;void 0!==o&&(r.spacing=o),void 0!==s&&(rT(e)&&!Iv(e.facet)||f8(e))&&(r.columns=s),mT(e)&&(r.columns=1);for(const a of aKe)if(void 0!==e[a])if("spacing"===a){const l=e[a];r[a]=Ct(l)?l:{row:l.row??o,column:l.column??o}}else r[a]=e[a];return r}(t,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:rT(t)||i?.component.data.isFaceted&&void 0===t.data},layoutSize:new Yu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Ke(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function KJe(e,{ignoreRange:t}={}){qce(e),kce(e);for(const n of Qqe)Hce(e,n);t||Gce(e)}(this)}parseProjection(){Cce(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){vce(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const o of ie(i)){const s=i[o];void 0!==s&&(r[o]=fn(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),t||(this.description&&(n.description=fn(this.description)),"unit"!==this.type&&"layer"!==this.type)?zt(n)?void 0:n:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,o=function yQe(e,t){const n={};for(const i of Is){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:o,titleOrient:s}=NT(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),a=AT(i,s),l=_Qe(o,a);void 0!==l&&(n[a]=l)}}return zt(n)?void 0:n}(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Is)t[i].title&&n.push(fQe(this,i));for(const i of P8)n=n.concat(hQe(this,i));return n}assembleAxes(){return function ZXe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Vv(r,"grid",t)),...i.map(r=>Vv(r,"grid",t)),...n.map(r=>Vv(r,"main",t)),...i.map(r=>Vv(r,"main",t))].filter(r=>r)}(this.component.axes,this.config)}assembleLegends(){return wce(this)}assembleProjections(){return function jQe(e){return m_(e)||t4(e)?function UQe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Ece(e))}(e):Ece(e)}(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...zse(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return ft(["unit","layer"],this.type)?ft(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),zt(i)?void 0:i}assembleGroup(t=[]){const n={};(t=t.concat(this.assembleSignals())).length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Qo(this.parent)?Oce(this):[];r.length>0&&(n.scales=r);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return yn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Cn[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Qo(this.parent)){const i=Hx(uce(t)),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),s=r.get("range");if(Ni(o)&&Fh(s)){const a=r.get("name"),u=Z8(IT(this,i));return u?{signal:lce(a,r,me({aggregate:"distinct",field:u},{expr:"datum"}))}:(ce(C5(i)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){return n?this.getName(t):Pse(t)&&kl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(function yWe(e){return`Cannot find a selection named "${e}".`}(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class Yce extends n4{vgField(t,n={}){const i=this.fieldDef(t);if(i)return me(i,n)}reduceFieldDef(t,n){return function VYe(e,t,n,i){return e?ie(e).reduce((r,o)=>{const s=e[o];return J(s)?s.reduce((a,l)=>t.call(i,a,l,o),r):t.call(i,r,s,o)},n):n}(this.getMapping(),(i,r,o)=>{const s=Fa(r);return s?t(i,s,o):i},n)}forEachFieldDef(t,n){t8(this.getMapping(),(i,r)=>{const o=Fa(i);o&&t(o,r)},n)}}class OT extends jt{clone(){return new OT(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ke(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"],this.transform.resolve=this.transform.resolve??"shared"}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${pt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class RT extends jt{clone(){return new RT(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ke(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${pt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class FT extends jt{clone(){return new FT(this.parent,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ke(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,s)=>r[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${pt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class PT extends jt{clone(){return new PT(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ke(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${pt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class __ extends jt{clone(){return new __(null,Ke(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Aa,Ta],[ks,Na]]){const o=r.map(s=>{const a=mi(n.encoding[s]);return de(a)?a.field:Pl(a)?{expr:`${a.datum}`}:Ra(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new __(t,o,null,n.getName("geojson_"+i++)))}if(n.channelHasField(po)){const r=n.typedFieldDef(po);r.type===Qm&&(t=new __(t,null,r.field,n.getName("geojson_"+i++)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(be);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${pt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class zv extends jt{clone(){return new zv(null,this.projection,Ke(this.fields),Ke(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Aa,Ta],[ks,Na]]){const r=i.map(s=>{const a=mi(n.encoding[s]);return de(a)?a.field:Pl(a)?{expr:`${a.datum}`}:Ra(a)?{expr:`${a.value}`}:void 0}),o=i[0]===ks?"2":"";(r[0]||r[1])&&(t=new zv(t,n.projectionName(),r,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(be))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${pt(this.fields)} ${pt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Jh extends jt{clone(){return new Jh(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Jh(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,o=i.y;if(de(r)&&de(o)){const s=r.impute?r:o.impute?o:void 0;if(void 0===s)return;const a=r.impute?o:o.impute?r:void 0,{method:l,value:u,frame:c,keyvals:d}=s.impute,f=Ele(n.mark,i);return new Jh(t,{impute:s.field,key:a.field,...l?{method:l}:{},...void 0!==u?{value:u}:{},...c?{frame:c}:{},...void 0!==d?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${pt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:(e=i,le(e,"stop")?this.processSequence(i):i)}:{},method:"value",...o?{groupby:o}:{},value:r&&"value"!==r?null:s};var e;return r&&"value"!==r?[l,{type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},{type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t}]:[l]}}class LT extends jt{clone(){return new LT(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ke(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${pt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Gv extends jt{clone(){return new Gv(null,Ke(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const o=n.component.data.sources,{from:s}=i;let a=null;if(function VKe(e){return le(e,"data")}(s)){let l=Jce(s.data,o);l||(l=new Kh(s.data),o.push(l));const u=n.getName(`lookup_${r}`);a=new mo(l,u,Cn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(function jKe(e){return le(e,"param")}(s)){const l=s.param;let u;i={as:l,...i};try{u=n.getSelectionComponent(yn(l),l)}catch{throw new Error(function EWe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}(l))}if(a=u.materialized,!a)throw new Error(function DWe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(l))}return new Gv(t,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ve(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${pt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ve(this.transform.as)}:{}};else{let n=this.transform.as;be(n)||(ce('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class $T extends jt{clone(){return new $T(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ke(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${pt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class BT extends jt{clone(){return new BT(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ke(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${pt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class VT extends jt{clone(){return new VT(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xl((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${pt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:o}=this.transform;return{type:"pivot",field:t,value:n,...void 0!==r?{limit:r}:{},...void 0!==o?{op:o}:{},...void 0!==i?{groupby:i}:{}}}}class jT extends jt{clone(){return new jT(null,Ke(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${pt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Kce(e){let t=0;return function n(i,r){if(i instanceof Kh&&!i.isGenerator&&!o_(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof pr&&(i.parent instanceof Kh&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof h_)return r.name||(r.name="data_"+t++),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,void e.push(...i.assemble());switch((i instanceof jv||i instanceof Uv||i instanceof p_||i instanceof u_||i instanceof c_||i instanceof zv||i instanceof La||i instanceof Gv||i instanceof g_||i instanceof Qh||i instanceof PT||i instanceof FT||i instanceof OT||i instanceof LT||i instanceof $T||i instanceof BT||i instanceof $d||i instanceof jT||i instanceof VT||i instanceof RT)&&r.transform.push(i.assemble()),(i instanceof Vl||i instanceof Bl||i instanceof Jh||i instanceof Qu||i instanceof __)&&r.transform.push(...i.assemble()),i instanceof mo&&(r.source&&0===r.transform.length?i.setSource(r.source):i.parent instanceof mo?i.setSource(r.name):(r.name||(r.name="data_"+t++),i.setSource(r.name),1===i.numChildren()&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof mo&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name="data_"+t++);let o=r.name;!r.source||r.transform.length>0?e.push(r):o=r.source;for(const s of i.children)n(s,{name:null,source:o,transform:[]});break}}}}function tZe(e){return"top"===e||"left"===e||Me(e)?"header":"footer"}function iZe(e,t){const{facet:n,config:i,child:r,component:o}=e;if(e.channelHasField(t)){const s=n[t],a=f_("title",null,i,t);let l=t_(s,i,{allowDisabling:!0,includeDefault:void 0===a||!!a});r.component.layoutHeaders[t].title&&(l=J(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const u=f_("labelOrient",s.header,i,t),c=null!==s.header&&Hn(s.header?.labels,i.header.labels,!0),d=ft(["bottom","right"],u)?"footer":"header";o.layoutHeaders[t]={title:null!==s.header?l:null,facetFieldDef:s,[d]:"facet"===t?[]:[Xce(e,t,c)]}}}function Xce(e,t,n){const i="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function Qce(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=V8(r,t),"shared"===r.axis[t]){const o="x"===t?"column":"row",s=i[o];for(const a of n.component.axes[t]){const l=tZe(a.get("orient"));s[l]??(s[l]=[Xce(e,o,!1)]);const u=Vv(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function i4(e){for(const t of e.children)t.parseLayoutSize()}function UT(e,t){const n=uce(t),i=Hx(n),r=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=r.scale[i]??dce(i,e);if("independent"===u&&"step"===l.value){s=void 0;break}if(s){if("independent"===u&&s.value!==l.value){s=void 0;break}s=Fd(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function aZe(e,t){const i=e.config,r=e.getScaleComponent("width"===t?"x":"y");if(r){const o=r.get("type"),s=r.get("range");if(Ni(o)){const a=_T(i.view,t);return Fh(s)||Ll(a)?"step":a}return p8(i.view,t)}if(e.hasProjection||"arc"===e.mark)return p8(i.view,t);{const o=_T(i.view,t);return Ll(o)?o.step:o}}function r4(e,t,n){return me(t,{suffix:`by_${me(e)}`,...n})}class Wv extends Yce{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=u4(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Iv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ie(t),i={};for(const r of n){if(![Pu,Lu].includes(r)){ce(Wx(r,"facet"));break}const o=t[r];if(void 0===o.field){ce(S5(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(t,n){const i=e8(t,n);return i.header?i.header=zi(i.header):null===i.header&&(i.header=null),i}channelHasField(t){return le(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=HT(this),this.child.parseData()}parseLayoutSize(){i4(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function nZe(e){for(const t of Is)iZe(e,t);Qce(e,"x"),Qce(e,"y")}(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Is)for(const i of L8){const r=this.component.layoutHeaders[n],o=r[i],{facetFieldDef:s}=r;if(s){const a=f_("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=AT(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o?.[0]){const a="row"===n?"height":"width",l="header"===i?"headerBand":"footerBand";"facet"!==n&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset["row"===n?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&"independent"===this.component.resolve.scale.x||!t&&"independent"===this.component.resolve.scale.y)&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Wv))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Wv?{...this.channelHasField("column")?{encode:{update:{columns:{field:me(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Wv){if(this.child.channelHasField("column")){const r=me(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Uu){const o=this.child.component.scales[r];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Ni(s)&&Fh(a)){const u=Z8(IT(this.child,r));u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):ce(C5(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Is){const d=this.facet[c];if(d){l.push(me(d));const{bin:f,sort:h}=d;if(on(f)&&l.push(me(d,{binSuffix:"end"})),Gu(h)){const{field:p,op:g=iT}=h,m=r4(d,h);i&&r?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(J(h)){const p=d_(d,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!i&&!!r;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Gu(i.sort)?[r4(i,i.sort,{expr:"datum"})]:J(i.sort)?[d_(i,t,{expr:"datum"})]:[me(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Gu(r)?r.order:!J(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return $8(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of P8)if(t[r]){const o=f_("labelOrient",t[r]?.header,n,r);if(i[r].includes(o))return $8(t[r],r,n)}}assembleMarks(){const{child:t}=this,i=function ZJe(e){const t=[],n=Kce(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Is.map(l=>this.facetSortFields(l)).flat(),order:Is.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(yXe(this,[]))}]}getMapping(){return this.facet}}function Jce(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,o=i.format?.feature;if(r&&o)continue;const s=e.format?.feature;if((s||o)&&s!==o)continue;const a=i.format?.mesh;if(!r&&!a||r===a)if(Lv(e)&&Lv(i)){if(Yo(e.values,i.values))return n}else if(o_(e)&&o_(i)){if(e.url===i.url)return n}else if(fue(e)&&e.name===n.dataName)return n}return null}function HT(e){let t=function uZe(e,t){if(e.data||!e.parent){if(null===e.data){const i=new Kh({values:[]});return t.push(i),i}const n=Jce(e.data,t);if(n)return Pd(e.data)||(n.data.format=wse({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Kh(e.data);return t.push(i),i}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=r&&(Pd(r)||o_(r)||Lv(r))||!e.parent?new gXe:e.parent.component.data.ancestorParse.clone();Pd(r)?(hue(r)?t=new Uv(t,r.sequence):D8(r)&&(t=new jv(t,r.graticule)),s.parseNothing=!0):null===r?.format?.parse&&(s.parseNothing=!0),t=pr.makeExplicit(t,e,s)??t,t=new $d(t);const a=e.parent&&m_(e.parent);(Sn(e)||Qo(e))&&a&&(t=Vl.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function cZe(e,t,n){let i=0;for(const r of t.transforms){let o,s;if(QKe(r))s=e=new c_(e,r),o="derived";else if(b8(r)){const a=eJe(r);s=e=pr.makeWithAncestors(e,{},a,n)??e,e=new u_(e,t,r.filter)}else if(rue(r))s=e=Vl.makeFromTransform(e,r,t),o="number";else if(ZKe(r))o="date",void 0===n.getWithExplicit(r.field).value&&(e=new pr(e,{[r.field]:o}),n.set(r.field,o,!1)),s=e=Bl.makeFromTransform(e,r);else if(eXe(r))s=e=La.makeFromTransform(e,r),o="number",k8(t)&&(e=new $d(e));else if(iue(r))s=e=Gv.make(e,t,r,i++),o="derived";else if(YKe(r))s=e=new g_(e,r),o="number";else if(KKe(r))s=e=new Qh(e,r),o="number";else if(tXe(r))s=e=Qu.makeFromTransform(e,r),o="derived";else if(nXe(r))s=e=new PT(e,r),o="derived";else if(iXe(r))s=e=new RT(e,r),o="derived";else if(XKe(r))s=e=new FT(e,r),o="derived";else if(UKe(r))s=e=new VT(e,r),o="derived";else if(qKe(r))e=new jT(e,r);else if(JKe(r))s=e=Jh.makeFromTransform(e,r),o="derived";else if(HKe(r))s=e=new OT(e,r),o="derived";else if(zKe(r))s=e=new $T(e,r),o="derived";else if(GKe(r))s=e=new BT(e,r),o="derived";else{if(!WKe(r)){ce(MWe(r));continue}s=e=new LT(e,r),o="derived"}if(s&&void 0!==o)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}(t,e,s));const l=function nJe(e){const t={};if(Sn(e)&&e.component.selection)for(const n of ie(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&Wm(r.field)>1&&(t[r.field]="flatten")}return t}(e),u=function tJe(e){const t={};function n(i){i_(i)?t[i.field]="date":"quantitative"===i.type&&function sWe(e){return be(e)&&ft(["min","max"],e)}(i.aggregate)?t[i.field]="number":Wm(i.field)>1?i.field in t||(t[i.field]="flatten"):zh(i)&&Gu(i.sort)&&Wm(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Sn(e)||Qo(e))&&e.forEachFieldDef((i,r)=>{if(Gr(i))n(i);else{const o=Oh(r),s=e.fieldDef(o);n({...i,type:s.type})}}),Sn(e)){const{mark:i,markDef:r,encoding:o}=e;if(Id(i)&&!e.encoding.order){const a=o["horizontal"===r.orient?"y":"x"];de(a)&&"quantitative"===a.type&&!(a.field in t)&&(t[a.field]="number")}}return t}(e);t=pr.makeWithAncestors(t,{},{...l,...u},s)??t,Sn(e)&&(t=__.parseAll(t,e),t=zv.parseAll(t,e)),(Sn(e)||Qo(e))&&(a||(t=Vl.makeFromEncoding(t,e)??t),t=Bl.makeFromEncoding(t,e)??t,t=c_.parseAllForSortIndex(t,e));const c=t=zT(Cn.Raw,e,t);if(Sn(e)){const m=La.makeFromEncoding(t,e);m&&(t=m,k8(e)&&(t=new $d(t))),t=Jh.makeFromEncoding(t,e)??t,t=Qu.makeFromEncoding(t,e)??t}let d,f;if(Sn(e)){const{markDef:m,mark:_,config:y}=e,v=Wt("invalid",m,y),{marks:b,scales:w}=f=gue({invalid:v,isPath:Id(_)});b!==w&&"include-invalid-values"===w&&(d=t=zT(Cn.PreFilterInvalid,e,t)),"exclude-invalid-values"===b&&(t=p_.make(t,e,f)??t)}const h=t=zT(Cn.Main,e,t);let p;if(Sn(e)&&f){const{marks:m,scales:_}=f;"include-invalid-values"===m&&"exclude-invalid-values"===_&&(t=p_.make(t,e,f)??t,p=t=zT(Cn.PostFilterInvalid,e,t))}Sn(e)&&function QXe(e,t){for(const[n,i]of Ed(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new mo(new u_(t,e,{param:n}),r,Cn.Lookup,e.component.data.outputNodeRefCounts)}}(e,h);let g=null;if(Qo(e)){const m=e.getName("facet");t=function lZe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const o of[n,i])if(Gu(o.sort)){const{field:s,op:a=iT}=o.sort;e=r=new Qh(e,{joinaggregate:[{op:a,field:s,as:r4(o,o.sort,{forAs:!0})}],groupby:[me(o)]})}return r}return null}(t,e.facet)??t,g=new h_(t,e,m,h.getSource()),n[m]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:d,postFilterInvalid:p}}function zT(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,o=t.getDataName(e),s=new mo(n,o,e,r);return i[o]=s,s}class dZe extends n4{constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),("shared"===t.resolve?.axis?.x||"shared"===t.resolve?.axis?.y)&&ce("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(t).map((o,s)=>u4(o,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=HT(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ie(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return mT(t)?t.vconcat:h8(t)?t.hconcat:t.concat}parseLayoutSize(){!function oZe(e){i4(e);const n=void 0===e.layout.columns?"height":"childHeight";UT(e,1===e.layout.columns?"width":"childWidth"),UT(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=B8(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...null!=t?{columns:t}:{},bounds:"full",align:"each"}}}const hZe={disable:1,gridScale:1,scale:1,...ple,labelExpr:1,encode:1},Zce=ie(hZe);class o4 extends Yu{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new o4(Ke(this.explicit),Ke(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!function fZe(e){return!1===e||null===e}(this.get(t)))}hasOrientSignalRef(){return Me(this.explicit.orient)}}const mZe={bottom:"top",top:"bottom",left:"right",right:"left"};function yZe(e,t){if(!e)return t.map(n=>n.clone());{if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],o=t[i];if(!!r!=!!o)return;if(r&&o){const s=r.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[i]=vZe(r,o)}}}return e}function vZe(e,t){for(const n of Zce){const i=Fd(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,o)=>{switch(n){case"title":return Zse(r,o);case"gridScale":return{explicit:r.explicit,value:Hn(r.value,o.value)}}return vT(r,o,n,"axis")});e.setWithExplicit(n,i)}return e}function bZe(e,t,n,i,r){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Me(n.labelAngle)?n.labelAngle:Dv(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===ice(i,r))return!0}return e===n[t]}const wZe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function EZe(e,t){let n=t.axis(e);const i=new o4,r=mi(t.encoding[e]),{mark:o,config:s}=t,a=n?.orient||s["x"===e?"axisX":"axisY"]?.orient||s.axis?.orient||function aQe(e){return"x"===e?"bottom":"left"}(e),l=t.getScaleComponent(e).get("type"),u=function eQe(e,t,n,i){const r="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:Iae(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",s=Me(n)?"axisOrient":`axis${Ev(n)}`,a=[...r,...r.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:Zue(a,i,e,n),vgAxisConfig:Zue(l,i,e,n),axisConfigStyle:tQe([...l,...a],i)}}(e,l,a,t.config),c=void 0!==n?!n:R8("disable",s.style,n?.style,u).configValue;if(i.set("disable",c,void 0!==n),c)return i;n=n||{};const d=function rQe(e,t,n,i,r){const o=t?.labelAngle;if(void 0!==o)return Me(o)?o:Dv(o);{const{configValue:s}=R8("labelAngle",i,t?.style,r);return void 0!==s?Dv(s):n!==vn||!ft([$5,L5],e.type)||de(e)&&e.timeUnit?void 0:270}}(r,n,e,s.style,u),f=Kae(n.formatType,r,l),h=Yae(r,r.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:o,config:s};for(const _ of Zce){const y=_ in ece?ece[_](p):mle(_)?n[_]:void 0,v=void 0!==y,b=bZe(y,_,n,t,e);if(v&&b)i.set(_,y,b);else{const{configValue:w,configFrom:D}=mle(_)&&"values"!==_?R8(_,s.style,n.style,u):{},E=void 0!==w;v&&!E?i.set(_,y,b):("vgAxisConfig"!==D||wZe.has(_)&&E||Pv(w)||Me(w))&&i.set(_,w,!1)}}const g=n.encoding??{},m=hle.reduce((_,y)=>{if(!i.hasAxisPart(y))return _;const v=cce(g[y]??{},t),b="labels"===y?function pZe(e,t,n){const{encoding:i,config:r}=e,o=mi(i[t])??mi(i[Ml(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(Hh(l))return{text:Oa({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:r}),...n};if(void 0===a&&void 0===l&&r.customFormatTypes){if("quantitative"===Zm(o)){if(e_(o)&&"normalize"===o.stack&&r.normalizedNumberFormatType)return{text:Oa({fieldOrDatumDef:o,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Oa({fieldOrDatumDef:o,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if("temporal"===Zm(o)&&r.timeFormatType&&de(o)&&!o.timeUnit)return{text:Oa({fieldOrDatumDef:o,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}(t,e,v):v;return void 0!==b&&!zt(b)&&(_[y]={update:b}),_},{});return zt(m)||i.set("encode",m,!!n.encoding||void 0!==n.labelAngle),i}const CZe={vgMark:"arc",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Xu(e,"radius"),...Xu(e,"theta")})},SZe={vgMark:"area",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...DT("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...DT("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...N8(e)})},xZe={vgMark:"rect",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Xu(e,"x"),...Xu(e,"y")})},TZe={vgMark:"shape",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&de(n)&&n.type===Qm?{field:me(n,{expr:"datum"})}:{}}]}},AZe={vgMark:"image",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Xu(e,"x"),...Xu(e,"y"),...T8(e,"url")})},NZe={vgMark:"line",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Wi("size",e,{vgChannel:"strokeWidth"}),...N8(e)})},MZe={vgMark:"trail",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Wi("size",e),...N8(e)})};function s4(e,t){const{config:n}=e;return{...Os(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Wi("size",e),...Wi("angle",e),...kZe(e,0,t)}}function kZe(e,t,n){return n?{shape:{value:n}}:Wi("shape",e)}const IZe={vgMark:"symbol",encodeEntry:e=>s4(e)},OZe={vgMark:"symbol",encodeEntry:e=>s4(e,"circle")},RZe={vgMark:"symbol",encodeEntry:e=>s4(e,"square")},FZe={vgMark:"rect",encodeEntry:e=>({...Os(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Xu(e,"x"),...Xu(e,"y")})},PZe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...Os(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...DT("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...DT("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...Wi("size",e,{vgChannel:"strokeWidth"})}:{}}},LZe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Os(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...T8(e),...Wi("size",e,{vgChannel:"fontSize"}),...Wi("angle",e),...Fue("align",$Ze(e.markDef,0,t)),...Fue("baseline",BZe(e.markDef,0,t)),...Wr("radius",e,{defaultPos:null}),...Wr("theta",e,{defaultPos:null})}}};function $Ze(e,t,n){if(void 0===Wt("align",e,n))return"center"}function BZe(e,t,n){if(void 0===Wt("baseline",e,n))return"middle"}const GT={arc:CZe,area:SZe,bar:xZe,circle:OZe,geoshape:TZe,image:AZe,line:NZe,point:IZe,rect:FZe,rule:PZe,square:RZe,text:LZe,tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r="horizontal"===i?"x":"y",o="horizontal"===i?"y":"x",s="horizontal"===i?"height":"width";return{...Os(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Xu(e,r),...Wr(o,e,{defaultPos:"mid",vgChannel:"y"===o?"yc":"xc"}),[s]:fn(Wt("thickness",n,t))}}},trail:MZe};const ede="faceted_path_",tde="stack_group_";function a4(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:o}=e,s=Hn(i.clip,function zZe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!t?.get("selectionExtent")&&!n?.get("selectionExtent"))||void 0}(e),function GZe(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),a=Yse(i),l=r.key,u=function HZe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:o}=e,s=t.order;if(!(!J(s)&&Ra(s)&&r5(s.value)||!s&&r5(Wt("order",r,o)))){if((J(s)||de(s))&&!n)return Xse(s,{expr:"datum"});if(Id(i)){const a="horizontal"===r.orient?"y":"x";if(de(t[a]))return{field:a}}}}(e),c=function WZe(e){if(!e.component.selection)return null;const t=ie(e.component.selection).length;let n=t,i=e.parent;for(;i&&0===n;)n=ie(i.component.selection).length,i=i.parent;return n?{interactive:t>0||"geoshape"===e.mark||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}(e),d=Wt("aria",i,o),f=GT[n].postEncodingTransform?GT[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:GT[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...!1===d?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(Cn.Main)},encode:{update:GT[n].encodeEntry(e)},...f?{transform:f}:{}}]}class nde extends Yce{constructor(t,n,i,r={},o){super(t,"unit",n,i,o,void 0,Vle(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Ia(t.mark)?{...t.mark}:{type:t.mark},a=s.type;void 0===s.filled&&(s.filled=function kKe(e,t,{graticule:n}){if(n)return!1;const i=Il("filled",e,t),r=e.type;return Hn(i,r!==eT&&r!==Zx&&r!==tT)}(s,o,{graticule:t.data&&D8(t.data)}));const l=this.encoding=function $Ye(e,t,n,i){const r={};for(const o of ie(e))Pse(o)||ce(VWe(o));for(let o of YGe){if(!e[o])continue;const s=e[o];if(xv(o)){const a=qGe(o),l=r[a];if(de(l)&&Vqe(l.type)&&de(s)&&!l.timeUnit){ce(RWe(a));continue}}if("angle"===o&&"arc"===t&&!e.theta&&(ce("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=Ms),LYe(e,o,t))if(o===Vu&&"line"===t&&Fa(e[o])?.aggregate)ce("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");else if(o===ho&&(n?"fill"in e:"stroke"in e))ce(uae("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(o===Sv||o===Ym&&!J(s)&&!Ra(s)||o===Ih&&J(s)){if(s){if(o===Ym){const a=e[o];if(ile(a)){r[o]=a;continue}}r[o]=ve(s).reduce((a,l)=>(de(l)?a.push(e8(l,o)):ce(S5(l,o)),a),[])}}else{if(o===Ih&&null===s)r[o]=null;else if(!(de(s)||Pl(s)||Ra(s)||Ov(s)||Me(s))){ce(S5(s,o));continue}r[o]=cle(s,o,i)}else ce(Wx(o,t))}return r}(t.encoding||{},a,s.filled,o);this.markDef=Kle(s,l,o),this.size=function DZe({encoding:e,size:t}){for(const n of Uu){const i=go(n);Ll(t[i])&&Rd(e[n])&&(delete t[i],ce(dae(i)))}return t}({encoding:l,size:Vle(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=Yle(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>d8(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Bae,i=t&&HGe.some(r=>Qe(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return y5.reduce((i,r)=>{const o=mi(n[r]);return o&&(i[r]=this.initScale(o.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=zi(t);return J(n)&&(r.domain=n.map(Ko)),J(i)&&(r.range=i.map(Ko)),r}initAxes(t){return Uu.reduce((n,i)=>{const r=t[i];if(Qe(r)||i===vn&&Qe(t.x2)||i===Ti&&Qe(t.y2)){const o=Qe(r)?r.axis:void 0;n[i]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=ie(t),i={};for(const r of n){const o=t[r];i[r]=Pv(o)?Gse(o):Ko(o)}return i}initLegends(t){return QGe.reduce((n,i)=>{const r=mi(t[i]);if(r&&function ZGe(e){switch(e){case ho:case Al:case Nl:case Vu:case po:case ju:case xd:case Td:return!0;case Cd:case Sd:case kh:return!1}}(i)){const o=r.legend;n[i]=o&&zi(o)}return n},{})}parseData(){this.component.data=HT(this)}parseLayoutSize(){!function sZe(e){const{size:t,component:n}=e;for(const i of Uu){const r=go(i);if(t[r]){const o=t[r];n.layoutSize.set(r,Ll(o)?"step":o,!0)}else{const o=aZe(e,r);n.layoutSize.set(r,o,!1)}}}(this)}parseSelections(){this.component.selection=function XXe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const o=yn(r.name),s=r.select,a=be(s)?s:s.type,l=ye(s)?Ke(s):{type:a},u=i[a];for(const f in u)"fields"===f||"encodings"===f||("mark"===f&&(l.mark={...u.mark,...l.mark}),(void 0===l[f]||!0===l[f])&&(l[f]=Ke(u[f]??l[f])));const c=n[o]={...l,name:o,type:a,init:r.value,bind:r.bind,events:be(l.on)?bd(l.on,"scope"):ve(Ke(l.on))},d=Ke(r);for(const f of xT)f.defined(c)&&f.parse&&f.parse(e,c,d)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=function VZe(e){if(ft([Zx,Qx,iYe],e.mark)){const t=Ele(e.mark,e.encoding);if(t.length>0)return function jZe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:ede+e.requestDataName(Cn.Main),data:e.requestDataName(Cn.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:a4(e,{fromPrefix:ede})}]}(e,t)}else if(e.mark===Jx){const t=w5.some(n=>Wt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return function UZe(e){const[t]=a4(e,{fromPrefix:tde}),n=e.scaleName(e.stack.fieldChannel),i=(u={})=>e.vgField(e.stack.fieldChannel,u),r=(u,c)=>`${u}(${[i({prefix:"min",suffix:"start",expr:c}),i({prefix:"max",suffix:"start",expr:c}),i({prefix:"min",suffix:"end",expr:c}),i({prefix:"max",suffix:"end",expr:c})].map(f=>`scale('${n}',${f})`).join(",")})`;let o,s;"x"===e.stack.fieldChannel?(o={...Hm(t.encode.update,["y","yc","y2","height",...w5]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...fo(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Hm(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...fo(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of w5){const c=Il(u,e.markDef,e.config);t.encode.update[u]?(o[u]=t.encode.update[u],delete t.encode.update[u]):c&&(o[u]=fn(c)),c&&(t.encode.update[u]={value:0})}const a=[];if(e.stack.groupbyChannels?.length>0)for(const u of e.stack.groupbyChannels){const c=e.fieldDef(u),d=me(c);d&&a.push(d),(c?.bin||c?.timeUnit)&&a.push(me(c,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,c)=>{if(t.encode.update[c])return{...u,[c]:t.encode.update[c]};{const d=Il(c,e.markDef,e.config);return void 0!==d?{...u,[c]:fn(d)}:u}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Cn.Main),name:tde+e.requestDataName(Cn.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}(e)}return a4(e)}(this)}parseAxesAndHeaders(){this.component.axes=function gZe(e){return Uu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[EZe(n,e)]),t),{})}(this)}assembleSelectionTopLevelSignals(t){return function vXe(e,t){let n=!1;for(const i of Ui(e.component.selection??{})){const r=i.name,o=fe(r+qh);if(0===t.filter(a=>a.name===r).length){const l="point"===i.type?", true, true)":")";t.push({name:i.name,update:`${Wue}(${o}, ${fe("global"===i.resolve?"union":i.resolve)}${l}`})}n=!0;for(const a of xT)a.defined(i)&&a.topLevelSignals&&(t=a.topLevelSignals(e,i,t))}return n&&0===t.filter(r=>"unit"===r.name).length&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),C8(t)}(this,t)}assembleSignals(){return[...Jue(this),..._Xe(this,[])]}assembleSelectionData(t){return function bXe(e,t){const n=[...t],i=Yh(e,{escape:!1});for(const r of Ui(e.component.selection??{})){const o={name:r.name+qh};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Pa}}]),r.init){const a=r.project.items.map(mue);o.values=r.init.map(r.project.hasSelectionId?l=>({unit:i,[Pa]:Wh(l,!1)[0]}):l=>({unit:i,fields:a,values:Wh(l,!1)}))}n.filter(a=>a.name===r.name+qh).length||n.push(o)}return n}(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return B8(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!m_(this.parent))&&(t=_ue(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return void 0!==t?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Gh(this.encoding,t)}fieldDef(t){return Fa(this.encoding[t])}typedFieldDef(t){const n=this.fieldDef(t);return Gr(n)?n:null}}class l4 extends n4{constructor(t,n,i,r,o){super(t,"layer",n,i,o,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(yT(a))return new l4(a,this,this.getName(`layer_${l}`),s,o);if(Wu(a))return new nde(a,this,this.getName(`layer_${l}`),s,o);throw new Error(D5(a))})}parseData(){this.component.data=HT(this);for(const t of this.children)t.parseData()}parseLayoutSize(){!function rZe(e){i4(e),UT(e,"width"),UT(e,"height")}(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ie(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){!function _Ze(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const o of ie(r.component.axes))n.axis[o]=V8(e.component.resolve,o),"shared"===n.axis[o]&&(t[o]=yZe(t[o],r.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const r of Uu){for(const o of e.children)if(o.component.axes[r]){if("independent"===n.axis[r]){t[r]=(t[r]??[]).concat(o.component.axes[r]);for(const s of o.component.axes[r]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!Me(a)){if(i[a]>0&&!l){const u=mZe[a];i[a]>i[u]&&s.set("orient",u,!1)}i[a]++}}}delete o.component.axes[r]}if("independent"===n.axis[r]&&t[r]&&t[r].length>1)for(const[o,s]of(t[r]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Jue(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),B8(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of ve(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:1===n.length?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return function wXe(e,t){for(const n of e.children)Sn(n)&&(t=_ue(n,t));return t}(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),wce(this))}}function u4(e,t,n,i,r){if(rT(e))return new Wv(e,t,n,r);if(yT(e))return new l4(e,t,n,i,r);if(Wu(e))return new nde(e,t,n,i,r);if(function sKe(e){return mT(e)||h8(e)||f8(e)}(e))return new dZe(e,t,n,r);throw new Error(D5(e))}function qZe(e,t={}){t.logger&&function vqe(e){Ol=e}(t.logger),t.fieldTitle&&ule(t.fieldTitle);try{const n=Wle(kg(t.config,e.config)),i=lue(e,n),r=u4(i,null,"",void 0,n);return r.parse(),function yJe(e,t){K8(e.sources);let n=0,i=0;for(let r=0;r<5&&Mce(e,t,!0);r++)n++;e.sources.map(q8);for(let r=0;r<5&&Mce(e,t,!1);r++)i++;K8(e.sources),5===Math.max(n,i)&&ce("Maximum optimization runs(5) reached.")}(r.component.data,r),{spec:KZe(r,YZe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&function mae(){return Ol=gae,Ol}(),t.fieldTitle&&function kYe(){ule(ale)}()}}function YZe(e,t,n,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):be(t)&&(t={type:t}),r&&o&&function fXe(e){return["fit","fit-x","fit-y"].includes(e)}(t.type))if("step"===r&&"step"===o)ce(nae()),t.type="pad";else if("step"===r||"step"===o){const s="step"===r?"width":"height";ce(nae(Hx(s))),t.type=function hXe(e){return e?`fit-${Hx(e)}`:"fit"}("width"===s?"height":"width")}return{...1===ie(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...cue(n,!1),...cue(e,!0)}}function KZe(e,t,n={},i){const r=e.config?function vKe(e){e=Ke(e);for(const t of _Ke)delete e[t];if(e.axis)for(const t in e.axis)Pv(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of tKe)delete e.legend[t];if(e.mark){for(const t of jae)delete e.mark[t];e.mark.tooltip&&ye(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat($le(e.params)),delete e.params);for(const t of mKe){for(const i of jae)delete e[t][i];const n=yKe[t];if(n)for(const i of n)delete e[t][i];wKe(e,t)}for(const t of function eKe(){return ie(a8)}())delete e[t];!function bKe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=zse(e.title);zt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),zt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),zt(i)?delete e.title:e.title=i}(e);for(const t in e)ye(e[t])&&zt(e[t])&&delete e[t];return zt(e)?void 0:e}(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function eZe(e,t){const n=[],i=Kce(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName="source_"+r++);const a=s.assemble();i(s,a)}for(const s of n)0===s.transform.length&&delete s.transform;let o=0;for(const[s,a]of n.entries())0===(a.transform??[]).length&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])"lookup"===a.type&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>"width"!==h.name&&"height"!==h.name||void 0===h.value||(t[h.name]=+h.value,!1));const{params:d,...f}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...$le(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const XZe="5.21.0",ide=function QZe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}};const y_="#fff",yet={background:"#333",view:{stroke:"#888"},title:{color:y_,subtitleColor:y_},style:{"guide-label":{fill:y_},"guide-title":{fill:y_}},axis:{domainColor:y_,gridColor:"#888",tickColor:y_}},Zh="#4572a7",vet={background:"#fff",arc:{fill:Zh},area:{fill:Zh},line:{stroke:Zh,strokeWidth:2},path:{stroke:Zh},rect:{fill:Zh},shape:{stroke:Zh},symbol:{fill:Zh,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ep="#30a2da",c4="#cbcbcb",Eet={arc:{fill:ep},area:{fill:ep},axis:{domainColor:c4,grid:!0,gridColor:c4,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:c4,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:ep,strokeWidth:2},path:{stroke:ep,strokeWidth:.5},rect:{fill:ep},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ep},bar:{binSpacing:2,fill:ep,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},tp="#000",Det={group:{fill:"#e5e5e5"},arc:{fill:tp},area:{fill:tp},line:{stroke:tp},path:{stroke:tp},rect:{fill:tp},shape:{stroke:tp},symbol:{fill:tp,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},ade="Benton Gothic, sans-serif",np="#82c6df",d4="Benton Gothic Bold, sans-serif",qv={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Aet={background:"#ffffff",title:{anchor:"start",color:"#000000",font:d4,fontSize:22,fontWeight:"normal"},arc:{fill:np},area:{fill:np},line:{stroke:np,strokeWidth:2},path:{stroke:np},rect:{fill:np},shape:{stroke:np},symbol:{fill:np,size:30},axis:{labelFont:ade,labelFontSize:11.5,labelFontWeight:"normal",titleFont:d4,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:ade,labelFontSize:11.5,symbolType:"square",titleFont:d4,titleFontSize:13,titleFontWeight:"normal"},range:{category:qv["category-6"],diverging:qv["fireandice-6"],heatmap:qv["fire-7"],ordinal:qv["fire-7"],ramp:qv["fire-7"]}},ip="#ab5787",WT="#979797",Net={background:"#f9f9f9",arc:{fill:ip},area:{fill:ip},line:{stroke:ip},path:{stroke:ip},rect:{fill:ip},shape:{stroke:ip},symbol:{fill:ip,size:30},axis:{domainColor:WT,domainWidth:.5,gridWidth:.2,labelColor:WT,tickColor:WT,tickWidth:.2,titleColor:WT},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},rp="#3e5c69",Met={background:"#fff",arc:{fill:rp},area:{fill:rp},line:{stroke:rp},path:{stroke:rp},rect:{fill:rp},shape:{stroke:rp},symbol:{fill:rp},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Rs="#1696d2",qT="Lato",f4="Lato",Yv={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Fet={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:qT},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:f4,labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:qT},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:f4,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:qT,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:f4,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:qT,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Yv["six-groups-cat-1"],diverging:Yv["diverging-colors"],heatmap:Yv["diverging-colors"],ordinal:Yv["six-groups-seq"],ramp:Yv["shades-blue"]},area:{fill:Rs},rect:{fill:Rs},line:{color:Rs,stroke:Rs,strokeWidth:5},trail:{color:Rs,stroke:Rs,strokeWidth:0,size:1},path:{stroke:Rs,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Rs,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Rs,stroke:null}},arc:{fill:Rs},shape:{stroke:Rs},symbol:{fill:Rs,size:30}},op="#3366CC",YT="Arial, sans-serif",Pet={arc:{fill:op},area:{fill:op},path:{stroke:op},rect:{fill:op},shape:{stroke:op},symbol:{stroke:op},circle:{fill:op},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:YT,fontSize:12},"guide-title":{font:YT,fontSize:12},"group-title":{font:YT,fontSize:12}},title:{font:YT,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},h4=e=>e*(1/3+1),hde=h4(9),pde=h4(10),gde=h4(12),Kv="Segoe UI",mde="wf_standard-font, helvetica, arial, sans-serif",Xv="#605E5C",yde="transparent",Ba="#118DFF",wde=["#DEEFFF","#118DFF"],Get={view:{stroke:yde},background:yde,font:Kv,header:{titleFont:mde,titleFontSize:gde,titleColor:"#252423",labelFont:Kv,labelFontSize:pde,labelColor:Xv},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Xv,labelFontSize:hde,titleFont:mde,titleColor:"#252423",titleFontSize:gde,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ba},line:{stroke:Ba,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Kv,fontSize:hde,fill:Xv},arc:{fill:Ba},area:{fill:Ba,line:!0,opacity:.6},path:{stroke:Ba},rect:{fill:Ba},point:{fill:Ba,filled:!0,size:75},shape:{stroke:Ba},symbol:{fill:Ba,strokeWidth:1.5,size:50},legend:{titleFont:Kv,titleFontWeight:"bold",titleColor:Xv,labelFont:Kv,labelFontSize:pde,labelColor:Xv,symbolType:"circle",symbolSize:75},range:{category:[Ba,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:wde,heatmap:wde,ordinal:["#DEEFFF","#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff","#118DFF"]}},p4='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',KT={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},qet=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Yet=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function XT({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=KT.gridBg[e],r=KT.textPrimary[e],o=KT.textSecondary[e],a="dark"===n?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:p4,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:'IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',labelFontWeight:400,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:KT.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:p4,fill:o,fontWeight:400},"guide-title":{font:p4,fill:o,fontWeight:400}},range:{category:"dark"===n?qet:Yet,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Ket=XT({theme:"white",background:"#ffffff"}),Xet=XT({theme:"g10",background:"#f4f4f4"}),Qet=XT({theme:"g90",background:"#262626"}),Jet=XT({theme:"g100",background:"#161616"}),Zet="2.15.0";function Ede(e,t){return JSON.stringify(e,function Ett(e){const t=[];return function(n,i){if("object"!=typeof i||null===i)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}(t))}const Dde="vg-tooltip-element",Ctt={offsetX:10,offsetY:10,id:Dde,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function Stt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function wtt(e,t,n,i){if(J(e))return`[${e.map(r=>t(be(r)?r:Ede(r,n))).join(", ")}]`;if(ye(e)){let r="";const{title:o,image:s,...a}=e;o&&(r+=`<h2>${t(o)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(a);if(l.length>0){r+="<table>";for(const u of l){let c=a[u];void 0!==c&&(ye(c)&&(c=Ede(c,n)),r+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)},baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function Cde(e,t,{offsetX:n,offsetY:i}){const r=Sde({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(xde(r[s],t))return r[s];return r["top-left"]}function Sde(e,t,n,i){const s=e.x1-t.width-n,a=(e.x1+e.x2)/2-t.width/2,l=e.x2+n,u=e.y1-t.height-i,c=(e.y1+e.y2)/2-t.height/2,d=e.y2+i;return{top:{x:a,y:u},bottom:{x:a,y:d},left:{x:s,y:c},right:{x:l,y:c},"top-left":{x:s,y:u},"top-right":{x:l,y:u},"bottom-left":{x:s,y:d},"bottom-right":{x:l,y:d}}}function xde(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function Ntt(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class Tde{constructor(t){this.options={...Ctt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=function xtt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace(Dde,e)}(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}="mark"===this.options.anchor?function Ttt(e,t,n,i,r){const{position:o,offsetX:s,offsetY:a}=r,c=function Att(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,o=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,o+=s.y??0;return{x1:r,x2:r+(i.x2-i.x1),y1:o,y2:o+(i.y2-i.y1)}}(e._el.getBoundingClientRect(),e._origin,n),d=Sde(c,i,s,a),f=Array.isArray(o)?o:[o];for(const h of f)if(xde(d[h],i)&&!Ntt(t,d[h],i))return d[h];return Cde(t,i,r)}(t,n,i,this.el.getBoundingClientRect(),this.options):Cde(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var e,Mtt=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(t,n)},function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),ktt=Object.prototype.hasOwnProperty;function m4(e,t){return ktt.call(e,t)}function _4(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)m4(e,r)&&i.push(r);return i}function Jo(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function y4(e){for(var i,t=0,n=e.length;t<n;){if(!((i=e.charCodeAt(t))>=48&&i<=57))return!1;t++}return!0}function sp(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Ade(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function v4(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(v4(e[t]))return!0}else if("object"==typeof e)for(var i=_4(e),r=i.length,o=0;o<r;o++)if(v4(e[i[o]]))return!0;return!1}function Nde(e,t){var n=[e];for(var i in t){var r="object"==typeof t[i]?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join("\n")}var Mde=function(e){function t(n,i,r,o,s){var a=this.constructor,l=e.call(this,Nde(n,{name:i,index:r,operation:o,tree:s}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=Nde(n,{name:i,index:r,operation:o,tree:s}),l}return Mtt(t,e),t}(Error),Pn=Mde,v_={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=QT(n,this.path);i&&(i=Jo(i));var r=ap(n,{op:"remove",path:this.from}).removed;return ap(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=QT(n,this.from);return ap(n,{op:"add",path:this.path,value:Jo(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Qv(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ott={add:function(e,t,n){return y4(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:v_.move,copy:v_.copy,test:v_.test,_get:v_._get};function QT(e,t){if(""==t)return e;var n={op:"_get",path:t};return ap(e,n),n.value}function ap(e,t,n,i,r,o){if(void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):ZT(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=QT(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=Qv(e,t.value),!1===s.test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(n)throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}i||(e=Jo(e));var l=(t.path||"").split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(p="function"==typeof n?n:ZT;;){if((h=l[c])&&-1!=h.indexOf("~")&&(h=Ade(h)),r&&("__proto__"==h||"prototype"==h&&c>0&&"constructor"==l[c-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[h]?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),void 0!==f&&p(t,0,e,f)),c++,Array.isArray(u)){if("-"===h)h=u.length;else{if(n&&!y4(h))throw new Pn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);y4(h)&&(h=~~h)}if(c>=d){if(n&&"add"===t.op&&h>u.length)throw new Pn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(s=Ott[t.op].call(t,u,h,e)).test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=d){if(!1===(s=v_[t.op].call(t,u,h,e)).test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<d&&(!u||"object"!=typeof u))throw new Pn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function JT(e,t,n,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n&&!Array.isArray(t))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Jo(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=ap(e,t[s],n,!0,r,s),e=o[s].newDocument;return o.newDocument=e,o}function ZT(e,t,n,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new Pn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!v_[e.op])throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new Pn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Pn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Pn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&v4(e.value))throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new Pn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new Pn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=kde([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Pn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function kde(e,t,n){try{if(!Array.isArray(e))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)JT(Jo(t),Jo(e),n||!0);else{n=n||ZT;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Pn)return r;throw r}}function Qv(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,o,s,n=Array.isArray(e),i=Array.isArray(t);if(n&&i){if((o=e.length)!=t.length)return!1;for(r=o;0!=r--;)if(!Qv(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var a=Object.keys(e);if((o=a.length)!==Object.keys(t).length)return!1;for(r=o;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=o;0!=r--;)if(!Qv(e[s=a[r]],t[s]))return!1;return!0}return e!=e&&t!=t}var Ftt=Object.freeze({__proto__:null,JsonPatchError:Pn,_areEquals:Qv,applyOperation:ap,applyPatch:JT,applyReducer:function Rtt(e,t,n){var i=ap(e,t);if(!1===i.test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument},deepClone:Jo,getValueByPointer:QT,validate:kde,validator:ZT}),b4=new WeakMap,Ptt=function e(t){this.observers=new Map,this.obj=t},Ltt=function e(t,n){this.callback=t,this.observer=n};function w4(e,t){void 0===t&&(t=!1);var n=b4.get(e.object);E4(n.value,e.object,e.patches,"",t),e.patches.length&&JT(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function E4(e,t,n,i,r){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=_4(t),s=_4(e),a=!1,l=s.length-1;l>=0;l--){var c=e[u=s[l]];if(!m4(t,u)||void 0===t[u]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+sp(u),value:Jo(c)}),n.push({op:"remove",path:i+"/"+sp(u)}),a=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}));else{var d=t[u];"object"==typeof c&&null!=c&&"object"==typeof d&&null!=d&&Array.isArray(c)===Array.isArray(d)?E4(c,d,n,i+"/"+sp(u),r):c!==d&&(r&&n.push({op:"test",path:i+"/"+sp(u),value:Jo(c)}),n.push({op:"replace",path:i+"/"+sp(u),value:Jo(d)}))}}if(a||o.length!=s.length)for(l=0;l<o.length;l++){var u;!m4(e,u=o[l])&&void 0!==t[u]&&n.push({op:"add",path:i+"/"+sp(u),value:Jo(t[u])})}}}var D4,Ide,C4,Ode,ztt=Object.freeze({__proto__:null,compare:function Htt(e,t,n){void 0===n&&(n=!1);var i=[];return E4(e,t,i,"",n),i},generate:w4,observe:function Utt(e,t){var i,r=function $tt(e){return b4.get(e)}(e);if(r){var o=function Btt(e,t){return e.observers.get(t)}(r,t);i=o&&o.observer}else r=new Ptt(e),b4.set(e,r);if(i)return i;if(i={},r.value=Jo(e),t){i.callback=t,i.next=null;var s=function(){w4(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=[],i.object=e,i.unobserve=function(){w4(i),clearTimeout(i.next),function Vtt(e,t){e.observers.delete(t.callback)}(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new Ltt(t,i)),i},unobserve:function jtt(e,t){t.unobserve()}});function Gtt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function S4(){if(Ode)return C4;Ode=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return C4=i=>i?"object"!=typeof i?e:i:t}Object.assign({},Ftt,ztt,{JsonPatchError:Mde,deepClone:Jo,escapePathComponent:sp,unescapePathComponent:Ade});var x4,Rde,A4,Fde,Pde,M4,Lde,k4,$de,O4,Bde,R4,Vde,F4,jde,P4,Ude,L4,Hde,$4,zde,B4,Gde,V4,Wde,j4,qde,U4,Yde,H4,Xde,eA={exports:{}};function T4(){return Rde?x4:(Rde=1,x4={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2})}function tA(){return Fde||(Fde=1,A4="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),A4}function N4(){return Pde||(Pde=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=T4(),o=tA(),s=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[d,i]],p=(g,m,_)=>{const y=(g=>{for(const[m,_]of f)g=g.split(`${m}*`).join(`${m}{0,${_}}`).split(`${m}+`).join(`${m}{1,${_}}`);return g})(m),v=c++;o(g,v,m),u[g]=v,l[v]=m,s[v]=new RegExp(m,_?"g":void 0),a[v]=new RegExp(y,_?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(eA,eA.exports)),eA.exports}function I4(){if($de)return k4;$de=1;const e=tA(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=T4(),{safeRe:i,t:r}=N4(),o=S4(),{compareIdentifiers:s}=function qtt(){if(Lde)return M4;Lde=1;const e=/^[0-9]+$/,t=(i,r)=>{const o=e.test(i),s=e.test(r);return o&&s&&(i=+i,r=+r),i===r?0:o&&!s?-1:s&&!o?1:i<r?-1:1};return M4={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)}}();class a{constructor(u,c){if(c=o(c),u instanceof a){if(u.loose===!!c.loose&&u.includePrerelease===!!c.includePrerelease)return u;u=u.version}else if("string"!=typeof u)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const d=u.trim().match(c.loose?i[r.LOOSE]:i[r.FULL]);if(!d)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=d[4]?d[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const h=+f;if(h>=0&&h<n)return h}return f}):[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if("string"==typeof u&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let c=0;do{const d=this.prerelease[c],f=u.prerelease[c];if(e("prerelease compare",c,d,f),void 0===d&&void 0===f)return 0;if(void 0===f)return 1;if(void 0===d)return-1;if(d!==f)return s(d,f)}while(++c)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let c=0;do{const d=this.build[c],f=u.build[c];if(e("build compare",c,d,f),void 0===d&&void 0===f)return 0;if(void 0===f)return 1;if(void 0===d)return-1;if(d!==f)return s(d,f)}while(++c)}inc(u,c,d){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,d),this.inc("pre",c,d);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",c,d),this.inc("pre",c,d);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(d)?1:0;if(!c&&!1===d)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[f];else{let h=this.prerelease.length;for(;--h>=0;)"number"==typeof this.prerelease[h]&&(this.prerelease[h]++,h=-2);if(-1===h){if(c===this.prerelease.join(".")&&!1===d)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(c){let h=[c,f];!1===d&&(h=[c]),0===s(this.prerelease[0],c)?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return k4=a}function b_(){if(Bde)return O4;Bde=1;const e=I4();return O4=(n,i,r)=>new e(n,r).compare(new e(i,r))}function Kde(){if(Yde)return U4;Yde=1;const e=/\s+/g;class t{constructor(S,T){if(T=r(T),S instanceof t)return S.loose===!!T.loose&&S.includePrerelease===!!T.includePrerelease?S:new t(S.raw,T);if(S instanceof o)return this.raw=S.value,this.set=[[S]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=S.trim().replace(e," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(A=>!g(A[0])),0===this.set.length)this.set=[I];else if(this.set.length>1)for(const A of this.set)if(1===A.length&&m(A[0])){this.set=[A];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let S=0;S<this.set.length;S++){S>0&&(this.formatted+="||");const T=this.set[S];for(let I=0;I<T.length;I++)I>0&&(this.formatted+=" "),this.formatted+=T[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(S){const I=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+S,A=i.get(I);if(A)return A;const M=this.options.loose;S=S.replace(M?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE],F(this.options.includePrerelease)),s("hyphen replace",S),S=S.replace(l[u.COMPARATORTRIM],c),s("comparator trim",S),S=S.replace(l[u.TILDETRIM],d),s("tilde trim",S),S=S.replace(l[u.CARETTRIM],f),s("caret trim",S);let L=S.split(" ").map(z=>y(z,this.options)).join(" ").split(/\s+/).map(z=>R(z,this.options));M&&(L=L.filter(z=>(s("loose invalid filter",z,this.options),!!z.match(l[u.COMPARATORLOOSE])))),s("range list",L);const $=new Map,V=L.map(z=>new o(z,this.options));for(const z of V){if(g(z))return[z];$.set(z.value,z)}$.size>1&&$.has("")&&$.delete("");const B=[...$.values()];return i.set(I,B),B}intersects(S,T){if(!(S instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>_(I,T)&&S.set.some(A=>_(A,T)&&I.every(M=>A.every(O=>M.intersects(O,T)))))}test(S){if(!S)return!1;if("string"==typeof S)try{S=new a(S,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(P(this.set[T],S,this.options))return!0;return!1}}U4=t;const n=function Wtt(){return Ide?D4:(Ide=1,D4=class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(void 0!==i)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&void 0!==i){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,i)}return this}})}(),i=new n,r=S4(),o=function tnt(){if(qde)return j4;qde=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.value=this.semver===e?"":this.operator+this.semver.version,s("comp",this)}parse(c){const f=c.match(this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR]);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=void 0!==f[1]?f[1]:"","="===this.operator&&(this.operator=""),this.semver=f[2]?new a(f[2],this.options.loose):e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if("string"==typeof c)try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(c.value,d).test(this.value):""===c.operator?""===c.value||new l(this.value,d).test(c.semver):!((d=n(d)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===c.value)||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))||!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}j4=t;const n=S4(),{safeRe:i,t:r}=N4(),o=function ent(){if(Wde)return V4;Wde=1;const e=function Ytt(){if(Vde)return R4;Vde=1;const e=b_();return R4=(n,i,r)=>0===e(n,i,r)}(),t=function Ktt(){if(jde)return F4;jde=1;const e=b_();return F4=(n,i,r)=>0!==e(n,i,r)}(),n=function Xtt(){if(Ude)return P4;Ude=1;const e=b_();return P4=(n,i,r)=>e(n,i,r)>0}(),i=function Qtt(){if(Hde)return L4;Hde=1;const e=b_();return L4=(n,i,r)=>e(n,i,r)>=0}(),r=function Jtt(){if(zde)return $4;zde=1;const e=b_();return $4=(n,i,r)=>e(n,i,r)<0}(),o=function Ztt(){if(Gde)return B4;Gde=1;const e=b_();return B4=(n,i,r)=>e(n,i,r)<=0}();return V4=(a,l,u,c)=>{switch(l){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof u&&(u=u.version),a===u;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof u&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,c);case"!=":return t(a,u,c);case">":return n(a,u,c);case">=":return i(a,u,c);case"<":return r(a,u,c);case"<=":return o(a,u,c);default:throw new TypeError(`Invalid operator: ${l}`)}}}(),s=tA(),a=I4(),l=Kde();return j4}(),s=tA(),a=I4(),{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=N4(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=T4(),g=x=>"<0.0.0-0"===x.value,m=x=>""===x.value,_=(x,S)=>{let T=!0;const I=x.slice();let A=I.pop();for(;T&&I.length;)T=I.every(M=>A.intersects(M,S)),A=I.pop();return T},y=(x,S)=>(s("comp",x,S),x=D(x,S),s("caret",x),x=b(x,S),s("tildes",x),x=C(x,S),s("xrange",x),x=k(x,S),s("stars",x),x),v=x=>!x||"x"===x.toLowerCase()||"*"===x,b=(x,S)=>x.trim().split(/\s+/).map(T=>w(T,S)).join(" "),w=(x,S)=>x.replace(S.loose?l[u.TILDELOOSE]:l[u.TILDE],(I,A,M,O,L)=>{let $;return s("tilde",x,I,A,M,O,L),v(A)?$="":v(M)?$=`>=${A}.0.0 <${+A+1}.0.0-0`:v(O)?$=`>=${A}.${M}.0 <${A}.${+M+1}.0-0`:L?(s("replaceTilde pr",L),$=`>=${A}.${M}.${O}-${L} <${A}.${+M+1}.0-0`):$=`>=${A}.${M}.${O} <${A}.${+M+1}.0-0`,s("tilde return",$),$}),D=(x,S)=>x.trim().split(/\s+/).map(T=>E(T,S)).join(" "),E=(x,S)=>{s("caret",x,S);const I=S.includePrerelease?"-0":"";return x.replace(S.loose?l[u.CARETLOOSE]:l[u.CARET],(A,M,O,L,$)=>{let V;return s("caret",x,A,M,O,L,$),v(M)?V="":v(O)?V=`>=${M}.0.0${I} <${+M+1}.0.0-0`:v(L)?V="0"===M?`>=${M}.${O}.0${I} <${M}.${+O+1}.0-0`:`>=${M}.${O}.0${I} <${+M+1}.0.0-0`:$?(s("replaceCaret pr",$),V="0"===M?"0"===O?`>=${M}.${O}.${L}-${$} <${M}.${O}.${+L+1}-0`:`>=${M}.${O}.${L}-${$} <${M}.${+O+1}.0-0`:`>=${M}.${O}.${L}-${$} <${+M+1}.0.0-0`):(s("no pr"),V="0"===M?"0"===O?`>=${M}.${O}.${L}${I} <${M}.${O}.${+L+1}-0`:`>=${M}.${O}.${L}${I} <${M}.${+O+1}.0-0`:`>=${M}.${O}.${L} <${+M+1}.0.0-0`),s("caret return",V),V})},C=(x,S)=>(s("replaceXRanges",x,S),x.split(/\s+/).map(T=>N(T,S)).join(" ")),N=(x,S)=>(x=x.trim()).replace(S.loose?l[u.XRANGELOOSE]:l[u.XRANGE],(I,A,M,O,L,$)=>{s("xRange",x,I,A,M,O,L,$);const V=v(M),B=V||v(O),z=B||v(L);return"="===A&&z&&(A=""),$=S.includePrerelease?"-0":"",V?I=">"===A||"<"===A?"<0.0.0-0":"*":A&&z?(B&&(O=0),L=0,">"===A?(A=">=",B?(M=+M+1,O=0,L=0):(O=+O+1,L=0)):"<="===A&&(A="<",B?M=+M+1:O=+O+1),"<"===A&&($="-0"),I=`${A+M}.${O}.${L}${$}`):B?I=`>=${M}.0.0${$} <${+M+1}.0.0-0`:z&&(I=`>=${M}.${O}.0${$} <${M}.${+O+1}.0-0`),s("xRange return",I),I}),k=(x,S)=>(s("replaceStars",x,S),x.trim().replace(l[u.STAR],"")),R=(x,S)=>(s("replaceGTE0",x,S),x.trim().replace(l[S.includePrerelease?u.GTE0PRE:u.GTE0],"")),F=x=>(S,T,I,A,M,O,L,$,V,B,z,te)=>`${T=v(I)?"":v(A)?`>=${I}.0.0${x?"-0":""}`:v(M)?`>=${I}.${A}.0${x?"-0":""}`:O?`>=${T}`:`>=${T}${x?"-0":""}`} ${$=v(V)?"":v(B)?`<${+V+1}.0.0-0`:v(z)?`<${V}.${+B+1}.0-0`:te?`<=${V}.${B}.${z}-${te}`:x?`<${V}.${B}.${+z+1}-0`:`<=${$}`}`.trim(),P=(x,S,T)=>{for(let I=0;I<x.length;I++)if(!x[I].test(S))return!1;if(S.prerelease.length&&!T.includePrerelease){for(let I=0;I<x.length;I++)if(s(x[I].semver),x[I].semver!==o.ANY&&x[I].semver.prerelease.length>0){const A=x[I].semver;if(A.major===S.major&&A.minor===S.minor&&A.patch===S.patch)return!0}return!1}return!0};return U4}var int=function nnt(){if(Xde)return H4;Xde=1;const e=Kde();return H4=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)}}(),Qde=Gtt(int);function rnt(e,t,n){const i=e.open(t),{origin:s}=new URL(t);let a=40;e.addEventListener("message",function l(c){c.source===i&&(a=0,e.removeEventListener("message",l,!1))},!1),setTimeout(function u(){a<=0||(i.postMessage(n,s),setTimeout(u,250),a-=1)},250)}var ont='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function Jde(e,...t){for(const n of t)snt(e,n);return e}function snt(e,t){for(const n of Object.keys(t))Ig(e,n,t[n],!0)}const jl=Jd;let Jv=Zd;const Zde=typeof window<"u"?window:void 0;void 0===Jv&&Zde?.vl?.compile&&(Jv=Zde.vl);const Nnt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Mnt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Zv={vega:"Vega","vega-lite":"Vega-Lite"},nA={vega:jl.version,"vega-lite":Jv?Jv.version:"not available"},knt={vega:e=>e,"vega-lite":(e,t)=>Jv.compile(e,{config:t}).spec},Int='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Ont="chart-wrapper";function Rnt(e){return"function"==typeof e}function efe(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+o),s.document.title=`${Zv[i]} JSON Source`}function Fnt(e,t){if(e.$schema){const n=ide(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Zv[n.library]}, but mode argument sets ${Zv[t]??t}.`);const i=n.library;return Qde(nA[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Zv[i]} ${n.version}, but the current version of ${Zv[i]} is v${nA[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function tfe(e){return!(!e||!("load"in e))}function nfe(e){return tfe(e)?e:jl.loader(e)}function Pnt(e){const t=e.usermeta?.embedOptions??{};return be(t.defaultStyle)&&(t.defaultStyle=!1),t}function w_(e,t){return z4.apply(this,arguments)}function z4(){return z4=li(function*(e,t,n={}){let i,r;be(t)?(r=nfe(n.loader),i=JSON.parse(yield r.load(t))):i=t;const o=Pnt(i),s=o.loader;(!r||s)&&(r=nfe(n.loader??s));const a=yield ife(o,r),l=yield ife(n,r),u={...Jde(l,a),config:kg(l.config??{},a.config??{})};return yield $nt(e,i,u,r)}),z4.apply(this,arguments)}function ife(e,t){return G4.apply(this,arguments)}function G4(){return G4=li(function*(e,t){const n=be(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},i=be(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}),G4.apply(this,arguments)}function Lnt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function $nt(e,t){return W4.apply(this,arguments)}function W4(){return W4=li(function*(e,t,n={},i){const r=n.theme?kg(ef[n.theme],n.config??{}):n.config,o=Oc(n.actions)?n.actions:Jde({},Nnt,n.actions??{}),s={...Mnt,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??jl.Warn,u=n.downloadFileName??"visualization",c="string"==typeof e?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const w="vega-embed-style",{root:D,rootContainer:E}=Lnt(c);if(!D.getElementById(w)){const C=document.createElement("style");C.id=w,C.innerHTML=void 0===n.defaultStyle||!0===n.defaultStyle?ont.toString():n.defaultStyle,E.appendChild(C)}}const d=Fnt(t,n.mode);let f=knt[d](t,r);if("vega-lite"===d&&f.$schema){const w=ide(f.$schema);Qde(nA.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${nA.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(Ont),c.appendChild(w),h=w}const p=n.patch;if(p&&(f=p instanceof Function?p(f):JT(f,p,!0,!1).newDocument),n.formatLocale&&jl.formatLocale(n.formatLocale),n.timeFormatLocale&&jl.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const D=n.expressionFunctions[w];"fn"in D?jl.expressionFunction(w,D.fn,D.visitor):D instanceof Function&&jl.expressionFunction(w,D)}const{ast:g}=n,m=jl.parse(f,"vega-lite"===d?{}:r,{ast:g}),_=new(n.viewClass||jl.View)(m,{loader:i,logLevel:l,renderer:a,...g?{expr:jl.expressionInterpreter??n.expr??PGe}:{}});if(_.addSignalListener("autosize",(w,D)=>{const{type:E}=D;"fit-x"==E?(h.classList.add("fit-x"),h.classList.remove("fit-y")):"fit-y"==E?(h.classList.remove("fit-x"),h.classList.add("fit-y")):"fit"==E?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),!1!==n.tooltip){const{loader:w,tooltip:D}=n,E=w&&!tfe(w)?w?.baseURL:void 0,C=Rnt(D)?D:new Tde({baseURL:E,...!0===D?{}:D}).call;_.tooltip(C)}let v,{hover:y}=n;if(void 0===y&&(y="vega"===d),y){const{hoverSet:w,updateSet:D}="boolean"==typeof y?{}:y;_.hover(w,D)}if(n&&(null!=n.width&&_.width(n.width),null!=n.height&&_.height(n.height),null!=n.padding&&_.padding(n.padding)),yield _.initialize(h,n.bind).runAsync(),!1!==o){let w=c;if(!1!==n.defaultStyle||n.forceActionsMenu){const E=document.createElement("details");E.title=s.CLICK_TO_VIEW_ACTIONS,c.append(E),w=E;const C=document.createElement("summary");C.innerHTML=Int,E.append(C),v=N=>{E.contains(N.target)||E.removeAttribute("open")},document.addEventListener("click",v)}const D=document.createElement("div");if(w.append(D),D.classList.add("vega-actions"),!0===o||!1!==o.export)for(const E of["svg","png"])if(!0===o||!0===o.export||o.export[E]){const C=s[`${E.toUpperCase()}_ACTION`],N=document.createElement("a"),k=ye(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;N.text=C,N.href="#",N.target="_blank",N.download=`${u}.${E}`,N.addEventListener("mousedown",function(){var R=li(function*(F){F.preventDefault();const P=yield _.toImageURL(E,k);this.href=P});return function(F){return R.apply(this,arguments)}}()),D.append(N)}if(!0===o||!1!==o.source){const E=document.createElement("a");E.text=s.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(C){efe($I()(t),n.sourceHeader??"",n.sourceFooter??"",d),C.preventDefault()}),D.append(E)}if("vega-lite"===d&&(!0===o||!1!==o.compiled)){const E=document.createElement("a");E.text=s.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(C){efe($I()(f),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),D.append(E)}if(!0===o||!1!==o.editor){const E=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=s.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(N){rnt(window,E,{config:r,mode:p?"vega":d,renderer:a,spec:$I()(p?f:t)}),N.preventDefault()}),D.append(C)}}return{view:_,spec:t,vgSpec:f,finalize:function b(){v&&document.removeEventListener("click",v),_.finalize()},embedOptions:n}}),W4.apply(this,arguments)}class rfe{}class ofe{}class Ju{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let i=t[n];const r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(n,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ju?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new Ju;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ju?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const r=("a"===t.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class Bnt{encodeKey(t){return sfe(t)}encodeValue(t){return sfe(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const jnt=/%(\d[a-f0-9])/gi,Unt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sfe(e){return encodeURIComponent(e).replace(jnt,(t,n)=>Unt[n]??t)}function iA(e){return`${e}`}class Vd{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Bnt,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Vnt(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n],r=Array.isArray(i)?i.map(iA):[iA(i)];this.map.set(n,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Vd({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(iA(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(iA(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Hnt{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function afe(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function lfe(e){return typeof Blob<"u"&&e instanceof Blob}function ufe(e){return typeof FormData<"u"&&e instanceof FormData}class eb{constructor(t,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function znt(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ju),this.context||(this.context=new Hnt),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Vd,this.urlWithParams=n}serializeBody(){return null===this.body?null:afe(this.body)||lfe(this.body)||ufe(this.body)||function Gnt(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ufe(this.body)?null:lfe(this.body)?this.body.type||null:afe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,u=t.params||this.params;const c=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,f)=>d.set(f,t.setHeaders[f]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((d,f)=>d.set(f,t.setParams[f]),u)),new eb(n,i,o,{params:u,headers:l,context:c,reportProgress:a,responseType:r,withCredentials:s})}}var Zn=(()=>((Zn=Zn||{})[Zn.Sent=0]="Sent",Zn[Zn.UploadProgress=1]="UploadProgress",Zn[Zn.ResponseHeader=2]="ResponseHeader",Zn[Zn.DownloadProgress=3]="DownloadProgress",Zn[Zn.Response=4]="Response",Zn[Zn.User=5]="User",Zn))();class q4{constructor(t,n=200,i="OK"){this.headers=t.headers||new Ju,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Y4 extends q4{constructor(t={}){super(t),this.type=Zn.ResponseHeader}clone(t={}){return new Y4({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class rA extends q4{constructor(t={}){super(t),this.type=Zn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new rA({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class cfe extends q4{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function K4(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let tb=(()=>{class e{constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof eb)o=n;else{let l,u;l=r.headers instanceof Ju?r.headers:new Ju(r.headers),r.params&&(u=r.params instanceof Vd?r.params:new Vd({fromObject:r.params})),o=new eb(n,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Re(o).pipe(wc(l=>this.handler.handle(l)));if(n instanceof eb||"events"===r.observe)return s;const a=s.pipe(vi(l=>l instanceof rA));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(qe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(qe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(qe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(qe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new Vd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,K4(r,i))}post(n,i,r={}){return this.request("POST",n,K4(r,i))}put(n,i,r={}){return this.request("PUT",n,K4(r,i))}}return e.\u0275fac=function(n){return new(n||e)(he(rfe))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();class dfe{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const ffe=new Oe("HTTP_INTERCEPTORS");let Wnt=(()=>{class e{intercept(n,i){return i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();const qnt=/^\)\]\}',?\n/;let hfe=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qt(i=>{const r=this.xhrFactory.build();if(r.open(n.method,n.urlWithParams),n.withCredentials&&(r.withCredentials=!0),n.headers.forEach((h,p)=>r.setRequestHeader(h,p.join(","))),n.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const h=n.detectContentTypeHeader();null!==h&&r.setRequestHeader("Content-Type",h)}if(n.responseType){const h=n.responseType.toLowerCase();r.responseType="json"!==h?h:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const h=r.statusText||"OK",p=new Ju(r.getAllResponseHeaders()),g=function Ynt(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||n.url;return s=new Y4({headers:p,status:r.status,statusText:h,url:g}),s},l=()=>{let{headers:h,status:p,statusText:g,url:m}=a(),_=null;204!==p&&(_=typeof r.response>"u"?r.responseText:r.response),0===p&&(p=_?200:0);let y=p>=200&&p<300;if("json"===n.responseType&&"string"==typeof _){const v=_;_=_.replace(qnt,"");try{_=""!==_?JSON.parse(_):null}catch(b){_=v,y&&(y=!1,_={error:b,text:_})}}y?(i.next(new rA({body:_,headers:h,status:p,statusText:g,url:m||void 0})),i.complete()):i.error(new cfe({error:_,headers:h,status:p,statusText:g,url:m||void 0}))},u=h=>{const{url:p}=a(),g=new cfe({error:h,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(g)};let c=!1;const d=h=>{c||(i.next(a()),c=!0);let p={type:Zn.DownloadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),"text"===n.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},f=h=>{let p={type:Zn.UploadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",u),r.addEventListener("timeout",u),r.addEventListener("abort",u),n.reportProgress&&(r.addEventListener("progress",d),null!==o&&r.upload&&r.upload.addEventListener("progress",f)),r.send(o),i.next({type:Zn.Sent}),()=>{r.removeEventListener("error",u),r.removeEventListener("abort",u),r.removeEventListener("load",l),r.removeEventListener("timeout",u),n.reportProgress&&(r.removeEventListener("progress",d),null!==o&&r.upload&&r.upload.removeEventListener("progress",f)),r.readyState!==r.DONE&&r.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(he(xH))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();const X4=new Oe("XSRF_COOKIE_NAME"),Q4=new Oe("XSRF_HEADER_NAME");class pfe{}let Knt=(()=>{class e{constructor(n,i,r){this.doc=n,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=mH(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(he(un),he(xw),he(X4))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})(),J4=(()=>{class e{constructor(n,i){this.tokenService=n,this.headerName=i}intercept(n,i){const r=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(he(pfe),he(Q4))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})(),Xnt=(()=>{class e{constructor(n,i){this.backend=n,this.injector=i,this.chain=null}handle(n){if(null===this.chain){const i=this.injector.get(ffe,[]);this.chain=i.reduceRight((r,o)=>new dfe(r,o),this.backend)}return this.chain.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(he(ofe),he(Ji))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})(),Qnt=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:J4,useClass:Wnt}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:X4,useValue:n.cookieName}:[],n.headerName?{provide:Q4,useValue:n.headerName}:[]]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({providers:[J4,{provide:ffe,useExisting:J4,multi:!0},{provide:pfe,useClass:Knt},{provide:X4,useValue:"XSRF-TOKEN"},{provide:Q4,useValue:"X-XSRF-TOKEN"}]}),e})(),Jnt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({providers:[tb,{provide:rfe,useClass:Xnt},hfe,{provide:ofe,useExisting:hfe}],imports:[Qnt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),e})();const Znt=["map"];function eit(e,t){if(1&e&&(j(0,"i"),K(1),H()),2&e){const n=Dt();oe(1),pc("in "+n.selectedYear)}}function tit(e,t){1&e&&(j(0,"span"),K(1),H()),2&e&&(oe(1),pc(" based on the most recent available data"))}function nit(e,t){if(1&e&&(j(0,"option",16),K(1),H()),2&e){const n=t.$implicit;_e("ngValue",n.id),oe(1),pc(n.name)}}function iit(e,t){1&e&&(j(0,"div",21),ze(1,"img",22),j(2,"p",23),K(3,"You explored unresearched areas, no data available."),H()())}const rit=function(e){return{"font-style":e}};let oit=(()=>{class e{constructor(n,i,r){this.http=n,this.apparelService=i,this.renderer=r,this.title="The top 100 apparel companies'",this.apparelTop100=[],this.suppliers=[],this.selectedYear="latest",this.selectedCompany=0,this.apparelTop100=i.getCompanies()}ngOnInit(){this.company=this.apparelService.getCompany(this.selectedCompany),this.title=0!=this.company.id?this.company.name:"The top 100 apparel companies'",this.updateChart()}ngAfterViewInit(){}updateChart(){let n="https://wikirate.org/Commons+Supplied_By+RelationshipAnswer/answer_list.json?filter[company_group]=Apparel%20100%20Companies&filter[year]="+this.selectedYear+"&limit=0";0!=this.company.id&&(n="https://wikirate.org/Commons+Supplied_By+RelationshipAnswer/answer_list.json?filter[subject_company_id]="+this.company.id+"&filter[year]="+this.selectedYear+"&limit=0"),this.suppliers=[],null!=this.suppliers_map&&this.renderer.removeChild(this.mapElement.nativeElement,this.suppliers_map),this.http.get(n).subscribe(i=>{this.suppliers=i,this.suppliers.length>0&&(this.suppliers_map=this.renderer.createElement("div"),this.suppliers_map.id="supplier-map",this.renderer.appendChild(this.mapElement.nativeElement,this.suppliers_map),w_("div#supplier-map",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Number of Apparel Top 100 Suppliers per Country",width:800,height:520,signals:[{name:"type",value:"equalEarth"},{name:"scale",value:200},{name:"rotate0",value:-15},{name:"rotate1",value:0},{name:"rotate2",value:0},{name:"center0",value:0},{name:"center1",value:0},{name:"translate0",update:"width / 2"},{name:"translate1",update:"height / 2"},{name:"borderWidth",value:2},{name:"hover",value:null,on:[{events:"@circles:mouseover",update:"datum"},{events:"@circles:mouseout",update:"null"}]},{name:"title",value:"Number of Apparel Top 100 Suppliers per Country",update:"hover ? hover.country + ' (' + hover.companies + ')' : 'Number of Apparel Top 100 Suppliers per Country'"},{name:"cell_stroke",value:null,on:[{events:"dblclick",update:"cell_stroke ? null : 'brown'"},{events:"mousedown!",update:"cell_stroke"}]}],data:[{name:"world",url:"assets/world-110m.json",format:{type:"topojson",feature:"countries"},transform:[{type:"geopath",projection:"projection"}]},{name:"suppliers_country",url:"../../assets/content/Core+Country+Answer.json",format:{type:"json",parse:"auto"}},{name:"suppliers",values:this.suppliers,transform:[{type:"lookup",from:"suppliers_country",key:"company",fields:["object_company"],values:["value"],as:["country"]}]},{name:"wikirate_countries",values:[{code:"AD",name:"Andorra",card_id:2917786},{code:"AE",name:"United Arab Emirates",card_id:169529},{code:"AF",name:"Afghanistan",card_id:2917789},{code:"AG",name:"Antigua and Barbuda",card_id:2917790},{code:"AI",name:"Anguilla",card_id:2917791},{code:"AL",name:"Albania",card_id:2917792},{code:"AM",name:"Armenia",card_id:2917793},{code:"AO",name:"Angola",card_id:2917794},{code:"AQ",name:"Antarctica",card_id:2917795},{code:"AR",name:"Argentina",card_id:14400},{code:"AS",name:"American Samoa",card_id:2917796},{code:"AT",name:"Austria",card_id:17233},{code:"AU",name:"Australia",card_id:14405},{code:"AW",name:"Aruba",card_id:2917797},{code:"AX",name:"\xc5land Islands",card_id:2917798},{code:"AZ",name:"Azerbaijan",card_id:2917799},{code:"BA",name:"Bosnia and Herzegovina",card_id:2917800},{code:"BB",name:"Barbados",card_id:2917801},{code:"BD",name:"Bangladesh",card_id:14386},{code:"BE",name:"Belgium",card_id:19867},{code:"BF",name:"Burkina Faso",card_id:14408},{code:"BG",name:"Bulgaria",card_id:13973},{code:"BH",name:"Bahrain",card_id:2917802},{code:"BI",name:"Burundi",card_id:2917803},{code:"BJ",name:"Benin",card_id:2917804},{code:"BL",name:"Saint Barth\xe9lemy",card_id:2917805},{code:"BM",name:"Bermuda",card_id:2917806},{code:"BN",name:"Brunei Darussalam",card_id:2917807},{code:"BO",name:"Bolivia",card_id:2917808},{code:"BQ",name:"Bonaire, Sint Eustatius and Saba",card_id:2917809},{code:"BR",name:"Brazil",card_id:12379},{code:"BS",name:"Bahamas",card_id:2917810},{code:"BT",name:"Bhutan",card_id:2917811},{code:"BV",name:"Bouvet Island",card_id:2917812},{code:"BW",name:"Botswana",card_id:2917813},{code:"BY",name:"Belarus",card_id:2917814},{code:"BZ",name:"Belize",card_id:2917815},{code:"CA",name:"Canada",card_id:14965},{code:"CC",name:"Cocos (Keeling) Islands",card_id:2917828},{code:"CD",name:"Democratic Republic of the Congo",card_id:2917829},{code:"CF",name:"Central African Republic",card_id:2917830},{code:"CG",name:"Congo",card_id:38190},{code:"CH",name:"Switzerland",card_id:15220},{code:"CI",name:"C\xf4te d'Ivoire",card_id:2917831},{code:"CK",name:"Cook Islands",card_id:2917832},{code:"CL",name:"Chile",card_id:14404},{code:"CM",name:"Cameroon",card_id:2917833},{code:"CN",name:"China",card_id:12378},{code:"CO",name:"Colombia",card_id:12320},{code:"CR",name:"Costa Rica",card_id:2917834},{code:"CU",name:"Cuba",card_id:19542},{code:"CV",name:"Cape Verde",card_id:2917835},{code:"CW",name:"Cura\xe7ao",card_id:2917836},{code:"CX",name:"Christmas Island",card_id:2917837},{code:"CY",name:"Cyprus",card_id:2917838},{code:"CZ",name:"Czech Republic",card_id:45425},{code:"DE",name:"Germany",card_id:15272},{code:"DJ",name:"Djibouti",card_id:2917839},{code:"DK",name:"Denmark",card_id:21425},{code:"DM",name:"Dominica",card_id:2917840},{code:"DO",name:"Dominican Republic",card_id:18543},{code:"DZ",name:"Algeria",card_id:2917841},{code:"EC",name:"Ecuador",card_id:2917842},{code:"EE",name:"Estonia",card_id:2917843},{code:"EG",name:"Egypt",card_id:2917844},{code:"EH",name:"Western Sahara",card_id:2917845},{code:"ER",name:"Eritrea",card_id:2917846},{code:"ES",name:"Spain",card_id:12333},{code:"ET",name:"Ethiopia",card_id:14424},{code:"FI",name:"Finland",card_id:2917847},{code:"FJ",name:"Fiji",card_id:2917848},{code:"FK",name:"Falkland Islands (Malvinas)",card_id:2917849},{code:"FM",name:"Micronesia, Federated States of",card_id:2917850},{code:"FO",name:"Faroe Islands",card_id:2917851},{code:"FR",name:"France",card_id:19365},{code:"GA",name:"Gabon",card_id:2917852},{code:"GB",name:"United Kingdom",card_id:14908},{code:"GD",name:"Grenada",card_id:2917853},{code:"GE",name:"Georgia",card_id:2917854},{code:"GF",name:"French Guiana",card_id:2917855},{code:"GG",name:"Guernsey",card_id:2917856},{code:"GH",name:"Ghana",card_id:18541},{code:"GI",name:"Gibraltar",card_id:2917857},{code:"GL",name:"Greenland",card_id:2917858},{code:"GM",name:"Gambia",card_id:2917859},{code:"GN",name:"Guinea",card_id:2917860},{code:"GP",name:"Guadeloupe",card_id:2917861},{code:"GQ",name:"Equatorial Guinea",card_id:2917862},{code:"GR",name:"Greece",card_id:34142},{code:"GS",name:"South Georgia and the South Sandwich Islands",card_id:2917863},{code:"GT",name:"Guatemala",card_id:2917864},{code:"GU",name:"Guam",card_id:2917865},{code:"GW",name:"Guinea-Bissau",card_id:2917866},{code:"GY",name:"Guyana",card_id:2917867},{code:"HK",name:"Hong Kong",card_id:2917868},{code:"HM",name:"Heard Island and McDonald Islands",card_id:2917869},{code:"HN",name:"Honduras",card_id:18094},{code:"HR",name:"Croatia",card_id:2917870},{code:"HT",name:"Haiti",card_id:2917871},{code:"HU",name:"Hungary",card_id:45424},{code:"ID",name:"Indonesia",card_id:14371},{code:"IE",name:"Ireland",card_id:14394},{code:"IL",name:"Israel",card_id:14701},{code:"IM",name:"Isle of Man",card_id:2917872},{code:"IN",name:"India",card_id:14389},{code:"IO",name:"British Indian Ocean Territory",card_id:2917873},{code:"IQ",name:"Iraq",card_id:3913},{code:"IR",name:"Iran",card_id:2917874},{code:"IS",name:"Iceland",card_id:2917875},{code:"IT",name:"Italy",card_id:16175},{code:"JE",name:"Jersey",card_id:2917876},{code:"JM",name:"Jamaica",card_id:2917877},{code:"JO",name:"Jordan",card_id:1812107},{code:"JP",name:"Japan",card_id:14387},{code:"KE",name:"Kenya",card_id:21392},{code:"KG",name:"Kyrgyzstan",card_id:2917878},{code:"KH",name:"Cambodia",card_id:13908},{code:"KI",name:"Kiribati",card_id:2917879},{code:"KM",name:"Comoros",card_id:2917880},{code:"KN",name:"Saint Kitts and Nevis",card_id:2917881},{code:"KP",name:"Korea, Democratic People's Republic of",card_id:2917882},{code:"KR",name:"Korea, Republic of",card_id:2917883},{code:"KW",name:"Kuwait",card_id:2917884},{code:"KY",name:"Cayman Islands",card_id:2917885},{code:"KZ",name:"Kazakhstan",card_id:2917886},{code:"LA",name:"Laos",card_id:2917887},{code:"LB",name:"Lebanon",card_id:2917888},{code:"LC",name:"Saint Lucia",card_id:2917889},{code:"LI",name:"Liechtenstein",card_id:2917890},{code:"LK",name:"Sri Lanka",card_id:2917891},{code:"LR",name:"Liberia",card_id:2917892},{code:"LS",name:"Lesotho",card_id:2917893},{code:"LT",name:"Lithuania",card_id:2917894},{code:"LU",name:"Luxembourg",card_id:20766},{code:"LV",name:"Latvia",card_id:2917895},{code:"LY",name:"Libya",card_id:2917896},{code:"MA",name:"Morocco",card_id:14426},{code:"MC",name:"Monaco",card_id:2917897},{code:"MD",name:"Moldova",card_id:2917898},{code:"ME",name:"Montenegro",card_id:2917899},{code:"MF",name:"Saint Martin (French part)",card_id:2917900},{code:"MG",name:"Madagascar",card_id:40709},{code:"MH",name:"Marshall Islands",card_id:2917901},{code:"MK",name:"North Macedonia",card_id:2917902},{code:"ML",name:"Mali",card_id:20033},{code:"MM",name:"Myanmar",card_id:2917903},{code:"MN",name:"Mongolia",card_id:2917904},{code:"MO",name:"Macao",card_id:2917905},{code:"MP",name:"Northern Mariana Islands",card_id:2917906},{code:"MQ",name:"Martinique",card_id:2917907},{code:"MR",name:"Mauritania",card_id:2917908},{code:"MS",name:"Montserrat",card_id:2917909},{code:"MT",name:"Malta",card_id:2917910},{code:"MU",name:"Mauritius",card_id:2917911},{code:"MV",name:"Maldives",card_id:2917912},{code:"MW",name:"Malawi",card_id:14410},{code:"MX",name:"Mexico",card_id:14403},{code:"MY",name:"Malaysia",card_id:16948},{code:"MZ",name:"Mozambique",card_id:2917913},{code:"NA",name:"Namibia",card_id:2917914},{code:"NC",name:"New Caledonia",card_id:2917915},{code:"NE",name:"Niger",card_id:2917916},{code:"NF",name:"Norfolk Island",card_id:2917917},{code:"NG",name:"Nigeria",card_id:14384},{code:"NI",name:"Nicaragua",card_id:2917918},{code:"NL",name:"Netherlands",card_id:2917919},{code:"NO",name:"Norway",card_id:2917920},{code:"NP",name:"Nepal",card_id:45091},{code:"NR",name:"Nauru",card_id:2917921},{code:"NU",name:"Niue",card_id:2917922},{code:"NZ",name:"New Zealand",card_id:2917923},{code:"OM",name:"Oman",card_id:2917924},{code:"PA",name:"Panama",card_id:2917925},{code:"PE",name:"Peru",card_id:16184},{code:"PF",name:"French Polynesia",card_id:2917926},{code:"PG",name:"Papua New Guinea",card_id:16949},{code:"PH",name:"Philippines",card_id:37238},{code:"PK",name:"Pakistan",card_id:36162},{code:"PL",name:"Poland",card_id:37189},{code:"PM",name:"Saint Pierre and Miquelon",card_id:2917927},{code:"PN",name:"Pitcairn",card_id:2917928},{code:"PR",name:"Puerto Rico",card_id:2917929},{code:"PS",name:"Palestinian Territory",card_id:2917930},{code:"PT",name:"Portugal",card_id:2917931},{code:"PW",name:"Palau",card_id:2917932},{code:"PY",name:"Paraguay",card_id:2917933},{code:"QA",name:"Qatar",card_id:168817},{code:"RE",name:"R\xe9union",card_id:2917934},{code:"RO",name:"Romania",card_id:13974},{code:"RS",name:"Serbia",card_id:2917935},{code:"RU",name:"Russia",card_id:35176},{code:"RW",name:"Rwanda",card_id:2917936},{code:"SA",name:"Saudi Arabia",card_id:43202},{code:"SB",name:"Solomon Islands",card_id:2917937},{code:"SC",name:"Seychelles",card_id:2917938},{code:"SD",name:"Sudan",card_id:14149},{code:"SE",name:"Sweden",card_id:43201},{code:"SG",name:"Singapore",card_id:2917939},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha",card_id:2917940},{code:"SI",name:"Slovenia",card_id:20157},{code:"SJ",name:"Svalbard and Jan Mayen",card_id:2917941},{code:"SK",name:"Slovakia",card_id:2917942},{code:"SL",name:"Sierra Leone",card_id:2917943},{code:"SM",name:"San Marino",card_id:2917944},{code:"SN",name:"Senegal",card_id:15492},{code:"SO",name:"Somalia",card_id:2917945},{code:"SR",name:"Suriname",card_id:2917946},{code:"SS",name:"South Sudan",card_id:2917947},{code:"ST",name:"Sao Tome and Principe",card_id:2917948},{code:"SV",name:"El Salvador",card_id:33639},{code:"SX",name:"Sint Maarten (Dutch part)",card_id:2917949},{code:"SY",name:"Syrian Arab Republic",card_id:2917950},{code:"SZ",name:"Swaziland",card_id:2917951},{code:"TC",name:"Turks and Caicos Islands",card_id:2917952},{code:"TD",name:"Chad",card_id:2917953},{code:"TF",name:"French Southern Territories",card_id:2917954},{code:"TG",name:"Togo",card_id:2917955},{code:"TH",name:"Thailand",card_id:14214},{code:"TJ",name:"Tajikistan",card_id:2917956},{code:"TK",name:"Tokelau",card_id:2917957},{code:"TL",name:"Timor-Leste",card_id:2917958},{code:"TM",name:"Turkmenistan",card_id:2917959},{code:"TN",name:"Tunisia",card_id:2917960},{code:"TO",name:"Tonga",card_id:2917961},{code:"TR",name:"Turkey",card_id:13972},{code:"TT",name:"Trinidad and Tobago",card_id:2917962},{code:"TV",name:"Tuvalu",card_id:2917963},{code:"TW",name:"Taiwan, Province of China",card_id:2917964},{code:"TZ",name:"Tanzania",card_id:16808},{code:"UA",name:"Ukraine",card_id:2917965},{code:"UG",name:"Uganda",card_id:40396},{code:"UM",name:"United States Minor Outlying Islands",card_id:2917966},{code:"US",name:"United States",card_id:14551},{code:"UY",name:"Uruguay",card_id:2918018},{code:"UZ",name:"Uzbekistan",card_id:14412},{code:"VA",name:"Holy See (Vatican City State)",card_id:2918019},{code:"VC",name:"Saint Vincent and the Grenadines",card_id:2918020},{code:"VE",name:"Venezuela",card_id:2918021},{code:"VG",name:"British Virgin Islands",card_id:2918022},{code:"VI",name:"U.S. Virgin Islands",card_id:2918023},{code:"VN",name:"Vietnam",card_id:2918024},{code:"VU",name:"Vanuatu",card_id:2918025},{code:"WF",name:"Wallis and Futuna",card_id:2918026},{code:"WS",name:"Samoa",card_id:2918027},{code:"XK",name:"Kosovo",card_id:2918028},{code:"YE",name:"Yemen",card_id:2918029},{code:"YT",name:"Mayotte",card_id:2918030},{code:"ZA",name:"South Africa",card_id:14938},{code:"ZM",name:"Zambia",card_id:2918031},{code:"ZW",name:"Zimbabwe",card_id:2918032}]},{name:"country_codes",values:[{name:"Afghanistan","alpha-2":"AF","country-code":"004"},{name:"\xc5land Islands","alpha-2":"AX","country-code":"248"},{name:"Albania","alpha-2":"AL","country-code":"008"},{name:"Algeria","alpha-2":"DZ","country-code":"012"},{name:"American Samoa","alpha-2":"AS","country-code":"016"},{name:"Andorra","alpha-2":"AD","country-code":"020"},{name:"Angola","alpha-2":"AO","country-code":"024"},{name:"Anguilla","alpha-2":"AI","country-code":"660"},{name:"Antarctica","alpha-2":"AQ","country-code":"010"},{name:"Antigua and Barbuda","alpha-2":"AG","country-code":"028"},{name:"Argentina","alpha-2":"AR","country-code":"032"},{name:"Armenia","alpha-2":"AM","country-code":"051"},{name:"Aruba","alpha-2":"AW","country-code":"533"},{name:"Australia","alpha-2":"AU","country-code":"036"},{name:"Austria","alpha-2":"AT","country-code":"040"},{name:"Azerbaijan","alpha-2":"AZ","country-code":"031"},{name:"Bahamas","alpha-2":"BS","country-code":"044"},{name:"Bahrain","alpha-2":"BH","country-code":"048"},{name:"Bangladesh","alpha-2":"BD","country-code":"050"},{name:"Barbados","alpha-2":"BB","country-code":"052"},{name:"Belarus","alpha-2":"BY","country-code":"112"},{name:"Belgium","alpha-2":"BE","country-code":"056"},{name:"Belize","alpha-2":"BZ","country-code":"084"},{name:"Benin","alpha-2":"BJ","country-code":"204"},{name:"Bermuda","alpha-2":"BM","country-code":"060"},{name:"Bhutan","alpha-2":"BT","country-code":"064"},{name:"Bolivia (Plurinational State of)","alpha-2":"BO","country-code":"068"},{name:"Bonaire, Sint Eustatius and Saba","alpha-2":"BQ","country-code":"535"},{name:"Bosnia and Herzegovina","alpha-2":"BA","country-code":"070"},{name:"Botswana","alpha-2":"BW","country-code":"072"},{name:"Bouvet Island","alpha-2":"BV","country-code":"074"},{name:"Brazil","alpha-2":"BR","country-code":"076"},{name:"British Indian Ocean Territory","alpha-2":"IO","country-code":"086"},{name:"Brunei Darussalam","alpha-2":"BN","country-code":"096"},{name:"Bulgaria","alpha-2":"BG","country-code":"100"},{name:"Burkina Faso","alpha-2":"BF","country-code":"854"},{name:"Burundi","alpha-2":"BI","country-code":"108"},{name:"Cabo Verde","alpha-2":"CV","country-code":"132"},{name:"Cambodia","alpha-2":"KH","country-code":"116"},{name:"Cameroon","alpha-2":"CM","country-code":"120"},{name:"Canada","alpha-2":"CA","country-code":"124"},{name:"Cayman Islands","alpha-2":"KY","country-code":"136"},{name:"Central African Republic","alpha-2":"CF","country-code":"140"},{name:"Chad","alpha-2":"TD","country-code":"148"},{name:"Chile","alpha-2":"CL","country-code":"152"},{name:"China","alpha-2":"CN","country-code":"156"},{name:"Christmas Island","alpha-2":"CX","country-code":"162"},{name:"Cocos (Keeling) Islands","alpha-2":"CC","country-code":"166"},{name:"Colombia","alpha-2":"CO","country-code":"170"},{name:"Comoros","alpha-2":"KM","country-code":"174"},{name:"Congo","alpha-2":"CG","country-code":"178"},{name:"Congo, Democratic Republic of the","alpha-2":"CD","country-code":"180"},{name:"Cook Islands","alpha-2":"CK","country-code":"184"},{name:"Costa Rica","alpha-2":"CR","country-code":"188"},{name:"C\xf4te d'Ivoire","alpha-2":"CI","country-code":"384"},{name:"Croatia","alpha-2":"HR","country-code":"191"},{name:"Cuba","alpha-2":"CU","country-code":"192"},{name:"Cura\xe7ao","alpha-2":"CW","country-code":"531"},{name:"Cyprus","alpha-2":"CY","country-code":"196"},{name:"Czechia","alpha-2":"CZ","country-code":"203"},{name:"Denmark","alpha-2":"DK","country-code":"208"},{name:"Djibouti","alpha-2":"DJ","country-code":"262"},{name:"Dominica","alpha-2":"DM","country-code":"212"},{name:"Dominican Republic","alpha-2":"DO","country-code":"214"},{name:"Ecuador","alpha-2":"EC","country-code":"218"},{name:"Egypt","alpha-2":"EG","country-code":"818"},{name:"El Salvador","alpha-2":"SV","country-code":"222"},{name:"Equatorial Guinea","alpha-2":"GQ","country-code":"226"},{name:"Eritrea","alpha-2":"ER","country-code":"232"},{name:"Estonia","alpha-2":"EE","country-code":"233"},{name:"Eswatini","alpha-2":"SZ","country-code":"748"},{name:"Ethiopia","alpha-2":"ET","country-code":"231"},{name:"Falkland Islands (Malvinas)","alpha-2":"FK","country-code":"238"},{name:"Faroe Islands","alpha-2":"FO","country-code":"234"},{name:"Fiji","alpha-2":"FJ","country-code":"242"},{name:"Finland","alpha-2":"FI","country-code":"246"},{name:"France","alpha-2":"FR","country-code":"250"},{name:"French Guiana","alpha-2":"GF","country-code":"254"},{name:"French Polynesia","alpha-2":"PF","country-code":"258"},{name:"French Southern Territories","alpha-2":"TF","country-code":"260"},{name:"Gabon","alpha-2":"GA","country-code":"266"},{name:"Gambia","alpha-2":"GM","country-code":"270"},{name:"Georgia","alpha-2":"GE","country-code":"268"},{name:"Germany","alpha-2":"DE","country-code":"276"},{name:"Ghana","alpha-2":"GH","country-code":"288"},{name:"Gibraltar","alpha-2":"GI","country-code":"292"},{name:"Greece","alpha-2":"GR","country-code":"300"},{name:"Greenland","alpha-2":"GL","country-code":"304"},{name:"Grenada","alpha-2":"GD","country-code":"308"},{name:"Guadeloupe","alpha-2":"GP","country-code":"312"},{name:"Guam","alpha-2":"GU","country-code":"316"},{name:"Guatemala","alpha-2":"GT","country-code":"320"},{name:"Guernsey","alpha-2":"GG","country-code":"831"},{name:"Guinea","alpha-2":"GN","country-code":"324"},{name:"Guinea-Bissau","alpha-2":"GW","country-code":"624"},{name:"Guyana","alpha-2":"GY","country-code":"328"},{name:"Haiti","alpha-2":"HT","country-code":"332"},{name:"Heard Island and McDonald Islands","alpha-2":"HM","country-code":"334"},{name:"Holy See","alpha-2":"VA","country-code":"336"},{name:"Honduras","alpha-2":"HN","country-code":"340"},{name:"Hong Kong","alpha-2":"HK","country-code":"344"},{name:"Hungary","alpha-2":"HU","country-code":"348"},{name:"Iceland","alpha-2":"IS","country-code":"352"},{name:"India","alpha-2":"IN","country-code":"356"},{name:"Indonesia","alpha-2":"ID","country-code":"360"},{name:"Iran (Islamic Republic of)","alpha-2":"IR","country-code":"364"},{name:"Iraq","alpha-2":"IQ","country-code":"368"},{name:"Ireland","alpha-2":"IE","country-code":"372"},{name:"Isle of Man","alpha-2":"IM","country-code":"833"},{name:"Israel","alpha-2":"IL","country-code":"376"},{name:"Italy","alpha-2":"IT","country-code":"380"},{name:"Jamaica","alpha-2":"JM","country-code":"388"},{name:"Japan","alpha-2":"JP","country-code":"392"},{name:"Jersey","alpha-2":"JE","country-code":"832"},{name:"Jordan","alpha-2":"JO","country-code":"400"},{name:"Kazakhstan","alpha-2":"KZ","country-code":"398"},{name:"Kenya","alpha-2":"KE","country-code":"404"},{name:"Kiribati","alpha-2":"KI","country-code":"296"},{name:"Korea (Democratic People's Republic of)","alpha-2":"KP","country-code":"408"},{name:"Korea, Republic of","alpha-2":"KR","country-code":"410"},{name:"Kuwait","alpha-2":"KW","country-code":"414"},{name:"Kyrgyzstan","alpha-2":"KG","country-code":"417"},{name:"Lao People's Democratic Republic","alpha-2":"LA","country-code":"418"},{name:"Latvia","alpha-2":"LV","country-code":"428"},{name:"Lebanon","alpha-2":"LB","country-code":"422"},{name:"Lesotho","alpha-2":"LS","country-code":"426"},{name:"Liberia","alpha-2":"LR","country-code":"430"},{name:"Libya","alpha-2":"LY","country-code":"434"},{name:"Liechtenstein","alpha-2":"LI","country-code":"438"},{name:"Lithuania","alpha-2":"LT","country-code":"440"},{name:"Luxembourg","alpha-2":"LU","country-code":"442"},{name:"Macao","alpha-2":"MO","country-code":"446"},{name:"Madagascar","alpha-2":"MG","country-code":"450"},{name:"Malawi","alpha-2":"MW","country-code":"454"},{name:"Malaysia","alpha-2":"MY","country-code":"458"},{name:"Maldives","alpha-2":"MV","country-code":"462"},{name:"Mali","alpha-2":"ML","country-code":"466"},{name:"Malta","alpha-2":"MT","country-code":"470"},{name:"Marshall Islands","alpha-2":"MH","country-code":"584"},{name:"Martinique","alpha-2":"MQ","country-code":"474"},{name:"Mauritania","alpha-2":"MR","country-code":"478"},{name:"Mauritius","alpha-2":"MU","country-code":"480"},{name:"Mayotte","alpha-2":"YT","country-code":"175"},{name:"Mexico","alpha-2":"MX","country-code":"484"},{name:"Micronesia (Federated States of)","alpha-2":"FM","country-code":"583"},{name:"Moldova, Republic of","alpha-2":"MD","country-code":"498"},{name:"Monaco","alpha-2":"MC","country-code":"492"},{name:"Mongolia","alpha-2":"MN","country-code":"496"},{name:"Montenegro","alpha-2":"ME","country-code":"499"},{name:"Montserrat","alpha-2":"MS","country-code":"500"},{name:"Morocco","alpha-2":"MA","country-code":"504"},{name:"Mozambique","alpha-2":"MZ","country-code":"508"},{name:"Myanmar","alpha-2":"MM","country-code":"104"},{name:"Namibia","alpha-2":"NA","country-code":"516"},{name:"Nauru","alpha-2":"NR","country-code":"520"},{name:"Nepal","alpha-2":"NP","country-code":"524"},{name:"Netherlands","alpha-2":"NL","country-code":"528"},{name:"New Caledonia","alpha-2":"NC","country-code":"540"},{name:"New Zealand","alpha-2":"NZ","country-code":"554"},{name:"Nicaragua","alpha-2":"NI","country-code":"558"},{name:"Niger","alpha-2":"NE","country-code":"562"},{name:"Nigeria","alpha-2":"NG","country-code":"566"},{name:"Niue","alpha-2":"NU","country-code":"570"},{name:"Norfolk Island","alpha-2":"NF","country-code":"574"},{name:"North Macedonia","alpha-2":"MK","country-code":"807"},{name:"Northern Mariana Islands","alpha-2":"MP","country-code":"580"},{name:"Norway","alpha-2":"NO","country-code":"578"},{name:"Oman","alpha-2":"OM","country-code":"512"},{name:"Pakistan","alpha-2":"PK","country-code":"586"},{name:"Palau","alpha-2":"PW","country-code":"585"},{name:"Palestine, State of","alpha-2":"PS","country-code":"275"},{name:"Panama","alpha-2":"PA","country-code":"591"},{name:"Papua New Guinea","alpha-2":"PG","country-code":"598"},{name:"Paraguay","alpha-2":"PY","country-code":"600"},{name:"Peru","alpha-2":"PE","country-code":"604"},{name:"Philippines","alpha-2":"PH","country-code":"608"},{name:"Pitcairn","alpha-2":"PN","country-code":"612"},{name:"Poland","alpha-2":"PL","country-code":"616"},{name:"Portugal","alpha-2":"PT","country-code":"620"},{name:"Puerto Rico","alpha-2":"PR","country-code":"630"},{name:"Qatar","alpha-2":"QA","country-code":"634"},{name:"R\xe9union","alpha-2":"RE","country-code":"638"},{name:"Romania","alpha-2":"RO","country-code":"642"},{name:"Russian Federation","alpha-2":"RU","country-code":"643"},{name:"Rwanda","alpha-2":"RW","country-code":"646"},{name:"Saint Barth\xe9lemy","alpha-2":"BL","country-code":"652"},{name:"Saint Helena, Ascension and Tristan da Cunha","alpha-2":"SH","country-code":"654"},{name:"Saint Kitts and Nevis","alpha-2":"KN","country-code":"659"},{name:"Saint Lucia","alpha-2":"LC","country-code":"662"},{name:"Saint Martin (French part)","alpha-2":"MF","country-code":"663"},{name:"Saint Pierre and Miquelon","alpha-2":"PM","country-code":"666"},{name:"Saint Vincent and the Grenadines","alpha-2":"VC","country-code":"670"},{name:"Samoa","alpha-2":"WS","country-code":"882"},{name:"San Marino","alpha-2":"SM","country-code":"674"},{name:"Sao Tome and Principe","alpha-2":"ST","country-code":"678"},{name:"Saudi Arabia","alpha-2":"SA","country-code":"682"},{name:"Senegal","alpha-2":"SN","country-code":"686"},{name:"Serbia","alpha-2":"RS","country-code":"688"},{name:"Seychelles","alpha-2":"SC","country-code":"690"},{name:"Sierra Leone","alpha-2":"SL","country-code":"694"},{name:"Singapore","alpha-2":"SG","country-code":"702"},{name:"Sint Maarten (Dutch part)","alpha-2":"SX","country-code":"534"},{name:"Slovakia","alpha-2":"SK","country-code":"703"},{name:"Slovenia","alpha-2":"SI","country-code":"705"},{name:"Solomon Islands","alpha-2":"SB","country-code":"090"},{name:"Somalia","alpha-2":"SO","country-code":"706"},{name:"South Africa","alpha-2":"ZA","country-code":"710"},{name:"South Georgia and the South Sandwich Islands","alpha-2":"GS","country-code":"239"},{name:"South Sudan","alpha-2":"SS","country-code":"728"},{name:"Spain","alpha-2":"ES","country-code":"724"},{name:"Sri Lanka","alpha-2":"LK","country-code":"144"},{name:"Sudan","alpha-2":"SD","country-code":"729"},{name:"Suriname","alpha-2":"SR","country-code":"740"},{name:"Svalbard and Jan Mayen","alpha-2":"SJ","country-code":"744"},{name:"Sweden","alpha-2":"SE","country-code":"752"},{name:"Switzerland","alpha-2":"CH","country-code":"756"},{name:"Syrian Arab Republic","alpha-2":"SY","country-code":"760"},{name:"Taiwan, Province of China","alpha-2":"TW","country-code":"158"},{name:"Tajikistan","alpha-2":"TJ","country-code":"762"},{name:"Tanzania, United Republic of","alpha-2":"TZ","country-code":"834"},{name:"Thailand","alpha-2":"TH","country-code":"764"},{name:"Timor-Leste","alpha-2":"TL","country-code":"626"},{name:"Togo","alpha-2":"TG","country-code":"768"},{name:"Tokelau","alpha-2":"TK","country-code":"772"},{name:"Tonga","alpha-2":"TO","country-code":"776"},{name:"Trinidad and Tobago","alpha-2":"TT","country-code":"780"},{name:"Tunisia","alpha-2":"TN","country-code":"788"},{name:"Turkey","alpha-2":"TR","country-code":"792"},{name:"Turkmenistan","alpha-2":"TM","country-code":"795"},{name:"Turks and Caicos Islands","alpha-2":"TC","country-code":"796"},{name:"Tuvalu","alpha-2":"TV","country-code":"798"},{name:"Uganda","alpha-2":"UG","country-code":"800"},{name:"Ukraine","alpha-2":"UA","country-code":"804"},{name:"United Arab Emirates","alpha-2":"AE","country-code":"784"},{name:"United Kingdom of Great Britain and Northern Ireland","alpha-2":"GB","country-code":"826"},{name:"United States of America","alpha-2":"US","country-code":"840"},{name:"United States Minor Outlying Islands","alpha-2":"UM","country-code":"581"},{name:"Uruguay","alpha-2":"UY","country-code":"858"},{name:"Uzbekistan","alpha-2":"UZ","country-code":"860"},{name:"Vanuatu","alpha-2":"VU","country-code":"548"},{name:"Venezuela (Bolivarian Republic of)","alpha-2":"VE","country-code":"862"},{name:"Viet Nam","alpha-2":"VN","country-code":"704"},{name:"Virgin Islands (British)","alpha-2":"VG","country-code":"092"},{name:"Virgin Islands (U.S.)","alpha-2":"VI","country-code":"850"},{name:"Wallis and Futuna","alpha-2":"WF","country-code":"876"},{name:"Western Sahara","alpha-2":"EH","country-code":"732"},{name:"Yemen","alpha-2":"YE","country-code":"887"},{name:"Zambia","alpha-2":"ZM","country-code":"894"},{name:"Zimbabwe","alpha-2":"ZW","country-code":"716"}],format:{type:"json",parse:{"country-code":"number"}}},{name:"suppliers_per_country",source:"suppliers",transform:[{type:"aggregate",groupby:["country"],fields:["name"],ops:["count"],as:["companies"]},{type:"lookup",from:"wikirate_countries",key:"name",fields:["country"],values:["code"],as:["country_code"]},{type:"lookup",from:"country_codes",key:"alpha-2",fields:["country_code"],values:["country-code"],as:["country_number"]},{type:"lookup",from:"world",key:"id",fields:["country_number"],as:["geo"]},{type:"filter",expr:"datum.geo"},{type:"formula",as:"centroid",expr:"geoCentroid('projection', datum.geo)"}]},{name:"graticule",transform:[{type:"graticule"}]}],projections:[{name:"projection",type:{signal:"type"},scale:{signal:"scale"},rotate:[{signal:"rotate0"},{signal:"rotate1"},{signal:"rotate2"}],center:[{signal:"center0"},{signal:"center1"}],translate:[{signal:"translate0"},{signal:"translate1"}]}],scales:[{name:"size",domain:{data:"suppliers_per_country",field:"companies"},zero:!1,range:[50,2e3]},{name:"color",type:"linear",nice:!0,domain:{data:"suppliers_per_country",field:"companies"},range:["#fef1eb","#F7733D"]}],marks:[{type:"shape",from:{data:"graticule"},encode:{update:{strokeWidth:{value:1},stroke:{signal:"'#ddd'"},fill:{value:null}}},transform:[{type:"geoshape",projection:"projection"}]},{type:"shape",from:{data:"world"},encode:{update:{strokeWidth:{signal:"+borderWidth"},fill:{value:"#171832"},zindex:{value:0}}},transform:[{type:"geoshape",projection:"projection"}]},{name:"circles",type:"symbol",from:{data:"suppliers_per_country"},encode:{enter:{x:{field:"centroid[0]"},y:{field:"centroid[1]"},size:{scale:"size",field:"companies"},strokeWidth:{value:.7},tooltip:{signal:"{'title': datum.country, 'Number of Companies': datum.companies}"}},update:{fill:{scale:"color",field:"companies"},stroke:{value:"#171832"}},hover:{fill:{value:"#912E06"},stroke:{value:"#171832"}}},transform:[{type:"force",static:!0,forces:[{force:"collide",radius:{expr:"1 + sqrt(datum.size) / 2"}},{force:"x",x:"datum.centroid[0]"},{force:"y",y:"datum.centroid[1]"}]}]}],legends:[{fill:"color",orient:"bottom-left",title:"No. of Suppliers"}]},{renderer:"svg",actions:{source:!1,editor:!1}}))},i=>{})}onSelectYear(){this.updateChart()}onSelectCompany(){this.company=this.apparelService.getCompany(this.selectedCompany),this.title=0!=this.company.id?this.company.name:"The top 100 apparel companies'",this.updateChart()}}return e.\u0275fac=function(n){return new(n||e)(U(tb),U(mg),U(To))},e.\u0275cmp=An({type:e,selectors:[["app-suppliers-map"]],viewQuery:function(n,i){if(1&n&&wf(Znt,5),2&n){let r;Qt(r=Jt())&&(i.mapElement=r.first)}},decls:31,vars:14,consts:[[1,"wikirate-creme-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[3,"ngStyle"],[4,"ngIf"],[1,"filters","col-md-4"],[1,"row","col","justify-content-md-end"],[1,"company-filter","mt-1","mr-1"],["id","inputCompany",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"year-filter","mt-1"],["id","inputYear",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"row","mb-2","no-gutters","mt-2","col-12"],["map",""],[1,"col-md"],["id","no_data","class","mt-4 text-center",4,"ngIf"],["id","no_data",1,"mt-4","text-center"],["src","assets/moon.svg","width","60px",1,"mb-1"],[1,"mt-2","showcase-main-text"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),K(5," Suppliers per country "),H(),j(6,"h3",5)(7,"span",6),K(8),H(),K(9," suppliers' locations "),Ye(10,eit,2,1,"i",7),Ye(11,tit,2,1,"span",7),H()(),j(12,"div",8)(13,"div",9)(14,"div",10)(15,"select",11),st("ngModelChange",function(o){return i.selectedCompany=o})("change",function(){return i.onSelectCompany()}),Ye(16,nit,2,2,"option",12),H()(),j(17,"div",13)(18,"select",14),st("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateChart()}),j(19,"option",15),K(20,"latest"),H(),j(21,"option",16),K(22,"2020"),H(),j(23,"option",16),K(24,"2019"),H(),j(25,"option",16),K(26,"2018"),H()()()()(),j(27,"div",17,18)(29,"div",19),Ye(30,iit,4,0,"div",20),H()()()()()),2&n&&(oe(7),_e("ngStyle",function D0(e,t,n,i){return Yj(re(),vr(),e,t,n,i)}(12,rit,0!=i.selectedCompany?"italic":"normal")),oe(1),pc(i.title),oe(2),_e("ngIf","latest"!==i.selectedYear),oe(1),_e("ngIf","latest"===i.selectedYear),oe(4),_e("ngModel",i.selectedCompany),oe(1),_e("ngForOf",i.apparelTop100),oe(2),_e("ngModel",i.selectedYear),oe(1),_e("ngValue","latest"),oe(2),_e("ngValue",2020),oe(2),_e("ngValue",2019),oe(2),_e("ngValue",2018),oe(5),_e("ngIf",i.suppliers&&0==i.suppliers.length))},dependencies:[vg,bg,Ac,_g,Tf,yc,du,EH]}),e})(),sit=(()=>{class e{transform(n,i){return"string"==typeof n?n:Number.isNaN(n)?null:n<1e3?n:(r=Math.floor(Math.log(n)/Math.log(1e3)),(n/Math.pow(1e3,r)).toFixed(i)+["k","M","B","T","P","E"][r-1]);var r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=qi({name:"bigNumSuff",type:e,pure:!0}),e})(),ait=(()=>{class e{constructor(n){this.http=n,this.total_market_cap="unknown",this.total_employees="Unknown",this.number_of_suppliers="Unknown",this.workers_in_supply_chain="Unknown",this.selectedYear="latest"}ngOnInit(){this.updateSection()}ngAfterViewInit(){}updateSection(){this.http.get("https://wikirate.org/Core+Market_Cap+Answer.json?filter[not_ids]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list").subscribe(s=>{this.total_market_cap=this.getSum(s),w_("div#vis",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Market Cap of Apparel Top 100 Companies",width:900,height:560,autosize:"none",signals:[{name:"type",value:"equalEarth"},{name:"rotate0",value:-15},{name:"rotate1",value:0},{name:"rotate2",value:0},{name:"center0",value:0},{name:"center1",value:0},{name:"translate0",update:"width / 2"},{name:"translate1",update:"height / 2"},{name:"borderWidth",value:1},{name:"hover",value:null,on:[{events:"@circles:mouseover",update:"datum"},{events:"@circles:mouseout",update:"null"}]},{name:"title",value:"Market Cap of Apparel Top 100 Companies",update:"hover ? hover.name + ' (' + hover.market_cap_text + ')' : 'Market Cap of Apparel Top 100 Companies'"},{name:"cell_stroke",value:null,on:[{events:"dblclick",update:"cell_stroke ? null : 'brown'"},{events:"mousedown!",update:"cell_stroke"}]},{name:"tx",update:"width / 2"},{name:"ty",update:"height / 2"}],data:[{name:"world",url:"assets/world-110m.json",format:{type:"topojson",feature:"countries"},transform:[{type:"geopath",projection:"projection"}]},{name:"market_cap",values:s,format:{type:"json",parse:{value:"number"}}},{name:"apparel_top_100_geo",values:[{company:"Puma",lat:49.5755269,lng:10.8714149},{company:"H&M",lat:59.3317973,lng:18.0583112},{company:"Gap inc.",lat:37.79081085,lng:-122.3909804},{company:"Marks and Spencer Group plc",lat:51.51865225,lng:-.175000995},{company:"Asos",lat:51.5333888,lng:-.139905636},{company:"Nike Inc.",lat:45.507191,lng:-122.827393},{company:"Adidas AG",lat:49.58253265,lng:10.91048856},{company:"Louis Vuitton Malletier SA (LVMH)",lat:48.8586162,lng:2.3429393},{company:"Burberry Group plc",lat:51.49437555,lng:-.126392473},{company:"Guess? Inc",lat:34.02410214,lng:-118.2391726},{company:"Zalando SE",lat:52.50655705,lng:13.44148723},{company:"Nordstrom",lat:47.614361,lng:-122.335852},{company:"Fossil Group, Inc.",lat:32.939486,lng:-96.745425},{company:"Inditex",lat:43.32307,lng:-8.49019},{company:"American Eagle Outfitters",lat:40.4282854,lng:-79.9606724},{company:"Hugo Boss AG",lat:48.54694115,lng:9.271591308},{company:"Urban Outfitters",lat:39.9046154,lng:-75.1739344},{company:"Skechers USA Inc",lat:33.88490024,lng:-118.4100629},{company:"Ralph Lauren Corporation",lat:40.7638797,lng:-73.97161599},{company:"Prada",lat:43.5463209,lng:11.5707173},{company:"Under Armour",lat:39.27516635,lng:-76.5903856},{company:"Tapestry Inc",lat:40.75274965,lng:-74.00152052},{company:"Columbia Sportswear",lat:45.52966955,lng:-122.8248874},{company:"Foot Locker Inc.",lat:40.7526738,lng:-73.9950505},{company:"Abercrombie & Fitch",lat:40.0904919,lng:-82.7755106},{company:"Macy's",lat:40.7509149,lng:-73.98933149},{company:"DSW Inc.",lat:39.98864,lng:-82.89824},{company:"Esprit Holdings Limited",lat:22.2924077,lng:114.20294},{company:"Moncler",lat:45.4540887,lng:9.1588378},{company:"Asics Corporation",lat:34.6913,lng:135.183},{company:"Ross Stores",lat:37.7079277,lng:-121.8881302},{company:"Chico's FAS Inc",lat:28.75054,lng:-82.5001},{company:"Gildan Activewear Inc.",lat:45.504205,lng:-73.571125},{company:"Boohoo.com",lat:53.480813,lng:-2.2326412},{company:"Anta Sports Products",lat:24.66745455,lng:118.5540534},{company:"Gerry Weber",lat:52.0603355,lng:8.3615619},{company:"Brunello Cucinelli",lat:43.0830538,lng:12.277156},{company:"Next",lat:52.6071351,lng:-1.2418189},{company:"Salvatore Ferragamo SpA",lat:43.7722809,lng:11.2513491},{company:"Express Inc",lat:40.001342,lng:-83.094886},{company:"Tiffany & Co.",lat:42.7158328,lng:-73.7079487},{company:"Hermes International",lat:48.8688993,lng:2.3217376},{company:"Hudson's Bay Company",lat:43.7823924,lng:-79.7718789},{company:"United Arrows",lat:35.706766,lng:139.7616265},{company:"Canada Goose",lat:43.6954839,lng:-79.46397981},{company:"Bosideng International Holdings Limited",lat:31.2322758,lng:121.4692071},{company:"Metersbonwe",lat:31.2322758,lng:121.4692071},{company:"Dick's Sporting Goods",lat:40.465624,lng:-80.205892},{company:"Capri Holdings Ltd (formerly Michael Kors)",lat:51.51414,lng:-.11828},{company:"Buckle Inc",lat:40.699424,lng:-99.105033},{company:"TOD'S",lat:43.2627,lng:13.7203},{company:"Dillard's, Inc.",lat:34.753373,lng:-92.287569},{company:"Li-Ning",lat:39.812904,lng:116.547259},{company:"Children's Place Inc",lat:40.78885,lng:-74.056035},{company:"Steve Madden",lat:40.75017166,lng:-73.91508484},{company:"lululemon athletica",lat:49.272004,lng:-123.147121},{company:"PVH",lat:40.74969101,lng:-73.98155975},{company:"Ted Baker",lat:51.537667,lng:-.132265},{company:"Fast Retailing",lat:34.0372,lng:131.3577},{company:"JD Sports Fashion plc",lat:53.573908,lng:-2.278928},{company:"Burlington Stores Inc",lat:40.094145,lng:-74.812232},{company:"Sports Direct",lat:53.2063042,lng:-1.2205319},{company:"Superdry plc",lat:51.9202605,lng:-2.0968209},{company:"VF",lat:39.751618,lng:-105.002998},{company:"Christian Dior",lat:48.8697044,lng:2.325038},{company:"Semir",lat:27.9963899,lng:120.695345},{company:"L Brands",lat:39.981797,lng:-83.033627},{company:"Deckers Outdoor Corporation",lat:34.4314978,lng:-119.8635551},{company:"Hanesbrands",lat:36.18900595,lng:-80.2640623},{company:"Carter's Inc",lat:33.848681,lng:-84.366387},{company:"TJX",lat:42.308755,lng:-71.382745},{company:"Oxford Industries Inc",lat:33.7811172,lng:-84.3837092},{company:"Cato Corp",lat:35.128699,lng:-80.87873},{company:"JC Penney",lat:33.0136764,lng:-96.6925096},{company:"G-III Apparel Group, LTD.",lat:40.6256945,lng:-73.9870861},{company:"Lojas Renner S.A.",lat:-30.0324999,lng:-51.2303767},{company:"Kering",lat:48.8464177,lng:2.3153025},{company:"Caleres Inc",lat:38.6526865,lng:-90.3477704},{company:"Genesco Inc.",lat:36.114742,lng:-86.693776},{company:"Ascena Retail Group Inc",lat:41.07202702,lng:-74.17060403},{company:"Wolverine World Wide",lat:43.13425389,lng:-85.54185089},{company:"Mulberry Group Plc",lat:51.50370825,lng:-.191581413},{company:"Luxottica Group SpA",lat:45.4673878,lng:9.1775777},{company:"Arvind Limited",lat:23.0583877,lng:72.6371753},{company:"Aditya Birla Fashion & Retail Ltd",lat:19.0652797,lng:72.8793805},{company:"Vipshop Holdings",lat:23.1025812,lng:113.2245207},{company:"Geox SpA",lat:45.7883555,lng:12.0476363},{company:"Alpargatas - Havaianas",lat:-23.5506507,lng:-46.6333824},{company:"Onward Holdings",lat:35.666255,lng:139.775565},{company:"Lao Feng Xiang Jewelry",lat:31.2322758,lng:121.4692071},{company:"Richemont",lat:46.2587,lng:6.1351},{company:"Cia Hering",lat:-7.33561,lng:-47.46218},{company:"Vera Bradley Inc.",lat:40.9570408,lng:-85.3015323},{company:"Boot Barn Holdings Inc.",lat:33.6596704,lng:-117.7380569},{company:"Swatch Group",lat:47.1354263,lng:7.234641},{company:"Francesca's",lat:29.83278726,lng:-95.51077112},{company:"Chow Tai Fook",lat:22.28365,lng:114.15494},{company:"Van de Velde",lat:51.01324,lng:3.9258203},{company:"YOOX NET-A-PORTER Group SpA",lat:45.4450409,lng:9.1514221},{company:"Grendene",lat:-3.68611,lng:-40.34972}]},{name:"apparel_top_100_companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"},transform:[{type:"lookup",from:"market_cap",key:"company",fields:["id"],values:["value"],as:["market_cap"],default:0},{type:"lookup",from:"apparel_top_100_geo",key:"company",fields:["name"],values:["lat","lng"],as:["lat","lng"],default:0},{type:"geopoint",projection:"projection",fields:["lng","lat"]},{type:"formula",as:"market_cap_text",expr:"replace(format(datum.market_cap,'$,.4s'), 'G', 'B')"}]},{name:"graticule",transform:[{type:"graticule",step:[15,15]}]}],projections:[{name:"projection",type:"mercator"}],scales:[{name:"size",domain:{data:"apparel_top_100_companies",field:"market_cap"},zero:!1,range:[30,500]},{name:"color",type:"linear",nice:!0,domain:{data:"apparel_top_100_companies",field:"market_cap"},range:["#fef1eb","#F7733D"]}],marks:[{type:"shape",from:{data:"graticule"},encode:{update:{strokeWidth:{value:1},fill:{value:null}}},transform:[{type:"geoshape",projection:"projection"}]},{type:"shape",from:{data:"world"},encode:{update:{fill:{value:"#1D1E3F"},stroke:{value:"rgba(247,247,248, 0.8)"},strokeWidth:{signal:"+borderWidth"},zindex:{value:0}}},transform:[{type:"geoshape",projection:"projection"}]},{name:"circles",type:"symbol",from:{data:"apparel_top_100_companies"},encode:{enter:{x:{field:"x"},y:{field:"y"},size:{scale:"size",field:"market_cap"},fillOpacity:{value:1},stroke:{value:"white"},strokeWidth:{value:.5},tooltip:{signal:"{'title': datum.name,'Headquarters': datum.headquarters, 'Market Cap': datum.market_cap_text}"}},update:{fill:{scale:"color",field:"market_cap"},stroke:{value:"#171832"}},hover:{fill:{value:"#912E06"},stroke:{value:"#171832"}}},transform:[{type:"force",static:!0,forces:[{force:"collide",radius:{expr:"1 + sqrt(datum.size) / 2"}},{force:"x",x:"datum.x"},{force:"y",y:"datum.y"}]}]},{type:"text",interactive:!1,encode:{enter:{x:{value:895},y:{value:550},fill:{value:"#F7F7F8"},fontSize:{value:12},align:{value:"right"}},update:{text:{signal:"title"}}}}],legends:[{fill:"color",orient:"bottom-left",title:"Market Cap (in USD$)",labelColor:"#F7F7F8",titleColor:"#F7F7F8"}]},{renderer:"svg",actions:{source:!1,editor:!1}}).catch(console.warn)}),this.http.get("https://wikirate.org/Commons+Employee+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list").subscribe(s=>{this.total_employees=this.getSum(s)}),this.http.get("https://wikirate.org/Commons+Supplied_By+Answers.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Apparel%20100%20Companies&filter[year]="+this.selectedYear+"&limit=100&view=answer_list").subscribe(s=>{this.number_of_suppliers=this.getSum(s)}),this.http.get("https://wikirate.org/Clean_Clothes_Campaign+Number_of_Workers+Answers.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Supplier of Apparel 100&view=answer_list").subscribe(s=>{this.workers_in_supply_chain=this.getSum(s)})}getSum(n){let i=0;for(var r=0;r<n.length;r++)"Unknown"!==n[r].value&&!Number.isNaN(Number(n[r].value))&&(i+=Number(n[r].value));return 0==i&&(this.workers_in_supply_chain="Unknown"),i}}return e.\u0275fac=function(n){return new(n||e)(U(tb))},e.\u0275cmp=An({type:e,selectors:[["app-market-cap-map"]],decls:63,vars:25,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row","mb-2"],[1,"col-md-8"],[1,"showcase-title-white"],[1,"showcase-subtitle-white"],[1,"filters","col-md-4","mt-1"],[1,"year-filter","col-md-5","ml-auto"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],["value","2018",3,"ngValue"],[1,"row","justify-content-center","mb-2"],["id","vis",1,"mt-2"],[1,"row","align-items-end","mt-4"],[1,"mt-1","col-md","text-center"],[1,"secondary-info","mt-1"],[1,"primary-info"],[1,"explore","mt-1","d-none","d-md-block"],["target","_blank",3,"href"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),K(5," The top 100 apparel companies "),H(),j(6,"h3",5)(7,"p"),K(8,"By headquarter location and market cap"),H()()(),j(9,"div",6)(10,"div",7)(11,"select",8),st("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateSection()}),j(12,"option",9),K(13,"latest"),H(),j(14,"option",10),K(15,"2020"),H(),j(16,"option",11),K(17,"2019"),H(),j(18,"option",12),K(19,"2018"),H()()()()(),j(20,"div",13),ze(21,"div",14),H(),j(22,"div",15)(23,"div",16)(24,"div",17),K(25,"Total Market Cap"),H(),j(26,"div",18),K(27),og(28,"bigNumSuff"),H(),j(29,"div",19)(30,"a",20),K(31,"Dive Deeper"),ze(32,"i",21),H()()(),j(33,"div",16)(34,"div",17),K(35,"Employees"),H(),j(36,"div",18),K(37),og(38,"bigNumSuff"),H(),j(39,"div",19)(40,"a",20),K(41,"Dive Deeper"),ze(42,"i",21),H()()(),j(43,"div",16)(44,"div",17),K(45,"Suppliers"),H(),j(46,"div",18),K(47),og(48,"bigNumSuff"),H(),j(49,"div",19)(50,"a",20),K(51,"Dive Deeper"),ze(52,"i",21),H()()(),j(53,"div",16)(54,"div",17),K(55," Employees in Supply Chain "),H(),j(56,"div",18),K(57),og(58,"bigNumSuff"),H(),j(59,"div",19)(60,"a",20),K(61,"Dive Deeper"),ze(62,"i",21),H()()()()()()),2&n&&(oe(11),_e("ngModel",i.selectedYear),oe(1),_e("ngValue","latest"),oe(2),_e("ngValue",2020),oe(2),_e("ngValue",2019),oe(2),_e("ngValue",2018),oe(9),Er("USD$ ",x0(28,13,i.total_market_cap,1),"+"),oe(3),iu("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Market%20Cap&filter%5Byear%5D=",i.selectedYear,"",Xr),oe(7),Er("",x0(38,16,i.total_employees,2),"+"),oe(3),iu("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Employees&filter%5Byear%5D=",i.selectedYear,"",Xr),oe(7),Er("",x0(48,19,i.number_of_suppliers,2),"+"),oe(3),iu("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplied%20by&filter%5Byear%5D=",i.selectedYear,"",Xr),oe(7),Er("",x0(58,22,i.workers_in_supply_chain,2),"+"),oe(3),iu("href","https://wikirate.org/Clean_Clothes_Campaign+Number_of_Workers?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bcompany_group%5D%5B%5D=Supplier%20of%20Apparel%20100&filter%5Byear%5D=",i.selectedYear,"",Xr))},dependencies:[vg,bg,Ac,_g,Tf,sit],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#f7f7f8;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),lit=(()=>{class e{constructor(){}ngOnInit(){this.createChart()}createChart(){w_("div#line-chart",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Apparel Top 100 Companies Reporting their Suppliers.",width:500,height:200,padding:5,signals:[{name:"interpolate",value:"cardinal"}],data:[{name:"supplier_lists",url:"https://wikirate.org/Commons+Supplier_List_all+Answer.json?filter[not_ids]=&filter[company_name]=&filter[value][]=Yes&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list",format:{type:"json",property:"items"},transform:[{type:"aggregate",groupby:["year"],fields:["company"],ops:["count"],as:["number_of_lists"]},{type:"filter",expr:"datum.year > 2016 && datum.year < 2021"}]}],scales:[{name:"x",type:"linear",range:"width",nice:!0,zero:!1,round:!0,domain:[2016,2021]},{name:"y",type:"linear",domain:[0,100],range:"height",nice:!0,zero:!1,round:!0},{name:"align",type:"ordinal",domain:["left","right","top","bottom"],range:["right","left","center","center"]},{name:"base",type:"ordinal",domain:["left","right","top","bottom"],range:["middle","middle","bottom","top"]},{name:"dx",type:"ordinal",domain:["left","right","top","bottom"],range:[-7,6,0,0]},{name:"dy",type:"ordinal",domain:["left","right","top","bottom"],range:[1,1,-5,8]}],axes:[{orient:"bottom",scale:"x",tickMinStep:1,format:""},{orient:"left",scale:"y",tickMinStep:2}],marks:[{type:"line",from:{data:"supplier_lists"},encode:{enter:{interpolate:{value:"linear"},x:{scale:"x",field:"year"},y:{scale:"y",field:"number_of_lists"},stroke:{value:"#000"},strokeWidth:{value:3}}}},{type:"symbol",from:{data:"supplier_lists"},encode:{enter:{x:{scale:"x",field:"year"},y:{scale:"y",field:"number_of_lists"},fill:{value:"#fff"},stroke:{value:"#000"},strokeWidth:{value:1},size:{value:60},tooltip:{signal:"{'Number of Companies': datum.number_of_lists, 'Year': datum.year}"}},update:{fill:{value:"#fff"},stroke:{value:"#000"}},hover:{fill:{value:"#000"},stroke:{value:"#fff"}}}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=An({type:e,selectors:[["app-supplier-lists-on-wikirate"]],decls:20,vars:0,consts:[[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[1,"col-md"],[1,"wikirate","chart-container","mt-2"],["id","line-chart",1,"m-2"],[1,"col-md-9"],[1,"showcase-main-text","mt-2"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank","href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplier%20List%20(all)"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),K(4," Companies reporting their suppliers "),H(),j(5,"h3",4),K(6," Number of the top 100 apparel companies publishing their list of suppliers "),H()()(),j(7,"div",1)(8,"div",5)(9,"div",6),ze(10,"div",7),H()()(),j(11,"div",1)(12,"div",8)(13,"div",9),K(14," The number of the top 100 apparel companies reporting their suppliers more than doubled from 10 to 23 between 2017 and 2020. "),H()(),j(15,"div",10)(16,"div",11)(17,"a",12),K(18,"Dive Deeper"),ze(19,"i",13),H()()()()())},styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),uit=(()=>{class e{transform(n,i){return"string"==typeof n?n:Number.isNaN(n)?null:n<1e3?n:n.toString().slice(0,n.toString().length-3)+","+n.toString().slice(-3)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=qi({name:"numFormat",type:e,pure:!0}),e})();function cit(e,t){if(1&e&&(j(0,"span")(1,"i"),K(2),H()()),2&e){const n=Dt();oe(2),pc("For "+n.selectedYear)}}function dit(e,t){1&e&&(j(0,"i"),K(1,"For the most recent years"),H())}let fit=(()=>{class e{constructor(n,i){this.http=n,this.route=i,this.number_of_reporting_companies="Unknown",this.unique_suppliers="Unknown",this.selectedYear="latest"}ngOnInit(){this.updateSection(),this.updateChart()}ngAfterViewInit(){}updateChart(){w_("div#bar-chart",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Number of Published Supplier Lists",width:750,height:510,padding:5,autosize:"fit",data:[{name:"companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"}},{name:"published_supplier_lists",url:"https://wikirate.org/Commons+Supplier_List_all+Answers.json?filter[not_ids]=&filter[company_name]=&filter[value][]=Yes&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0",transform:[{type:"lookup",from:"companies",key:"id",fields:["company"],values:["name","headquarters"],as:["company_name","headquarters"],default:0},{type:"aggregate",groupby:["company_name","headquarters"]}]}],marks:[{type:"rect",from:{data:"published_supplier_lists"},encode:{update:{y:{scale:"y",value:0},y2:{scale:"y",field:"count"},x:{scale:"x",field:"company_name"},width:{scale:"x",band:1},tooltip:{signal:"{'Company':datum.company_name, 'Headquarters':datum.headquarters , 'No. of Supplier Lists':datum.count}"},fill:{scale:"color",field:"count"},cornerRadiusTopRight:{value:5},cornerRadiusTopLeft:{value:5}},hover:{fill:{value:"#912E06"}}}}],scales:[{name:"y",type:"linear",domain:{data:"published_supplier_lists",field:"count"},range:"height",nice:!0},{name:"x",type:"band",domain:{data:"published_supplier_lists",field:"company_name",sort:{op:"max",field:"count",order:"descending"}},range:"width",padding:.1},{name:"color",type:"linear",nice:!0,domain:{data:"published_supplier_lists",field:"count"},range:["#fef1eb","#F7733D"]}],axes:[{scale:"y",orient:"left",format:",d",tickCount:5,labelFontSize:14,tickColor:"#F7F7F8",labelColor:"#F7F7F8",domainColor:"#F7F7F8"},{scale:"x",orient:"bottom",labelAngle:55,labelAlign:"left",labelLimit:100,labelFontSize:14,tickColor:"#F7F7F8",labelColor:"#F7F7F8",domainColor:"#F7F7F8"}]},{renderer:"svg",actions:{source:!1,editor:!1}})}updateSection(){this.http.get("https://wikirate.org/Commons+Supplied_By+Answer.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0&filter[year]="+this.selectedYear).subscribe(r=>{this.number_of_reporting_companies=0;for(var o=0;o<r.length;o++)"Unknown"!==r[o].value&&this.number_of_reporting_companies++}),this.http.get("https://wikirate.org/Commons+Supplier_of+Answer.json?filter[company_group][]=Supplier%20of%20Apparel%20100&filter[year]="+this.selectedYear+"&view=answer_list&limit=0").subscribe(r=>{this.unique_suppliers=r.length})}}return e.\u0275fac=function(n){return new(n||e)(U(tb),U(ia))},e.\u0275cmp=An({type:e,selectors:[["app-number-of-suppliers-per-company"]],decls:43,vars:12,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title","text-white"],[1,"showcase-subtitle-white"],[1,"col-md-4","mt-2","mb-2"],[1,"year-filter","col-md-5","ml-md-auto"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],["value","2018",3,"ngValue"],[1,"row","mt-2"],[1,"col-md"],[1,"wikirate-box","chart-container"],["id","bar-chart",1,"m-2"],[1,"showcase-main-text-white","col-md-9"],[4,"ngIf"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank","href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplied%20By&filter%5Byear%5D=latest"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),K(5," Published supplier lists "),H(),j(6,"h3",5),K(7,"Number of published supplier lists per company since 2017"),H()(),j(8,"div",6)(9,"div",7)(10,"select",8),st("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateSection()}),j(11,"option",9),K(12,"latest"),H(),j(13,"option",10),K(14,"2020"),H(),j(15,"option",11),K(16,"2019"),H(),j(17,"option",12),K(18,"2018"),H()()()()(),j(19,"div",13)(20,"div",14)(21,"div",15),ze(22,"div",16),H()()(),j(23,"div",13)(24,"div",17),Ye(25,cit,3,1,"span",18),Ye(26,dit,2,0,"i",18),K(27," WikiRate's researchers retrieved the supplier lists of "),j(28,"i"),K(29),H(),K(30," out of the top 100 companies. In total, these "),j(31,"i"),K(32),H(),K(33," were supplied by "),j(34,"i"),K(35),og(36,"numFormat"),H(),K(37,". "),H(),j(38,"div",19)(39,"div",20)(40,"a",21),K(41,"Dive Deeper"),ze(42,"i",22),H()()()()()()),2&n&&(oe(10),_e("ngModel",i.selectedYear),oe(1),_e("ngValue","latest"),oe(2),_e("ngValue",2020),oe(2),_e("ngValue",2019),oe(2),_e("ngValue",2018),oe(8),_e("ngIf","latest"!==i.selectedYear),oe(1),_e("ngIf","latest"===i.selectedYear),oe(3),Er("",i.number_of_reporting_companies," companies"),oe(3),Er("",i.number_of_reporting_companies," companies"),oe(3),Er("",function Zj(e,t,n){const i=e+22,r=re(),o=Sp(r,i);return T0(r,i)?Yj(r,vr(),t,o.transform,n,o):o.transform(n)}(36,10,i.unique_suppliers)," different suppliers"))},dependencies:[vg,bg,Ac,_g,Tf,du,uit],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#f7f7f8;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),hit=(()=>{class e{constructor(n){this.router=n}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(U(Qn))},e.\u0275cmp=An({type:e,selectors:[["more-data"]],decls:12,vars:0,consts:[[1,"wikirate-box"],[1,"wikirate-container","align-content-center"],[1,"row","justify-content-center"],[1,"showcase-title","call-to-action-title","text-center","mb-2","col-8"],[1,"mini-text","col-8"],[1,"row","justify-content-center","mt-4"],[1,"explore","mt-1"],["target","_blank","href","https://docs.google.com/forms/d/e/1FAIpQLSf4vZZ25-LQ1_xxriPxFH-Iwm6Mgok6exzAe1B3Hus1Yj8ifg/viewform"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),K(4,"We need more open data"),H(),j(5,"div",4),K(6," The top 100 apparel companies in the world disclose only half of key environmental, social and governance indicators assessed here. To create systemic change and achieve the environmental and societal goals of the 21st century, we need more comparable, open data! "),H()(),j(7,"div",5)(8,"div",6)(9,"a",7),K(10,"Learn More"),ze(11,"i",8),H()()()()())},styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{cursor:pointer;color:inherit;text-decoration:inherit}"]}),e})();const pit=["radarChartContainer"];function git(e,t){if(1&e&&(j(0,"option",15),K(1),H()),2&e){const n=t.$implicit;_e("ngValue",n.id),oe(1),pc(n.name)}}function mit(e,t){1&e&&(j(0,"div",21),ze(1,"img",22),j(2,"p",23),K(3,"You explored unresearched areas, no data available."),H()())}let _it=(()=>{class e{constructor(n,i,r,o){this.http=n,this.route=i,this.apparelService=r,this.renderer=o,this.environmental_disclosure_rate=0,this.social_disclosure_rate=0,this.governance_disclosure_rate=0,this.nodata=!0,this.selectedYear="latest",this.selectedCompany=0,this.apparelTop100=[],this.apparelTop100=r.getCompanies()}ngOnInit(){this.updateSection()}updateSection(){null!=this.radarChart&&this.renderer.removeChild(this.radarChartContainer.nativeElement,this.radarChart),this.nodata=!0,0!=this.selectedCompany?this.http.get("https://wikirate.org/Apparel_Research_Group+Environmental_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(n=>{n.length>0&&(this.environmental_disclosure_rate=n[0].value,this.http.get("https://wikirate.org/Apparel_Research_Group+Social_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(i=>{i.length>0&&(this.social_disclosure_rate=i[0].value,this.http.get("https://wikirate.org/Apparel_Research_Group+Governance_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(r=>{r.length>0&&(this.governance_disclosure_rate=r[0].value,this.nodata=!1,this.radarChart=this.renderer.createElement("div"),this.radarChart.id="esg-performance",this.radarChart.class="radar-chart-container m-2",this.renderer.appendChild(this.radarChartContainer.nativeElement,this.radarChart),this.updateRadarChart("of "+this.apparelService.getCompany(+this.selectedCompany).name))}))}))}):this.http.get("https://wikirate.org/Apparel_Research_Group+Environmental_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(n=>{this.environmental_disclosure_rate=0;for(var i=0;i<n.length;i++)this.environmental_disclosure_rate+=+n[i].value;this.environmental_disclosure_rate=this.environmental_disclosure_rate/n.length,this.http.get("https://wikirate.org/Apparel_Research_Group+Social_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&"+this.selectedYear+"&limit=0&view=answer_list").subscribe(r=>{this.social_disclosure_rate=0;for(var o=0;o<r.length;o++)this.social_disclosure_rate+=+r[o].value;this.social_disclosure_rate=this.social_disclosure_rate/r.length,this.http.get("https://wikirate.org/Apparel_Research_Group+Governance_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(s=>{this.governance_disclosure_rate=0;for(var a=0;a<s.length;a++)this.governance_disclosure_rate+=+s[a].value;this.governance_disclosure_rate=this.governance_disclosure_rate/s.length,this.nodata=!1,this.radarChart=this.renderer.createElement("div"),this.radarChart.id="esg-performance",this.radarChart.class="m-2",this.renderer.appendChild(this.radarChartContainer.nativeElement,this.radarChart),this.updateRadarChart("of Apparel Top 100 (avg Rating)")})})})}updateRadarChart(n){w_("div#esg-performance",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"A radar chart example, showing multiple dimensions in a radial layout.",width:510,height:460,padding:40,autosize:{type:"none",contains:"padding"},title:{text:"ESG Disclosure Rate ("+this.selectedYear+")",anchor:"middle",dy:-8,dx:{signal:"-width/4"},subtitle:n,color:"#F7F7F8",subtitleColor:"#F7F7F8"},signals:[{name:"radius",update:"width / 2.2"}],data:[{name:"table",values:[{key:["Environmental","Disclosure","Rate"],value:(Math.round(100*this.environmental_disclosure_rate)/100).toFixed(2),category:0},{key:["Social","Disclosure","Rate"],value:(Math.round(100*this.social_disclosure_rate)/100).toFixed(2),category:0},{key:["Governance","Disclosure","Rate"],value:(Math.round(100*this.governance_disclosure_rate)/100).toFixed(2),category:0}]},{name:"keys",source:"table",transform:[{type:"aggregate",groupby:["key"]}]}],scales:[{name:"angular",type:"point",range:[-3.14159,3.14159],padding:.5,domain:{data:"table",field:"key"}},{name:"radial",type:"linear",range:{signal:"[0, radius]"},zero:!0,nice:!1,domain:[0,10],domainMin:0},{name:"color",type:"ordinal",domain:{data:"table",field:"category"},range:["#F7733D","#F7733D"]}],encode:{enter:{x:{signal:"radius"},y:{signal:"radius"}}},marks:[{type:"group",name:"categories",zindex:1,from:{facet:{data:"table",name:"facet",groupby:["category"]}},marks:[{type:"line",name:"category-line",from:{data:"facet"},encode:{enter:{interpolate:{value:"linear-closed"},x:{signal:"scale('radial', datum.value) * cos(scale('angular', datum.key))"},y:{signal:"scale('radial', datum.value) * sin(scale('angular', datum.key))"},stroke:{scale:"color",field:"category"},strokeWidth:{value:1},fill:{scale:"color",field:"category"},fillOpacity:{value:.2}}}},{type:"text",name:"value-text",from:{data:"category-line"},encode:{enter:{x:{signal:"datum.x + 14 * cos(scale('angular', datum.datum.key))"},y:{signal:"datum.y + 14 * sin(scale('angular', datum.datum.key))"},text:{signal:"datum.datum.value"},align:{value:"center"},baseline:{value:"middle"},fontWeight:{value:"bold"},fill:{value:"#F7F7F8"}}}}]},{type:"rule",name:"radial-grid",from:{data:"keys"},zindex:0,encode:{enter:{x:{value:0},y:{value:0},x2:{signal:"radius * cos(scale('angular', datum.key))"},y2:{signal:"radius * sin(scale('angular', datum.key))"},stroke:{value:"lightgray"},strokeWidth:{value:1}}}},{type:"text",name:"key-label",from:{data:"keys"},zindex:1,encode:{enter:{x:{signal:"(radius + 11) * cos(scale('angular', datum.key))"},y:{signal:"(radius - 5) * sin(scale('angular', datum.key))"},text:{field:"key"},align:[{test:"abs(scale('angular', datum.key)) > PI / 2",value:"right"},{value:"left"}],baseline:[{test:"scale('angular', datum.key) > 0",value:"top"},{test:"scale('angular', datum.key) == 0",value:"middle"},{value:"bottom"}],fill:{value:"#F7F7F8"},fontWeight:{value:"bold"}}}},{type:"line",name:"outer-line",from:{data:"radial-grid"},encode:{enter:{interpolate:{value:"linear-closed"},x:{field:"x2"},y:{field:"y2"},stroke:{value:"#F7F7F8"},strokeWidth:{value:1}}}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}}return e.\u0275fac=function(n){return new(n||e)(U(tb),U(ia),U(mg),U(To))},e.\u0275cmp=An({type:e,selectors:[["app-esg-performance"]],viewQuery:function(n,i){if(1&n&&wf(pit,5),2&n){let r;Qt(r=Jt())&&(i.radarChartContainer=r.first)}},decls:30,vars:8,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8","vertical-center"],[1,"content-container"],[1,"showcase-title","text-white"],[1,"showcase-subtitle-white"],[1,"filters","col-md-4"],[1,"row","col","justify-content-md-end"],[1,"company-filter","mt-1","mr-1"],["id","inputCompany",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"year-filter","mt-1"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"row","col-12","mt-2"],[1,"col-md"],[1,"chart-container"],["radarChartContainer",""],["id","no_data","class","text-center mt-5",4,"ngIf"],["id","no_data",1,"text-center","mt-5"],["src","assets/moon-light.svg","width","60px",1,"mb-1"],[1,"mt-3","showcase-main-text","text-white"]],template:function(n,i){1&n&&(j(0,"div",0),ze(1,"hr"),j(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),K(7," Broken-down company ESG disclosure rating "),H(),j(8,"h3",6),K(9," The top 100 apparel companies\u2019 ESG disclosure rates per axis by year "),H()()(),j(10,"div",7)(11,"div",8)(12,"div",9)(13,"select",10),st("ngModelChange",function(o){return i.selectedCompany=o})("change",function(){return i.updateSection()}),Ye(14,git,2,2,"option",11),H()(),j(15,"div",12)(16,"select",13),st("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateSection()}),j(17,"option",14),K(18,"latest"),H(),j(19,"option",15),K(20,"2020"),H(),j(21,"option",15),K(22,"2019"),H(),j(23,"option",15),K(24,"2018"),H()()()()(),j(25,"div",16)(26,"div",17)(27,"div",18,19),Ye(29,mit,4,0,"div",20),H()()()()()()),2&n&&(oe(13),_e("ngModel",i.selectedCompany),oe(1),_e("ngForOf",i.apparelTop100),oe(2),_e("ngModel",i.selectedYear),oe(1),_e("ngValue","latest"),oe(2),_e("ngValue",2020),oe(2),_e("ngValue",2019),oe(2),_e("ngValue",2018),oe(6),_e("ngIf",i.nodata))},dependencies:[vg,bg,Ac,_g,Tf,yc,du],styles:[".radar-chart-container[_ngcontent-%COMP%]{width:470px;height:380px;border-radius:5px}"]}),e})(),yit=(()=>{class e{constructor(){this.selectedYear="latest",this.innerWidth=0}ngOnInit(){this.innerWidth=window.innerWidth,console.log(this.innerWidth),this.updateBarChart()}updateBarChart(){let n=20;this.innerWidth>=1200?n=40:this.innerWidth>=800&&(n=30),w_("div#esg-overall-wikirating",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"ESG Disclosure Rate",width:1080,height:510,padding:5,signals:[{name:"companies",value:n,bind:{input:"range",min:20,max:100,step:1}},{name:"order",value:"descending",bind:{input:"select",options:["ascending","descending"]}}],data:[{name:"apparel_companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"}},{name:"suppplier_info",url:"https://wikirate.org/Apparel_Research_Group+ESG_Disclosure_Rate+Answers.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0",format:{type:"json",parse:{value:"number"}},transform:[{type:"lookup",from:"apparel_companies",key:"id",fields:["company"],values:["name","headquarters"],as:["company_name","headquarters"],default:0},{type:"window",sort:{field:"value",order:{signal:"order"}},ops:["row_number"],as:["rank"]},{type:"filter",expr:"datum.rank <= companies"},{type:"formula",as:"rate",expr:"format(datum.value,',.2f')"}]}],marks:[{type:"rect",from:{data:"suppplier_info"},encode:{update:{y:{scale:"y",value:0},y2:{scale:"y",field:"value"},x:{scale:"x",field:"company_name"},width:{scale:"x",band:1},tooltip:{signal:"{'Company':datum.company_name, 'Headquarters':datum.headquarters , 'ESG Disclosure Rate':datum.rate}"},fill:{scale:"color",field:"value"},cornerRadiusTopRight:{value:3},cornerRadiusTopLeft:{value:3}},hover:{fill:{value:"black"}}}}],scales:[{name:"y",type:"linear",domain:[0,10],range:"height",nice:!0},{name:"x",type:"band",domain:{data:"suppplier_info",field:"company_name",sort:{op:"max",field:"value",order:{signal:"order"}}},range:"width",padding:.1},{name:"color",type:"linear",nice:!0,domain:{data:"suppplier_info",field:"value"},range:["#fef1eb","#F7733D"]}],axes:[{scale:"y",orient:"left",format:",d",tickCount:5,labelFontSize:{signal:"10 + 300 / companies"}},{scale:"x",orient:"bottom",labelAngle:55,labelAlign:"left",labelLimit:130,labelFontSize:{signal:"10 + 300 / companies"}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=An({type:e,selectors:[["app-esg-disclosure-rates"]],decls:29,vars:6,consts:[[1,"wikirate-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[1,"filters","col-md-4","mt-1"],[1,"year-filter","col-md-5","ml-auto"],["id","inputYear",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],[1,"col-12","mt-2"],[1,"bar-chart-container"],["id","esg-overall-wikirating",1,"m-2"],[1,"showcase-main-text","mt-2","col-md-9"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank",3,"href"],[1,"bi","bi-arrow-right","ml-1"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),K(5),H(),j(6,"h3",5),K(7," Based on ESG data shared by companies publicly "),H()(),j(8,"div",6)(9,"div",7)(10,"select",8),st("ngModelChange",function(o){return i.selectedYear=o})("change",function(){return i.updateBarChart()}),j(11,"option",9),K(12,"latest"),H(),j(13,"option",10),K(14,"2020"),H(),j(15,"option",11),K(16,"2019"),H()()()()(),j(17,"div",2)(18,"div",12)(19,"div",13),ze(20,"div",14),H()()(),j(21,"div",2)(22,"div",15),K(23," Nearly a third of the top 100 apparel companies don\u2019t publish a recent report with sustainability information. For example, only half share information about their greenhouse gas (GHG) emissions. "),H(),j(24,"div",16)(25,"div",17)(26,"a",18),K(27,"Dive Deeper"),ze(28,"i",19),H()()()()()()),2&n&&(oe(5),Er(" Company ESG disclosure rating (",i.selectedYear,") "),oe(5),_e("ngModel",i.selectedYear),oe(1),_e("ngValue","latest"),oe(2),_e("ngValue",2020),oe(2),_e("ngValue",2019),oe(11),iu("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=ESG%20Disclosure&filter%5Byear%5D=",i.selectedYear,"",Xr))},dependencies:[vg,bg,Ac,_g,Tf],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),vit=(()=>{class e{constructor(n,i,r,o){this.route=n,this.scroll=i,this.meta=r,this.titleService=o,o.setTitle("Apparel companies' ESG data disclosure ratings & supplier transparency"),r.addTags([{name:"keywords",content:"wikirate, esg data,apparel supply chain,apparel company esg ratings,manufacturing supply chain,supply chain,supply transparency,apparel esg data,fashion esg data,esg company,esg companies,esg company rating,esg rating,esg ratings,esg ranking,esg rankings,esg data ranking,esg data rating,environmental,environmental concerns,social concerns,environmental social corporate governance,adidas esg data,data visualizations,data infographics, Laureen van Breen"},{name:"description",content:"Discover ESG data disclosure ratings and supplier transparency of the biggest 100 apparel companies in infographics, charts, and maps by Wikirate."},{name:"author",content:"Theresa Heithaus, Tom Howie, Laureen van Breen, Melanie Twele, Vasiliki Gkatziaki"}])}ngOnInit(){this.route.params.subscribe(n=>{this.report_params={id:+n.id,year:n.year}}),this.scrollToTop()}scrollToTop(){this.scroll.scrollToPosition([0,0])}}return e.\u0275fac=function(n){return new(n||e)(U(ia),U(R0),U(nk),U(Kw))},e.\u0275cmp=An({type:e,selectors:[["dynamic-report"]],decls:8,vars:0,consts:[["id","market-cap-map"]],template:function(n,i){1&n&&ze(0,"intro")(1,"app-market-cap-map",0)(2,"app-esg-disclosure-rates")(3,"app-esg-performance")(4,"app-supplier-lists-on-wikirate")(5,"app-number-of-suppliers-per-company")(6,"app-suppliers-map")(7,"more-data")},dependencies:[QNe,oit,ait,lit,fit,hit,_it,yit]}),e})();function gfe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function mfe(e){return[Tr,ko,Mo,Ar].some(function(t){return e[t]>=0})}const _fe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function bit(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,s=Tg(t,{elementContext:"reference"}),a=Tg(t,{altBoundary:!0}),l=gfe(s,i),u=gfe(a,r,o),c=mfe(l),d=mfe(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}};var Z4=PE({defaultModifiers:[wI,EI,DI,CI,SI,_I,vI,bI,_fe]});const jd=new Map,eB={set(e,t,n){jd.has(e)||jd.set(e,new Map);const i=jd.get(e);i.has(t)||0===i.size?i.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(e,t)=>jd.has(e)&&jd.get(e).get(t)||null,remove(e,t){if(!jd.has(e))return;const n=jd.get(e);n.delete(t),0===n.size&&jd.delete(e)}},tB="transitionend",yfe=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),Cit=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),vfe=e=>{e.dispatchEvent(new Event(tB))},Zu=e=>!(!e||"object"!=typeof e)&&(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),Ud=e=>Zu(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(yfe(e)):null,E_=e=>{if(!Zu(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const i=e.closest("summary");if(i&&i.parentNode!==n||null===i)return!1}return t},Hd=e=>!(e&&e.nodeType===Node.ELEMENT_NODE&&!e.classList.contains("disabled"))||(typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),bfe=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?bfe(e.parentNode):null},oA=()=>{},wfe=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,nB=[],Fs=()=>"rtl"===document.documentElement.dir,Ps=e=>{(e=>{"loading"===document.readyState?(nB.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of nB)t()}),nB.push(e)):e()})(()=>{const t=wfe();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}})},_o=(e,t=[],n=e)=>"function"==typeof e?e(...t):n,Efe=(e,t,n=!0)=>{if(!n)return void _o(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),r=Number.parseFloat(n);return i||r?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let o=!1;const s=({target:a})=>{a===t&&(o=!0,t.removeEventListener(tB,s),_o(e))};t.addEventListener(tB,s),setTimeout(()=>{o||vfe(t)},r)},iB=(e,t,n,i)=>{const r=e.length;let o=e.indexOf(t);return-1===o?!n&&i?e[r-1]:e[0]:(o+=n?1:-1,i&&(o=(o+r)%r),e[Math.max(0,Math.min(o,r-1))])},Ait=/[^.]*(?=\..*)\.|.*/,Nit=/\..*/,Mit=/::\d+$/,rB={};let Dfe=1;const Cfe={mouseenter:"mouseover",mouseleave:"mouseout"},kit=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Sfe(e,t){return t&&`${t}::${Dfe++}`||e.uidEvent||Dfe++}function xfe(e){const t=Sfe(e);return e.uidEvent=t,rB[t]=rB[t]||{},rB[t]}function Tfe(e,t,n=null){return Object.values(e).find(i=>i.callable===t&&i.delegationSelector===n)}function Afe(e,t,n){const i="string"==typeof t,r=i?n:t||n;let o=Mfe(e);return kit.has(o)||(o=e),[i,r,o]}function Nfe(e,t,n,i,r){if("string"!=typeof t||!e)return;let[o,s,a]=Afe(t,n,i);var p;t in Cfe&&(p=s,s=function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return p.call(this,g)});const l=xfe(e),u=l[a]||(l[a]={}),c=Tfe(u,s,o?n:null);if(c)return void(c.oneOff=c.oneOff&&r);const d=Sfe(s,t.replace(Ait,"")),f=o?function Oit(e,t,n){return function i(r){const o=e.querySelectorAll(t);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return sB(r,{delegateTarget:s}),i.oneOff&&ae.off(e,r.type,t,n),n.apply(s,[r])}}(e,n,s):function Iit(e,t){return function n(i){return sB(i,{delegateTarget:e}),n.oneOff&&ae.off(e,i.type,t),t.apply(e,[i])}}(e,s);f.delegationSelector=o?n:null,f.callable=s,f.oneOff=r,f.uidEvent=d,u[d]=f,e.addEventListener(a,f,o)}function oB(e,t,n,i,r){const o=Tfe(t[n],i,r);!o||(e.removeEventListener(n,o,Boolean(r)),delete t[n][o.uidEvent])}function Rit(e,t,n,i){const r=t[n]||{};for(const[o,s]of Object.entries(r))o.includes(i)&&oB(e,t,n,s.callable,s.delegationSelector)}function Mfe(e){return e=e.replace(Nit,""),Cfe[e]||e}const ae={on(e,t,n,i){Nfe(e,t,n,i,!1)},one(e,t,n,i){Nfe(e,t,n,i,!0)},off(e,t,n,i){if("string"!=typeof t||!e)return;const[r,o,s]=Afe(t,n,i),a=s!==t,l=xfe(e),u=l[s]||{},c=t.startsWith(".");if(typeof o<"u"){if(!Object.keys(u).length)return;oB(e,l,s,o,r?n:null)}else{if(c)for(const d of Object.keys(l))Rit(e,l,d,t.slice(1));for(const[d,f]of Object.entries(u)){const h=d.replace(Mit,"");(!a||t.includes(h))&&oB(e,l,s,f.callable,f.delegationSelector)}}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const i=wfe();let s=null,a=!0,l=!0,u=!1;t!==Mfe(t)&&i&&(s=i.Event(t,n),i(e).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),u=s.isDefaultPrevented());const c=sB(new Event(t,{bubbles:a,cancelable:!0}),n);return u&&c.preventDefault(),l&&e.dispatchEvent(c),c.defaultPrevented&&s&&s.preventDefault(),c}};function sB(e,t={}){for(const[n,i]of Object.entries(t))try{e[n]=i}catch{Object.defineProperty(e,n,{configurable:!0,get:()=>i})}return e}function kfe(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function aB(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const ec={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${aB(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${aB(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=kfe(e.dataset[i])}return t},getDataAttribute:(e,t)=>kfe(e.getAttribute(`data-bs-${aB(t)}`))};class ib{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const i=Zu(n)?ec.getDataAttribute(n,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...Zu(n)?ec.getDataAttributes(n):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[i,r]of Object.entries(n)){const o=t[i],s=Zu(o)?"element":Cit(o);if(!new RegExp(r).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${s}" but expected type "${r}".`)}}}class Va extends ib{constructor(t,n){super(),(t=Ud(t))&&(this._element=t,this._config=this._getConfig(n),eB.set(this._element,this.constructor.DATA_KEY,this))}dispose(){eB.remove(this._element,this.constructor.DATA_KEY),ae.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,i=!0){Efe(t,n,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return eB.get(Ud(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,"object"==typeof n?n:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const lB=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map(n=>yfe(n)).join(","):null},Ve={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(n=>n.matches(t)),parents(e,t){const n=[];let i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!Hd(n)&&E_(n))},getSelectorFromElement(e){const t=lB(e);return t&&Ve.findOne(t)?t:null},getElementFromSelector(e){const t=lB(e);return t?Ve.findOne(t):null},getMultipleElementsFromSelector(e){const t=lB(e);return t?Ve.find(t):[]}},sA=(e,t="hide")=>{const i=e.NAME;ae.on(document,`click.dismiss${e.EVENT_KEY}`,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Hd(this))return;const o=Ve.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(o)[t]()})};class aA extends Va{static get NAME(){return"alert"}close(){if(ae.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const n=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),ae.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=aA.getOrCreateInstance(this);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t](this)}})}}sA(aA,"close"),Ps(aA);const Ofe='[data-bs-toggle="button"]';class lA extends Va{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const n=lA.getOrCreateInstance(this);"toggle"===t&&n[t]()})}}ae.on(document,"click.bs.button.data-api",Ofe,e=>{e.preventDefault();const t=e.target.closest(Ofe);lA.getOrCreateInstance(t).toggle()}),Ps(lA);const D_=".bs.swipe",qit=`touchstart${D_}`,Yit=`touchmove${D_}`,Kit=`touchend${D_}`,Xit=`pointerdown${D_}`,Qit=`pointerup${D_}`,nrt={endCallback:null,leftCallback:null,rightCallback:null},irt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class uA extends ib{constructor(t,n){super(),this._element=t,t&&uA.isSupported()&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return nrt}static get DefaultType(){return irt}static get NAME(){return"swipe"}dispose(){ae.off(this._element,D_)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),_o(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const n=t/this._deltaX;this._deltaX=0,n&&_o(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ae.on(this._element,Xit,t=>this._start(t)),ae.on(this._element,Qit,t=>this._end(t)),this._element.classList.add("pointer-event")):(ae.on(this._element,qit,t=>this._start(t)),ae.on(this._element,Yit,t=>this._move(t)),ae.on(this._element,Kit,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const zd=".bs.carousel",rb="next",C_="prev",S_="left",cA="right",lrt=`slide${zd}`,uB=`slid${zd}`,urt=`keydown${zd}`,crt=`mouseenter${zd}`,drt=`mouseleave${zd}`,frt=`dragstart${zd}`,hrt=`load${zd}.data-api`,prt=`click${zd}.data-api`,dA="active",Srt={ArrowLeft:cA,ArrowRight:S_},xrt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Trt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ob extends Va{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ve.findOne(".carousel-indicators",this._element),this._addEventListeners(),"carousel"===this._config.ride&&this.cycle()}static get Default(){return xrt}static get DefaultType(){return Trt}static get NAME(){return"carousel"}next(){this._slide(rb)}nextWhenVisible(){!document.hidden&&E_(this._element)&&this.next()}prev(){this._slide(C_)}pause(){this._isSliding&&vfe(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void ae.one(this._element,uB,()=>this.cycle());this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding)return void ae.one(this._element,uB,()=>this.to(t));const i=this._getItemIndex(this._getActive());i!==t&&this._slide(t>i?rb:C_,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&ae.on(this._element,urt,t=>this._keydown(t)),"hover"===this._config.pause&&(ae.on(this._element,crt,()=>this.pause()),ae.on(this._element,drt,()=>this._maybeEnableCycle())),this._config.touch&&uA.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Ve.find(".carousel-item img",this._element))ae.on(i,frt,r=>r.preventDefault());this._swipeHelper=new uA(this._element,{leftCallback:()=>this._slide(this._directionToOrder(S_)),rightCallback:()=>this._slide(this._directionToOrder(cA)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=Srt[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=Ve.findOne(".active",this._indicatorsElement);n.classList.remove(dA),n.removeAttribute("aria-current");const i=Ve.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(dA),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const i=this._getActive(),r=t===rb,o=n||iB(this._getItems(),i,r,this._config.wrap);if(o===i)return;const s=this._getItemIndex(o),a=h=>ae.trigger(this._element,h,{relatedTarget:o,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:s});if(a(lrt).defaultPrevented||!i||!o)return;const u=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=o;const c=r?"carousel-item-start":"carousel-item-end",d=r?"carousel-item-next":"carousel-item-prev";o.classList.add(d),i.classList.add(c),o.classList.add(c),this._queueCallback(()=>{o.classList.remove(c,d),o.classList.add(dA),i.classList.remove(dA,d,c),this._isSliding=!1,a(uB)},i,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ve.findOne(".active.carousel-item",this._element)}_getItems(){return Ve.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Fs()?t===S_?C_:rb:t===S_?rb:C_}_orderToDirection(t){return Fs()?t===C_?S_:cA:t===C_?cA:S_}static jQueryInterface(t){return this.each(function(){const n=ob.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t]()}}else n.to(t)})}}ae.on(document,prt,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=Ve.getElementFromSelector(this);if(!t||!t.classList.contains("carousel"))return;e.preventDefault();const n=ob.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===ec.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())}),ae.on(window,hrt,()=>{const e=Ve.find('[data-bs-ride="carousel"]');for(const t of e)ob.getOrCreateInstance(t)}),Ps(ob);const sb=".bs.collapse",Mrt=`show${sb}`,krt=`shown${sb}`,Irt=`hide${sb}`,Ort=`hidden${sb}`,Rrt=`click${sb}.data-api`,cB="show",x_="collapse",fA="collapsing",Prt=`:scope .${x_} .${x_}`,dB='[data-bs-toggle="collapse"]',jrt={parent:null,toggle:!0},Urt={parent:"(null|element)",toggle:"boolean"};class ab extends Va{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const i=Ve.find(dB);for(const r of i){const o=Ve.getSelectorFromElement(r),s=Ve.find(o).filter(a=>a===this._element);null!==o&&s.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return jrt}static get DefaultType(){return Urt}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(a=>a!==this._element).map(a=>ab.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||ae.trigger(this._element,Mrt).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(x_),this._element.classList.add(fA),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(fA),this._element.classList.add(x_,cB),this._element.style[i]="",ae.trigger(this._element,krt)},this._element,!0),this._element.style[i]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown()||ae.trigger(this._element,Irt).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,this._element.classList.add(fA),this._element.classList.remove(x_,cB);for(const r of this._triggerArray){const o=Ve.getElementFromSelector(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0,this._element.style[n]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(fA),this._element.classList.add(x_),ae.trigger(this._element,Ort)},this._element,!0)}_isShown(t=this._element){return t.classList.contains(cB)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=Ud(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(dB);for(const n of t){const i=Ve.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(t){const n=Ve.find(Prt,this._config.parent);return Ve.find(t,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const i of t)i.classList.toggle("collapsed",!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return"string"==typeof t&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const i=ab.getOrCreateInstance(this,n);if("string"==typeof t){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}ae.on(document,Rrt,dB,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of Ve.getMultipleElementsFromSelector(this))ab.getOrCreateInstance(t,{toggle:!1}).toggle()}),Ps(ab);const lp=".bs.dropdown",fB=".data-api",zrt="ArrowUp",Vfe="ArrowDown",Wrt=`hide${lp}`,qrt=`hidden${lp}`,Yrt=`show${lp}`,Krt=`shown${lp}`,jfe=`click${lp}${fB}`,Ufe=`keydown${lp}${fB}`,Xrt=`keyup${lp}${fB}`,T_="show",up='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',not=`${up}.show`,hA=".dropdown-menu",sot=Fs()?"top-end":"top-start",aot=Fs()?"top-start":"top-end",lot=Fs()?"bottom-end":"bottom-start",uot=Fs()?"bottom-start":"bottom-end",cot=Fs()?"left-start":"right-start",dot=Fs()?"right-start":"left-start",pot={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},got={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ul extends Va{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Ve.next(this._element,hA)[0]||Ve.prev(this._element,hA)[0]||Ve.findOne(hA,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return pot}static get DefaultType(){return got}static get NAME(){return"dropdown"}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Hd(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!ae.trigger(this._element,Yrt,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const i of[].concat(...document.body.children))ae.on(i,"mouseover",oA);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(T_),this._element.classList.add(T_),ae.trigger(this._element,Krt,t)}}hide(){!Hd(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!ae.trigger(this._element,Wrt,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))ae.off(i,"mouseover",oA);this._popper&&this._popper.destroy(),this._menu.classList.remove(T_),this._element.classList.remove(T_),this._element.setAttribute("aria-expanded","false"),ec.removeDataAttribute(this._menu,"popper"),ae.trigger(this._element,qrt,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!Zu(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${"dropdown".toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof qr>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:Zu(this._config.reference)?t=Ud(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=Z4(t,this._menu,n)}_isShown(){return this._menu.classList.contains(T_)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return cot;if(t.classList.contains("dropstart"))return dot;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const n="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?n?aot:sot:n?uot:lot}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(n=>Number.parseInt(n,10)):"function"==typeof t?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(ec.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..._o(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const i=Ve.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(r=>E_(r));!i.length||iB(i,n,t===Vfe,!i.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=Ul.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const n=Ve.find(not);for(const i of n){const r=Ul.getInstance(i);if(!r||!1===r._config.autoClose)continue;const o=t.composedPath(),s=o.includes(r._menu);if(o.includes(r._element)||"inside"===r._config.autoClose&&!s||"outside"===r._config.autoClose&&s||r._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:r._element};"click"===t.type&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),i="Escape"===t.key,r=[zrt,Vfe].includes(t.key);if(!r&&!i||n&&!i)return;t.preventDefault();const o=this.matches(up)?this:Ve.prev(this,up)[0]||Ve.next(this,up)[0]||Ve.findOne(up,t.delegateTarget.parentNode),s=Ul.getOrCreateInstance(o);if(r)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),o.focus())}}ae.on(document,Ufe,up,Ul.dataApiKeydownHandler),ae.on(document,Ufe,hA,Ul.dataApiKeydownHandler),ae.on(document,jfe,Ul.clearMenus),ae.on(document,Xrt,Ul.clearMenus),ae.on(document,jfe,up,function(e){e.preventDefault(),Ul.getOrCreateInstance(this).toggle()}),Ps(Ul);const Gfe="mousedown.bs.backdrop",_ot={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},yot={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Wfe extends ib{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return _ot}static get DefaultType(){return yot}static get NAME(){return"backdrop"}show(t){if(!this._config.isVisible)return void _o(t);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{_o(t)})}hide(t){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),_o(t)})):_o(t)}dispose(){!this._isAppended||(ae.off(this._element,Gfe),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Ud(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),ae.on(t,Gfe,()=>{_o(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Efe(t,this._getElement(),this._config.isAnimated)}}const pA=".bs.focustrap",bot=`focusin${pA}`,wot=`keydown.tab${pA}`,Cot={autofocus:!0,trapElement:null},Sot={autofocus:"boolean",trapElement:"element"};class Yfe extends ib{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Cot}static get DefaultType(){return Sot}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ae.off(document,pA),ae.on(document,bot,t=>this._handleFocusin(t)),ae.on(document,wot,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,ae.off(document,pA))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const i=Ve.focusableChildren(n);0===i.length?n.focus():"backward"===this._lastTabNavDirection?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?"backward":"forward")}}const Kfe=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Xfe=".sticky-top",gA="padding-right",Qfe="margin-right";class hB{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,gA,n=>n+t),this._setElementAttributes(Kfe,gA,n=>n+t),this._setElementAttributes(Xfe,Qfe,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,gA),this._resetElementAttributes(Kfe,gA),this._resetElementAttributes(Xfe,Qfe)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,i){const r=this.getWidth();this._applyManipulationCallback(t,s=>{if(s!==this._element&&window.innerWidth>s.clientWidth+r)return;this._saveInitialAttribute(s,n);const a=window.getComputedStyle(s).getPropertyValue(n);s.style.setProperty(n,`${i(Number.parseFloat(a))}px`)})}_saveInitialAttribute(t,n){const i=t.style.getPropertyValue(n);i&&ec.setDataAttribute(t,n,i)}_resetElementAttributes(t,n){this._applyManipulationCallback(t,r=>{const o=ec.getDataAttribute(r,n);null!==o?(ec.removeDataAttribute(r,n),r.style.setProperty(n,o)):r.style.removeProperty(n)})}_applyManipulationCallback(t,n){if(Zu(t))n(t);else for(const i of Ve.find(t,this._element))n(i)}}const Ls=".bs.modal",Not=`hide${Ls}`,Mot=`hidePrevented${Ls}`,Jfe=`hidden${Ls}`,Zfe=`show${Ls}`,kot=`shown${Ls}`,Iot=`resize${Ls}`,Oot=`click.dismiss${Ls}`,Rot=`mousedown.dismiss${Ls}`,Fot=`keydown.dismiss${Ls}`,Pot=`click${Ls}.data-api`,ehe="modal-open",pB="modal-static",Uot={backdrop:!0,focus:!0,keyboard:!0},Hot={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class A_ extends Va{constructor(t,n){super(t,n),this._dialog=Ve.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new hB,this._addEventListeners()}static get Default(){return Uot}static get DefaultType(){return Hot}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||ae.trigger(this._element,Zfe,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ehe),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||ae.trigger(this._element,Not).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ae.off(window,Ls),ae.off(this._dialog,Ls),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Wfe({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Yfe({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Ve.findOne(".modal-body",this._dialog);n&&(n.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ae.trigger(this._element,kot,{relatedTarget:t})},this._dialog,this._isAnimated())}_addEventListeners(){ae.on(this._element,Fot,t=>{if("Escape"===t.key){if(this._config.keyboard)return void this.hide();this._triggerBackdropTransition()}}),ae.on(window,Iot,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ae.on(this._element,Rot,t=>{ae.one(this._element,Oot,n=>{if(this._element===t.target&&this._element===n.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ehe),this._resetAdjustments(),this._scrollBar.reset(),ae.trigger(this._element,Jfe)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ae.trigger(this._element,Mot).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(pB)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(pB),this._queueCallback(()=>{this._element.classList.remove(pB),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!t){const r=Fs()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&t){const r=Fs()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const i=A_.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](n)}})}}ae.on(document,Pot,'[data-bs-toggle="modal"]',function(e){const t=Ve.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),ae.one(t,Zfe,r=>{r.defaultPrevented||ae.one(t,Jfe,()=>{E_(this)&&this.focus()})});const n=Ve.findOne(".modal.show");n&&A_.getInstance(n).hide(),A_.getOrCreateInstance(t).toggle(this)}),sA(A_),Ps(A_);const tc=".bs.offcanvas",Got=`load${tc}.data-api`,she=".offcanvas.show",Yot=`show${tc}`,Kot=`shown${tc}`,Xot=`hide${tc}`,ahe=`hidePrevented${tc}`,lhe=`hidden${tc}`,Qot=`resize${tc}`,Jot=`click${tc}.data-api`,Zot=`keydown.dismiss${tc}`,tst={backdrop:!0,keyboard:!0,scroll:!1},nst={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Gd extends Va{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return tst}static get DefaultType(){return nst}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||ae.trigger(this._element,Yot,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new hB).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove("showing"),ae.trigger(this._element,Kot,{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&!ae.trigger(this._element,Xot).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new hB).reset(),ae.trigger(this._element,lhe)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=Boolean(this._config.backdrop);return new Wfe({className:"offcanvas-backdrop",isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?()=>{"static"!==this._config.backdrop?this.hide():ae.trigger(this._element,ahe)}:null})}_initializeFocusTrap(){return new Yfe({trapElement:this._element})}_addEventListeners(){ae.on(this._element,Zot,t=>{if("Escape"===t.key){if(this._config.keyboard)return void this.hide();ae.trigger(this._element,ahe)}})}static jQueryInterface(t){return this.each(function(){const n=Gd.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t](this)}})}}ae.on(document,Jot,'[data-bs-toggle="offcanvas"]',function(e){const t=Ve.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Hd(this))return;ae.one(t,lhe,()=>{E_(this)&&this.focus()});const n=Ve.findOne(she);n&&n!==t&&Gd.getInstance(n).hide(),Gd.getOrCreateInstance(t).toggle(this)}),ae.on(window,Got,()=>{for(const e of Ve.find(she))Gd.getOrCreateInstance(e).show()}),ae.on(window,Qot,()=>{for(const e of Ve.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Gd.getOrCreateInstance(e).hide()}),sA(Gd),Ps(Gd);const uhe={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ist=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),rst=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ost=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!ist.has(n)||Boolean(rst.test(e.nodeValue)):t.filter(i=>i instanceof RegExp).some(i=>i.test(n))},lst={allowList:uhe,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ust={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},cst={entry:"(string|element|function|null)",selector:"(string|element)"};class dst extends ib{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return lst}static get DefaultType(){return ust}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(t,o,r);const n=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,i]of Object.entries(t))super._typeCheckConfig({selector:n,entry:i},cst)}_setContent(t,n,i){const r=Ve.findOne(i,t);if(r){if(!(n=this._resolvePossibleFunction(n)))return void r.remove();if(Zu(n))return void this._putElementInTemplate(Ud(n),r);if(this._config.html)return void(r.innerHTML=this._maybeSanitize(n));r.textContent=n}}_maybeSanitize(t){return this._config.sanitize?function sst(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const s of o){const a=s.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){s.remove();continue}const l=[].concat(...s.attributes),u=[].concat(t["*"]||[],t[a]||[]);for(const c of l)ost(c,u)||s.removeAttribute(c.nodeName)}return r.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return _o(t,[this])}_putElementInTemplate(t,n){if(this._config.html)return n.innerHTML="",void n.append(t);n.textContent=t.textContent}}const hst=new Set(["sanitize","allowList","sanitizeFn"]),gB="fade",mA="show",dhe="hide.bs.modal",lb="hover",mB="focus",Ast={AUTO:"auto",TOP:"top",RIGHT:Fs()?"left":"right",BOTTOM:"bottom",LEFT:Fs()?"right":"left"},Nst={allowList:uhe,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Mst={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class N_ extends Va{constructor(t,n){if(typeof qr>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Nst}static get DefaultType(){return Mst}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),ae.off(this._element.closest(".modal"),dhe,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=ae.trigger(this._element,this.constructor.eventName("show")),i=(bfe(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),ae.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(r),r.classList.add(mA),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))ae.on(a,"mouseover",oA);this._queueCallback(()=>{ae.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!ae.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(mA),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))ae.off(r,"mouseover",oA);this._activeTrigger.click=!1,this._activeTrigger[mB]=!1,this._activeTrigger[lb]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ae.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(gB,mA),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(gB),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new dst({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(gB)}_isShown(){return this.tip&&this.tip.classList.contains(mA)}_createPopper(t){const n=_o(this._config.placement,[this,t,this._element]),i=Ast[n.toUpperCase()];return Z4(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(n=>Number.parseInt(n,10)):"function"==typeof t?n=>t(n,this._element):t}_resolvePossibleFunction(t){return _o(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,..._o(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if("click"===n)ae.on(this._element,this.constructor.eventName("click"),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if("manual"!==n){const i=this.constructor.eventName(n===lb?"mouseenter":"focusin"),r=this.constructor.eventName(n===lb?"mouseleave":"focusout");ae.on(this._element,i,this._config.selector,o=>{const s=this._initializeOnDelegatedTarget(o);s._activeTrigger["focusin"===o.type?mB:lb]=!0,s._enter()}),ae.on(this._element,r,this._config.selector,o=>{const s=this._initializeOnDelegatedTarget(o);s._activeTrigger["focusout"===o.type?mB:lb]=s._element.contains(o.relatedTarget),s._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ae.on(this._element.closest(".modal"),dhe,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");!t||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=ec.getDataAttributes(this._element);for(const i of Object.keys(n))hst.has(i)&&delete n[i];return t={...n,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:Ud(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(t[n]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=N_.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Ps(N_);const Rst={...N_.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Fst={...N_.DefaultType,content:"(null|string|element|function)"};class _B extends N_{static get Default(){return Rst}static get DefaultType(){return Fst}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=_B.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Ps(_B);const yB=".bs.scrollspy",$st=`activate${yB}`,fhe=`click${yB}`,Bst=`load${yB}.data-api`,M_="active",vB="[href]",Wst={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},qst={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class _A extends Va{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Wst}static get DefaultType(){return qst}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Ud(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(ae.off(this._config.target,fhe),ae.on(this._config.target,fhe,vB,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:r,behavior:"smooth"});i.scrollTop=r}}))}_getNewObserver(){return new IntersectionObserver(n=>this._observerCallback(n),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(t){const n=s=>this._targetLinks.get(`#${s.target.id}`),i=s=>{this._previousScrollData.visibleEntryTop=s.target.offsetTop,this._process(n(s))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(s));continue}const a=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&a){if(i(s),!r)return}else!o&&!a&&i(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ve.find(vB,this._config.target);for(const n of t){if(!n.hash||Hd(n))continue;const i=Ve.findOne(decodeURI(n.hash),this._element);E_(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(M_),this._activateParents(t),ae.trigger(this._element,$st,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))Ve.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(M_);else for(const n of Ve.parents(t,".nav, .list-group"))for(const i of Ve.prev(n,".nav-link, .nav-item > .nav-link, .list-group-item"))i.classList.add(M_)}_clearActiveClass(t){t.classList.remove(M_);const n=Ve.find(`${vB}.${M_}`,t);for(const i of n)i.classList.remove(M_)}static jQueryInterface(t){return this.each(function(){const n=_A.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t]()}})}}ae.on(window,Bst,()=>{for(const e of Ve.find('[data-bs-spy="scroll"]'))_A.getOrCreateInstance(e)}),Ps(_A);const cp=".bs.tab",Kst=`hide${cp}`,Xst=`hidden${cp}`,Qst=`show${cp}`,Jst=`shown${cp}`,Zst=`click${cp}`,eat=`keydown${cp}`,tat=`load${cp}`,nat="ArrowLeft",phe="ArrowRight",iat="ArrowUp",ghe="ArrowDown",bB="Home",mhe="End",dp="active",wB="show",yhe=".dropdown-toggle",EB=`:not(${yhe})`,vhe='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',DB=`.nav-link${EB}, .list-group-item${EB}, [role="tab"]${EB}, ${vhe}`,uat=`.${dp}[data-bs-toggle="tab"], .${dp}[data-bs-toggle="pill"], .${dp}[data-bs-toggle="list"]`;class k_ extends Va{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ae.on(this._element,eat,n=>this._keydown(n)))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),i=n?ae.trigger(n,Kst,{relatedTarget:t}):null;ae.trigger(t,Qst,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){t&&(t.classList.add(dp),this._activate(Ve.getElementFromSelector(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),ae.trigger(t,Jst,{relatedTarget:n})):t.classList.add(wB)},t,t.classList.contains("fade")))}_deactivate(t,n){t&&(t.classList.remove(dp),t.blur(),this._deactivate(Ve.getElementFromSelector(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),ae.trigger(t,Xst,{relatedTarget:n})):t.classList.remove(wB)},t,t.classList.contains("fade")))}_keydown(t){if(![nat,phe,iat,ghe,bB,mhe].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(r=>!Hd(r));let i;if([bB,mhe].includes(t.key))i=n[t.key===bB?0:n.length-1];else{const r=[phe,ghe].includes(t.key);i=iB(n,t.target,r,!0)}i&&(i.focus({preventScroll:!0}),k_.getOrCreateInstance(i).show())}_getChildren(){return Ve.find(DB,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",n),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=Ve.getElementFromSelector(t);!n||(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const i=this._getOuterElement(t);if(!i.classList.contains("dropdown"))return;const r=(o,s)=>{const a=Ve.findOne(o,i);a&&a.classList.toggle(s,n)};r(yhe,dp),r(".dropdown-menu",wB),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,i){t.hasAttribute(n)||t.setAttribute(n,i)}_elemIsActive(t){return t.classList.contains(dp)}_getInnerElement(t){return t.matches(DB)?t:Ve.findOne(DB,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each(function(){const n=k_.getOrCreateInstance(this);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t]()}})}}ae.on(document,Zst,vhe,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!Hd(this)&&k_.getOrCreateInstance(this).show()}),ae.on(window,tat,()=>{for(const e of Ve.find(uat))k_.getOrCreateInstance(e)}),Ps(k_);const Wd=".bs.toast",dat=`mouseover${Wd}`,fat=`mouseout${Wd}`,hat=`focusin${Wd}`,pat=`focusout${Wd}`,gat=`hide${Wd}`,mat=`hidden${Wd}`,_at=`show${Wd}`,yat=`shown${Wd}`,yA="show",vA="showing",bat={animation:"boolean",autohide:"boolean",delay:"number"},wat={animation:!0,autohide:!0,delay:5e3};class bA extends Va{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return wat}static get DefaultType(){return bat}static get NAME(){return"toast"}show(){ae.trigger(this._element,_at).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(yA,vA),this._queueCallback(()=>{this._element.classList.remove(vA),ae.trigger(this._element,yat),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!ae.trigger(this._element,gat).defaultPrevented&&(this._element.classList.add(vA),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(vA,yA),ae.trigger(this._element,mat)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(yA),super.dispose()}isShown(){return this._element.classList.contains(yA)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=n;break;case"focusin":case"focusout":this._hasKeyboardInteraction=n}if(n)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){ae.on(this._element,dat,t=>this._onInteraction(t,!0)),ae.on(this._element,fat,t=>this._onInteraction(t,!1)),ae.on(this._element,hat,t=>this._onInteraction(t,!0)),ae.on(this._element,pat,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=bA.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}sA(bA),Ps(bA);const Eat=["carousel"];function Dat(e,t){if(1&e&&(j(0,"div",51)(1,"div",52)(2,"div",53),ze(3,"img",54),H(),j(4,"div",55),K(5),H()()()),2&e){const n=t.$implicit;oe(3),Wa("src",n.logo,Xr),Wa("alt",n.contributor),oe(2),Er(" ",n.contributor," ")}}const Cat=[{path:"apparel_top_100/reports/0/latest",redirectTo:"/apparel_top_100/home",pathMatch:"full"},{path:"apparel_top_100/home",component:vit},{path:"apparel_top_100/about",component:(()=>{class e{constructor(n,i,r){this.scroll=n,this.meta=i,this.titleService=r,this.images=[944,1011,984].map(o=>`https://picsum.photos/id/${o}/900/500`),this.currentIndex=1,this.contributors=[{contributor:"Fashion Revolution",logo:"https://dq06ugkuram52.cloudfront.net/files/3765463/22301376-medium.jpg"},{contributor:"Open Supply Hub",logo:"https://dq06ugkuram52.cloudfront.net/files/5661929/40040943-medium.jpeg"},{contributor:"AMD Akademie Mode & Design Berlin",logo:"https://dq06ugkuram52.cloudfront.net/files/5467212/20834915-medium.jpg"},{contributor:"Walk Free Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/1831839/12602420-medium.png"},{contributor:"Clean Clothes Campaign",logo:"https://dq06ugkuram52.cloudfront.net/files/564260/12604027-medium.png"},{contributor:"Columbia University SIPA",logo:"https://dq06ugkuram52.cloudfront.net/files/8104623/26042255-medium.png"},{contributor:"University of Wollongong",logo:"https://dq06ugkuram52.cloudfront.net/files/2549498/12602498-medium.png"},{contributor:"Glasgow Caledonian University",logo:"https://dq06ugkuram52.cloudfront.net/files/2381047/12602618-medium.png"},{contributor:"Nottingham Trent University",logo:"https://dq06ugkuram52.cloudfront.net/files/3700624/14894897-medium.png"},{contributor:"Universidad EAFIT",logo:"https://dq06ugkuram52.cloudfront.net/files/2593569/15069279-medium.png"},{contributor:"Ewha Womans University",logo:"https://dq06ugkuram52.cloudfront.net/files/2718582/12716390-medium.jpeg"},{contributor:"University of Connecticut",logo:"https://dq06ugkuram52.cloudfront.net/files/2877060/13099154-medium.png"},{contributor:"Australian National University",logo:"https://dq06ugkuram52.cloudfront.net/files/5295432/20444349-medium.png"},{contributor:"University of Nottingham",logo:"https://dq06ugkuram52.cloudfront.net/files/3149947/13561221-medium.png"},{contributor:"Global Reporting Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/801180/12603989-medium.jpg"},{contributor:"Ellen MacArthur Foundation",logo:"https://dq06ugkuram52.cloudfront.net/files/5405942/20706304-medium.png"},{contributor:"Textile Exchange",logo:"https://dq06ugkuram52.cloudfront.net/files/5406497/20709161-medium.jpg"},{contributor:"Science Based Targets Initiative",logo:"../../assets/SBTI-logo.jpg"},{contributor:"Poverty Footprint",logo:"https://dq06ugkuram52.cloudfront.net/files/1828145/12602552-medium.png"},{contributor:"Business & Human Rights Resource Center",logo:"../../assets/BHRRC-logo.png"},{logo:"https://dq06ugkuram52.cloudfront.net/files/5663399/21715396-medium.jpeg",contributor:"As You Sow"},{contributor:"Responsible Sourcing Network",logo:"https://dq06ugkuram52.cloudfront.net/files/5340655/20553116-medium.jpg"},{contributor:"Accord on Fire and Building Safety in Bangladesh",logo:"https://dq06ugkuram52.cloudfront.net/files/5424763/20734161-medium.png"},{contributor:"Ethical Trading Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/168320/20704071-medium.jpeg"},{contributor:"Fair Labor Association",logo:"https://dq06ugkuram52.cloudfront.net/files/61327/12604154-medium.gif"},{contributor:"ACT Action, Collaboration, Transformation",logo:"https://dq06ugkuram52.cloudfront.net/files/5417974/20726868-medium.png"},{contributor:"ShareAction",logo:"https://dq06ugkuram52.cloudfront.net/files/3763173/15057247-medium.png"},{contributor:"SustainoMetric",logo:"https://dq06ugkuram52.cloudfront.net/files/8126858/26084088-medium.png"}],r.setTitle("Who made Apparel 100 and why?"),i.addTags([{name:"keywords",content:"wikirate, esg data,apparel supply chain,apparel company esg ratings,manufacturing supply chain,supply chain,supply transparency,apparel esg data,fashion esg data,esg company,esg companies,esg company rating,esg rating,esg ratings,esg ranking,esg rankings,esg data ranking,esg data rating,environmental,environmental concerns,social concerns,environmental social corporate governance,adidas esg data,data visualizations,data infographics, Laureen van Breen"},{name:"description",content:"Apparel 100 was made by WikiRate to showcase supply chain transparency and ESG data in an engaging and accessible way. These maps and infographics create a sector snapshot that tells a story the world deserves to know."}]),i.updateTag({name:"og:title",content:"Behind Apparel 100"},"property='og:title'"),i.updateTag({name:"og:url",content:"//showcase.wikirate.org/#/apparel_top_100/about"},"property='og:url'"),i.updateTag({name:"og:description",content:"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way."},"property='og:description'"),i.updateTag({name:"twitter:description",content:"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way."},"property='twitter:description'"),i.updateTag({name:"twitter:title",content:"Behind Apparel 100"},"property='twitter:title'")}ngOnInit(){this.scrollToTop()}prev(){this.carousel.nativeElement.carousel("prev")}next(){this.carousel.nativeElement.on("slid.bs.carousel",()=>{this.carousel.nativeElement.carousel("2")})}scrollToTop(){this.scroll.scrollToPosition([0,0])}}return e.\u0275fac=function(n){return new(n||e)(U(R0),U(nk),U(Kw))},e.\u0275cmp=An({type:e,selectors:[["app-about"]],viewQuery:function(n,i){if(1&n&&wf(Eat,7),2&n){let r;Qt(r=Jt())&&(i.carousel=r.first)}},decls:152,vars:1,consts:[[1,"wikirate-creme-box"],[1,"wikirate-container"],[1,"row"],[1,"col","mt-2","text-center"],[1,"mini-title","text-center"],[1,"showcase-main-text","mt-3"],[1,"row","mt-4"],[1,"col-4","text-center","mb-4"],[1,"primary-info-navy"],[1,"secondary-info-navy","mt-1"],[1,"col-4","text-center"],[1,"wikirate-navy-box"],[1,"col-md-8"],[1,"showcase-title","text-white","mt-2","mb-2"],[1,"showcase-main-text-white"],[1,"col-md-4","vertical-center","justify-content-center"],["onclick","window.open('https://forms.gle/8ru3Wh8QMoJ8NZ8Y7','_blank')",1,"btn","btn-highlight","pr-4","pl-4","mt-2"],[1,"wikirate-box"],[1,"mini-title","text-center","mt-4"],[1,"row","mt-5","mb-4"],[1,"secondary-info-navy"],["id","quotes","data-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","mt-4","mb-4","active"],[1,"row","justify-content-center"],[1,"col-9"],[1,"image-box","col-3","vertical-center","justify-content-center","d-none","d-md-inline-flex"],["src","https://dq06ugkuram52.cloudfront.net/files/3765463/22301376-medium.jpg"],[1,"showcase-main-text","font-italic"],[1,"note","mt-3"],[1,"note"],[1,"carousel-item","mt-4","mb-4"],["src","https://dq06ugkuram52.cloudfront.net/files/564260/12604027-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/5467212/20834915-medium.jpg"],[1,"col-3","image-box","vertical-center","justify-content-center","d-none","d-md-inline-flex"],["src","https://dq06ugkuram52.cloudfront.net/files/2549498/12602498-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/1831839/12602420-medium.png"],["role","button","data-slide","prev","href","#quotes",1,"carousel-control-prev","mt-4","mr-4"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button","data-slide","next","href","#quotes",1,"carousel-control-next","mt-4","mr-4"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"wikirate-box","wikirate-container","d-none","d-md-block"],["id","partners-logos","data-ride","carousel",1,"carousel","slide"],[1,"container","mt-4","mb-4"],[1,"section"],[1,"col-lg-12","p-3"],[1,"mb-3"],[1,"slider","mt-3"],[1,"slide-track"],["class","slide",4,"ngFor","ngForOf"],[1,"slide"],[1,"row","col-12","justify-content-center"],[1,"image-box","d-flex","justify-content-center","align-items-center","m-2"],[3,"src","alt"],[1,"contributor-name","m3","text-center"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),K(5," Who made Apparel 100 and why? "),H(),j(6,"div",5)(7,"p"),K(8,"Apparel 100 was made by WikiRate to showcase supply chain transparency and ESG data in an engaging and accessible way. These maps and infographics create a sector snapshot that tells a story the world deserves to know. "),H(),j(9,"p"),K(10," This showcase came together with the support of the WikiRate community. "),H()(),j(11,"div",6)(12,"div",7)(13,"div",8),K(14,"335"),H(),j(15,"div",9),K(16,"RESEARCHERS"),H()(),j(17,"div",10)(18,"div",8),K(19,"10"),H(),j(20,"div",9),K(21,"UNIVERSITIES"),H()(),j(22,"div",10)(23,"div",8),K(24,"17"),H(),j(25,"div",9),K(26,"NGOs"),H()()()()()()(),j(27,"div",11)(28,"div",1)(29,"div",2)(30,"div",12)(31,"h2",13),K(32,"Create your own open data showcase "),H(),j(33,"div",14)(34,"p"),K(35,"With our flexible data infrastructure and committed community we have created an open data ecosystem that you can be part of. "),H()()(),j(36,"div",15)(37,"button",16),K(38," Contact Us "),H()()()()(),j(39,"div",17)(40,"div",1)(41,"p",18),K(42," The research in numbers "),H(),j(43,"div",19)(44,"div",10)(45,"div",8),K(46,"31K+"),H(),j(47,"div",20),K(48,"DATA POINTS"),H()(),j(49,"div",10)(50,"div",8),K(51,"171"),H(),j(52,"div",20),K(53,"METRICS"),H()(),j(54,"div",10)(55,"div",8),K(56,"30K+"),H(),j(57,"div",20),K(58,"CORPORATE RELATIONSHIPS"),H()()()()(),j(59,"div",0)(60,"div",1)(61,"div",21)(62,"div",22)(63,"div",23)(64,"div",24)(65,"div",25)(66,"div",24)(67,"div",26),ze(68,"img",27),H(),j(69,"div",12)(70,"div",28),K(71,'"We believe in collaborating to improve the fashion industry and are delighted to be continuing our partnership with WikiRate into 2022. Using the WikiRate platform to host FTI research has made our work more accessible and impactful across a range of stakeholders who use our data to enable their activism and research." '),H(),j(72,"div",29)(73,"b"),K(74," Fashion Revolution "),H()(),ze(75,"div",30),H()()()()(),j(76,"div",31)(77,"div",24)(78,"div",25)(79,"div",2)(80,"div",26),ze(81,"img",32),H(),j(82,"div",12)(83,"div",28),K(84,'"WikiRate has proven an invaluable partner for our Fashion Checker campaign. The platform\u2019s sophisticated functionalities and open data approach has given us the flexibility we needed to bring our data to the public so that it can be used by advocates to create real change." '),H(),j(85,"div",29)(86,"b"),K(87," Anne Bienias "),H()(),j(88,"div",30),K(89,"Clean Clothes Campaign"),H()()()()()(),j(90,"div",31)(91,"div",24)(92,"div",25)(93,"div",2)(94,"div",26),ze(95,"img",33),H(),j(96,"div",12)(97,"div",28),K(98,'"This collaborative project was a great opportunity to further develop our research skills which in turn allowed us to be more critical and analytical of fashion labels. Working with WikiRate made us understand the importance of finding the right and accurate information that backs up or contradicts the image that a fashion label is trying to portray" '),H(),j(99,"div",29)(100,"b"),K(101," Student of Akademie Mode & Design (AMD) Berlin "),H()(),ze(102,"div",30),H()()()()(),j(103,"div",31)(104,"div",24)(105,"div",25)(106,"div",2)(107,"div",34),ze(108,"img",35),H(),j(109,"div",12)(110,"div",28),K(111,'"WikiRate provides the opportunity for students to get a real-life experience with CSR, which helps develop their social awareness, problem-solving and critical thinking skills" '),H(),j(112,"div",29)(113,"b"),K(114," Dr. Stephanie Perkiss "),H()(),j(115,"div",30),K(116,"University of Wollongong, Australia"),H()()()()()(),j(117,"div",31)(118,"div",24)(119,"div",25)(120,"div",2)(121,"div",26),ze(122,"img",36),H(),j(123,"div",12)(124,"div",28),K(125,'"We\'ve worked with the WikiRate for the last five years to scale our research on modern slavery. The WikiRate team maintains our methodology on their platform and each year coordinates hundreds of university students to contribute new data for analysis that we use to improve legislation to end modern slavery." '),H(),j(126,"div",29)(127,"b"),K(128," Katharine Bryant "),H()(),j(129,"div",30),K(130,"Walk Free Initiative"),H()()()()()()(),j(131,"a",37),ze(132,"span",38),j(133,"span",39),K(134,"Previous"),H()(),j(135,"a",40),ze(136,"span",41),j(137,"span",39),K(138,"Next"),H()()()()(),j(139,"div",42)(140,"div",43)(141,"div",44)(142,"div",45)(143,"div",2)(144,"div",46)(145,"h3",47),K(146,"Research Contributors"),H(),j(147,"p"),K(148,"This research was performed with the contribution of the following organisations"),H(),j(149,"div",48)(150,"div",49),Ye(151,Dat,6,3,"div",50),H()()()()()()()()),2&n&&(oe(151),_e("ngForOf",i.contributors))},dependencies:[yc],styles:[".roadmap[_ngcontent-%COMP%]{height:500px}.showcase-circle-purple[_ngcontent-%COMP%]{width:4.25rem;height:4.25rem;background-color:#484c9d!important}.showcase-circle-orange[_ngcontent-%COMP%]{width:4.25rem;height:4.25rem;background-color:#f7733d!important}.img[_ngcontent-%COMP%]{width:250px!important;height:250px!important;min-width:250px!important;min-height:250px!important}.image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%!important;max-height:100%!important;height:auto!important}.contributor-name[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.6em}.image-box[_ngcontent-%COMP%]{width:140px!important;height:140px!important}.image-box-small-screen[_ngcontent-%COMP%]{height:auto!important;max-width:200px!important}@keyframes scroll{0%{transform:translate(0)}to{transform:translate(-1750px)}}.slider[_ngcontent-%COMP%]{height:200px;margin:auto;overflow:hidden;position:relative;width:auto}.slider[_ngcontent-%COMP%]   .slide-track[_ngcontent-%COMP%]{animation:scroll 60s linear infinite;display:flex;width:3500px}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{height:100px;width:250px}"]}),e})()},{path:"**",redirectTo:"/apparel_top_100/home",pathMatch:"full"}];let Sat=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({providers:[{provide:_c,useClass:RM}],imports:[Lk.forRoot(Cat,{anchorScrolling:"enabled"}),Lk]}),e})();const xat=["search_text"];let Tat=(()=>{class e{constructor(n,i,r){this.route=n,this.router=i,this.apparelService=r,this.exploreMore=!1,this.apparelTop100=[],this.apparelTop100=r.getCompanies()}ngOnInit(){this.report_params={id:0,year:"latest"},this.router.events.pipe(vi(n=>n instanceof mk&&Object.keys(n.snapshot.params).length>0),qe(n=>n instanceof mk?n.snapshot.params:{})).subscribe(n=>{this.report_params.id=n.id,this.report_params.year=n.year,this.selectedCompany=this.apparelService.getCompany(+this.report_params.id).name}),this.apparelService.exploreMore.subscribe(n=>{this.exploreMore=n})}setValue(n){this.search_text.nativeElement.value=n.name,this.report_params.id=n.id,null===n&&(this.search_text.nativeElement.value="overview",this.report_params.id=0)}navigateToYear(n){let i=n.target.value;i&&(null===this.report_params.id&&(this.report_params.id=0),this.router.navigate(["/apparel_top_100/reports/"+this.report_params.id+"/"+i]))}navigateToCompany(n){this.router.navigate(["/apparel_top_100/reports/"+n.id+"/"+this.report_params.year])}}return e.\u0275fac=function(n){return new(n||e)(U(ia),U(Qn),U(mg))},e.\u0275cmp=An({type:e,selectors:[["header-component"]],viewQuery:function(n,i){if(1&n&&wf(xat,5),2&n){let r;Qt(r=Jt())&&(i.search_text=r.first)}},decls:26,vars:0,consts:[[1,"wikirate-box","bg-navy"],[1,"container"],[1,"navbar","bg-navy","navbar-expand","nomargin","drop-shadow","navbar-light"],["routerLink","apparel_top_100/home",1,"navbar-brand","title","mr-3"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","apparel_top_100/about",1,"nav-link","ml-3","mr-3"],[1,"nav-item","dropdown"],["type","button","id","share","data-toggle","dropdown","aria-expanded","false",1,"nav-item","nav-link","ml-3","mr-3","dropdown-toggle"],[1,"bi","bi-arrow-up-right"],["aria-labelledby","share",1,"dropdown-menu"],["target","_blank","href","https://www.facebook.com/sharer/sharer.php?u=https://showcase.wikirate.org/",1,"dropdown-item"],[1,"bi","bi-facebook","ml-2","mr-2"],["target","_blank","href","https://twitter.com/intent/tweet?url=https://showcase.wikirate.org/&text=",1,"dropdown-item"],[1,"bi","bi-twitter","ml-2","mr-2"],["target","_blank","href","https://www.linkedin.com/shareArticle?mini=true&url=https://showcase.wikirate.org/",1,"dropdown-item"],[1,"bi","bi-linkedin","ml-2","mr-2"],["target","_blank","href","mailto:info@example.com?&subject=&cc=&bcc=&body=https://showcase.wikirate.org/%0A",1,"dropdown-item"],[1,"bi","bi-envelope-fill","ml-2","mr-2"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"nav",2)(3,"a",3),K(4,"Apparel 100"),H(),j(5,"ul",4)(6,"li",5)(7,"a",6),K(8,"ABOUT"),H()(),j(9,"li",7)(10,"a",8),K(11," SHARE "),ze(12,"i",9),H(),j(13,"div",10)(14,"a",11),ze(15,"i",12),K(16,"facebook"),H(),j(17,"a",13),ze(18,"i",14),K(19,"twitter"),H(),j(20,"a",15),ze(21,"i",16),K(22,"linkedin"),H(),j(23,"a",17),ze(24,"i",18),K(25,"mail"),H()()()()()()())},dependencies:[yE,RI],styles:["a[_ngcontent-%COMP%]{color:#000}hr[_ngcontent-%COMP%]{margin:.5em}.nav[_ngcontent-%COMP%]{margin-top:.5em;background:white}.title[_ngcontent-%COMP%]{font-weight:700;letter-spacing:0em;text-align:left;color:#fff!important}.dropdown-menu[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto}.dropdown-toggle[_ngcontent-%COMP%]:after{content:none!important}"]}),e})(),Aat=(()=>{class e{constructor(){this.current_year=2022,this.current_year=(new Date).getFullYear()}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=An({type:e,selectors:[["footer"]],decls:32,vars:1,consts:[[1,"wikirate-creme-purple-box"],[1,"wikirate-container"],[1,"row","text-center"],[1,"col-12"],[1,"row","justify-content-center","mb-3"],[1,"tiny-text"],[1,"row","justify-content-center"],["href","https://wikirate.org","target","_blank"],["src","assets/wikirate_logo.svg",1,"logo"],[1,"col-sm-7","mini-text","mt-3","justify-content-center"],[1,"wikirate-navy-box"],[1,"footer-container"],[1,"row"],[1,"col-11"],[1,"note","mt-3","text-light-white","mb-3"],["href","https://wikirate.org/~8079639","target","_blank"],["href","https://wikirate.org/~836561","target","_blank"],["href","https://creativecommons.org/licenses/by/4.0","target","_blank"]],template:function(n,i){1&n&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),K(6,"Powered by "),H()(),j(7,"div",6)(8,"a",7),ze(9,"img",8),H()(),j(10,"div",6)(11,"div",9),K(12," WikiRate is an open data platform that brings corporate ESG data together in one place, making it accessible, comparable, and free for all. "),H()()()()()(),j(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),K(18," This showcase was created by using data from "),j(19,"a",7),K(20,"Wikirate.org"),H(),K(21,", '"),j(22,"a",15),K(23,"Apparel 100 Analysis"),H(),K(24,"' by "),j(25,"a",16),K(26,"theresah"),H(),K(27,", licensed under "),j(28,"a",17),K(29,"CC BY 4.0"),H()(),j(30,"div",14),K(31),H()()()()()),2&n&&(oe(31),Er(" Copyright \xa9 ",i.current_year," Wikirate.org All rights reserved "))},styles:[".nopadding[_ngcontent-%COMP%]{padding:0!important}.text-light-white[_ngcontent-%COMP%]{color:#f7f7f8!important}"]}),e})();function Nat(e,t){if(1&e){const n=function Ks(){return re()}();j(0,"div",2),st("click",function(){return os(n),ss(Dt().scrollToTop())}),j(1,"button",3),st("click",function(){return os(n),ss(Dt().scrollToTop())}),ze(2,"i",4),H()()}}let Mat=(()=>{class e{constructor(n,i){this.scroll=n,this.router=i,this.pageYoffset=0}onScroll(n){this.pageYoffset=window.pageYOffset}ngOnInit(){this.setUpAnalytics()}scrollToTop(){this.scroll.scrollToPosition([0,0])}setUpAnalytics(){this.router.events.pipe(vi(n=>n instanceof Cc)).subscribe(n=>{gtag("config","UA-34941429-8",{page_path:n.urlAfterRedirects})})}}return e.\u0275fac=function(n){return new(n||e)(U(R0),U(Qn))},e.\u0275cmp=An({type:e,selectors:[["app-root"]],hostBindings:function(n,i){1&n&&st("scroll",function(o){return i.onScroll(o)},0,p7)},decls:6,vars:1,consts:[["report",""],["class","scroll-to-top show-scrollTop",3,"click",4,"ngIf"],[1,"scroll-to-top","show-scrollTop",3,"click"],[1,"btn","btn-highlight","btn-circle",3,"click"],[1,"bi","bi-chevron-up"]],template:function(n,i){1&n&&(j(0,"div",null,0),ze(2,"header-component")(3,"router-outlet"),Ye(4,Nat,3,0,"div",1),H(),ze(5,"footer")),2&n&&(oe(4),_e("ngIf",i.pageYoffset>0))},dependencies:[du,Dk,Tat,Aat],styles:[".scroll-to-top[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px;opacity:0;transition:all .2s ease-in-out}.show-scrollTop[_ngcontent-%COMP%]{opacity:1;transition:all .2s ease-in-out}"]}),e})(),kat=(()=>{class e{constructor(n){this.apparelService=n}resolve(n,i){return this.apparelService.getCompany(+n.params.id)}}return e.\u0275fac=function(n){return new(n||e)(he(mg))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();function whe(e){return new ne(3e3,!1)}function flt(){return typeof window<"u"&&typeof window.document<"u"}function CB(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function qd(e){switch(e.length){case 0:return new ny;case 1:return e[0];default:return new fG(e)}}function Ehe(e,t,n,i,r=new Map,o=new Map){const s=[],a=[];let l=-1,u=null;if(i.forEach(c=>{const d=c.get("offset"),f=d==l,h=f&&u||new Map;c.forEach((p,g)=>{let m=g,_=p;if("offset"!==g)switch(m=t.normalizePropertyName(m,s),_){case"!":_=r.get(g);break;case pu:_=o.get(g);break;default:_=t.normalizeStyleValue(g,m,_,s)}h.set(m,_)}),f||a.push(h),u=h,l=d}),s.length)throw function elt(e){return new ne(3502,!1)}();return a}function SB(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&xB(n,"start",e)));break;case"done":e.onDone(()=>i(n&&xB(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&xB(n,"destroy",e)))}}function xB(e,t,n){const o=TB(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,n.totalTime??e.totalTime,!!n.disabled),s=e._data;return null!=s&&(o._data=s),o}function TB(e,t,n,i,r="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Zo(e,t,n){let i=e.get(t);return i||e.set(t,i=n),i}function Dhe(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}let AB=(e,t)=>!1,Che=(e,t,n)=>[],She=null;function NB(e){const t=e.parentNode||e.host;return t===She?null:t}(CB()||typeof Element<"u")&&(flt()?(She=(()=>document.documentElement)(),AB=(e,t)=>{for(;t;){if(t===e)return!0;t=NB(t)}return!1}):AB=(e,t)=>e.contains(t),Che=(e,t,n)=>{if(n)return Array.from(e.querySelectorAll(t));const i=e.querySelector(t);return i?[i]:[]});let fp=null,xhe=!1;const The=AB,Ahe=Che;let Nhe=(()=>{class e{validateStyleProperty(n){return function plt(e){fp||(fp=function glt(){return typeof document<"u"?document.body:null}()||{},xhe=!!fp.style&&"WebkitAppearance"in fp.style);let t=!0;return fp.style&&!function hlt(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in fp.style,!t&&xhe&&(t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in fp.style)),t}(n)}matchesElement(n,i){return!1}containsElement(n,i){return The(n,i)}getParentElement(n){return NB(n)}query(n,i,r){return Ahe(n,i,r)}computeStyle(n,i,r){return r||""}animate(n,i,r,o,s,a=[],l){return new ny(r,o)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})(),MB=(()=>{class e{}return e.NOOP=new Nhe,e})();const kB="ng-enter",wA="ng-leave",EA="ng-trigger",DA=".ng-trigger",khe="ng-animating",IB=".ng-animating";function nc(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:OB(parseFloat(t[1]),t[2])}function OB(e,t){return"s"===t?1e3*e:e}function CA(e,t,n){return e.hasOwnProperty("duration")?e:function ylt(e,t,n){let r,o=0,s="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(whe()),{duration:0,delay:0,easing:""};r=OB(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=OB(parseFloat(l),a[4]));const u=a[5];u&&(s=u)}else r=e;if(!n){let a=!1,l=t.length;r<0&&(t.push(function Iat(){return new ne(3100,!1)}()),a=!0),o<0&&(t.push(function Oat(){return new ne(3101,!1)}()),a=!0),a&&t.splice(l,0,whe())}return{duration:r,delay:o,easing:s}}(e,t,n)}function ub(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Ihe(e){const t=new Map;return Object.keys(e).forEach(n=>{t.set(n,e[n])}),t}function Yd(e,t=new Map,n){if(n)for(let[i,r]of n)t.set(i,r);for(let[i,r]of e)t.set(i,r);return t}function Rhe(e,t,n){return n?t+":"+n+";":""}function Fhe(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=Rhe(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Rhe(0,Elt(n),e.style[n]));e.setAttribute("style",t)}function Hl(e,t,n){e.style&&(t.forEach((i,r)=>{const o=FB(r);n&&!n.has(r)&&n.set(r,e.style[o]),e.style[o]=i}),CB()&&Fhe(e))}function hp(e,t){e.style&&(t.forEach((n,i)=>{const r=FB(i);e.style[r]=""}),CB()&&Fhe(e))}function cb(e){return Array.isArray(e)?1==e.length?e[0]:cG(e):e}const RB=new RegExp("{{\\s*(.+?)\\s*}}","g");function Phe(e){let t=[];if("string"==typeof e){let n;for(;n=RB.exec(e);)t.push(n[1]);RB.lastIndex=0}return t}function db(e,t,n){const i=e.toString(),r=i.replace(RB,(o,s)=>{let a=t[s];return null==a&&(n.push(function Fat(e){return new ne(3003,!1)}()),a=""),a.toString()});return r==i?e:r}function SA(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const wlt=/-+([a-z0-9])/g;function FB(e){return e.replace(wlt,(...t)=>t[1].toUpperCase())}function Elt(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function es(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw function Pat(e){return new ne(3004,!1)}()}}function Lhe(e,t){return window.getComputedStyle(e)[t]}function Alt(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(i=>function Nlt(e,t,n){if(":"==e[0]){const l=function Mlt(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(function Xat(e){return new ne(3016,!1)}()),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(function Kat(e){return new ne(3015,!1)}()),t;const r=i[1],o=i[2],s=i[3];t.push($he(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&t.push($he(s,r))}(i,n,t)):n.push(e),n}const NA=new Set(["true","1"]),MA=new Set(["false","0"]);function $he(e,t){const n=NA.has(e)||MA.has(e),i=NA.has(t)||MA.has(t);return(r,o)=>{let s="*"==e||e==r,a="*"==t||t==o;return!s&&n&&"boolean"==typeof r&&(s=r?NA.has(e):MA.has(e)),!a&&i&&"boolean"==typeof o&&(a=o?NA.has(t):MA.has(t)),s&&a}}const klt=new RegExp("s*:selfs*,?","g");function PB(e,t,n,i){return new Ilt(e).build(t,n,i)}class Ilt{constructor(t){this._driver=t}build(t,n,i){const r=new Flt(n);return this._resetContextStyleTimingState(r),es(this,cb(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,r=n.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&n.errors.push(function $at(){return new ne(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,o.push(this.visitState(l,n))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,s.push(l)}else n.errors.push(function Bat(){return new ne(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Phe(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&(SA(o.values()),n.errors.push(function Vat(e,t){return new ne(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=es(this,cb(t.animation),n);return{type:1,matchers:Alt(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:pp(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>es(this,i,n)),options:pp(t.options)}}visitGroup(t,n){const i=n.currentTime;let r=0;const o=t.steps.map(s=>{n.currentTime=i;const a=es(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:pp(t.options)}}visitAnimate(t,n){const i=function Llt(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return LB(CA(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=LB(0,0,"");return o.dynamic=!0,o.strValue=n,o}const r=CA(n,t);return LB(r.duration,r.delay,r.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let r,o=t.styles?t.styles:fs({});if(5==o.type)r=this.visitKeyframes(o,n);else{let s=t.styles,a=!1;if(!s){a=!0;const u={};i.easing&&(u.easing=i.easing),s=fs(u)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===pu?i.push(a):n.errors.push(new ne(3002,!1)):i.push(Ihe(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const u=n.collectedStyles.get(n.currentQuerySelector),c=u.get(l);let d=!0;c&&(o!=r&&o>=c.startTime&&r<=c.endTime&&(n.errors.push(function Uat(e,t,n,i,r){return new ne(3010,!1)}()),d=!1),o=c.startTime),d&&u.set(l,{startTime:o,endTime:r}),n.options&&function blt(e,t,n){const i=t.params||{},r=Phe(e);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(function Rat(e){return new ne(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function Hat(){return new ne(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,u=0;const c=t.steps.map(_=>{const y=this._makeStyleAst(_,n);let v=null!=y.offset?y.offset:function Plt(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(n instanceof Map&&n.has("offset")){const i=n;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(y.styles),b=0;return null!=v&&(o++,b=y.offset=v),l=l||b<0||b>1,a=a||b<u,u=b,s.push(b),y});l&&n.errors.push(function zat(){return new ne(3012,!1)}()),a&&n.errors.push(function Gat(){return new ne(3200,!1)}());const d=t.steps.length;let f=0;o>0&&o<d?n.errors.push(function Wat(){return new ne(3202,!1)}()):0==o&&(f=1/(d-1));const h=d-1,p=n.currentTime,g=n.currentAnimateTimings,m=g.duration;return c.forEach((_,y)=>{const v=f>0?y==h?1:f*y:s[y],b=v*m;n.currentTime=p+g.delay+b,g.duration=b,this._validateStyleAst(_,n),_.offset=v,i.styles.push(_)}),i}visitReference(t,n){return{type:8,animation:es(this,cb(t.animation),n),options:pp(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:pp(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:pp(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,r=t.options||{};n.queryCount++,n.currentQuery=t;const[o,s]=function Olt(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(klt,"")),e=e.replace(/@\*/g,DA).replace(/@\w+/g,n=>DA+"-"+n.slice(1)).replace(/:animating/g,IB),[e,t]}(t.selector);n.currentQuerySelector=i.length?i+" "+o:o,Zo(n.collectedStyles,n.currentQuerySelector,new Map);const a=es(this,cb(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:pp(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function qat(){return new ne(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:CA(t.timings,n.errors,!0);return{type:12,animation:es(this,cb(t.animation),n),timings:i,options:null}}}class Flt{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function pp(e){return e?(e=ub(e)).params&&(e.params=function Rlt(e){return e?ub(e):null}(e.params)):e={},e}function LB(e,t,n){return{duration:e,delay:t,easing:n}}function $B(e,t,n,i,r,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class kA{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Vlt=new RegExp(":enter","g"),Ult=new RegExp(":leave","g");function BB(e,t,n,i,r,o=new Map,s=new Map,a,l,u=[]){return(new Hlt).buildKeyframes(e,t,n,i,r,o,s,a,l,u)}class Hlt{buildKeyframes(t,n,i,r,o,s,a,l,u,c=[]){u=u||new kA;const d=new VB(t,n,u,r,o,c,[]);d.options=l;const f=l.delay?nc(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([s],null,d.errors,l),es(this,i,d);const h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){const m=h[g];if(m.element===n){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return h.length?h.map(p=>p.buildKeyframes()):[$B(n,[],[],[],0,f,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(t.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],n,i),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_applyAnimationRefDelays(t,n,i){for(const r of t){const o=r?.delay;if(o){const s="number"==typeof o?o:nc(db(o,r?.params??{},n.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,n,i){let o=n.currentTimeline.currentTime;const s=null!=i.duration?nc(i.duration):null,a=null!=i.delay?nc(i.delay):null;return 0!==s&&t.forEach(l=>{const u=n.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(t,n){n.updateOptions(t.options,!0),es(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let r=n;const o=t.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=IA);const s=nc(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>es(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let r=n.currentTimeline.currentTime;const o=t.options&&t.options.delay?nc(t.options.delay):0;t.steps.forEach(s=>{const a=n.createSubContext(t.options);o&&a.delayNextStep(o),es(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return CA(n.params?db(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,r=t.options||{},o=r.delay?nc(r.delay):0;o&&(6===n.previousNode.type||0==i&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=IA);let s=i;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{n.currentQueryIndex=c;const d=n.createSubContext(t.options,u);o&&d.delayNextStep(o),u===n.element&&(l=d.currentTimeline),es(this,t.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,r=n.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1);let l=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const c=n.currentTimeline;l&&c.delayNextStep(l);const d=c.currentTime;es(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const IA={};class VB{constructor(t,n,i,r,o,s,a,l){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=IA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new OA(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=nc(i.duration)),null!=i.delay&&(r.delay=nc(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=db(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return t}createSubContext(t=null,n,i){const r=n||this.element,o=new VB(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=IA,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const r={duration:n??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new zlt(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Vlt,"."+this._enterClassName)).replace(Ult,"."+this._leaveClassName);let u=this._driver.query(this.element,t,1!=i);0!==i&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&0==a.length&&s.push(function Yat(e){return new ne(3014,!1)}()),a}}class OA{constructor(t,n,i,r){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new OA(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles.set(t,n),this._globalTimelineStyles.set(t,n),this._styleSummary.set(t,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||pu),this._currentKeyframe.set(n,pu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,r){n&&this._previousKeyframe.set("easing",n);const o=r&&r.params||{},s=function Glt(e,t){const n=new Map;let i;return e.forEach(r=>{if("*"===r){i=i||t.keys();for(let o of i)n.set(o,pu)}else Yd(r,n)}),n}(t,this._globalTimelineStyles);for(let[a,l]of s){const u=db(l,o,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??pu),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,n)=>{this._currentKeyframe.set(n,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,t)}))}snapshotCurrentStyles(){for(let[t,n]of this._localTimelineStyles)this._pendingStyles.set(t,n),this._updateStyle(t,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((n,i)=>{const r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const u=Yd(a,new Map,this._backFill);u.forEach((c,d)=>{"!"===c?t.add(d):c===pu&&n.add(d)}),i||u.set("offset",l/this.duration),r.push(u)});const o=t.size?SA(t.values()):[],s=n.size?SA(n.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return $B(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class zlt extends OA{constructor(t,n,i,r,o,s,a=!1){super(t,n,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const o=[],s=i+n,a=n/s,l=Yd(t[0]);l.set("offset",0),o.push(l);const u=Yd(t[0]);u.set("offset",jhe(a)),o.push(u);const c=t.length-1;for(let d=1;d<=c;d++){let f=Yd(t[d]);const h=f.get("offset");f.set("offset",jhe((n+h*i)/s)),o.push(f)}i=s,n=0,r="",t=o}return $B(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function jhe(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class jB{}const Wlt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class qlt extends jB{normalizePropertyName(t,n){return FB(t)}normalizeStyleValue(t,n,i,r){let o="";const s=i.toString().trim();if(Wlt.has(n)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Lat(e,t){return new ne(3005,!1)}())}return s+o}}function Uhe(e,t,n,i,r,o,s,a,l,u,c,d,f){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:f}}const UB={};class Hhe{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,r){return function Ylt(e,t,n,i,r){return e.some(o=>o(t,n,i,r))}(this.ast.matchers,t,n,i,r)}buildStyles(t,n,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(n,i):new Map}build(t,n,i,r,o,s,a,l,u,c){const d=[],f=this.ast.options&&this.ast.options.params||UB,p=this.buildStyles(i,a&&a.params||UB,d),g=l&&l.params||UB,m=this.buildStyles(r,g,d),_=new Set,y=new Map,v=new Map,b="void"===r,w={params:Klt(g,f),delay:this.ast.options?.delay},D=c?[]:BB(t,n,this.ast.animation,o,s,p,m,w,u,d);let E=0;if(D.forEach(N=>{E=Math.max(N.duration+N.delay,E)}),d.length)return Uhe(n,this._triggerName,i,r,b,p,m,[],[],y,v,E,d);D.forEach(N=>{const k=N.element,R=Zo(y,k,new Set);N.preStyleProps.forEach(P=>R.add(P));const F=Zo(v,k,new Set);N.postStyleProps.forEach(P=>F.add(P)),k!==n&&_.add(k)});const C=SA(_.values());return Uhe(n,this._triggerName,i,r,b,p,m,D,C,y,v,E)}}function Klt(e,t){const n=ub(t);for(const i in e)e.hasOwnProperty(i)&&null!=e[i]&&(n[i]=e[i]);return n}class Xlt{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i=new Map,r=ub(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=db(s,r,n));const l=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,l,s,n),i.set(l,s)})}),i}}class Jlt{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new Xlt(r.style,r.options&&r.options.params||{},i))}),zhe(this.states,"true","1"),zhe(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Hhe(t,r,this.states))}),this.fallbackTransition=function Zlt(e,t,n){return new Hhe(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,r){return this.transitionFactories.find(s=>s.match(t,n,i,r))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function zhe(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const eut=new kA;class tut{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,n){const i=[],o=PB(this._driver,n,i,[]);if(i.length)throw function tlt(e){return new ne(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,n,i){const r=t.element,o=Ehe(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const r=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=BB(this._driver,n,o,kB,wA,new Map,new Map,i,eut,r),s.forEach(c=>{const d=Zo(a,c.element,new Map);c.postStyleProps.forEach(f=>d.set(f,null))})):(r.push(function nlt(){return new ne(3300,!1)}()),s=[]),r.length)throw function ilt(e){return new ne(3504,!1)}();a.forEach((c,d)=>{c.forEach((f,h)=>{c.set(h,this._driver.computeStyle(d,h,pu))})});const u=qd(s.map(c=>{const d=a.get(c.element);return this._buildPlayer(c,new Map,d)}));return this._playersById.set(t,u),u.onDestroy(()=>this.destroy(t)),this.players.push(u),u}destroy(t){const n=this._getPlayer(t);n.destroy(),this._playersById.delete(t);const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById.get(t);if(!n)throw function rlt(e){return new ne(3301,!1)}();return n}listen(t,n,i,r){const o=TB(n,"","","");return SB(this._getPlayer(t),i,o,r),()=>{}}command(t,n,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,n,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Ghe="ng-animate-queued",HB="ng-animate-disabled",sut=[],Whe={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},aut={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$s="__ng_removed";class zB{constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function dut(e){return e??null}(i?t.value:t),i){const o=ub(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const fb="void",GB=new zB(fb);class lut{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Bs(n,this._hostClassName)}listen(t,n,i,r){if(!this._triggers.has(n))throw function olt(e,t){return new ne(3302,!1)}();if(null==i||0==i.length)throw function slt(e){return new ne(3303,!1)}();if(!function fut(e){return"start"==e||"done"==e}(i))throw function alt(e,t){return new ne(3400,!1)}();const o=Zo(this._elementListeners,t,[]),s={name:n,phase:i,callback:r};o.push(s);const a=Zo(this._engine.statesByElement,t,new Map);return a.has(n)||(Bs(t,EA),Bs(t,EA+"-"+n),a.set(n,GB)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(t,n){return!this._triggers.has(t)&&(this._triggers.set(t,n),!0)}_getTrigger(t){const n=this._triggers.get(t);if(!n)throw function llt(e){return new ne(3401,!1)}();return n}trigger(t,n,i,r=!0){const o=this._getTrigger(n),s=new WB(this.id,n,t);let a=this._engine.statesByElement.get(t);a||(Bs(t,EA),Bs(t,EA+"-"+n),this._engine.statesByElement.set(t,a=new Map));let l=a.get(n);const u=new zB(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(n,u),l||(l=GB),u.value!==fb&&l.value===u.value){if(!function gut(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const o=n[r];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(l.params,u.params)){const g=[],m=o.matchStyles(l.value,l.params,g),_=o.matchStyles(u.value,u.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{hp(t,m),Hl(t,_)})}return}const f=Zo(this._engine.playersByElement,t,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let h=o.matchTransition(l.value,u.value,t,u.params),p=!1;if(!h){if(!r)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:h,fromState:l,toState:u,player:s,isFallbackTransition:p}),p||(Bs(t,Ghe),s.onStart(()=>{I_(t,Ghe)})),s.onDone(()=>{let g=this.players.indexOf(s);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(t);if(m){let _=m.indexOf(s);_>=0&&m.splice(_,1)}}),this.players.push(s),f.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(n=>n.delete(t)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,DA,!0);i.forEach(r=>{if(r[$s])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,n,i,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){const c=this.trigger(t,u,fb,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,s),i&&qd(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const r=new Set;n.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,u=i.get(s)||GB,c=new zB(fb),d=new WB(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:u,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,n);else{const o=t[$s];(!o||o===Whe)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){Bs(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=TB(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,SB(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class uut{constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new lut(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){const l=r.get(a);if(l){const u=i.indexOf(l);i.splice(u+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let r=this._namespaceLookup[t];r&&r.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}return n}trigger(t,n,i,r){if(RA(n)){const o=this._fetchNamespace(t);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(t,n,i,r){if(!RA(n))return;const o=n[$s];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Bs(t,HB)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),I_(t,HB))}removeNode(t,n,i,r){if(RA(n)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r),i){const s=this.namespacesByHostElement.get(n);s&&s.id!==t&&s.removeNode(n,r)}}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,i,r,o){this.collectedLeaveElements.push(n),n[$s]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,n,i,r,o){return RA(n)?this._fetchNamespace(t).listen(n,i,r,o):()=>{}}_buildInstruction(t,n,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,n,o)}destroyInnerAnimations(t){let n=this.driver.query(t,DA,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,IB,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return qd(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[$s];if(n&&n.setForRemoval){if(t[$s]=Whe,n.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}t.classList?.contains(HB)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Bs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?qd(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function ult(e){return new ne(3402,!1)}()}_flushAnimations(t,n){const i=new kA,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(T=>{c.add(T);const I=this.driver.query(T,".ng-animate-queued",!0);for(let A=0;A<I.length;A++)c.add(I[A])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=Khe(f,this.collectedEnterElements),p=new Map;let g=0;h.forEach((T,I)=>{const A=kB+g++;p.set(I,A),T.forEach(M=>Bs(M,A))});const m=[],_=new Set,y=new Set;for(let T=0;T<this.collectedLeaveElements.length;T++){const I=this.collectedLeaveElements[T],A=I[$s];A&&A.setForRemoval&&(m.push(I),_.add(I),A.hasAnimation?this.driver.query(I,".ng-star-inserted",!0).forEach(M=>_.add(M)):y.add(I))}const v=new Map,b=Khe(f,Array.from(_));b.forEach((T,I)=>{const A=wA+g++;v.set(I,A),T.forEach(M=>Bs(M,A))}),t.push(()=>{h.forEach((T,I)=>{const A=p.get(I);T.forEach(M=>I_(M,A))}),b.forEach((T,I)=>{const A=v.get(I);T.forEach(M=>I_(M,A))}),m.forEach(T=>{this.processLeaveNode(T)})});const w=[],D=[];for(let T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(n).forEach(A=>{const M=A.player,O=A.element;if(w.push(M),this.collectedEnterElements.length){const q=O[$s];if(q&&q.setForMove){if(q.previousTriggersValues&&q.previousTriggersValues.has(A.triggerName)){const ue=q.previousTriggersValues.get(A.triggerName),W=this.statesByElement.get(A.element);if(W&&W.has(A.triggerName)){const Z=W.get(A.triggerName);Z.value=ue,W.set(A.triggerName,Z)}}return void M.destroy()}}const L=!d||!this.driver.containsElement(d,O),$=v.get(O),V=p.get(O),B=this._buildInstruction(A,i,V,$,L);if(B.errors&&B.errors.length)return void D.push(B);if(L)return M.onStart(()=>hp(O,B.fromStyles)),M.onDestroy(()=>Hl(O,B.toStyles)),void r.push(M);if(A.isFallbackTransition)return M.onStart(()=>hp(O,B.fromStyles)),M.onDestroy(()=>Hl(O,B.toStyles)),void r.push(M);const z=[];B.timelines.forEach(q=>{q.stretchStartingKeyframe=!0,this.disabledNodes.has(q.element)||z.push(q)}),B.timelines=z,i.append(O,B.timelines),s.push({instruction:B,player:M,element:O}),B.queriedElements.forEach(q=>Zo(a,q,[]).push(M)),B.preStyleProps.forEach((q,ue)=>{if(q.size){let W=l.get(ue);W||l.set(ue,W=new Set),q.forEach((Z,ee)=>W.add(ee))}}),B.postStyleProps.forEach((q,ue)=>{let W=u.get(ue);W||u.set(ue,W=new Set),q.forEach((Z,ee)=>W.add(ee))})});if(D.length){const T=[];D.forEach(I=>{T.push(function clt(e,t){return new ne(3505,!1)}())}),w.forEach(I=>I.destroy()),this.reportError(T)}const E=new Map,C=new Map;s.forEach(T=>{const I=T.element;i.has(I)&&(C.set(I,I),this._beforeAnimationBuild(T.player.namespaceId,T.instruction,E))}),r.forEach(T=>{const I=T.element;this._getPreviousPlayers(I,!1,T.namespaceId,T.triggerName,null).forEach(M=>{Zo(E,I,[]).push(M),M.destroy()})});const N=m.filter(T=>Qhe(T,l,u)),k=new Map;Yhe(k,this.driver,y,u,pu).forEach(T=>{Qhe(T,l,u)&&N.push(T)});const F=new Map;h.forEach((T,I)=>{Yhe(F,this.driver,new Set(T),l,"!")}),N.forEach(T=>{const I=k.get(T),A=F.get(T);k.set(T,new Map([...Array.from(I?.entries()??[]),...Array.from(A?.entries()??[])]))});const P=[],x=[],S={};s.forEach(T=>{const{element:I,player:A,instruction:M}=T;if(i.has(I)){if(c.has(I))return A.onDestroy(()=>Hl(I,M.toStyles)),A.disabled=!0,A.overrideTotalTime(M.totalTime),void r.push(A);let O=S;if(C.size>1){let $=I;const V=[];for(;$=$.parentNode;){const B=C.get($);if(B){O=B;break}V.push($)}V.forEach(B=>C.set(B,O))}const L=this._buildAnimation(A.namespaceId,M,E,o,F,k);if(A.setRealPlayer(L),O===S)P.push(A);else{const $=this.playersByElement.get(O);$&&$.length&&(A.parentPlayer=qd($)),r.push(A)}}else hp(I,M.fromStyles),A.onDestroy(()=>Hl(I,M.toStyles)),x.push(A),c.has(I)&&r.push(A)}),x.forEach(T=>{const I=o.get(T.element);if(I&&I.length){const A=qd(I);T.setRealPlayer(A)}}),r.forEach(T=>{T.parentPlayer?T.syncPlayerEvents(T.parentPlayer):T.destroy()});for(let T=0;T<m.length;T++){const I=m[T],A=I[$s];if(I_(I,wA),A&&A.hasAnimation)continue;let M=[];if(a.size){let L=a.get(I);L&&L.length&&M.push(...L);let $=this.driver.query(I,IB,!0);for(let V=0;V<$.length;V++){let B=a.get($[V]);B&&B.length&&M.push(...B)}}const O=M.filter(L=>!L.destroyed);O.length?hut(this,I,O):this.processLeaveNode(I)}return m.length=0,P.forEach(T=>{this.players.push(T),T.onDone(()=>{T.destroy();const I=this.players.indexOf(T);this.players.splice(I,1)}),T.play()}),P}elementContainsData(t,n){let i=!1;const r=n[$s];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,r,o){let s=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==fb;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,n,i){const o=n.element,s=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const u=l.element,c=u!==o,d=Zo(i,u,[]);this._getPreviousPlayers(u,c,s,a,n.toState).forEach(h=>{const p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}hp(o,n.fromStyles)}_buildAnimation(t,n,i,r,o,s){const a=n.triggerName,l=n.element,u=[],c=new Set,d=new Set,f=n.timelines.map(p=>{const g=p.element;c.add(g);const m=g[$s];if(m&&m.removedBeforeQueried)return new ny(p.duration,p.delay);const _=g!==l,y=function put(e){const t=[];return Xhe(e,t),t}((i.get(g)||sut).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===g),v=o.get(g),b=s.get(g),w=Ehe(0,this._normalizer,0,p.keyframes,v,b),D=this._buildPlayer(p,w,y);if(p.subTimeline&&r&&d.add(g),_){const E=new WB(t,a,g);E.setRealPlayer(D),u.push(E)}return D});u.forEach(p=>{Zo(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function cut(e,t,n){let i=e.get(t);if(i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&e.delete(t)}return i}(this.playersByQueriedElement,p.element,p))}),c.forEach(p=>Bs(p,khe));const h=qd(f);return h.onDestroy(()=>{c.forEach(p=>I_(p,khe)),Hl(l,n.toStyles)}),d.forEach(p=>{Zo(r,p,[]).push(h)}),h}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new ny(t.duration,t.delay)}}class WB{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new ny,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>SB(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){Zo(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function RA(e){return e&&1===e.nodeType}function qhe(e,t){const n=e.style.display;return e.style.display=t??"none",n}function Yhe(e,t,n,i,r){const o=[];n.forEach(l=>o.push(qhe(l)));const s=[];i.forEach((l,u)=>{const c=new Map;l.forEach(d=>{const f=t.computeStyle(u,d,r);c.set(d,f),(!f||0==f.length)&&(u[$s]=aut,s.push(u))}),e.set(u,c)});let a=0;return n.forEach(l=>qhe(l,o[a++])),s}function Khe(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const u=a.parentNode;return l=n.has(u)?u:r.has(u)?1:s(u),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&n.get(l).push(a)}),n}function Bs(e,t){e.classList?.add(t)}function I_(e,t){e.classList?.remove(t)}function hut(e,t,n){qd(n).onDone(()=>e.processLeaveNode(t))}function Xhe(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof fG?Xhe(i.players,t):t.push(i)}}function Qhe(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(o=>r.add(o)):t.set(e,i),n.delete(e),!0}class FA{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new uut(t,n,i),this._timelineEngine=new tut(t,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,n,i,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],c=PB(this._driver,o,l,[]);if(l.length)throw function Zat(e,t){return new ne(3404,!1)}();a=function Qlt(e,t,n){return new Jlt(e,t,n)}(r,c,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,r){this._transitionEngine.insertNode(t,n,i,r)}onRemove(t,n,i,r){this._transitionEngine.removeNode(t,n,r||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,r){if("@"==i.charAt(0)){const[o,s]=Dhe(i);this._timelineEngine.command(o,n,s,r)}else this._transitionEngine.trigger(t,n,i,r)}listen(t,n,i,r,o){if("@"==i.charAt(0)){const[s,a]=Dhe(i);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(t,n,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _ut=(()=>{class e{constructor(n,i,r){this._element=n,this._startStyles=i,this._endStyles=r,this._state=0;let o=e.initialStylesByElement.get(n);o||e.initialStylesByElement.set(n,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Hl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Hl(this._element,this._initialStyles),this._endStyles&&(Hl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(hp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hp(this._element,this._endStyles),this._endStyles=null),Hl(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function qB(e){let t=null;return e.forEach((n,i)=>{(function yut(e){return"display"===e||"position"===e})(i)&&(t=t||new Map,t.set(i,n))}),t}class Jhe{constructor(t,n,i,r){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const n=[];return t.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(t,n,i){return t.animate(this._convertKeyframesToObject(n),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:Lhe(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const n="start"===t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class vut{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,n){return!1}containsElement(t,n){return The(t,n)}getParentElement(t){return NB(t)}query(t,n,i){return Ahe(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}animate(t,n,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const u=new Map,c=s.filter(h=>h instanceof Jhe);(function Dlt(e,t){return 0===e||0===t})(i,r)&&c.forEach(h=>{h.currentSnapshot.forEach((p,g)=>u.set(g,p))});let d=function vlt(e){return e.length?e[0]instanceof Map?e:e.map(t=>Ihe(t)):[]}(n).map(h=>Yd(h));d=function Clt(e,t,n){if(n.size&&t.length){let i=t[0],r=[];if(n.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,Lhe(e,a)))}}return t}(t,d,u);const f=function mut(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=qB(t[0]),t.length>1&&(i=qB(t[t.length-1]))):t instanceof Map&&(n=qB(t)),n||i?new _ut(e,n,i):null}(t,d);return new Jhe(t,d,l,f)}}let but=(()=>{class e extends uG{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:Hs.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(n)?cG(n):n;return Zhe(this._renderer,null,i,"register",[r]),new wut(i,this._renderer)}}return e.\u0275fac=function(n){return new(n||e)(he(Vp),he(un))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();class wut extends class vxe{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new Eut(this._id,t,n||{},this._renderer)}}class Eut{constructor(t,n,i,r){this.id=t,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return Zhe(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Zhe(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}const epe="@.disabled";let Dut=(()=>{class e{constructor(n,i,r){this.delegate=n,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(n,i){const o=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let c=this._rendererCache.get(o);return c||(c=new tpe("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,c)),c}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(s,a,n,c.name,c)};return i.data.animation.forEach(l),new Cut(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,r){n>=0&&n<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(n){return new(n||e)(he(Vp),he(FA),he(Ut))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();class tpe{constructor(t,n,i,r){this.namespaceId=t,this.delegate=n,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,r=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,r)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==epe?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class Cut extends tpe{constructor(t,n,i,r,o){super(n,i,r,o),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==epe?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.slice(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const r=function Sut(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let o=n.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function xut(e){const t=e.indexOf(".");return[e.substring(0,t),e.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,n,i)}}let Tut=(()=>{class e extends FA{constructor(n,i,r,o){super(n.body,i,r)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(n){return new(n||e)(he(un),he(MB),he(jB),he(lg))},e.\u0275prov=Ae({token:e,factory:e.\u0275fac}),e})();const npe=[{provide:uG,useClass:but},{provide:jB,useFactory:function Aut(){return new qlt}},{provide:FA,useClass:Tut},{provide:Vp,useFactory:function Nut(e,t,n){return new Dut(e,t,n)},deps:[Yw,FA,Ut]}],YB=[{provide:MB,useFactory:()=>new vut},{provide:NU,useValue:"BrowserAnimations"},...npe],ipe=[{provide:MB,useClass:Nhe},{provide:NU,useValue:"NoopAnimations"},...npe];let Mut=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?ipe:YB}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Et({providers:YB,imports:[WH]}),e})(),kut=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=kt({type:e,bootstrap:[Mat]}),e.\u0275inj=Et({providers:[mg,kat],imports:[xW,WH,Sat,Jnt,Lk,XNe,Mut]}),e})();(function Zbe(){WU=!1})(),FDe().bootstrapModule(kut).catch(e=>console.error(e))},564:O_=>{var mb=/("(?:[^\\"]|\\.)*")|[:,]/g;O_.exports=function(Kd,Vs){var ic,mp,rc;return Vs=Vs||{},ic=JSON.stringify([1],void 0,void 0===Vs.indent?2:Vs.indent).slice(2,-3),mp=""===ic?1/0:void 0===Vs.maxLength?80:Vs.maxLength,rc=Vs.replacer,function _p(ki,Xd,R_){var Qd,yo,zl,Jd,Zd,ef,qr,gt,tf,nf,ts,Ii;if(ki&&"function"==typeof ki.toJSON&&(ki=ki.toJSON()),void 0===(ts=JSON.stringify(ki,rc)))return ts;if(ts.length<=(qr=mp-Xd.length-R_)&&(tf=ts.replace(mb,function(_b,yb){return yb||_b+" "})).length<=qr)return tf;if(null!=rc&&(ki=JSON.parse(ts),rc=void 0),"object"==typeof ki&&null!==ki){if(gt=Xd+ic,zl=[],yo=0,Array.isArray(ki))for(nf="[",Qd="]",qr=ki.length;yo<qr;yo++)zl.push(_p(ki[yo],gt,yo===qr-1?0:1)||"null");else for(nf="{",Qd="}",qr=(ef=Object.keys(ki)).length;yo<qr;yo++)Jd=ef[yo],Zd=JSON.stringify(Jd)+": ",void 0!==(Ii=_p(ki[Jd],gt,Zd.length+(yo===qr-1?0:1)))&&zl.push(Zd+Ii);if(zl.length>0)return[nf,ic+zl.join(",\n"+gt),Qd].join("\n"+Xd)}return ts}(Kd,"",0)}}},O_=>{O_(O_.s=830)}]);